/* (c) Domos FS. Includes Almond (http://github.com/requirejs/almond/LICENSE) and Text (http://github.com/requirejs/text/LICENSE) */
var requirejs,require,define;!function(m){var r,o,f,b,v={},y={},h={},g={},n=Object.prototype.hasOwnProperty,i=[].slice,T=/\.js$/;function I(t,e){return n.call(t,e)}function d(t,e){var n,i,a,r,o,d,l,s,u,c,p,m=e&&e.split("/"),f=h.map,b=f&&f["*"]||{};if(t){for(o=(t=t.split("/")).length-1,h.nodeIdCompat&&T.test(t[o])&&(t[o]=t[o].replace(T,"")),"."===t[0].charAt(0)&&m&&(t=m.slice(0,m.length-1).concat(t)),u=0;u<t.length;u++)if("."===(p=t[u]))t.splice(u,1),u-=1;else if(".."===p){if(0===u||1===u&&".."===t[2]||".."===t[u-1])continue;0<u&&(t.splice(u-1,2),u-=2)}t=t.join("/")}if((m||b)&&f){for(u=(n=t.split("/")).length;0<u;u-=1){if(i=n.slice(0,u).join("/"),m)for(c=m.length;0<c;c-=1)if((a=f[m.slice(0,c).join("/")])&&(a=a[i])){r=a,d=u;break}if(r)break;!l&&b&&b[i]&&(l=b[i],s=u)}!r&&l&&(r=l,d=s),r&&(n.splice(0,d,r),t=n.join("/"))}return t}function C(e,n){return function(){var t=i.call(arguments,0);return"string"!=typeof t[0]&&1===t.length&&t.push(null),o.apply(m,t.concat([e,n]))}}function w(e){return function(t){v[e]=t}}function k(t){if(I(y,t)){var e=y[t];delete y[t],g[t]=!0,r.apply(m,e)}if(!I(v,t)&&!I(g,t))throw new Error("No "+t);return v[t]}function l(t){var e,n=t?t.indexOf("!"):-1;return-1<n&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function E(t){return t?l(t):[]}f=function(t,e){var n,i,a=l(t),r=a[0],o=e[1];return t=a[1],r&&(n=k(r=d(r,o))),r?t=n&&n.normalize?n.normalize(t,(i=o,function(t){return d(t,i)})):d(t,o):(r=(a=l(t=d(t,o)))[0],t=a[1],r&&(n=k(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:n}},b={require:function(t){return C(t)},exports:function(t){var e=v[t];return void 0!==e?e:v[t]={}},module:function(t){return{id:t,uri:"",exports:v[t],config:(e=t,function(){return h&&h.config&&h.config[e]||{}})};var e}},r=function(t,e,n,i){var a,r,o,d,l,s,u,c=[],p=typeof n;if(s=E(i=i||t),"undefined"===p||"function"===p){for(e=!e.length&&n.length?["require","exports","module"]:e,l=0;l<e.length;l+=1)if("require"===(r=(d=f(e[l],s)).f))c[l]=b.require(t);else if("exports"===r)c[l]=b.exports(t),u=!0;else if("module"===r)a=c[l]=b.module(t);else if(I(v,r)||I(y,r)||I(g,r))c[l]=k(r);else{if(!d.p)throw new Error(t+" missing "+r);d.p.load(d.n,C(i,!0),w(r),{}),c[l]=v[r]}o=n?n.apply(v[t],c):void 0,t&&(a&&a.exports!==m&&a.exports!==v[t]?v[t]=a.exports:o===m&&u||(v[t]=o))}else t&&(v[t]=n)},requirejs=require=o=function(t,e,n,i,a){if("string"==typeof t)return b[t]?b[t](e):k(f(t,E(e)).f);if(!t.splice){if((h=t).deps&&o(h.deps,h.callback),!e)return;e.splice?(t=e,e=n,n=null):t=m}return e=e||function(){},"function"==typeof n&&(n=i,i=a),i?r(m,t,e,n):setTimeout(function(){r(m,t,e,n)},4),o},o.config=function(t){return o(t)},requirejs._defined=v,(define=function(t,e,n){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(n=e,e=[]),I(v,t)||I(y,t)||(y[t]=[t,e,n])}).amd={jQuery:!0}}(),define("/home/philippe/domos/views/@next/Domos/domos-web/node_modules/almond/almond.js",function(){}),define("jquery",["require","exports"],function(t,e){"use strict";return jQuery}),define("i18next",[],function(){return i18next}),define("i18nextChainedBackend",[],function(){return i18nextChainedBackend}),define("i18nextLocalStorageBackend",[],function(){return i18nextLocalStorageBackend}),define("i18nextXHRBackend",[],function(){return i18nextXHRBackend}),define("jquery-i18next",[],function(){return jqueryI18next}),define("lodash",[],function(){return _}),define("core/util/Loader",["require","exports","jquery"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Loader=void 0;var i=function(){function t(){}return t.add=function(t){t&&this.promises.push(t)},t.load=function(){return Promise.all(this.promises)},t.promises=[],t}();(e.Loader=i).add(new Promise(function(t){return n(document).ready(function(){return t()})}))}),define("js-cookie",[],function(){return Cookies}),define("core/ApplicationConstants",["require","exports","lodash"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ApplicationConstants=void 0;function a(t){if(window&&window.hasOwnProperty(t))return window[t]}function n(t,e){var n=a(t);return i.isNil(n)?e:n}var r=function(){function t(){}return t.getUrlContext=function(){return n("gURLContext","")},t.getVersion=function(){return n("gVersion","")},t.getLanguage=function(){return a("gLanguage")},t.getTenantId=function(){return a("gTenant")},t.getTenantName=function(){return a("gTenantName")},t.isMultiTenant=function(){return a("gMultiTenant")||!1},t.getUserName=function(){return a("gUserName")},t.isAdministrator=function(){return a("gUserAdmin")||!1},t.isSimulation=function(){return a("gSimulation")||!1},t.getObject=function(){return a("gObject")},t}();e.ApplicationConstants=r}),define("core/web/WebStorage",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebStorage=void 0;var n=function(){function t(t,e){this.prefix=t,this.storage=e}return t.prototype.getItem=function(t){return this.storage.getItem(this._key(t))},t.prototype.setItem=function(t,e){var n=this._key(t);e?this.storage.setItem(n,e):this.storage.removeItem(n)},t.prototype.removeItem=function(t){this.setItem(t,void 0)},t.prototype.getObject=function(t){var e=this.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch(t){return null}},t.prototype.setObject=function(t,e){var n=e?JSON.stringify(e):void 0;this.setItem(t,n)},t.prototype._key=function(t){return this.prefix+t},t}();e.WebStorage=n}),define("core/web/WebStorages",["require","exports","core/ApplicationConstants","core/web/WebStorage"],function(t,e,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebStorages=void 0;var n,i,o=((i=(n=a.ApplicationConstants.getUrlContext())?"/"===n.charAt(0)?n.substring(1):n:"")&&(i+="_"),i),d="cache_";var l=function(){function e(){}return e.siteLocalStorage=function(){if(e._siteLocal)return e._siteLocal;var t=e.createSite(window.localStorage);return e._siteLocal=t},e.siteSessionStorage=function(){if(e._siteSession)return e._siteSession;var t=e.createSite(window.sessionStorage);return e._siteSession=t},e.siteCacheStorage=function(){if(e._siteCache)return e._siteCache;var t=e.createSite(window.localStorage,d);return e._siteCache=t},e.tenantLocalStorage=function(){if(e._tenantLocal)return e._tenantLocal;var t=e.createTenant(window.localStorage);return e._tenantLocal=t},e.tenantSessionStorage=function(){if(e._tenantSession)return e._tenantSession;var t=e.createTenant(window.sessionStorage);return e._tenantSession=t},e.tenantCacheStorage=function(){if(e._tenantCache)return e._tenantCache;var t=e.createTenant(window.localStorage,d);return e._tenantCache=t},e.clearCaches=function(){!function(e){for(var t=e.length,n=[],i=0;i<t;++i){var a=e.key(i);a&&a.startsWith(d)&&n.push(a)}n.forEach(function(t){return e.removeItem(t)})}(window.localStorage)},e.cleanUp=function(){e.clearCaches(),window.sessionStorage.clear()},e.createSite=function(t,e){return void 0===e&&(e=""),new r.WebStorage(e+o,t)},e.createTenant=function(t,e){void 0===e&&(e="");var n=a.ApplicationConstants.getTenantId();if(!n)throw new Error("Cannot use tenant storages without tenant");var i=e+o+n+"_";return new r.WebStorage(i,t)},e}();e.WebStorages=l}),define("core/locale/LanguageService",["require","exports","js-cookie","core/ApplicationConstants","../web/WebStorages"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageService=void 0;function r(t){return t&&t.toLowerCase().startsWith("fr")?"fr-FR":"en-US"}var o=function(){function t(){}return t.getLanguage=function(){return r(i.ApplicationConstants.getLanguage())},t.getLanguagePart=function(){return"fr-FR"===t.getLanguage()?"fr":"en"},t.getDefaultLanguagePart=function(){return"en"},t.getAllowedLanguageParts=function(){return["en","fr"]},t.setLanguage=function(t){n.set("lang",r(t)),a.WebStorages.clearCaches(),window.location.reload()},t}();e.LanguageService=o}),define("core/web/WebLocation",["require","exports","core/ApplicationConstants"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebLocation=void 0;function i(t){return t?"/"===t.charAt(0)?t.substring(1):t:""}function a(t){return t?"/"===t.charAt(t.length-1)?t:t+"/":"/"}var r,o=a((r=n.ApplicationConstants.getUrlContext())?"/"===r.charAt(0)?r:"/"+r:"/"),d="/static"+o+i(a(n.ApplicationConstants.getVersion())),l=d+"img/",s=d+"templates/",u=d+"docfi/",c=d+"svg/defs.svg",p=function(){function a(){}return a.getRoot=function(){return o},a.resolveToUrl=function(t){var e=a.resolve(t);return new URL(window.location.origin+e)},a.resolve=function(t){return o+i(t)},a.resolveKendo=function(t){return a.resolve("#!"+t)},a.setPageTitle=function(t){var e=t||"Domos";document.title=e,history.replaceState({},e,window.location.href)},a.getResourceRoot=function(){return d},a.resolveResource=function(t){return d+i(t)},a.getImageRoot=function(){return l},a.getSvgDefs=function(){return c},a.resolveImage=function(t){return l+i(t)},a.resolveHtml=function(t){return s+i(t)},a.resolveDocFi=function(t){return u+i(t)},a.close=function(e){void 0===e&&(e=!1);var n=function(){var t=window.location.origin+a.resolve("/");e?window.location.replace(t):window.location.assign(t)},t=document.referrer;if(t&&0<=t.indexOf(window.location.host)){var i=window.location.toString();window.history.back(),setTimeout(function(){var t=window.location.toString();i===t&&n()},500)}else n()},a}();e.WebLocation=p}),define("tslib",[],function(){return window}),define("core/util/Logger",["require","exports","tslib"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;var n=function(){function t(){}return t.error=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];console.error.apply(console,i.__spreadArrays([t],e))},t.log=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];console.log.apply(console,i.__spreadArrays([t],e))},t}();e.Logger=n}),define("i18n",["require","exports","i18next","i18nextChainedBackend","i18nextLocalStorageBackend","i18nextXHRBackend","jquery-i18next","lodash","jquery","core/util/Loader","core/locale/LanguageService","core/web/WebStorages","core/web/WebLocation","core/util/Logger"],function(t,e,i,a,r,o,d,l,s,n,u,c,p,m){"use strict";var f,b;Object.defineProperty(e,"__esModule",{value:!0}),e.exists=e.t=e.I18N=void 0,f=["site","ui","object","data","portfolio","dashboards","flow","risk","tags","history","metric","computation","workflow","reporting","settings","errors","stress","strategy","compliance","documents","lp","preference","erroruser","download","investment","email","bank","scripts","taskForm","accounting","portal","checklist"],b=new Promise(function(n,t){i.use(a).init({lng:u.LanguageService.getLanguagePart(),fallbackLng:u.LanguageService.getDefaultLanguagePart(),whitelist:u.LanguageService.getAllowedLanguageParts(),ns:f,backend:{backends:[r,o],backendOptions:[{prefix:c.WebStorages.siteCacheStorage().prefix+"i18n_"},{loadPath:p.WebLocation.resolve("public/resources.json?lng={{lng}}&ns={{ns}}")}]},interpolation:{format:function(t,e){return l.isDate(t)?(e=e||"d",kendo.toString(t,e)):t}}},function(t,e){t&&m.Logger.error("Error while initializing i18n",t),d.init(i,s,{}),n()})}),n.Loader.add(b);var v=function(){function t(){}return t.t=function(t,e){return i.t(t,e)},t.exists=function(t){return i.exists(t)},t.localize=function(t){l.isString(t)?s(t).localize():t.localize()},t}();e.I18N=v,e.t=v.t,e.exists=v.exists}),function(){define("site/routemap",[],function(){var t;return(t={notfound:"/notfound",home:"/",settings:"/settings",portfolios:"/portfolios","deal-flow":"/deal-flow",risk:"/risk",reporting:"/reporting",dashboards:"/dashboards",data:"/data",stress:"/stress",changePassword:"/change.password(/:id)",import:"/import",objectCreate:"/object/create/:category(/:portfolioOrOwner)",objectEdit:"/object/edit/:id",objectHistory:"/object/history/:id(/:history)",objectMetric:"/object/metric/:id(/:metric)",objectFee:"/object/fee/:id",objectSubscription:"/object/subscription/:id",objectRedemption:"/object/redemption/:id",objectCompanySubscription:"/object/company/subscription/:id",objectDerivativeSubscription:"/object/derivative/subscription/:id",objectDebtSubscription:"/object/debt/subscription/:id",portfolioCompany:"/portfolios/company/:company",portfolioInvestor:"/portfolio/investor/:entity",forwardForex:"/history/forward/forex/:portfolio",riskLocal:"/risk/local/:profile/:level/:object",riskIndicatorCreate:"/risk/indicator/create/:type",riskIndicatorEdit:"/risk/indicator/edit/:id",riskRuleEdit:"/risk/rule(/:id)",riskProfileEdit:"/risk/profile/edit(/:id)",riskProfileClone:"/risk/profile/clone/:id",stressProfileEdit:"/stress/profile(/:id)",reportingActivityEdit:"/reporting/activity(/:id)",reportingInstanceCreate:"/reporting/instance/create(/:activity)(/:workflow)(/:documentList)",reportingInstanceEdit:"/reporting/instance/edit/:id",reportingInstanceDocumentEdit:"/reporting/instance/document/:id",reportingImport:"/reporting/import",reportingCssfIdentifiers:"/reporting/cssf/identifiers",dealflowDocumentEdit:"/dealflow/document/:id",dealflowPipeManagerEdit:"/dealflow/pipe(/:id)",userGroupEdit:"/user/group(/:id)",users:"/users",jobs:"/jobs",dashboardSetup:"/dashboards/setup",dashboardDashboardEdit:"/dashboards/dashboard/edit(/:id)",dashboardDashboardClone:"/dashboards/dashboard/clone/:id",dashboardComponentCreate:"/dashboards/component/create/:type",dashboardComponentEdit:"/dashboards/component/edit/:id",dashboardPerimeterEdit:"/dashboards/perimeter(/:id)",dashboardStyleEdit:"/dashboards/style(/:id)",indices:"/indices",indexHistory:"/index/history/:id",indexEdit:"/index(/:id)",rates:"/rates",rateHistory:"/rate/history/:id",rateEdit:"/rate(/:id)",swapRateHistory:"/swap/rate/history",searchDocuments:"/search/documents",documents:"/documents",strategy:"/strategy",strategyMappingEdit:"/strategy/mapping(/:id)",strategyActivityCreate:"/strategy/activity/create/:type",strategyActivityEdit:"/strategy/activity/edit/:id",tags:"/tags",getObjectCreate:function(t,e){var n;return n="/object/create/"+t,e&&(n+="/"+e),n},getObjectEdit:function(t){return"/object/edit/"+t},getObjectHistory:function(t,e){var n;return n="/object/history/"+t,e&&(n+="/"+e),n},getObjectFee:function(t){return"/object/fee/"+t},getObjectSubscription:function(t){return"/object/subscription/"+t},getObjectCompanySubscription:function(t){return"/object/company/subscription/"+t},getObjectDerivativeSubscription:function(t){return"/object/derivative/subscription/"+t},getObjectDebtSubscription:function(t){return"/object/debt/subscription/"+t},getObjectRedemption:function(t){return"/object/redemption/"+t},getObjectMetric:function(t,e){var n;return n="/object/metric/"+t,e&&(n+="/"+e),n},getRiskLocal:function(t,e){return"/risk/local/"+t+"/"+level+"/"+e},getRiskIndicatorCreate:function(t){return"/risk/indicator/create/"+t},getRiskIndicatorEdit:function(t){return"/risk/indicator/edit/"+t},getRiskRuleEdit:function(t){var e;return e="/risk/rule",t&&(e+="/"+t),e},getRiskProfileEdit:function(t){var e;return e="/risk/profile/edit",t&&(e+="/"+t),e},getRiskProfileClone:function(t){return"/risk/profile/clone/"+t},getStressProfileEdit:function(t){var e;return e="/stress/profile",t&&(e+="/"+t),e},getReportingActivityEdit:function(t){var e;return e="/reporting/activity",t&&(e+="/"+t),e},getReportingInstanceCreate:function(t,e,n){var i;return i="/reporting/instance/create",t&&(i+="/"+t,e&&(i+="/"+e,n&&(i+="/"+n))),i},getReportingInstanceEdit:function(t){return"/reporting/instance/edit/"+t},getReportingInstanceDocumentEdit:function(t){return"/reporting/instance/document/"+t},getDealFlowDocumentEdit:function(t){return"/dealflow/document/"+t},getDealFlowPipeManagerEdit:function(t){var e;return e="/dealflow/pipe",t&&(e+="/"+t),e},getUserGroupEdit:function(t){var e;return e="/user/group",t&&(e+="/"+t),e},getChangePassword:function(t){var e;return e="/change.password",t&&(e+="/"+t),e},getDashboardDashboardEdit:function(t){var e;return e="/dashboards/dashboard/edit",t&&(e+="/"+t),e},getDashboardDashboardClone:function(t){return"/dashboards/dashboard/clone/"+t},getDashboardComponentCreate:function(t){return"/dashboards/component/create/"+t},getDashboardComponentEdit:function(t){return"/dashboards/component/edit/"+t},getDashboardPerimeterEdit:function(t){var e;return e="/dashboards/perimeter",t&&(e+="/"+t),e},getDashboardStyleEdit:function(t){var e;return e="/dashboards/style",t&&(e+="/"+t),e},getIndexHistory:function(t){return"/index/history/"+t},getIndexEdit:function(t){var e;return e="/index",t&&(e+="/"+t),e},getRateHistory:function(t){return"/rate/history/"+t},getRateEdit:function(t){var e;return e="/rate",t&&(e+="/"+t),e},getSearchDocuments:function(t){return"/search/documents?text="+encodeURIComponent(t)},getStrategyMappingEdit:function(t){var e;return e="/strategy/mapping",t&&(e+="/"+t),e},getStrategyActivityCreate:function(t){return"/strategy/activity/create/"+t},getStrategyActivityEdit:function(t){return"/strategy/activity/edit/"+t},getPortfolio:function(t){return"/portfolios/company/"+(t=encodeURIComponent(t))},getPortfolioInvestor:function(t){return"/portfolio/investor/"+(t=encodeURIComponent(t))},getForwardForex:function(t){return"/history/forward/forex/"+(t=encodeURIComponent(t))}}).mainPages=[t.home,t.portfolios,t["deal-flow"],t.risk,t.reporting,t.dashboards,t.data,t.users,t.stress,t.dashboardSetup,t.indices,t.rates,t.strategy],t})}.call(this),define("kendo",["require","exports"],function(t,e){"use strict";return kendo}),function(){var h;h="last-mp",define("site/router",["jquery","lodash","kendo","core/web/WebStorages","core/web/WebLocation","site/routemap"],function(n,i,t,e,a,r){var o,d,l,s,u,c,p,m,f,b,v,y;return u=t.Router,d=r.home,p=e.WebStorages,c=a.WebLocation,m=function(){return p.tenantSessionStorage().getItem(h)||d},f=function(t){return p.tenantSessionStorage().setItem(h,t)},o=[function(t){var e;return e=t.url,0<=i.indexOf(r.mainPages,e)&&f(e),null}],l=[],function(){return c.setPageTitle("")},s=new u({hashBang:!0,change:function(t){var e,n,i,a;for(i=0,a=o.length;i<a;i++)if(null!=(e=o[i]))try{e(t)}catch(t){throw n=t,console.error("Error in router change callback: "+n),n}return null},routeMissing:function(t){var e,n,i,a;for(console.log("Route not found: "+(null!=t?t.url:void 0)),i=0,a=l.length;i<a;i++)if(null!=(e=l[i]))try{e()}catch(t){throw n=t,console.error("Error in router missing callback: "+n),n}return null}}),v=function(t){var e;return t.stopPropagation(),e=n(t.currentTarget).attr("data-url")||r.notfound,b(e)},y=function(){var t;return t=m(),b(t)},{start:function(){return console.log("Starting router"),s.start()},onRouteMissing:function(t){return t&&l.push(t),null},onRouteChange:function(t){return t&&o.push(t),null},navigate:b=function(t){return s.navigate(t)},navigateFromEvent:v,navigateLastMainPage:y,addRoute:function(t,e){return s.route(t,e)}}})}.call(this),define("core/event/DEvent",["require","exports","../util/Logger"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEvent=void 0;var i=function(){function t(t){var n=this;this._listeners=[],this._safeFire=t?function(t,e){setTimeout(function(){return n._safeCallListener(t,e)},0)}:this._safeCallListener.bind(this)}return t.prototype.register=function(t){return this._listeners.indexOf(t)<0&&this._listeners.push(t),this},t.prototype.unregister=function(t){var e=this._listeners.indexOf(t);return 0<=e&&this._listeners.splice(e,1),this},t.prototype.clear=function(){this._listeners=[]},t.prototype.fire=function(t){for(var e=0,n=this._listeners;e<n.length;e++){var i=n[e];this._safeFire(t,i)}return this},t.prototype._safeCallListener=function(t,e){try{e.call(this,t)}catch(t){n.Logger.error(t)}},t}();e.DEvent=i}),define("core/event/DEvents",["require","exports","core/event/DEvent"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEvents=e.DEventsImpl=void 0;var n=function(){function t(){this._cache={}}return t.prototype.get=function(t){var e=this._cache[t];if(e)return e;var n=new i.DEvent(!0);return this._cache[t]=n},t}();e.DEventsImpl=n,e.DEvents=new n}),define("core/web/HttpCode",["require","exports"],function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.HttpCode=void 0,(n=e.HttpCode||(e.HttpCode={}))[n.CONTINUE=100]="CONTINUE",n[n.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",n[n.PROCESSING=102]="PROCESSING",n[n.OK=200]="OK",n[n.CREATED=201]="CREATED",n[n.ACCEPTED=202]="ACCEPTED",n[n.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",n[n.NO_CONTENT=204]="NO_CONTENT",n[n.RESET_CONTENT=205]="RESET_CONTENT",n[n.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",n[n.MULTI_STATUS=207]="MULTI_STATUS",n[n.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",n[n.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",n[n.MOVED_TEMPORARILY=302]="MOVED_TEMPORARILY",n[n.SEE_OTHER=303]="SEE_OTHER",n[n.NOT_MODIFIED=304]="NOT_MODIFIED",n[n.USE_PROXY=305]="USE_PROXY",n[n.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",n[n.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",n[n.BAD_REQUEST=400]="BAD_REQUEST",n[n.UNAUTHORIZED=401]="UNAUTHORIZED",n[n.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",n[n.FORBIDDEN=403]="FORBIDDEN",n[n.NOT_FOUND=404]="NOT_FOUND",n[n.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",n[n.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",n[n.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",n[n.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",n[n.CONFLICT=409]="CONFLICT",n[n.GONE=410]="GONE",n[n.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",n[n.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",n[n.REQUEST_TOO_LONG=413]="REQUEST_TOO_LONG",n[n.REQUEST_URI_TOO_LONG=414]="REQUEST_URI_TOO_LONG",n[n.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",n[n.REQUESTED_RANGE_NOT_SATISFIABLE=416]="REQUESTED_RANGE_NOT_SATISFIABLE",n[n.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",n[n.IM_A_TEAPOT=418]="IM_A_TEAPOT",n[n.INSUFFICIENT_SPACE_ON_RESOURCE=419]="INSUFFICIENT_SPACE_ON_RESOURCE",n[n.METHOD_FAILURE=420]="METHOD_FAILURE",n[n.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",n[n.LOCKED=423]="LOCKED",n[n.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",n[n.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",n[n.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",n[n.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",n[n.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",n[n.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",n[n.BAD_GATEWAY=502]="BAD_GATEWAY",n[n.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",n[n.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",n[n.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",n[n.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",n[n.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED",(e.HttpCode||(e.HttpCode={})).isError=function(t){return 400<=t&&t<600}}),define("core/data/AjaxError",["require","exports","../web/HttpCode","i18n"],function(t,e,n,i){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.AjaxError=void 0,(a=e.AjaxError||(e.AjaxError={})).fromXhr=function(t){if(!t)return{};var e;if(t.responseJSON)e=t.responseJSON;else if(t.responseText)try{e=JSON.parse(t.responseText)}catch(t){}if(!e||!e.error)try{return Number(t.status)===n.HttpCode.FORBIDDEN?{error:"notAllowed"}:{error:n.HttpCode[Number(t.status)]}}catch(t){return{}}return{error:e.error,data:e.data}},a.translate=function(t){if(!t.error)return i.I18N.t("errors:genericError");var e="errors:"+t.error;return i.I18N.exists(e)?i.I18N.t(e,t.data):t.error},a.translateFromXhr=function(t){return a.translate(a.fromXhr(t))}}),define("core/data/ErrorData",["require","exports","lodash","kendo"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorData=void 0,(e.ErrorData||(e.ErrorData={})).toData=function(t){return n.isString(t)?{message:i.htmlEncode(t)}:t}}),define("core/data/WarningData",["require","exports","lodash","kendo"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarningData=void 0,(e.WarningData||(e.WarningData={})).toData=function(t){return n.isString(t)?{message:i.htmlEncode(t)}:t}}),define("core/data/SuccessData",["require","exports","lodash","kendo"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SuccessData=void 0,(e.SuccessData||(e.SuccessData={})).toData=function(t){return n.isString(t)?{message:i.htmlEncode(t)}:t}}),define("core/event/SiteEvents",["require","exports","core/event/DEvents","core/data/AjaxError","i18n","../data/ErrorData","../data/WarningData","../data/SuccessData","core/web/HttpCode"],function(t,e,n,i,a,r,o,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SiteEvents=void 0;var s=function(){function e(){}return e.logoutEvent=function(){return n.DEvents.get("logout")},e.logout=function(t){t===l.HttpCode.UNAUTHORIZED&&e.error({title:"Error",message:"SESSION_EXPIRED"}),e.logoutEvent().fire(void 0)},e.ajaxErrorEvent=function(){return n.DEvents.get("ajaxError")},e.ajaxError=function(t){e.ajaxErrorEvent().fire(t)},e.errorEvent=function(){return n.DEvents.get("error")},e.error=function(t){e.errorEvent().fire(r.ErrorData.toData(t))},e.successEvent=function(){return n.DEvents.get("success")},e.success=function(t){e.successEvent().fire(d.SuccessData.toData(t))},e.saveSuccessful=function(){e.success(a.I18N.t("ui:notifications.saveSuccess"))},e.deleteSuccessful=function(){e.success(a.I18N.t("ui:notifications.deleteSuccess"))},e.warningEvent=function(){return n.DEvents.get("warning")},e.warning=function(t){e.warningEvent().fire(o.WarningData.toData(t))},e.webSocketEvent=function(){return n.DEvents.get("webSocket")},e.webSocket=function(t){e.webSocketEvent().fire(t)},e}();(e.SiteEvents=s).ajaxErrorEvent().register(function(t){s.error(i.AjaxError.translate(t))})}),function(){define("site/web.socket",["jquery","lodash","core/event/SiteEvents"],function(n,r,t){var o,e,i,a,d;return i=t.SiteEvents,o=[{property:"objects",eventName:"domosws:object"},{property:"objectDocuments",eventName:"domosws:object:document"},{property:"tagCategories",eventName:"domosws:tag:categories"},{property:"tagDefinitions",eventName:"domosws:tag:definitions"},{property:"riskGroups",eventName:"domosws:risk:groups"},{property:"riskIndicators",eventName:"domosws:risk:indicators"},{property:"riskRules",eventName:"domosws:risk:rules"},{property:"riskProfiles",eventName:"domosws:risk:profiles"},{property:"stressProfiles",eventName:"domosws:stress:profiles"},{property:"workflowDefinitions",eventName:"domosws:workflow:definitions"},{property:"workflowTasks",eventName:"domosws:workflow:tasks"},{property:"reportingActivities",eventName:"domosws:reporting:activities"},{property:"reportingInstances",eventName:"domosws:reporting:instances"},{property:"reportingTemplates",eventName:"domosws:reporting:templates"},{property:"reportingRepository",eventName:"domosws:reporting:repository"},{property:"reportingDocuments",eventName:"domosws:reporting:document"},{property:"dealProjectDocument",eventName:"domosws:flow:document"},{property:"dealProjectPipeManagers",eventName:"domosws:flow:pipe"},{property:"documentLists",eventName:"domosws:document:list"},{property:"documentListEntries",eventName:"domosws:document:list:entry"},{property:"documentTags",eventName:"domosws:document:tags"},{property:"userGroups",eventName:"domosws:user:group"},{property:"message",eventName:"domosws:message"},{property:"dashboards",eventName:"domosws:dashboards"},{property:"dashboardComponents",eventName:"domosws:dashboards:components"},{property:"dashboardPerimeters",eventName:"domosws:dashboards:perimeters"},{property:"dashboardStyles",eventName:"domosws:dashboards:styles"},{property:"indices",eventName:"domosws:index"},{property:"interestRateFamilies",eventName:"domosws:rate:family"},{property:"interestRates",eventName:"domosws:rate"},{property:"referenceDefinitions",eventName:"domosws:references:definitions"},{property:"complianceTags",eventName:"domosws:compliance:tags"},{property:"complianceForms",eventName:"domosws:compliance:forms"},{property:"dashboardExportDone",eventName:"domosws:dashboard:export:done"},{property:"jobsUpdated",eventName:"domosws:jobs:notify"},{property:"logsUpdated",eventName:"domosws:logs:notify"}],d=function(t,e){return e&&n("body").trigger(t,e),null},e=!(a=function(t){var e,n,i,a;if(t){for(n=0,i=o.length;n<i;n++)a=(e=o[n]).property,r.has(t,a)&&d(e.eventName,t[a]);return null}}),{init:function(){if(!e)return e=!0,i.webSocketEvent().register(a)}}})}.call(this),function(){define("site/module",["site/routemap","site/router","site/web.socket"],function(t,e,n){var i;return i=function(t){return n.init(),t()},{map:t,router:e,webSocket:n,init:i}})}.call(this),function(){define("site",["site/module"],function(t){return t})}.call(this),define("core/ui/binder/MultiValueBinder",["require","exports","jquery","kendo"],function(t,o,i,d){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.kMultiValueBinding=void 0,o.kMultiValueBinding="multiValue";var e={init:function(t,e,n){d.data.Binder.fn.init.call(this,t.element[0],e,n),this.widget=t,this._change=i.proxy(this.change,this),this.widget.first("change",this._change),this._initChange=!1},refresh:function(){if(!this._initChange){var t=this.widget,e=t.options.dataValueField||t.options.dataTextField,n=this.bindings[o.kMultiValueBinding].get()||null,i=[],a=void 0;if(e){if(n instanceof d.data.ObservableArray){for(var r=0;r<n.length;r++)a=n[r],i[r]=a.get?a.get(e):a;n=i}}else i=n;t.value(i)}},change:function(){var t=this.widget,e=t.options.valuePrimitive?t.value():t.dataItems();this._initChange=!0,this.bindings.multiValue.set(e),this._initChange=!1}};d.data.binders.widget[o.kMultiValueBinding]=d.data.Binder.extend(e)}),define("core/ui/binder/DisplayBinder",["require","exports","jquery","lodash","kendo"],function(t,r,o,d,l){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.kDisplayBinding=void 0,r.kDisplayBinding="display";var e={init:function(t,e,n){l.data.Binder.fn.init.call(this,t,e,n),this._format=o(t).data("format")||""},refresh:function(){var t,e="",n=this.bindings[r.kDisplayBinding].get()||null;if(!d.isNil(n)){var i=(t=n,this._format||(d.isNumber(t)?"n":d.isDate(t)?"d":""));e=i?l.toString(n,i):""+n}var a=o(this.element);a.is("input")?a.val(e):a.text(e)}};l.data.binders[r.kDisplayBinding]=l.data.Binder.extend(e)}),function(){define("ui/binders",["core/ui/binder/MultiValueBinder","core/ui/binder/DisplayBinder"],function(){return{}})}.call(this),function(){define("ui/formats",["kendo"],function(t){var i,a,r,n,o;return o=function(t,e){return null==e&&(e=0),n(t,e,1,"")},a=function(t,e){return null==e&&(e=0),n(t,e,1e3,"k")},r=function(t,e){return null==e&&(e=0),n(t,e,1e6,"M")},i=function(t,e){return null==e&&(e=0),n(t,e,1e9,"G")},{numeric:n=function(t,e,n,i){var a;return a="{0:N"+e+"}",""+kendo.format(a,t/n)+i},standard:o,kilo:a,mega:r,giga:i,bestFit:function(t,e){var n;return t!==(n=e)&&(n=Math.abs(e-t)),5e10<n?i:5e7<n?r:5e4<n?a:o},bestFitTemplate:function(t,e,n){var i;return t!==(i=e)&&(i=Math.abs(e-t)),5e10<i?"#= domos.ui.formats.giga("+n+")#":5e7<i?"#= domos.ui.formats.mega("+n+")#":5e4<i?"#= domos.ui.formats.kilo("+n+")#":"#= domos.ui.formats.standard("+n+")#"}}})}.call(this),function(){define("ui/gmap",[],function(){return{getStaticURL:function(t){return""},getURL:function(t){return""}}})}.call(this),function(){define("ui/grid/state.persistence",["jquery","lodash","kendo","core/web/WebStorages"],function(t,c,e,n){var p,u,i,m,f,b,v;return i=n.WebStorages,u=i.tenantLocalStorage(),p="command",b=function(t){var e,n,i;return e=null!=(n=t.grid.getOptions())?n.dataSource:void 0,!(!n||!e)&&(i={columns:n.columns,pageSize:e.pageSize,sort:e.sort,group:e.group},u.setObject(t.key,i),!0)},v=function(t,e){var n;return(null!=(n=t.toolbar)?n.clean:void 0)&&n.clean(),t.grid.setOptions(e),(null!=n?n.setup:void 0)&&n.setup(),null},m=function(t){var e,n,i,a,r,o,d,l,s;if(a=t.grid,s=u.getObject(t.key),n=t.commandColumn,a&&s){for(i=[],r=0,o=(l=s.columns).length;r<o;r++)e=l[r],c.has(e,p)?i.push(n):i.push(e);return d={columns:i,dataSource:{pageSize:s.pageSize,sort:s.sort,group:s.group}},v(t,d),!0}return!1},f=function(t){var e,n;return u.removeItem(t.key),e=t.grid,n=t.initialOptions,!(!e||!n)&&(v(t,n),!0)},{createState:function(t){var e,n,i,a,r,o,d,l,s,u;if(r=t.key,i=t.grid,r&&i){for(n=null,a=0,o=(l=(d=i.getOptions()).columns).length;a<o;a++)e=l[a],c.has(e,p)&&(n=e);return(s={key:t.key,grid:t.grid,initialOptions:d,commandColumn:n,toolbar:t.toolbar}).save=b.bind(null,s),s.load=m.bind(null,s),s.reset=f.bind(null,s),t.initialLoad&&(null!=(u=s.toolbar)?u.setup:void 0)&&u.setup(),s}return null}}})}.call(this),function(){define("ui/grid/transports",["jquery","lodash"],function(t,o){var e,n,d,i,a,r,l;return"add","itemchange","remove",d=function(t,e){var n,i;return i=t.id,n=e[i],o.find(t.data,function(t){return t.get(i)===n})},r=function(t,e){return e.success(t.data.toJSON())},e=function(t,e){var n;return(n=e.data)[t.id]=--t._newId,t._preventEvent=!0,t.data.push(n),t._preventEvent=!1,e.success(n)},l=function(t,e){var n,i,a,r;return n=t.data,a=e.data,(r=d(t,a))&&0<=(i=o.indexOf(n,r))?(t._preventEvent=!0,n.splice(i,1,a),t._preventEvent=!1,e.success(a)):e.error()},n=function(t,e){var n,i,a,r;return n=t.data,a=e.data,(r=d(t,a))&&0<=(i=o.indexOf(n,r))?(t._preventEvent=!0,n.splice(i,1),t._preventEvent=!1,e.success(a)):e.error()},i=function(t,e,n){var i,a,r,o,d;if(!t._preventEvent){for(a=[],r=0,o=(d=n.items).length;r<o;r++)i=d[r],a.push(i.toJSON());return"add"===n.action?e.pushCreate(a):"itemchange"===n.action?e.pushUpdate(a):"remove"===n.action&&e.pushDestroy(a),!0}},a=function(t,e){return t.data.bind("change",i.bind(null,t,e))},{createLocal:function(t){return null==t.id&&(t.id="id"),t._newId=0,{read:r.bind(null,t),create:e.bind(null,t),update:l.bind(null,t),destroy:n.bind(null,t),push:a.bind(null,t)}}}})}.call(this),function(){define("ui/grid/excel",["lodash","kendo"],function(_,M_KENDO){var DATA,GROUP_HEADER,__excelExport,__getColumnExportFunction,__updateRow;return GROUP_HEADER="group-header",DATA="data",__getColumnExportFunction=function(column){var fn,obj,path;return _.has(column,"dmsExcelExportPath")&&_.has(column,"dmsExcelExportMethod")?(path=column.dmsExcelExportPath,_.isString(path)?(obj=eval(path),obj?(fn=obj[column.dmsExcelExportMethod],_.isFunction(fn)?fn.bind(obj):null):null):null):null},__updateRow=function(t,e,n){var i,a,r,o,d,l,s,u,c;if(r=t.cells,!((l=Math.min(r.length,e.length+n))<n)){for(a=d=s=n,u=l;s<=u?d<u:u<d;a=s<=u?++d:--d)i=r[a],(o=e[a-n])&&_.has(i,"value")&&(c=i.value,_.isNull(c)||_.isUndefined(c)||(i.value=o(c)));return null}},__excelExport=function(t){var e,n,i,a,r,o,d,l,s,u,c,p,m,f;if(a=t.sender,f=t.workbook,a&&f&&!(f.sheets.length<=0)){for(m=f.sheets[0],n=[],o=0,l=(u=a.columns).length;o<l;o++)e=u[o],_.has(e,"command")||e.hidden||n.push(__getColumnExportFunction(e));for(i=(r=a.dataSource.group())?r.length:0,d=0,s=(c=m.rows).length;d<s;d++)(p=c[d]).type===DATA&&__updateRow(p,n,i);return null}},{excelExport:__excelExport}})}.call(this),define("core/util/ArrayUtils",["require","exports","lodash","kendo"],function(t,e,o,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayUtils=void 0;var r="items";function d(t,e){if(n=e,o.has(n,r))for(var n,i=0,a=e.items;i<a.length;i++){d(t,a[i])}else t.push(e)}var i=function(){function r(){}return r.toArray=function(t){if(!o.isNil(t))return o.isArray(t)?t:t instanceof n.data.ObservableArray?t.toJSON():void 0},r.isObservableArray=function(t){return t instanceof n.data.ObservableArray},r.flattenToArray=function(t){var e=r.toArray(t);if(!e||0===e.length)return e;for(var n=[],i=0,a=e;i<a.length;i++){d(n,a[i])}return n},r}();e.ArrayUtils=i}),define("core/ui/grid/GridExcel",["require","exports","jquery","lodash","../../util/ArrayUtils"],function(t,e,c,p,m){"use strict";function f(t){if(!p.has(t,"type"))return!1;var e=t.type;return"group-footer"===e||"footer"===e}function b(t,e,n){if(e&&t.cells&&!(t.cells.length<0)){var i=t.cells,a=i.length-n.length;if(!(a<0))for(var r=a;r<i.length;++r){var o=i[r],d=n[r-a];if(o&&d){var l=o.value;p.isNil(l)||(o.value=d(e)||"")}}}}function n(t){if(t.sender&&t.workbook){var e=t.workbook;if(e.sheets&&!(e.sheets.length<0)){var n=e.sheets[0];if(n&&n.rows&&!(n.rows.length<0)){var i=n.rows;!function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e];if(i.cells&&f(i))for(var a=0,r=i.cells;a<r.length;a++){var o=r[a];o.value&&(o.value=c(o.value).text())}}}(i);var a=m.ArrayUtils.flattenToArray(t.data);if(a){var r=function(t){for(var e=[],n=!1,i=0,a=t;i<a.length;i++){var r=a[i];if(!p.has(r,"command")&&!r.hidden){var o=r.dmsExcel;e.push(o),o&&(n=!0)}}return n?e:void 0}(t.sender.columns);if(r)for(var o,d=-1,l=0,s=i;l<s.length;l++){var u=s[l];(o=u,p.has(o,"type")&&"data"===o.type)&&b(u,a[++d],r)}}}}}}Object.defineProperty(e,"__esModule",{value:!0}),e.GridExcel=void 0;var i=function(){function t(){}return t.attach=function(t){return t.excelExport||(t.excelExport=n),t},t}();e.GridExcel=i}),define("text",["module"],function(t){"use strict";var s,a,o,d,l,i=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,r=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,u="undefined"!=typeof location&&location.href,c=u&&location.protocol&&location.protocol.replace(/\:/,""),p=u&&location.hostname,m=u&&(location.port||void 0),f={},b=t.config&&t.config()||{};function v(t,e){return void 0===t||""===t?e:t}return s={version:"2.0.15",strip:function(t){if(t){var e=(t=t.replace(n,"")).match(r);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:b.createXhr||function(){var t,e,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;e<3;e+=1){n=i[e];try{t=new ActiveXObject(n)}catch(t){}if(t){i=[n];break}}return t},parseName:function(t){var e,n,i,a=!1,r=t.lastIndexOf("."),o=0===t.indexOf("./")||0===t.indexOf("../");return-1!==r&&(!o||1<r)?(e=t.substring(0,r),n=t.substring(r+1)):e=t,-1!==(r=(i=n||e).indexOf("!"))&&(a="strip"===i.substring(r+1),i=i.substring(0,r),n?n=i:e=i),{moduleName:e,ext:n,strip:a}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,e,n,i){var a,r,o,d=s.xdRegExp.exec(t);return!d||(a=d[2],o=(r=(r=d[3]).split(":"))[1],r=r[0],(!a||a===e)&&(!r||r.toLowerCase()===n.toLowerCase())&&(!o&&!r||function(t,e,n,i){if(e===i)return!0;if(t===n){if("http"===t)return v(e,"80")===v(i,"80");if("https"===t)return v(e,"443")===v(i,"443")}return!1}(a,o,e,i)))},finishLoad:function(t,e,n,i){n=e?s.strip(n):n,b.isBuild&&(f[t]=n),i(n)},load:function(e,t,n,i){if(i&&i.isBuild&&!i.inlineText)n();else{b.isBuild=i&&i.isBuild;var a=s.parseName(e),r=a.moduleName+(a.ext?"."+a.ext:""),o=t.toUrl(r),d=b.useXhr||s.useXhr;0!==o.indexOf("empty:")?!u||d(o,c,p,m)?s.get(o,function(t){s.finishLoad(e,a.strip,t,n)},function(t){n.error&&n.error(t)}):t([r],function(t){s.finishLoad(a.moduleName+"."+a.ext,a.strip,t,n)}):n()}},write:function(t,e,n,i){if(f.hasOwnProperty(e)){var a=s.jsEscape(f[e]);n.asModule(t+"!"+e,"define(function () { return '"+a+"';});\n")}},writeFile:function(n,t,e,i,a){var r=s.parseName(t),o=r.ext?"."+r.ext:"",d=r.moduleName+o,l=e.toUrl(r.moduleName+o)+".js";s.load(d,e,function(t){var e=function(t){return i(l,t)};e.asModule=function(t,e){return i.asModule(t,l,e)},s.write(n,d,e,a)},a)}},"node"===b.env||!b.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(a=require.nodeRequire("fs"),s.get=function(t,e,n){try{var i=a.readFileSync(t,"utf8");"\ufeff"===i[0]&&(i=i.substring(1)),e(i)}catch(t){n&&n(t)}}):"xhr"===b.env||!b.env&&s.createXhr()?s.get=function(i,a,r,t){var e,o=s.createXhr();if(o.open("GET",i,!0),t)for(e in t)t.hasOwnProperty(e)&&o.setRequestHeader(e.toLowerCase(),t[e]);b.onXhr&&b.onXhr(o,i),o.onreadystatechange=function(t){var e,n;4===o.readyState&&(399<(e=o.status||0)&&e<600?((n=new Error(i+" HTTP status: "+e)).xhr=o,r&&r(n)):a(o.responseText),b.onXhrComplete&&b.onXhrComplete(o,i))},o.send(null)}:"rhino"===b.env||!b.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?s.get=function(t,e){var n,i,a=new java.io.File(t),r=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(a),"utf-8")),d="";try{for(n=new java.lang.StringBuffer,(i=o.readLine())&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=o.readLine());)n.append(r),n.append(i);d=String(n.toString())}finally{o.close()}e(d)}:("xpconnect"===b.env||!b.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(o=Components.classes,d=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),l="@mozilla.org/windows-registry-key;1"in o,s.get=function(t,e){var n,i,a,r={};l&&(t=t.replace(/\//g,"\\")),a=new FileUtils.File(t);try{(n=o["@mozilla.org/network/file-input-stream;1"].createInstance(d.nsIFileInputStream)).init(a,1,0,!1),(i=o["@mozilla.org/intl/converter-input-stream;1"].createInstance(d.nsIConverterInputStream)).init(n,"utf-8",n.available(),d.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),i.readString(n.available(),r),i.close(),n.close(),e(r.value)}catch(t){throw new Error((a&&a.path||"")+": "+t)}}),s}),define("text!templates/confirmation.window.html",[],function(){return'<label data-bind="text: text"></label>\n<div class="formWindowButtons">\n\t<button data-role="button" data-icon="check" data-bind="click: yesClick" data-i18n="ui:confirmation.yes"></button>\n\t<button class="k-primary" data-role="button" data-icon="cancel" data-bind="click: noClick" data-i18n="ui:confirmation.no"></button>\n</div>'}),define("core/ui/Confirmation",["require","exports","jquery","kendo","i18n","text!templates/confirmation.window.html"],function(t,e,p,m,f,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Confirmation=void 0;var n=function(){function n(){}return n.confirm=function(s,u,c){return new Promise(function(t,e){var n=m.template(b)({}),i=p("<div>").html(n).appendTo(p(document.body));f.I18N.localize(i);var a=function(r){if(!r)return{setup:function(){},destroy:function(){}};var o,d=function(){o&&(o.$overlay.remove(),r.css({"z-index":o.initialZI}),o=void 0)};return{setup:function(t){d();var e=r.css("z-index"),n=parseInt(t.wrapper.css("z-index"),10),i=n+1e3;t.wrapper.css({"z-index":i+1});var a=p("<div>").css({position:"fixed",top:0,left:0,bottom:0,right:0,"z-index":i}).insertBefore(t.wrapper);r.css({"z-index":n}),o={$overlay:a,initialZI:e}},destroy:d}}(c);i.kendoWindow({modal:!0,width:400,minWidth:300,visible:!1});var r=i.data("kendoWindow"),o=!1;r.bind("close",function(){return m.destroy(i),i.remove(),a.destroy(),t(o),!0});var d={text:u,yesClick:function(){o=!0,r&&r.close()},noClick:function(){o=!1,r&&r.close()}},l=m.observable(d);m.bind(i,l),r.title(s).open().center(),a.setup(r)})},n.confirmDelete=function(t){var e=f.I18N.t("ui:confirmation.delete");return t||(t=f.I18N.t("site:confirmDeleteGeneric")),n.confirm(e,t)},n.confirmReset=function(t){var e=f.I18N.t("ui:confirmation.reset");return n.confirm(e,t)},n}();e.Confirmation=n}),define("core/ui/ScrollbarSize",["require","exports","tslib"],function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScrollbarSize=void 0;var n=function(){function t(){}return Object.defineProperty(t,"horizontal",{get:function(){return t.get().horizontal},enumerable:!1,configurable:!0}),Object.defineProperty(t,"vertical",{get:function(){return t.get().vertical},enumerable:!1,configurable:!0}),t.get=function(){return t.SIZE||(t.SIZE=function(){var t={border:"none",height:"200px",margin:"0",padding:"0",width:"200px"},e=$("<div>").css(o.__assign({},t)),n=$("<div>").css(o.__assign(o.__assign({},t),{left:"-1000px",overflow:"scroll",position:"absolute",top:"-1000px"})).append(e).appendTo(document.body).scrollLeft(1e3).scrollTop(1e3),i=n.offset(),a=e.offset();if(!i||!a)return{horizontal:0,vertical:0};var r={horizontal:i.top-a.top||0,vertical:i.left-a.left||0};return n.remove(),r}()),t.SIZE},t}();e.ScrollbarSize=n}),define("core/ui/grid/GridUtils",["require","exports","lodash","jquery","core/ui/grid/GridExcel","../Confirmation","core/util/Logger","i18n","../ScrollbarSize"],function(t,e,n,o,i,a,r,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={filterable:!(e.GridUtils=void 0),sortable:{mode:"multiple",allowUnsort:!0},pageable:{refresh:!0},groupable:!0,selectable:!0,reorderable:!0,resizable:!0,columnMenu:!0,editable:{mode:"inline"},excel:{allPages:!0}},u=0;var c=function(){function t(){}return t.withDefaults=function(t){var e=n.defaults(t,s);return i.GridExcel.attach(e),e},t.defaultsWithoutExcel=function(t){return n.defaults(t,s)},t.customCommand=function(t,e){return{name:"cmd"+ ++u,text:t,click:function(t){return t.preventDefault(),function(t,e,n){var i=n.currentTarget;if(i){var a=o(i).closest("tr"),r=t.dataItem(a);r&&e.call(t,r)}}(this,e,t),!1}}},t.viewColumn=function(e){return{field:"id",sortable:!1,groupable:!1,filterable:!1,menu:!1,attributes:{style:"text-align: center;"},width:80,title:" ",template:function(t){return'<a href="'+e(t.id)+'" class="k-button"><span class="k-icon k-i-zoom"></span></a>'}}},t.modelName=function(e){return function(){var t=this.get(e);return t&&t.get("name")||""}},t.change=function(r){return function(t){var e=t.sender,n=null;if(e){var i=e.select();if(i&&0<i.length){var a=e.dataItem(i[0]);a&&(n=a.toJSON())}}r(n)}},t.onRowSelectChange=function(t,e){t.select().length<1?e.forEach(function(t){t.removeClass("k-state-default"),t.addClass("k-state-disabled")}):e.forEach(function(t){t.removeClass("k-state-disabled"),t.addClass("k-state-default")})},t.defaultPageable=function(){return{numeric:!1,previousNext:!1,messages:{display:d.I18N.t("ui:grid.pageable.messages.display")},refresh:!0}},t.defaultPageableFolio=function(){return{numeric:!1,previousNext:!1,messages:{display:d.I18N.t("ui:grid.pageable.messages.display")}}},t.resizeGrid=function(t){var e=t.wrapper.children(".k-grid-content").height(),n=t.dataSource.data().length,i=t.tbody.find(">tr:first").height()*n+l.ScrollbarSize.horizontal;i<e&&(t.wrapper.height(t.wrapper.height()-e+i),t.resize())},t.resetSort=function(i,t){var a=t;i.on("click",".k-header",function(t){var e=i.data("kendoGrid"),n=o(t.currentTarget).data("field");a!==n&&(e.dataSource.sort({}),e.dataSource.sort({field:n,dir:"desc"})),a=n})},t.destroy=function(t){var e=t.data("kendoGrid"),n=e.select();if(0<n.length){var i=e.dataItem(n);if(!i)return;a.Confirmation.confirmDelete("Are you sure you want to delete this entry?").then(function(t){t&&(e.dataSource.remove(i),e.dataSource.sync())}).catch(function(t){return r.Logger.error(t)})}},t.getSelectedRows=function(t){var e=t.select(),n=[];if(0<e.length)for(var i=0;i<e.length;i++){var a=t.dataItem(e[i]);if(a){var r=a.toJSON();n.push(r)}}return n},t}();e.GridUtils=c}),function(){var u;u={filterable:!0,sortable:{mode:"multiple",allowUnsort:!0},pageable:{pageSize:20,pageSizes:!0,refresh:!0},groupable:!0,selectable:!0,reorderable:!0,resizable:!0,columnMenu:!0,editable:"inline",excel:{allPages:!0}},define("ui/grid/module",["jquery","lodash","ui/grid/state.persistence","ui/grid/transports","ui/grid/excel","core/ui/grid/GridUtils"],function(a,r,t,e,o,n){var i,d,l,s;return d=n.GridUtils,i=0,l=function(){return"cmd"+i++},s=function(t,e,n){var i;return i=a(n.target).closest("tr"),e(t.dataItem(i))},{statePersistence:t,transports:e,withDefaults:function(t){var e,n,i,a;if(null==t&&(t={}),r.defaults(t,u),null==t.excelExport&&(t.excelExport=o.excelExport),r.has(t,"toolbar"))if(r.isArray(t.toolbar)){for(e=!0,n=0,i=(a=t.toolbar).length;n<i;n++)"excel"===a[n]&&(e=!1);e&&t.toolbar.push("excel")}else t.toolbar=["excel",{template:t.toolbar}];else t.toolbar=["excel"];return t},defaultsWithoutExcel:function(t){return null==t&&(t={}),r.defaults(t,u),t},customCommand:function(t,e,n){var i;return i={name:l(),text:t,click:function(t){return t.preventDefault(),s(this,e,t),!1}},n&&(i.name=n),i},defaultPageable:function(){return{numeric:!1,previousNext:!1,messages:{display:"Showing {2} data items"},refresh:!0}},resizeGrid:function(t){return d.resizeGrid(t),null},resetSort:function(t,e){return d.resetSort(t,e),null},onRowSelectChange:function(t,e){return d.onRowSelectChange(t,e),null},getSelectedRows:function(t){return d.getSelectedRows(t)}}})}.call(this),function(){define("ui/data/data.source.helpers",["jquery","lodash","kendo"],function(t,r,e){var o,n,d,s,l;return o=e.data.ObservableArray,n=e.data.ObservableObject,l=function(t){return t instanceof n?t.toJSON():t},s=function(t){var e,n,i,a;if(t instanceof o)return t.toJSON();if(r.isArray(t)){for(e=[],n=0,i=t.length;n<i;n++)a=t[n],e.push(l(a));return e}return[]},d=function(t){var e,n,i,a,r,o,d,l;for(d=[],e=0,r=t.length;e<r;e++)if(n=t[e],i=s(n.items))for(a=0,o=i.length;a<o;a++)l=i[a],d.push(l);return d},{flatView:function(t){var e,n,i,a;if(!t)return[];for(e=s(t.group()),a=s(t.view()),n=0,i=e.length;n<i;n++)e[n],a=d(a);return a}}})}.call(this),function(){define("ui/data/module",["ui/data/data.source.helpers"],function(t){return{dataSourceHelpers:t}})}.call(this),function(){null==window.domos&&(window.domos={}),define("ui/module",["ui/binders","ui/formats","ui/gmap","ui/grid/module","ui/data/module"],function(t,e,n,i,a){var r;return r={formats:e,gmap:n,grid:i,data:a},window.domos.ui=r})}.call(this),function(){define("ui",["ui/module"],function(t){return t})}.call(this),define("core/web/AjaxErrorListener",["require","exports","jquery","core/web/HttpCode","core/event/SiteEvents","core/data/AjaxError","i18n"],function(t,e,n,i,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AjaxErrorListener=void 0;function d(t,e){if(e){var n=Number(e.status);n===i.HttpCode.UNAUTHORIZED?(window.localStorage.setItem("disconnectionReason",o.I18N.t("ui:notifications.disconnectionReason.SESSION_EXPIRED")),a.SiteEvents.logout(n)):i.HttpCode.isError(n)&&a.SiteEvents.ajaxError(r.AjaxError.fromXhr(e))}}var l=function(){function t(){}return t.install=function(){n(document).ajaxError(d)},t}();e.AjaxErrorListener=l}),define("text!templates/notifications/success.html",[],function(){return'<div class="notification-success">\n\t<table>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<div class="d-icon"><div class="d-icon">#= iconHtml#</div></div>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label>#=message#</label>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>'}),define("text!templates/notifications/error.html",[],function(){return'<div class="notification-error">\n\t<table>\n\t\t<tr>\n\t\t\t<td rowspan="4">\n\t\t\t\t<div class="d-icon">#= iconHtml#</div>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<h3>#=title#</h3>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label>#=message#</label>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>\n'}),define("text!templates/notifications/warning.html",[],function(){return'<div class="notification-warning">\n\t<table>\n\t\t<tr>\n\t\t\t<td rowspan="4">\n\t\t\t\t<div class="d-icon"><div class="d-icon">#= iconHtml#</div></div>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<h3>#=title#</h3>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label>#=message#</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t# if (information) { #\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label>#=information#</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t# } #\n\t</table>\n</div>\n'}),define("core/svg/SvgUtils",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SvgUtils=void 0;var n="http://www.w3.org/2000/svg",i=function(){function t(){}return t.createSvg=function(){return document.createElementNS(n,"svg")},t.createUse=function(){return document.createElementNS(n,"use")},t}();e.SvgUtils=i}),define("core/ui/widget/Plugin",["require","exports","lodash","jquery","kendo"],function(t,e,r,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Plugin=void 0;var n="name";function d(t){if(t&&t.options&&r.has(t.options,n)){var e=t.options[n];return e?e.toLowerCase():void 0}}var a=function(){function t(){}return t.plugin=function(t,e,n){t.fn=t.prototype,t.fn.options=i.extend(!0,{},e.fn.options,n),o.ui.plugin(t),function(t,e){var n=d(t),i=d(e);if(n&&i){var a=o.data.binders.widget;a&&r.has(a,i)&&(a[n]=a[i])}}(t.fn,e.fn)},t}();e.Plugin=a}),define("core/ui/IconUI",["require","exports","tslib","core/svg/SvgUtils","core/web/WebLocation","core/util/Logger","./widget/Plugin"],function(t,e,n,l,i,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IconUI=void 0;var r,o,d="DomosIcon",u="d-svg-icon";function c(t){switch(t){case"arrow-down":return{icon:"arrow-right",transform:"rotate(90, 12, 12)"};case"arrow-left":return{icon:"arrow-right",transform:"rotate(180, 12, 12)"};case"arrow-up":return{icon:"arrow-right",transform:"rotate(-90, 12, 12)"};case"blank":return null;case"shift-left":return{icon:"shift-left",transform:"rotate(180, 12, 12)"};default:return{icon:t}}}function p(t){return i.WebLocation.getSvgDefs()+"#d-"+t}r={name:d,icon:"logo"},o=function(d){function t(t,e){var n=d.call(this,t,e)||this,i=n.element[0];if(!i)return s.Logger.error("Unbound icon widget"),n;var a=l.SvgUtils.createSvg();a.setAttribute("class",u);var r=c(n.options.icon);if(r){var o=l.SvgUtils.createUse();o.setAttribute("href",p(r.icon)),r.transform&&o.setAttribute("transform",r.transform),a.appendChild(o)}return i.appendChild(a),n}return n.__extends(t,d),t}(kendo.ui.Widget),a.Plugin.plugin(o,kendo.ui.Widget,r);var m=function(){function t(){}return t.widget=function(t,e){return t["kendo"+d](e)},t.getHtml=function(t){var e="",n=c(t);if(n){var i=n.transform?' transform="'+n.transform+'"':"";e='<use href="'+p(n.icon)+'"'+i+"></use>"}return'<svg class="'+u+'">'+e+"</svg>"},t}();e.IconUI=m}),define("core/ui/Notifications",["require","exports","lodash","jquery","text!templates/notifications/success.html","text!templates/notifications/error.html","text!templates/notifications/warning.html","i18n","../data/SuccessData","../data/WarningData","../data/ErrorData","./IconUI"],function(t,e,n,a,r,o,d,l,s,u,c,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Notifications=void 0;var i=function(){function i(){}return i.showSuccess=function(t){var e=n.assign({iconHtml:p.IconUI.getHtml("notification-success")},s.SuccessData.toData(t));i._get().show(e,"success")},i.showWarning=function(t){var e=n.assign({title:l.I18N.t("errors:defaultTitleWarning"),iconHtml:p.IconUI.getHtml("notification-error")},u.WarningData.toData(t));i._get().show(e,"warning")},i.showError=function(t){var e=n.assign({title:l.I18N.t("errors:defaultTitle"),iconHtml:p.IconUI.getHtml("notification-error")},c.ErrorData.toData(t));i._get().show(e,"error")},i._get=function(){if(i._notifications)return i._notifications;var t,e,n=(t=a("<span>").addClass("idxNotifications").prependTo(a(document.body)),e={position:{pinned:!0,top:30,right:30},autoHideAfter:5e3,allowHideAfter:500,stacking:"down",templates:[{type:"success",template:r},{type:"warning",template:d},{type:"error",template:o}]},t.kendoNotification(e),t.data("kendoNotification"));return i._notifications=n},i}();e.Notifications=i}),define("core/web/SiteMap",["require","exports","core/web/WebLocation"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SiteMap=void 0;var i=function(){function t(){}return t.logout=n.WebLocation.resolve("/logout"),t.home=n.WebLocation.resolve("/"),t.simulation=n.WebLocation.resolve("/simulation"),t}();e.SiteMap=i}),define("core/web/DWebSocket",["require","exports","../util/Logger","../event/SiteEvents","./WebLocation","i18n"],function(t,e,a,r,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DWebSocket=void 0;var d="disconnectionReason",i=function(){function t(){var t=window.location,e="wss:";"https:"!==t.protocol&&(e="ws:"),this.wsUrl=e+"\\"+t.host+n.WebLocation.resolve("ws"),this.attempts=0,this.forceClose=!1}return t.prototype.open=function(){this.socket?a.Logger.error("[WebSocket] Socket already defined"):(this.attempts=0,this.openSocket())},t.prototype.shutdown=function(){this.forceClose=!0,this.socket&&this.socket.close(1e3)},t.prototype.openSocket=function(){var e=this;a.Logger.log("[WebSocket] Opening");var t=new WebSocket(this.wsUrl);t.addEventListener("open",function(t){return e.onOpen(t)}),t.addEventListener("error",function(t){return e.onError(t)}),t.addEventListener("close",function(t){return e.onClose(t)}),t.addEventListener("message",function(t){return e.onMessage(t)}),this.socket=t},t.prototype.onOpen=function(t){a.Logger.log("[WebSocket] Open"),this.attempts=0},t.prototype.onError=function(t){a.Logger.error("[WebSocket] Error",t)},t.prototype.onClose=function(t){var e=this;this.socket=void 0;var n=t.code;if(a.Logger.log("[WebSocket] Closed",n,t.reason||""),!this.forceClose){if(4001===n)return window.localStorage.setItem(d,o.I18N.t("ui:notifications.disconnectionReason.SESSION_EXPIRED")),void r.SiteEvents.logout();if(50<this.attempts)a.Logger.error("[WebSocket] Giving up reconnection");else{var i=Math.min(5e3,500*this.attempts);++this.attempts,setTimeout(function(){return e.openSocket()},i)}}},t.prototype.onMessage=function(t){var e=t.data;if(a.Logger.log("[WebSocket] Message",e),e)if("logout"!==e){if("DISCONNECTED_OTHER_USER"===e)return window.localStorage.setItem(d,o.I18N.t("ui:notifications.disconnectionReason."+e)),void r.SiteEvents.logout();if("SESSION_EXPIRED"===e)return window.localStorage.setItem(d,o.I18N.t("ui:notifications.disconnectionReason."+e)),void r.SiteEvents.logout();if("cluster"!==e&&"simulationStarted"!==e&&"simulationStopped"!==e)try{var n=JSON.parse(e);r.SiteEvents.webSocket(n)}catch(t){a.Logger.error("[WebSocket] Unknown message",e)}else window.location.reload(!0)}else r.SiteEvents.logout()},t}(),l=function(){function t(){}return t.init=function(){try{var t=new i;t.open(),window.addEventListener("unload",function(){try{t.shutdown()}catch(t){a.Logger.error("[WebSocket] Error while shutting down",t)}})}catch(t){a.Logger.error("[WebSocket] Not available",t)}},t}();e.DWebSocket=l}),define("core/ui/binder/Binders",["require","exports","core/ui/binder/DisplayBinder","core/ui/binder/MultiValueBinder"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),define("core/bootstrap/DBootstrap",["require","exports","../web/AjaxErrorListener","../event/SiteEvents","../ui/Notifications","../web/SiteMap","../web/DWebSocket","core/ui/binder/Binders"],function(t,e,n,i,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DBootstrap=void 0;var d=function(){function t(){}return t.init=function(t){n.AjaxErrorListener.install(),t&&o.DWebSocket.init(),i.SiteEvents.logoutEvent().register(function(){window.location.href=r.SiteMap.logout}),i.SiteEvents.errorEvent().register(a.Notifications.showError),i.SiteEvents.successEvent().register(a.Notifications.showSuccess),i.SiteEvents.warningEvent().register(a.Notifications.showWarning)},t}();e.DBootstrap=d}),define("core/data/SiteCategory",["require","exports","i18n","core/web/WebLocation"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SiteCategory=void 0;var a=function(){function t(t,e,n){this.key=t,this.cssClass=t,this.icon=n,this.url=i.WebLocation.resolve(e),this._nameKey="site:categories."+t}return Object.defineProperty(t.prototype,"name",{get:function(){return n.I18N.t(this._nameKey)},enumerable:!1,configurable:!0}),t}();e.SiteCategory=a}),define("core/data/SiteCategories",["require","exports","./SiteCategory"],function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SiteCategories=e.SiteCategoriesImpl=void 0;var n=function(){function t(){var a=[],t=function(t,e,n){var i=new r.SiteCategory(t,e,n);return a.push(i),i};this.portfolios=t("portfolios","#!/portfolios","portfolio"),this.investments=t("investments","investments","light-bulb"),this.processManagement=t("deal-flow","#!/deal-flow","deal-flow"),this.risk=t("risk","#!/risk","risk"),this.reporting=t("reporting","#!/reporting","reporting"),this.dashboards=t("dashboards","#!/dashboards","dashboards"),this.data=t("data","#!/data","data"),this.compliance=t("compliance","compliance","compliance"),this.limitedPartners=t("limitedPartners","lp","lp"),this._list=a}return t.prototype.list=function(){return this._list},t}();e.SiteCategoriesImpl=n,e.SiteCategories=new n}),define("text!templates/lp/lp.simulation.html",[],function(){return'<div id="simulationRoot">\n    <h1 data-i18n="lp:simulation.title"></h1>\n    <div id="simulationToolbar"></div>\n    <p></p>\n    <div id="simulationGrid" class="floatingGrid_75"></div>\n    <div class="clearer"></div>\n\n</div>'}),define("core/ui/grid/RepositoryTransport",["require","exports"],function(t,e){"use strict";function n(t,e){t.then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})}Object.defineProperty(e,"__esModule",{value:!0}),e.RepositoryTransport=void 0;var i=function(){function t(){}return t.createReadOnly=function(e){return{read:function(t){return n(e.list(),t)}}},t.create=function(e){var t=function(t){return n(e.save(t.data),t)};return{create:t,read:function(t){return n(e.list(),t)},update:t,destroy:function(t){return n(e.destroy(t.data),t)}}},t.createIdentifiables=function(e){return{read:function(t){return n(e.fetchIdentifiables(),t)}}},t}();e.RepositoryTransport=i}),define("core/ui/widget/IdWidgetUtils",["require","exports","tslib","lodash","kendo","core/ui/widget/Plugin","../grid/RepositoryTransport"],function(t,e,d,a,l,s,n){"use strict";function i(t){return e=t,a.hasIn(e,"fetchIdentifiables")?t:{fetchIdentifiables:function(){return t()}};var e}function u(t){return t=i(t),{transport:n.RepositoryTransport.createIdentifiables(t),schema:{model:{id:"id",fields:{name:{type:"string"}}}},sort:{field:"name",dir:"asc"}}}Object.defineProperty(e,"__esModule",{value:!0}),e.IdWidgetUtils=void 0;var r=function(){function t(){}return t.createDropList=function(t,e,n){var a=u(e);var i={autoWidth:!0,dataTextField:"name",dataValueField:"id",name:t};n&&(i.optionLabel="--");var r,o=function(i){function t(t,e){return i.call(this,t,((n=e||{}).dataSource||(n.dataSource=a),n))||this;var n}return d.__extends(t,i),t}(l.ui.DropDownList);return s.Plugin.plugin(o,l.ui.DropDownList,i),r=t,function(t,e){return t["kendo"+r](e)}},t.widget=function(t,e,n){var i={autoWidth:!0,dataSource:u(t),dataTextField:"name",dataValueField:"id",optionLabel:"--"};return n=a.defaults(n||{},i),e.kendoDropDownList(n)},t.createListBox=function(t,e){var a=u(e);var n,i={dataTextField:"name",dataValueField:"id",name:t},r=function(i){function t(t,e){return i.call(this,t,((n=e||{}).dataSource||(n.dataSource=a),n))||this;var n}return d.__extends(t,i),t}(l.ui.ListBox);return s.Plugin.plugin(r,l.ui.ListBox,i),n=t,function(t,e){return t["kendo"+n](e)}},t.createMultiSelect=function(t,e,n){var a=u(e);var i,r={dataTextField:"name",dataValueField:"id",name:t,placeholder:n},o=function(i){function t(t,e){return i.call(this,t,((n=e||{}).dataSource||(n.dataSource=a),n))||this;var n}return d.__extends(t,i),t}(l.ui.MultiSelect);return s.Plugin.plugin(o,l.ui.ListBox,r),i=t,function(t,e){return t["kendo"+i](e)}},t}();e.IdWidgetUtils=r}),define("core/ui/grid/column/ColumnStyle",["require","exports","lodash"],function(t,e,n){"use strict";var i,a;function r(t){switch(t){case i.BOLD:return"font-weight:bold";case i.RIGHT_ALIGNED:return"text-align:right";case i.CENTER_ALIGNED:return"text-align:center";case i.ITALIC:return"font-style:italic";case i.COLOR_RED:return"color:red";case i.COLOR_GREEN:return"color:green";default:return}}Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnStyle=void 0,(a=i=e.ColumnStyle||(e.ColumnStyle={}))[a.BOLD=1]="BOLD",a[a.ITALIC=2]="ITALIC",a[a.RIGHT_ALIGNED=3]="RIGHT_ALIGNED",a[a.CENTER_ALIGNED=4]="CENTER_ALIGNED",a[a.COLOR_RED=5]="COLOR_RED",a[a.COLOR_GREEN=6]="COLOR_GREEN",(i=e.ColumnStyle||(e.ColumnStyle={})).toCss=function(t){return void 0===t&&(t=[]),n.chain(t).map(r).filter(n.negate(n.isNil)).join(";").value()||void 0}}),define("core/ui/grid/column/ColumnUtils",["require","exports","tslib","lodash","jquery","./ColumnStyle"],function(t,e,r,n,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnUtils=void 0;var i=function(){function a(){}return a.addEditor=function(t,i){if(n.has(t,"editor")||!i)return t;var a=t.field;return a&&(t.editor=function(t,e){var n=o('<input name="'+a+'"/>').appendTo(t);o('<span class="k-invalid-msg" data-for="'+a+'"/>').appendTo(t),i(n)}),t},a.addFormat=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return t.format||(t.format=e),a.addStyle.apply(a,r.__spreadArrays([t],n))},a.checkbox=function(t){var e=t.field;return e?(t.template="<input type='checkbox' class='k-checkbox' #= ("+e+" == true) ? checked ='checked' : '' #\n\t\t\tdisabled/><label class='k-checkbox-label'>&nbsp;</label>",a.addStyle(t,d.ColumnStyle.CENTER_ALIGNED)):t},a.addStyle=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=d.ColumnStyle.toCss(e);if(i){t.attributes=t.attributes||{};var a=t.attributes.style?";"+t.attributes.style:"";t.attributes.style=""+i+a,t.domosStyles=e}return t},a.columnMenuInit=function(t){var i=t.container;if(i){var e=i.children().data("kendoMenu");e&&e.bind("open",function(t){if(o(t.item).hasClass("k-columns-item")){var n=i.find(".k-columns-item ul"),e=n.find("li");n.empty(),e.each(function(t,e){o(e).removeClass("k-first k-last")}),e.sort(function(t,e){t=o(t),e=o(e);var n=t.children()[0].innerText,i=e.children()[0].innerText;return n<i?-1:i<n?1:0}),e.first().addClass("k-first"),e.last().addClass("k-last"),e.each(function(t,e){n.append(o(e))})}})}},a}();e.ColumnUtils=i}),define("core/ui/grid/column/IdentifiableColumnUtils",["require","exports","kendo","./ColumnUtils"],function(t,e,d,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IdentifiableColumnUtils=void 0;var i=function(){function i(){}return i.createFactory=function(e,n){return function(t){return i.create(t,e,n)}},i.create=function(e,t,r){var o=e.field;return o&&(n.ColumnUtils.addEditor(e,t),e.field=o+"Name()",e.template=r?function(t){var e=t[o];if(!e)return"";var n=d.htmlEncode(t[o].shortName||t[o].name||""),i=e.id;if(i){var a=r(i);return a?'<a class="d-link" href="'+d.htmlEncode(a)+'">'+n+"</a>":n}return'<a class="d-link" href="javascript:void(0)" >'+n+"</a>"}:function(t){return t[o]?d.htmlEncode(t[o].name||""):""},e.groupHeaderTemplate=function(t){return e.title+": "+d.htmlEncode(t.value||"")}),e},i}();e.IdentifiableColumnUtils=i}),define("object/ui/ObjectUtilsUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","core/web/WebLocation"],function(t,e,i,a,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectUtilsUI=void 0;var r=function(){function t(){}return t.create=function(t,e){var n=i.IdWidgetUtils.createDropList(t,e,!0);return{widget:n,column:a.IdentifiableColumnUtils.createFactory(n,this.getUrl)}},t.getUrl=function(t){return n.WebLocation.resolveKendo("/object/edit/"+t)},t}();e.ObjectUtilsUI=r}),define("core/util/CancelReason",["require","exports","lodash"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CancelReason=void 0;var i=function(){function e(t){this.reason=t||""}return e.is=function(t){return t instanceof e},e.empty=function(){return this.EMPTY},e.of=function(t){return n.isNil(t)?this.EMPTY:t instanceof e?t:new e(""+t)},e.prototype.toString=function(){return this.reason},e.prototype.valueOf=function(){return this.reason},e.EMPTY=new e,e}();e.CancelReason=i}),define("core/util/CancelToken",["require","exports","./CancelReason"],function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CancelToken=void 0;var n=function(){function n(e){var i=this;this.promise=new Promise(function(n,t){e(function(t){if(!i._reason){var e=a.CancelReason.of(t);i._reason=e,n(e)}})})}return Object.defineProperty(n.prototype,"reason",{get:function(){return this._reason},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"requested",{get:function(){return!!this._reason},enumerable:!1,configurable:!0}),n.is=function(t){return t instanceof n},n.source=function(){var e;return{token:new n(function(t){e=t}),cancel:e}},n.race=function(t){return new n(function(e){Promise.race(t.map(function(t){return t.promise})).then(function(t){return e(t)})})},n.throwIfRequested=function(t){t&&t.throwIfRequested()},n.prototype.throwIfRequested=function(){if(this._reason)throw this._reason},n}();e.CancelToken=n}),define("core/util/PromiseUtils",["require","exports","lodash","./Logger"],function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PromiseUtils=void 0;var i=function(){function e(){}return e.consume=function(t){if(n.isFunction(t))try{t().catch(function(t){return r.Logger.error(t)})}catch(t){r.Logger.error(t)}else t.catch(function(t){return r.Logger.error(t)})},e.withCancelToken=function(i,a){return new Promise(function(t,e){var n=a(t,e);i&&i.promise.then(function(t){e(t),n()}).catch(function(t){r.Logger.error("Error during promise cancellation",t)})})},e.wait=function(n,t){return e.withCancelToken(t,function(t){var e=setTimeout(t,n);return function(){return clearTimeout(e)}})},e.asPromise=function(i,t){return e.withCancelToken(t,function(t,e){var n=setTimeout(function(){try{t(i())}catch(t){e(t)}},0);return function(){return clearTimeout(n)}})},e}();e.PromiseUtils=i}),define("downloadjs",[],function(){return download}),define("core/web/WebHttp",["require","exports","tslib","jquery","core/web/WebLocation","../data/AjaxError","../util/Logger","../util/CancelToken","../util/PromiseUtils","downloadjs"],function(t,e,r,o,d,l,s,u,c,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebHttp=void 0;var n=function(){function a(){}return a.toPromise=function(t,e){return c.PromiseUtils.withCancelToken(e,function(i,a){return t.done(function(t,e,n){return i(t)}).fail(function(t,e,n){var i=l.AjaxError.translateFromXhr(t);s.Logger.error(i),a(i)}),function(){return t.abort()}})},a.getJson=function(t,e,n){var i=d.WebLocation.resolve(t);return u.CancelToken.is(e)&&(n=e,e=void 0),a.toPromise(o.getJSON(i,e),n)},a.postJson=function(t,e,n){var i=d.WebLocation.resolve(t);return a.toPromise(o.post(i,e),n)},a.destroyJson=function(t,e,n){var i=d.WebLocation.resolve(t)+"?"+o.param(e);return a.toPromise(o.ajax({type:"DELETE",url:i}),n)},a.download=function(e,n,i){return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(t){return e=d.WebLocation.resolve(e)+"?"+o.param(n),[2,c.PromiseUtils.withCancelToken(i,function(r,a){var t=o.ajax({url:e,cache:!1,xhrFields:{responseType:"blob"}});return t.done(function(t,e,n){var i=function(t){var e=t.getResponseHeader("content-disposition");if(e){var n=e.match(/filename="(.+)"/);if(n&&2===n.length)return n[1]}return"file"}(n),a=n.getResponseHeader("content-type")||void 0;p(t,i,a),r()}).fail(function(t,e,n){var i=l.AjaxError.translateFromXhr(t);s.Logger.error(i),a(i)}),function(){return t.abort()}})]})})},a}();e.WebHttp=n}),define("object/data/ObjectCategory",["require","exports","lodash","i18n"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectCategory=void 0;var a=function(){function t(t,e,n,i,a){this.id=e,this.key=t,this.parent=n,this.isFinal=i,this.isData=a,this._children=[],this._nameKey="object:"+t+".name",n&&n._children.push(this)}return Object.defineProperty(t.prototype,"name",{get:function(){return i.I18N.t(this._nameKey,{count:2})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"singleName",{get:function(){return i.I18N.t(this._nameKey)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._children},enumerable:!1,configurable:!0}),t.prototype.isOf=function(t){var e=n.isNumber(t)?t:t.id;return e===this.id||!!this.parent&&this.parent.isOf(e)},t.prototype.finals=function(){var t=[];return this.fillFinals(t),t},t.prototype.fillFinals=function(t){if(this.isFinal)t.push(this);else for(var e=0,n=this._children;e<n.length;e++){n[e].fillFinals(t)}},t}();e.ObjectCategory=a}),define("object/data/ObjectCategories",["require","exports","lodash","./ObjectCategory"],function(t,e,a,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectCategories=e.ObjectCategoriesImpl=void 0;var i=function(){function t(){var e=this;this._byId={};var t=function(t){return e._byId[t.id]=t};this.objects=t(new n.ObjectCategory("objects",0,null,!1,!1)),this.entities=t(new n.ObjectCategory("entities",1,this.objects,!1,!0)),this.individuals=t(new n.ObjectCategory("individuals",10,this.entities,!0,!0)),this.legals=t(new n.ObjectCategory("legals",11,this.entities,!1,!0)),this.corporates=t(new n.ObjectCategory("corporates",110,this.legals,!0,!0)),this.investmentCompanies=t(new n.ObjectCategory("investmentCompanies",111,this.legals,!0,!0)),this.investmentVehicles=t(new n.ObjectCategory("investmentVehicles",112,this.legals,!0,!0)),this.sellSides=t(new n.ObjectCategory("sellSides",113,this.legals,!0,!0)),this.legalOthers=t(new n.ObjectCategory("legalOthers",114,this.legals,!0,!0)),this.companies=t(new n.ObjectCategory("companies",115,this.legals,!0,!0)),this.records=t(new n.ObjectCategory("records",2,this.objects,!1,!1)),this.positions=t(new n.ObjectCategory("positions",20,this.records,!0,!1)),this.assets=t(new n.ObjectCategory("assets",3,this.objects,!1,!0)),this.fundShares=t(new n.ObjectCategory("fundShares",31,this.assets,!0,!0)),this.properties=t(new n.ObjectCategory("properties",32,this.assets,!0,!0)),this.otherAssets=t(new n.ObjectCategory("otherAssets",33,this.assets,!0,!0)),this.mandates=t(new n.ObjectCategory("mandates",34,this.assets,!0,!0)),this.debts=t(new n.ObjectCategory("debts",35,this.assets,!0,!0)),this.cash=t(new n.ObjectCategory("cash",36,this.assets,!0,!0)),this.loans=t(new n.ObjectCategory("loans",37,this.assets,!1,!1)),this.derivatives=t(new n.ObjectCategory("derivatives",38,this.assets,!1,!0)),this.repo=t(new n.ObjectCategory("repo",39,this.assets,!1,!1)),this.companyShares=t(new n.ObjectCategory("companyShares",40,this.assets,!0,!0)),this.dealIntentions=t(new n.ObjectCategory("dealIntentions",4,this.objects,!1,!1)),this.dealProjects=t(new n.ObjectCategory("dealProjects",42,this.dealIntentions,!1,!1)),this.realEstateDealFlows=t(new n.ObjectCategory("realEstateDealFlows",420,this.dealProjects,!0,!1)),this.fundFlows=t(new n.ObjectCategory("fundFlows",421,this.dealProjects,!0,!1)),this.portfolios=t(new n.ObjectCategory("portfolios",9,this.objects,!0,!0)),this.virtualPortfolios=t(new n.ObjectCategory("virtualPortfolios",12,this.objects,!0,!0)),this.investments=t(new n.ObjectCategory("investments",13,this.objects,!0,!0)),this.equityDerivatives=t(new n.ObjectCategory("equityDerivatives",381,this.derivatives,!0,!0)),this.bankAccounts=t(new n.ObjectCategory("bankAccounts",301,this.assets,!0,!0))}return t.prototype.getDataRoots=function(){return this.objects.children},t.prototype.get=function(t){if(a.isNumber(t))return this._byId[t];if(a.isString(t)){var e=parseInt(t,10);return isNaN(e)?this[t]:this._byId[e]}return t},t.prototype.getId=function(t){if(a.isNumber(t))return t;var e=this.get(t);return e?e.id:void 0},t.prototype.getIdList=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=a.isArray(t)?t:[t];return a.chain(i).map(function(t){return e.getId(t)}).compact().value()},t.prototype.getName=function(t){var e=this.get(t);return e?e.name:""},t.prototype.list=function(){return a.values(this._byId)},t}();e.ObjectCategoriesImpl=i,e.ObjectCategories=new i}),define("object/repository/ObjectRepository",["require","exports","tslib","lodash","core/web/WebHttp","../data/ObjectCategories"],function(t,e,a,r,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectRepository=void 0;var n=function(){function i(){}return i.list=function(t){var e=d.ObjectCategories.getId(t);return o.WebHttp.getJson("object/list.json",{category:e})},i.fetchIdentifiables=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=d.ObjectCategories.getIdList.apply(d.ObjectCategories,t);return o.WebHttp.getJson("object/id/list.json?"+$.param({categories:n}))},i.fetchEntityIdentifiables=function(){return i.fetchIdentifiables(d.ObjectCategories.entities)},i.fetchIndividualIdentifiables=function(){return i.fetchIdentifiables(d.ObjectCategories.individuals)},i.fetchLegalPersonIdentifiables=function(){return i.fetchIdentifiables(d.ObjectCategories.legals)},i.fetchSellSideIdentifiables=function(){return i.fetchIdentifiables(d.ObjectCategories.sellSides)},i.fetchEntityExtendedIdentifiables=function(){return o.WebHttp.getJson("object/entity/extended/id/list.json")},i.fetchLegalExtendedIdentifiables=function(){return a.__awaiter(this,void 0,void 0,function(){var e;return a.__generator(this,function(t){switch(t.label){case 0:return[4,i.fetchEntityExtendedIdentifiables()];case 1:return e=t.sent(),[2,r.filter(e,function(t){var e=d.ObjectCategories.get(t.category);return!!e&&e.isOf(d.ObjectCategories.legals)})]}})})},i.fetchBankRuleObjectIdentifiables=function(){return a.__awaiter(this,void 0,void 0,function(){var e;return a.__generator(this,function(t){switch(t.label){case 0:return[4,o.WebHttp.getJson("bank/account/rule/object/list.json")];case 1:return e=t.sent(),[2,r.filter(e,function(t){var e=d.ObjectCategories.get(t.category);return!!e&&(e.isOf(d.ObjectCategories.investmentVehicles)||e.isOf(d.ObjectCategories.fundShares))})]}})})},i.fetchEntityInvestorIdentifiables=function(t,e){var n={toBuyId:t,toSellId:e};return o.WebHttp.getJson("object/entity/investor/id/list.json",n)},i.fetchInvestorByCommitmentIdentifiables=function(t){var e={commitmentId:t};return o.WebHttp.getJson("object/entity/investor/commitmentId/list.json",e)},i.fetchVehicleIdentifiables=function(){return i.fetchIdentifiables(d.ObjectCategories.investmentVehicles)},i.fetchAndExcludeCurrentIdentifiables=function(n){return a.__awaiter(this,void 0,void 0,function(){var e;return a.__generator(this,function(t){switch(t.label){case 0:return[4,i.fetchIndividualIdentifiables()];case 1:return e=t.sent(),[2,r.filter(e,function(t){return t.id!==n})]}})})},i.fetchVehiclePereIdentifiables=function(){return o.WebHttp.getJson("object/vehicle/pere/id/list.json",{l1:!1})},i.fetchVehiclePereL1Identifiables=function(){return o.WebHttp.getJson("object/vehicle/pere/id/list.json",{l1:!0})},i.fetchVehicleMasterIdentifiables=function(){return o.WebHttp.getJson("object/vehicle/master/id/list.json")},i.fetchL1VehicleIdentifiables=function(){return o.WebHttp.getJson("object/vehicle/l1/id/list.json")},i.fetchVehicleFundShareIdentifiables=function(t,e){return o.WebHttp.getJson("object/vehicle/fund.share/id/list.json",{vehicle:t,shareClassType:e})},i.fetchVirtualPortfolioIdentifiables=function(){return i.fetchIdentifiables(d.ObjectCategories.virtualPortfolios)},i.fetchAssetIdentifiables=function(){return i.fetchIdentifiables(d.ObjectCategories.assets)},i.fetchPropertyIdentifiables=function(){return i.fetchIdentifiables(d.ObjectCategories.properties)},i.fetchFundShareIdentifiables=function(){return i.fetchIdentifiables(d.ObjectCategories.fundShares)},i.fetchDebtIdentifiables=function(){return i.fetchIdentifiables(d.ObjectCategories.debts)},i.fetchBankAccountIdentifiables=function(){return i.fetchIdentifiables(d.ObjectCategories.bankAccounts)},i.fetchBankAccountIdentifiablesWithExtendedName=function(){return o.WebHttp.getJson("object/bank.account/id.extended.name/list.json")},i.fetchCompanyIdentifiables=function(){return i.fetchIdentifiables(d.ObjectCategories.companies)},i.fetchHoldingIdentifiables=function(){return o.WebHttp.getJson("object/holding/list.json")},i.fetchHoldingAndFundsIdentifiables=function(){return new Promise(function(e){Promise.all([i.fetchVehicleIdentifiables(),i.fetchHoldingIdentifiables()]).then(function(t){e(t[0].concat(t[1]))})})},i.fetchInvestmentObjectIdentifiables=function(){return i.fetchIdentifiables(d.ObjectCategories.properties,d.ObjectCategories.companies,d.ObjectCategories.investmentVehicles)},i.fetchInvestorsByFundIdentifiables=function(t){var e={fund:t};return o.WebHttp.getJson("object/investors/fund/list.json",e)},i.fetchEntityInvestorsAndFundsIdentifiables=function(){return new Promise(function(e){Promise.all([i.fetchEntityInvestorIdentifiables(),i.fetchHoldingIdentifiables()]).then(function(t){e(t[0].concat(t[1]))})})},i.fetchCompanyCompanyShareIdentifiables=function(t){return o.WebHttp.getJson("object/company/company.share/id/list.json",{company:t})},i.fetchCompanyShareIdentifiables=function(){return i.fetchIdentifiables(d.ObjectCategories.companyShares)},i.fetchCompanyShareCompanyIdentifiables=function(){return o.WebHttp.getJson("object/company.share/company/list.json")},i.fetchPortfolioIdentifiables=function(){return i.fetchIdentifiables(d.ObjectCategories.portfolios)},i.fetchInvestmentIdentifiables=function(){return i.fetchIdentifiables(d.ObjectCategories.investments)},i.fetchInvestmentsByFund=function(t){return o.WebHttp.getJson("object/investment/fund/id/list.json",{fundId:t})},i.fetchFundOperationIdentifiables=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return[2,new Promise(function(e){Promise.all([i.fetchAssetTargetIdentifiables(),i.fetchInvestmentIdentifiables()]).then(function(t){e(t[0].concat(t[1]))})})]})})},i.fetchDealFlowAssetIdentifiables=function(){return a.__awaiter(this,void 0,void 0,function(){var e;return a.__generator(this,function(t){switch(t.label){case 0:return[4,i.fetchAssetIdentifiables()];case 1:return e=t.sent(),[2,r.filter(e,function(t){var e=d.ObjectCategories.get(t.category);return!!e&&(e.isOf(d.ObjectCategories.properties)||e.isOf(d.ObjectCategories.debts)||e.isOf(d.ObjectCategories.companies)||e.isOf(d.ObjectCategories.companyShares))})]}})})},i.fetchFundAndManco=function(){return o.WebHttp.getJson("object/fund.manco/id/list.json")},i.fetchAssetTargetIdentifiables=function(){return o.WebHttp.getJson("asset.target/id/list.json")},i.fetch=function(t,e){return o.WebHttp.getJson("object.json",{id:t},e)},i}();e.ObjectRepository=n}),define("object/ui/EntityInvestorUI",["require","exports","./ObjectUtilsUI","object/repository/ObjectRepository","core/ui/grid/column/IdentifiableColumnUtils","core/ui/widget/IdWidgetUtils"],function(t,e,n,i,a,r){"use strict";var o,d;Object.defineProperty(e,"__esModule",{value:!0}),e.EntityInvestorUI=void 0,e.EntityInvestorUI=(o=n.ObjectUtilsUI.create("DomosEntityInvestorId",i.ObjectRepository.fetchEntityInvestorIdentifiables),d=n.ObjectUtilsUI.create("DomosEntityInvestorAndFund",i.ObjectRepository.fetchEntityInvestorsAndFundsIdentifiables),{widget:o.widget,column:o.column,with:function(e){var t=function(t){return r.IdWidgetUtils.widget(function(){return i.ObjectRepository.fetchEntityInvestorIdentifiables(e)},t)},n=function(t){return r.IdWidgetUtils.widget(function(){return i.ObjectRepository.fetchEntityInvestorIdentifiables(e,0)},t)};return{entityInvestorIds:{widget:t,column:a.IdentifiableColumnUtils.createFactory(t)},entitySellerIds:{widget:n,column:a.IdentifiableColumnUtils.createFactory(n)}}},without:function(){var t=function(t){return r.IdWidgetUtils.widget(function(){return i.ObjectRepository.fetchEntityInvestorIdentifiables()},t)};return{widget:t,column:a.IdentifiableColumnUtils.createFactory(t)}},withCommitment:function(e){var t=function(t){return r.IdWidgetUtils.widget(function(){return i.ObjectRepository.fetchInvestorByCommitmentIdentifiables(e)},t)};return{widget:t,column:a.IdentifiableColumnUtils.createFactory(t)}},InvestorsAndFunds:d,byFund:function(e){var t=function(t){return r.IdWidgetUtils.widget(function(){return i.ObjectRepository.fetchInvestorsByFundIdentifiables(e)},t)};return{widget:t,column:a.IdentifiableColumnUtils.createFactory(t)}}})}),define("core/web/UrlBuilder",["require","exports","lodash","jquery","./WebLocation"],function(t,e,i,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UrlBuilder=void 0;var r=function(){function e(t){this.url=a.WebLocation.resolve(t),this.params={}}return e.from=function(t){return new e(t)},e.prototype.add=function(t,e){if(i.isNil(e))return this;var n=i.isDate(e)?e.toJSON():""+e;return this.params[t]=n,this},e.prototype.build=function(){var t=n.param(this.params);return t?this.url+"?"+t:this.url},e}();e.UrlBuilder=r}),define("object/web/ObjectMap",["require","exports","core/web/WebLocation","core/web/UrlBuilder","object/data/ObjectCategories","lodash"],function(t,e,i,n,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectMap=void 0;var o=function(){function t(){}return t.objectCreate=function(t,e){t=a.ObjectCategories.get(t)||a.ObjectCategories.objects;var n=i.WebLocation.resolveKendo("/object/create/"+t.id);return r.isNil(e)?n:n+"/"+e},t.objectEdit=function(t){return t?i.WebLocation.resolveKendo("/object/edit/"+t):"javascript:void(0)"},t.notes=function(t){return n.UrlBuilder.from("object/notes").add("id",t).build()},t}();e.ObjectMap=o}),define("object/ui/ObjectUI",["require","exports","core/ui/grid/column/IdentifiableColumnUtils","./ObjectUtilsUI","object/repository/ObjectRepository","object/data/ObjectCategories","object/web/ObjectMap"],function(t,e,n,i,a,r,o){"use strict";function d(t){return o.ObjectMap.objectEdit(t)}var l,s,u;Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectUI=e.UI=void 0,e.UI=(l=i.ObjectUtilsUI.create("DomosObjectMaster",function(){return a.ObjectRepository.fetchIdentifiables(r.ObjectCategories.objects)}),s=i.ObjectUtilsUI.create("DomosHoldingAndFund",a.ObjectRepository.fetchHoldingAndFundsIdentifiables),u=i.ObjectUtilsUI.create("DomosInvestmentObject",a.ObjectRepository.fetchInvestmentObjectIdentifiables),{Master:l,column:n.IdentifiableColumnUtils.createFactory(l.widget,d),widget:l.widget,HoldingAndFund:s,InvestmentObject:u});var c=function(){function t(){}return t.column=n.IdentifiableColumnUtils.createFactory(void 0,d),t}();e.ObjectUI=c}),define("core/ui/IntegerUI",["require","exports","tslib","./grid/column/ColumnUtils","./grid/column/ColumnStyle"],function(t,e,i,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IntegerUI=void 0;var n=function(){function t(){}return t.column=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return a.ColumnUtils.addFormat.apply(a.ColumnUtils,i.__spreadArrays([t,"{0:n0}",r.ColumnStyle.RIGHT_ALIGNED],e))},t}();e.IntegerUI=n}),define("core/ui/DateUI",["require","exports","tslib","./grid/column/ColumnUtils"],function(t,e,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DateUI=void 0;var n=function(){function t(){}return t.column=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return a.ColumnUtils.addFormat.apply(a.ColumnUtils,i.__spreadArrays([t,"{0:d}"],e))},t}();e.DateUI=n}),define("core/util/ObservableUtils",["require","exports","tslib","lodash","kendo"],function(t,e,d,l,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObservableUtils=void 0;var n=function(){function n(){}return n.get=function(t,e){for(var n=t,i=0,a=e.split(".");i<a.length;i++){var r=a[i];if(!(n=n.get(r)))return null}return n},n.update=function(t,e){for(var n=0,i=l.keys(e);n<i.length;n++){var a=i[n],r=e[a];if(l.isArray(r)){var o=t.get(a);o.splice.apply(o,d.__spreadArrays([0,o.length],r))}else t.set(a,r)}},n.unpack=function(t){return t instanceof i.Observable?t.toJSON():t},n.getUnpacked=function(t,e){return n.unpack(t.get(e))},n}();e.ObservableUtils=n}),define("lp/views/simulation/LpSimulationGrid",["require","exports","core/ui/grid/GridUtils","i18n","object/ui/EntityInvestorUI","object/ui/ObjectUI","core/ui/IntegerUI","core/ui/DateUI","core/util/ObservableUtils"],function(t,e,o,d,l,s,u,c,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpSimulationGrid=void 0;var m="#simulationGrid";var n=function(){function t(){}return t.display=function(t,e,n){var i;if(i=t?t.find(m):n){var a;a=i.find(m),kendo.destroy(a),a.empty();var r={dataSource:{data:e,schema:{model:{id:"id",fields:{name:{type:"string"},date:{type:"date"},amount:{type:"number"},mode:{type:"string"},businessObject:{nullable:!0},investor:{nullable:!0},object:{type:"string"}},businessObjectName:function(){return p.ObservableUtils.get(this,"businessObject.name")||""},investorName:function(){return p.ObservableUtils.get(this,"investor.name")||""}}},sort:{field:"type",dir:"asc"}},columns:[{field:"object",title:d.I18N.t("lp:simulation.object"),width:"140px"},{field:"name",title:d.I18N.t("lp:simulation.name"),width:"140px"},c.DateUI.column({field:"date",title:d.I18N.t("lp:simulation.date"),width:"140px"}),{field:"mode",title:d.I18N.t("lp:simulation.mode"),width:"140px"},u.IntegerUI.column({field:"amount",title:d.I18N.t("lp:simulation.amount"),width:"140px"}),s.UI.column({field:"businessObject",title:d.I18N.t("lp:simulation.businessObject"),width:"140px"}),l.EntityInvestorUI.column({field:"investor",title:d.I18N.t("lp:simulation.investor"),width:"140px"})],scrollable:!0,editable:!1,pageable:o.GridUtils.defaultPageable(),height:500};o.GridUtils.withDefaults(r),i.kendoGrid(r)}},t}();e.LpSimulationGrid=n}),define("lp/repository/LpSimulationRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpSimulationRepository=void 0;var i=function(){function t(){}return t.fetchSimulation=function(){return n.WebHttp.getJson("simulation/list.json")},t}();e.LpSimulationRepository=i}),define("core/simulation/Simulation",["require","exports","../ApplicationConstants","../web/WebHttp","../util/Logger"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Simulation=void 0;var r=function(){function t(){}return Object.defineProperty(t,"active",{get:function(){return n.ApplicationConstants.isSimulation()},enumerable:!1,configurable:!0}),t.stop=function(){n.ApplicationConstants.isSimulation()&&i.WebHttp.postJson("simulation/action.json",{action:"stop"}).then(function(){return window.location.reload()}).catch(a.Logger.error)},t.undo=function(){i.WebHttp.postJson("simulation/action.json",{action:"undo"}).then(function(){return window.location.reload()}).catch(a.Logger.error)},t.redo=function(){i.WebHttp.postJson("simulation/action.json",{action:"redo"}).then(function(){return window.location.reload()}).catch(a.Logger.error)},t.save=function(){i.WebHttp.postJson("simulation/action.json",{action:"save"}).then(function(){return window.location.reload()}).catch(a.Logger.error)},t.saveAs=function(t){i.WebHttp.postJson("simulation/action.json",{action:"saveAs",name:t}).then(function(){return window.location.reload()}).catch(a.Logger.error)},t.load=function(t){i.WebHttp.postJson("simulation/action.json",{action:"load",name:t}).then(function(){return window.location.reload()}).catch(a.Logger.error)},t}();e.Simulation=r}),define("lp/views/simulation/LpSimulationToolBar",["require","exports","i18n","core/simulation/Simulation","core/ui/Confirmation","core/util/Logger"],function(t,e,r,o,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpSimulationToolBar=void 0;var n=function(){function t(){}return t.display=function(t,e){var n=t.find("#simulationToolbar");kendo.destroy(n),n.empty();var i={data:e,isSimulation:!0},a={items:[{id:"stopSimulation",type:"button",text:r.I18N.t("lp:simulation.actions.stopSimulation"),icon:"stop",click:function(){var e;(e=i)&&e.isSimulation&&d.Confirmation.confirm(r.I18N.t("site:simulation"),r.I18N.t("site:stopSimulation")).then(function(t){t&&(e.isSimulation=!1,o.Simulation.stop())}).catch(function(t){l.Logger.error(t)})}},{id:"undoSimulation",type:"button",text:r.I18N.t("lp:simulation.actions.undoSimulation"),icon:"undo",click:function(){o.Simulation.undo()}},{id:"redoSimulation",type:"button",text:r.I18N.t("lp:simulation.actions.redoSimulation"),icon:"redo",click:function(){o.Simulation.redo()}},{id:"saveSimulation",type:"button",text:r.I18N.t("lp:simulation.actions.saveSimulation"),icon:"save",click:function(){o.Simulation.save()}},{id:"saveAsSimulation",type:"button",text:r.I18N.t("lp:simulation.actions.saveAsSimulation"),icon:"save",click:function(){o.Simulation.saveAs("toto")}},{id:"loadSimulation",type:"button",text:r.I18N.t("lp:simulation.actions.loadSimulation"),icon:"reload",click:function(){o.Simulation.load("toto")}}]};n.kendoToolBar(a)},t}();e.LpSimulationToolBar=n}),define("lp/views/LpSimulationView",["require","exports","kendo","text!templates/lp/lp.simulation.html","i18n","./simulation/LpSimulationGrid","lp/repository/LpSimulationRepository","core/util/Logger","./simulation/LpSimulationToolBar"],function(t,e,n,i,a,r,o,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpSimulationView=void 0;var s=function(){function t(){}return t.create=function(){var t=n.template(i)({}),e={init:function(t){var i=t.sender.element;a.I18N.localize(i),o.LpSimulationRepository.fetchSimulation().then(function(t){return e=i,n=t,r.LpSimulationGrid.display(e,n),void l.LpSimulationToolBar.display(e,n);var e,n}).catch(function(t){d.Logger.error(t)})}};return new n.View(t,e)},t}();e.LpSimulationView=s}),define("lp/views/simulation/LpSimulationModule",["require","exports","../LpSimulationView"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpSimulationModule=void 0;var i=function(){function t(){}return t.init=function(){n.LpSimulationView.create()},t}();e.LpSimulationModule=i}),define("settings/repository/LogsRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LogsRepository=void 0;var i=function(){function t(){}return t.list=function(){return n.WebHttp.getJson("logs/list.json")},t.clear=function(){return n.WebHttp.getJson("logs/list.json?clear=true")},t.listWorkflow=function(t){return n.WebHttp.getJson("logs/workflow/list.json",{workflowId:t})},t.listTask=function(t){var e={historicalInstances:JSON.stringify(t)};return n.WebHttp.getJson("logs/workflow/list.json",e)},t}();e.LogsRepository=i}),define("core/ui/DateTimeUI",["require","exports","tslib","./grid/column/ColumnUtils"],function(t,e,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DateTimeUI=void 0;var n=function(){function t(){}return t.column=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return a.ColumnUtils.addFormat.apply(a.ColumnUtils,i.__spreadArrays([t,"{0:g}"],e))},t}();e.DateTimeUI=n}),define("core/util/EnumUtils",["require","exports","lodash","kendo","i18n"],function(t,e,r,i,o){"use strict";function d(t,e){var n=t+"."+e;return o.I18N.exists(n)?o.I18N.t(n):e}Object.defineProperty(e,"__esModule",{value:!0}),e.EnumUtils=void 0;var n=function(){function a(){}return a.getName=function(t,e,n){if(n){var i=function(t){if(r.isNumber(t))return t;var e=parseInt(t,10);return isNaN(e)?void 0:e}(n);if(r.isNil(i))return r.isString(n)?d(t,n):void 0;var a=e[i];if(r.isNil(a))return;return d(t,a)}},a.getNewObject=function(t,e,n){if(!n)return"?";var i=e[n];return r.isNil(i)?"?":o.I18N.t(t+"."+i+".new")},a.createNameFn=function(e,n){return function(t){return a.getName(e,n,t)}},a.createNewObjectFn=function(e,n){return function(t){return a.getNewObject(e,n,t)}},a.forEach=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];r.isNumber(i)&&e(i,n)}},a.map=function(t,n){var i=[];return a.forEach(t,function(t,e){return i.push(n(t,e))}),i},a.list=function(t){return this.map(t,function(t){return t})},a.listNames=function(e){return this.map(e,function(t){return e[t]})},a.toDataSource=function(n,t){var e={transport:{read:function(t){t.success(a.map(n,function(t,e){return{id:t,name:n.getName(e)||""}}))}},schema:{model:{fields:{id:{type:"number"},name:{type:"string"}},id:"id"}}};return e.sort=t?{dir:"asc",field:"name"}:{dir:"asc",field:"id"},new i.data.DataSource(e)},a}();e.EnumUtils=n}),define("core/util/StringUtils",["require","exports","lodash","core/locale/LanguageService"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringUtils=void 0;var a=function(){function t(){}return t.compare=function(t,e){return n.isNil(t)?n.isNil(e)?0:-1:n.isNil(e)?1:t.localeCompare(e,i.LanguageService.getLanguage())},t}();e.StringUtils=a}),define("core/ui/grid/column/EnumColumnUtils",["require","exports","lodash","jquery","core/ui/binder/MultiValueBinder","core/util/ArrayUtils","core/util/EnumUtils","core/util/StringUtils","./ColumnUtils"],function(t,e,d,l,s,u,r,c,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p={filterable:{multi:!(e.EnumColumnUtils=void 0)}},n={groupable:!1,filterable:!1},i=function(){function i(){}return i.create=function(t,n,e){o.ColumnUtils.addEditor(t,e),d.has(t,"values")||(t.values=r.EnumUtils.map(n,function(t){return{text:n.getName(t)||"",value:t}}));var i=t.field;function a(t){if(!i)return"";var e=t[i];return n.getName(e)||""}return d.isNil(t.template)&&(t.template=a),d.isNil(t.sortable)&&(t.sortable={compare:function(t,e){var n=a(t),i=a(e);return c.StringUtils.compare(n,i)}}),d.defaults(t,p)},i.createFactory=function(e,n){return function(t){return i.create(t,e,n)}},i.createMulti=function(t,i,a){var r=t.field;!d.has(t,"editor")&&a&&(t.editor=function(t,e){if(e.field){var n=l("<select>").attr("data-bind",s.kMultiValueBinding+": "+e.field).appendTo(t);a(n)}});var o=function(t,e){if(!t||!d.has(t,e))return"";var n=u.ArrayUtils.toArray(t[e]);return n?d.chain(n).map(function(t){return i.getName(t)}).omitBy(d.isNil).sortBy().join(", ").value():""};return!d.has(t,"template")&&r&&(t.template=function(t){return o(t,r)}),!d.has(t,"sortable")&&r&&(t.sortable={compare:function(t,e){var n=o(t,r),i=o(e,r);return c.StringUtils.compare(n,i)}}),d.defaults(t,n)},i.createMultiFactory=function(e,n){return function(t){return i.createMulti(t,e,n)}},i}();e.EnumColumnUtils=i}),define("settings/data/LogLevel",["require","exports","core/util/EnumUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LogLevel=void 0;var a,r;(a=e.LogLevel||(e.LogLevel={}))[a.ERROR=1]="ERROR",a[a.WARN=2]="WARN",a[a.INFO=3]="INFO",a[a.DEBUG=4]="DEBUG",(r=e.LogLevel||(e.LogLevel={})).getName=n.EnumUtils.createNameFn("settings:LogLevel",r),r.column=i.EnumColumnUtils.createFactory(r)}),define("core/ui/grid/GridToolbar",["require","exports","lodash","../../util/EnumUtils","../../util/StringUtils","i18n"],function(t,e,r,a,o,n){"use strict";function d(t){return t.data("kendoGrid")||t.data("kendoTreeList")}function f(t){if(t){var e=t.select();if(1===e.length){var n=t.dataItem(e);return n?n.toJSON():void 0}}}Object.defineProperty(e,"__esModule",{value:!0}),e.GridToolbar=void 0;var i=function(){function t(){this.items=[],this.excelAdded=!1,this.commandCounter=0,this.commandClicks={},this.selectedCommandClicks={}}return t.prototype.addCreate=function(t){return r.isFunction(t)&&(t=t()),this.items.push({url:t,spriteCssClass:"d-sprite d-new",text:"Create"}),this},t.prototype.addEnumCreate=function(n,i){var t=a.EnumUtils.list(n).map(function(t){var e=n.getNewObject(t);return{url:i(t),text:e}}).sort(function(t,e){return o.StringUtils.compare(t.text,e.text)});return this.items.push({text:"Create",spriteCssClass:"d-sprite d-new",items:t}),this},t.prototype.addExcel=function(){return this.excelAdded=!0,this.items.push({text:n.I18N.t("site:export.excel"),spriteCssClass:"k-icon k-i-excel",attr:{"data-key":"excel"}}),this},t.prototype.addClick=function(t,e,n,i){var a="cmd"+ ++this.commandCounter;return this.commandClicks[a]=n,this.items.push({text:t,spriteCssClass:e,attr:{"data-key":a,id:i}}),this},t.prototype.addSelectedClick=function(t){var e=t.text,n=t.spriteCssClass,i=t.click,a=t.enable||function(){return!0},r="cmd"+ ++this.commandCounter;return this.selectedCommandClicks[r]={click:i,enable:a},this.items.push({text:e,spriteCssClass:n,attr:{"data-key":r}}),this},t.prototype.template=function(){return'<ul class="gridToolbarMenu"></ul><div class="clearer"></div>'},t.prototype.bind=function(p,t){void 0===t&&(t=!0),t&&(this.excelAdded||this.addExcel());var o=this,e=p.find(".k-grid-toolbar").find("ul"),n={dataSource:this.items,select:function(t){if(t.item){var e=d(p),n=$(t.item).data("key");if("excel"===n)return t.preventDefault(),void(e&&e.saveAsExcel());var i=o.commandClicks[n];if(i)i.call(null);else{var a=o.selectedCommandClicks[n];if(a){var r=f(e);r&&a.enable(r)&&a.click(r)}else;}}}};e.kendoMenu(n);var i=d(p),m=r.toPairs(this.selectedCommandClicks);if(i&&0<m.length){var a=function(t){for(var e,n,i,a=f(t.sender),r=!!a,o=0,d=m;o<d.length;o++){var l=d[o],s=l[0],u=l[1],c=r&&u.enable(a);e=s,n=c,i=void 0,i=p.find('[data-key="'+e+'"]'),n?(i.removeClass("k-state-disabled"),i.addClass("k-state-default")):(i.removeClass("k-state-default"),i.addClass("k-state-disabled"))}};i.bind("change",a),i.bind("dataBound",a)}},t.ICON_ADD="k-icon k-i-plus",t.ICON_EDIT="k-icon k-i-edit",t.ICON_DELETE="k-icon k-i-close",t}();e.GridToolbar=i}),define("settings/event/LogEvents",["require","exports","lodash","core/event/DEvents","core/event/SiteEvents"],function(t,e,i,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LogEvents=void 0;var r=function(){function t(){}return t.newLogsCount=function(){return n.DEvents.get("newLogsCount")},t.resetLogs=function(){return n.DEvents.get("resetLogs")},t}();e.LogEvents=r,a.SiteEvents.webSocketEvent().register(function(t){var e=t.logsUpdated;if(e&&0<e.length){var n=i.chain(e).map(function(t){return t.data}).flatten().reduce(function(t,e){return t.newLogs+=e.newLogs,e.reset&&(t.reset=!0),t},{newLogs:0,reset:!1}).value();n.reset?r.resetLogs().fire():0<n.newLogs&&r.newLogsCount().fire(n.newLogs)}})}),define("settings/ui/logs/LogUI",["require","exports","settings/event/LogEvents"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LogUI=void 0;var i="data-badge",a=function(){function t(){this.count=0}return t.prototype.add=function(t){t<=0||(this.count+=t,this.refresh())},t.prototype.reset=function(){this.count=0,this.refresh()},t.prototype.refresh=function(){var t=$(".dm-log-badge");this.count<=0?t.removeAttr(i):t.attr(i,this.count)},t}(),r=function(){function e(){}return e.init=function(){n.LogEvents.newLogsCount().register(function(t){return e.ui.add(t)}),n.LogEvents.resetLogs().register(function(){return e.ui.reset()})},e.reset=function(){e.ui.reset()},e.ui=new a,e}();e.LogUI=r}),define("settings/views/logs/LogsGrid",["require","exports","kendo","settings/repository/LogsRepository","core/ui/grid/GridUtils","core/ui/DateTimeUI","i18n","settings/data/LogLevel","core/ui/grid/GridToolbar","settings/ui/logs/LogUI","core/util/Logger"],function(t,e,a,r,o,d,l,s,u,c,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LogsGrid=void 0;var n=function(){function t(){}return t.init=function(t){!function(t){a.destroy(t),t.empty();var e={transport:{read:function(e){r.LogsRepository.list().then(function(t){e.success(t),c.LogUI.reset()}).catch(function(t){return e.error(t)})}},schema:{model:{id:"id",fields:{timestamp:{type:"date"},level:{type:"number"},message:{type:"string"}}}},sort:[{field:"timestamp",dir:"desc"}]},n=(new u.GridToolbar).addClick(l.I18N.t("settings:logs.clear"),"k-icon k-i-trash",function(){c.LogUI.reset(),r.LogsRepository.clear().then(function(){return t.data("kendoGrid").dataSource.read()}).catch(function(t){return p.Logger.error(t)})}),i={toolbar:n.template(),dataSource:e,columns:[d.DateTimeUI.column({field:"timestamp",title:l.I18N.t("settings:logs.timestamp"),width:"150px"}),s.LogLevel.column({field:"level",title:l.I18N.t("settings:logs.level"),width:"110px"}),{field:"message",title:l.I18N.t("settings:logs.message"),width:"450px",template:function(t){return'<span style="white-space: normal !important;" >'+l.I18N.t(t.message,t.params)+"</span>"}}],scrollable:!0,sortable:!0,editable:!1,pageable:o.GridUtils.defaultPageable(),height:620,excelExport:function(t){var e=t.workbook,n=t.data;if(e){var i=e.sheets[0];if(i.rows)for(var a=1;a<i.rows.length;a++){var r=i.rows[a].cells;if(r){var o=n[a-1].data||n[a-1];r[0].value=o.timestamp,r[1].value=s.LogLevel.getName(o.level),r[2].value=l.I18N.t(o.message,o.params)}}}}};o.GridUtils.withDefaults(i),t.kendoGrid(i),n.bind(t)}(t)},t}();e.LogsGrid=n}),define("text!templates/settings/logs.window.html",[],function(){return'<div>\n\t<div id="logsGrid"></div>\n</div>'}),define("settings/views/logs/WorkflowLogsGrid",["require","exports","kendo","settings/repository/LogsRepository","core/ui/grid/GridUtils","core/ui/DateTimeUI","i18n","settings/data/LogLevel","core/ui/grid/GridToolbar"],function(t,e,o,d,l,s,u,c,p){"use strict";function i(t,n,i){if(n||i){o.destroy(t),t.empty();var e={transport:{read:function(e){var t;i?t=d.LogsRepository.listTask(i):n&&(t=d.LogsRepository.listWorkflow(n)),t&&t.then(function(t){e.success(t)}).catch(function(t){return e.error(t)})}},schema:{model:{id:"id",fields:{taskName:{type:"string"},historyInstanceId:{type:"string"},timestamp:{type:"date"},level:{type:"number"},message:{type:"string"}}}},sort:[{field:"timestamp",dir:"desc"}]},a=new p.GridToolbar,r={toolbar:a.template(),dataSource:e,columns:[{field:"taskName",title:u.I18N.t("settings:logs.taskName"),width:"250px"},{field:"historyInstanceId",title:u.I18N.t("settings:logs.histId"),width:"100px",hidden:!0},s.DateTimeUI.column({field:"timestamp",title:u.I18N.t("settings:logs.timestamp"),width:"150px"}),c.LogLevel.column({field:"level",title:u.I18N.t("settings:logs.level"),width:"110px"}),{field:"message",title:u.I18N.t("settings:logs.message"),width:"450px",template:function(t){return'<span style="white-space: normal !important;" >'+u.I18N.t(t.message,t.params)+"</span>"}}],scrollable:!0,sortable:!0,editable:!1,pageable:l.GridUtils.defaultPageable(),height:620};l.GridUtils.withDefaults(r),t.kendoGrid(r),a.bind(t)}}Object.defineProperty(e,"__esModule",{value:!0}),e.WorkflowLogsGrid=void 0;var n=function(){function t(){}return t.initForWorkflow=function(t,e){i(t,e,null)},t.initForHistoricTask=function(t,e,n){i(t,e,n)},t}();e.WorkflowLogsGrid=n}),define("settings/views/logs/LogsView",["require","exports","i18n","./LogsGrid","text!templates/settings/logs.window.html","./WorkflowLogsGrid"],function(t,e,o,d,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LogsView=void 0;var u="#logsGrid",n=function(){function t(){}return t.display=function(t,e){var n=kendo.template(l)({}),i=$("<div>").appendTo($(document.body));i.html(n),o.I18N.localize(i);var a=1035;t?s.WorkflowLogsGrid.initForWorkflow(i.find(u),t):e?s.WorkflowLogsGrid.initForHistoricTask(i.find(u),null,e):(a=785,d.LogsGrid.init(i.find(u)));var r={width:a,height:650,title:o.I18N.t("settings:logs.title"),visible:!1,actions:["Pin","Minimize","Maximize","Close"]};i.kendoWindow(r).data("kendoWindow").center().open()},t}();e.LogsView=n}),define("core/util/TipDisplay",["require","exports","core/web/WebStorages"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TipDisplay=void 0;var i=n.WebStorages.siteCacheStorage(),a="displayTips",r=function(){function t(){}return t.displayTips=function(){return!!i.getItem(a)},t.setDisplayTips=function(t){t?i.setItem(a,"1"):i.removeItem(a)},t}();e.TipDisplay=r}),define("text!templates/core/tips.window.html",[],function(){return'<div class="tipsWindow">\n\t<table>\n\t\t# if (area) { #\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<div data-role="domosicon" data-icon="map-marker"></div>\n\t\t\t</td>\n\t\t\t<td class="tipArea">#= area #</td>\n\t\t</tr>\n\t\t# } #\n\t\t# if (message) { #\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<div data-role="domosicon" data-icon="light-bulb"></div>\n\t\t\t</td>\n\t\t\t<td class="tipMessage">#= message #</td>\n\t\t</tr>\n\t\t# } #\n\t\t# if (how) { #\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<div data-role="domosicon" data-icon="wrench"></div>\n\t\t\t</td>\n\t\t\t<td class="tipHow">#= how #</td>\n\t\t</tr>\n\t\t# } #\n\t\t# if (link && linkUrl) { #\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<div data-role="domosicon" data-icon="link"></div>\n\t\t\t</td>\n\t\t\t<td class="tipLink">\n\t\t\t\t<a href="#: linkUrl#">#: link#</a>\n\t\t\t</td>\n\t\t</tr>\n\t\t# } #\n\t</table>\n\t<table>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<input id="tipsStartup" type="checkbox" class="k-checkbox" data-bind="checked: showOnStartup"/>\n\t\t\t\t<label for="tipsStartup" class="k-checkbox-label" data-i18n="site:tips.showOnStartup"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<button class="k-button" data-i18n="site:tips.next" data-bind="click: nextClick"></button>\n\t\t\t\t<button class="k-button" data-i18n="site:tips.close" data-bind="click: closeClick"></button>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>'}),define("core/repository/TipRepository",["require","exports","core/web/WebHttp","core/web/WebStorages"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TipRepository=void 0;var a=i.WebStorages.siteLocalStorage(),r="hideTipsOnStartup",o=function(){function t(){}return t.displayOnStartup=function(){return!a.getItem(r)},t.setDisplayOnStartup=function(t){t?a.removeItem(r):a.setItem(r,"1")},t.get=function(t,e){return n.WebHttp.getJson("tip.json",{id:t},e)},t}();e.TipRepository=o}),define("core/data/DObservable",["require","exports","lodash","kendo","../util/ObservableUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DObservable=void 0;var r=function(){function e(t){this._observable=t}return e.wrap=function(t){return new e(t)},e.generalize=function(t){return e.wrap(t.kendo())},e.of=function(t){return t instanceof i.data.ObservableObject?new e(t):new e(i.observable(t))},e.prototype.get=function(t){var e=this._observable.get(t);return e instanceof i.Observable?e.toJSON():e},e.prototype.getRaw=function(t){return this._observable.get(t)},e.prototype.set=function(t,e){this._observable.set(t,e)},e.prototype.kendo=function(){return this._observable},e.prototype.toJson=function(){return this._observable.toJSON()},e.prototype.bind=function(t){i.bind(t,this._observable)},e.prototype.getId=function(t){var e=this._observable.get(t);if(!n.isNil(e))return e.get("id")},e.prototype.bindChange=function(n){var i=this;this._observable.bind("change",function(t){var e=t.field;e&&n(i,e)})},e.prototype.update=function(t){a.ObservableUtils.update(this._observable,t)},e}();e.DObservable=r}),define("core/data/DObservableBuilder",["require","exports","./DObservable"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DObservableBuilder=void 0;var i=function(){function e(t){this._raw=t}return e.of=function(t){return new e(t)},e.prototype.add=function(t,e){var n=this;return this._raw[t]=function(){return e(n.build())},this},e.prototype.build=function(){return this._built||(this._built=n.DObservable.of(this._raw))},e}();e.DObservableBuilder=i}),define("core/util/TipUtils",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TipUtils=void 0;var n=function(){function t(){}return t.transformText=function(t){return t?t.replace(/{{icon\s+([a-z\-]+)}}/g,'<div class="tips-text-icon" data-role="domosicon" data-icon="$1"></div>'):t||""},t}();e.TipUtils=n}),define("core/views/tip/TipWindow",["require","exports","lodash","core/web/WebLocation","text!templates/core/tips.window.html","i18n","core/repository/TipRepository","core/data/DObservableBuilder","core/util/TipUtils","core/ui/IconUI"],function(t,e,c,p,m,f,b,v,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TipWindow=void 0;var n=function(){function t(){}return t.open=function(u){return new Promise(function(t,e){var n,i,a=kendo.template(m)((i="",(n=u).area&&0<n.area.length&&(i=c.chain(n.area).map(function(t){var e="site:tips.area."+t;return f.I18N.exists(e)?f.I18N.t(e):e}).join(", ").value()),{area:i,message:y.TipUtils.transformText(n.message),how:y.TipUtils.transformText(n.how),link:n.link||"",linkUrl:n.link?p.WebLocation.resolveDocFi(n.link):""})),r=$("<div>").addClass("formWindow").appendTo($(document.body));r.html(a),f.I18N.localize(r);var o=!1,d=r.kendoWindow({modal:!0,width:400,minHeight:150,visible:!1}).data("kendoWindow");d.bind("close",function(){return kendo.destroy(r),r.remove(),t(o),!0});var l={showOnStartup:b.TipRepository.displayOnStartup()},s=v.DObservableBuilder.of(l).add("nextClick",function(t){o=!0,d.close()}).add("closeClick",function(t){return d.close()}).build();s.bind(r),s.bindChange(function(t,e){"showOnStartup"===e&&b.TipRepository.setDisplayOnStartup(!!t.get(e))}),d.title(f.I18N.t("site:tips.title")).open().center()})},t}();e.TipWindow=n}),define("core/ui/TipUI",["require","exports","tslib","core/util/TipDisplay","core/views/tip/TipWindow","core/util/Logger","core/repository/TipRepository"],function(t,e,i,n,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TipUI=void 0;function d(t){(function(n){return i.__awaiter(this,void 0,void 0,function(){var e;return i.__generator(this,function(t){switch(t.label){case 0:return[4,o.TipRepository.get(n)];case 1:return e=t.sent(),[4,a.TipWindow.open(e)];case 2:return t.sent()&&d(),[2]}})})})(t).catch(function(t){return r.Logger.error(t)})}var l=function(){function t(){}return t.init=function(){var t=new URLSearchParams(window.location.search).get("tip")||void 0;t?d(t):n.TipDisplay.displayTips()&&(n.TipDisplay.setDisplayTips(!1),o.TipRepository.displayOnStartup()&&d())},t.display=function(){d()},t}();e.TipUI=l}),define("workflow/repository/WorkflowRepository",["require","exports","lodash","core/web/WebHttp","core/web/WebLocation"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkflowRepository=void 0;var r=function(){function e(){}return e.list=function(t){var e={};return t&&(e.category=t),i.WebHttp.getJson("workflow/list.json",e)},e.suspendWorkflow=function(t,e){var n={};return n.key=t,e&&(n.category=e),i.WebHttp.getJson("workflow/suspend.json",n)},e.activateWorkflow=function(t,e){var n={};return n.key=t,e&&(n.category=e),i.WebHttp.getJson("workflow/activate.json",n)},e.simulateWorkflow=function(t,e){return i.WebHttp.postJson("workflow/simulation.json",{id:t,currentSubProcessOnly:e})},e.listIdentifiables=function(t){var e={};return t&&(e.category=t),i.WebHttp.getJson("workflow/id/list.json",e)},e.listKeyIdentifiables=function(t){var e={};return t&&(e.category=t),i.WebHttp.getJson("workflow/key/id/list.json",e)},e.fetchTracker=function(t,e){var n={workflowId:t};return i.WebHttp.getJson("workflow/tracker.json",n,e)},e.fetchWaterfallExplanation=function(t,e){var n={workflowId:t};return i.WebHttp.getJson("workflow/waterfall.json",n,e)},e.uploadOptions=function(t){return n.defaults(t||{},e.defaultUploadOptions())},e.defaultUploadOptions=function(){return{async:{saveUrl:a.WebLocation.resolve("workflow/upload.json"),saveField:"file"}}},e}();e.WorkflowRepository=r}),define("text!templates/index.html",[],function(){return'\n<div class=\'idxHd k-header\'>\n\t<nav class=\'idxHdMenu\'>\n\t\t<ul class=\'idxHdMenuUser\' data-role=\'menu\'>\n\t\t\t<li>\n\t\t\t\t#= cluster#\n\t\t\t\t# if (multiCluster) {#\n\t\t\t\t<ul>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href="#=rootPath#view" data-i18n="site:menu.changeCluster"></a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t#} #\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span>\n\t\t\t\t\t<div class="d-icon" data-role="domosicon" data-icon="user"></div>\n\t\t\t\t\t#= user#\n\t\t\t\t</span>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<div class="d-icon" data-role="domosicon" data-icon="languages"></div>\n\t\t\t\t\t\t\t<span data-i18n="site:menu.languages"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a href=\'javascript:void(0)\' data-lng="en" data-bind=\'click: setLanguage\'>\n\t\t\t\t\t\t\t\t\t<div class="d-icon" data-role="domosicon" data-icon="english"></div>\n\t\t\t\t\t\t\t\t\tEnglish\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a href=\'javascript:void(0)\' data-lng="fr" data-bind=\'click: setLanguage\'>\n\t\t\t\t\t\t\t\t\t<div class="d-icon" data-role="domosicon" data-icon="french"></div>\n\t\t\t\t\t\t\t\t\tFrançais\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href="\\\\#!/change.password">\n\t\t\t\t\t\t\t<div class="d-icon" data-role="domosicon" data-icon="user"></div>\n\t\t\t\t\t\t\t<span data-i18n="site:menu.changePassword"></span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href="#=rootPath#logout">\n\t\t\t\t\t\t\t<div class="d-icon" data-role="domosicon" data-icon="logout"></div>\n\t\t\t\t\t\t\t<span data-i18n="site:menu.logout"></span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span>\n\t\t\t\t\t<div class="d-icon" data-role="domosicon" data-icon="settings"></div><span class="dm-log-badge" ></span>\n\t\t\t\t</span>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href="\\\\#!/users">\n\t\t\t\t\t\t\t<div class="d-icon" data-role="domosicon" data-icon="user"></div>\n\t\t\t\t\t\t\t<span data-i18n="site:menu.users"></span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href="javascript:void(0)" data-bind="click: tipsClick">\n\t\t\t\t\t\t\t<div class="d-icon" data-role="domosicon" data-icon="light-bulb"></div>\n\t\t\t\t\t\t\t<span data-i18n="site:tips.title"></span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t# if (simulation) { #\n\t\t\t\t\t\t\t<a href="javascript:void(0)" data-bind=\'click: stopSimulation\'>\n\t\t\t\t\t\t\t\t<div class="d-icon" data-role="domosicon" data-icon="stopSimulation"></div>\n\t\t\t\t\t\t\t\t<span data-i18n="site:menu.stopSimulation"></span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t# } else {#\n\t\t\t\t\t\t\t<a href="javascript:void(0)" data-bind=\'click: startSimulation\'>\n\t\t\t\t\t\t\t\t<div class="d-icon" data-role="domosicon" data-icon="startSimulation"></div>\n\t\t\t\t\t\t\t\t<span data-i18n="site:menu.startSimulation"></span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t# } #\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href="\\\\#!/jobs">\n\t\t\t\t\t\t\t<div class="d-icon" data-role="domosicon" data-icon="settings"></div>\n\t\t\t\t\t\t\t<span data-i18n="site:menu.jobs"></span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href="javascript:void(0)" data-bind=\'click: logsClick\'>\n\t\t\t\t\t\t\t<div class="d-icon" data-role="domosicon" data-icon="logs"></div>\n\t\t\t\t\t\t\t<span class="dm-log-badge" data-i18n="site:menu.logs" ></span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</li>\n\t\t\t# if (simulation) { #\n\t\t\t<li class="idxSimulation">\n\t\t\t\t<a href="#=simulationUrl#" data-bind=\'click: showSimulation\'>\n\t\t\t\t\t<span data-i18n="site:simulation"></span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\t# } #\n\t\t</ul>\n\t\t<a href="\\\\#!/" class=\'idxHdLink d-hover k-link\' data-i18n="[title]site:menu.home">\n\t\t\t<div class="d-icon" data-role="domosicon" data-icon="logo"></div>\n\t\t</a>\n\t\t<a id="idxHdPanelLink" href="javascript:void(0)" class=\'idxHdIcon d-hover d-border k-link\' data-bind=\'click: panelClick\'>\n\t\t\t<span id="idxHdPanel" class=\'d-sprite d-shift-left\'></span>\n\t\t</a>\n\t\t# for (var i = 0, length = categories.length; i < length; ++i) {#\n\t\t# var category = categories[i]; #\n\t\t# var catCss = (category.key === currentCategoryKey) ? "k-primary" : "";#\n\t\t<a href="#= category.url#" class=\'idxHdIcon d-hover d-border k-link #= catCss#\' title=\'#= category.name#\' data-key="#= category.key#">\n\t\t\t<div class="d-icon" data-role="domosicon" data-icon="#: category.icon#"></div>\n\t\t</a>\n\t\t#}#\n\n\t\t<div class="idxHdSearch">\n\t\t\t<span class="k-textbox k-space-right">\n\t\t\t\t<input type="search" data-i18n="[placeholder]site:menu.searchDocuments" data-bind="value: searchText"/>\n\t\t\t\t<a href="javascript:void(0)" class=\'k-icon k-i-search\' data-i18n="[title]site:menu.search" data-bind="click: searchClick"></a>\n\t\t\t</span>\n\t\t</div>\n\t</nav>\n</div>\n<div class=\'idxRoot\'>\n\t<div id="idxPanel" class="idxPanel k-content d-border">\n\t\t<div id="idxPanelContent"></div>\n\t</div>\n\t<div id="idxMain" class="idxMain">\n\t\t<div id="idxMainContent"></div>\n\t</div>\n</div>\n'}),function(){var dt,lt,st,ut,ct,pt,mt;mt="#root",lt="#idxDynHd",dt="#idxDynHdClick",st="#idxHdPanel",ut="#idxHdPanelLink",pt="#idxPanel",ct="#idxMain",define("views/layout",["jquery","i18n","kendo","core/bootstrap/DBootstrap","core/locale/LanguageService","core/web/WebStorages","core/web/WebLocation","site/router","site/routemap","core/data/SiteCategories","core/ApplicationConstants","core/ui/Confirmation","lp/views/simulation/LpSimulationModule","settings/views/logs/LogsView","settings/ui/logs/LogUI","core/ui/TipUI","workflow/repository/WorkflowRepository","core/simulation/Simulation","text!templates/index.html","core/ui/IconUI"],function(d,t,o,e,n,i,a,r,l,s,u,c,p,m,f,b,v,y,h){var g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q,z,X,Z,tt,et,nt,it,at,rt,ot;return I=e.DBootstrap,N=s.SiteCategories,c.Confirmation,w=n.LanguageService,"data-lng",D=i.WebStorages.tenantLocalStorage(),R=a.WebLocation,g=u.ApplicationConstants,p.LpSimulationModule,x=b.TipUI,_=v.WorkflowRepository,S=y.Simulation,E=m.LogsView,k=f.LogUI,Y=function(){return d(lt).slideDown(),d(dt).show(),null},A=function(){return d(lt).slideUp(),d(dt).hide(),null},r.onRouteChange(A),U=function(t){return"pw_"+t},O=function(t){return"pc_"+t},G=function(){return D.getItem(U(T))||"250px"},et=function(t){if(null!=T)return D.setItem(U(T),t+"px")},j=function(){var t;return!!(t=D.getItem(O(T)))&&"true"===t},nt=function(t){if(null!=T)return D.setItem(O(T),t)},K=function(){return d(st).removeClass("d-shift-left").addClass("d-shift-right").attr("title",t.t("site:menu.panel.expand"))},$=function(){return d(st).removeClass("d-shift-right").addClass("d-shift-left").attr("title",t.t("site:menu.panel.collapse"))},q=function(){return T=null,d(st).hide(),d(ut).hide(),d(pt).hide(),d(ct).css("margin-left",0),null},z=function(t){var e,n;return T=t,n=G(),e=j(),d(pt).outerWidth(n),e?(K(),d(ct).css("margin-left",0),d(pt).css("left","-"+n)):($(),d(ct).css("margin-left",n),d(pt).css("left",0)),d(st).show(),d(ut).show(),d(pt).show(),null},it=function(){var t,a,r,e,o,n;return a=j(),n=d(pt),r=d(ct),o=n.outerWidth(),e={left:a?0:-o},t={progress:function(t,e,n){var i;return i=a?o*e:o*(1-e),r.css("margin-left",i),null},complete:function(){return a?$():K(),nt(!a),null}},n.animate(e,t),null},W=function(){var r;return r=d(ct),d(pt).resizable({handles:"e",minWidth:100,maxWidth:500,resize:function(t,e){var n,i,a;return n=e.size.width,(i=d(this)).width=n,a=i.outerWidth(),r.css("margin-left",a),et(a),null}}),null},Q=function(){return E.display(),null},Z=function(t){return t.stopPropagation(),_.simulateWorkflow(),null},tt=function(t){return t.stopPropagation(),S.stop(),null},V=function(){return k.init()},at=function(t){var e;return t.stopPropagation(),e=d(t.currentTarget).attr("data-lng"),w.setLanguage(e)},rt=function(t){var e,n;if(e=t.get("searchText"))return n=l.getSearchDocuments(e),r.navigate(n),null},function(t){if(!0===t)return d.post("simulation/action.json",{action:"stop"}).done(function(){return location.reload()})},ot=function(t){return LpSimulationView.init(),null},X=function(t){return t.stopPropagation(),x.display(),null},H=function(){return x.init(),null},L=function(){return{openDynamicHeader:function(t){return null!=t&&t.stopPropagation(),Y()},closeDynamicHeader:function(t){return null!=t&&t.stopPropagation(),A()},navigate:r.navigateFromEvent,setLanguage:at,showSimulation:ot,panelClick:function(t){return it()},logsClick:function(t){return Q()},tipsClick:X,startSimulation:Z,stopSimulation:tt,isPanelVisible:!0,searchText:"",searchClick:function(){return rt(this)}}},B=function(){return I.init(!0),d(mt).localize(),W(),V(),H(),null},F=function(t){var e,n,i,a,r;return a={imagePath:R.getImageRoot(),rootPath:R.getRoot(),simulationUrl:R.resolve("/simulation"),user:g.getUserName()||"?",cluster:g.getTenantName()||"?",multiCluster:g.isMultiTenant(),categories:N.list(),simulation:g.isSimulation(),currentCategoryKey:t?t.key:void 0},r=o.template(h)(a),i=L(),n={model:new o.observable(i),init:B},e=new o.Layout(r,n),d(mt).empty(),e.render(d(mt)),e},C=T=null,M=function(t){return null==C&&(C=F(t)),C},J=function(t,e,n,i,a){return r.addRoute(e,P.bind(null,t,n,i,a)),null},{display:P=function(t,e,n,i){var a;return d(mt).find(".idxHdMenu").find("a").each(function(t,e){if(d(e).removeClass("k-primary"),i&&d(e).data("key")===i.key)return d(e).addClass("k-primary")}),a=M(i),n?(z(t),a.showIn("#idxPanelContent",n)):q(),a.showIn("#idxMainContent",e)},register:J}})}.call(this),define("text!templates/error.html",[],function(){return'<div class="main-logo"></div>\n<div class="main-error">#= message#</div>'}),define("text!templates/error.panel.html",[],function(){return"<div></div>"}),function(){var b;b="notfound",define("views/not.found",["i18n","kendo","site/router","site/routemap","text!templates/error.html","text!templates/error.panel.html"],function(e,n,i,a,r,o){var d,t,l,s,u,c,p,m,f;return s=function(){var t;return t=n.template(o)({}),new n.View(t)},p=function(){return null==t&&(t=s()),t},u=function(){var t;return t=n.template(r)({message:e.t("site:errors.pageNotFound")}),new n.View(t)},m=function(){return null==l&&(l=u()),l},d=l=t=null,f=function(t){var e;return d=t,e=a.notfound,i.onRouteMissing(c.bind(null,b)),i.addRoute(e,c.bind(null,b)),null},{display:c=function(t,e,n){var i,a;return null==n&&(n=!1),a=m(),i=null,n&&(i=p()),null!=d?d.display(t,a,i):void 0},init:f}})}.call(this),define("text!templates/home/home.html",[],function(){return'<div class="homeDashboard">\n\t# for (var i = 0, length = categories.length; i < length; ++i) {#\n\t# var category = categories[i] #\n\t<a href="#=category.url#" class="homeDashboardLink #=category.cssClass#" title="#=category.name#">\n\t\t<div class="homeDashboardIcon">\n\t\t\t<div class="d-icon" data-role="domosicon" data-icon="#:category.icon#"></div>\n\t\t</div>\n\t\t<span class="homeDashboardDescription">#= category.name#</span>\n\t</a>\n\t#}#\n</div>'}),function(){var f,b;b=".homeDashboardIcon",f=".homeDashboardDescription",define("views/home/home",["jquery","kendo","site/routemap","core/web/WebLocation","core/data/SiteCategories","views/layout","text!templates/home/home.html"],function(n,i,t,e,a,r,o){var d,l,s,u,c,p,m;return d=a.SiteCategories,l=e.WebLocation,s=function(){return l.setPageTitle("Domos"),null},c=function(t){var e;return e=n(t.currentTarget),i.fx(e.find(f).css("display","block")).tile("left",e.find(b)).duration(600).play(),null},p=function(t){var e;return e=n(t.currentTarget),i.fx(e.find(f)).tile("left",e.find(b)).duration(400).reverse(),null},m=function(){return n(".homeDashboardLink, .homeDashboardLargeLink, .homeDashboardMiddleLink").hover(c,p)},u=function(){var t,e,n;return e={categories:d.list()},n=i.template(o)(e),t={init:m,show:s},new i.View(n,t)},{init:function(){return r.register("home",t.home,u())}}})}.call(this),define("object/ui/CompanyUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","object/repository/ObjectRepository","./ObjectUtilsUI","./EntityInvestorUI","./AssetUI","core/web/WebLocation"],function(t,n,i,a,r,e,o,d,l){"use strict";function s(t){return l.WebLocation.resolveKendo("/object/edit/"+t)}var u;Object.defineProperty(n,"__esModule",{value:!0}),n.CompanyUIUtils=n.CompanyUI=void 0,n.CompanyUI={widget:(u=e.ObjectUtilsUI.create("DomosCompany",r.ObjectRepository.fetchCompanyIdentifiables)).widget,column:u.column,with:function(e){var t=function(t){return i.IdWidgetUtils.widget(function(){return r.ObjectRepository.fetchCompanyCompanyShareIdentifiables(e)},t)};return{companyShares:{widget:t,column:a.IdentifiableColumnUtils.createFactory(t,s)}}}};var c=function(){function t(){}return t.setupShareDropDown=function(t,e){e?n.CompanyUI.with(e).companyShares.widget(t):d.AssetUI.CompanyShare.widget(t)},t.setupEntityInvestorIdDropDown=function(t,e){e?o.EntityInvestorUI.with(e.id).entityInvestorIds.widget(t):o.EntityInvestorUI.without().widget(t)},t.setupEntitySellerIdDropDown=function(t,e){e?o.EntityInvestorUI.with(e.id).entitySellerIds.widget(t):o.EntityInvestorUI.without().widget(t)},t}();n.CompanyUIUtils=c}),define("object/ui/AssetUI",["require","exports","object/repository/ObjectRepository","./ObjectUtilsUI","./CompanyUI","object/data/ObjectCategories"],function(t,e,n,i,a,m){"use strict";var f,r,o,d,l,s,u,c,p,b;Object.defineProperty(e,"__esModule",{value:!0}),e.AssetUI=void 0,e.AssetUI=(f=i.ObjectUtilsUI.create("DomosAsset",n.ObjectRepository.fetchAssetIdentifiables),r=i.ObjectUtilsUI.create("DomosProperty",n.ObjectRepository.fetchPropertyIdentifiables),o=i.ObjectUtilsUI.create("DomosFundShare",n.ObjectRepository.fetchFundShareIdentifiables),d=a.CompanyUI,l=i.ObjectUtilsUI.create("DomosCompanyShare",n.ObjectRepository.fetchCompanyShareIdentifiables),s=i.ObjectUtilsUI.create("DomosCompanyShareCompany",n.ObjectRepository.fetchCompanyShareCompanyIdentifiables),u=i.ObjectUtilsUI.create("DomosHolding",n.ObjectRepository.fetchHoldingIdentifiables),c=i.ObjectUtilsUI.create("DomosDealFlowAsset",n.ObjectRepository.fetchDealFlowAssetIdentifiables),p=i.ObjectUtilsUI.create("DomosDebt",n.ObjectRepository.fetchDebtIdentifiables),b=i.ObjectUtilsUI.create("DomosBankAccount",n.ObjectRepository.fetchBankAccountIdentifiables),{widget:f.widget,filteredWidget:function(t,e,n){if(t=f.widget(t,e),!n||n.length<=0)return t;var i=t.data("kendoDomosAsset");if(!i||!i.dataSource)return t;for(var a=[],r=0,o=n;r<o.length;r++){var d=o[r],l=m.ObjectCategories.get(d);if(l)for(var s=0,u=l.finals();s<u.length;s++){var c={field:"category",operator:"eq",value:u[s].id};a.push(c)}}var p={logic:"or",filters:a};return i.dataSource.filter(p),t},column:f.column,Property:r,FundShare:o,Company:d,CompanyShare:l,CompanyShareCompany:s,Holding:u,DealFlow:c,Debt:p,BankAccount:b})}),define("object/ui/AssetTargetUI",["require","exports","./ObjectUtilsUI","object/repository/ObjectRepository","object/data/ObjectCategories"],function(t,e,n,i,m){"use strict";var f;Object.defineProperty(e,"__esModule",{value:!0}),e.AssetTargetUI=void 0,e.AssetTargetUI={widget:(f=n.ObjectUtilsUI.create("DomosAssetTarget",i.ObjectRepository.fetchAssetTargetIdentifiables)).widget,column:f.column,filteredWidget:function(t,e,n){if(t=f.widget(t,e),!n||n.length<=0)return t;var i=t.data("kendoDomosAsset");if(!i||!i.dataSource)return t;for(var a=[],r=0,o=n;r<o.length;r++){var d=o[r],l=m.ObjectCategories.get(d);if(l)for(var s=0,u=l.finals();s<u.length;s++){var c={field:"category",operator:"eq",value:u[s].id};a.push(c)}}var p={logic:"or",filters:a};return i.dataSource.filter(p),t}}}),define("core/ui/widget/EnumWidgetUtils",["require","exports","tslib","kendo","core/util/EnumUtils","core/ui/widget/Plugin"],function(t,e,c,p,m,f){"use strict";function b(n){return function(t,e){return t["kendo"+n](e)}}Object.defineProperty(e,"__esModule",{value:!0}),e.EnumWidgetUtils=void 0;var n=function(){function t(){}return t.createDropList=function(t,e,n,i){void 0===i&&(i=!1);var a,r,o,d,l,s=(a=t,r=e,o=n,d=i,l={autoWidth:!0,dataSource:m.EnumUtils.toDataSource(r,o),dataTextField:"name",dataValueField:"id",name:a,valuePrimitive:!0},d&&(l.optionLabel="--"),l),u=function(n){function t(t,e){return n.call(this,t,e)||this}return c.__extends(t,n),t}(p.ui.DropDownList);return f.Plugin.plugin(u,p.ui.DropDownList,s),b(t)},t.createMultiSelect=function(t,e){var n,i,a=(n=t,i=e,{dataSource:m.EnumUtils.toDataSource(i,!0),dataTextField:"name",dataValueField:"id",name:n,valuePrimitive:!0}),r=function(n){function t(t,e){return n.call(this,t,e)||this}return c.__extends(t,n),t}(p.ui.MultiSelect);return f.Plugin.plugin(r,p.ui.MultiSelect,a),b(t)},t.createListBox=function(t,e){var n,i,a,r=(n=t,i=e,{dataSource:m.EnumUtils.toDataSource(i,!0),dataTextField:"name",dataValueField:"id",name:n}),o=function(n){function t(t,e){return n.call(this,t,e)||this}return c.__extends(t,n),t}(p.ui.ListBox);return o.fn=o.prototype,o.fn.options=$.extend(!0,{},p.ui.ListBox.fn.options),o.fn.options.name=t,p.ui.plugin(o),f.Plugin.plugin(o,p.ui.ListBox,r),a=t,function(t,e){return t["kendo"+a](e)}},t}();e.EnumWidgetUtils=n}),define("core/api/DashboardDisplay",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardDisplay=void 0;var r,o;(r=e.DashboardDisplay||(e.DashboardDisplay={}))[r.SCREEN=1]="SCREEN",r[r.A4=2]="A4",(o=e.DashboardDisplay||(e.DashboardDisplay={})).getName=a.EnumUtils.createNameFn("dashboards:dashboardDisplay",o),o.widget=i.EnumWidgetUtils.createDropList("DomosDashboardDisplay",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("dashboard/data/DashboardType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardType=void 0;var r,o;(r=e.DashboardType||(e.DashboardType={}))[r.STANDARD=0]="STANDARD",r[r.FUND=1]="FUND",r[r.PERIMETER=2]="PERIMETER",r[r.ASSET=3]="ASSET",r[r.ENTITIES=4]="ENTITIES",(o=e.DashboardType||(e.DashboardType={})).getName=n.EnumUtils.createNameFn("dashboards:DashboardType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosDashboardType",o,!1),o.column=a.EnumColumnUtils.createFactory(o,o.widget)}),define("portfolio/data/ColumnAggregation",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnAggregation=void 0;var r,o;(r=e.ColumnAggregation||(e.ColumnAggregation={}))[r.NONE=0]="NONE",r[r.SUM=1]="SUM",r[r.MAX=2]="MAX",r[r.MIN=3]="MIN",r[r.COUNT=4]="COUNT",(o=e.ColumnAggregation||(e.ColumnAggregation={})).getName=a.EnumUtils.createNameFn("portfolio:ColumnAggregation",o),o.widget=i.EnumWidgetUtils.createDropList("DomosColumnAggregation",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("tag/repository/TagCategoryRepository",["require","exports","core/web/WebHttp","i18n"],function(t,e,n,i){"use strict";function a(t){var e=t.label;return i.I18N.exists(e)&&(t.label=i.I18N.t(e)),t}function r(t){return t.forEach(a),t}Object.defineProperty(e,"__esModule",{value:!0}),e.TagCategoryRepository=e.translate=void 0,e.translate=a;var o=function(){function t(){}return t.list=function(){return n.WebHttp.getJson("tag/category/list.json").then(r)},t.fetchIdentifiables=function(){return n.WebHttp.getJson("tag/category/id/list.json").then(function(t){return t.map(function(t){var e=t.name;return i.I18N.exists(e)&&(e=i.I18N.t(e)),{id:t.id,name:e}})})},t.get=function(t){return n.WebHttp.getJson("tag/category.json?"+$.param({id:t})).then(a)},t}();e.TagCategoryRepository=o}),define("object/data/ObjectType",["require","exports","i18n"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectType=void 0;var i=function(){function t(t,e,n){this.key=t,this.id=e,this.category=n,this._nameKey="object:objectTypes."+t}return Object.defineProperty(t.prototype,"name",{get:function(){return n.I18N.t(this._nameKey)},enumerable:!1,configurable:!0}),t.prototype.isOf=function(t){return this.category.isOf(t)},t}();e.ObjectType=i}),define("object/data/ObjectTypes",["require","exports","lodash","./ObjectCategories","./ObjectType"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectTypes=e.ObjectTypesImpl=void 0;var r=function(){function t(){var e=this;this._byId={};var t=function(t){return e._byId[t.id]=t};this.individual=t(new a.ObjectType("individual",1e3,i.ObjectCategories.individuals)),this.household=t(new a.ObjectType("household",1001,i.ObjectCategories.individuals)),this.publicCompany=t(new a.ObjectType("publicCompany",11e3,i.ObjectCategories.corporates)),this.privateCompany=t(new a.ObjectType("privateCompany",11001,i.ObjectCategories.corporates)),this.subsidiaryCompany=t(new a.ObjectType("subsidiaryCompany",11002,i.ObjectCategories.corporates)),this.holdingCompany=t(new a.ObjectType("holdingCompany",11003,i.ObjectCategories.corporates)),this.college=t(new a.ObjectType("college",11004,i.ObjectCategories.corporates)),this.corporateAsset=t(new a.ObjectType("corporateAsset",11005,i.ObjectCategories.corporates)),this.operatingDivision=t(new a.ObjectType("operatingDivision",11006,i.ObjectCategories.corporates)),this.nonFinancialPassiveEntity=t(new a.ObjectType("nonFinancialPassiveEntity",11007,i.ObjectCategories.corporates)),this.trustCorporate=t(new a.ObjectType("trustCorporate",11008,i.ObjectCategories.corporates)),this.realEstateInvestmentManagementCompany=t(new a.ObjectType("realEstateInvestmentManagementCompany",11100,i.ObjectCategories.investmentCompanies)),this.ventureCapital=t(new a.ObjectType("ventureCapital",11101,i.ObjectCategories.investmentCompanies)),this.mutualFundManager=t(new a.ObjectType("mutualFundManager",11102,i.ObjectCategories.investmentCompanies)),this.hedgeFundCompany=t(new a.ObjectType("hedgeFundCompany",11103,i.ObjectCategories.investmentCompanies)),this.insuranceCompany=t(new a.ObjectType("insuranceCompany",11104,i.ObjectCategories.investmentCompanies)),this.insuranceManagementDivision=t(new a.ObjectType("insuranceManagementDivision",11105,i.ObjectCategories.investmentCompanies)),this.privateBanking=t(new a.ObjectType("privateBanking",11106,i.ObjectCategories.investmentCompanies)),this.pensionFundCompany=t(new a.ObjectType("pensionFundCompany",11107,i.ObjectCategories.investmentCompanies)),this.foundation=t(new a.ObjectType("foundation",11108,i.ObjectCategories.investmentCompanies)),this.managementCompany=t(new a.ObjectType("managementCompany",11109,i.ObjectCategories.investmentCompanies)),this.mutualFundUnitTrust=t(new a.ObjectType("mutualFundUnitTrust",11200,i.ObjectCategories.investmentVehicles)),this.trust=t(new a.ObjectType("trust",11201,i.ObjectCategories.investmentVehicles)),this.ventureCapitalFund=t(new a.ObjectType("ventureCapitalFund",11202,i.ObjectCategories.investmentVehicles)),this.privateEquityFund=t(new a.ObjectType("privateEquityFund",11203,i.ObjectCategories.investmentVehicles)),this.jointVenture=t(new a.ObjectType("jointVenture",11204,i.ObjectCategories.investmentVehicles)),this.mutualFundOpenEnd=t(new a.ObjectType("mutualFundOpenEnd",11205,i.ObjectCategories.investmentVehicles)),this.mutualFundClosedEnd=t(new a.ObjectType("mutualFundClosedEnd",11206,i.ObjectCategories.investmentVehicles)),this.mutualFundETF=t(new a.ObjectType("mutualFundETF",11207,i.ObjectCategories.investmentVehicles)),this.hedgeFund=t(new a.ObjectType("hedgeFund",11208,i.ObjectCategories.investmentVehicles)),this.financingSubsidiary=t(new a.ObjectType("financingSubsidiary",11209,i.ObjectCategories.investmentVehicles)),this.employeePlan=t(new a.ObjectType("employeePlan",11210,i.ObjectCategories.investmentVehicles)),this.businessAssociation=t(new a.ObjectType("businessAssociation",11211,i.ObjectCategories.investmentVehicles)),this.masterLimited=t(new a.ObjectType("masterLimited",11212,i.ObjectCategories.investmentVehicles)),this.pensionFund=t(new a.ObjectType("pensionFund",11213,i.ObjectCategories.investmentVehicles)),this.sovereignFund=t(new a.ObjectType("sovereignFund",11214,i.ObjectCategories.investmentVehicles)),this.financialCompany=t(new a.ObjectType("financialCompany",11215,i.ObjectCategories.investmentVehicles)),this.ventureCapitalCompany=t(new a.ObjectType("ventureCapitalCompany",11216,i.ObjectCategories.investmentVehicles)),this.custodial=t(new a.ObjectType("custodial",11300,i.ObjectCategories.sellSides)),this.broker=t(new a.ObjectType("broker",11301,i.ObjectCategories.sellSides)),this.investmentBanking=t(new a.ObjectType("investmentBanking",11302,i.ObjectCategories.sellSides)),this.marketMaker=t(new a.ObjectType("marketMaker",11303,i.ObjectCategories.sellSides)),this.researchFirm=t(new a.ObjectType("researchFirm",11304,i.ObjectCategories.sellSides)),this.stockBorrowingLending=t(new a.ObjectType("stockBorrowingLending",11305,i.ObjectCategories.sellSides)),this.brokerAsset=t(new a.ObjectType("brokerAsset",11306,i.ObjectCategories.sellSides)),this.bankManagement=t(new a.ObjectType("bankManagement",11307,i.ObjectCategories.sellSides)),this.government=t(new a.ObjectType("government",11400,i.ObjectCategories.legalOthers)),this.fundFamily=t(new a.ObjectType("fundFamily",11401,i.ObjectCategories.legalOthers)),this.nonProfit=t(new a.ObjectType("nonProfit",11402,i.ObjectCategories.legalOthers)),this.legalIndividual=t(new a.ObjectType("legalIndividual",11403,i.ObjectCategories.legalOthers)),this.foundationBusiness=t(new a.ObjectType("foundationBusiness",11404,i.ObjectCategories.legalOthers)),this.fundDistributor=t(new a.ObjectType("fundDistributor",11405,i.ObjectCategories.legalOthers)),this.investmentAdviser=t(new a.ObjectType("investmentAdviser",11406,i.ObjectCategories.legalOthers)),this.assetBacked=t(new a.ObjectType("assetBacked",11407,i.ObjectCategories.legalOthers)),this.position=t(new a.ObjectType("position",2e3,i.ObjectCategories.positions)),this.fundShare=t(new a.ObjectType("fundShare",3100,i.ObjectCategories.fundShares)),this.property=t(new a.ObjectType("property",3200,i.ObjectCategories.properties)),this.otherAsset=t(new a.ObjectType("otherAsset",3300,i.ObjectCategories.otherAssets)),this.mandatePortfolio=t(new a.ObjectType("mandatePortfolio",3400,i.ObjectCategories.mandates)),this.debt=t(new a.ObjectType("debt",3500,i.ObjectCategories.debts)),this.creditLine=t(new a.ObjectType("creditLine",3501,i.ObjectCategories.debts)),this.commitment=t(new a.ObjectType("commitment",3502,i.ObjectCategories.debts)),this.creditFacilities=t(new a.ObjectType("creditFacilities",3503,i.ObjectCategories.debts)),this.cash=t(new a.ObjectType("cash",3600,i.ObjectCategories.cash)),this.unsettledCash=t(new a.ObjectType("unsettledCash",3601,i.ObjectCategories.cash)),this.dividend=t(new a.ObjectType("dividend",3602,i.ObjectCategories.cash)),this.interest=t(new a.ObjectType("interest",3603,i.ObjectCategories.cash)),this.bankInterest=t(new a.ObjectType("bankInterest",3604,i.ObjectCategories.cash)),this.income=t(new a.ObjectType("income",3605,i.ObjectCategories.cash)),this.charge=t(new a.ObjectType("charge",3606,i.ObjectCategories.cash)),this.company=t(new a.ObjectType("company",11500,i.ObjectCategories.companies)),this.holding=t(new a.ObjectType("holding",11501,i.ObjectCategories.companies)),this.nonFinancialPassiveHolding=t(new a.ObjectType("nonFinancialPassiveHolding",11502,i.ObjectCategories.companies)),this.trustCompany=t(new a.ObjectType("trustCompany",11503,i.ObjectCategories.companies)),this.companyShare=t(new a.ObjectType("companyShare",4e3,i.ObjectCategories.companyShares)),this.realEstateDealFlow=t(new a.ObjectType("realEstateDealFlow",4200,i.ObjectCategories.realEstateDealFlows)),this.fundFlow=t(new a.ObjectType("fundFlow",4210,i.ObjectCategories.fundFlows)),this.portfolio=t(new a.ObjectType("portfolio",9e3,i.ObjectCategories.portfolios)),this.virtualPortfolio=t(new a.ObjectType("virtualPortfolio",9001,i.ObjectCategories.virtualPortfolios)),this.investment=t(new a.ObjectType("investment",9002,i.ObjectCategories.investments)),this.equityWarrant=t(new a.ObjectType("equityWarrant",3800,i.ObjectCategories.equityDerivatives)),this.equityScheme=t(new a.ObjectType("equityScheme",3801,i.ObjectCategories.equityDerivatives)),this.stockOption=t(new a.ObjectType("stockOption",3802,i.ObjectCategories.equityDerivatives)),this.call=t(new a.ObjectType("call",3803,i.ObjectCategories.equityDerivatives)),this.put=t(new a.ObjectType("put",3804,i.ObjectCategories.equityDerivatives)),this.forward=t(new a.ObjectType("forward",3805,i.ObjectCategories.equityDerivatives)),this.subscriptionRight=t(new a.ObjectType("subscriptionRight",3806,i.ObjectCategories.equityDerivatives)),this.bankAccount=t(new a.ObjectType("bankAccount",9003,i.ObjectCategories.bankAccounts))}return t.prototype.get=function(t){if(n.isNumber(t))return this._byId[t];if(n.isString(t)){var e=parseInt(t,10);return isNaN(e)?this[t]:this._byId[e]}return t},t.prototype.getId=function(t){var e=this.get(t);if(e)return e.id},t.prototype.getName=function(t){var e=this.get(t);return e?e.name:""},t.prototype.listByCategory=function(t){var e=i.ObjectCategories.getId(t);return e?n.chain(this._byId).values().filter(function(t){return t.category.id===e}).value():[]},t.prototype.list=function(){return n.values(this._byId)},t}();e.ObjectTypesImpl=r,e.ObjectTypes=new r}),define("core/api/TagType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagType=void 0;var r,o;(r=e.TagType||(e.TagType={}))[r.BOOLEAN=1]="BOOLEAN",r[r.STRING=2]="STRING",r[r.DOUBLE=3]="DOUBLE",r[r.INTEGER=4]="INTEGER",r[r.SELECT=5]="SELECT",r[r.MULTIPLE=6]="MULTIPLE",r[r.DATE=7]="DATE",(o=e.TagType||(e.TagType={})).getName=a.EnumUtils.createNameFn("tags:TagType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosTagType",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("tag/repository/TagDefinitionRepository",["require","exports","tslib","lodash","core/web/WebHttp","./TagCategoryRepository","object/data/ObjectTypes","core/api/TagType","core/web/WebStorages","i18n"],function(t,e,a,i,r,n,o,d,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagDefinitionRepository=void 0;var u="tagDefinitions";function c(t){var e=t.label;return s.I18N.exists(e)&&(t.label=s.I18N.t(e)),t}function p(t){var e=t.label;(s.I18N.exists(e)&&(t.label=s.I18N.t(e)),i.has(t,"entries"))&&t.entries.forEach(c);return t}function m(t){return n.translate(t),t.definitions.forEach(p),t}function f(t){return t.map(m)}function b(t){return t.name=s.I18N.t(t.name),t}var v=function(){function n(){}return n.fetchIdentifiables=function(){return a.__awaiter(this,void 0,void 0,function(){var e;return a.__generator(this,function(t){switch(t.label){case 0:return[4,r.WebHttp.getJson("tag/definition/id/list.json")];case 1:return e=t.sent(),[2,i.map(e,b)]}})})},n.fetchGroupingIdentifiables=function(){return a.__awaiter(this,void 0,void 0,function(){var e;return a.__generator(this,function(t){switch(t.label){case 0:return[4,n.fetchIdentifiables()];case 1:return e=t.sent(),[2,i.filter(e,function(t){var e=t.type;return e===d.TagType.SELECT||e===d.TagType.INTEGER||e===d.TagType.BOOLEAN})]}})})},n.fetchComputationIdentifiables=function(){return a.__awaiter(this,void 0,void 0,function(){var e;return a.__generator(this,function(t){switch(t.label){case 0:return[4,n.fetchIdentifiables()];case 1:return e=t.sent(),[2,i.filter(e,function(t){return t.type===d.TagType.DOUBLE})]}})})},n.listByCategory=function(t,e){var n=o.ObjectTypes.get(t);if(!n)return Promise.reject(new Error("Unknown object type "+t));var i=n.category.id;return r.WebHttp.getJson("tag/definition.by.category/list.json",{target:e,category:i}).then(f)},n.list=function(){return a.__awaiter(this,void 0,void 0,function(){var e,n,i;return a.__generator(this,function(t){switch(t.label){case 0:return e=l.WebStorages.tenantCacheStorage(),(n=e.getObject(u))?[2,n]:[4,r.WebHttp.getJson("tag/definition/list.json")];case 1:return i=t.sent(),e.setObject(u,i),[2,i]}})})},n.fetchDependencies=function(t){return r.WebHttp.getJson("tag/definition.json",{id:t})},n.destroyDependency=function(t){return r.WebHttp.destroyJson("tag/definition.json",{data:JSON.stringify(t)})},n}();e.TagDefinitionRepository=v}),define("tag/data/TagDefinitions",["require","exports","tslib","lodash","../repository/TagDefinitionRepository","core/util/Loader","object/data/ObjectCategories","object/data/ObjectTypes","i18n","core/api/TagType"],function(t,e,n,i,a,r,d,o,l,s){"use strict";function u(t){return{id:t.id,name:l.I18N.exists(t.label)?l.I18N.t(t.label):t.label,priority:t.priority}}Object.defineProperty(e,"__esModule",{value:!0}),e.TagDefinitions=e.TagDefinitionsImpl=void 0;var c=function(){function t(){this._cache={};var e=this._cache;r.Loader.add(function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:return[4,a.TagDefinitionRepository.list()];case 1:return t.sent().forEach(function(t){e[t.id]=t}),[2]}})})}())}return t.prototype.get=function(t){if(t)return i.isNumber(t)?this._cache[t]:this._cache[t.id]},t.prototype.getWithEntries=function(t){var e,n=this.get(t);if((e=n)&&(e.type===s.TagType.SELECT||e.type===s.TagType.MULTIPLE))return n},t.prototype.getName=function(t){var e=this.get(t);return e?l.I18N.t(e.label):""},t.prototype.list=function(){return i.values(this._cache)},t.prototype.listByObjectCategory=function(t,a){var r=d.ObjectCategories.get(t);return r?i.filter(this.list(),function(t){if(a&&t.target!==a)return!1;for(var e=0,n=t.objectCategories;e<n.length;e++){var i=n[e];if(r.isOf(i))return!0}return!1}):[]},t.prototype.listByObjectType=function(t,e){var n=o.ObjectTypes.get(t);return n?this.listByObjectCategory(n.category,e):[]},t.prototype.fullListByObjectCategory=function(t,r){var o=d.ObjectCategories.get(t);return o?i.filter(this.list(),function(t){if(r&&t.target!==r)return!1;for(var e=0,n=t.objectCategories;e<n.length;e++){var i=n[e];if(o.isOf(i))return!0;var a=d.ObjectCategories.get(i);if(a&&a.isOf(o))return!0}return!1}):[]},t.prototype.getEntryIdentifiables=function(t){var e=this.getWithEntries(t);if(!e)return[];var n=e.sort?"name":"priority";return i.chain(e.entries||[]).map(u).sortBy(n).value()},t}();e.TagDefinitionsImpl=c,e.TagDefinitions=new c}),define("tag/ui/TagDefinitionUI",["require","exports","lodash","core/ui/grid/column/IdentifiableColumnUtils","core/ui/widget/IdWidgetUtils","../repository/TagDefinitionRepository","../data/TagDefinitions","core/ui/grid/column/ColumnUtils","core/util/ArrayUtils","core/util/StringUtils"],function(t,e,o,i,a,n,d,l,s,u){"use strict";function r(t,e){var n=a.IdWidgetUtils.createDropList(t,e,!0);return{widget:n,column:i.IdentifiableColumnUtils.createFactory(n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.TagDefinitionUI=void 0;var c=function(){function t(){}return t.select=function(t){var e=d.TagDefinitions.getEntryIdentifiables(t),r=function(t){return a.IdWidgetUtils.widget(function(){return Promise.resolve(e)},t,{valuePrimitive:!0})};return{widget:r,column:function(t){l.ColumnUtils.addEditor(t,r),t.values=o.map(e,function(t){return{value:t.id,text:t.name}});var n=t.field||"",i=e.reduce(function(t,e){return t[e.id]=e.name,t},{}),a=function(t){var e=t.get(n);return o.isNil(e)?"":i[e]||""};return t.template=a,t.sortable={compare:function(t,e){var n=a(t),i=a(e);return u.StringUtils.compare(n,i)}},t}}},t.multi=function(t){var e=d.TagDefinitions.getEntryIdentifiables(t),i={};e.forEach(function(t){return i[t.id]=t.name});var r=function(t,e){if(!t)return"";var n=s.ArrayUtils.toArray(t.get(e));return n?o.chain(n).map(function(t){return i[t]}).omitBy(o.isNil).sortBy().join(", ").value():""};return{column:function(t){var a=t.field;return a&&(t.template=function(t){return r(t,a)},t.sortable={compare:function(t,e){var n=r(t,a),i=r(e,a);return u.StringUtils.compare(n,i)}},t.groupable=!1,t.filterable=!1),t}}},t.widget=a.IdWidgetUtils.createDropList("DomosTagDefinition",n.TagDefinitionRepository.fetchIdentifiables,!0),t.column=i.IdentifiableColumnUtils.createFactory(t.widget),t.listBoxWidget=a.IdWidgetUtils.createListBox("DomosTagDefinitionListBox",n.TagDefinitionRepository.fetchIdentifiables),t.Grouping=r("DomosTagDefinitionForGrouping",n.TagDefinitionRepository.fetchGroupingIdentifiables),t.Computation=r("DomosTagDefinitionForComputation",n.TagDefinitionRepository.fetchComputationIdentifiables),t}();e.TagDefinitionUI=c}),define("core/api/TagTarget",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagTarget=void 0;var r,o;(r=e.TagTarget||(e.TagTarget={}))[r.OBJECT=1]="OBJECT",r[r.HISTORY=2]="HISTORY",r[r.METRIC=3]="METRIC",(o=e.TagTarget||(e.TagTarget={})).getName=a.EnumUtils.createNameFn("tags:TagTarget",o),o.widget=i.EnumWidgetUtils.createDropList("DomosTagTarget",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/ui/PercentUI",["require","exports","tslib","kendo","./widget/Plugin","./grid/column/ColumnUtils","./grid/column/ColumnStyle"],function(t,e,i,n,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PercentUI=void 0;var d,l,s="DomosPercent";function u(t,e){return t["kendo"+s](e)}d={name:s,factor:100,format:"p",step:.01},l=function(n){function t(t,e){return n.call(this,t,e)||this}return i.__extends(t,n),t}(n.ui.NumericTextBox),a.Plugin.plugin(l,n.ui.NumericTextBox,d);var c=function(){function t(){}return t.widget=function(t,e){return u(t,e)},t.column=function(t,e){return r.ColumnUtils.addFormat(t,"{0:p}",o.ColumnStyle.RIGHT_ALIGNED),r.ColumnUtils.addEditor(t,function(t){return u(t,e)})},t}();e.PercentUI=c}),define("core/ui/NumberUI",["require","exports","tslib","lodash","./grid/column/ColumnUtils","./grid/column/ColumnStyle"],function(t,e,o,d,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NumberUI=void 0;var n=function(){function t(){}return t.column=function(t,e){for(var n,i,a=[],r=2;r<arguments.length;r++)a[r-2]=arguments[r];return i=e,!d.isNil(i)&&d.isNumber(i)?a.push(e):n=e,0<a.length?l.ColumnUtils.addFormat.apply(l.ColumnUtils,o.__spreadArrays([t,"{0:n}"],a)):l.ColumnUtils.addFormat(t,"{0:n}",s.ColumnStyle.RIGHT_ALIGNED),l.ColumnUtils.addEditor(t,function(t){return n?t.kendoNumericTextBox(n):t.kendoNumericTextBox()})},t}();e.NumberUI=n}),function(){define("ui/grid/tag.columns",["jquery","lodash","kendo","i18n","tag/ui/TagDefinitionUI","object/data/ObjectCategories","tag/data/TagDefinitions","core/api/TagTarget","core/api/TagType","core/ui/DateUI","core/ui/IntegerUI","core/ui/PercentUI","core/ui/NumberUI"],function(t,e,n,i,a,r,o,d,l,s,u,c,p){var m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R;return b=p.NumberUI,y=c.PercentUI,f=u.IntegerUI,m=s.DateUI,T=d.TagTarget,I=l.TagType,v=r.ObjectCategories,g=o.TagDefinitions,h=a.TagDefinitionUI,N=function(t){switch(t.target){case T.HISTORY:return"history";case T.METRIC:return"metric";default:return"tags"}},S=function(t){return N(t)+".tag"+t.id},x=function(t){return i.t(t.label)},E=function(t,e){return t.percent?y.column(e):b.column(e)},D=function(t,e){return h.select(t.id).column(e)},k=function(t,e){return h.multi(t.id).column(e)},w=function(){var t,e,n,i,a;for(a=[],e=0,n=(i=R()).length;e<n;e++)t=i[e],a.push(C(t));return a},{listDefinitions:R=function(){return g.fullListByObjectCategory(v.assets)},createColumn:C=function(t,e,n,i,a){var r;switch(null==i&&(i=x(t)),null==a&&(a=S(t)),null==n&&(n=!0),r={field:a,title:i,hidden:n,width:e},t.type){case I.DOUBLE:return E(t,r);case I.INTEGER:return f.column(r);case I.SELECT:return D(t,r);case I.MULTIPLE:return k(t,r);case I.DATE:return m.column(r);default:return r}},createColumns:w}})}.call(this),define("core/api/HistoryCategory",["require","exports","core/util/EnumUtils"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HistoryCategory=void 0;var i,a;(i=e.HistoryCategory||(e.HistoryCategory={}))[i.STANDARD=1]="STANDARD",(a=e.HistoryCategory||(e.HistoryCategory={})).getName=n.EnumUtils.createNameFn("history:HistoryCategory",a)}),define("history/data/History",["require","exports","lodash","i18n"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.History=void 0;var a=function(){function t(t){this.key=t.key,this.type=t.type,this.format=t.format,this.decimals=t.decimals,this.min=t.min,this.max=t.max,this.step=t.step,this.historyCategory=t.historyCategory,this.aifmRequired=t.aifmRequired,this.categories=t.categories,this._nameKey="history:"+this.key}return Object.defineProperty(t.prototype,"name",{get:function(){return i.I18N.t(this._nameKey)},enumerable:!1,configurable:!0}),t.prototype.isValid=function(e){return!!n.find(this.categories,function(t){return e.isOf(t)})},t}();e.History=a}),define("core/api/HistoryType",["require","exports"],function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.HistoryType=void 0,(n=e.HistoryType||(e.HistoryType={}))[n.NUMBER=1]="NUMBER",n[n.PRICE=2]="PRICE"}),define("history/data/Histories",["require","exports","lodash","core/api/HistoryCategory","history/data/History","core/api/HistoryType","object/data/ObjectCategories","object/data/ObjectTypes"],function(t,e,r,n,o,d,l,i){"use strict";function s(t,e){return{key:t,type:d.HistoryType.NUMBER,format:"n",decimals:null,min:null,max:null,step:1,historyCategory:n.HistoryCategory.STANDARD,aifmRequired:!1,categories:e}}function u(t,e){var n=s(t,e);return n.type=d.HistoryType.NUMBER,n}function c(t,e){var n=u(t,e);return n.format="p",n.min=0,n.step=.01,n}function p(t,e,n,i){void 0===i&&(i=!1);var a=s(t,e);return a.type=d.HistoryType.PRICE,r.isNil(n)||(a.format="n"+n,a.decimals=n),a.aifmRequired=i,a}Object.defineProperty(e,"__esModule",{value:!0}),e.Histories=e.HistoriesImpl=void 0;var a=function(){function t(){var n=this;this._byKey={};var t,e,i,a=function(t){var e=new o.History(t);return n._byKey[e.key]=e};this.quantity=a(u("quantity",[l.ObjectCategories.positions])),this.occupancy=a(c("occupancy",[l.ObjectCategories.properties])),this.WALT=a(u("WALT",[l.ObjectCategories.properties])),this.LTV=a(u("LTV",[l.ObjectCategories.properties])),this.DSCR=a(u("DSCR",[l.ObjectCategories.properties])),this.netReturn=a(c("netReturn",[l.ObjectCategories.fundShares])),this.dailyTradedVolume=a((t="dailyTradedVolume",e=[l.ObjectCategories.positions],(i=u(t,e)).format="n0",i.decimals=0,i.min=0,i)),this.last=a(p("last",[l.ObjectCategories.mandates,l.ObjectCategories.otherAssets,l.ObjectCategories.companyShares,l.ObjectCategories.debts,l.ObjectCategories.companies],4)),this.NOI=a(p("NOI",[l.ObjectCategories.properties])),this.ERV=a(p("ERV",[l.ObjectCategories.properties])),this.ITZA=a(p("ITZA",[l.ObjectCategories.properties])),this.localLandTaxValue=a(p("localLandTaxValue",[l.ObjectCategories.properties])),this.squareMeterPrice=a(p("squareMeterPrice",[l.ObjectCategories.properties])),this.squareMeterMonthlyLeaseValue=a(p("squareMeterMonthlyLeaseValue",[l.ObjectCategories.properties])),this.cashFlow=a(p("cashFlow",[l.ObjectCategories.assets,l.ObjectCategories.companies])),this.balance=a(p("balance",[l.ObjectCategories.positions])),this.netAssetValue=a(p("netAssetValue",[l.ObjectCategories.investmentVehicles,l.ObjectCategories.companies],4,!0)),this.revenues=a(p("revenues",[l.ObjectCategories.companies])),this.expenses=a(p("expenses",[l.ObjectCategories.companies,l.ObjectCategories.investmentVehicles])),this.EBIT=a(p("EBIT",[l.ObjectCategories.companies,l.ObjectCategories.investmentVehicles])),this.accruedCoupon=a(p("accruedCoupon",[l.ObjectCategories.positions,l.ObjectCategories.debts,l.ObjectCategories.otherAssets])),this.equityBookValue=a(p("equityBookValue",[l.ObjectCategories.companies])),this.debtBookValue=a(p("debtBookValue",[l.ObjectCategories.companies])),this.nonOperatingAssets=a(p("nonOperatingAssets",[l.ObjectCategories.companies])),this.estimatedNetAssetValue=a(p("estimatedNetAssetValue",[l.ObjectCategories.investmentVehicles],4)),this.netAssetValuePerShare=a(p("netAssetValuePerShare",[l.ObjectCategories.fundShares],4)),this.estimatedNetAssetValuePerShare=a(p("estimatedNetAssetValuePerShare",[l.ObjectCategories.fundShares],4)),this.netRealized=a(p("netRealized",[l.ObjectCategories.investmentVehicles,l.ObjectCategories.positions])),this.netUnrealized=a(p("netUnrealized",[l.ObjectCategories.investmentVehicles,l.ObjectCategories.positions])),this.dividend=a(p("dividend",[l.ObjectCategories.companyShares,l.ObjectCategories.positions,l.ObjectCategories.fundShares],2))}return t.prototype.get=function(t){return r.isString(t)?this._byKey[t]:t},t.prototype.getName=function(t){var e=this.get(t);return e?e.name:""},t.prototype.list=function(){return r.values(this._byKey)},t.prototype.listByObjectCategory=function(t){var e=l.ObjectCategories.get(t);return e?r.filter(this.list(),function(t){return t.isValid(e)}):[]},t.prototype.listByObjectType=function(t){var e=i.ObjectTypes.get(t);return e?this.listByObjectCategory(e.category):[]},t}();e.HistoriesImpl=a,e.Histories=new a}),define("core/api/DashboardComponentType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardComponentType=void 0;var r,o;(r=e.DashboardComponentType||(e.DashboardComponentType={}))[r.OBJECT=1]="OBJECT",r[r.CURRENCY=2]="CURRENCY",r[r.GROUP_BY=3]="GROUP_BY",r[r.INDEX=4]="INDEX",r[r.PORTFOLIO=5]="PORTFOLIO",r[r.TEXT=6]="TEXT",r[r.RISK=7]="RISK",r[r.GROUP_BY_SCRIPT=8]="GROUP_BY_SCRIPT",r[r.DEBT_CASH_FLOWS=9]="DEBT_CASH_FLOWS",r[r.REPORT=10]="REPORT",r[r.DATA=11]="DATA",r[r.COMPLIANCE=12]="COMPLIANCE",r[r.CONTEXTUAL_TEXT=13]="CONTEXTUAL_TEXT",r[r.SPREADSHEET=14]="SPREADSHEET",r[r.DOCUMENT_IMAGE=15]="DOCUMENT_IMAGE",r[r.SUB_COMPONENT=16]="SUB_COMPONENT",r[r.TABLE=17]="TABLE",r[r.CAPITAL_CALL=18]="CAPITAL_CALL",r[r.DISTRIBUTION=19]="DISTRIBUTION",r[r.COMMITMENT=20]="COMMITMENT",r[r.CAPITAL_ACCOUNT=21]="CAPITAL_ACCOUNT",r[r.COMPLEX_TEXT=22]="COMPLEX_TEXT",r[r.OPERATIONS=23]="OPERATIONS",r[r.CHECK_NAME=24]="CHECK_NAME",r[r.EQUITY=25]="EQUITY",(o=e.DashboardComponentType||(e.DashboardComponentType={})).getName=a.EnumUtils.createNameFn("dashboards:DashboardComponentType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosDashboardComponentType",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/DashboardSize",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardSize=void 0;var r,o;(r=e.DashboardSize||(e.DashboardSize={}))[r.THIRD=1]="THIRD",r[r.HALF=2]="HALF",r[r.TWO_THIRDS=3]="TWO_THIRDS",r[r.FULL=4]="FULL",(o=e.DashboardSize||(e.DashboardSize={})).getName=a.EnumUtils.createNameFn("dashboards:dashboardSizes",o),o.widget=i.EnumWidgetUtils.createDropList("DomosDashboardSize",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/ChartType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChartType=void 0;var r,o;(r=e.ChartType||(e.ChartType={}))[r.BAR=1]="BAR",r[r.COLUMN=2]="COLUMN",r[r.PIE=3]="PIE",r[r.WATERFALL=4]="WATERFALL",(o=e.ChartType||(e.ChartType={})).getName=a.EnumUtils.createNameFn("computation:charts",o),o.widget=i.EnumWidgetUtils.createDropList("DomosChartType",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/ChartHistoricalType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChartHistoricalType=void 0;var r,o;(r=e.ChartHistoricalType||(e.ChartHistoricalType={}))[r.COLUMN=1]="COLUMN",r[r.LINE=2]="LINE",r[r.AREA=3]="AREA",(o=e.ChartHistoricalType||(e.ChartHistoricalType={})).getName=a.EnumUtils.createNameFn("computation:historicalCharts",o),o.widget=i.EnumWidgetUtils.createDropList("DomosChartHistoricalType",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/ReportingFilingType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReportingFilingType=void 0;var r,o;(r=e.ReportingFilingType||(e.ReportingFilingType={}))[r.INITIAL=1]="INITIAL",r[r.AMENDMENT=2]="AMENDMENT",(o=e.ReportingFilingType||(e.ReportingFilingType={})).getName=a.EnumUtils.createNameFn("reporting:filingTypes",o),o.widget=i.EnumWidgetUtils.createDropList("DomosReportingFilingType",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/ReportingPeriodType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReportingPeriodType=void 0;var r,o;(r=e.ReportingPeriodType||(e.ReportingPeriodType={}))[r.FIRST_QUARTER=1]="FIRST_QUARTER",r[r.SECOND_QUARTER=2]="SECOND_QUARTER",r[r.THIRD_QUARTER=3]="THIRD_QUARTER",r[r.FOURTH_QUARTER=4]="FOURTH_QUARTER",r[r.FIRST_HALF=5]="FIRST_HALF",r[r.SECOND_HALF=6]="SECOND_HALF",r[r.YEARLY=7]="YEARLY",r[r.FIRST_3_QUARTERS=8]="FIRST_3_QUARTERS",r[r.LAST_3_QUARTERS=9]="LAST_3_QUARTERS",(o=e.ReportingPeriodType||(e.ReportingPeriodType={})).getName=a.EnumUtils.createNameFn("reporting:periodTypes",o),o.widget=i.EnumWidgetUtils.createDropList("DomosReportingPeriodType",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/ReportingSource",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReportingSource=void 0;var r,o;(r=e.ReportingSource||(e.ReportingSource={}))[r.AIFM_1_2=1]="AIFM_1_2",r[r.AIF_1_2=2]="AIF_1_2",r[r.U_1_1=3]="U_1_1",r[r.CRS=4]="CRS",r[r.TPT_OBS=5]="TPT_OBS",r[r.SGOREP=6]="SGOREP",r[r.DASHBOARD=7]="DASHBOARD",r[r.S213_L1=8]="S213_L1",r[r.S216_L1=9]="S216_L1",r[r.FATCA=10]="FATCA",r[r.TPT_IBS=11]="TPT_IBS",(o=e.ReportingSource||(e.ReportingSource={})).getName=a.EnumUtils.createNameFn("reporting:sources",o),o.widget=i.EnumWidgetUtils.createDropList("DomosReportingSource",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget),o.widgetMulti=i.EnumWidgetUtils.createMultiSelect("DomosReportingSourceMultiSelect",o),o.columnMulti=n.EnumColumnUtils.createMultiFactory(o,o.widgetMulti)}),define("core/api/ObjectFieldType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectFieldType=void 0;var r,o;(r=e.ObjectFieldType||(e.ObjectFieldType={}))[r.NAME=1]="NAME",r[r.COMPANY=2]="COMPANY",r[r.NATIONAL_CODE=3]="NATIONAL_CODE",r[r.ADDRESS=4]="ADDRESS",r[r.POSTAL_CODE=5]="POSTAL_CODE",r[r.CITY=6]="CITY",r[r.COUNTRY=7]="COUNTRY",r[r.CONSTRUCTION_YEAR=8]="CONSTRUCTION_YEAR",r[r.RESTRUCTURING_YEAR=9]="RESTRUCTURING_YEAR",r[r.SHORT_NAME=10]="SHORT_NAME",r[r.CURRENCY=11]="CURRENCY",r[r.LAUNCH_DATE=12]="LAUNCH_DATE",(o=e.ObjectFieldType||(e.ObjectFieldType={})).getName=a.EnumUtils.createNameFn("object:ObjectFieldType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosObjectFieldType",o,!0,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/ComputationMethod",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComputationMethod=void 0;var r,o;(r=e.ComputationMethod||(e.ComputationMethod={}))[r.MARKET_VALUE=1]="MARKET_VALUE",r[r.ASSETS_UNDER_MANAGEMENT=2]="ASSETS_UNDER_MANAGEMENT",r[r.GROSS_EXPOSURE=3]="GROSS_EXPOSURE",r[r.NET_EXPOSURE=4]="NET_EXPOSURE",r[r.FINANCING=5]="FINANCING",r[r.COMPUTED_MARKET_VALUE=6]="COMPUTED_MARKET_VALUE",(o=e.ComputationMethod||(e.ComputationMethod={})).getKey=function(t){if(!t)return"";switch(t){case o.MARKET_VALUE:return"marketValue";case o.ASSETS_UNDER_MANAGEMENT:return"AUM";case o.GROSS_EXPOSURE:return"grossExposure";case o.NET_EXPOSURE:return"netExposure";case o.FINANCING:return"financing";case o.COMPUTED_MARKET_VALUE:return"computedMarketValue";default:throw new Error("Unknown computation method")}},o.getDefault=function(){return o.COMPUTED_MARKET_VALUE},o.getName=a.EnumUtils.createNameFn("computation:ComputationMethod",o),o.widget=i.EnumWidgetUtils.createDropList("DomosComputationMethod",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/PortfolioViewerColumn",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PortfolioViewerColumn=void 0;var n,d="portfolio:columns";(n=e.PortfolioViewerColumn||(e.PortfolioViewerColumn={}))[n.ASSET=1]="ASSET",n[n.TYPE=2]="TYPE",n[n.OCCUPANCY=3]="OCCUPANCY",n[n.WEIGHT=4]="WEIGHT",n[n.MARKET_VALUE=5]="MARKET_VALUE",n[n.CURRENCY=6]="CURRENCY",n[n.COUNTRY=7]="COUNTRY",n[n.POSITION_COUNT=8]="POSITION_COUNT",n[n.QUANTITY=9]="QUANTITY",n[n.FINANCING=10]="FINANCING",n[n.TAG=11]="TAG",n[n.SUB_ASSET_TYPE=12]="SUB_ASSET_TYPE",n[n.ISSUER=13]="ISSUER",n[n.CITY=14]="CITY",n[n.RATE=15]="RATE",n[n.MATURITY_DATE=16]="MATURITY_DATE",n[n.ACTUAL_NOTIONAL=17]="ACTUAL_NOTIONAL",n[n.DEBT_INSTALLMENT=18]="DEBT_INSTALLMENT",n[n.NEXT_NOTIONAL_PAYMENT_DATE=19]="NEXT_NOTIONAL_PAYMENT_DATE",n[n.MARKET_VALUE_IN_FUND_CURRENCY=20]="MARKET_VALUE_IN_FUND_CURRENCY",n[n.RISK_INDICATOR=21]="RISK_INDICATOR",n[n.GEOGRAPHICAL_FOCUS=22]="GEOGRAPHICAL_FOCUS",n[n.LIQUIDATION_PERIOD=23]="LIQUIDATION_PERIOD",n[n.MARKET=24]="MARKET",n[n.BALANCE_SHEET=25]="BALANCE_SHEET",n[n.FINANCIAL=26]="FINANCIAL",n[n.OWNERSHIP=27]="OWNERSHIP",n[n.OWNER=28]="OWNER",n[n.YTM=29]="YTM",n[n.DURATION=30]="DURATION",n[n.EFFECTIVE_DURATION=31]="EFFECTIVE_DURATION",n[n.WEIGHTED_AVERAGE_LIFE=32]="WEIGHTED_AVERAGE_LIFE",n[n.CREDIT_SPREAD=33]="CREDIT_SPREAD",n[n.INVESTMENT=34]="INVESTMENT",n[n.SECURITIES_OWNERSHIP=35]="SECURITIES_OWNERSHIP",function(e){function n(t){switch(t){case e.TAG:case e.RISK_INDICATOR:case e.FINANCIAL:return!1;default:return!0}}e.getName=o.EnumUtils.createNameFn(d,e),e.widget=r.EnumWidgetUtils.createDropList("DomosPortfolioViewerColumn",e,!0),e.column=a.EnumColumnUtils.createFactory(e,e.widget),e.isStandard=n;var i={getName:o.EnumUtils.createNameFn(d,e)};o.EnumUtils.forEach(e,function(t,e){n(t)&&(i[t]=e,i[e]=t)}),e.widgetStandard=r.EnumWidgetUtils.createDropList("DomosPortfolioViewerColumnStandard",i,!0),e.columnStandard=a.EnumColumnUtils.createFactory(i,e.widgetStandard)}(e.PortfolioViewerColumn||(e.PortfolioViewerColumn={}))}),define("object/ui/ObjectTypeUI",["require","exports","lodash","../data/ObjectTypes"],function(t,e,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={filterable:{multi:!(e.ObjectTypeUI=void 0)}},i=function(){function t(){}return t.widget=function(t,e,n){var i={data:r.chain(o.ObjectTypes.listByCategory(e)).map(function(t){return{id:t.id,name:t.name}}).value(),schema:{model:{id:"id",fields:{id:{type:"number"},name:{type:"string"}}}},sort:{field:"name",dir:"asc"}},a=n||{};return a.autoWidth=!0,a.dataSource=i,a.dataTextField="name",a.dataValueField="id",t.kendoDropDownList(a)},t.column=function(t){return t.values||(t.values=r.map(o.ObjectTypes.list(),function(t){return{text:t.name,value:t.id}})),r.defaults(t,n)},t}();e.ObjectTypeUI=i}),define("basic/repository/CurrencyRepository",["require","exports","tslib","core/web/WebStorages","core/web/WebHttp"],function(t,e,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CurrencyRepository=void 0;var d="currencies",n=function(){function t(){}return t.list=function(){return a.__awaiter(this,void 0,void 0,function(){var e,n,i;return a.__generator(this,function(t){switch(t.label){case 0:return e=r.WebStorages.siteCacheStorage(),(n=e.getObject(d))?[2,n]:[4,o.WebHttp.getJson("currency/list.json")];case 1:return i=t.sent(),e.setObject(d,i),[2,i]}})})},t}();e.CurrencyRepository=n}),define("basic/data/Currencies",["require","exports","tslib","lodash","../repository/CurrencyRepository","core/util/Loader","i18n"],function(t,r,n,e,i,a,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Currencies=r.CurrenciesImpl=void 0;var d=function(){function t(){this.EUR_ID=978,this.cache={};var e=this.cache;a.Loader.add(function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:return[4,i.CurrencyRepository.list()];case 1:return t.sent().forEach(function(t){e[t.id]=t}),[2]}})})}())}return t.prototype.get=function(t){return this.cache[t]},t.prototype.getName=function(t){var e=this.cache[t];return e?e.name:""},t.prototype.list=function(){return e.values(this.cache)},t.prototype.format=function(t,e,n){void 0===n&&(n=2);var i=kendo.toString(t,"n"+n),a=r.Currencies.getName(e);return o.I18N.t("site:currencyFormat",{value:i,currency:a})},t}();r.CurrenciesImpl=d,r.Currencies=new d}),define("basic/ui/CurrencyUI",["require","exports","tslib","lodash","kendo","../data/Currencies","core/ui/widget/Plugin","core/ui/grid/column/ColumnUtils","core/ui/grid/column/ColumnStyle","core/util/StringUtils"],function(t,e,i,r,n,o,a,d,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CurrencyUI=void 0;var u,c,p="DomosCurrency";function m(t,e){return t["kendo"+p](e)}function f(t,e){d.ColumnUtils.addStyle(t,l.ColumnStyle.CENTER_ALIGNED),r.has(t,"values")||(t.values=r.map(o.Currencies.list(),function(t){return{text:t.name,value:t.id}}));var n={};e&&(n.optionLabel="--");var i=t.field;function a(t){return i&&o.Currencies.getName(t[i])||""}return r.isNil(t.template)&&(t.template=a),r.isNil(t.sortable)&&(t.sortable={compare:function(t,e){var n=a(t),i=a(e);return s.StringUtils.compare(n,i)}}),d.ColumnUtils.addEditor(t,function(t){return m(t,n)})}u={autoWidth:!0,dataSource:{transport:{read:function(t){t.success(o.Currencies.list())}},schema:{model:{id:"id",fields:{id:{type:"number"},name:{type:"string"},display:{type:"string"}}}},sort:{field:"name",dir:"asc"}},dataTextField:"name",dataValueField:"id",valuePrimitive:!0,template:"<span style='display: inline-block; width: 50px; font-weight: bold;'>#: name#</span>\n\t\t<span>#: display#</span>",name:p},c=function(n){function t(t,e){return n.call(this,t,e)||this}return i.__extends(t,n),t}(n.ui.DropDownList),a.Plugin.plugin(c,n.ui.DropDownList,u);var b=function(){function t(){}return t.widget=function(t,e){return m(t,e)},t.column=function(t){return f(t,!1)},t.optionalColumn=function(t){return f(t,!0)},t}();e.CurrencyUI=b}),define("core/api/AIFSubAssetType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AIFSubAssetType=void 0;var r,o;(r=e.AIFSubAssetType||(e.AIFSubAssetType={}))[r.SEC_CSH_CODP=1]="SEC_CSH_CODP",r[r.SEC_CSH_COMP=2]="SEC_CSH_COMP",r[r.SEC_CSH_OTHD=3]="SEC_CSH_OTHD",r[r.SEC_CSH_OTHC=4]="SEC_CSH_OTHC",r[r.SEC_LEQ_IFIN=5]="SEC_LEQ_IFIN",r[r.SEC_LEQ_OTHR=6]="SEC_LEQ_OTHR",r[r.SEC_UEQ_UEQY=7]="SEC_UEQ_UEQY",r[r.SEC_CPN_INVG=8]="SEC_CPN_INVG",r[r.SEC_CPN_NIVG=9]="SEC_CPN_NIVG",r[r.SEC_CPI_INVG=10]="SEC_CPI_INVG",r[r.SEC_CPI_NIVG=11]="SEC_CPI_NIVG",r[r.SEC_SBD_EUBY=12]="SEC_SBD_EUBY",r[r.SEC_SBD_EUBM=13]="SEC_SBD_EUBM",r[r.SEC_SBD_NOGY=14]="SEC_SBD_NOGY",r[r.SEC_SBD_NOGM=15]="SEC_SBD_NOGM",r[r.SEC_SBD_EUGY=16]="SEC_SBD_EUGY",r[r.SEC_SBD_EUGM=17]="SEC_SBD_EUGM",r[r.SEC_MBN_MNPL=18]="SEC_MBN_MNPL",r[r.SEC_CBN_INVG=19]="SEC_CBN_INVG",r[r.SEC_CBN_NIVG=20]="SEC_CBN_NIVG",r[r.SEC_CBI_INVG=21]="SEC_CBI_INVG",r[r.SEC_CBI_NIVG=22]="SEC_CBI_NIVG",r[r.SEC_LON_LEVL=23]="SEC_LON_LEVL",r[r.SEC_LON_OTHL=24]="SEC_LON_OTHL",r[r.SEC_SSP_SABS=25]="SEC_SSP_SABS",r[r.SEC_SSP_RMBS=26]="SEC_SSP_RMBS",r[r.SEC_SSP_CMBS=27]="SEC_SSP_CMBS",r[r.SEC_SSP_AMBS=28]="SEC_SSP_AMBS",r[r.SEC_SSP_ABCP=29]="SEC_SSP_ABCP",r[r.SEC_SSP_CDOC=30]="SEC_SSP_CDOC",r[r.SEC_SSP_STRC=31]="SEC_SSP_STRC",r[r.SEC_SSP_SETP=32]="SEC_SSP_SETP",r[r.SEC_SSP_OTHS=33]="SEC_SSP_OTHS",r[r.DER_EQD_FINI=34]="DER_EQD_FINI",r[r.DER_EQD_OTHD=35]="DER_EQD_OTHD",r[r.DER_FID_FIXI=36]="DER_FID_FIXI",r[r.DER_CDS_SNFI=37]="DER_CDS_SNFI",r[r.DER_CDS_SNSO=38]="DER_CDS_SNSO",r[r.DER_CDS_SNOT=39]="DER_CDS_SNOT",r[r.DER_CDS_INDX=40]="DER_CDS_INDX",r[r.DER_CDS_EXOT=41]="DER_CDS_EXOT",r[r.DER_CDS_OTHR=42]="DER_CDS_OTHR",r[r.DER_FEX_INVT=43]="DER_FEX_INVT",r[r.DER_FEX_HEDG=44]="DER_FEX_HEDG",r[r.DER_IRD_INTR=45]="DER_IRD_INTR",r[r.DER_CTY_ECOL=46]="DER_CTY_ECOL",r[r.DER_CTY_ENNG=47]="DER_CTY_ENNG",r[r.DER_CTY_ENPW=48]="DER_CTY_ENPW",r[r.DER_CTY_ENOT=49]="DER_CTY_ENOT",r[r.DER_CTY_PMGD=50]="DER_CTY_PMGD",r[r.DER_CTY_PMOT=51]="DER_CTY_PMOT",r[r.DER_CTY_OTIM=52]="DER_CTY_OTIM",r[r.DER_CTY_OTLS=53]="DER_CTY_OTLS",r[r.DER_CTY_OTAP=54]="DER_CTY_OTAP",r[r.DER_CTY_OTHR=55]="DER_CTY_OTHR",r[r.DER_OTH_OTHR=56]="DER_OTH_OTHR",r[r.PHY_RES_RESL=57]="PHY_RES_RESL",r[r.PHY_RES_COML=58]="PHY_RES_COML",r[r.PHY_RES_OTHR=59]="PHY_RES_OTHR",r[r.PHY_CTY_PCTY=60]="PHY_CTY_PCTY",r[r.PHY_TIM_PTIM=61]="PHY_TIM_PTIM",r[r.PHY_ART_PART=62]="PHY_ART_PART",r[r.PHY_TPT_PTPT=63]="PHY_TPT_PTPT",r[r.PHY_OTH_OTHR=64]="PHY_OTH_OTHR",r[r.CIU_OAM_MMFC=65]="CIU_OAM_MMFC",r[r.CIU_OAM_AETF=66]="CIU_OAM_AETF",r[r.CIU_OAM_OTHR=67]="CIU_OAM_OTHR",r[r.CIU_NAM_MMFC=68]="CIU_NAM_MMFC",r[r.CIU_NAM_AETF=69]="CIU_NAM_AETF",r[r.CIU_NAM_OTHR=70]="CIU_NAM_OTHR",r[r.OTH_OTH_OTHR=71]="OTH_OTH_OTHR",(o=e.AIFSubAssetType||(e.AIFSubAssetType={})).getName=a.EnumUtils.createNameFn("object:AIFSubAssetType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAIFSubAssetType",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("basic/repository/CountryRepository",["require","exports","tslib","core/web/WebStorages","core/web/WebHttp"],function(t,e,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CountryRepository=void 0;var d="countries",n=function(){function t(){}return t.list=function(){return a.__awaiter(this,void 0,void 0,function(){var e,n,i;return a.__generator(this,function(t){switch(t.label){case 0:return e=r.WebStorages.siteCacheStorage(),(n=e.getObject(d))?[2,n]:[4,o.WebHttp.getJson("country/list.json")];case 1:return i=t.sent(),e.setObject(d,i),[2,i]}})})},t}();e.CountryRepository=n}),define("basic/data/Countries",["require","exports","tslib","lodash","../repository/CountryRepository","core/util/Loader"],function(t,e,n,i,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Countries=e.CountriesImpl=void 0;var o=function(){function t(){this.cache={};var e=this.cache;r.Loader.add(function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:return[4,a.CountryRepository.list()];case 1:return t.sent().forEach(function(t){e[t.id]=t}),[2]}})})}())}return t.prototype.get=function(t){if(t)return this.cache[t]},t.prototype.getName=function(t){var e=this.get(t);return e?e.name:""},t.prototype.getIso=function(t){var e=this.get(t);return e?e.iso:""},t.prototype.list=function(){return i.values(this.cache)},t}();e.CountriesImpl=o,e.Countries=new o}),define("basic/ui/CountryUI",["require","exports","tslib","lodash","kendo","../data/Countries","core/ui/widget/Plugin","core/ui/grid/column/ColumnUtils","core/util/StringUtils"],function(t,e,i,r,n,o,a,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CountryUI=void 0;var s,u,c="DomosCountry";function p(t,e){return t["kendo"+c](e)}function m(t,e){r.has(t,"values")||(t.values=r.map(o.Countries.list(),function(t){return{text:t.name,value:t.id}}));var n={};e&&(n.optionLabel="--");var i=t.field;function a(t){return i&&o.Countries.getName(t[i])||""}return r.isNil(t.template)&&(t.template=a),r.isNil(t.sortable)&&(t.sortable={compare:function(t,e){var n=a(t),i=a(e);return l.StringUtils.compare(n,i)}}),d.ColumnUtils.addEditor(t,function(t){return p(t,n)})}s={autoWidth:!0,dataSource:{transport:{read:function(t){t.success(o.Countries.list())}},schema:{model:{id:"id",fields:{id:{type:"number"},name:{type:"string"},iso:{type:"string"}}}},sort:{field:"name",dir:"asc"}},dataTextField:"name",dataValueField:"id",valuePrimitive:!0,template:"<span style='display: inline-block; width: 50px; font-weight: bold;'>#: iso#</span><span>#: name#</span>",name:c},u=function(n){function t(t,e){return n.call(this,t,e)||this}return i.__extends(t,n),t}(n.ui.DropDownList),a.Plugin.plugin(u,n.ui.DropDownList,s);var f=function(){function t(){}return t.widget=function(t,e){return p(t,e)},t.column=function(t){return m(t,!1)},t.optionalColumn=function(t){return m(t,!0)},t}();e.CountryUI=f}),define("core/api/AIFMDGeographicalFocus",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AIFMDGeographicalFocus=void 0;var r,o;(r=e.AIFMDGeographicalFocus||(e.AIFMDGeographicalFocus={}))[r.AFRICA=1]="AFRICA",r[r.ASIA_PACIFIC=2]="ASIA_PACIFIC",r[r.EUROPE=3]="EUROPE",r[r.EEA=4]="EEA",r[r.MIDDLE_EAST=5]="MIDDLE_EAST",r[r.NORTH_AMERICA=6]="NORTH_AMERICA",r[r.SOUTH_AMERICA=7]="SOUTH_AMERICA",r[r.SUPRA_NATIONAL=8]="SUPRA_NATIONAL",(o=e.AIFMDGeographicalFocus||(e.AIFMDGeographicalFocus={})).getName=a.EnumUtils.createNameFn("object:AIFMDGeographicalFocus",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAIFMDGeographicalFocus",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/AIFMDLiquidationPeriod",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AIFMDLiquidationPeriod=void 0;var r,o;(r=e.AIFMDLiquidationPeriod||(e.AIFMDLiquidationPeriod={}))[r.PERIOD_0_TO_1_DAY=1]="PERIOD_0_TO_1_DAY",r[r.PERIOD_2_TO_7_DAYS=2]="PERIOD_2_TO_7_DAYS",r[r.PERIOD_8_TO_30_DAYS=3]="PERIOD_8_TO_30_DAYS",r[r.PERIOD_31_TO_90_DAYS=4]="PERIOD_31_TO_90_DAYS",r[r.PERIOD_91_TO_180_DAYS=5]="PERIOD_91_TO_180_DAYS",r[r.PERIOD_181_TO_365_DAYS=6]="PERIOD_181_TO_365_DAYS",r[r.PERIOD_MORE_THAN_365_DAYS=7]="PERIOD_MORE_THAN_365_DAYS",r[r.PERIOD_FROM_1Y_TO_2Y=8]="PERIOD_FROM_1Y_TO_2Y",r[r.PERIOD_FROM_2Y_TO_5Y=9]="PERIOD_FROM_2Y_TO_5Y",r[r.PERIOD_MORE_THAN_5Y=10]="PERIOD_MORE_THAN_5Y",(o=e.AIFMDLiquidationPeriod||(e.AIFMDLiquidationPeriod={})).getName=a.EnumUtils.createNameFn("object:AIFMDLiquidationPeriod",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAIFMDLiquidationPeriod",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("basic/repository/MarketRepository",["require","exports","tslib","core/web/WebStorages","core/web/WebHttp"],function(t,e,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MarketRepository=void 0;var d="markets",n=function(){function t(){}return t.list=function(){return a.__awaiter(this,void 0,void 0,function(){var e,n,i;return a.__generator(this,function(t){switch(t.label){case 0:return e=r.WebStorages.siteCacheStorage(),(n=e.getObject(d))?[2,n]:[4,o.WebHttp.getJson("market/list.json")];case 1:return i=t.sent(),e.setObject(d,i),[2,i]}})})},t}();e.MarketRepository=n}),define("basic/data/Markets",["require","exports","tslib","lodash","../repository/MarketRepository","core/util/Loader"],function(t,e,n,i,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Markets=e.MarketsImpl=void 0;var o=function(){function t(){this.cache={};var e=this.cache;r.Loader.add(function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:return[4,a.MarketRepository.list()];case 1:return t.sent().forEach(function(t){e[t.id]=t}),[2]}})})}())}return t.prototype.get=function(t){return this.cache[t]},t.prototype.getName=function(t){var e=this.cache[t];return e?e.name:""},t.prototype.list=function(){return i.values(this.cache)},t}();e.MarketsImpl=o,e.Markets=new o}),define("basic/ui/MarketUI",["require","exports","tslib","lodash","kendo","../data/Markets","core/ui/widget/Plugin","core/ui/grid/column/ColumnUtils","core/ui/grid/column/ColumnStyle"],function(t,e,i,a,n,r,o,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MarketUI=void 0;var s,u,c="DomosMarket";function p(t,e){return t["kendo"+c](e)}function m(t,e){d.ColumnUtils.addStyle(t,l.ColumnStyle.CENTER_ALIGNED),t.values=a.map(r.Markets.list(),function(t){return{text:t.name,value:t.id}});var n={};return e&&(n.optionLabel="--"),d.ColumnUtils.addEditor(t,function(t){return p(t,n)})}s={autoWidth:!0,dataSource:{transport:{read:function(t){t.success(r.Markets.list())}},schema:{model:{id:"id",fields:{id:{type:"number"},name:{type:"string"},mic:{type:"string"}}}},sort:{field:"name",dir:"asc"}},dataTextField:"name",dataValueField:"id",optionLabel:"--",valuePrimitive:!0,template:"<span style='display: inline-block; width: 50px; font-weight: bold;'>#: mic#</span><span>#: name#</span>",name:c},u=function(n){function t(t,e){return n.call(this,t,e)||this}return i.__extends(t,n),t}(n.ui.DropDownList),o.Plugin.plugin(u,n.ui.DropDownList,s);var f=function(){function t(){}return t.widget=function(t,e){return p(t,e)},t.column=function(t){return m(t,!1)},t.optionalColumn=function(t){return m(t,!0)},t}();e.MarketUI=f}),define("core/api/BalanceSheet",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BalanceSheet=void 0;var r,o;(r=e.BalanceSheet||(e.BalanceSheet={}))[r.ASSET=1]="ASSET",r[r.LIABILITY=2]="LIABILITY",r[r.OFF_BALANCE_SHEET_ASSET=3]="OFF_BALANCE_SHEET_ASSET",r[r.OFF_BALANCE_SHEET_LIABILITY=4]="OFF_BALANCE_SHEET_LIABILITY",(o=e.BalanceSheet||(e.BalanceSheet={})).getName=a.EnumUtils.createNameFn("object:BalanceSheet",o),o.widget=i.EnumWidgetUtils.createDropList("DomosBalanceSheet",o,!0,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget),o.widgetMulti=i.EnumWidgetUtils.createMultiSelect("DomosBalanceSheetMultiSelect",o),o.columnMulti=n.EnumColumnUtils.createMultiFactory(o,o.widgetMulti)}),define("finance/data/FinancialValueCategory",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FinancialValueCategory=void 0;var r,o;(r=e.FinancialValueCategory||(e.FinancialValueCategory={}))[r.COMMITMENTS=1]="COMMITMENTS",r[r.QUANTITY=2]="QUANTITY",r[r.LAST_CALL_DATE=3]="LAST_CALL_DATE",r[r.VALUATION_DATE=4]="VALUATION_DATE",r[r.CAPITAL_CALL_AFTER_VALUATION=5]="CAPITAL_CALL_AFTER_VALUATION",r[r.LAST_DISTRIBUTION_DATE=6]="LAST_DISTRIBUTION_DATE",r[r.DISTRIBUTION_AFTER_VALUATION=7]="DISTRIBUTION_AFTER_VALUATION",r[r.NAV=8]="NAV",r[r.ADJUSTED_NAV=9]="ADJUSTED_NAV",r[r.CAPITAL_CALL_IN_PERCENT=10]="CAPITAL_CALL_IN_PERCENT",r[r.CAPITAL_CALL=11]="CAPITAL_CALL",r[r.UNFUNDED_COMMITMENT=12]="UNFUNDED_COMMITMENT",r[r.DISTRIBUTION=13]="DISTRIBUTION",r[r.CAPITAL_CALL_PAID=14]="CAPITAL_CALL_PAID",r[r.FEES_PAID=15]="FEES_PAID",r[r.PREMIUM_PAID=16]="PREMIUM_PAID",r[r.DISTRIBUTION_PAID=17]="DISTRIBUTION_PAID",r[r.RECALLABLE_PAID=18]="RECALLABLE_PAID",r[r.ACQUISITION_COST=19]="ACQUISITION_COST",r[r.PAID_IN=20]="PAID_IN",r[r.DPI=21]="DPI",r[r.RVPI=22]="RVPI",r[r.TVPI=23]="TVPI",r[r.DPI_LP=24]="DPI_LP",r[r.RVPI_LP=25]="RVPI_LP",r[r.TVPI_LP=26]="TVPI_LP",r[r.IRR=27]="IRR",r[r.IRR_LP=28]="IRR_LP",r[r.ACCRUED_AMOUNT=29]="ACCRUED_AMOUNT",r[r.PROCEEDS=30]="PROCEEDS",r[r.REALIZED=31]="REALIZED",r[r.REALIZED_EQUITY=32]="REALIZED_EQUITY",r[r.REALIZED_FX=33]="REALIZED_FX",r[r.UNREALIZED=34]="UNREALIZED",r[r.UNREALIZED_EQUITY=35]="UNREALIZED_EQUITY",r[r.UNREALIZED_FX=36]="UNREALIZED_FX",r[r.AVERAGE_PRICE=37]="AVERAGE_PRICE",r[r.AVERAGE_PRICE_IN_FUND_CURRENCY=38]="AVERAGE_PRICE_IN_FUND_CURRENCY",r[r.FIRST_INVESTMENT_DATE=39]="FIRST_INVESTMENT_DATE",r[r.YoY=40]="YoY",r[r.YoY_IN_FUND_CURRENCY=41]="YoY_IN_FUND_CURRENCY",r[r.NET_CAPITAL_CALL=42]="NET_CAPITAL_CALL",r[r.CAPITAL_CALL_IN_FUND_CURRENCY=43]="CAPITAL_CALL_IN_FUND_CURRENCY",r[r.NET_CAPITAL_CALL_IN_FUND_CURRENCY=44]="NET_CAPITAL_CALL_IN_FUND_CURRENCY",r[r.DISTRIBUTION_IN_FUND_CURRENCY=45]="DISTRIBUTION_IN_FUND_CURRENCY",r[r.NET_DISTRIBUTION=46]="NET_DISTRIBUTION",r[r.NET_DISTRIBUTION_IN_FUND_CURRENCY=47]="NET_DISTRIBUTION_IN_FUND_CURRENCY",r[r.LAST_REALIZATION_DATE=48]="LAST_REALIZATION_DATE",r[r.UNREALIZED_IN_FUND_CURRENCY=49]="UNREALIZED_IN_FUND_CURRENCY",r[r.REALIZED_IN_FUND_CURRENCY=50]="REALIZED_IN_FUND_CURRENCY",r[r.LAST_DISTRIBUTION_PAID=51]="LAST_DISTRIBUTION_PAID",r[r.DPI_IN_FUND_CURRENCY=52]="DPI_IN_FUND_CURRENCY",r[r.RVPI_IN_FUND_CURRENCY=53]="RVPI_IN_FUND_CURRENCY",r[r.TVPI_IN_FUND_CURRENCY=54]="TVPI_IN_FUND_CURRENCY",r[r.DPI_LP_IN_FUND_CURRENCY=55]="DPI_LP_IN_FUND_CURRENCY",r[r.RVPI_LP_IN_FUND_CURRENCY=56]="RVPI_LP_IN_FUND_CURRENCY",r[r.TVPI_LP_IN_FUND_CURRENCY=57]="TVPI_LP_IN_FUND_CURRENCY",r[r.IRR_IN_FUND_CURRENCY=58]="IRR_IN_FUND_CURRENCY",r[r.IRR_LP_IN_FUND_CURRENCY=59]="IRR_LP_IN_FUND_CURRENCY",r[r.NOMINAL_LP=60]="NOMINAL_LP",(o=e.FinancialValueCategory||(e.FinancialValueCategory={})).getName=n.EnumUtils.createNameFn("computation:FinancialValueCategory",o),o.getType=function(t){switch(t){case o.COMMITMENTS:case o.CAPITAL_CALL_AFTER_VALUATION:case o.DISTRIBUTION_AFTER_VALUATION:case o.NAV:case o.ADJUSTED_NAV:case o.CAPITAL_CALL:case o.UNFUNDED_COMMITMENT:case o.DISTRIBUTION:case o.CAPITAL_CALL_PAID:case o.FEES_PAID:case o.PREMIUM_PAID:case o.DISTRIBUTION_PAID:case o.RECALLABLE_PAID:case o.ACQUISITION_COST:case o.PROCEEDS:case o.PAID_IN:case o.ACCRUED_AMOUNT:case o.REALIZED:case o.REALIZED_EQUITY:case o.UNREALIZED_IN_FUND_CURRENCY:case o.LAST_DISTRIBUTION_PAID:case o.REALIZED_IN_FUND_CURRENCY:case o.REALIZED_FX:case o.UNREALIZED:case o.UNREALIZED_EQUITY:case o.UNREALIZED_FX:case o.AVERAGE_PRICE:case o.AVERAGE_PRICE_IN_FUND_CURRENCY:case o.YoY:case o.YoY_IN_FUND_CURRENCY:case o.NET_CAPITAL_CALL:case o.CAPITAL_CALL_IN_FUND_CURRENCY:case o.NET_CAPITAL_CALL_IN_FUND_CURRENCY:case o.DISTRIBUTION_IN_FUND_CURRENCY:case o.NET_DISTRIBUTION:case o.NET_DISTRIBUTION_IN_FUND_CURRENCY:return 2;case o.QUANTITY:return 3;case o.LAST_CALL_DATE:case o.VALUATION_DATE:case o.LAST_DISTRIBUTION_DATE:case o.FIRST_INVESTMENT_DATE:case o.LAST_REALIZATION_DATE:return 5;case o.CAPITAL_CALL_IN_PERCENT:case o.IRR:case o.IRR_LP:return 1;case o.DPI:case o.DPI_LP:case o.RVPI:case o.TVPI:case o.RVPI_LP:case o.TVPI_LP:return 4;default:return 3}},o.widget=i.EnumWidgetUtils.createDropList("DomosFinancialValueCategory",o,!0),o.column=a.EnumColumnUtils.createFactory(o,o.widget)}),define("finance/ui/FinancialValueUI",["require","exports","core/ui/DateUI","core/ui/PercentUI","core/ui/NumberUI","core/ui/grid/column/ColumnUtils"],function(t,e,n,i,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FinancialValueUI=void 0;var o=function(){function t(){}return t.column=function(t,e){switch(t){case 1:return i.PercentUI.column(e);case 2:case 3:return a.NumberUI.column(e);case 4:return a.NumberUI.column(r.ColumnUtils.addFormat(e,"{0:n} x"));case 5:return n.DateUI.column(e);default:return e}},t}();e.FinancialValueUI=o}),define("finance/ui/FinancialValuePortfolioColumns",["require","exports","core/util/EnumUtils","../data/FinancialValueCategory","./FinancialValueUI","core/util/StringUtils"],function(t,e,n,i,a,r){"use strict";function o(t,e){var n={field:"fn"+t,title:i.FinancialValueCategory.getName(t),hidden:e||function(t){switch(t){case i.FinancialValueCategory.COMMITMENTS:case i.FinancialValueCategory.CAPITAL_CALL:case i.FinancialValueCategory.DISTRIBUTION:return!1;default:return!0}}(t)};return a.FinancialValueUI.column(i.FinancialValueCategory.getType(t),n)}Object.defineProperty(e,"__esModule",{value:!0}),e.FinancialValuePortfolioColumns=void 0;var d=function(){function t(){}return t.createColumns=function(e){return void 0===e&&(e=!0),n.EnumUtils.list(i.FinancialValueCategory).map(function(t){return o(t,e)}).sort(function(t,e){return r.StringUtils.compare(t.title,e.title)})},t.createFinancialColumn=function(t){return o(t,!1)},t}();e.FinancialValuePortfolioColumns=d}),define("core/ui/grid/GridFooter",["require","exports","lodash","./column/ColumnStyle"],function(t,e,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GridFooter=void 0;var n=function(){function t(){}return t.footer=function(a,r,o,d){return void 0===o&&(o="{0:n}"),void 0===d&&(d=[s.ColumnStyle.RIGHT_ALIGNED,s.ColumnStyle.BOLD]),function(t){var e=function(t,e,n){if(t){var i=t;if(l.has(t,e)){var a=t[e];a&&l.has(a,n)&&(i=a)}return i[n]}}(t,a,r);if(l.isNil(e))return"";var n=kendo.format(o,e),i=s.ColumnStyle.toCss(d);return i?'<div style="'+i+'">'+n+"</div>":n}},t}();e.GridFooter=n}),define("core/ui/grid/GridDetailCommand",["require","exports","core/ui/grid/column/ColumnStyle","core/ui/grid/column/ColumnUtils","lodash","core/util/StringUtils","core/util/ObservableUtils"],function(t,e,n,i,l,a,s){"use strict";function u(t,e){if(e){if(!t||!l.has(t,e))return"";var n=t[e];return n?l.chain(n).sortBy(function(t){return t.name}).map(function(t){return t.name}).join(", ").value():""}return""}Object.defineProperty(e,"__esModule",{value:!0}),e.GridDetailCommand=void 0;var r=function(){function t(){}return t.column=function(t,r,o){var d=t.field;return d?(t.sortable={compare:function(t,e){var n=u(t,d),i=u(e,d);return a.StringUtils.compare(n,i)}},t.filterable=!1,t.editable=function(){return!1},t.menu=!1,t.groupable=!1,t.dmsExcel=function(t){return n=d,(i=(e=t)instanceof kendo.data.ObservableObject?s.ObservableUtils.get(e,n):l.get(e,n))?1===i.length?i[0].name:"[".concat(l.chain(i).map("name").join(", ").value()).concat("]"):"";var e,n,i},t.template=function(t){var e;if(e=t.get(""+d),l.isEmpty(e)||l.isNil(e))return"";if(1!==e.length)return'<a class="k-button '+r+'"><span class="k-icon k-i-info"></span>Details</a>';var n,i,a=e[0];return i=o,(n=a)?'<a href="'+kendo.htmlEncode(i(n.id))+'">'+kendo.htmlEncode(n.name)+"</a>":""},i.ColumnUtils.addStyle(t,n.ColumnStyle.CENTER_ALIGNED)):null},t.click=function(r,o,t,d){r.on("click","."+t,function(t){t.preventDefault();var e,n=(e=r).data("kendoGrid")||e.data("kendoTreeList");if(n){var i=$(t.currentTarget).closest("tr"),a=n.dataItem(i);a&&d(a.get(o))}})},t}();e.GridDetailCommand=r}),define("colonnage/ui/ColonnageUI",["require","exports","lodash"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColonnageUI=void 0;var i=function(){function t(){}return t.prototype.dataSourceArray=function(e){var t={data:e,transport:{read:function(t){t.success(e.map(function(t){return{id:t.id,field:t.field,name:t.name,hidden:!1}}))}},schema:{model:{fields:{id:{type:"number"},name:{type:"string"}},id:"id"}},sort:{field:"name",dir:"asc"}};return new kendo.data.DataSource(t)},t.prototype.createTargetListBoxColumns=function(t,e){t.empty(),kendo.destroy(t);var n={connectWith:e,dropSources:[e],draggable:{placeholder:function(t){return t.clone().css({opacity:.3,border:"1px dashed #000000"})}},dataTextField:"name",dataValueField:"id",toolbar:{position:"right",tools:["moveUp","moveDown"]}};return t.kendoListBox(n),t.data("kendoListBox")},t.prototype.createSourceListBoxColumns=function(t,e){t.empty(),kendo.destroy(t);var n={connectWith:e,dropSources:[e],draggable:{placeholder:function(t){return t.clone().css({opacity:.3,border:"1px dashed #000000"})}},selectable:"multiple",dataTextField:"name",dataValueField:"id",toolbar:{position:"right",tools:["transferTo","transferFrom","transferAllTo","transferAllFrom"]}};return t.kendoListBox(n),t.data("kendoListBox")},t.prototype.createMainListBoxOptions=function(t){t.empty(),kendo.destroy(t);return t.kendoListBox({dataTextField:"name",dataValueField:"id"}),t.data("kendoListBox")},t.prototype.createPreferenceDropDownList=function(t,e){t.empty(),kendo.destroy(t);var n={autoWidth:!0,dataSource:e,dataTextField:"name",dataValueField:"id",optionLabel:"--"};return t.kendoDropDownList(n),t.data("kendoDropDownList")},t.prototype.getListPreference=function(t){return t.data("kendoDropDownList")},t.prototype.getListBox=function(t){return t.data("kendoListBox")},t.prototype.getDataFromListBox=function(t){return this.getListBox(t).dataItems().toJSON()},t.prototype.setDataToListBox=function(t,e){this.getListBox(t).dataSource.data(e)},t.prototype.setDataSource=function(t,e){this.getListBox(t).setDataSource(e)},t.prototype.setPreferenceDataSource=function(t,e){this.getListPreference(t).setDataSource(e)},t.prototype.filterData=function(t,e){return n.differenceBy(t,e,"name")},t.prototype.saveCurrentFilter=function(t){localStorage.setItem("currentFilter",JSON.stringify(t))},t.prototype.getCurrentFilter=function(){var t=localStorage.getItem("currentFilter");return t&&"undefined"!==t?JSON.parse(t):null},t.prototype.resetFilter=function(){localStorage.removeItem("currentFilter")},t.DEFAULT_PREFERENCE_NAME="default",t.DEFAULT_COLUMN_WIDTH=250,t}();e.ColonnageUI=i}),define("portfolio/views/viewer/PortfolioViewerColumnFactory",["require","exports","ui/grid/tag.columns","lodash","core/api/PortfolioViewerColumn","object/ui/ObjectTypeUI","core/ui/PercentUI","basic/ui/CurrencyUI","core/api/AIFSubAssetType","core/ui/IntegerUI","basic/ui/CountryUI","core/ui/DateUI","core/api/AIFMDGeographicalFocus","core/api/AIFMDLiquidationPeriod","basic/ui/MarketUI","core/api/BalanceSheet","core/ui/NumberUI","tag/data/TagDefinitions","finance/ui/FinancialValuePortfolioColumns","core/ui/grid/GridFooter","i18n","core/ui/grid/GridDetailCommand","object/web/ObjectMap","colonnage/ui/ColonnageUI","core/api/TagType","object/ui/ObjectUI","portfolio/data/ColumnAggregation"],function(t,e,o,d,l,s,u,c,p,m,f,b,v,y,h,g,n,T,I,C,w,k,E,D,S,N,x){"use strict";function R(t){var n=t.field;if(!n)return t;var i=n+"_display",a=t.format;return t.template=function(t){var e=null;return e=t instanceof kendo.data.ObservableObject?t.get(i)||t.get(n):d.get(t,i)||d.get(t,n),d.isNil(e)?"":a?kendo.format(a,e):e},t.dmsExcel=function(t){return t instanceof kendo.data.ObservableObject?t.get(i)||t.get(n):d.get(t,i)||d.get(t,n)},t}function _(t){return R(n.NumberUI.column(t))}function O(t,e,n,i){switch(t){case l.PortfolioViewerColumn.ASSET:return{field:"assetName",title:w.I18N.t("data:fields.name"),template:function(t){var e=t.get("assetName"),n=t.get("asset");return"<a class='d-link' href='"+(n?E.ObjectMap.objectEdit(n):"javascript:void(0)")+"'>"+kendo.htmlEncode(e)+"</a>"}};case l.PortfolioViewerColumn.TYPE:return s.ObjectTypeUI.column({field:"assetType"});case l.PortfolioViewerColumn.OCCUPANCY:return u.PercentUI.column({field:"occupancy"});case l.PortfolioViewerColumn.WEIGHT:return u.PercentUI.column({field:"weight"});case l.PortfolioViewerColumn.MARKET_VALUE:return _({field:"marketValue"});case l.PortfolioViewerColumn.CURRENCY:return c.CurrencyUI.column({field:"currency"});case l.PortfolioViewerColumn.COUNTRY:return f.CountryUI.column({field:"country"});case l.PortfolioViewerColumn.POSITION_COUNT:return m.IntegerUI.column({field:"positionCount"});case l.PortfolioViewerColumn.QUANTITY:return _({field:"quantity"});case l.PortfolioViewerColumn.FINANCING:return _({field:"financing"});case l.PortfolioViewerColumn.TAG:return function(t){var e=T.TagDefinitions.get(t);if(!e)return null;var n=o.createColumn(e);return d.includes([S.TagType.SELECT,S.TagType.MULTIPLE],e.type)?n:R(n)}(e);case l.PortfolioViewerColumn.SUB_ASSET_TYPE:return p.AIFSubAssetType.column({field:"subAssetType"});case l.PortfolioViewerColumn.ISSUER:return{field:"issuerName"};case l.PortfolioViewerColumn.CITY:return{field:"city"};case l.PortfolioViewerColumn.RATE:return u.PercentUI.column({field:"rate"});case l.PortfolioViewerColumn.MATURITY_DATE:return b.DateUI.column({field:"maturityDate"});case l.PortfolioViewerColumn.ACTUAL_NOTIONAL:return _({field:"actualNotional"});case l.PortfolioViewerColumn.DEBT_INSTALLMENT:return _({field:"debtInstallment"});case l.PortfolioViewerColumn.OWNERSHIP:return u.PercentUI.column({field:"ownership"});case l.PortfolioViewerColumn.SECURITIES_OWNERSHIP:return u.PercentUI.column({field:"securitiesOwnership"});case l.PortfolioViewerColumn.NEXT_NOTIONAL_PAYMENT_DATE:return b.DateUI.column({field:"nextNotionalPaymentDate"});case l.PortfolioViewerColumn.MARKET_VALUE_IN_FUND_CURRENCY:return _({field:"marketValueInFundCurrency"});case l.PortfolioViewerColumn.RISK_INDICATOR:return(r=n)?_({field:"kri"+r.id+".value",title:r.name}):null;case l.PortfolioViewerColumn.GEOGRAPHICAL_FOCUS:return v.AIFMDGeographicalFocus.column({field:"geographicalFocus"});case l.PortfolioViewerColumn.LIQUIDATION_PERIOD:return y.AIFMDLiquidationPeriod.column({field:"liquidationPeriod"});case l.PortfolioViewerColumn.MARKET:return h.MarketUI.column({field:"market"});case l.PortfolioViewerColumn.BALANCE_SHEET:return g.BalanceSheet.column({field:"balanceSheet",aggregates:["count"],groupHeaderTemplate:function(t){return g.BalanceSheet.getName(t.value)+"   count: "+t.count}});case l.PortfolioViewerColumn.FINANCIAL:return(a=i)?R(I.FinancialValuePortfolioColumns.createFinancialColumn(a)):null;case l.PortfolioViewerColumn.OWNER:return k.GridDetailCommand.column({field:"owner",title:w.I18N.t("portfolio:columns.OWNER")},U.OWNER_CLASS_NAME,function(t){return E.ObjectMap.objectEdit(t)});case l.PortfolioViewerColumn.YTM:return u.PercentUI.column({field:"ytm"});case l.PortfolioViewerColumn.CREDIT_SPREAD:return u.PercentUI.column({field:"creditSpread"});case l.PortfolioViewerColumn.EFFECTIVE_DURATION:return _({field:"effectiveDuration",format:"{0:n0}"});case l.PortfolioViewerColumn.DURATION:return _({field:"duration",format:"{0:n1}"});case l.PortfolioViewerColumn.WEIGHTED_AVERAGE_LIFE:return _({field:"weightedAverageLife",format:"{0:n1}"});case l.PortfolioViewerColumn.INVESTMENT:return N.ObjectUI.column({field:"investment",title:w.I18N.t("data:fields.investment")});default:return null}var a,r}Object.defineProperty(e,"__esModule",{value:!0}),e.PortfolioViewerColumnFactory=void 0;var U=function(){function t(){}return t.create=function(t,e,n,i,a,r,o){void 0===e&&(e=!1),void 0===n&&(n=D.ColonnageUI.DEFAULT_COLUMN_WIDTH),void 0===o&&(o=x.ColumnAggregation.NONE);var d=O(t,i,a,r);return d?(function(t,e){var n=t.field;if(e&&n&&!t.aggregates){var i="";switch(e){case x.ColumnAggregation.SUM:i="sum";break;case x.ColumnAggregation.MIN:i="min";break;case x.ColumnAggregation.MAX:i="max";break;case x.ColumnAggregation.COUNT:i="count"}if(i){t.aggregates=[i];var a=t.domosStyles||[],r=C.GridFooter.footer(n,i,t.format||"{0}",a);t.groupFooterTemplate=r,t.footerTemplate=r}}}(d,o),d.title||(d.title=l.PortfolioViewerColumn.getName(t)||""),d.hidden=e,d.width=n||void 0,d):null},t.OWNER_CLASS_NAME="owner",t.OWNER_FIELD="owner",t}();e.PortfolioViewerColumnFactory=U}),define("core/util/DateUtils",["require","exports","lodash","kendo"],function(t,e,n,i){"use strict";function a(t){if(t<0||99<t)throw new Error("Unexpected number");return t<10?"0"+t:t.toString()}Object.defineProperty(e,"__esModule",{value:!0}),e.DateUtils=void 0;var r=function(){function d(){}return d.toDate=function(t){return t?n.isDate(t)?t:new Date(t):null},d.map=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=t,a=0,r=e;a<r.length;a++){var o=r[a];i[o]=d.toDate(i[o])}return t},d.toString=function(t){var e=d.toDate(t);return e?i.toString(e,"yyyy-MM-dd"):null},d.toJson=function(t){return d.toString(t)},d.equals=function(t,e){var n=d.toDate(t),i=d.toDate(e);return n?!!i&&(n.getDate()===i.getDate()&&n.getMonth()===i.getMonth()&&n.getFullYear()===i.getFullYear()):!i},d.min=function(t,e){return n.isNil(t)||n.isNil(e)?null:t<e?t:e},d.max=function(t,e){return n.isNil(t)||n.isNil(e)?null:e<t?t:e},d.addMonths=function(t,e){if(0===e)return t;var n=t.getDate(),i=new Date(t.getTime());i.setDate(1),i.setMonth(t.getMonth()+e);var a=Math.min(n,new Date(i.getFullYear(),i.getMonth()+1,0).getDate());return i.setDate(a),i},d.addDays=function(t,e){if(!e)return t;var n=new Date(t);return n.setDate(n.getDate()+e),n},d.toISODateOnly=function(t){var e=t.getFullYear(),n=t.getMonth(),i=t.getDate();return e.toString()+"-"+a(n+1)+"-"+a(i)},d}();e.DateUtils=r}),define("text!templates/risk/risk.cashflow.tooltip.html",[],function(){return'<div>\n\t<table style="width:50%">\n\t\t<tr>\n\t\t\t<th style="text-align: left">#= $.t("risk:cashFlow.type")#</th>\n\t\t\t<th style="text-align: left">#= $.t("risk:cashFlow.name")#</th>\n\t\t\t<th style="text-align: left">#= $.t("risk:cashFlow.amount")#</th>\n\t\t\t<th style="text-align: left">#= $.t("risk:cashFlow.countervalue")#</th>\n\t\t</tr>\n\t\t# for (var i = 0, length = objects.length; i < length; ++i) {# <tr>\n\t\t\t<td style="text-align: left">\n\t\t\t\t#=objects[i].type#\n\t\t\t</td>\n\t\t\t<td style="text-align: left">\n\t\t\t\t#=objects[i].name#\n\t\t\t</td>\n\t\t\t<td style="text-align: left">\n\t\t\t\t#=objects[i].amount#\n\t\t\t</td>\n\t\t\t<td style="text-align: left">\n\t\t\t\t#=objects[i].countervalue#\n\t\t\t</td>\n\t\t\t</tr>\n\t\t\t#}#\n\t</table>\n\n</div>'}),define("risk/views/overview/RiskCashFlowChart",["require","exports","core/util/DateUtils","i18n","text!templates/risk/risk.cashflow.tooltip.html","basic/data/Currencies"],function(t,e,l,s,n,u){"use strict";function c(t){return kendo.template(n)({objects:t})}Object.defineProperty(e,"__esModule",{value:!0}),e.RiskCashFlowChart=void 0;var i=function(){function t(){}return t.displayCashFlowChart=function(t,e){if(!t)return null;kendo.destroy(t),t.empty();var n=e.cashFlow;if(!n)return null;var i,a,r,o=[],d=[];return n.forEach(function(t){if(t.debit){var e=t.debitFlow.map(function(t){return{type:t.name,name:t.object.name,amount:u.Currencies.format(t.amount,t.currency,0),countervalue:kendo.toString(t.countervalue,"n0")}});o.push({objectFlow:c(e),value:t.debit}),d.push(t.name)}if(t.credit){e=t.creditFlow.map(function(t){return{type:t.name,name:t.object.name,amount:u.Currencies.format(t.amount,t.currency,0),countervalue:kendo.toString(t.countervalue,"n0")}});o.push({objectFlow:c(e),value:t.credit}),d.push(t.name)}}),t.kendoChart((i=o,a=e.date,r=d,{title:{text:s.I18N.t("risk:cashFlow.title")+" : "+l.DateUtils.toString(a)+" "},seriesDefaults:{spacing:.2,gap:.1},series:[{name:"+",type:"waterfall",data:i,field:"value",negativeColor:"#ef4f37"}],categoryAxis:{categories:r},tooltip:{visible:!0,template:"#=dataItem.objectFlow#"}})),t.data("kendoChart")},t}();e.RiskCashFlowChart=i}),define("text!templates/risk/risk.comment.window.html",[],function(){return'<div id="riskCommentWindow" class="formWindow">\n\t<table class="formTable">\n\t\t<tr data-bind="visible: hasObject">\n\t\t\t<td>\n\t\t\t\t<label for="riskCommentObject" data-i18n="risk:fields.object"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="riskCommentObject" class="k-textbox" type="text" data-bind="value: objectName" readonly/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr data-bind="visible: hasRisk">\n\t\t\t<td>\n\t\t\t\t<label for="riskCommentRisk" data-i18n="risk:fields.group" data-bind="visible: hasGroup"></label>\n\t\t\t\t<label for="riskCommentRisk" data-i18n="risk:fields.aggregationRule" data-bind="visible: hasRule"></label>\n\t\t\t\t<label for="riskCommentRisk" data-i18n="risk:fields.indicator" data-bind="visible: hasIndicator"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="riskCommentRisk" class="k-textbox" type="text" data-bind="value: riskName"/>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\t<div id="riskCommentGrid"></div>\n\n\t<div class="formWindowButtons">\n\t\t<button class="k-primary" data-role="button" data-icon="close" data-bind="events:{click: closeClick}">#= $.t("risk:actions.close")#</button>\n\t</div>\n</div>'}),function(){var tn,en,nn,an,rn=[].slice;en="risk_overview_display",an="hasOverviewResults",nn="hasOverviewResultDetail",tn="#riskCommentWindow",define("views/risk/risk.overview.details",["jquery","lodash","i18n","kendo","site","ui","core/web/WebStorages","core/web/WebLocation","core/util/DateUtils","core/util/ObservableUtils","core/ui/DateUI","core/ui/PercentUI","core/ui/NumberUI","object/data/ObjectCategories","object/data/ObjectTypes","object/web/ObjectMap","risk/views/overview/RiskCashFlowChart","core/ui/grid/column/ColumnUtils","core/ui/grid/column/ColumnStyle","text!templates/risk/risk.comment.window.html"],function(c,G,q,B,t,e,n,i,a,r,o,d,l,s,u,p,m,f,b,v){var y,h,g,I,T,C,V,w,k,x,E,D,S,N,R,_,O,U,A,F,W,L,P,M,j,H,Y,J,K,$,Q,z,X,Z,tt,et,nt,it,at,rt,ot,dt,lt,st,ut,ct,pt,mt,ft,bt,vt,yt,ht,gt,Tt,It,Ct,wt,kt,Et,Dt,St,Nt,xt,Rt,_t,Ot,Ut,At,Ft,Lt,Pt,Mt,jt,Gt,qt,Bt,Vt,Wt,Ht,Yt,Jt,Kt,$t,Qt,zt,Xt,Zt,te,ee,ne,ie,ae,re,oe,de,le,se,ue,ce,pe,me,fe,be,ve,ye,he,ge,Te,Ie,Ce,we,ke,Ee,De,Se,Ne,xe,Re,_e,Oe,Ue,Ae,Fe,Le,Pe,Me,je,Ge,qe,Be,Ve,We,He,Ye,Je,Ke,$e,Qe,ze,Xe,Ze;return x=l.NumberUI,R=d.PercentUI,I=o.DateUI,T=a.DateUtils,N=r.ObservableUtils,E=s.ObjectCategories,S=u.ObjectTypes,D=p.ObjectMap,g=f.ColumnUtils,h=b.ColumnStyle,U=n.WebStorages.tenantLocalStorage(),A=i.WebLocation,V=e.grid,O=m.RiskCashFlowChart,null==window.domos&&(window.domos={}),null==(k=window.domos).risk&&(k.risk={}),_={group:1,rule:2,indicator:3},Ge=function(t,e,r){var n,i,a,o,d,l,s,u;for(l=[],d=e.profile,i=T.toJson(e.date),a=0,o=(u=e.roots).length;a<o;a++)n={profile:d,object:u[a].objectId,date:i},l.push(c.getJSON("risk/comment/list/all.json",n));if(l.length<=0)r.success([]);else{if(1!==l.length)return s=function(){var t,e,n,i,a;for(e=[],n=0,i=(t=1<=arguments.length?rn.call(arguments,0):[]).length;n<i;n++)a=t[n],e.push.apply(e,a[0]);return r.success(e)},c.when.apply(c,l).done(s).fail(r.error);l[0].done(r.success).fail(r.error)}},He=function(t,e){var n,i,a,r;if(i=t.commentsElement,B.destroy(i),i.empty(),e)return c("<h3>").text("Comments").appendTo(i),c("<h4>").text("Right-click on cells to edit comments").appendTo(i),c("<p>").appendTo(i),a=c("<div>").addClass("floatingGrid").appendTo(i),c("<div>").addClass("clearer").appendTo(i),n=[],1<e.roots.length&&n.push({field:"objectName",title:"Root"}),n.push({field:"resultObjectName",title:"Object"}),n.push({field:"resultGroupName",title:"Risk"}),n.push({field:"resultRuleName",title:"Rule"}),n.push({field:"resultIndicatorName",title:"Indicator"}),n.push(I.column({field:"startDate",title:"Start date"})),n.push(I.column({field:"endDate",title:"End date"})),n.push({field:"comments",title:"Comments"}),n.push(g.addStyle({field:"resultIndicatorPercent",title:q.t("risk:fields.percent"),template:"<input type='checkbox' class='k-checkbox' #= (resultIndicatorPercent == true) ? checked ='checked' : '' # disabled/><label class='k-checkbox-label'>&nbsp;</label>",width:"100px"},h.CENTER_ALIGNED)),r={dataSource:{transport:{read:Ge.bind(null,t,e)},schema:{model:{id:"id",fields:{startDate:{type:"date"},endDate:{type:"date"}}}},sort:[{field:"objectName",dir:"asc"},{field:"resultObjectName",dir:"asc"},{field:"startDate",dir:"asc"},{field:"endDate",dir:"asc"}]},columns:n,editable:!1,scrollable:!0,pageable:V.defaultPageable(),height:500},V.withDefaults(r),a.kendoGrid(r),null},St=function(){var t,e;return(t=c(tn)).length||(e=B.template(v)({}),c(document.body).append(e),(t=c(tn)).i18n()),t},Dt=function(){var t,e;return(t=St()).data("kendoWindow")||(e={width:"600px",minWidth:"300px",modal:!0,visible:!1},t.kendoWindow(e)),t},Ve=function(t,e,n,i){var a;return a=e.comments||[],G.remove(a,function(t){return t.object===n}),a.push.apply(a,i),e.comments=a,null},Be=function(t,e,n){var i;return(i={profile:e.profile,object:n,date:e.date}).date=T.toJson(i.date),c.getJSON("risk/comment/list/all.json",i).done(Ve.bind(null,t,e,n))},X=function(t,e,n,i,a){return i.close(),Be(t,e,n),null},qe=function(t,e,n,i,a,r,o,d){var l;return(l={profile:t,object:e,date:n,resultObject:i,resultGroup:a,resultRule:r,resultIndicator:o}).date=T.toJson(l.date),c.getJSON("risk/comment/list.json",l).done(d.success).fail(d.error),null},Xe=it=function(t){var e;return e={type:"POST",url:"risk/comment.json",dataType:"json",data:{data:JSON.stringify(t.data)}},c.ajax(e).done(t.success).fail(t.error),null},mt=function(t){var e,n;return n={id:t.data.id},e={type:"DELETE",url:"risk/comment.json?"+c.param(n),dataType:"json"},c.ajax(e).done(t.success).fail(t.error),null},yt=function(t,e,n,i,a,r,o,d){var l,s,u,c,p,m,f,b,v,y,h,g,T;return T=(s=Dt()).data("kendoWindow"),f=g=m=null,r&&(o===_.group?m=r:o===_.rule?g=r:o===_.indicator&&(f=r)),h={hasObject:!!(v=i||null),hasRisk:!!r,hasGroup:!!m,hasRule:!!g,hasIndicator:!!f,objectName:a||"",riskName:d||"",closeClick:X.bind(null,t,e,n,T)},b=B.observable(h),B.bind(s,b),c=s.find("#riskCommentGrid"),B.destroy(c),c.empty(),l=e.date,y=e.profile,p={dataSource:{transport:{create:it,read:qe.bind(null,y,n,l,v,m,g,f),update:Xe,destroy:mt},schema:{model:{id:"id",fields:{id:{type:"number"},profile:{type:"number",defaultValue:y},object:{type:"number",defaultValue:n},resultObject:{type:"number",defaultValue:v},resultGroup:{type:"number",defaultValue:m},resultRule:{type:"number",defaultValue:g},resultIndicator:{type:"number",defaultValue:f},startDate:{type:"date",defaultValue:l},endDate:{type:"date",defaultValue:l},comments:{type:"string"}}}},sort:[{field:"startDate",dir:"asc"},{field:"endDate",dir:"asc"}],pageSize:10},columns:[{command:["edit","destroy"],width:"230px"},I.column({field:"startDate",title:q.t("risk:fields.fromDate"),width:"100px"}),I.column({field:"endDate",title:q.t("risk:fields.toDate"),width:"100px"}),{field:"comments",title:q.t("risk:fields.comments")}],pageable:V.defaultPageable(),scrollable:!0,height:500,toolbar:["create"]},V.withDefaults(p),c.kendoGrid(p),u=c.data("kendoGrid"),T.one("activate",function(){return u.resize()}),T.title(q.t("risk:fields.comments")).open().center(),null},Xt=function(t){switch(t){case _.indicator:return"initialValue";case _.rule:default:return"value"}},le=function(t,e){var n;if(n=e["color_"+t]){if(1===n)return"riskNormal";if(2===n)return"riskWarning";if(3===n)return"riskError"}return"riskNone"},Kt=function(t,e){var n;if(n=e[t]){if(1===n)return"green";if(2===n)return"yellow";if(3===n)return"red"}return"gray"},Jt=function(t,e){return A.resolveImage("traffic_"+Kt(t,e)+"-16x16.png")},ge=function(t,e,n){var i,a;return i="color_"+e,a=t?"up":"down",A.resolveImage("trend_"+a+"_"+Kt(i,n)+"-16x16.png")},w="<img align='right' class='riskColorResult' src='"+A.resolveImage("flag_missing-16x16.png")+"'/>",C="<img align='right' class='riskColorResult' src='"+A.resolveImage("flag_error-16x16.png")+"'/>",y="<img align='right' class='riskColorResult' src='"+A.resolveImage("blank-16x16.png")+"'/>",me=function(t,e){var n,i;return n="status_error_"+t,i="",e["status_missing_"+t]?i+=w:i+=y,e[n]?i+=C:i+=y,i},ke=function(t,e){var n,i,a,r;return n="status_error_"+t,r="status_missing_trend_"+t,a="status_error_trend_"+t,i="",e["status_missing_"+t]||e[r]?i+=w:i+=y,e[n]||e[a]?i+=C:i+=y,i},he=function(t,e){return ke(t,e)},zt=function(t,e){var n;return e.isIndicator?(n=e[t],G.isNil(n)?null:n%1!=0?null:e[t+"_label"]):null},ce=function(t,e){var n;return null!=(n=e[t])?"<span class='"+le(t,e)+"'>"+B.toString(n,"n")+"</span>":""},ue=function(t,e){var n;return(n=zt(t,e))?"<span class='"+le(t,e)+"'>"+q.t(n)+"</span>":ce(t,e)},se=function(t,e,n){return n?ue(t,e):ce(t,e)},pe=function(t,e,n){var i;return i=se(t,e,n),i+=me(t,e)},Ce=function(t,e,n){var i,a,r,o;return o=e[t],r=e[a="trend_"+t],null==o&&null==r?"":o===r?se(t,e,n):(i="",i+=null!=o?se(t,e,n):"N/A",i+=" | ",i+=null!=r?se(a,e,n):"N/A")},we=function(t,e,n){var i;return i=Ce(t,e,n),i+=ke(t,e)},ve=function(t,e,n){var i,a,r,o;return o=e[t],r=e[a="trend_"+t],null==o&&null==r?"":o===r?se(t,e,n):(i="",i+=null!=o?se(t,e,n):"N/A",i+=" | ",i+=null!=r?se(a,e,n):"N/A")},ye=function(t,e,n){var i;return i=ve(t,e,n),i+=he(t,e)},$t=function(t,e,n){return e[t]?"<img align='middle' class='riskColorResult' src='"+Jt(t,e)+"'/>":""},Qt=function(t,e,n){var i;return i=$t(t,e),i+=me(t,e)},Te=function(t,e,n){var i,a,r;return r=e[t],i=e["trend_"+t],G.isNil(r)&&G.isNil(i)?"":r===i?$t("color_"+t,e):(a=!1,a=!G.isNil(r)&&(!!G.isNil(i)||(e.ascending?r<i:i<r)),"<img align='middle' class='riskColorResult' src='"+ge(a,t,e)+"'/>")},Ie=function(t,e,n){var i;return i=Te(t,e),i+=ke(t,e)},fe=function(t,e,n){return $t("color_"+t,e)},be=function(t,e,n){var i;return i=fe(t,e),i+=he(t,e)},k.risk.getRawValueTemplate=pe,k.risk.getImageTemplate=Qt,k.risk.getTrendRawValueTemplate=we,k.risk.getTrendImageTemplate=Ie,k.risk.getStressRawValueTemplate=ye,k.risk.getStressImageTemplate=be,ot=function(t,e,n){var i;return i={field:e,title:n,template:"#= domos.risk.getRawValueTemplate('"+e+"',data,"+t+")#"},delete(i=x.column(i)).width,i},pt=function(t,e,n){var i;return i={field:e,title:n,template:"#= domos.risk.getTrendRawValueTemplate('"+e+"',data,"+t+")#"},delete(i=x.column(i)).width,i},st=function(t,e,n){var i;return i={field:e,title:n,template:"#= domos.risk.getStressRawValueTemplate('"+e+"',data,"+t+")#"},delete(i=x.column(i)).width,i},nt=function(t,e,n){return{field:e,title:n,template:"#= domos.risk.getImageTemplate('"+e+"',data,"+t+")#",attributes:{style:"text-align:center;"}}},ut=function(t,e,n){return{field:e,title:n,template:"#= domos.risk.getTrendImageTemplate('"+e+"',data,"+t+")#",attributes:{style:"text-align:center;"}}},dt=function(t,e,n){return{field:e,title:n,template:"#= domos.risk.getStressImageTemplate('"+e+"',data,"+t+")#",attributes:{style:"text-align:center;"}}},rt=function(t,e,n){return ot(t,e,n)},ct=function(t,e,n){return pt(t,e,n)},lt=function(t,e,n){return st(t,e,n)},te=function(t,e){switch(t){case 2:return 1===e?"colorCoded":"value";case 3:return"initialValue";default:return"value"}},Zt=function(t,e,n){if(null==n&&(n=!1),2===e)switch(t){case 2:return ut.bind(null,n);case 3:return ct.bind(null,n);default:return pt.bind(null,n)}else if(3===e)switch(t){case 2:return dt.bind(null,n);case 3:return lt.bind(null,n);default:return st.bind(null,n)}else switch(t){case 2:return nt.bind(null,n);case 3:return rt.bind(null,n);default:return ot.bind(null,n)}},Bt=function(t){return"group"+t.id},Gt=function(t){return"color_"+Bt(t)},Yt=function(t){return"warning_"+Bt(t)},qt=function(t){return"error_"+Bt(t)},Vt=function(t){return"limit_"+Bt(t)},Ht=function(t){return"status_missing_"+Bt(t)},Wt=function(t){return"status_error_"+Bt(t)},xt=function(t){return"trend_"+Bt(t)},Nt=function(t){return"color_"+xt(t)},Rt=function(t){return"limit_"+xt(t)},Ot=function(t){return"status_missing_"+xt(t)},_t=function(t){return"status_error_"+xt(t)},de=function(t){return"value"+t.nodeId},ee=function(t){return de(t)+"_label"},oe=function(t){return"color_"+de(t)},ne=function(t){return"limit_"+de(t)},ie=function(t){return ne(t)+"_label"},re=function(t){return"status_missing_"+de(t)},ae=function(t){return"status_error_"+de(t)},jt=function(t){return"trend_"+de(t)},Ut=function(t){return jt(t)+"_label"},Mt=function(t){return"color_"+jt(t)},At=function(t){return"limit_"+jt(t)},Ft=function(t){return At(t)+"_label"},Pt=function(t){return"status_missing_"+jt(t)},Lt=function(t){return"status_error_"+jt(t)},wt=function(t,e){var n,i,a,r;if(!t)return null;for(n=0,i=t.length;n<i;n++){if((r=t[n]).nodeId===e)return r;if(a=wt(r.children,e))return a}return null},F=function(t,e){var n,i,a,r,o;if(i=e.children){for(a=0,r=i.length;a<r;a++)n=i[a],(o=S.get(n.type))&&!o.isOf(E.portfolios)?t.push(n):F(t,n);return null}},kt=function(t){var e;return F(e=[],t),e},M=function(t,e,n,i,a){var r,o,d,l,s,u,c;for(c=i[n.nodeId],e.value=c?c[t]:null,e.color_value=c?c.colorCoded:null,e.lowerLimit=c?c.lowerLimit:null,e.upperLimit=c?c.upperLimit:null,e.limit_value=c?c.valueLimit:null,e.limit_value_label=(null!=c?c.valueLimit_label:void 0)||"",e.status_missing_value=c?c.missing:null,e.status_error_value=c?c.error:null,e.value_label=(null!=c?c.label:void 0)||"",e.lowerLimit_label=(null!=c?c.lowerLabel:void 0)||"",e.upperLimit_label=(null!=c?c.upperLabel:void 0)||"",d=0,s=(o=kt(n)).length;d<s;d++)c=i[(r=o[d]).nodeId],e[de(r)]=c?c[t]:null,e[oe(r)]=c?c.colorCoded:null,e[ne(r)]=c?c.valueLimit:null,e[ie(r)]=(null!=c?c.valueLimit_label:void 0)||"",e[re(r)]=c?c.missing:null,e[ae(r)]=c?c.error:null,e[ee(r)]=(null!=c?c.label:void 0)||"";if(a){for(c=a[n.nodeId],e.trend_value=c?c[t]:null,e.color_trend_value=c?c.colorCoded:null,e.limit_trend_value=c?c.valueLimit:null,e.status_missing_trend_value=c?c.missing:null,e.status_error_trend_value=c?c.error:null,e.trend_value_label=(null!=c?c.label:void 0)||"",l=0,u=o.length;l<u;l++)c=a[(r=o[l]).nodeId],e[jt(r)]=c?c[t]:null,e[Mt(r)]=c?c.colorCoded:null,e[At(r)]=c?c.valueLimit:null,e[Ft(r)]=(null!=c?c.valueLimit_label:void 0)||"",e[Pt(r)]=c?c.missing:null,e[Lt(r)]=c?c.error:null,e[Ut(r)]=(null!=c?c.label:void 0)||"";return null}},L=function(t,e,n,i,a,r){var o,d,l,s,u,c,p,m,f;for(f=r.id,d=i?G.keyBy(i.indicators,"id"):{},p=0,m=(c=G.sortBy(n.indicators,["priority","name"])).length;p<m;p++)u=c[p],s=++r.id,o=d[u.id],l={id:s,nodeId:u.id,isIndicator:!0,name:u.name,parentId:f,type:_.indicator,ascending:u.ascending},M(t,l,a,u.values,null!=o?o.values:void 0),e.push(l);return null},P=function(t,e,n,i,a,r){var o,d,l,s,u,c,p,m,f;for(c=r.id,d=i?G.keyBy(i.rules,"id"):{},s=0,u=(f=G.sortBy(n.rules,["priority","name"])).length;s<u;s++)m=f[s],l=++r.id,o=d[m.id],p={id:l,nodeId:m.id,name:m.name,parentId:c,type:_.rule},M(t,p,a,m.values,null!=o?o.values:void 0),e.push(p),L(t,e,m,o,a,r);return null},W=function(t,e,n,i,a,r){var o,d,l,s,u,c,p;for(d=i?G.keyBy(i,"id"):{},c=0,p=(n=G.sortBy(n,["priority","name"])).length;c<p;c++)s=n[c],u=++r.id,o=d[s.id],l={id:u,nodeId:s.id,name:s.name,parentId:null,type:_.group},M(t,l,a,s.values,null!=o?o.values:void 0),e.push(l),P(t,e,s,o,a,r);return null},$=function(t){return B.destroy(t.detailElement),t.detailGrid=null,t.detailElement.empty()},vt=function(t,e,n,i,a,r){var o,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R;if(E=r.target,b=t.detailElement.data("kendoTreeList"),!E||!b)return"No limits";if(!(y=b.dataItem(E.closest("tr"))))return"No limits";if(v=E[0].cellIndex,!(c=null!=(d=b.options.columns[v])?d.field:void 0))return"No limits";if(R=y.lowerLimit,s=zt("lowerLimit",y),R=G.isNil(R)?"":B.toString(R,"n2"),s&&(R&&(R=" ("+R+")"),R=""+q.t(s)+R),u=y.upperLimit,s=zt("upperLimit",y),u=G.isNil(u)?"":B.toString(u,"n2"),s&&(u&&(u=" ("+u+")"),u=""+q.t(s)+u),D=[],I="limit_trend_"+c,N=y[T="limit_"+c],x=y[I],k="N/A",null==N&&null==x||(null!=N&&(s=zt(T,y),C=B.toString(N,"n2"),k=s?q.t(s)+" ("+C+")":C),a&&(k+=" | ",null!=x?(s=zt(I,y),C=B.toString(x,"n2"),k+=s?q.t(s)+" ("+C+")":C):k+="N/A")),D.push(q.t("risk:tooltips.value")+": "+k),R&&D.push(q.t("risk:tooltips.lowerLimit")+": "+R),u&&D.push(q.t("risk:tooltips.upperLimit")+": "+u),w=null!=d?d.objectId:void 0,m=y.nodeId,f=y.type,m&&G.has(e,"comments")&&(S=function(t){return!0},p=S=f===_.indicator?function(t){return G.isNil(t.resultGroup)&&G.isNil(t.resultRule)&&t.resultIndicator===m}:f===_.rule?function(t){return G.isNil(t.resultGroup)&&t.resultRule===m&&G.isNil(t.resultIndicator)}:function(t){return t.resultGroup===m&&G.isNil(t.resultRule)&&G.isNil(t.resultIndicator)},p=w?function(t){return t.object===n&&S(t)&&t.resultObject===w}:function(t){return t.object===n&&S(t)&&G.isNil(t.resultObject)},0<(l=G.filter(e.comments,p)).length))for(D.push(""),h=0,g=l.length;h<g;h++)o=l[h],D.push(o.comments);return 0<D.length?D.join("<br/>"):"No limits"},K=function(t){var e,n;if((n=t.overviewDetailContext).detailContextMenu)return e=n.detailContextMenu,B.destroy(e),e.remove(),n.detailContextMenu=null},ft=function(t,e,n,i){var a,r,o,d,l,s,u,c,p,m;if(m=i.target,l=t.overviewDetailContext.detailElement.data("kendoTreeList"),m&&l&&(u=l.dataItem(m.closest("tr"))))return s=m.cellIndex,c=null!=(a=l.options.columns[s])?a.objectId:void 0,p=null!=a?a.objectName:void 0,r=u.nodeId,d=u.type,o=u.name,yt(t,e,n,c,p,r,d,o),null},bt=function(t,e,n){var i,a;return K(t),a=t.overviewDetailContext,i=c("<ul>").insertAfter(a.detailElement),(a.detailContextMenu=i).kendoContextMenu({target:a.detailElement,filter:"td",dataSource:[{text:q.t("risk:fields.comments")}],select:ft.bind(null,t,e,n)}),null},Ye=function(t,e){var n;return n=t.cashFlowElement,O.displayCashFlowChart(n,e)},Je=function(t,e,n,i,a){var r,o,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j;if(_=t.overviewDetailContext,$(_),F=_.resultsType,f=3===(m=_.displayMethod),S=t.model,L=i.rootObjectId,x=wt(e.roots,i.nodeId)){for(j=te(m,F),g=[],T=0,C=(U=e.groups).length;T<C;T++)h=U[T],Bt(h)===a&&g.push(h);if(g.length<=0&&(g=e.groups),c=null,n){for(c=[],I=0,w=(A=n.groups).length;I<w;I++)h=A[I],Bt(h)===a&&c.push(h);c.length<=0&&(c=n.groups)}if(W(j,p=[],g,c,x,{id:0}),!(p.length<=0)){for(S.set(nn,!0),v={data:p,schema:{model:{id:"id",expanded:!0,sort:{field:"name"}}}},b=new B.data.TreeListDataSource(v),s=Zt(m,F,f),u=[N={field:"name",title:q.t("risk:fields.name")}],(M=s("value",i.name||q.t("risk:fields.aggregatedValue"))).objectId=x.objectId,M.objectName=x.name,u.push(M),l=[],D=0,k=(d=kt(x)).length;D<k;D++)r=d[D],(o=s(de(r),r.name)).objectId=r.objectId,o.objectName=r.name,l.push(o);if(l=G.sortBy(l,"title"),_.restricted)for(N.width=200,M.width=100,O=0,E=l.length;O<E;O++)l[O].width=150;return u.push.apply(u,l),R={dataSource:b,columns:u,selectable:!0,pageable:V.defaultPageable(),scrollable:_.restricted},V.withDefaults(R),(y=_.detailElement).kendoTreeList(R),_.detailGrid=y.data("kendoTreeList"),P={filter:"td",position:"right",content:vt.bind(null,_,e,L,f,!!n)},y.kendoTooltip(P),bt(t,e,L),null}S.set(nn,!1)}else S.set(nn,!1)},3,2,0,1,je=function(){return q.t("risk:tooltips.value"),q.t("risk:tooltips.upperLimit"),+("#if (dataItem.lowerLimit != null) {#<br/>"+q.t("risk:tooltips.lowerLimit")+": #:dataItem.lowerLimit# #}#")},ht=function(t,e,n){var i,a,r,o,d,l,s;if(t){for(B.destroy(t),t.empty(),i=n.length,o=new Array(i),a=r=0,l=i-1;0<=l?r<=l:l<=r;a=0<=l?++r:--r)o[a]=1;return d={title:"",chartArea:{background:"transparent"},legend:{visible:!(s=[{name:"ok",type:"radarColumn",data:o,color:"#7cc142",opacity:.4,gap:0,spacing:0,stack:!0,zIndex:1},{name:"Warning",type:"radarColumn",data:o,color:"#f1ab15",opacity:.4,gap:0,spacing:0,stack:!0,zIndex:1},{name:"Error",type:"radarColumn",data:o,color:"#ef4f37",opacity:.4,gap:0,spacing:0,stack:!0,zIndex:1},{name:"Risk",type:"radarLine",data:n,color:"black",zIndex:10,field:"value",tooltip:{visible:!0,template:je()}}])},series:s,categoryAxis:{categories:e},valueAxis:{visible:!1,min:0,max:3,type:"arc"}},t.kendoChart(d),null}},Me=function(t,e){var n,i,a,r,o,d;return a={value:0,original:"N/A",lowerLimit:"N/A",upperLimit:"N/A"},e&&(r=e.valueLimit,d=e.lowerLimit,i=e.upperLimit,null!=d&&(a.lowerLimit=B.toString(d,"n2")),null!=i&&(a.upperLimit=B.toString(i,"n2")),null!=r&&(a.original=B.toString(r,"n2"),r<d?a.value=d?Math.max(r/d,0):0:r<i?(n=i-d,a.value=n?(r-d)/n+1:1):i?(o=(r-i)/i+2,o=Math.min(o,3),a.value=o):a.value=3)),t.push(a),t},Ke=function(t,e,n){var i,a,r,o,d,l,s,u;for((d=e.groups).length,i=[],a=[],l=0,s=d.length;l<s;l++)o=(r=d[l]).name,i.push(o),u=r.values[n],Me(a,u);return ht(t,i,a)},ze=function(t,e,n,i){var a,r,o,d,l,s,u,c,p,m,f;for(a=[],r=[],l=0,u=(p=i.rules).length;l<u;l++)for(s=0,c=(m=p[l].indicators).length;s<c;s++)33<(d=(o=m[s]).name||"?").length&&(d=d.substring(0,30),d+="..."),a.push(d),f=o.values[n],Me(r,f);return ht(t,a,r)},Qe=function(t,e,n,i){var a,r,o,d,l;if(a=t.radarElement){if(null==n&&(n=e.roots[0].nodeId),i)for(o=0,d=(l=e.groups).length;o<d;o++)if(r=l[o],Bt(r)===i)return ze(a,0,n,r),null;return Ke(a,e,n),null}},z=function(t){return B.destroy(t.hierarchyElement),t.hierarchyGrid=null,t.hierarchyElement.empty()},Y=function(t,e,n,i){var a,r,o,d,l,s,u,c,p,m,f,b,v;for(d=0,s=n.length;d<s;d++)o=n[d],p=Bt(o),a=Gt(o),v=Yt(o),r=qt(o),c=Vt(o),f=Ht(o),m=Wt(o),b=o.values[e.nodeId],e[p]=b?b[t]:null,e[a]=b?b.colorCoded:null,e[v]=b?b.lowerLimit:null,e[r]=b?b.upperLimit:null,e[c]=b?b.valueLimit:null,e[f]=b?b.missing:null,e[m]=b?b.error:null,e.label=(null!=b?b.label:void 0)||"",e.lowerLabel=(null!=b?b.lowerLabel:void 0)||"",e.upperLabel=(null!=b?b.upperLabel:void 0)||"";if(i)for(l=0,u=i.length;l<u;l++)o=i[l],p=xt(o),a=Nt(o),c=Rt(o),f=Ot(o),m=_t(o),b=o.values[e.nodeId],e[p]=b?b[t]:null,e[a]=b?b.colorCoded:null,e[c]=b?b.valueLimit:null,e[f]=b?b.missing:null,e[m]=b?b.error:null,e.trend_label=(null!=b?b.label:void 0)||"",e.trend_lowerLabel=(null!=b?b.lowerLabel:void 0)||"",e.trend_upperLabel=(null!=b?b.upperLabel:void 0)||"";return null},H=function(t,e,n,i,a,r,o,d,l,s,u){var c,p,m,f,b,v,y,h;if(m=s,(h=S.get(n.type))&&!h.isOf(E.portfolios)&&(y={id:m=++u.id,nodeId:n.nodeId,objectId:n.objectId,rootObjectId:i,name:n.name,type:n.type,parentId:s,weight:null,marketValueDelta:null},v=G.has(d,n.nodeId)?d[n.nodeId]:null,o&&v&&(y.weight=v/o),l&&v&&G.has(l,n.nodeId)&&(y.marketValueDelta=v-l[n.nodeId]),Y(t,y,a,r),e.push(y)),p=n.children)for(f=0,b=(p=G.sortBy(p,"name")).length;f<b;f++)c=p[f],H(t,e,c,i,a,r,o,d,l,m,u);return null},j=function(t,e,n,i,a,r,o){var d,l,s,u,c,p;for(d={id:0},l=0,s=n.length;l<s;l++)u=n[l],p=G.has(r,u.nodeId)?r[u.nodeId]:null,c=u.objectId,H(t,e,u,c,i,a,p,r,o,null,d);return null},Ae=function(t,e,n){var i,a,r,o,d,l,s,u;return(s=null!=(a=(d=t.overviewDetailContext).hierarchyGrid)?a.select():void 0)&&0<s.length?(u=s[0],o=a.dataItem(u.parentNode),r=u.cellIndex,i=null!=(l=a.options.columns[r])?l.field:void 0,Je(t,e,n,o,i),Qe(d,e,o.nodeId,i)):($(d),Qe(d,e)),!0},Ne=function(t,e,n,i){var a,r,o,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w;if(T=i.target,c=t.overviewDetailContext.hierarchyElement.data("kendoTreeList"),!T||!c)return"No limits";if(!(f=c.dataItem(T.closest("tr"))))return"No limits";if(m=T[0].cellIndex,!(s=null!=(o=c.options.columns[m])?o.field:void 0))return"No limits";if(w=f["warning_"+s],l=f["error_"+s],I=[],g="N/A",null!=(C=f["limit_"+s])&&(g=B.toString(C,"n2")),n&&(g+="|",g+=null!=(C=f["limit_trend_"+s])?B.toString(C,"n2"):"N/A"),I.push(q.t("risk:tooltips.value")+": "+g),null!=w&&I.push(q.t("risk:tooltips.lowerLimit")+": "+w),null!=l&&I.push(q.t("risk:tooltips.upperLimit")+": "+l),p=null!=o?o.groupId:void 0,y=f.objectId,h=f.rootObjectId,y&&h&&G.has(e,"comments")&&(u=a=function(t){return t.object===h&&t.resultObject===y&&G.isNil(t.resultRule)&&G.isNil(t.resultIndicator)},u=p?function(t){return a(t)&&t.resultGroup===p}:function(t){return a(t)&&G.isNil(t.resultGroup)},0<(d=G.filter(e.comments,u)).length))for(I.push(""),b=0,v=d.length;b<v;b++)r=d[b],I.push(r.comments);return 0<I.length?I.join("<br/>"):"No limits"},Q=function(t){var e,n;if((n=t.overviewDetailContext).hierarchyContextMenu)return e=n.hierarchyContextMenu,B.destroy(e),e.remove(),n.hierarchyContextMenu=null},Ee=function(t,e,n){var i,a,r,o,d,l,s,u,c,p;if(p=n.target,a=t.overviewDetailContext.hierarchyElement.data("kendoTreeList"),p&&a&&(l=a.dataItem(p.closest("tr"))))return d=p.cellIndex,o=(null!=(i=a.options.columns[d])?i.title:void 0)||"",r=null!=i?i.groupId:void 0,s=l.objectId,u=l.name,c=l.rootObjectId,yt(t,e,c,s,u,r,_.group,o),null},De=function(t,e){var n,i;return Q(t),i=t.overviewDetailContext,n=c("<ul>").insertAfter(i.hierarchyElement),(i.hierarchyContextMenu=n).kendoContextMenu({target:i.hierarchyElement,filter:"td",dataSource:[{text:q.t("risk:fields.comments")}],select:Ee.bind(null,t,e)}),null},Se=function(t){var e,n;return(t=N.unpack(t))?(e=null!=t?t.objectId:void 0,n=B.htmlEncode(t.name||"?"),e?"<a class='d-link' href='"+D.objectEdit(e)+"'>"+n+"</a>":n):""},$e=function(t,e,n){var i,a,r,o,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N;for(k=t.overviewDetailContext,z(k),D=e.roots,E=k.resultsType,s=k.displayMethod,v=e.groups,I=e.marketValues,o=null!=n?n.marketValues:void 0,v=G.sortBy(v,["priority","name"]),r=null!=n?n.groups:void 0,N=te(s,E),j(N,d=[],D,v,r,I,o),c={data:d,schema:{model:{id:"id",expanded:!0}}},u=new B.data.TreeListDataSource(c),i=Zt(s,E),(a=[C={field:"name",title:q.t("risk:fields.name"),template:Se}]).push(R.column({field:"weight",title:q.t("risk:fields.weight")})),l=x.column({field:"marketValueDelta",title:q.t("risk:fields.marketValueDelta")}),3===E&&a.push(l),b=[],y=0,g=v.length;y<g;y++)m=v[y],(f=i(Bt(m),m.name)).groupId=m.id,b.push(f);if(k.restricted)for(C.width=300,l.width=100,h=0,T=b.length;h<T;h++)(m=b[h]).width=150;return a.push.apply(a,b),w={dataSource:u,columns:a,selectable:"cell",change:Ae.bind(null,t,e,n),scrollable:k.restricted,pageable:V.defaultPageable()},V.withDefaults(w),(p=k.hierarchyElement).kendoTreeList(w),k.hierarchyGrid=p.data("kendoTreeList"),S={filter:"td",position:"right",content:Ne.bind(null,t,e,!!n)},p.kendoTooltip(S),De(t,e),null},Et=function(t,e,n){var i,a;return G.isNil(t)?0:(i=e.lowerLimit,a=e.upperLimit,G.isNil(i)&&G.isNil(a)?4:n?!G.isNil(a)&&a<t?1:!G.isNil(i)&&i<t?2:3:!G.isNil(i)&&t<i?1:!G.isNil(a)&&t<a?2:3)},Ze=function(t,e,n){var i,a,r,o;for(i in null==n&&(n=!1),a=Xt(e),t)o=(r=t[i])[a],r.colorCoded=Et(o,r,n),r.valueLimit=o,r.valueLimit_label=r.label||"",r.type=e,r.ascending=n;return null},tt=function(t){var e,n,i;for(n=0,i=t.length;n<i;n++)e=t[n],Ze(e.values,_.indicator,e.ascending);return null},et=function(t){var e,n,i;for(e=0,n=t.length;e<n;e++)i=t[e],Ze(i.values,_.rule),tt(i.indicators);return null},Z=function(t){var e,n,i,a;for(i=0,a=(n=t.groups).length;i<a;i++)e=n[i],Ze(e.values,_.group),et(e.rules);return null},We=function(t){var e,n,i,a;return i=t.overviewDetailContext,(n=t.model).set(nn,!1),a=i.results,e=i.compareResults,a?($e(t,a,e),Qe(i,a),He(i,a),Ye(i,a),n.set(an,!0)):n.set(an,!1),null},Ct=function(t){var e;return e={dataURI:t,fileName:"risk.pdf"},B.saveAs(e)},It=function(t){var e;return e={paperSize:"auto",margin:{left:"1cm",top:"1cm",right:"1cm",bottom:"1cm"}},B.drawing.exportPDF(t,e)},Tt=function(){return B.drawing.drawDOM(c("#riskOverviewExport")).then(It).done(Ct)},Re=function(t,e){var n;return(n=t.overviewDetailContext).displayMethod!==e&&(U.setObject(en,e),n.displayMethod=e,We(t)),!0},Ue=function(t){return Re(t,1)},_e=function(t){return Re(t,2)},Oe=function(t){return Re(t,3)},xe=function(t){var e,n,i,a;return n=t.overviewDetailContext.displayMethod,i=c("#riskOverviewResultToolbar"),e="displayGroup",a={items:[{type:"buttonGroup",buttons:[{text:q.t("risk:displayMethods.VALUE"),togglable:!0,selected:1===n,group:e,primary:!0,toggle:Ue.bind(null,t)},{text:q.t("risk:displayMethods.COLOR"),togglable:!0,selected:2===n,group:e,primary:!0,toggle:_e.bind(null,t)},{text:q.t("risk:displayMethods.INITIAL"),togglable:!0,selected:3===n,group:e,primary:!0,toggle:Oe.bind(null,t)}]},{type:"button",text:q.t("site:export.PDF"),click:Tt}]},i.kendoToolBar(a),null},Fe=function(t,e){var n;return(n=t.data.context).overviewDetailContext.resultsType=1,gt(n,e),null},Pe=function(t,e,n){var i;return(i=t.data.context).overviewDetailContext.resultsType=2,gt(i,e,n),null},Le=function(t,e,n){var i;return(i=t.data.context).overviewDetailContext.resultsType=3,gt(i,e,n),null},J=function(t){var e;return e={context:t},c("body").on("domos:risk:overview:results:normal",e,Fe),c("body").on("domos:risk:overview:results:trend",e,Pe),c("body").on("domos:risk:overview:results:stress",e,Le)},at=function(){var t,e;return t=1,(e=U.getObject(en))&&G.isNumber(e)&&(t=e),{restricted:!1,displayMethod:t,resultsType:1,radarElement:c("#riskOverviewReportChart"),hierarchyElement:c("#riskOverviewHierarchy"),cashFlowElement:c("#riskOverviewCashFlowChart"),detailElement:c("#riskOverviewDetails"),commentsElement:c("#riskOverviewComments")}},{displayResults:gt=function(t,e,n){var i;return i=t.overviewDetailContext,e&&Z(e),n&&Z(n),i.results=e,i.compareResults=n,We(t)},updateRawModel:function(t,e){return e[an]=!1,e[nn]=!1},init:function(t){var e;return e=at(),t.overviewDetailContext=e,xe(t),J(t),null}}})}.call(this),define("core/api/DashboardDebtFrequency",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardDebtFrequency=void 0;var r,o;(r=e.DashboardDebtFrequency||(e.DashboardDebtFrequency={}))[r.WEEKLY=1]="WEEKLY",r[r.MONTHLY=2]="MONTHLY",r[r.QUARTERLY=3]="QUARTERLY",r[r.SEMI_ANNUALLY=4]="SEMI_ANNUALLY",r[r.ANNUALLY=5]="ANNUALLY",(o=e.DashboardDebtFrequency||(e.DashboardDebtFrequency={})).getName=a.EnumUtils.createNameFn("dashboards:dashboardDebtFrequency",o),o.widget=i.EnumWidgetUtils.createDropList("DomosDashboardDebtFrequency",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/ui/YearUI",["require","exports","tslib","lodash","kendo","../util/DateUtils","./widget/Plugin","./grid/column/ColumnUtils","./grid/column/ColumnStyle"],function(t,e,n,a,i,r,o,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.YearUI=void 0;var s,u;function c(t,e){return t.kendoDomosYear(e)}s={name:"DomosYear",start:"decade",depth:"decade",format:"yyyy"},u=function(i){function t(t,e){return i.call(this,t,e)||this}return n.__extends(t,i),t.prototype.value=function(t){if(a.isUndefined(t)){var e=i.prototype.value.call(this),n=r.DateUtils.toDate(e);return n?n.getFullYear():null}if(a.isNull(t))i.prototype.value.call(this,null);else if(a.isNumber(t)){e=new Date(t,7,1);i.prototype.value.call(this,e)}else{e=new Date(t);i.prototype.value.call(this,e)}},t}(i.ui.DatePicker),o.Plugin.plugin(u,i.ui.DatePicker,s);var p=function(){function t(){}return t.widget=function(t,e){return c(t,e)},t.column=function(t){return d.ColumnUtils.addFormat(t,"{0:####}",l.ColumnStyle.RIGHT_ALIGNED),d.ColumnUtils.addEditor(t,function(t){return c(t)})},t}();e.YearUI=p}),define("display/component/DisplayTableComponent",["require","exports","jquery","lodash","i18n"],function(t,e,l,n,i){"use strict";function o(t){if(t)return"#"+t}function a(t,e,n){if(n.size){var i=n.size+"pt solid",a=o(n.color);a&&(i+=" "+a),t["border-"+e]=i}}function d(t,e){a(t,"top",e.borderTop),a(t,"bottom",e.borderBottom),a(t,"left",e.borderStart),a(t,"right",e.borderEnd)}function s(t,e,n){n&&(t["padding-"+e]=n+"pt")}function u(t){var e={};t.bold&&(e["font-weight"]="bold"),t.italic&&(e["font-style"]="italic");var n=o(t.background);n&&(e["background-color"]=n);var i,a,r=o(t.foreground);return r&&(e.color=r),t.fontSize&&(e["font-size"]=t.fontSize+"em"),d(e,t),s(i=e,"top",(a=t).marginTop),s(i,"bottom",a.marginBottom),s(i,"left",a.marginStart),s(i,"right",a.marginEnd),function(t,e){var n=function(t){if(t)switch(t){case 2:return"center";case 1:return"left";case 3:return"right";default:return}}(e.hAlign);n&&(t["text-align"]=n);var i=function(t){if(t)switch(t){case 1:return"top";case 2:return"middle";case 3:return"bottom";default:return}}(e.vAlign);i&&(t["vertical-align"]=i)}(e,t),e}function r(t,e){for(var n,i,a=l("<tr>").appendTo(t),r=0,o=e.cells;r<o.length;r++){var d=o[r];n=a,i=d,l("<td>").css(u(i)).text(i.text).appendTo(n)}}function c(t){return{value:n.isNil(t.date)?n.isNil(t.number)?t.text:t.number:t.date,bold:t.bold,italic:t.italic,background:o(t.background),color:o(t.foreground)}}function p(t,a){var e=l("<button>").addClass("k-button").appendTo(t);l("<span>").addClass("k-icon").addClass("k-i-excel").appendTo(e),l("<span>").text(i.I18N.t("site:export.excel")).appendTo(e),e.click(function(t){return n={title:"Sheet1",columns:(e=a).weights.map(function(t){return 1e3*t}).map(function(t){return{width:t}}),rows:e.rows.map(function(t){return{cells:t.cells.map(c)}})},i=new kendo.ooxml.Workbook({sheets:[n]}),void kendo.saveAs({dataURI:i.toDataURL(),fileName:"Export.xlsx"});var e,n,i})}Object.defineProperty(e,"__esModule",{value:!0}),e.DisplayTableComponent=void 0;var m=function(){function t(){}return t.display=function(t,e){if(e&&!(e.columnCount<=0)){p(l("<p>").appendTo(t),e);var n,i,a=l("<table>").css((n=e,i={width:"100%","table-layout":"fixed","border-collapse":"collapse"},d(i,n),i)).appendTo(t);!function(t,e){for(var n=l("<colgroup>").appendTo(t),i=0,a=e.weights;i<a.length;i++){var r=100*a[i]+"%";l("<col>").css({width:r}).appendTo(n)}}(a,e),function(t,e){for(var n=0,i=e.rows;n<i.length;n++)r(t,i[n])}(a,e)}},t}();e.DisplayTableComponent=m}),define("display/data/DTable",["require","exports"],function(t,e){"use strict";var n,i;Object.defineProperty(e,"__esModule",{value:!0}),e.DTableColumnNumberVariant=e.DTableColumnType=void 0,(n=e.DTableColumnType||(e.DTableColumnType={}))[n.GROUP=1]="GROUP",n[n.STRING=2]="STRING",n[n.BOOLEAN=3]="BOOLEAN",n[n.NUMBER=4]="NUMBER",n[n.LOCAL_DATE=5]="LOCAL_DATE",n[n.LOCAL_DATE_TIME=6]="LOCAL_DATE_TIME",(i=e.DTableColumnNumberVariant||(e.DTableColumnNumberVariant={}))[i.STANDARD=0]="STANDARD",i[i.PERCENT=1]="PERCENT",i[i.MULTIPLE=2]="MULTIPLE"}),define("display/component/DTableComponent",["require","exports","lodash","core/ui/DateTimeUI","core/ui/DateUI","core/ui/NumberUI","display/data/DTable","core/ui/grid/GridUtils"],function(t,e,u,c,p,m,f,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DTableComponent=void 0;var b=function(t,e){if(e){var n=e.title;if(e.type===f.DTableColumnType.GROUP){var i=[];return e.columns.map(function(t){return b(i,t)}),void(0<i.length&&t.push({title:n,columns:i}))}var a=e.width,r=e.field;if(r){var o,d,l,s={field:r,title:n,width:a};switch(e.type){case f.DTableColumnType.LOCAL_DATE:t.push(p.DateUI.column(s));break;case f.DTableColumnType.LOCAL_DATE_TIME:t.push(c.DateTimeUI.column(s));break;case f.DTableColumnType.NUMBER:s.format=(o=e,d=u.isNil(o.decimals)?"":""+Math.max(o.decimals,0),"{0:"+((l=o.variant||f.DTableColumnNumberVariant.STANDARD)===f.DTableColumnNumberVariant.PERCENT?"p":"n")+d+"}"+(l===f.DTableColumnNumberVariant.MULTIPLE?"x":"")),t.push(m.NumberUI.column(s));break;case f.DTableColumnType.STRING:case f.DTableColumnType.BOOLEAN:t.push(s)}}}},n=function(){function t(){}return t.display=function(t,e){if(e){var n=function(t){for(var e=[],n=0,i=t.columns;n<i.length;n++){var a=i[n];b(e,a)}return e}(e);if(!(n.length<=0)){var i={data:e.rows,sort:e.sorts},a=r.GridUtils.withDefaults({dataSource:i,columns:n,pageable:r.GridUtils.defaultPageable(),scrollable:!0,editable:!1,height:730,toolbar:[{name:"excel"}]});t.kendoGrid(a)}}},t}();e.DTableComponent=n}),define("compliance/data/ComplianceOverviewStatus",["require","exports","core/util/EnumUtils"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceOverviewStatus=void 0;var i,a;(i=e.ComplianceOverviewStatus||(e.ComplianceOverviewStatus={}))[i.NOT_STARTED=1]="NOT_STARTED",i[i.IN_PROGRESS=2]="IN_PROGRESS",i[i.DONE=3]="DONE",i[i.ABORTED=4]="ABORTED",(a=e.ComplianceOverviewStatus||(e.ComplianceOverviewStatus={})).getName=n.EnumUtils.createNameFn("compliance:ComplianceOverviewStatus",a)}),define("compliance/web/ComplianceMap",["require","exports","core/data/SiteCategories","core/web/WebLocation","core/web/UrlBuilder"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceMap=void 0;var r=function(){function t(){}return t.form=function(t){return a.UrlBuilder.from("compliance/form/edit").add("id",t).build()},t.formCheckItem=function(t){return a.UrlBuilder.from("compliance/form/check.list/edit").add("id",t).build()},t.checkItem=function(t){return a.UrlBuilder.from("compliance/check.list/edit").add("id",t).build()},t.task=function(t){return a.UrlBuilder.from("compliance/task/edit").add("id",t).build()},t.keyIndicator=function(t){return a.UrlBuilder.from("compliance/kci/edit").add("id",t).build()},t.plan=function(t){return a.UrlBuilder.from("compliance/plan/edit").add("id",t).build()},t.checkListDocumentUpload=function(t,e){return a.UrlBuilder.from("compliance/check/document/upload.json").add("task",t).add("id",e).build()},t.performanceProfile=function(t){return a.UrlBuilder.from("compliance/performance/profile/edit").add("id",t).build()},t.documentReviewTask=function(t){return a.UrlBuilder.from("document/review/task/edit").add("id",t).build()},t.formCheckList=i.WebLocation.resolve("compliance/form/check.list"),t.checkList=i.WebLocation.resolve("compliance/check.list"),t.tasks=i.WebLocation.resolve("compliance/tasks"),t.keyIndicators=i.WebLocation.resolve("compliance/kci"),t.plans=i.WebLocation.resolve("compliance/plans"),t.tags=i.WebLocation.resolve("compliance/tags"),t.forms=i.WebLocation.resolve("compliance/forms"),t.workflows=i.WebLocation.resolve("compliance/workflows"),t.performanceProfiles=i.WebLocation.resolve("compliance/performance/profiles"),t.importing=i.WebLocation.resolve("compliance/importing"),t.main=n.SiteCategories.compliance.url,t.overview=t.main,t.production=i.WebLocation.resolve("compliance/production"),t.setup=t.plans,t.documentsReviewTasks=i.WebLocation.resolve("document/review/tasks"),t.documentsReviewProduction=i.WebLocation.resolve("document/review/production"),t.documentsReviewDocuments=i.WebLocation.resolve("document/review/documents"),t.documentsReviewWorkflows=i.WebLocation.resolve("document/review/workflows"),t.documentsReview=t.documentsReviewProduction,t.amlCheck=i.WebLocation.resolve("compliance/aml/check"),t.amlTrackedEntities=i.WebLocation.resolve("compliance/aml/tracked"),t.amlHits=i.WebLocation.resolve("compliance/aml/hits"),t.antiMoneyLaundering=t.amlCheck,t.importingUpload=i.WebLocation.resolve("compliance/importing/upload"),t.importingAmlUpload=i.WebLocation.resolve("compliance/importing/aml/upload"),t}();e.ComplianceMap=r}),define("compliance/views/overview/ComplianceOverviewTreeData",["require","exports","lodash","compliance/data/ComplianceOverviewStatus","core/util/DateUtils","compliance/web/ComplianceMap","i18n","object/web/ObjectMap"],function(t,e,u,n,c,d,i,a){"use strict";function p(t){switch(t){case n.ComplianceOverviewStatus.IN_PROGRESS:return 4;case n.ComplianceOverviewStatus.ABORTED:return 3;case n.ComplianceOverviewStatus.DONE:return 2;case n.ComplianceOverviewStatus.NOT_STARTED:default:return 1}}function m(t,e){return t===e?t:""}function f(t,e){return t===e?t:null}function r(t,e){return{status:(l=t.status,s=e.status,p(l)>=p(s)?l:s),customStatus:(o=t.customStatus,d=e.customStatus,o===d?o:""),customStatusOk:(a=t.customStatusOk,r=e.customStatusOk,!1!==a&&!1!==r&&(!u.isNil(a)&&!u.isNil(r)||null)),actionPlan:m(t.actionPlan,e.actionPlan),comments:m(t.comments,e.comments),workflowId:f(t.workflowId,e.workflowId),startDate:c.DateUtils.min(t.startDate,e.startDate),endDate:c.DateUtils.max(t.endDate,e.endDate),nextDate:c.DateUtils.min(t.nextDate,e.nextDate),dueDate:c.DateUtils.min(t.dueDate,e.dueDate),acceptanceDate:(n=t.acceptanceDate,i=e.acceptanceDate,u.isNil(n)||u.isNil(i)?null:n.getTime()===i.getTime()?n:null),hasCheckList:t.hasCheckList&&e.hasCheckList,checkList:f(t.checkList,e.checkList),hasForm:t.hasForm&&e.hasForm,form:f(t.form,e.form)};var n,i,a,r,o,d,l,s}function o(t,e){var n,i,a={supplier:t.supplier,dueDiligence:r(t.dueDiligence,e.dueDiligence),review:r(t.review,e.review),onSite:r(t.onSite,e.onSite),checkName:(n=t.checkName,i=e.checkName,null===n||null===i?null:u.isEmpty(u.differenceWith(n,i,u.isEqual))?n:null)};return t.supplier.id!==e.supplier.id&&(a.supplier={id:0,name:""}),a}Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceOverviewTreeData=void 0;var l=function(){function t(){this.supplier=null}return t.prototype.merge=function(t){t&&(this.supplier?this.supplier=o(this.supplier,t):this.supplier=t)},t.prototype.get=function(){return this.supplier},t.prototype.writeTo=function(t){var e=this.supplier;return e?(e.supplier.id&&(t.supplier=e.supplier.name,t.supplierUrl=a.ObjectMap.objectEdit(e.supplier.id)),t.dueDiligence=e.dueDiligence,t.review=e.review,t.onSite=e.onSite,t.checkName=e.checkName,e):null},t}(),s=function(){function r(){this.rows=[],this.id=0}return r.toData=function(t){for(var e=new r,n=0,i=t.plans;n<i.length;n++){var a=i[n];e.add(a)}return e.rows},r.prototype.add=function(t){var e=this.newRow(1);e.expanded=!0,e.name=t.plan.name,e.url=d.ComplianceMap.plan(t.plan.id);for(var n=new l,i=0,a=t.keyIndicators;i<a.length;i++){var r=a[i];n.merge(this.addKci(r,e.id))}n.writeTo(e)},r.prototype.addKci=function(t,e){var n=this.newRow(2,e);n.name=t.keyIndicator.name,n.url=d.ComplianceMap.keyIndicator(t.keyIndicator.id);for(var i=new l,a=0,r=t.tasks;a<r.length;a++){var o=r[a];i.merge(this.addTask(o,n.id))}return i.writeTo(n)},r.prototype.addTask=function(t,e){var n=this.newRow(3,e);n.name=t.task.name,n.url=d.ComplianceMap.task(t.task.id);var i=new l;if(1===t.suppliers.length){var a=t.suppliers[0];i.merge(a),this.addCheckList(a,n.id),this.addForm(a,n.id)}else for(var r=0,o=t.suppliers;r<o.length;r++){a=o[r];i.merge(this.addSupplier(a,n.id))}return i.writeTo(n)},r.prototype.addSupplier=function(t,e){var n=this.newRow(4,e);return n.name=t.supplier.name,n.url=a.ObjectMap.objectEdit(t.supplier.id),n.supplier=n.name,n.supplierUrl=n.url,n.dueDiligence=t.dueDiligence,n.review=t.review,n.onSite=t.onSite,n.checkName=t.checkName,this.addCheckList(t,n.id),this.addForm(t,n.id),t},r.prototype.addCheckList=function(t,e){if(t.dueDiligence.hasCheckList||t.review.hasCheckList||t.onSite.hasCheckList){var n=this.newRow(5,e);n.name=i.I18N.t("compliance:overview.checkList"),n.supplier=t.supplier.name,n.supplierUrl=a.ObjectMap.objectEdit(t.supplier.id),n.dueDiligence=t.dueDiligence,n.review=t.review,n.onSite=t.onSite,n.checkName=t.checkName}},r.prototype.addForm=function(t,e){if(t.dueDiligence.hasForm||t.review.hasForm||t.onSite.hasForm){var n=this.newRow(6,e);n.name=i.I18N.t("compliance:overview.form"),n.supplier=t.supplier.name,n.supplierUrl=a.ObjectMap.objectEdit(t.supplier.id),n.dueDiligence=t.dueDiligence,n.review=t.review,n.onSite=t.onSite,n.checkName=t.checkName}},r.prototype.newRow=function(t,e){var n={id:++this.id,parentId:e||null,expanded:!1,type:t,name:"",url:null,supplier:null,supplierUrl:null,dueDiligence:null,review:null,onSite:null,checkName:null};return this.rows.push(n),n},r}();e.ComplianceOverviewTreeData=s}),define("compliance/data/ComplianceFormRating",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormRating=void 0;var r,o;(o=r=e.ComplianceFormRating||(e.ComplianceFormRating={}))[o.VERY_BAD=1]="VERY_BAD",o[o.BAD=2]="BAD",o[o.NORMAL=3]="NORMAL",o[o.GOOD=4]="GOOD",o[o.VERY_GOOD=5]="VERY_GOOD";var d,l=1e-6+(r.VERY_BAD+r.BAD)/2,s=1e-6+(r.BAD+r.NORMAL)/2,u=1e-6+(r.NORMAL+r.GOOD)/2,c=1e-6+(r.GOOD+r.VERY_GOOD)/2;(d=r=e.ComplianceFormRating||(e.ComplianceFormRating={})).getName=a.EnumUtils.createNameFn("compliance:ComplianceFormRating",d),d.widget=i.EnumWidgetUtils.createDropList("DomosComplianceFormRating",d,!1,!0),d.column=n.EnumColumnUtils.createFactory(d,d.widget),d.getRatingEnum=function(t){if(t&&!isNaN(t))return t<=l?d.VERY_BAD:t<=s?d.BAD:t<=u?d.NORMAL:t<=c?d.GOOD:d.VERY_GOOD}}),define("compliance/views/util/ComplianceViewUtil",["require","exports","lodash"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceViewUtil=void 0;var i="complianceOk",a="complianceError",r=function(){function t(){}return t.getCss=function(t){return n.isNil(t)?"":t?i:a},t.CSS_OK=i,t.CSS_ERROR=a,t.CSS_NORMAL="",t}();e.ComplianceViewUtil=r}),define("compliance/repository/AmlRepository",["require","exports","core/web/WebHttp","core/util/PromiseUtils"],function(t,e,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AmlRepository=void 0;var n=function(){function t(){}return t.checkName=function(t,e,n){if(""===t.name)return r.PromiseUtils.asPromise(function(){return[]});var i={data:JSON.stringify(t),workflowId:e};return a.WebHttp.postJson("compliance/aml/checkName.json",i,n)},t.updateHits=function(t,e){var n={data:JSON.stringify(t),workflowId:e};return a.WebHttp.postJson("compliance/aml/hits.json",n)},t.checkPersonExtended=function(t,e,n){if(""===t.name)return r.PromiseUtils.asPromise(function(){return[]});var i={data:JSON.stringify(t),workflowId:e};return a.WebHttp.postJson("compliance/aml/checkPersonExtended.json",i,n)},t.updateNews=function(t,e){var n={data:JSON.stringify(t),workflowId:e};return a.WebHttp.postJson("compliance/aml/news.json",n)},t.saveTrackingHit=function(t,e){var n={data:JSON.stringify(t)};return a.WebHttp.postJson("compliance/aml/trackingHit.json",n,e)},t.saveTrackingComments=function(t,e){var n={data:JSON.stringify(t)};return a.WebHttp.postJson("compliance/aml/trackingHitComments.json",n,e)},t.saveTrackingNews=function(t,e){var n={data:JSON.stringify(t)};return a.WebHttp.postJson("compliance/aml/trackingNews.json",n,e)},t.saveTrackingNewsComments=function(t,e){var n={data:JSON.stringify(t)};return a.WebHttp.postJson("compliance/aml/trackingNewsComments.json",n,e)},t.deleteTrackedHit=function(t){return a.WebHttp.destroyJson("compliance/aml/trackingHit.json",{id:t})},t.deleteTrackedNews=function(t){return a.WebHttp.destroyJson("compliance/aml/trackingNews.json",{id:t})},t.listTrackingHits=function(t,e){return a.WebHttp.getJson("compliance/aml/trackingHits/list.json",{trackedObjectId:t},e)},t.listTrackingHitsForRequests=function(t,e){return a.WebHttp.getJson("compliance/aml/trackingHits/list.json",{requestIds:JSON.stringify(t)},e)},t.listTrackingNews=function(t,e){return a.WebHttp.getJson("compliance/aml/trackingNews/list.json",{trackedObjectId:t},e)},t.listTrackingNewsForRequests=function(t,e){return a.WebHttp.getJson("compliance/aml/trackingNews/list.json",{requestIds:JSON.stringify(t)},e)},t.getRequestParameters=function(t,e){return a.WebHttp.getJson("compliance/aml/request.json",{trackedObjectId:t},e)},t.listTrackedEntities=function(t,e){return a.WebHttp.getJson("compliance/aml/trackedEntity/list.json",{entityId:t},e)},t.periodicalCheck=function(t,e,n){return a.WebHttp.postJson("compliance/aml/periodicalCheck.json",{requestId:t,activate:e},n)},t.stopTrackingEntity=function(t,e){return a.WebHttp.postJson("compliance/aml/trackedEntity.json",{requestId:t},e)},t}();e.AmlRepository=n}),define("compliance/data/aml/AmlHitType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AmlHitType=void 0;var r,o;(r=e.AmlHitType||(e.AmlHitType={}))[r.UNKNOWN=1]="UNKNOWN",r[r.SANCTION=2]="SANCTION",r[r.PEPS=3]="PEPS",r[r.INTERPOL=4]="INTERPOL",(o=e.AmlHitType||(e.AmlHitType={})).getName=a.EnumUtils.createNameFn("compliance:aml.AmlHitType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAmlHitType",o,!1,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("lp/repository/LpEquityRepository",["require","exports","tslib","lodash","core/web/WebHttp"],function(t,e,d,l,s){"use strict";function n(t){t.lastCallDate&&(t.lastCallDate=new Date(t.lastCallDate)),t.lastDistributionDate&&(t.lastDistributionDate=new Date(t.lastDistributionDate))}function u(t){n(t),t.partnerValues.forEach(n)}Object.defineProperty(e,"__esModule",{value:!0}),e.LpEquityRepository=void 0;var i=function(){function t(){}return t.compute=function(i,a,r,o){return d.__awaiter(this,void 0,void 0,function(){var e,n;return d.__generator(this,function(t){switch(t.label){case 0:return a=l.isDate(a)?a.toJSON():a,e={vehicle:i,date:a,capitalCalls:JSON.stringify(r),distributions:JSON.stringify(o)},[4,s.WebHttp.postJson("lp/equity/engine.json",e)];case 1:return(n=t.sent()).forEach(u),[2,n]}})})},t.closingDates=function(n,i){return d.__awaiter(this,void 0,void 0,function(){var e;return d.__generator(this,function(t){switch(t.label){case 0:return i=l.isDate(i)?i.toJSON():i,e={vehicle:n,date:i},[4,s.WebHttp.getJson("lp/closing.date/list.json",e)];case 1:return[2,t.sent().map(function(t){return t?new Date(t):t})]}})})},t.capitalCalls=function(n){return d.__awaiter(this,void 0,void 0,function(){var e;return d.__generator(this,function(t){switch(t.label){case 0:return e={vehicle:n},[4,s.WebHttp.getJson("lp/capitalCall/list.json",e)];case 1:return[2,t.sent()]}})})},t.distributions=function(n){return d.__awaiter(this,void 0,void 0,function(){var e;return d.__generator(this,function(t){switch(t.label){case 0:return e={vehicle:n},[4,s.WebHttp.getJson("lp/distribution/list.json",e)];case 1:return[2,t.sent()]}})})},t.commitment=function(n,i){return d.__awaiter(this,void 0,void 0,function(){var e;return d.__generator(this,function(t){switch(t.label){case 0:return e={vehicle:n,investor:i},[4,s.WebHttp.getJson("lp/commitment/list.json",e)];case 1:return[2,t.sent()]}})})},t.save=function(t,e,n,i){var a={vehicle:t,date:e=l.isDate(e)?e.toJSON():e,capitalCalls:JSON.stringify(n),distributions:JSON.stringify(i)};return s.WebHttp.postJson("lp/equity/save.json",a)},t}();e.LpEquityRepository=i}),define("object/data/ShareClassType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShareClassType=void 0;var r,o;(r=e.ShareClassType||(e.ShareClassType={}))[r.STANDARD=1]="STANDARD",r[r.GLOBAL_CARRIED=2]="GLOBAL_CARRIED",r[r.LP_CARRIED=3]="LP_CARRIED",r[r.GOLDEN_SHARE=4]="GOLDEN_SHARE",(o=e.ShareClassType||(e.ShareClassType={})).getName=n.EnumUtils.createNameFn("data:ShareClassType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosShareClassType",o,!1),o.column=a.EnumColumnUtils.createFactory(o,o.widget)}),define("object/ui/VehicleUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","object/repository/ObjectRepository","lp/repository/LpEquityRepository","./ObjectUtilsUI","core/web/WebLocation","core/util/ObservableUtils","object/data/ShareClassType"],function(t,e,d,l,s,u,n,i,o,c){"use strict";function p(e,t){var n={autoWidth:!0,dataSource:{transport:{read:function(t){u.LpEquityRepository.capitalCalls(e).then(function(t){return t.map(function(t){return{id:t.id,name:(e=t,kendo.toString(e.date,"d")+" "+e.amount),vehicle:t.vehicle,vehicleCurrencyId:t.vehicleCurrencyId,lp:t.lp,subscription:t.subscription,date:t.date,amount:t.amount,currency:t.currency,comments:t.comments,closingDate:t.closingDate,reason:t.reason,partnerEntity:t.partnerEntity,premium:t.premium,capitalCall:t.capitalCall,fundShare:t.fundShare,capitalCallMethodology:t.capitalCallMethodology,splitList:t.splitList};var e})}).then(t.success).catch(t.error)}},schema:{model:{id:"id",fields:{id:{type:"number"},name:{type:"string"},vehicle:{type:"number"},lp:{type:"boolean"},subscription:{type:"number"},date:{type:"date"},amount:{type:"number"},currency:{type:"number"},comments:{type:"string"},closingDate:{type:"date"},reason:{nullable:!1},partnerEntity:{nullable:!0},premium:{type:"number"},capitalCall:{nullable:!0},fundShare:{nullable:!0},capitalCallMethodology:{nullable:!1}}}}},dataTextField:"name",dataValueField:"id",optionLabel:"--"};return t.kendoDropDownList(n)}function m(e,t){var n={autoWidth:!0,dataSource:{transport:{read:function(t){u.LpEquityRepository.distributions(e).then(function(t){return t.map(function(t){return{id:t.id,name:(e=t,""+kendo.toString(e.date,"d")),vehicle:t.vehicle,type:t.type,subscription:t.subscription,date:t.date,quantity:t.quantity,amount:t.amount,currency:t.currency,comments:t.comments,calculationDate:t.calculationDate,partnerEntity:t.partnerEntity,recallable:t.recallable,pledged:t.recallable,reservce:t.reservce,redemption:t.redemption};var e})}).then(t.success).catch(t.error)}},schema:{model:{id:"id",fields:{id:{type:"number"},type:{nullable:!1},vehicle:{type:"number"},subscription:{type:"number",nullable:!0},date:{type:"date"},quantity:{type:"number"},amount:{type:"number"},currency:{type:"number"},comments:{type:"string"},calculationDate:{type:"date",nullable:!0},partnerEntity:{nullable:!0},recallable:{type:"number"},pledged:{type:"number"},reservce:{type:"number"},redemption:{type:"number",nullable:!0}}}}},dataTextField:"name",dataValueField:"id",optionLabel:"--"};return t.kendoDropDownList(n)}function f(t){return i.WebLocation.resolveKendo("/object/edit/"+t)}var a,r,b,v,y;Object.defineProperty(e,"__esModule",{value:!0}),e.VehicleUI=void 0,e.VehicleUI=(a=n.ObjectUtilsUI.create("DomosVehicle",s.ObjectRepository.fetchVehicleIdentifiables),r=n.ObjectUtilsUI.create("DomosVehiclePere",s.ObjectRepository.fetchVehiclePereIdentifiables),b=n.ObjectUtilsUI.create("DomosVehiclePereL1",s.ObjectRepository.fetchVehiclePereL1Identifiables),v=n.ObjectUtilsUI.create("DomosVehicleMaster",s.ObjectRepository.fetchVehicleMasterIdentifiables),y=n.ObjectUtilsUI.create("DomosVehicleL1",s.ObjectRepository.fetchL1VehicleIdentifiables),{widget:a.widget,column:a.column,Master:v,PERE:r,PEREL1:b,L1:y,with:function(a,r){var t=function(t){return d.IdWidgetUtils.widget(function(){return s.ObjectRepository.fetchVehicleFundShareIdentifiables(a)},t)},e=function(t){return d.IdWidgetUtils.widget(function(){return s.ObjectRepository.fetchVehicleFundShareIdentifiables(a,c.ShareClassType.STANDARD)},t)},n=function(t){return e=a,n=r,i={autoWidth:!0,dataSource:{transport:{read:function(t){u.LpEquityRepository.closingDates(e,n).then(function(t){return t.map(function(t){return{id:t,name:kendo.toString(t,"d")}})}).then(t.success).catch(t.error)}},schema:{model:{id:"id",fields:{id:{type:"date"},name:{type:"string"}}}}},dataTextField:"name",dataValueField:"id",valuePrimitive:!0,optionLabel:"--"},t.kendoDropDownList(i);var e,n,i},i=function(t){return p(a,t)},o=function(t){return m(a,t)};return{fundShares:{widget:t,column:l.IdentifiableColumnUtils.createFactory(t,f)},fundStandardShares:{widget:e,column:l.IdentifiableColumnUtils.createFactory(e,f)},closingDates:{widget:n,column:l.IdentifiableColumnUtils.createFactory(n)},capitalCalls:{widget:i,column:l.IdentifiableColumnUtils.createFactory(i)},distributions:{widget:o,column:l.IdentifiableColumnUtils.createFactory(o)}}},withInvestor:function(a,r){var t=function(t){return e=a,n=r,i={autoWidth:!0,dataSource:{transport:{read:function(t){u.LpEquityRepository.commitment(e,n).then(function(t){return t.map(function(t){return{id:t.id,name:(e=t,n=e.investorEntity,n?n.name+" "+e.amount:"Undefined"),amount:t.amount,date:t.date,comments:t.comments,closingDate:t.closingDate,reference:t.reference,unavailabilityInYears:t.unavailabilityInYears,fundShare:t.fundShare,commitment:t.commitment};var e,n})}).then(t.success).catch(t.error)}},schema:{model:{id:"id",fields:{id:{type:"number"},name:function(){return o.ObservableUtils.get(this,"fundShare.name")||""},amount:{type:"number"},date:{type:"date"},comments:{type:"string"},closingDate:{type:"date"},reference:{type:"string"},unavailabilityInYears:{type:"number"},fundShare:{nullable:!0},commitment:{nullable:!0}}}}},dataTextField:"name",dataValueField:"id",optionLabel:"--"},t.kendoDropDownList(i);var e,n,i};return{commitments:{widget:t,column:l.IdentifiableColumnUtils.createFactory(t)}}}})}),define("object/ui/LegalUI",["require","exports","object/repository/ObjectRepository","./ObjectUtilsUI","./VehicleUI"],function(t,e,n,i,a){"use strict";var r,o,d;Object.defineProperty(e,"__esModule",{value:!0}),e.LegalUI=void 0,e.LegalUI=(r=i.ObjectUtilsUI.create("DomosLegalPerson",n.ObjectRepository.fetchLegalPersonIdentifiables),o=i.ObjectUtilsUI.create("DomosLegalExtended",n.ObjectRepository.fetchLegalExtendedIdentifiables),d=a.VehicleUI,{widget:r.widget,column:r.column,Extended:o,Vehicle:d})}),define("object/ui/IndividualUI",["require","exports","./ObjectUtilsUI","../repository/ObjectRepository","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","core/web/WebLocation"],function(t,e,n,i,a,r,o){"use strict";function d(t){return o.WebLocation.resolveKendo("/object/edit/"+t)}var l;Object.defineProperty(e,"__esModule",{value:!0}),e.IndividualUI=void 0,e.IndividualUI={widget:(l=n.ObjectUtilsUI.create("DomosIndividual",i.ObjectRepository.fetchIndividualIdentifiables)).widget,column:l.column,exclude:function(e){var t=function(t){return a.IdWidgetUtils.widget(function(){return i.ObjectRepository.fetchAndExcludeCurrentIdentifiables(e)},t)};return{column:r.IdentifiableColumnUtils.createFactory(t,d),widget:t}}}}),define("object/ui/EntityUI",["require","exports","object/repository/ObjectRepository","./ObjectUtilsUI","./LegalUI","./IndividualUI"],function(t,e,n,i,a,r){"use strict";var o,d,l,s,u;Object.defineProperty(e,"__esModule",{value:!0}),e.EntityUI=void 0,e.EntityUI=(o=i.ObjectUtilsUI.create("DomosEntity",n.ObjectRepository.fetchEntityIdentifiables),d=i.ObjectUtilsUI.create("DomosEntityInvestor",n.ObjectRepository.fetchEntityInvestorIdentifiables),l=i.ObjectUtilsUI.create("DomosEntityExtended",n.ObjectRepository.fetchEntityExtendedIdentifiables),s=r.IndividualUI,u=a.LegalUI,{widget:o.widget,column:o.column,Investor:d,Extended:l,Individual:s,Legal:u})}),define("text!templates/compliance/compliance.aml.trackingHits.grid.toolbar.html",[],function(){return'<div class="k-header k-grid-toolbar">\n    <a href="javascript:void(0)" class="k-button k-button-icontext k-grid-save-changes" data-bind="click: saveChanges, enabled: hasChanges">\n        <span class="k-icon k-i-check"></span>\n        #=$.t("compliance:aml.grids.actions.saveChanges")#\n    </a>\n    <a href="javascript:void(0)" class="k-button k-button-icontext k-grid-cancel-changes" data-bind="click: cancelChanges, enabled: hasChanges">\n        <span class="k-icon k-i-cancel"></span>\n        #=$.t("compliance:aml.grids.actions.cancelChanges")#\n    </a>\n    <a class="k-button" data-bind="click: delete, enabled: isSelected">\n        <span class="k-icon k-i-close"></span>\n        #=$.t("compliance:aml.trackedHitsGrid.delete")#\n    </a>\n    <a class="k-button" data-bind="click: exportAsExcel, enabled: hasData">\n        <span class="k-icon k-i-excel"></span>\n        #=$.t("site:export.excel")#\n    </a>\n</div>'}),define("compliance/views/aml/TrackingHitsGrid",["require","exports","lodash","core/ui/grid/GridUtils","i18n","core/ui/grid/GridToolbar","compliance/repository/AmlRepository","compliance/data/aml/AmlHitType","core/ui/DateUI","object/ui/EntityUI","core/ui/DateTimeUI","text!templates/compliance/compliance.aml.trackingHits.grid.toolbar.html","core/data/DObservableBuilder","core/ui/Confirmation","core/util/ObservableUtils","core/util/PromiseUtils","lodash"],function(t,e,i,l,s,u,c,p,m,f,b,v,a,r,y,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TrackingHitsGrid=void 0;function h(){}function g(e,n){var t={id:0,requestId:0,dateFrom:new Date,trackedObject:{id:0,name:"",category:0},name:"",firstName:"",reason:"",nationality:"",birthDate:"",hitType:p.AmlHitType.UNKNOWN,listNumber:null,listName:"",score:null,lastUpdate:new Date,isPerson:!0,isActive:null,requestTime:null,responseTime:null,checkFrequency:null,relatedObject:null,relationType:null,comments:null};return a.DObservableBuilder.of(t).add("isSelected",function(){return 0<e.length}).add("hasData",function(){return n&&!i.isEmpty(n.dataSource.data())}).add("hasChanges",function(){return!!n&&n.dataSource.hasChanges()}).add("saveChanges",function(){n&&n.dataSource.sync()}).add("cancelChanges",function(){n&&n.cancelChanges()}).add("exportAsExcel",function(){n&&n.saveAsExcel()}).add("delete",function(){0<e.length&&r.Confirmation.confirmDelete(s.I18N.t("compliance:aml.trackedHitsGrid.confirmDelete")).then(function(t){if(t)return c.AmlRepository.deleteTrackedHit(e[0].id).then(function(){n&&n.dataSource.read()})}).catch(h)}).build()}var n=function(){function t(t){this.kendoGrid=null,this.viewModel=t}return t.prototype.refresh=function(){this.kendoGrid&&this.kendoGrid.dataSource.read()},t.prototype.getGridData=function(){return null==this.kendoGrid?[]:this.kendoGrid.dataSource.data().toJSON()},t.prototype.createAndDisplay=function(i,t){var a,n=this,e=kendo.template(v),r={transport:{read:function(e){n.readTrackedData(t).then(function(t){n.viewModel&&n.viewModel.set("retainedHitsExist",0<t.length),e.success(t)}).catch(e.error)},update:function(t){c.AmlRepository.saveTrackingComments(t.data.models).then(t.success).catch(t.error)}},batch:!0,schema:{model:{id:"id",fields:{name:{type:"string",nullable:!1,editable:!1},firstName:{type:"string",nullable:!0,editable:!1},reason:{type:"string",nullable:!0,editable:!1},nationality:{type:"string",nullable:!0,editable:!1},birthDate:{type:"string",nullable:!0,editable:!1},hitType:{nullable:!0,editable:!1},listNumber:{type:"number",nullable:!0,editable:!1},listName:{type:"string",nullable:!0,editable:!1},score:{type:"number",nullable:!0,editable:!1},lastUpdate:{type:"date",nullable:!0,editable:!1},isPerson:{type:"boolean",nullable:!1,editable:!1},isActive:{type:"boolean",nullable:!0,editable:!1},trackedObject:{nullable:!1,editable:!1},responseTime:{type:"date",nullable:!0,editable:!1},comments:{type:"string",nullable:!0,editable:!0}},trackedObjectName:function(){return y.ObservableUtils.get(this,"trackedObject.name")||""}}}},o=(new u.GridToolbar).addExcel(),d={dataSource:r,editable:!0,scrollable:!0,pageable:l.GridUtils.defaultPageable(),toolbar:o.template(),columns:[f.EntityUI.column({field:"trackedObject",title:s.I18N.t("compliance:aml.trackedHitsGrid.trackedObject"),width:170,editable:function(){return!1}}),b.DateTimeUI.column({field:"responseTime",title:s.I18N.t("compliance:aml.trackedHitsGrid.verifiedOn"),width:140,editable:function(){return!1}}),{field:"name",title:s.I18N.t("compliance:aml.trackedHitsGrid.name"),width:150,editable:function(){return!1}},{field:"firstName",title:s.I18N.t("compliance:aml.trackedHitsGrid.foreName"),width:120,editable:function(){return!1}},{field:"nationality",title:s.I18N.t("compliance:aml.trackedHitsGrid.nationality"),width:112,editable:function(){return!1}},{field:"reason",title:s.I18N.t("compliance:aml.trackedHitsGrid.reason"),editable:function(){return!1}},{field:"birthDate",title:s.I18N.t("compliance:aml.trackedHitsGrid.birthDate"),width:77,editable:function(){return!1},hidden:!0},p.AmlHitType.column({field:"hitType",title:s.I18N.t("compliance:aml.trackedHitsGrid.hitType"),width:200,editable:function(){return!1}}),{field:"listNumber",title:s.I18N.t("compliance:aml.trackedHitsGrid.listNumber"),hidden:!0,editable:function(){return!1}},{field:"listName",title:s.I18N.t("compliance:aml.trackedHitsGrid.listName"),width:80,editable:function(){return!1},hidden:!0},{field:"score",title:s.I18N.t("compliance:aml.trackedHitsGrid.score"),width:80,editable:function(){return!1}},m.DateUI.column({field:"lastUpdate",title:s.I18N.t("compliance:aml.trackedHitsGrid.lastUpdate"),width:100,editable:function(){return!1}}),{field:"isPerson",title:s.I18N.t("compliance:aml.trackedHitsGrid.isPerson"),width:105,editable:function(){return!1}},{field:"isActive",title:s.I18N.t("compliance:aml.trackedHitsGrid.isActive"),width:84,editable:function(){return!1}},{field:"comments",title:s.I18N.t("compliance:aml.grids.comments"),width:84}],change:function(t){var e=t.sender,n=l.GridUtils.getSelectedRows(e);0<n.length?((!a||a&&a.id!==n[0].id)&&g(n,e).bind(i),a=n[0]):(a&&g(n,e).bind(i),a=void 0)},cellClose:function(t){var e=t.sender;g(l.GridUtils.getSelectedRows(e),e).bind(i)},dataBound:function(t){var e=t.sender;g(l.GridUtils.getSelectedRows(e),e).bind(i)}};d.toolbar=function(){return e},l.GridUtils.withDefaults(d),kendo.destroy(i),i.empty(),i.kendoGrid(d),o.bind(i),this.kendoGrid=i.data("kendoGrid")},t.prototype.readTrackedData=function(t){if(void 0!==t)return(n=t).length<=0||d.isNumber(n[0])?c.AmlRepository.listTrackingHitsForRequests(t):o.PromiseUtils.asPromise(function(){return t});if(this.viewModel){var e=this.viewModel.get("checkedObject");return e?c.AmlRepository.listTrackingHits(e.id):o.PromiseUtils.asPromise(function(){return[]})}return c.AmlRepository.listTrackingHits(null);var n},t}();e.TrackingHitsGrid=n}),define("compliance/views/aml/CheckNameDetailWindow",["require","exports","./TrackingHitsGrid","i18n","lodash"],function(t,e,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CheckNameDetailWindow=void 0;var n=function(){function t(){}return t.showDetail=function(t){if(!o.isEmpty(t)&&t){var e=$("<div>").addClass("formWindow").appendTo($(document.body)),n=$("<div>").addClass("floatingGrid_100").appendTo(e);e.kendoWindow({modal:!0,width:1700,minWidth:300,visible:!1}),(new a.TrackingHitsGrid).createAndDisplay(n,t);var i=e.data("kendoWindow");i.title(r.I18N.t("dashboards:components.CHECK_NAME.window.detailTracked.title")),i.bind("close",function(){return kendo.destroy(e),e.remove(),!0}),r.I18N.localize(e),i.open().center()}},t}();e.CheckNameDetailWindow=n}),define("compliance/views/overview/ComplianceOverviewTreeList",["require","exports","lodash","kendo","./ComplianceOverviewTreeData","core/ui/grid/GridUtils","compliance/data/ComplianceOverviewStatus","compliance/data/ComplianceFormRating","i18n","../util/ComplianceViewUtil","core/ui/grid/column/ColumnUtils","core/ui/grid/column/ColumnStyle","../aml/CheckNameDetailWindow"],function(t,e,l,s,a,r,d,u,c,p,o,m,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceOverviewTreeList=void 0;var b=25,v="detailCheckName";function y(t){var e=t.status;if(e===d.ComplianceOverviewStatus.DONE&&t.acceptanceDate)return s.toString(t.acceptanceDate,"d");if(e===d.ComplianceOverviewStatus.NOT_STARTED){if(t.nextDate){var n=s.toString(t.nextDate,"d");return c.I18N.t("compliance:overview.toBeStarted",{date:n})}return""}var i="";if(e===d.ComplianceOverviewStatus.IN_PROGRESS){var a=t.customStatus;if(i=t.actionPlan?" ("+t.actionPlan+")":"",a)return a+i}return(d.ComplianceOverviewStatus.getName(e)||"")+i}function h(t){if(l.isNil(t))return c.I18N.t("compliance:overview.notValidated");var e=u.ComplianceFormRating.getRatingEnum(t);return u.ComplianceFormRating.getName(e)||""}function g(t){return l.isNil(t)?c.I18N.t("compliance:overview.notValidated"):t?c.I18N.t("compliance:overview.validated"):c.I18N.t("compliance:overview.invalid")}var T=["dueDiligence","review","onSite"];function I(i,a,t){var e={field:i,title:t,template:function(t){var e=t[i]||"",n=t[a];return n?'<a class="d-link" href="'+n+'">'+s.htmlEncode(e)+"</a>":e||""}};return e}function C(o,t){var e={field:o,title:t,sortable:!1,filterable:!1};return e.template=function(t){var e=t[o];if(!e)return"";var n,i=t.type,a="",r=p.ComplianceViewUtil.CSS_NORMAL;if(5===i){if(!e.hasCheckList)return"";a=g(e.checkList),n=e.checkList,r=l.isNil(n)?p.ComplianceViewUtil.CSS_NORMAL:n?p.ComplianceViewUtil.CSS_OK:p.ComplianceViewUtil.CSS_ERROR}else if(6===i){if(!e.hasForm)return"";a=h(e.form),r=function(t){if(l.isNil(t))return p.ComplianceViewUtil.CSS_NORMAL;switch(u.ComplianceFormRating.getRatingEnum(t)){case u.ComplianceFormRating.VERY_GOOD:case u.ComplianceFormRating.GOOD:return p.ComplianceViewUtil.CSS_OK;case u.ComplianceFormRating.NORMAL:return p.ComplianceViewUtil.CSS_NORMAL;case u.ComplianceFormRating.BAD:case u.ComplianceFormRating.VERY_BAD:default:return p.ComplianceViewUtil.CSS_ERROR}}(e.form)}else r=function(t){switch(t.status){case d.ComplianceOverviewStatus.NOT_STARTED:return p.ComplianceViewUtil.CSS_NORMAL;case d.ComplianceOverviewStatus.DONE:return p.ComplianceViewUtil.CSS_OK;case d.ComplianceOverviewStatus.IN_PROGRESS:return p.ComplianceViewUtil.getCss(t.customStatusOk);case d.ComplianceOverviewStatus.ABORTED:default:return p.ComplianceViewUtil.CSS_ERROR}}(e),a=y(e);return'<span class="'+r+'">'+a+"</span>"},e}function i(t,e){var d=$("<div>").addClass("floatingGrid").appendTo(t);$("<div>").addClass("clearer").appendTo(t);var n=a.ComplianceOverviewTreeData.toData(e),i={dataSource:new s.data.TreeListDataSource({data:n,schema:{model:{id:"id",fields:{type:{type:"number"},name:{type:"string"},url:{type:"string"},supplier:{type:"string"},supplierUrl:{type:"string"},dueDiligence:{nullable:!0},review:{nullable:!0},onSite:{nullable:!0},checkName:{nullable:!0}}}},sort:{field:"name",dir:"asc"}}),editable:!1,columns:[I("name","url",c.I18N.t("compliance:overview.name")),I("supplier","supplierUrl",c.I18N.t("compliance:overview.supplier")),C("dueDiligence",c.I18N.t("compliance:overview.dueDiligence")),C("review",c.I18N.t("compliance:overview.review")),C("onSite",c.I18N.t("compliance:overview.onSite")),o.ColumnUtils.addStyle({command:[{name:v,text:c.I18N.t("compliance:overview.detailCheckName"),imageClass:"k-i-info",click:function(t){t.preventDefault();var e=d.data("kendoTreeList");if(e){var n=$(t.target).closest("tr"),i=e.dataItem(n).toJSON();f.CheckNameDetailWindow.showDetail(i.checkName)}}}],field:"checkName",title:c.I18N.t("compliance:overview.checkName"),width:120},m.ColumnStyle.CENTER_ALIGNED)],scrollable:!1,dataBound:function(n){n.sender.items().each(function(t,e){var i=n.sender.dataItem(e);$("tr[data-uid='"+i.uid+"']").find(".k-command-cell").each(function(t,e){var n=i.get("checkName");!l.isEmpty(n)&&n||($(e).find('[data-command="'+v+'"]').context.textContent="")})})}};r.GridUtils.withDefaults(i),d.kendoTreeList(i),d.kendoTooltip({filter:"td",position:"right",content:function(t){var e=t.target,n=e.closest("tr"),i=d.data("kendoTreeList");if(!i||!e||!n)return"";var a=i.dataItem(n),r=(i.options.columns||[])[e[0].cellIndex],o=r?r.field:null;return function(t,e){if(!t||!e||T.indexOf(e)<0)return"";var n=t[e];if(!n)return"";var i=[];if(i.push(c.I18N.t("compliance:overview.status")+": "+(y(n)||"")),n.actionPlan&&i.push(c.I18N.t("compliance:overview.actionPlan")+": "+s.htmlEncode(n.actionPlan)),n.acceptanceDate&&i.push(c.I18N.t("compliance:overview.acceptanceDate")+": "+s.toString(n.acceptanceDate,"d")),n.dueDate&&i.push(c.I18N.t("compliance:overview.dueDate")+": "+s.toString(n.dueDate,"d")),n.startDate&&i.push(c.I18N.t("compliance:overview.startDate")+": "+s.toString(n.startDate,"d")),n.endDate&&i.push(c.I18N.t("compliance:overview.endDate")+": "+s.toString(n.endDate,"d")),n.nextDate&&i.push(c.I18N.t("compliance:overview.nextDate")+": "+s.toString(n.nextDate,"d")),n.hasCheckList&&i.push(c.I18N.t("compliance:overview.checkList")+": "+g(n.checkList)),n.hasForm){var a="";l.isNil(n.form)||(a=" ("+s.toString(n.form,"n2")+")"),i.push(c.I18N.t("compliance:overview.form")+": "+h(n.form)+a)}if(n.comments){var r=s.htmlEncode(n.comments),o=r.length>b?r.substr(0,b-1)+"&hellip;":r;i.push(c.I18N.t("compliance:overview.comments")+": "+o)}return i.join("<br/>")}(a?a.toJSON():null,o)}})}var n=function(){function t(){}return t.display=function(t,e){var n;s.destroy(t),t.empty(),e?i(t,e):(n=t,$("<h3>").addClass(p.ComplianceViewUtil.CSS_ERROR).text(c.I18N.t("compliance:overview.error")).appendTo(n))},t}();e.ComplianceOverviewTreeList=n}),define("core/api/CapitalCallReason",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CapitalCallReason=void 0;var r,o;(r=e.CapitalCallReason||(e.CapitalCallReason={}))[r.FEES=1]="FEES",r[r.FIRST_CALL=2]="FIRST_CALL",r[r.INVESTMENT=3]="INVESTMENT",r[r.OTHER=4]="OTHER",(o=e.CapitalCallReason||(e.CapitalCallReason={})).getName=a.EnumUtils.createNameFn("history:CapitalCallReason",o),o.widget=i.EnumWidgetUtils.createDropList("DomosCapitalCallReason",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("text!templates/lp/summary.detail.window.html",[],function(){return'<div>\n\t<div id="lpSummarydetailGrid" class="floatingGrid_center"></div>\n</div>'}),define("lp/repository/LpDetailRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpDetailRepository=void 0;var i=function(){function t(){}return t.fetchSummaryDetail=function(t){var e={vehicle:t.vehicle,date:t.date,detailType:t.detailType};return n.WebHttp.getJson("lp/summary/detail.json?"+$.param(e))},t}();e.LpDetailRepository=i}),define("lp/data/LpSummaryDetailType",["require","exports"],function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.LpSummaryDetailType=void 0,(n=e.LpSummaryDetailType||(e.LpSummaryDetailType={}))[n.CAPITAL_CALL=1]="CAPITAL_CALL",n[n.DISTRIBUTION=2]="DISTRIBUTION"}),define("lp/data/extraction/OperationType",["require","exports","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OperationType=void 0;var r,o;(r=e.OperationType||(e.OperationType={}))[r.CAPITAL_CALL=1]="CAPITAL_CALL",r[r.CAPITAL_CALL_SPLIT=2]="CAPITAL_CALL_SPLIT",r[r.RECALLABLE=3]="RECALLABLE",r[r.NET_DISTRIBUTION=4]="NET_DISTRIBUTION",r[r.DISTRIBUTION_SPLIT=5]="DISTRIBUTION_SPLIT",r[r.SUBSCRIPTION=6]="SUBSCRIPTION",r[r.FUND_PURCHASE=7]="FUND_PURCHASE",r[r.FUND_SELL=8]="FUND_SELL",r[r.REDEMPTION=9]="REDEMPTION",r[r.PAYMENT_CAPITAL_CALL=10]="PAYMENT_CAPITAL_CALL",r[r.RESERVE_TRANSFER=11]="RESERVE_TRANSFER",(o=e.OperationType||(e.OperationType={})).getName=a.EnumUtils.createNameFn("lp:OperationType",o),o.widget=n.EnumWidgetUtils.createDropList("DomosOperationType",o,!0,!1),o.column=i.EnumColumnUtils.createFactory(o,o.widget)}),define("lp/data/CapitalCallType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CapitalCallType=void 0;var r,o;(r=e.CapitalCallType||(e.CapitalCallType={}))[r.GLOBAL=1]="GLOBAL",r[r.LP=2]="LP",r[r.COMMITMENT=3]="COMMITMENT",(o=e.CapitalCallType||(e.CapitalCallType={})).getName=n.EnumUtils.createNameFn("lp:CapitalCallType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosCapitalCallType",o,!0,!1),o.column=a.EnumColumnUtils.createFactory(o,o.widget),o.widgetMulti=i.EnumWidgetUtils.createMultiSelect("DomosCapitalCallTypeMulti",o),o.columnMulti=a.EnumColumnUtils.createMultiFactory(o,o.widgetMulti)}),define("lp/data/NAVDistributionType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NAVDistributionType=void 0;var r,o;(r=e.NAVDistributionType||(e.NAVDistributionType={}))[r.COMMITMENT=1]="COMMITMENT",r[r.SHARE=2]="SHARE",r[r.GLOBAL=3]="GLOBAL",r[r.LP=4]="LP",(o=e.NAVDistributionType||(e.NAVDistributionType={})).getName=n.EnumUtils.createNameFn("lp:NAVDistributionType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosDistributionType",o,!0,!1),o.column=a.EnumColumnUtils.createFactory(o,o.widget),o.widgetMulti=i.EnumWidgetUtils.createMultiSelect("DomosDistributionTypeMulti",o),o.columnMulti=a.EnumColumnUtils.createMultiFactory(o,o.widgetMulti)}),define("history/data/CapitalCallSplitType",["require","exports","core/util/EnumUtils","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CapitalCallSplitType=void 0;var r,o;(r=e.CapitalCallSplitType||(e.CapitalCallSplitType={}))[r.INVESTMENT=1]="INVESTMENT",r[r.FEES=2]="FEES",r[r.EXPENSES=3]="EXPENSES",r[r.FEES_OUTSIDE_COMMITMENT=4]="FEES_OUTSIDE_COMMITMENT",r[r.SUBSEQUENT_CLOSE_INTEREST=5]="SUBSEQUENT_CLOSE_INTEREST",r[r.OTHER=6]="OTHER",(o=e.CapitalCallSplitType||(e.CapitalCallSplitType={})).getName=n.EnumUtils.createNameFn("history:CapitalCallSplitType",o),o.widget=a.EnumWidgetUtils.createDropList("DomosCapitalCallSplitType",o,!0),o.column=i.EnumColumnUtils.createFactory(o,o.widget)}),define("history/data/DistributionSplitType",["require","exports","core/util/EnumUtils","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DistributionSplitType=void 0;var r,o;(r=e.DistributionSplitType||(e.DistributionSplitType={}))[r.CAPITAL_RETURN=1]="CAPITAL_RETURN",r[r.REALIZED=2]="REALIZED",r[r.DIVIDEND=3]="DIVIDEND",r[r.INTEREST=4]="INTEREST",r[r.OTHER_INCOME=5]="OTHER_INCOME",r[r.BRIDGE=6]="BRIDGE",r[r.WITHHOLDING_TAX=7]="WITHHOLDING_TAX",r[r.CARRY=8]="CARRY",r[r.SUBSEQUENT_CLOSE_INTEREST=9]="SUBSEQUENT_CLOSE_INTEREST",r[r.FEE=10]="FEE",r[r.GUARANTY=11]="GUARANTY",r[r.OTHER=12]="OTHER",r[r.CANCELLATION_INVESTMENT=13]="CANCELLATION_INVESTMENT",r[r.CANCELLATION_FEES=14]="CANCELLATION_FEES",r[r.CANCELLATION_EXPENSES=15]="CANCELLATION_EXPENSES",r[r.CANCELLATION_FEES_OUTSIDE_COMMITMENT=16]="CANCELLATION_FEES_OUTSIDE_COMMITMENT",r[r.CANCELLATION_SUBSEQUENT_CLOSE_INTEREST=17]="CANCELLATION_SUBSEQUENT_CLOSE_INTEREST",r[r.CANCELLATION_OTHER=18]="CANCELLATION_OTHER",(o=e.DistributionSplitType||(e.DistributionSplitType={})).getName=n.EnumUtils.createNameFn("history:DistributionSplitType",o),o.widget=a.EnumWidgetUtils.createDropList("DomosDistributionSplitType",o,!0),o.column=i.EnumColumnUtils.createFactory(o,o.widget)}),define("lp/utils/LpSummaryUtils",["require","exports","lp/data/extraction/OperationType","lp/data/CapitalCallType","lp/data/NAVDistributionType","history/data/CapitalCallSplitType","history/data/DistributionSplitType"],function(t,e,n,i,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpSummaryUtils=void 0;var d=function(){function t(){}return t.subTypeColumn=function(t,e){switch(t){case n.OperationType.CAPITAL_CALL:return i.CapitalCallType.getName(e);case n.OperationType.NET_DISTRIBUTION:case n.OperationType.RECALLABLE:return a.NAVDistributionType.getName(e);case n.OperationType.CAPITAL_CALL_SPLIT:return r.CapitalCallSplitType.getName(e);case n.OperationType.DISTRIBUTION_SPLIT:return o.DistributionSplitType.getName(e);default:return""}},t}();e.LpSummaryUtils=d}),define("lp/views/overview/summary/LpSummaryDetailGrid",["require","exports","core/util/ObservableUtils","i18n","object/ui/EntityInvestorUI","basic/ui/CurrencyUI","core/ui/grid/GridUtils","core/ui/NumberUI","lp/repository/LpDetailRepository","lodash","lp/data/LpSummaryDetailType","object/web/ObjectMap","lp/utils/LpSummaryUtils"],function(t,e,o,d,l,s,u,c,p,m,f,b,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpSummaryDetailGrid=void 0;var n=function(){function t(){}return t.setup=function(t,e){var n=new Array(l.EntityInvestorUI.column({field:"partnerEntity",title:d.I18N.t("lp:summary.detail.partnerEntity")}),{field:"fundShareName()",title:d.I18N.t("lp:summary.detail.fundShare"),template:function(t){var e=t.fundShareName();if(!e)return"";var n=kendo.htmlEncode(e),i=t.fundShare.id,a=b.ObjectMap.objectEdit(i);return'<a class="d-link" href="'+kendo.htmlEncode(a)+'">'+n+"</a>"}},{field:"subType",title:d.I18N.t("lp:summary.detail.type"),template:function(t){return null!==t.subType?v.LpSummaryUtils.subTypeColumn(t.type,t.subType):""}},c.NumberUI.column({field:"amount",title:d.I18N.t("lp:summary.detail.amount"),width:150}));n=e.detailType===f.LpSummaryDetailType.CAPITAL_CALL?m.concat(n,new Array(c.NumberUI.column({field:"premium",title:d.I18N.t("lp:summary.detail.capitalCall.premium"),width:120}),c.NumberUI.column({field:"fees",title:d.I18N.t("lp:summary.detail.capitalCall.fees"),width:120}),c.NumberUI.column({field:"fromReserve",title:d.I18N.t("lp:summary.detail.capitalCall.fromReserve"),width:140}))):m.concat(n,new Array(c.NumberUI.column({field:"recallable",title:d.I18N.t("lp:summary.detail.distribution.recallable"),width:120}),c.NumberUI.column({field:"pledged",title:d.I18N.t("lp:summary.detail.distribution.pledged"),width:120}),c.NumberUI.column({field:"reserve",title:d.I18N.t("lp:summary.detail.distribution.reserve"),width:120})));var i,a,r={dataSource:(i=e,a=kendo.data.Model.define({id:"id",fields:{partnerEntity:{nullable:!0},fundShare:{nullable:!0},subType:{type:"number"},amount:{nullable:!0,type:"number"},currency:{type:"number"}},partnerEntityName:function(){return o.ObservableUtils.get(this,"partnerEntity.name")||""},fundShareName:function(){return o.ObservableUtils.get(this,"fundShare.shortName")||o.ObservableUtils.get(this,"fundShare.name")||""}}),{transport:{read:function(e){p.LpDetailRepository.fetchSummaryDetail(i).then(function(t){return m.map(t,function(t){return new a(t)})}).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})}},schema:{model:a},sort:{field:"date",dir:"desc"}}),columns:n.concat(s.CurrencyUI.column({field:"currency",title:d.I18N.t("lp:summary.detail.currency"),width:100})),groupable:!1,scrollable:!0,pageable:u.GridUtils.defaultPageable(),height:500,editable:!1,toolbar:[{name:"excel"}],dataBound:function(t){u.GridUtils.resizeGrid(t.sender)}};u.GridUtils.withDefaults(r),t.kendoGrid(r)},t}();e.LpSummaryDetailGrid=n}),define("lp/views/overview/summary/LpSummaryDetailWindow",["require","exports","i18n","text!templates/lp/summary.detail.window.html","./LpSummaryDetailGrid","object/ui/VehicleUI"],function(t,e,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpSummaryDetailWindow=void 0;var n=function(){function t(){}return t.open=function(t){var e=kendo.template(r)({}),n=$("<div>").addClass("formWindow").appendTo($(document.body));n.html(e);n.kendoWindow({modal:!0,width:1250,minWidth:300,visible:!1});var i=n.data("kendoWindow");a.I18N.localize(n),o.LpSummaryDetailGrid.setup(i.element.find("#lpSummarydetailGrid"),t),i.title(a.I18N.t("lp:summary.detail.window.title")).open().center()},t}();e.LpSummaryDetailWindow=n}),define("lp/utils/LpSummaryDetailUtils",["require","exports","i18n","core/ui/grid/GridUtils","lp/views/overview/summary/LpSummaryDetailWindow","core/util/DateUtils"],function(t,e,n,i,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpSummaryDetailUtils=void 0;var a=function(){function t(){}return t.detailClick=function(t,e,n){var i=t.select();if(0<i.length){var a=t.dataItem(i),r={vehicle:e,date:d.DateUtils.toJson(a.date),detailType:n};o.LpSummaryDetailWindow.open(r)}},t.getDetailLabel=function(){return n.I18N.t("lp:grid.toolbar.detail")},t.gridChange=function(t,e){i.GridUtils.onRowSelectChange(t,[e])},t.DETAIL_ICON="k-icon k-i-zoom",t}();e.LpSummaryDetailUtils=a}),define("lp/views/overview/summary/LpCapitalCallSummaryGrid",["require","exports","core/ui/grid/GridUtils","lodash","i18n","core/ui/grid/GridFooter","core/ui/grid/column/ColumnUtils","core/ui/grid/column/ColumnStyle","core/ui/DateUI","core/api/CapitalCallReason","core/ui/IntegerUI","lp/utils/LpSummaryDetailUtils","core/ui/grid/GridToolbar","lp/data/LpSummaryDetailType"],function(t,e,p,m,f,b,v,y,h,g,T,I,C,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpCapitalCallSummaryGrid=void 0;var k=kendo.guid();var n=function(){function t(){}return t.setupGrid=function(e,n){var t;if(t=e,kendo.destroy(t),t.empty(),n){var r=m.chain(n.amounts).map(function(t){return t.perShares}).flatten().map(function(t){return t.fundShareName}).sortBy().sortedUniq().value(),i=m.chain(n.amounts).sortBy(function(t){return t.date}).map(function(t,e){var i={id:e,title:"Undefined"!==t.name&&t.name?t.name:f.I18N.t("lp:summary.capitalCallTitle",{index:e+1}),date:t.date,amount:t.amount,reason:t.reason},a=m.chain(t.perShares).keyBy(function(t){return t.fundShareName}).mapValues(function(t){return t.amount}).value();return r.forEach(function(t,e){var n=a[t];i[u(e)]=m.isUndefined(n)?null:n}),i}).value(),a=[{field:"title",aggregate:"count"},{field:"amount",aggregate:"sum"}];r.forEach(function(t,e){return a.push({field:u(e),aggregate:"sum"})});var o=[v.ColumnUtils.addStyle({field:"title",title:f.I18N.t("lp:summary.capitalCall"),width:"200px",footerTemplate:b.GridFooter.footer("title","count","Count: {0:n0}")},y.ColumnStyle.BOLD),h.DateUI.column({field:"date",title:f.I18N.t("lp:summary.date"),width:"100px"}),g.CapitalCallReason.column({field:"reason",title:f.I18N.t("lp:summary.reason"),width:"100px"})];r.forEach(function(t,e){return o.push(T.IntegerUI.column({field:u(e),title:t,width:"200px",footerTemplate:c(u(e))}))}),o.push(T.IntegerUI.column({field:"amount",title:f.I18N.t("lp:summary.totalAmount"),footerTemplate:c("amount"),width:"100px"},y.ColumnStyle.BOLD));var d={data:i,schema:{model:{id:"id"}},sort:{field:"date",dir:"asc"},aggregate:a},l=(new C.GridToolbar).addExcel().addClick(I.LpSummaryDetailUtils.getDetailLabel(),I.LpSummaryDetailUtils.DETAIL_ICON,function(){var t=e.data("kendoGrid");I.LpSummaryDetailUtils.detailClick(t,n.vehicle.id,w.LpSummaryDetailType.CAPITAL_CALL)},k),s={dataSource:d,editable:!1,columns:o,pageable:p.GridUtils.defaultPageable(),height:740,scrollable:!0,toolbar:l.template(),change:function(t){I.LpSummaryDetailUtils.gridChange(t.sender,t.sender.element.find("#"+k))},dataBound:function(t){I.LpSummaryDetailUtils.gridChange(t.sender,t.sender.element.find("#"+k))}};p.GridUtils.withDefaults(s),e.kendoGrid(s),l.bind(e),e.find("#"+k).addClass("k-state-disabled")}function u(t){return"key"+t}function c(t){return b.GridFooter.footer(t,"sum","{0:n0}")}},t}();e.LpCapitalCallSummaryGrid=n}),define("lp/views/overview/summary/LpDistributionSummaryGrid",["require","exports","core/ui/grid/column/ColumnStyle","lodash","i18n","core/ui/grid/GridFooter","core/ui/grid/column/ColumnUtils","core/ui/DateUI","core/ui/NumberUI","core/ui/grid/GridUtils","core/ui/grid/GridToolbar","lp/utils/LpSummaryDetailUtils","lp/data/LpSummaryDetailType"],function(t,e,u,c,p,m,f,b,v,y,h,g,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpDistributionSummaryGrid=void 0;var I=kendo.guid();function C(t){return'<div style="font-size:80%">'+t+"</div>"}var n=function(){function t(){}return t.setupGrid=function(e,n){var t;if(t=e,kendo.destroy(t),t.empty(),n){c.forEach(n.amounts,function(t,e){t.name="Undefined"!==t.name&&t.name?t.name:p.I18N.t("lp:summary.distributionTitle",{index:e+1})});var i=[{field:"name",aggregate:"count"},{field:"total",aggregate:"sum"}],a='<div style="'+u.ColumnStyle.toCss([u.ColumnStyle.RIGHT_ALIGNED])+'">\n\t\t\t'+p.I18N.t("lp:summary.distribution.distributedAmount")+"\n\t\t</div>",r=[{headerTemplate:C(p.I18N.t("lp:summary.distribution.commitmentPercent")),columns:[f.ColumnUtils.addStyle({field:"name",title:p.I18N.t("lp:summary.distribution.name"),footerTemplate:a,width:"200px"},u.ColumnStyle.BOLD)]},{title:" ",columns:[b.DateUI.column({field:"date",title:p.I18N.t("lp:summary.date"),width:"100px"})]}];n.columns.forEach(function(t){var e,n;i.push({field:t.key,aggregate:"sum"}),r.push({headerTemplate:(e=t,n=e.commitmentPercent,C(c.isNil(n)?"":kendo.toString(n,"p2"))),columns:[v.NumberUI.column({field:t.key,title:t.name,width:"200px",footerTemplate:s(t.key)})]})}),r.push({title:" ",columns:[v.NumberUI.column(f.ColumnUtils.addStyle({field:"total",title:p.I18N.t("lp:summary.distribution.total"),footerTemplate:s("total")},u.ColumnStyle.BOLD&u.ColumnStyle.RIGHT_ALIGNED))],width:"100px"});var o={data:c.sortBy(n.amounts,"id"),schema:{model:{id:"id"}},aggregate:i},d=(new h.GridToolbar).addExcel().addClick(g.LpSummaryDetailUtils.getDetailLabel(),g.LpSummaryDetailUtils.DETAIL_ICON,function(){var t=e.data("kendoGrid");g.LpSummaryDetailUtils.detailClick(t,n.vehicle.id,T.LpSummaryDetailType.DISTRIBUTION)},I),l={dataSource:o,editable:!1,columns:r,scrollable:!0,pageable:y.GridUtils.defaultPageable(),height:740,toolbar:d.template(),change:function(t){g.LpSummaryDetailUtils.gridChange(t.sender,t.sender.element.find("#"+I))},dataBound:function(t){g.LpSummaryDetailUtils.gridChange(t.sender,t.sender.element.find("#"+I))}};y.GridUtils.withDefaults(l),e.kendoGrid(l),d.bind(e),e.find("#"+I).addClass("k-state-disabled")}function s(t){return m.GridFooter.footer(t,"sum")}},t}();e.LpDistributionSummaryGrid=n}),define("lp/views/overview/summary/LpCommitmentSummaryTreeList",["require","exports","lodash","core/ui/grid/GridFooter","i18n","core/ui/grid/GridUtils","core/ui/NumberUI","core/ui/grid/column/ColumnStyle"],function(t,e,h,a,r,o,d,l){"use strict";function g(t,e){t.sharePercentCalledCapital=e,t.shareDpi=e,t.shareRvpi=e,t.shareTvpi=e,t.shareNav=e,t.shareIrr=e}function s(n,i,a){void 0===i&&(i="{0:n}");var t={field:n,title:r.I18N.t("lp:summary.commitment."+n),width:150,format:i,template:function(t){var e=t[n];return h.isNil(e)?a&&t[a]?r.I18N.t("site:notAvailable"):"":kendo.format(i,e)}};return d.NumberUI.column(t)}function u(t,e,n){return t[n]||t[e]}function c(n,i){var t=s(n);return t.dmsExcel=function(t){return u(t,n,i)},t.template=function(t){var e=u(t,n,i);return kendo.toString(e,"n0")},t.sortable={compare:function(t,e){return u(t,n,i)-u(e,n,i)}},t.footerTemplate=a.GridFooter.footer(n,"sum","{0:n0}"),t}function p(a,t,r,o,e){var n=s(a,r,e);return n.field=t,n.dmsExcel=function(t){return t[a]},n.sortable={compare:function(t,e){var n=t[a],i=e[a];return h.isNil(n)?h.isNil(i)?0:-1:h.isNil(i)?1:i<n?1:-1}},n.footerTemplate=function(t){var e=t.sum;if(h.isNil(e))return"";if(e=Math.round(e),e=(o[e]||o[0])[a],h.isNil(e))return"";var n=kendo.format(r,e),i=l.ColumnStyle.toCss([l.ColumnStyle.RIGHT_ALIGNED,l.ColumnStyle.BOLD]);return i?'<div style="'+i+'">'+n+"</div>":n},n}Object.defineProperty(e,"__esModule",{value:!0}),e.LpCommitmentSummaryTreeList=void 0;var n=function(){function t(){}return t.setupTreeList=function(t,n){var e;if(e=t,kendo.destroy(e),e.empty(),n){var i={};i[0]=n.total;var a={dataSource:function(){var t=function(t,e){for(var n=[],i=0,a=0,r=t.recaps;a<r.length;a++){var o=r[a],d=++i,l={id:d,parentId:null,shareCommitment:o.commitment,sharePremium:o.premium,shareCalled:o.calledCapital,shareCallable:o.callableCapital,shareDistribution:o.distribution};o.commitment=0,o.premium=0,o.calledCapital=0,o.callableCapital=0;var s=o.distribution=0;(e[d]=o).details.length<=0?g(l,d):(s=d/o.details.length,g(l,0));var u=h.extend(o,l);n.push(u);for(var c=0,p=o.details;c<p.length;c++){var m=p[c],f=++i,b=h.isDate(m.date)?m.date:new Date(m.date),v={id:f,parentId:d,name:kendo.toString(b,"d")},y=h.extend(m,v);g(y,s),n.push(y)}o.details=[]}return n}(n,i);function e(t){return{field:t,aggregate:"sum"}}return new kendo.data.TreeListDataSource({data:t,schema:{model:{id:"id",expanded:!1}},aggregate:[e("commitment"),e("premium"),e("calledCapital"),e("callableCapital"),e("distribution"),e("sharePercentCalledCapital"),e("shareDpi"),e("shareTvpi"),e("shareRvpi"),e("shareNav"),e("shareIrr")],sort:[{field:"name",dir:"asc"},{field:"date",dir:"asc"}]})}(),editable:!1,columns:[{field:"name",title:r.I18N.t("lp:summary.commitment.name"),width:200,footerTemplate:"<strong>Total</strong>"},c("commitment","shareCommitment"),c("premium","sharePremium"),c("calledCapital","shareCalled"),c("callableCapital","shareCallable"),c("distribution","shareDistribution"),p("percentCalledCapital","sharePercentCalledCapital","{0:p1}",i),p("dpi","shareDpi","{0:n2}x",i),p("nav","shareNav","{0:n}",i),p("rvpi","shareRvpi","{0:n2}x",i),p("tvpi","shareTvpi","{0:n2}x",i),p("irr","shareIrr","{0:p2}",i,"irrError")],scrollable:!0,pageable:o.GridUtils.defaultPageable(),height:740,toolbar:["excel"]};o.GridUtils.withDefaults(a),t.kendoTreeList(a)}},t}();e.LpCommitmentSummaryTreeList=n}),define("text!templates/dashboards/edit/capitalAccount.display.html",[],function(){return'<div id="lpCapitalAccountDisplay">\n\t<h3 data-i18n="lp:capitalAccount.view.capitalAccount"></h3>\n\t\n\t\t<table class="lpCapitalAccountInputTable">\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label data-i18n="lp:capitalAccount.fields.fundSize"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type="text" class="k-textbox lpNumberTextBox" data-bind="display: fundSize" data-format="n2" readonly/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label data-i18n="lp:capitalAccount.fields.investorCommitment"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type="text" class="k-textbox lpNumberTextBox" data-bind="display: investorCommitment"  data-format="n2" readonly/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label data-i18n="lp:capitalAccount.fields.percent"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type="text" class="k-textbox lpNumberTextBox" data-bind="display: percent" data-format="p" readonly/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label data-i18n="lp:capitalAccount.fields.remainingCommitment"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type="text" class="k-textbox lpNumberTextBox" data-bind="display: remainingCommitment" data-format="n2" readonly/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label data-i18n="lp:capitalAccount.fields.numberUnits"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<textarea class="k-textbox" data-bind="display: numberUnits"  readonly></textarea>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label data-i18n="lp:capitalAccount.fields.typeUnits"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<textarea class="k-textbox" data-bind="display: typeUnits" readonly></textarea>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n\t<h3 data-i18n="lp:capitalAccount.view.metrics"></h3>\n\t\t<table class="lpCapitalAccountInputTable">\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label data-i18n="lp:capitalAccount.fields.capitalCalled"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type="text" class="k-textbox lpNumberTextBox" data-bind="display: capitalCalled" data-format="p" readonly/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label data-i18n="lp:capitalAccount.fields.dpi"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type="text" class="k-textbox lpNumberTextBox" data-bind="display: dpi"  data-format="n2" readonly/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label data-i18n="lp:capitalAccount.fields.rvpi"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type="text" class="k-textbox lpNumberTextBox" data-bind="display: rvpi"  data-format="n2" readonly/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label data-i18n="lp:capitalAccount.fields.tvpi"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type="text" class="k-textbox lpNumberTextBox" data-bind="display: tvpi" data-format="n2" readonly/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label data-i18n="lp:capitalAccount.fields.irr"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type="text" class="k-textbox lpNumberTextBox" data-bind="display: irr" data-format="p" readonly/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n\t<h3 data-i18n="lp:capitalAccount.view.change"></h3>\n\t\t<table class="lpCapitalAccountInputChangeTable">\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label data-i18n="lp:capitalAccount.fields.firstRevaluation"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type="text" class="k-textbox lpNumberTextBox" data-bind="display: firstRevaluation" data-format="n2" readonly/>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type="text" class="k-textbox lpNumberTextBox" data-bind="display: firstNavDate" data-format="d" readonly/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label data-i18n="lp:capitalAccount.fields.changeCapitalCall"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type="text" class="k-textbox lpNumberTextBox" data-bind="display: changeCapitalCall" data-format="n2" readonly/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label data-i18n="lp:capitalAccount.fields.changeDistribution"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type="text" class="k-textbox lpNumberTextBox" data-bind="display: changeDistribution"  data-format="n2" readonly/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label data-i18n="lp:capitalAccount.fields.changeValuation"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type="text" class="k-textbox lpNumberTextBox" data-bind="display: changeValuation"  data-format="n2" readonly/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label data-i18n="lp:capitalAccount.fields.lastRevaluation"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type="text" class="k-textbox lpNumberTextBox" data-bind="display: lastRevaluation" data-format="n2" readonly/>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type="text" class="k-textbox lpNumberTextBox" data-bind="display: lastNavDate" data-format="d" readonly/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n\t<h3 data-i18n="lp:capitalAccount.view.operations"></h3>\n\t<div id="lpOperationGrid" class="floatingGrid"></div>\n\t<div class="clearer"></div>\n\t<p></p>\n</div>'}),define("lp/views/overview/summary/operation/LpCapitalAccountOperationGrid",["require","exports","core/ui/NumberUI","i18n","lodash","core/ui/grid/GridUtils","core/ui/DateUI","core/ui/grid/column/ColumnStyle","core/ui/grid/column/ColumnUtils","core/ui/PercentUI","core/ui/grid/GridFooter"],function(t,e,i,a,r,o,d,l,s,u,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpCapitalAccountOperationGrid=void 0;var p=kendo.data.Model.define({id:"id",fields:{id:{type:"number"},name:{type:"string"},date:{type:"date"},capitalCallLP:{type:"number"},distributionLP:{type:"number"},investorPercent:{type:"number"}}});function m(t){var n=t.field;return n&&(t.template=function(t){return null===(e=t[n])?"--":kendo.format("{0:n0}",e);var e},t.groupable=!1,t.sortable=!1,t.filterable=!1,s.ColumnUtils.addStyle(t,l.ColumnStyle.RIGHT_ALIGNED)),t}var n=function(){function t(){}return t.setup=function(t,e){kendo.destroy(t),t.empty();var n={dataSource:{data:r.map(e,function(t){return new p(t)}),schema:{model:p},aggregate:[{field:"capitalCallLP",aggregate:"sum"},{field:"distributionLP",aggregate:"sum"}]},columns:[s.ColumnUtils.addStyle({field:"name",title:a.I18N.t("lp:capitalAccount.fields.operation.name"),footerTemplate:a.I18N.t("lp:capitalAccount.footerTemplate.totalInvestor")},l.ColumnStyle.BOLD),d.DateUI.column({field:"date",title:a.I18N.t("lp:capitalAccount.fields.operation.date")}),m(i.NumberUI.column({field:"capitalCallLP",title:a.I18N.t("lp:capitalAccount.fields.operation.capitalCallLP"),footerTemplate:c.GridFooter.footer("capitalCallLP","sum","{0:n0}")})),m(i.NumberUI.column({field:"distributionLP",title:a.I18N.t("lp:capitalAccount.fields.operation.distributionLP"),footerTemplate:c.GridFooter.footer("distributionLP","sum","{0:n0}")})),u.PercentUI.column({field:"investorPercent",title:a.I18N.t("lp:capitalAccount.fields.operation.investorPercent")})],pageable:o.GridUtils.defaultPageable(),scrollable:!1,editable:!1};return o.GridUtils.withDefaults(n),t.kendoGrid(n),t.data("kendoGrid")},t}();e.LpCapitalAccountOperationGrid=n}),define("dashboard/component/capitalAccount/CapitalAccountDisplay",["require","exports","text!templates/dashboards/edit/capitalAccount.display.html","lp/views/overview/summary/operation/LpCapitalAccountOperationGrid","core/data/DObservableBuilder","i18n","lodash"],function(t,e,a,r,o,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CapitalAccountDisplay=void 0;var n=function(){function t(){}return t.display=function(t,e){var n=kendo.template(a)({});t.html(n);var i=o.DObservableBuilder.of(e).add("numberUnits",function(t){var e=t.get("positions");return l.chain(e).map(function(t){return t.shareClass}).sortBy(["name","shortName"]).map(function(t){return t.positionsClosing}).map(function(t){return l.sumBy(t,function(t){return t.numberUnit})}).join(", ").value()}).add("typeUnits",function(t){var e=t.get("positions");return l.chain(e).map(function(t){return t.shareClass}).sortBy(["name","shortName"]).map(function(t){return t.shortName?t.shortName:t.name}).join(", ").value()}).build();r.LpCapitalAccountOperationGrid.setup(t.find("#lpOperationGrid"),e.operations),d.I18N.localize(t),i.bind(t)},t}();e.CapitalAccountDisplay=n}),define("lp/repository/OperationRepository",["require","exports","core/web/WebHttp"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OperationRepository=void 0;var n=function(){function t(){}return t.operation=function(t,e){var n=JSON.stringify(t);return i.WebHttp.postJson("lp/operation/list.json",{data:n},e)},t}();e.OperationRepository=n}),define("operationsUtils/OperationsGrid",["require","exports","core/ui/grid/GridUtils","core/util/ObservableUtils","core/ui/DateUI","i18n","object/ui/VehicleUI","core/ui/NumberUI","basic/ui/CurrencyUI","object/ui/EntityInvestorUI","object/ui/AssetUI","lp/data/extraction/OperationType","lp/utils/LpSummaryUtils","lp/repository/OperationRepository","lodash"],function(t,e,l,s,u,c,p,m,f,b,v,y,h,g,T){"use strict";var I,n;Object.defineProperty(e,"__esModule",{value:!0}),e.OperationsGrid=e.OperationModuleType=void 0,(n=I=e.OperationModuleType||(e.OperationModuleType={}))[n.LP_OPERATION=1]="LP_OPERATION",n[n.DASHBOARD_OPERATION=2]="DASHBOARD_OPERATION";var i=function(){function t(){}return t.setup=function(t,e,n,i){kendo.destroy(t),t.empty();var a=kendo.data.Model.define({id:"id",fields:{id:{type:"number"},type:{nullable:!0},fund:{nullable:!0},date:{type:"date"},shareClass:{nullable:!0},closing:{type:"date"},investor:{nullable:!0},subType:{type:"number"},quantity:{type:"number"},amount:{type:"number"},currency:{type:"number"},subscription:{type:"string"},reference:{type:"string"},parentReference:{type:"string"},comment:{type:"string"}},fundName:function(){return s.ObservableUtils.get(this,"fund.shortName")||s.ObservableUtils.get(this,"fund.name")||""},shareClassName:function(){return s.ObservableUtils.get(this,"shareClass.shortName")||s.ObservableUtils.get(this,"shareClass.name")||""},investorName:function(){return s.ObservableUtils.get(this,"investor.shortName")||s.ObservableUtils.get(this,"investor.name")||""},subTypeName:function(){var t=s.ObservableUtils.get(this,"type"),e=s.ObservableUtils.get(this,"subType");return e?h.LpSummaryUtils.subTypeColumn(t,e):""}}),r={schema:{model:a}};switch(e){case I.LP_OPERATION:if(null!==n){r.transport={read:function(e){g.OperationRepository.operation(n.toJson()).then(function(t){return T.map(t,function(t){return new a(t)})}).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})}}}break;case I.DASHBOARD_OPERATION:null!==i&&(r.data=i)}var o={multi:!0,search:!0},d={dataSource:r,columns:[y.OperationType.column({field:"type",title:c.I18N.t("lp:operations.type"),width:150}),p.VehicleUI.column({field:"fund",title:c.I18N.t("lp:operations.fund"),filterable:o,width:250}),u.DateUI.column({field:"date",title:c.I18N.t("lp:operations.date"),filterable:o,width:100}),v.AssetUI.FundShare.column({field:"shareClass",title:c.I18N.t("lp:operations.shareClass"),filterable:o,width:250}),u.DateUI.column({field:"closing",title:c.I18N.t("lp:operations.closing"),filterable:o,width:100}),b.EntityInvestorUI.column({field:"investor",title:c.I18N.t("lp:operations.investor"),filterable:o,width:250}),{field:"subTypeName()",title:c.I18N.t("lp:operations.subType"),filterable:o,width:120},m.NumberUI.column({field:"quantity",title:c.I18N.t("lp:operations.quantity"),width:120}),m.NumberUI.column({field:"amount",title:c.I18N.t("lp:operations.amount"),filterable:o,width:120}),f.CurrencyUI.column({field:"currency",title:c.I18N.t("lp:operations.currency"),filterable:o,width:100}),{field:"subscription",title:c.I18N.t("lp:operations.subscription"),filterable:o,width:130},{field:"reference",title:c.I18N.t("lp:operations.reference"),filterable:o,width:130},{field:"parentReference",title:c.I18N.t("lp:operations.parentReference"),filterable:o,width:130},{field:"comment",title:c.I18N.t("lp:operations.comment"),width:200}],pageable:l.GridUtils.defaultPageable(),height:600,scrollable:!0,editable:!1,toolbar:[{name:"excel"}]};l.GridUtils.withDefaults(d),t.kendoGrid(d),t.data("kendoGrid")},t}();e.OperationsGrid=i}),define("dashboard/component/checkName/CheckNameGrid",["require","exports","core/util/ObservableUtils","core/ui/grid/GridUtils","object/ui/EntityUI","i18n","core/ui/grid/column/ColumnUtils","core/ui/grid/column/ColumnStyle","lodash","compliance/views/aml/TrackingHitsGrid"],function(t,e,n,a,r,o,d,l,s,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CheckNameGrid=void 0;var i=function(){function t(){}return t.init=function(i,t){var e={dataSource:{data:t,schema:{model:{id:"id",fields:{entity:{nullable:!0}},entityName:function(){return n.ObservableUtils.get(this,"entity.name")||""}}}},editable:!1,scrollable:!0,pageable:a.GridUtils.defaultPageable(),columns:[r.EntityUI.column({field:"entity",title:o.I18N.t("dashboards:components.CHECK_NAME.grid.entity"),width:200}),d.ColumnUtils.addStyle({command:[{name:"detailInfo",text:o.I18N.t("dashboards:components.CHECK_NAME.grid.detailTracked"),iconClass:"k-icon k-i-info",click:function(t){t.preventDefault();var e=i.data("kendoGrid");if(e){var n=$(t.target).closest("tr");!function(t){var e=t.trackedInfo;if(!s.isEmpty(e)&&e){var n=$("<div>").addClass("formWindow").appendTo($(document.body)),i=$("<div>").addClass("floatingGrid_100").appendTo(n);n.kendoWindow({modal:!0,width:1700,minWidth:300,visible:!1}),(new u.TrackingHitsGrid).createAndDisplay(i,e);var a=n.data("kendoWindow");a.title(o.I18N.t("dashboards:components.CHECK_NAME.window.detailTracked.title")),a.bind("close",function(){return kendo.destroy(n),n.remove(),!0}),o.I18N.localize(n),a.open().center()}}(e.dataItem(n).toJSON())}}}],title:o.I18N.t("dashboards:components.CHECK_NAME.grid.trackedInfo"),width:120},l.ColumnStyle.CENTER_ALIGNED),d.ColumnUtils.addStyle({field:"checkTimes",template:function(t){var e=t.checkTimes;return null===e||s.isEmpty(e)?"":"<span class='k-icon k-i-info'></span>"},title:o.I18N.t("dashboards:components.CHECK_NAME.grid.checkTimes"),width:100},l.ColumnStyle.CENTER_ALIGNED)],toolbar:[{name:"excel"}],dataBound:function(n){n.sender.items().each(function(t,e){var i=n.sender.dataItem(e);$("tr[data-uid='"+i.uid+"']").find(".k-command-cell").each(function(t,e){var n=i.get("trackedInfo");!s.isEmpty(n)&&n||$(e).find(".k-grid-detailInfo").hide()})})}};a.GridUtils.withDefaults(e),kendo.destroy(i),i.empty(),i.kendoGrid(e),i.kendoTooltip({filter:"td:nth-child(3)",position:"right",content:function(t){var e=t.target.closest("tr"),n=i.data("kendoGrid");return n&&e?function(t){if(!t)return"";var e=t.checkTimes;if(!e&&s.isEmpty(e))return"";var n=[];return s.forEach(e,function(t){n.push(kendo.toString(t.checkTime,"d"))}),n.join("<br/>")}(n.dataItem(e).toJSON()):""}})},t}();e.CheckNameGrid=i}),define("display/component/DisplayCheckName",["require","exports","dashboard/component/checkName/CheckNameGrid"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DisplayCheckName=void 0;var i=function(){function t(){}return t.display=function(t,e){n.CheckNameGrid.init(t,e)},t}();e.DisplayCheckName=i}),define("portfolio/views/viewer/DetailOwnerGrid",["require","exports","core/ui/grid/GridUtils","i18n","core/ui/PercentUI","object/web/ObjectMap"],function(t,e,a,r,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DetailOwnerGrid=void 0;var n=function(){function t(){}return t.create=function(t,e){kendo.destroy(t),t.empty();var n,i={dataSource:(n=e,{data:n,schema:{model:{id:"id",fields:{id:{type:"number"},name:{type:"string"},owner:{type:"number"}}}},sort:{field:"name",dir:"asc"}}),editable:!1,scrollable:!0,toolbar:[{name:"excel"}],pageable:a.GridUtils.defaultPageable(),height:500,columns:[{field:"name",title:r.I18N.t("data:fields.name"),template:function(t){var e=t.get("name"),n=t.get("id");return'<a href="'+kendo.htmlEncode(d.ObjectMap.objectEdit(n))+'">'+kendo.htmlEncode(e)+"</a>"},width:200},o.PercentUI.column({field:"owner",title:r.I18N.t("portfolio:columns.OWNER"),width:200})]};a.GridUtils.withDefaults(i),t.kendoGrid(i)},t}();e.DetailOwnerGrid=n}),define("text!templates/portfolios/detail.owners.window.html",[],function(){return'<div>\n\t<div id="detailOwners" class="floatGrid_100"></div>\n</div>'}),define("portfolio/views/viewer/DetailOwnerWindow",["require","exports","./DetailOwnerGrid","i18n","text!templates/portfolios/detail.owners.window.html"],function(t,e,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DetailOwnerWindow=void 0;var n=function(){function t(){}return t.displayDetailOwner=function(t){var e=kendo.template(o)({}),n=$("<div>").addClass("formWindow").appendTo($(document.body));n.html(e);n.kendoWindow({modal:!0,width:700,minWidth:300,visible:!1});var i=n.data("kendoWindow");i.title(r.I18N.t("portfolio:columns.detail.window.title")),i.bind("close",function(){return kendo.destroy(n),n.remove(),!0}),a.DetailOwnerGrid.create(n.find("#detailOwners"),t),r.I18N.localize(n),i.open().center()},t}();e.DetailOwnerWindow=n}),define("lp/data/PartnerState",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PartnerState=void 0;var r,o;(r=e.PartnerState||(e.PartnerState={}))[r.VALID=1]="VALID",r[r.PAYMENT_DUE=2]="PAYMENT_DUE",r[r.VALID_BLOCKED=3]="VALID_BLOCKED",r[r.PAYMENT_DUE_BLOCKED=4]="PAYMENT_DUE_BLOCKED",r[r.UNDEFINED=5]="UNDEFINED",(o=e.PartnerState||(e.PartnerState={})).getName=n.EnumUtils.createNameFn("lp:PartnerState",o),o.widget=i.EnumWidgetUtils.createDropList("DomosPartnerState",o,!0,!1),o.column=a.EnumColumnUtils.createFactory(o,o.widget)}),define("text!templates/lp/lp.operation.form.html",[],function(){return'<div>\n\t<h2 data-i18n="lp:summary.operation.title"></h2>\n\t<h3>\n\t\t<a data-bind="text: fundName, attr:{href: fundUrl}"></a>&nbsp\n\t\t<a data-bind="text: investorName, attr:{href: investorUrl}, invisible: isExtraction"></a>\n\t</h3>\n\t<table class="lpExplanationInputTable" data-bind="visible: isExtraction">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="investor" data-i18n="lp:summary.operation.investor">\n\t\t\t\t</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="investor" data-bind="value: investor"/>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="fundShare" data-i18n="lp:summary.operation.shareClass"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="shareClass" data-bind="value: shareClass"/>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\t<button class="k-button" data-bind="click: optionsClick, invisible: isExtraction" data-i18n="lp:summaries.options"></button>\n\t<p></p>\n\t<div id="operationGrid" class="floatingGrid_100"></div>\n</div>'}),define("text!templates/lp/operation.window.html",[],function(){return'<div id="lpExtractionWindow" class="formWindow">\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="fund" data-i18n="lp:summary.operation.fund"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="fund" data-role="domosvehiclel1" data-bind="value: fund" required />\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="investor" data-i18n="lp:summary.operation.investor"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="investor" data-role="dropdownlist"\n\t\t\t\t\t\t\tdata-bind="value: investor,  source:investorFundSource"\n\t\t\t\t\t\t\tdata-value-field="id"\n\t\t\t\t\t\t\tdata-text-field="name"\n\t\t\t\t\t\t\tdata-option-label="--"\n\t\t\t\t\t\t\tdata-auto-width="true"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="startDate" data-i18n="lp:summary.operation.startDate"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="startDate" data-role="datepicker" data-bind="value: startDate" />\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="endDate" data-i18n="lp:summary.operation.endDate"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="endDate" data-role="datepicker" data-bind="value: endDate" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="subscription" data-i18n="lp:summary.operation.subscription"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="subscription" type="checkbox" class="k-checkbox" data-bind="checked: subscription"/>\n\t\t\t\t<label for="subscription" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="capitalCall" data-i18n="lp:summary.operation.capitalCall"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="capitalCall" type="checkbox" class="k-checkbox" data-bind="checked: capitalCall"/>\n\t\t\t\t<label for="capitalCall" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="recallable" data-i18n="lp:summary.operation.recallable"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="recallable" type="checkbox" class="k-checkbox" data-bind="checked: recallable"/>\n\t\t\t\t<label for="recallable" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="netDistribution" data-i18n="lp:summary.operation.netDistribution"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="netDistribution" type="checkbox" class="k-checkbox" data-bind="checked: netDistribution"/>\n\t\t\t\t<label for="netDistribution" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="capitalCallSplit" data-i18n="lp:summary.operation.capitalCallSplit"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="capitalCallSplit" type="checkbox" class="k-checkbox" data-bind="checked: capitalCallSplit"/>\n\t\t\t\t<label for="capitalCallSplit" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="distributionSplit" data-i18n="lp:summary.operation.distributionSplit"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="distributionSplit" type="checkbox" class="k-checkbox" data-bind="checked: distributionSplit"/>\n\t\t\t\t<label for="distributionSplit" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t\t\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="fundTransfer" data-i18n="lp:summary.operation.fundTransfer"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="fundTransfer" type="checkbox" class="k-checkbox" data-bind="checked: fundTransfer"/>\n\t\t\t\t<label for="fundTransfer" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="redemption" data-i18n="lp:summary.operation.redemption"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="redemption" type="checkbox" class="k-checkbox" data-bind="checked: redemption"/>\n\t\t\t\t<label for="redemption" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="transparency" data-i18n="lp:summary.operation.transparency"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="transparency" type="checkbox" class="k-checkbox" data-bind="checked: transparency"/>\n\t\t\t\t<label for="transparency" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="paymentCapitalCall" data-i18n="lp:summary.operation.paymentCapitalCall"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="paymentCapitalCall" type="checkbox" class="k-checkbox" data-bind="checked: paymentCapitalCall"/>\n\t\t\t\t<label for="paymentCapitalCall" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="reserveTransfer" data-i18n="lp:summary.operation.reserveTransfer"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="reserveTransfer" type="checkbox" class="k-checkbox" data-bind="checked: reserveTransfer" />\n\t\t\t\t<label for="reserveTransfer" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="capitalCallTypes" data-i18n="lp:summary.operation.capitalCallTypes"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="capitalCallTypes" data-role="domoscapitalcalltypemulti" data-bind="value: capitalCallTypes" />\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="distributionTypes" data-i18n="lp:summary.operation.distributionTypes"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="distributionTypes" data-role="domosdistributiontypemulti" data-bind="value: distributionTypes" />\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\t<div class="formWindowButtons">\n\t\t<button class="k-primary" data-role="button" data-icon="check" data-bind="events:{click: okClick}">#=\n\t\t\t$.t("lp:summary.operation.actions.ok")#</button>\n\t\t<button data-role="button" data-icon="cancel" data-bind="click: closeClick">#= $.t("lp:summary.operation.actions.cancel")#</button>\n\t</div>\n</div>\n'}),define("core/ui/Information",["require","exports","jquery","kendo","../web/WebLocation","i18n"],function(t,e,d,l,s,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Information=void 0;var n=function(){function n(){}return n.confirm=function(r,o){return new Promise(function(){var t=d("<div>").appendTo(d(document.body)),e={modal:!0,width:400,minWidth:300,content:s.WebLocation.resolveHtml("information.window.html")};t.kendoWindow(e);var n=t.data("kendoWindow"),i={text:o,okClick:function(){n&&n.close()}},a=l.observable(i);n.bind("refresh",function(){u.I18N.localize(t),l.bind(t,a)}),n.title(r).open().center()})},n.error=function(t){var e=u.I18N.t("ui:information.error");return n.confirm(e,t)},n}();e.Information=n}),define("lp/views/summary/OperationWindow",["require","exports","jquery","kendo","i18n","text!templates/lp/operation.window.html","core/data/DObservableBuilder","core/ui/Information","object/repository/ObjectRepository","object/ui/VehicleUI","object/ui/EntityInvestorUI","lp/data/CapitalCallType","lp/data/NAVDistributionType"],function(t,e,u,c,p,m,f,b,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OperationWindow=void 0;var n=function(){function t(){}return t.open=function(t,e){return l=t,s=e,new Promise(function(t,e){var n=c.template(m)({}),i=u("<div>").appendTo(s);i.html(n);var a=i.find("#lpExtractionWindow"),r=a.kendoWindow({width:1300,minWidth:500,modal:!0,visible:!1,scrollable:!1}).data("kendoWindow"),o=null,d=f.DObservableBuilder.of(l).add("okClick",function(t){(t.get("capitalCall")||t.get("netDistribution")||t.get("recallable")||t.get("subscription")||t.get("redemption")||t.get("transparency")||t.get("paymentCapitalCall")||t.get("capitalCallSplit")||t.get("distributionSplit")||t.get("fundTransfer"))&&(t.get("fund")||t.get("investor"))?(o=t.toJson(),r.close()):b.Information.error(p.I18N.t("lp:summary.operation.actions.incorrectOptions"))}).add("closeClick",function(){o=null,r.close()}).add("investorFundSource",function(t){var e=t.get("fund"),n={transport:{read:function(t){v.ObjectRepository.fetchInvestorsByFundIdentifiables(null!==e?e.id:null).then(t.success).catch(t.error)}},schema:{model:{id:"id",fields:{name:{type:"string"}}}},sort:{field:"name",dir:"asc"}};return new c.data.DataSource(n)}).build();p.I18N.localize(a),d.bind(a),r.bind("close",function(){return c.destroy(i),i.remove(),c.destroy(a),a.empty(),a.remove(),t(o),!0}),r.title(p.I18N.t("lp:summaries.options")).open().center()});var l,s},t}();e.OperationWindow=n}),define("lp/views/overview/summary/OperationView",["require","exports","core/data/DObservableBuilder","i18n","text!templates/lp/lp.operation.form.html","object/web/ObjectMap","lp/views/summary/OperationWindow","operationsUtils/OperationsGrid","object/repository/ObjectRepository","core/util/Logger"],function(t,e,c,p,m,f,b,v,y,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OperationView=void 0;var g="#operationGrid";var n=function(){function t(){}return t.create=function(t,e,n){void 0===n&&(n=!1);var i,a,r,o,d=(i=e,a=t,r=n,o=c.DObservableBuilder.of(i).add("fundName",function(t){var e=t.get("fund");return e?e.name:""}).add("fundUrl",function(t){var e=t.get("fund");return e?f.ObjectMap.objectEdit(e.id):"javascript:void(0)"}).add("investorName",function(t){var e=t.get("investor");return e?e.name:""}).add("investorUrl",function(t){var e=t.get("investor");return e?f.ObjectMap.objectEdit(e.id):"javascript:void(0)"}).add("isExtraction",function(){return r}),r?o.add("investorExtractionUrl",function(t){var e=t.get("investor");return e?f.ObjectMap.objectEdit(e.id):"javascript:void(0)"}):o.add("optionsClick",function(e){b.OperationWindow.open(e.toJson(),a).then(function(t){t&&(e.update(t),a.find(g).data("kendoGrid").dataSource.read())}).catch(function(t){h.Logger.error(t)})}),o.build()),l={model:d.kendo(),init:function(t){var e=t.sender.element,n=d.get("fund"),i=e.find("#investor");!function(t,e){t.empty(),kendo.destroy(t);var n=e?{dataSource:{transport:{read:function(t){y.ObjectRepository.fetchVehicleFundShareIdentifiables(e.id).then(t.success).catch(t.error)}},schema:{model:{id:"id",fields:{name:{type:"string"}}}},sort:{field:"name",dir:"asc"}},autoWidth:!0,dataTextField:"name",dataValueField:"id",optionLabel:"--"}:{};t.kendoDropDownList(n)}(e.find("#shareClass"),n),function(t,e){t.empty(),kendo.destroy(t);var n={dataSource:{transport:{read:function(t){y.ObjectRepository.fetchInvestorsByFundIdentifiables(null!==e?e.id:null).then(t.success).catch(t.error)}},schema:{model:{id:"id",fields:{name:{type:"string"}}}},sort:{field:"name",dir:"asc"}},autoWidth:!0,dataTextField:"name",dataValueField:"id",optionLabel:"--"};t.kendoDropDownList(n)}(i,n),v.OperationsGrid.setup(e.find(g),v.OperationModuleType.LP_OPERATION,d,null),p.I18N.localize(e)}},s=kendo.template(m)({}),u=new kendo.View(s,l);u.render(t),d.bindChange(function(t,e){if("investor"===e||"shareClass"===e){var n=u.element.find(g).data("kendoGrid");n&&n.dataSource.read().fail(function(t){h.Logger.error(t)})}})},t}();e.OperationView=n}),define("dashboard/component/equity/data/DashboardEquityStandardColumn",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardEquityStandardColumn=void 0;var r,o;(r=e.DashboardEquityStandardColumn||(e.DashboardEquityStandardColumn={}))[r.PHONE=1]="PHONE",r[r.MAIL=2]="MAIL",r[r.STATE=3]="STATE",r[r.ADDRESSES=4]="ADDRESSES",r[r.QUANTITY=5]="QUANTITY",r[r.QUANTITY_SETTLED=6]="QUANTITY_SETTLED",r[r.QUANTITY_UNSETTLED=7]="QUANTITY_UNSETTLED",r[r.NAV=8]="NAV",r[r.NAV_SETTLED=9]="NAV_SETTLED",r[r.NAV_UNSETTLED=10]="NAV_UNSETTLED",r[r.COMMITMENT=11]="COMMITMENT",r[r.LAST_CALL_DATE=12]="LAST_CALL_DATE",r[r.LAST_DISTRIBUTION_DATE=13]="LAST_DISTRIBUTION_DATE",r[r.BIRTH_DATE=14]="BIRTH_DATE",r[r.BIRTH_PLACE=15]="BIRTH_PLACE",r[r.BANK_ACCOUNT=16]="BANK_ACCOUNT",r[r.BLOCKED_REASON=17]="BLOCKED_REASON",r[r.AML_RATING=18]="AML_RATING",r[r.PEP_STATUS=19]="PEP_STATUS",(o=e.DashboardEquityStandardColumn||(e.DashboardEquityStandardColumn={})).getName=n.EnumUtils.createNameFn("dashboards:DashboardEquityStandardColumn",o),o.widget=i.EnumWidgetUtils.createDropList("DomosDashboardEquityStandardColumn",o,!0),o.column=a.EnumColumnUtils.createFactory(o)}),define("dashboard/component/equity/data/ValuationColumn",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ValuationColumn=void 0;var r,o;(r=e.ValuationColumn||(e.ValuationColumn={}))[r.NET_ASSET_VALUE=1]="NET_ASSET_VALUE",r[r.FX_FROM_FUND_SHARE=2]="FX_FROM_FUND_SHARE",r[r.QUANTITY=3]="QUANTITY",r[r.VALUE_PER_UNIT=4]="VALUE_PER_UNIT",r[r.MANAGEMENT_FEES=5]="MANAGEMENT_FEES",r[r.OTHER_FEES=6]="OTHER_FEES",r[r.REALLOCATION_GP=7]="REALLOCATION_GP",r[r.REALIZED_GAIN_EQUITY=8]="REALIZED_GAIN_EQUITY",r[r.REALIZED_LOSS_EQUITY=9]="REALIZED_LOSS_EQUITY",r[r.REALIZED_GAIN_FX_EQUITY=10]="REALIZED_GAIN_FX_EQUITY",r[r.REALIZED_LOSS_FX_EQUITY=11]="REALIZED_LOSS_FX_EQUITY",r[r.REALIZED_GAIN_BOND=12]="REALIZED_GAIN_BOND",r[r.REALIZED_LOSS_BOND=13]="REALIZED_LOSS_BOND",r[r.REALIZED_GAIN_FX=14]="REALIZED_GAIN_FX",r[r.REALIZED_LOSS_FX=15]="REALIZED_LOSS_FX",r[r.UNREALIZED_GAIN_EQUITY=16]="UNREALIZED_GAIN_EQUITY",r[r.UNREALIZED_LOSS_EQUITY=17]="UNREALIZED_LOSS_EQUITY",r[r.UNREALIZED_GAIN_FX_EQUITY=18]="UNREALIZED_GAIN_FX_EQUITY",r[r.UNREALIZED_LOSS_FX_EQUITY=19]="UNREALIZED_LOSS_FX_EQUITY",r[r.UNREALIZED_GAIN_BOND=20]="UNREALIZED_GAIN_BOND",r[r.UNREALIZED_LOSS_BOND=21]="UNREALIZED_LOSS_BOND",r[r.UNREALIZED_GAIN_FX=22]="UNREALIZED_GAIN_FX",r[r.UNREALIZED_LOSS_FX=23]="UNREALIZED_LOSS_FX",r[r.DIVIDEND=24]="DIVIDEND",r[r.INTEREST=25]="INTEREST",r[r.OTHER_INCOME=26]="OTHER_INCOME",r[r.ADJUSTMENT=27]="ADJUSTMENT",r[r.DISTRIBUTION=28]="DISTRIBUTION",r[r.CAPITAL_CALL=29]="CAPITAL_CALL",(o=e.ValuationColumn||(e.ValuationColumn={})).getName=n.EnumUtils.createNameFn("dashboards:ValuationColumn",o),o.widget=i.EnumWidgetUtils.createDropList("DomosValuationColumn",o,!0),o.column=a.EnumColumnUtils.createFactory(o)}),define("dashboard/component/equity/data/EquityValueType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquityValueType=void 0;var r,o;(r=e.EquityValueType||(e.EquityValueType={}))[r.TOTAL_RECEIVED=1]="TOTAL_RECEIVED",r[r.TOTAL_RESERVE=2]="TOTAL_RESERVE",r[r.TOTAL_RECALLABLE=3]="TOTAL_RECALLABLE",r[r.TOTAL_DISTRIBUTION=4]="TOTAL_DISTRIBUTION",r[r.TOTAL_PLEDGE=5]="TOTAL_PLEDGE",r[r.AMOUNT_LAST_CALL=6]="AMOUNT_LAST_CALL",r[r.PREMIUM_LAST_CALL=7]="PREMIUM_LAST_CALL",r[r.FEES_LAST_CALL=8]="FEES_LAST_CALL",r[r.RESERVE_LAST_CALL=9]="RESERVE_LAST_CALL",r[r.PREVIOUS_TOTAL_AMOUNT=10]="PREVIOUS_TOTAL_AMOUNT",r[r.LAST_DISTRIBUTION=11]="LAST_DISTRIBUTION",r[r.RESERVE_LAST_DISTRIBUTION=12]="RESERVE_LAST_DISTRIBUTION",r[r.LAST_RECALLABLE=13]="LAST_RECALLABLE",r[r.LAST_PLEDGE=14]="LAST_PLEDGE",(o=e.EquityValueType||(e.EquityValueType={})).getName=n.EnumUtils.createNameFn("dashboards:EquityValueType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosEquityValueType",o,!0),o.column=a.EnumColumnUtils.createFactory(o)}),define("dashboard/component/equity/data/DashboardEquitySectionType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardEquitySectionType=void 0;var r,o;(r=e.DashboardEquitySectionType||(e.DashboardEquitySectionType={}))[r.STANDARD=1]="STANDARD",r[r.VALUES=2]="VALUES",r[r.TAG=3]="TAG",r[r.LAST_VALUATION=4]="LAST_VALUATION",r[r.AGGREGATION=5]="AGGREGATION",r[r.PREVIOUS_VALUATION=6]="PREVIOUS_VALUATION",r[r.CAPITAL_CALL_SPLIT=7]="CAPITAL_CALL_SPLIT",r[r.NET_CAPITAL_CALL_SPLIT=8]="NET_CAPITAL_CALL_SPLIT",r[r.DISTRIBUTION_SPLIT=9]="DISTRIBUTION_SPLIT",r[r.FINANCE=10]="FINANCE",(o=e.DashboardEquitySectionType||(e.DashboardEquitySectionType={})).getName=n.EnumUtils.createNameFn("dashboards:DashboardEquitySectionType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosDashboardEquitySectionType",o,!0),o.column=a.EnumColumnUtils.createFactory(o)}),define("object/views/blockedPeriod/BlockedReasonType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BlockedReasonType=void 0;var r,o;(r=e.BlockedReasonType||(e.BlockedReasonType={}))[r.BLOCKED_AML_FT=1]="BLOCKED_AML_FT",r[r.BLOCKED_KYC=2]="BLOCKED_KYC",r[r.COMPLIANT_BLOCKED_DIVIDENDS=3]="COMPLIANT_BLOCKED_DIVIDENDS",r[r.NOT_COMPLIANT=4]="NOT_COMPLIANT",r[r.NOT_COMPLIANT_OK_CAPITAL_CALL=5]="NOT_COMPLIANT_OK_CAPITAL_CALL",r[r.REJECTED_AML_FT=6]="REJECTED_AML_FT",r[r.REJECTED_KYC=7]="REJECTED_KYC",(o=e.BlockedReasonType||(e.BlockedReasonType={})).getName=n.EnumUtils.createNameFn("data:BlockedReasonType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosBlockedReasonType",o,!0,!0),o.column=a.EnumColumnUtils.createFactory(o,o.widget)}),define("dashboard/component/equity/data/EquityAddressColumnType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquityAddressColumnType=void 0;var r,o;(r=e.EquityAddressColumnType||(e.EquityAddressColumnType={}))[r.LEGAL_ADDRESS=1]="LEGAL_ADDRESS",r[r.LEGAL_POSTAL_CODE=2]="LEGAL_POSTAL_CODE",r[r.LEGAL_CITY=3]="LEGAL_CITY",r[r.LEGAL_COUNTRY=4]="LEGAL_COUNTRY",r[r.MAILING_ADDRESS=5]="MAILING_ADDRESS",r[r.MAILING_POSTAL_CODE=6]="MAILING_POSTAL_CODE",r[r.MAILING_CITY=7]="MAILING_CITY",r[r.MAILING_COUNTRY=8]="MAILING_COUNTRY",(o=e.EquityAddressColumnType||(e.EquityAddressColumnType={})).getName=n.EnumUtils.createNameFn("dashboards:EquityAddressColumnType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosEquityAddressColumnType",o,!0),o.column=a.EnumColumnUtils.createFactory(o)}),define("dashboard/component/equity/ui/EquityViewerColumn",["require","exports","ui/grid/tag.columns","lodash","finance/data/FinancialValueCategory","core/ui/NumberUI","tag/data/TagDefinitions","../data/DashboardEquityStandardColumn","../data/ValuationColumn","history/data/CapitalCallSplitType","history/data/DistributionSplitType","../data/EquityValueType","lp/data/PartnerState","../data/DashboardEquitySectionType","i18n","finance/ui/FinancialValueUI","core/ui/DateUI","object/views/blockedPeriod/BlockedReasonType","core/api/TagType","core/api/TagTarget","../data/EquityAddressColumnType"],function(t,e,r,o,d,n,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C){"use strict";function w(t,e,n){var i=n.get(t);return o.chain(o.filter(i,function(t){return t.type===e})).map(function(t){return t.value.toString()}).join("; ").value()}Object.defineProperty(e,"__esModule",{value:!0}),e.EquityViewerColumn=void 0;var a=function(t,e){return e instanceof kendo.data.ObservableObject?e.get(t):o.get(e,t)},k=function(t,e){var n=a(t,e);return n||""};function E(t,e){var n=t.field;if(!n)return t;if(!e)return t;switch(e.type){case T.TagType.BOOLEAN:t.template=k.bind(null,n),t.dmsExcel=k.bind(null,n);break;default:var i=t.format;t.template=function(t){var e=a(n,t);return o.isNil(e)?"":i?kendo.format(i,e):e}}return t}function D(t){return E(n.NumberUI.column(t))}function S(t){return h.DateUI.column({field:t,title:v.I18N.t("lp:equity."+t),width:150})}function N(t){return{field:"entity."+t}}function i(t){var e,n,i=null;switch(t.section){case b.DashboardEquitySectionType.STANDARD:switch(t.standard){case s.DashboardEquityStandardColumn.ADDRESSES:(i=function(t){switch(t){case C.EquityAddressColumnType.LEGAL_ADDRESS:return{field:"legalAddress()"};case C.EquityAddressColumnType.LEGAL_CITY:return{field:"legalCity()"};case C.EquityAddressColumnType.LEGAL_COUNTRY:return{field:"legalCountry()"};case C.EquityAddressColumnType.LEGAL_POSTAL_CODE:return{field:"legalPostalCode()"};case C.EquityAddressColumnType.MAILING_ADDRESS:return{field:"mailingAddress()"};case C.EquityAddressColumnType.MAILING_CITY:return{field:"mailingCity()"};case C.EquityAddressColumnType.MAILING_COUNTRY:return{field:"mailingCountry()"};case C.EquityAddressColumnType.MAILING_POSTAL_CODE:return{field:"mailingPostalCode()"};default:return null}}(t.addressType))&&(i.title=C.EquityAddressColumnType.getName(t.addressType)||"",i.width=200);break;case s.DashboardEquityStandardColumn.PHONE:i=N("phone");break;case s.DashboardEquityStandardColumn.MAIL:i=N("mail");break;case s.DashboardEquityStandardColumn.STATE:i=f.PartnerState.column(i={field:"state"});break;case s.DashboardEquityStandardColumn.QUANTITY_SETTLED:i=D({field:"quantitySettled"});break;case s.DashboardEquityStandardColumn.QUANTITY:i=D({field:"quantity"});break;case s.DashboardEquityStandardColumn.QUANTITY_UNSETTLED:i=D({field:"quantityUnsettled"});break;case s.DashboardEquityStandardColumn.NAV:i=D({field:"nav"});break;case s.DashboardEquityStandardColumn.NAV_SETTLED:i=D({field:"navSettled"});break;case s.DashboardEquityStandardColumn.NAV_UNSETTLED:i=D({field:"navUnsettled"});break;case s.DashboardEquityStandardColumn.COMMITMENT:i=D({field:"commitment"});break;case s.DashboardEquityStandardColumn.LAST_CALL_DATE:i=S("lastCallDate");break;case s.DashboardEquityStandardColumn.LAST_DISTRIBUTION_DATE:i=S("lastDistributionDate");break;case s.DashboardEquityStandardColumn.BIRTH_DATE:i=h.DateUI.column({field:"entity.birthDate",width:150});break;case s.DashboardEquityStandardColumn.BIRTH_PLACE:i=h.DateUI.column({field:"entity.placeOfBirth",width:150});break;case s.DashboardEquityStandardColumn.BANK_ACCOUNT:i={field:"entity.bankAccount"};break;case s.DashboardEquityStandardColumn.BLOCKED_REASON:n={field:e="reason",title:v.I18N.t("lp:equity."+e),width:300},i=g.BlockedReasonType.column(n);break;default:i=null}i&&!i.title&&(i.title=s.DashboardEquityStandardColumn.getName(t.standard)||"");break;case b.DashboardEquitySectionType.CAPITAL_CALL_SPLIT:if(i=t.capitalCallSplit?{field:c.CapitalCallSplitType[t.capitalCallSplit]}:null){var a=v.I18N.t("dashboards:components.fields.equity.capitalCallSplit");i.title=a+" : "+(c.CapitalCallSplitType.getName(t.capitalCallSplit)||""),i.template=w.bind(null,"capitalCallSplits",t.capitalCallSplit),i.width=300}break;case b.DashboardEquitySectionType.DISTRIBUTION_SPLIT:if(i=t.distributionSplit?{field:p.DistributionSplitType[t.distributionSplit]}:null){a=v.I18N.t("dashboards:components.fields.equity.distributionSplit");i.title=a+" : "+(p.DistributionSplitType.getName(t.distributionSplit)||""),i.template=w.bind(null,"distributionSplits",t.distributionSplit),i.width=300}break;case b.DashboardEquitySectionType.LAST_VALUATION:switch(t.valuation){case u.ValuationColumn.ADJUSTMENT:i=D({field:"adjustment"});break;case u.ValuationColumn.FX_FROM_FUND_SHARE:i=D({field:"fx"});break;case u.ValuationColumn.INTEREST:i=D({field:"interest"});break;case u.ValuationColumn.MANAGEMENT_FEES:i=D({field:"managementFees"});break;case u.ValuationColumn.OTHER_FEES:i=D({field:"otherFees"});break;case u.ValuationColumn.NET_ASSET_VALUE:i=D({field:"value"});break;case u.ValuationColumn.OTHER_INCOME:i=D({field:"otherIncomes"});break;case u.ValuationColumn.QUANTITY:i=D({field:"quantity"});break;case u.ValuationColumn.REALIZED_GAIN_BOND:i=D({field:"realizedGainBond"});break;case u.ValuationColumn.REALIZED_GAIN_EQUITY:i=D({field:"realizedGainEquity"});break;case u.ValuationColumn.REALIZED_GAIN_FX:i=D({field:"realizedGainFx"});break;case u.ValuationColumn.REALIZED_GAIN_FX_EQUITY:i=D({field:"realizedGainFxEquity"});break;case u.ValuationColumn.REALIZED_LOSS_BOND:i=D({field:"realizedLossBond"});break;case u.ValuationColumn.REALIZED_LOSS_EQUITY:i=D({field:"realizedLossEquity"});break;case u.ValuationColumn.REALIZED_LOSS_FX:i=D({field:"realizedLossFx"});break;case u.ValuationColumn.REALIZED_LOSS_FX_EQUITY:i=D({field:"realizedLossFxEquity"});break;case u.ValuationColumn.REALLOCATION_GP:i=D({field:"reallocationGP"});break;case u.ValuationColumn.UNREALIZED_GAIN_BOND:i=D({field:"unrealizedGainBond"});break;case u.ValuationColumn.UNREALIZED_LOSS_BOND:i=D({field:"unrealizedLossBond"});break;case u.ValuationColumn.UNREALIZED_GAIN_FX:i=D({field:"unrealizedGainFx"});break;case u.ValuationColumn.UNREALIZED_LOSS_FX:i=D({field:"unrealizedLossFx"});break;case u.ValuationColumn.UNREALIZED_GAIN_EQUITY:i=D({field:"unrealizedGainEquity"});break;case u.ValuationColumn.UNREALIZED_LOSS_EQUITY:i=D({field:"unrealizedLossEquity"});break;case u.ValuationColumn.UNREALIZED_GAIN_FX_EQUITY:i=D({field:"unrealizedGainFxEquity"});break;case u.ValuationColumn.UNREALIZED_LOSS_FX_EQUITY:i=D({field:"unrealizedLossFxEquity"});break;case u.ValuationColumn.DIVIDEND:i=D({field:"realizedLossFx"});break;case u.ValuationColumn.DISTRIBUTION:i=D({field:"realizedLossFxEquity"});break;case u.ValuationColumn.CAPITAL_CALL:i=D({field:"capitalCall"});break;case u.ValuationColumn.VALUE_PER_UNIT:i=D({field:"valuePerUnit"});break;default:i=null}i&&(i.title=u.ValuationColumn.getName(t.valuation)||"");break;case b.DashboardEquitySectionType.VALUES:switch(t.equityValue){case m.EquityValueType.AMOUNT_LAST_CALL:i=D({field:"lastCallAmount"});break;case m.EquityValueType.FEES_LAST_CALL:i=D({field:"lastCallFees"});break;case m.EquityValueType.LAST_DISTRIBUTION:i=D({field:"lastDistribution"});break;case m.EquityValueType.LAST_PLEDGE:i=D({field:"lastPledge"});break;case m.EquityValueType.LAST_RECALLABLE:i=D({field:"lastRecallable"});break;case m.EquityValueType.PREMIUM_LAST_CALL:i=D({field:"lastCallPremium"});break;case m.EquityValueType.PREVIOUS_TOTAL_AMOUNT:i=D({field:"previousTotalAmount"});break;case m.EquityValueType.RESERVE_LAST_CALL:i=D({field:"lastCallReserve"});break;case m.EquityValueType.RESERVE_LAST_DISTRIBUTION:i=D({field:"lastDistributionReserve"});break;case m.EquityValueType.TOTAL_DISTRIBUTION:i=D({field:"totalDistribution"});break;case m.EquityValueType.TOTAL_PLEDGE:i=D({field:"totalPledge"});break;case m.EquityValueType.TOTAL_RECALLABLE:i=D({field:"totalRecallable"});break;case m.EquityValueType.TOTAL_RECEIVED:i=D({field:"totalReceived"});break;case m.EquityValueType.TOTAL_RESERVE:i=D({field:"totalReserve"});break;default:i=null}i&&(i.title=m.EquityValueType.getName(t.equityValue)||"");break;case b.DashboardEquitySectionType.TAG:i=function(t){var e=l.TagDefinitions.get(t);if(!e)return null;var n=null;switch(e.target){case I.TagTarget.HISTORY:n="entity.history.tag"+e.id;break;case I.TagTarget.OBJECT:n="entity.tags.tag"+e.id}var i=o.isNil(t)?"":l.TagDefinitions.getName(t.id),a=r.createColumn(e,250,null,i,n);return o.includes([T.TagType.SELECT,T.TagType.MULTIPLE],e.type)?a:E(a,e)}(t.tag);break;case b.DashboardEquitySectionType.FINANCE:i=function(t){if(!t)return null;var e={field:"financial.fn"+t,title:d.FinancialValueCategory.getName(t)};return y.FinancialValueUI.column(d.FinancialValueCategory.getType(t),e)}(t.finance);break;default:i=null}return i}var x=function(){function t(){}return t.create=function(t){var e=i(t);return e?(e.hidden=!1,e.width||(e.width=250),e):null},t}();e.EquityViewerColumn=x}),define("basic/data/AddressType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AddressType=void 0;var r,o;(r=e.AddressType||(e.AddressType={}))[r.LEGAL=1]="LEGAL",r[r.MAILING=2]="MAILING",r[r.TAX=3]="TAX",(o=e.AddressType||(e.AddressType={})).getName=a.EnumUtils.createNameFn("object:AddressType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAddressType",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("lp/views/overview/equity/LpEquityValueGrid",["require","exports","kendo","i18n","core/ui/NumberUI","core/ui/DateUI","core/ui/grid/GridUtils","core/ui/Confirmation","lp/data/PartnerState","../summary/OperationView","object/ui/ObjectUI","core/util/ObservableUtils","dashboard/component/equity/ui/EquityViewerColumn","lodash","object/views/blockedPeriod/BlockedReasonType","basic/data/AddressType","basic/data/Countries","finance/data/FinancialValueCategory","finance/ui/FinancialValueUI"],function(t,e,f,b,n,i,p,v,m,y,h,a,g,T,I,r,o,C,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpEquityValueGrid=void 0;function u(t){var e=t.previousTotalAmount+t.lastCallAmount+t.lastCallFees+t.lastCallReserve;return Math.abs(e-t.totalReceived)<.01}var l=function(t,e){var n=a.ObservableUtils.get(t,"entity.addresses")||[];return T.first(T.filter(n,function(t){return t.type===e}))};function w(t){var e=function(t){for(var e=[],n=0,i=t;n<i.length;n++){var a=i[n],r=a;r.object=a.shareClass,r.shareClass=a.shareClass,r.partner=null,r.parentId=null,r.valid=u(a),e.push(r);for(var o=0,d=a.partnerValues;o<d.length;o++){var l=d[o],s=l;s.object=l.partner,s.shareClass=a.shareClass,s.partner=l.partner,s.parentId=a.id,s.valid=u(l),e.push(s)}}return e}(t);return new f.data.TreeListDataSource({data:e,schema:{model:{id:"id",expanded:!0,objectName:function(){return a.ObservableUtils.get(this,"object.name")||""},legalAddress:function(){var t=l(this,r.AddressType.LEGAL);return f.htmlEncode(t?t.streetNumber+" "+t.street:"")},legalCity:function(){var t=l(this,r.AddressType.LEGAL);return f.htmlEncode(t?t.city:"")},legalCountry:function(){var t=l(this,r.AddressType.LEGAL);return f.htmlEncode(t?o.Countries.getName(t.country):"")},legalPostalCode:function(){var t=l(this,r.AddressType.LEGAL);return f.htmlEncode(t?t.postalCode:"")},mailingAddress:function(){var t=l(this,r.AddressType.MAILING);return f.htmlEncode(t?t.streetNumber+" "+t.street:"")},mailingCity:function(){var t=l(this,r.AddressType.MAILING);return f.htmlEncode(t?t.city:"")},mailingCountry:function(){var t=l(this,r.AddressType.MAILING);return f.htmlEncode(t?o.Countries.getName(t.country):"")},mailingPostalCode:function(){var t=l(this,r.AddressType.MAILING);return f.htmlEncode(t?t.postalCode:"")}}},sort:{field:"objectName()",dir:"asc"},filter:[{field:"quantity",operator:"neq",value:0}]})}function k(t){var e={field:t,title:b.I18N.t("lp:equity."+t),width:150};return n.NumberUI.column(e)}function E(t){if(!t)return null;var e={field:"financial.fn"+t,title:C.FinancialValueCategory.getName(t),width:300};return d.FinancialValueUI.column(C.FinancialValueCategory.getType(t),e)}function D(t){return i.DateUI.column({field:t,title:b.I18N.t("lp:equity."+t),width:150})}var s=function(){function t(){}return t.display=function(t,e,n,i){void 0===i&&(i=[]);var a=[{name:"excel"}];e&&a.push({name:"operation",text:b.I18N.t("lp:summaries.operations"),click:function(){return function(t,e){if(t){var n,i=null,a=e.data("kendoTreeList");if(a){var r=a.select();if(0<r.length){var o=a.dataItem(r);n=o.get("shareClass"),i=o.get("partner")}}var d=$("#tabStrip").data("kendoTabStrip"),l={fund:t,investor:i,shareClass:n,stratDate:null,endDate:null,subscription:!0,capitalCall:!0,recallable:!0,netDistribution:!0,capitalCallSplit:!0,distributionSplit:!0,fundTransfer:!0,redemption:!0,transparency:!1,reserveTransfer:!0,paymentCapitalCall:!0,distributionTypes:[],capitalCallTypes:[]},s=f.guid(),u="#"+s,c=s+"-icon-close",p="#"+c,m=b.I18N.t("lp:summary.operationExtraction.title")+" "+t.name;d.insertAfter({text:m+' <span id="'+c+'" class="k-icon k-i-x"></span>',encoded:!1,content:'<div id="'+s+'"></div>'},d.tabGroup.children().eq(0)),y.OperationView.create($(u),l,!0),d.select(1),$(p).click(function(t){var e=$(t.target).closest(".k-item");v.Confirmation.confirm(m,b.I18N.t("lp:summary.operationExtraction.actions.confirmRemove",{text:e.text()})).then(function(t){t&&(f.destroy(e),e.empty(),d.select(0),d.remove(e.index()))})})}}(e,t)}});var r,o,d,l,s=[h.ObjectUI.column({field:"object",title:b.I18N.t("lp:equity.name"),width:200})];if(T.isEmpty(i)){s.push(k("commitment")),s.push(D("lastCallDate")),s.push(D("lastDistributionDate")),s.push((l={field:d="state",title:b.I18N.t("lp:equity."+d),width:150},m.PartnerState.column(l))),s.push(k("quantity")),s.push(k("nav")),s.push(k("totalReceived")),s.push(k("totalReserve")),s.push(k("totalRecallable")),s.push(k("totalDistribution")),s.push(k("totalPledge")),s.push(k("lastCallAmount")),s.push(k("lastCallPremium")),s.push(k("lastCallFees")),s.push(k("lastCallReserve")),s.push(k("previousTotalAmount")),s.push(k("lastDistribution")),s.push(k("lastDistributionReserve")),s.push(k("lastRecallable")),s.push(k("lastPledge")),s.push(k("quantitySettled")),s.push(k("quantityUnsettled")),s.push(k("navSettled")),s.push(k("navUnsettled"));var u=E(C.FinancialValueCategory.CAPITAL_CALL);u&&s.push(u),(u=E(C.FinancialValueCategory.DISTRIBUTION))&&s.push(u),s.push((o={field:r="reason",title:b.I18N.t("lp:equity."+r),width:300},I.BlockedReasonType.column(o)))}else i.forEach(function(t){var e=g.EquityViewerColumn.create(t);e&&s.push(e)});var c={dataSource:w(n),columns:s,editable:!1,selectable:!0,scrollable:!0,pageable:p.GridUtils.defaultPageable(),height:740,toolbar:a};p.GridUtils.withDefaults(c),t.kendoTreeList(c)},t}();e.LpEquityValueGrid=s}),define("core/web/AsyncHttp",["require","exports","tslib","core/util/CancelToken","core/util/Logger","core/util/PromiseUtils","./WebHttp"],function(t,e,u,c,p,m,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncHttp=void 0;var b=function(t){var e;return{percent:0<t.total?(e=t.current/t.total,Math.max(0,Math.min(1,e))):void 0,cancelled:t.cancelled,done:!!t.cancelled||!!t.result||void 0}};e.AsyncHttp={get:function(t){var o=t.url,d=t.configuration,l=t.cancel,s=t.progress;return u.__awaiter(void 0,void 0,void 0,function(){var e,n,i,a,r;return u.__generator(this,function(t){switch(t.label){case 0:return l=l||c.CancelToken.source().token,s=s||function(){},e={data:JSON.stringify(d||{})},[4,f.WebHttp.postJson(o,e,l)];case 1:n=t.sent(),s(b(n)),i=n._id,l.promise.then(function(){return f.WebHttp.destroyJson(o,{id:i})}).catch(function(t){return p.Logger.error(t)}),a=0,t.label=2;case 2:return a<1e3?[4,m.PromiseUtils.wait(2e3,l)]:[3,6];case 3:return t.sent(),[4,f.WebHttp.getJson(o,{id:i},l)];case 4:if(r=t.sent(),s(b(r)),r.result)return[2,r.result];t.label=5;case 5:return++a,[3,2];case 6:throw new Error("Request timeout")}})})}}}),define("dashboard/web/DashboardMap",["require","exports","core/web/WebLocation"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardMap=void 0;var i=function(){function t(){}return t.perimeterEdit=function(t){return t?n.WebLocation.resolveKendo("/dashboards/perimeter/"+t):"javascript:void(0)"},t.dashboardEdit=function(t){return t?n.WebLocation.resolveKendo("/dashboards/dashboard/edit/"+t):"javascript:void(0)"},t.ENGINE_ASYNC=n.WebLocation.resolve("/board/engine"),t}();e.DashboardMap=i}),define("dashboard/repository/DashboardEngineRepository",["require","exports","core/web/AsyncHttp","dashboard/web/DashboardMap"],function(t,e,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardEngineRepository=void 0;var n=function(){function t(){}return t.compute=function(t,e){var n=a.DashboardMap.ENGINE_ASYNC;return i.AsyncHttp.get({url:n,configuration:t,cancel:e})},t}();e.DashboardEngineRepository=n}),function(){var dn;dn="16px Arial,Helvetica,sans-serif",define("views/dashboards/engine/engine",["jquery","lodash","i18n","kendo","site","core/ui/grid/GridUtils","portfolio/data/ColumnAggregation","tag/data/TagDefinitions","ui/grid/tag.columns","history/data/Histories","core/api/HistoryType","core/api/TagType","core/api/DashboardComponentType","core/api/DashboardSize","core/api/DashboardDisplay","dashboard/data/DashboardType","core/api/ChartType","core/api/ChartHistoricalType","core/api/ReportingFilingType","core/api/ReportingPeriodType","core/api/ReportingSource","core/api/ObjectFieldType","core/api/ComputationMethod","portfolio/views/viewer/PortfolioViewerColumnFactory","views/risk/risk.overview.details","core/api/DashboardDebtFrequency","basic/data/Currencies","basic/ui/CurrencyUI","core/ui/DateUI","core/ui/IntegerUI","core/ui/YearUI","core/ui/PercentUI","core/ui/NumberUI","display/component/DisplayTableComponent","display/component/DTableComponent","finance/data/FinancialValueCategory","compliance/views/overview/ComplianceOverviewTreeList","lp/views/overview/summary/LpCapitalCallSummaryGrid","lp/views/overview/summary/LpDistributionSummaryGrid","lp/views/overview/summary/LpCommitmentSummaryTreeList","dashboard/component/capitalAccount/CapitalAccountDisplay","operationsUtils/OperationsGrid","display/component/DisplayCheckName","core/ui/grid/GridDetailCommand","portfolio/views/viewer/DetailOwnerWindow","lp/views/overview/equity/LpEquityValueGrid","dashboard/component/equity/ui/EquityViewerColumn","dashboard/repository/DashboardEngineRepository","core/util/ObservableUtils"],function(w,k,f,c,t,e,n,i,a,r,o,d,l,s,u,p,m,b,v,y,h,g,T,I,C,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K){var $,Q,z,X,Z,tt,et,nt,it,at,rt,ot,dt,lt,st,ut,ct,pt,mt,ft,bt,vt,yt,ht,gt,Tt,It,Ct,wt,kt,Et,Dt,St,Nt,xt,Rt,_t,Ot,Ut,At,Ft,Lt,Pt,Mt,jt,Gt,qt,Bt,Vt,Wt,Ht,Yt,Jt,Kt,$t,Qt,zt,Xt,Zt,te,ee,ne,ie,ae,re,oe,de,le,se,ue,ce,pe,me,fe,be,ve,ye,he,ge,Te,Ie,Ce,we,ke,Ee,De,Se,Ne,xe,Re,_e,Oe,Ue,Ae,Fe,Le,Pe,Me,je,Ge,qe,Be,Ve,We,He,Ye,Je,Ke,$e,Qe,ze,Xe,Ze,tn,en,nn,an,rn,on;return ft=U.DisplayTableComponent,at=A.DTableComponent,wt=O.NumberUI,Nt=_.PercentUI,Ft=R.YearUI,It=x.IntegerUI,ct=N.DateUI,D.Currencies,it=S.CurrencyUI,gt=r.Histories,Tt=o.HistoryType,At=d.TagType,nt=T.ComputationMethod,rt=l.DashboardComponentType,Ot=h.ReportingSource,_t=y.ReportingPeriodType,Rt=v.ReportingFilingType,X=m.ChartType,z=b.ChartHistoricalType,dt=u.DashboardDisplay,st=s.DashboardSize,ut=p.DashboardType,kt=g.ObjectFieldType,Ut=i.TagDefinitions,et=L.ComplianceOverviewTreeList,ht=e.GridUtils,ot=E.DashboardDebtFrequency,vt=F.FinancialValueCategory,Q=P.LpCapitalCallSummaryGrid,bt=M.LpDistributionSummaryGrid,tt=j.LpCommitmentSummaryTreeList,$=G.CapitalAccountDisplay,St=q.OperationsGrid,Dt=q.OperationModuleType,mt=B.DisplayCheckName,xt=I.PortfolioViewerColumnFactory,Z=n.ColumnAggregation,yt=V.GridDetailCommand,pt=W.DetailOwnerWindow,Ct=H.LpEquityValueGrid,Y.EquityViewerColumn,Et=K.ObservableUtils,lt=J.DashboardEngineRepository,be=function(t,e){var n;return n=w("<ul>").addClass("boardIdDisplay").appendTo(t),w("<li>").text("ID: "+e.id).appendTo(n),w("<li>").text("SID: "+e.stringId).appendTo(n),w("<li>").text("CID: "+e.customId).appendTo(n),w("<li>").text("Name: "+e.name).appendTo(n),null},Le=function(t){switch(t){case st.HALF:return"boardHalf";case st.TWO_THIRDS:return"boardTwoThird";case st.FULL:return"boardFull";default:return"boardThird"}},Fe=function(t){switch(t){case st.HALF:return"a4Half";case st.TWO_THIRDS:return"a4TwoThird";case st.FULL:return"a4Full";default:return"a4Third"}},Ae=function(t,e){return t===dt.A4?Fe(e.size):Le(e.size)},je=function(t){switch(t){case st.HALF:return"boardTextHalf";case st.TWO_THIRDS:return"boardTextTwoThird";case st.FULL:return"boardTextFull";default:return"boardTextThird"}},Me=function(t){switch(t){case st.HALF:return"a4TextHalf";case st.TWO_THIRDS:return"a4TextTwoThird";case st.FULL:return"a4TextFull";default:return"a4TextThird"}},Pe=function(t,e){return t===dt.A4?Me(e.size):je(e.size)},Ue=function(t){switch(t){case st.HALF:return"boardRiskHalf";case st.TWO_THIRDS:return"boardRiskTwoThird";case st.FULL:return"boardRiskFull";default:return"boardRiskThird"}},Oe=function(t){switch(t){case st.HALF:return"a4RiskHalf";case st.TWO_THIRDS:return"a4RiskTwoThird";case st.FULL:return"a4RiskFull";default:return"a4RiskThird"}},_e=function(t,e){return t===dt.A4?Oe(e.size):Ue(e.size)},xe=function(t){switch(t){case st.HALF:return"boardFolioHalf";case st.TWO_THIRDS:return"boardFolioTwoThird";case st.FULL:return"boardFolioFull";default:return"boardFolioThird"}},Ne=function(t){switch(t){case st.HALF:return"a4FolioHalf";case st.TWO_THIRDS:return"a4FolioTwoThird";case st.FULL:return"a4FolioFull";default:return"a4FolioThird"}},Se=function(t,e){return t===dt.A4?Ne(e.size):xe(e.size)},Re=function(t){switch(t.chart){case z.COLUMN:return{type:"column",stack:t.stack};case z.LINE:return{type:"line",stack:t.stack,style:"smooth"};case z.AREA:return{type:"area",stack:t.stack,line:{style:"smooth"}}}return null},Lt=function(t,e){return(e.newLine||e.pageBreak)&&w("<div>").addClass("clearer").appendTo(t),e.pageBreak&&w("<div>").addClass("page-break").appendTo(t),null},fe=function(t,e,n,i,a){var r,o,d,l,s,u,c;return o=w("<div>").addClass(Ae(e,i)).appendTo(t),n&&(be(o,i),o=w("<div>").appendTo(o)),a?(r=k.sortBy(a.colors,"priority"),l=r=k.chain(r).map(function(t){return t.color}).value(),u=a.showLegendKey,s=a.showCategory,c=a.showValue):c=s=u=!(l=null),d={title:{text:i.name,font:dn},legend:{position:"bottom",visible:u},chartArea:{background:""},seriesDefaults:Re(i),series:k.sortBy(i.series,"priority"),seriesColors:l,categoryAxis:{categories:i.dates,labels:{rotation:"auto"},visible:s},valueAxis:{labels:{rotation:"auto",format:"{0:n2}"},visible:c},tooltip:{visible:!0,template:"#= series.name #: #= kendo.format('{0:n}', value)#"}},o.kendoChart(d),Lt(t,i),null},ye=function(t,e,n,i){var a,r,o,d,l,s,u,c,p,m,f,b;if(c=[],o=b="",(m=n.seriesPerObject)&&0<m.length){for(r=0,d=m.length;r<d;r++)u={type:"donut",name:(s=m[r]).objectName,categoryField:"name",data:s.series},c.push(u);b="#= category # (#= series.name#): #= kendo.format('{0:n}', value)#",o="#= text# (#= series.name#)"}else u={type:"pie",categoryField:"name",data:n.series},c.push(u),b="#= category #: #= kendo.format('{0:n}', value)#",o="#= text#";return i?(a=k.sortBy(i.colors,"priority"),p=a=k.chain(a).map(function(t){return t.color}).value(),f=i.showLegendKey):f=!(p=null),l={title:{text:n.name,font:dn},legend:{position:"bottom",visible:f,labels:{template:o}},chartArea:{background:""},seriesDefaults:{labels:{visible:!0,background:"transparent",template:"#= category #: #= kendo.toString(percentage, 'p2')#"}},series:c,seriesColors:p,tooltip:{visible:!0,template:b}},t.kendoChart(l),null},Zt=function(t,e,n,i,a){var r,o,d,l,s,u,c,p,m,f,b,v,y,h,g;if(null==a&&(a="bar"),v=n.seriesPerObject,i?(o=k.sortBy(i.colors,"priority"),b=o=k.chain(o).map(function(t){return t.color}).value(),y=i.showLegendKey):y=!(b=null),r=[],f=[],g="",v&&0<v.length){for(r=k.chain(v).map("series").flatten().map("name").uniq().sortBy().value(),s=0,u=v.length;s<u;s++)p=v[s],l=k.keyBy(p.series,"name"),d=k.map(r,function(t){return(l[t]||{}).value||0}),m={name:p.objectName,type:a,stack:n.stack,data:d},f.push(m);g="#= series.name#: #= kendo.format('{0:n}', value)#"}else h=k.sortBy(n.series,"name"),r=k.map(h,"name"),m={type:a,data:k.map(h,"value")},f.push(m),y=!(g="#= kendo.format('{0:n}', value)#");return c={title:{text:n.name,font:dn},chartArea:{background:""},series:f,seriesColors:b,categoryAxis:{categories:r,labels:{rotation:"auto"}},valueAxis:{labels:{rotation:"auto",format:"{0:n2}"}},tooltip:{visible:!0,template:g},legend:{position:"bottom",visible:y,labels:{template:"#= series.name#"}}},t.kendoChart(c),null},ie=function(t,e,n,i){return Zt(t,0,n,i,"column")},Ee=function(t,e,n,i){var a,r,o,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w;if(I=n.seriesPerObject,"waterfall",i?(a=k.sortBy(i.colors,"priority"),T=a=k.chain(a).map(function(t){return t.color}).value(),C=i.showLegendKey):C=!(T=null),g=[],w="",I&&0<I.length){for(d=0,u=I.length;d<u;d++){for(f=I[d],o=[],l=0,c=(b=I.series).length;l<c;l++)r={category:(y=b[l]).name,value:y.value},y.total&&(r.summary="total"),o.push(r);h={name:f.objectName,type:"waterfall",data:o,categoryField:"category",field:"value",summaryField:"summary"},g.push(h)}w="#= series.name#: #= kendo.format('{0:n}', value)#"}else{for(o=[],s=0,p=(v=n.series).length;s<p;s++)r={category:(y=v[s]).name,value:y.value},y.total&&(r.summary="total"),o.push(r);h={type:"waterfall",data:o,categoryField:"category",field:"value",summaryField:"summary"},g.push(h),C=!(w="#= kendo.format('{0:n}', value)#")}return m={title:{text:n.name,font:dn},chartArea:{background:""},series:g,seriesColors:T,categoryAxis:{labels:{rotation:"auto"}},valueAxis:{labels:{rotation:"auto",format:"{0:n2}"}},tooltip:{visible:!0,template:w},legend:{position:"bottom",visible:C,labels:{template:"#= series.name#"}}},t.kendoChart(m),null},me=function(t,e,n,i,a){var r;switch(r=w("<div>").addClass(Ae(e,i)).appendTo(t),n&&(be(r,i),r=w("<div>").appendTo(r)),i.chart){case X.PIE:ye(r,0,i,a);break;case X.COLUMN:ie(r,0,i,a);break;case X.BAR:Zt(r,0,i,a);break;case X.WATERFALL:Ee(r,0,i,a)}return Lt(t,i),null},Ge=function(t){var e,n,i,a,r;if(n=t.sender){for(i=a=0,r=n.columns.length;0<=r?a<r:r<a;i=0<=r?++a:--a)n.autoFitColumn(i);return e=n.element.find(".k-grid-header-wrap").width(),n.element.find("[role=grid]").width()<e&&n.element.find("[role=grid]").width(e),null}},zt=function(t){return pt.displayDetailOwner(t)},he=function(t,e,n,i){var a,r,o,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C;if(p=w("<div>").addClass(Se(e,i)).appendTo(t),n&&(be(p,i),p=w("<div>").appendTo(p)),i.displayMethod,o=[],u={},(s=i.dataPerObject)&&0<s.length){for(l=[],m=0,v=s.length;m<v;m++)for(f=0,y=(T=(d=s[m]).data).length;f<y;f++)(C=T[f]).groupObject=d.objectName,l.push(C);u={data:l,group:{field:"groupObject",dir:"asc"}},o.push({field:"groupObject",title:"Object",hidden:!0})}else u={data:i.data};for(c=[],b=0,h=(I=k.sortBy(i.columns,"priority")).length;b<h;b++)if(r=I[b],a=xt.create(r.column,!1,250,r.tagDefinition,r.riskIndicator,r.financial,r.aggregation))switch(a.hidden=!1,o.push(a),r.aggregation){case Z.SUM:c.push({field:a.field,aggregate:"sum"});break;case Z.MIN:c.push({field:a.field,aggregate:"min"});break;case Z.MAX:c.push({field:a.field,aggregate:"max"});break;case Z.COUNT:c.push({field:a.field,aggregate:"count"})}return 0<c.length&&(u.aggregate=c),u.filter=[{field:"quantity",operator:"neq",value:0}],u.schema={model:{investmentName:function(){return Et.get(this,"investment.name")}}},g={dataSource:u,columns:o,editable:!1,filterable:!0,sortable:{mode:"multiple",allowUnsort:!0},groupable:!0,reorderable:!0,resizable:!0,columnMenu:!0,pageable:ht.defaultPageable(),scrollable:!0,height:700,dataBound:Ge,toolbar:["excel"]},ht.withDefaults(g),p.kendoGrid(g),yt.click(p,xt.OWNER_FIELD,xt.OWNER_CLASS_NAME,zt),Lt(t,i),null},ee=function(t,e,n,i){var a;return a=w("<div>").addClass(Se(e,i)).appendTo(t),n&&(be(a,i),a=w("<div>").appendTo(a)),Q.setupGrid(a,i.capitalCalls[0]),Lt(t,i),null},ue=function(t,e,n,i){var a;return a=w("<div>").addClass(Se(e,i)).appendTo(t),n&&(be(a,i),a=w("<div>").appendTo(a)),bt.setupGrid(a,i.distributions[0]),Lt(t,i),null},ae=function(t,e,n,i){var a;return a=w("<div>").addClass(Se(e,i)).appendTo(t),n&&(be(a,i),a=w("<div>").appendTo(a)),tt.setupTreeList(a,i.commitments[0]),Lt(t,i),null},we=function(t,e,n,i){var a;return a=w("<div>").addClass(Se(e,i)).appendTo(t),n&&(be(a,i),a=w("<div>").appendTo(a)),i.table?at.display(a,i.table):ft.display(a,i.displayTable),Lt(t,i),null},te=function(t,e,n,i){var a,r;return r=w("<div>").addClass(Se(e,i)).appendTo(t),n&&(be(r,i),r=w("<div>").appendTo(r)),(a=i.capitalAccount[0])?$.display(r,a):w("<h3>").append(f.t("dashboards:components.CAPITAL_ACCOUNT.noCapitalAccount")).appendTo(r),Lt(t,i),null},ve=function(t,e,n,i){var a,r;return r=w("<div>").addClass("floatingGrid_100").appendTo(t),n&&(be(r,i),r=w("<div>").appendTo(r)),0<(a=i.operations).length?St.setup(r,Dt.DASHBOARD_OPERATION,null,a):w("<h3>").append(f.t("dashboards:components.OPERATIONS.noOperations")).appendTo(r),Lt(t,i),null},ne=function(t,e,n,i){var a,r;return r=w("<div>").addClass(Se(e,i)).appendTo(t),n&&(be(r,i),r=w("<div>").appendTo(r)),0<(a=i.checkName).length?mt.display(r,a):w("<h3>").append(f.t("dashboards:components.CHECK_NAME.noCheckName")).appendTo(r),Lt(t,i),null},pe=function(t,e,n,i){var a,r,o;return r=w("<div>").addClass(Se(e,i)).appendTo(t),n&&(be(r,i),r=w("<div>").appendTo(r)),0<(a=i.equity).length?(o=k.sortBy(i.columns,"priority"),Ct.display(r,null,a,o)):w("<h3>").append(f.t("dashboards:components.EQUITY.noEquity")).appendTo(r),Lt(t,i),null},ge=function(t,e,n,i){var a,r;return a=w("<div>").addClass(Se(e,i)).appendTo(t),n&&(be(a,i),a=w("<div>").appendTo(a)),r={dataSource:{data:i.data},columns:[{field:"name",title:f.t("dashboards:components.fields.name")},{field:"report",title:f.t("dashboards:components.fields.reportName")},ct.column({field:"date",title:f.t("dashboards:components.fields.date")}),Ot.column({field:"source",title:f.t("dashboards:components.fields.reportSource")}),_t.column({field:"period",title:f.t("dashboards:components.fields.period")}),Ft.column({field:"year",title:f.t("dashboards:components.fields.year")}),{field:"noReporting",title:f.t("dashboards:components.fields.noReporting")},Rt.column({field:"filing",title:f.t("dashboards:components.fields.filing")}),wt.column({field:"assetsUnderManagement",title:f.t("dashboards:components.fields.assetsUnderManagement")}),it.column({field:"currency",title:f.t("dashboards:components.fields.currency")}),It.column({field:"crsIndividual",title:f.t("dashboards:components.fields.crsIndividual")}),It.column({field:"crs101",title:f.t("dashboards:components.fields.crs101")}),It.column({field:"crs102",title:f.t("dashboards:components.fields.crs102")}),It.column({field:"crs103",title:f.t("dashboards:components.fields.crs103")}),It.column({field:"crsControllingPerson",title:f.t("dashboards:components.fields.crsControllingPerson")})],editable:!1,filterable:!0,sortable:{mode:"multiple",allowUnsort:!0},groupable:!0,reorderable:!0,resizable:!0,pageable:ht.defaultPageable(),columnMenu:!1,toolbar:["excel"]},a.kendoGrid(r),Lt(t,i),null},Je=function(t){var e;return!(e=t.result).text&&!e.title},an=function(t){return t.commands.show()},Qe=function(t){return Je(t)?t.commands.show():t.commands.hide(),null},Ye=function(t){var e;return e=t.editorContainer,c.destroy(e),e.empty(),t.editor=null,t.edition.hide(),t.content.show(),Qe(t),null},$e=function(t){return t.replace(/(<\/?)strong(\s?)/g,"$1b$2").replace(/(<\/?)em(\s?)/g,"$1i$2")},Ze=function(t){var e,n,i,a;return n=t.editorContainer,c.destroy(n),n.empty(),(a=t.result.title)&&w("<h1>").append(a).appendTo(n),(e=w("<textarea>").addClass("componentEditor").appendTo(n)).val(t.result.text),i={deserialization:{custom:$e},serialization:{custom:$e},tools:["formatting","bold","italic","underline","strikethrough","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","indent","outdent","createLink","unlink","insertImage","foreColor","backColor","fontName","fontSize","createTable"]},e.kendoEditor(i),t.editor=e.data("kendoEditor"),t.content.hide(),t.edition.show(),null},rn=function(t){var e,n,i;return e=t.contentContainer,n=t.result,e.empty(),(i=n.title)&&w("<h1>").append(i).appendTo(e),e.append(n.text),null},nn=function(t,e){var n,i,a;return i=e.text,a=e.title,k.has(e,"perimeters")&&t.perimeter&&(n=k.find(e.perimeters,{perimeter:t.perimeter}))&&(i=n.text||i,a=n.title||a),t.result.text=i,t.result.title=a,rn(t),Ye(t),null},tn=function(t){return t.editionSave.prop("disabled",!1),null},en=function(t){var e,n,i;if(n=t.editor)return i=n.value(),e={id:t.result.id,title:t.result.title,text:i,perimeter:t.perimeter},t.editionSave.prop("disabled",!0),w.post("board/component/text.json",e).done(nn.bind(null,t)).always(tn.bind(null,t)),null},Ke=function(t){return Ze(t)},He=function(t){return Ye(t)},ze=function(t){return an(t)},Xe=function(t){return Qe(t)},ke=function(t,e,n,i,a){var r,o,d,l,s,u,c,p,m,f,b,v;return p=w("<div>").addClass(Pe(e,a)).appendTo(t),n&&be(p,a),v=w("<ul>").addClass("boardEditCommands").appendTo(p),s=w("<li>").appendTo(v),l=w("<button>").addClass("k-button").text("Edit").appendTo(s),d=w("<div>").appendTo(p),u=w("<div>").addClass(Pe(e,{size:st.FULL})).appendTo(t),c=w("<ul>").addClass("boardEditCommands").appendTo(u),f=w("<li>").appendTo(c),m=w("<button>").addClass("k-button").text("Save").appendTo(f),o=w("<li>").appendTo(c),r=w("<button>").addClass("k-button").text("Cancel").appendTo(o),b={result:a,commands:v,content:p,contentContainer:d,edition:u,editionSave:m,editorContainer:w("<div>").appendTo(u),editor:null,perimeter:a.perimeter||i},p.hover(ze.bind(null,b),Xe.bind(null,b)),l.click(Ke.bind(null,b)),m.click(en.bind(null,b)),r.click(He.bind(null,b)),Ye(b),rn(b),Lt(t,a),null},Ie=function(t,e){var n,i,a,r,o,d,l,s;if(o=e.risk)return l=null,s=1,k.has(e,"stress")?(l=o,o=e.stress,s=3):k.has(e,"other")&&(l=e.other,s=2),r=w("<div>").appendTo(t),w("<p>").appendTo(t),a=w("<div>").appendTo(t),w("<p>").appendTo(t),n=w("<div>").appendTo(t),d={hasOverviewResults:!1,hasOverviewResultDetail:!1},i={model:c.observable(d),overviewDetailContext:{displayMethod:e.displayMethod,resultsType:s,radarElement:null,hierarchyElement:r,detailElement:a,commentsElement:n,restricted:!0}},C.displayResults(i,o,l),null},Te=function(t,e,n,i){var a;return a=w("<div>").addClass(_e(e,i)).appendTo(t),n&&be(a,i),Ie(a,i),Lt(t,i)},De=function(t,e){switch(e+=1,t){case ot.WEEKLY:return f.t("dashboards:components.fields.nthWeek",{count:e});case ot.QUARTERLY:return f.t("dashboards:components.fields.nthMonth",{count:3*e});case ot.SEMI_ANNUALLY:return f.t("dashboards:components.fields.nthMonth",{count:6*e});case ot.ANNUALLY:return f.t("dashboards:components.fields.nthYear",{count:e});default:return f.t("dashboards:components.fields.nthMonth",{count:e})}},se=function(t,e,n,i){var a,r,o,d,l,s,u,c,p,m;for(d=w("<div>").addClass(Se(e,i)).appendTo(t),n&&(be(d,i),d=w("<div>").appendTo(d)),o=[{field:"name",title:f.t("dashboards:components.fields.debtName"),aggregates:["count"],footerTemplate:"Count: #=kendo.toString(count, 'n0')#"}],a=[{field:"name",aggregate:"count"}],r=Math.max(i.bucketCount||0,0),s=i.frequency||ot.MONTHLY,u=c=0,m=r;0<=m?c<m:m<c;u=0<=m?++c:--c)l="bucket"+u,o.push(wt.column({field:l,title:De(s,u),aggregates:["sum"],footerTemplate:"#=kendo.toString(sum, 'n2')#"})),a.push({field:l,aggregate:"sum"});return l="bucket"+r,o.push(wt.column({field:l,title:f.t("dashboards:components.fields.remaining"),aggregates:["sum"],footerTemplate:"#=kendo.toString(sum, 'n2')#"})),a.push({field:l,aggregate:"sum"}),p={dataSource:{data:i.results,aggregate:a},columns:o,editable:!1,filterable:!0,sortable:{mode:"multiple",allowUnsort:!0},groupable:!0,reorderable:!0,resizable:!0,columnMenu:!1,pageable:ht.defaultPageable(),scrollable:{virtual:!0},toolbar:["excel"]},d.kendoGrid(p),Lt(t,i)},qt=function(t,e){var n;return t.date?(n=new Date(t.date),e+" ("+c.toString(n,"d")+")"):e},Bt=function(t,e){var n,i;return n=kt.getName(e)||"",i=qt(t,n),on(t.aggregation,{field:t.valueField,title:i})},Ht=function(t,e,n){var i,a;return a=n.format,i={field:t.valueField,title:e},i="p"===a?Nt.column(i):wt.column(i),on(t.aggregation,i)},Yt=function(t,e){return[on(t.aggregation,wt.column({field:t.valueField,title:e})),it.column({field:t.currencyField,title:e+" (Currency)"})]},on=function(t,e){var n;switch(t){case Z.SUM:n="sum";break;case Z.MIN:n="min";break;case Z.MAX:n="max";break;case Z.COUNT:n="count"}return n&&(e.format||"{0}",e.aggregates=[n],e.footerTemplate=Z.getName(t)+": #= kendo.format('"+e.format+"', "+n+")#"),e},Wt=function(t,e){var n,i;return(n=gt.get(e))?(i=qt(t,n.name),n.type===Tt.PRICE?Yt(t,i):Ht(t,i,n)):null},Qt=function(t,e){return t.percent?Nt.column(e):wt.column(e)},$t=function(t,e){var n,i,a,r;if(!(i=Ut.get(e)))return null;switch(a=f.t(i.label),r=qt(t,a),n={field:t.valueField,title:r},i.type){case At.DOUBLE:n=Qt(i,n);break;case At.INTEGER:n=It.column(n);break;case At.DATE:n=ct.column(n)}return on(t.aggregation,n)},Kt=function(t,e){var n,i,a;return i=e.name,a=qt(t,i),n=wt.column({field:t.valueField,title:a}),on(t.aggregation,n),n},Vt=function(t,e){var n,i,a;return i=vt.getName(e),a=qt(t,i),n=wt.column({field:t.valueField,title:a}),on(t.aggregation,n),n},Jt=function(t,e){var n,i;return n=nt.getName(e),i=qt(t,n),Yt(t,i)},Gt=function(t){var e,n,i,a,r,o;return(e=t.field)?Bt(t,e):(a=t.method)?Jt(t,a):(i=t.history)?Wt(t,i):(o=t.tagDefinition)?$t(t,o):(r=t.riskIndicator)?Kt(t,r):(n=t.financial)?Vt(t,n):null},le=function(t,e,n,i){var a,r,o,d,l,s,u,c,p,m,f;for(s=w("<div>").addClass(Se(e,i)).appendTo(t),n&&(be(s,i),s=w("<div>").appendTo(s)),o=[],d={},l=[],u=0,c=(m=k.sortBy(i.columns,"priority")).length;u<c;u++)if(r=m[u],f=Gt(r)){switch(k.isArray(f)?o.push.apply(o,f):o.push(f),r.aggregation){case Z.SUM:a="sum";break;case Z.MIN:a="min";break;case Z.MAX:a="max";break;case Z.COUNT:a="count"}a&&l.push({field:r.valueField,aggregate:a,width:200})}return d.data=i.lines,0<l.length&&(d.aggregate=l),p={dataSource:d,columns:o,pageable:ht.defaultPageable(),scrollable:{virtual:!0},editable:!1,toolbar:["excel"],dataBound:Ge},ht.withDefaults(p),s.kendoGrid(p),Lt(t,i)},oe=function(t,e){var n,i;if(i=e.compliance)return n=w("<div>").appendTo(t),et.display(n,i),null},re=function(t,e,n,i){var a;return a=w("<div>").addClass(_e(e,i)).appendTo(t),n&&be(a,i),oe(a,i),Lt(t,i)},Ce=function(t,e,n,i){var a,r;return a=w("<div>").addClass(_e(e,i)).appendTo(t),n&&be(a,i),(r=i.spreadsheet)&&w("<div>").addClass("spreadsheet").appendTo(a).kendoSpreadsheet(JSON.parse(r)),Lt(t,i)},ce=function(t,e,n,i){var a,r,o;return r=w("<div>").addClass(_e(e,i)).appendTo(t),n&&be(r,i),(a=i.document)&&(o="document/download/inline?id="+encodeURIComponent(a),w("<img>").attr("src",o).css("width","100%").css("height","auto").appendTo(r)),Lt(t,i)},Xt=function(t,e,n,i,a,r){var o;if(a&&a.type!==rt.SUB_COMPONENT)if(a.type!==rt.TABLE)if(a.type!==rt.PORTFOLIO)if((o=a.type)!==rt.TEXT&&o!==rt.CONTEXTUAL_TEXT&&o!==rt.COMPLEX_TEXT)if(a.type!==rt.RISK)if(a.type!==rt.DEBT_CASH_FLOWS)if(a.type!==rt.REPORT)if(a.type!==rt.DATA)if(a.type!==rt.COMPLIANCE)if(a.type!==rt.SPREADSHEET)if(a.type!==rt.DOCUMENT_IMAGE)if(a.type!==rt.CAPITAL_CALL)if(a.type!==rt.DISTRIBUTION)if(a.type!==rt.COMMITMENT)if(a.type!==rt.CAPITAL_ACCOUNT)if(a.type!==rt.OPERATIONS)if(a.type!==rt.CHECK_NAME){if(a.type!==rt.EQUITY){switch(a.name=f.t(a.name),a.type){case rt.CURRENCY:case rt.OBJECT:case rt.INDEX:fe(t,e,n,a,r);break;case rt.GROUP_BY:case rt.GROUP_BY_SCRIPT:me(t,e,n,a,r)}return null}pe(t,e,n,a)}else ne(t,e,n,a);else ve(t,0,n,a);else te(t,e,n,a);else ae(t,e,n,a);else ue(t,e,n,a);else ee(t,e,n,a);else ce(t,e,n,a);else Ce(t,e,n,a);else re(t,e,n,a);else le(t,e,n,a);else ge(t,e,n,a);else se(t,e,n,a);else Te(t,e,n,a);else ke(t,e,n,i,a);else he(t,e,n,a);else we(t,e,n,a)},de=function(t){var e,n,i,a,r,o,d,l,s,u;if(n=t.element,e=t.display,s=t.showId,u=t.style,c.destroy(n),n.empty(),l=t.results,e===dt.A4?n.addClass("a4"):n.removeClass("a4"),l)for(r=l.perimeter,i=0,a=(o=k.sortBy(l,"priority")).length;i<a;i++)d=o[i],Xt(n,e,s,r,d,u);return null},jt=function(t){var e,n,i,a,r,o,d,l,s;for(e=0,i=t.length;e<i;e++)if(l=t[e],k.has(l,"series"))for(n=0,a=(d=l.series).length;n<a;n++)s=d[n],r=f.t(s.name),(o=f.t(s.objectName))&&(r=o+" - "+r),s.name=r;return null},qe=function(t,e,n,i){var a,r;if(i&&n.get("dashboardId")===e)return n.set("uuid",i.uuid||""),a=i.results,r=i.style,jt(a),t.results=a,t.style=r,de(t),null},Be=function(t){var e;return e=t.element,c.destroy(e),e.empty(),null},Mt=function(t,e,n,i){var a,r,o,d,l,s;if(a=i.get("asset"),n!==ut.ASSET||a)if(l=i.get("perimeter"),n!==ut.PERIMETER||l)if(o=i.get("fund"),n!==ut.FUND||o){if(d=i.get("mainEntity"),s=i.get("secondaryEntity"),n!==ut.ENTITIES||d)return t.element.append(w("<div>").addClass("k-loading-image")),i.set("uuid",""),r={dashboard:e,date:i.get("date"),asset:a,perimeter:l,fund:o,entity1:d,entity2:s},lt.compute(r).then(qe.bind(null,t,e,i)).catch(Be.bind(null,t)),null;t.element.append(w("<h2>").text("Select an entity"))}else t.element.append(w("<h2>").text("Select a fund"));else t.element.append(w("<h2>").text("Select a perimeter"));else t.element.append(w("<h2>").text("Select an asset"))},Ve=function(t,e){return t.display=e,de(t)},We=function(t,e){return t.showId=e,de(t)},Pt=function(t){var e;return e=t.element,c.destroy(e),e.empty(),null},{create:function(t,e,n){var i;return(i={element:t,display:e,showId:n}).compute=Mt.bind(null,i),i.setDisplay=Ve.bind(null,i),i.setShowId=We.bind(null,i),i.clean=Pt.bind(null,i),i}}})}.call(this),define("dashboard/repository/DashboardPerimeterRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashbordPerimeterRepository=void 0;var i=function(){function t(){}return t.fetchIdentifiables=function(){return n.WebHttp.getJson("board/perimeter/id/list.json")},t}();e.DashbordPerimeterRepository=i}),define("dashboard/ui/DashboardPerimeterUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","dashboard/repository/DashboardPerimeterRepository"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardPerimeterUI=void 0;var r=function(){function t(){}return t.widget=n.IdWidgetUtils.createDropList("DomosDashboardPerimeter",a.DashbordPerimeterRepository,!0),t.column=i.IdentifiableColumnUtils.createFactory(t.widget),t}();e.DashboardPerimeterUI=r}),define("dashboard/repository/DashboardRepository",["require","exports","tslib","lodash","core/web/WebHttp","dashboard/data/DashboardType"],function(t,e,i,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashRepoInstance=e.DashboardRepository=void 0;var n=function(){function n(){var e=this;this.listDashboard=[],n.fetchIdentifiables().then(function(t){e.listDashboard=t})}return n.fetchIdentifiables=function(){return r.WebHttp.getJson("board/dashboard/id/list.json")},n.fetchActiveIdentifiables=function(){return r.WebHttp.getJson("board/dashboard/id/list.json",{active:!0})},n.menu=function(e){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(t){return[2,r.WebHttp.getJson("board/menus.json",{id:e})]})})},n.fetchAssetIdentifiables=function(){return i.__awaiter(this,void 0,void 0,function(){var e;return i.__generator(this,function(t){switch(t.label){case 0:return[4,n.fetchIdentifiables()];case 1:return e=t.sent(),[2,a.filter(e,function(t){return t.type===o.DashboardType.ASSET})]}})})},Object.defineProperty(n.prototype,"getListDashboard",{get:function(){return this.listDashboard},enumerable:!1,configurable:!0}),n.prototype.fetch=function(){var e=this;n.fetchIdentifiables().then(function(t){e.listDashboard=t})},n}();e.DashboardRepository=n,e.DashRepoInstance=new n}),define("dashboard/ui/DashboardMenuUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","dashboard/repository/DashboardRepository"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardMenuUI=void 0,e.DashboardMenuUI={fundMenu:function(e){var t=function(t){return n.IdWidgetUtils.widget(function(){return a.DashboardRepository.menu(e)},t)};return{column:i.IdentifiableColumnUtils.createFactory(t),widget:t}}}}),define("text!templates/dashboards/dashboards.html",[],function(){return'<div id="dashboardRoot">\n    <div data-bind="visible: editable">\n        <ul data-role="menu" style="width: 100%">\n            <li class="k-state-active">\n                <a href="javascript:void(0)" data-i18n="dashboards:menu.overview"></a>\n            </li>\n            <li>\n                <a href="\\\\#!/dashboards/setup" data-i18n="dashboards:menu.setup"></a>\n            </li>\n        </ul>\n    </div>\n    <div class="idxStandardContent">\n        <div data-bind="invisible: hasDashboard">\n            <h2 data-i18n="dashboards:noDashboards"></h2>\n        </div>\n        <div data-bind="visible: hasDashboard">\n            <div id="dashboardToolBar"></div>\n\n\n            <a id="dashboardsHiddenDownloadLink" class="k-button hidden" download>\n                hidden download link\n            </a>\n\n            <p></p>\n\n            <h2 data-bind="text: dashboardName"></h2>\n\n            <div class="clearer"></div>\n\n            <div id="dashboardContent"></div>\n\n            <div class="clearer"></div>\n\n            <div id="exportDlg"></div>\n        </div>\n    </div>\n</div>'}),define("text!templates/dashboards/dashboards.panel.html",[],function(){return'<div id="dashboardPanelRoot">\n    <div id="dashboardDBTree"></div>\n</div>'}),function(){var Et,Dt,St;Et="#dashboardContent",St="#dashboardDBTree",Dt="#exportDlg",define("views/dashboards/dashboards",["jquery","lodash","i18n","kendo","site","object/ui/AssetUI","object/ui/AssetTargetUI","core/web/WebHttp","core/web/WebLocation","core/api/DashboardDisplay","dashboard/data/DashboardType","core/util/ObservableUtils","object/data/ObjectCategories","views/dashboards/engine/engine","dashboard/ui/DashboardPerimeterUI","dashboard/ui/DashboardMenuUI","object/ui/VehicleUI","object/ui/EntityUI","object/web/ObjectMap","dashboard/web/DashboardMap","core/data/SiteCategories","text!templates/dashboards/dashboards.html","text!templates/dashboards/dashboards.panel.html","basic/ui/CurrencyUI"],function(E,i,D,l,t,e,n,a,r,o,d,s,u,c,p,m,f,b,v,y,h,g,T){var S,I,C,N,x,R,_,w,k,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q,z,X,Z,tt,et,nt,it,at,rt,ot,dt,lt,st,ut,ct,pt,mt,ft,bt,vt,yt,ht,gt,Tt,It,Ct,wt,kt;return e.AssetUI,S=n.AssetTargetUI,O=s.ObservableUtils,u.ObjectCategories,L=r.WebLocation,F=a.WebHttp,w=t.map,I=o.DashboardDisplay,x=d.DashboardType,U=p.DashboardPerimeterUI,N=m.DashboardMenuUI,f.VehicleUI,_=b.EntityUI,k=v.ObjectMap,C=y.DashboardMap,A=h.SiteCategories,R=null,X=function(){return L.setPageTitle(D.t("dashboards:title")),null},Y=function(t){var e,n,i;return R=null,e=E("#dashboardsHiddenDownloadLink"),i="board/engine/export/download?uuid="+encodeURIComponent(t),(n=e.attr("href",i)[0])&&n.click(),null},M=function(t,e){if(R&&R===t)return(null!=e?e.done:void 0)?(E(Dt).data("kendoDialog").close(),e.error?(E(Dt).kendoDialog({width:"450px",title:D.t("dashboards:alert.error"),closable:!1,modal:!0,content:"<p>"+D.t("dashboards:alert.errorMessage")+"<p>",actions:[{text:D.t("dashboards:alert.sorry"),primary:!0}]}),E(Dt).data("kendoDialog").open()):Y(t)):ot(t),null},P=function(t){var e;if(R&&R===t)return e={uuid:t},F.getJson("board/engine/export/done",e).then(M.bind(null,t)).catch(function(){}),null},ot=function(t){return setTimeout(P.bind(null,t),2e3)},H=function(){return E(Dt).kendoDialog({width:"450px",title:D.t("dashboards:alert.titleStart"),closable:!1,modal:!0,content:"<p>"+D.t("dashboards:alert.starting")+"<p>",actions:[]}),E(Dt).data("kendoDialog").open()},W=function(){return E(Dt).data("kendoDialog").close(),E(Dt).kendoDialog({width:"450px",title:D.t("dashboards:alert.titleQueue"),closable:!1,modal:!0,content:"<p>"+D.t("dashboards:alert.gotoJobs")+"<p>",actions:[{text:D.t("dashboards:alert.btnGo"),action:function(){return window.location=L.resolve("/#!/jobs")}},{text:D.t("dashboards:alert.btnStay"),primary:!0}]}),E(Dt).data("kendoDialog").open()},J=function(t){var e;if(e=null!=t?t.uuid:void 0){if(!R)return R=e,W(),ot(e),null;alert("An export is already running")}},et=function(t,e){var n,i;if(!R)return n={dashboard:e.get("dashboardId"),uuid:e.get("uuid"),date:e.get("date"),asset:e.get("asset"),fund:e.get("fund"),perimeter:e.get("perimeter"),mainEntity:e.get("mainEntity"),secondaryEntity:e.get("secondaryEntity")},H(),i={data:JSON.stringify(n)},F.getJson(t,i).then(J).catch(function(){});alert("An export is already running")},it=function(t){return et("board/engine/start.pdf",t)},nt=function(t){return et("board/engine/start.docx",t)},at=function(t){return et("board/engine/start.pptx",t)},rt=function(t){return et("board/engine/start.xlsx",t)},V=function(t){return Q(t,I.SCREEN)},B=function(t){return Q(t,I.A4)},Z=function(t,e){var n;return n=e.checked,z(t,n)},q=function(t,e,n,i){var a,r,o,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k;return R=null,g=e.model,d=O.unpack(e.selectedBoard),s=null!=i?i[0].name:void 0,y=null!=n?n[0].name:void 0,p=(w=d.type)===x.ASSET,f=w===x.FUND,b=w===x.PERIMETER,m=w===x.ENTITIES,c=d.id,v=[{type:"buttonGroup",buttons:[{text:D.t("dashboards:dashboardDisplay.SCREEN"),togglable:!0,group:"display",toggle:V.bind(null,e)},{text:D.t("dashboards:dashboardDisplay.A4"),togglable:!0,group:"display",toggle:B.bind(null,e)}]},{type:"button",text:D.t("dashboards:buttons.showId"),togglable:!0,toggle:Z.bind(null,e)},{type:"button",text:D.t("dashboards:buttons.printScreen"),click:ft.bind(null,e)},{type:"button",text:D.t("dashboards:buttons.generate"),click:yt.bind(null,e)},{type:"separator"}],p&&v.push({template:"<label id='label_assetId' for='dashboardsToolBarAsset'></label><input id='dashboardsToolBarAsset'/>"}),b&&v.push({template:"<label id='label_perimeterId' for='dashboardsToolBarSelectionType'></label><input id='dashboardsToolBarPerimeter'/>"}),f&&v.push({template:"<label id='label_fundId' for='dashboardsToolBarSelectionType'></label><input id='dashboardsToolBarFund'/>"}),m&&(v.push({template:"<label id='label_mainEntity' for='dashboardsToolBarSelectionType'></label><input id='dashboardsToolBarMainEntity'/>"}),v.push({template:"<label id='label_secondEntity' for='dashboardsToolBarSelectionType'></label><input id='dashboardsToolBarSecondaryEntity'/>"})),v.push({template:"<label>"+D.t("dashboards:engine.date")+"</label><input id='dashboardsToolBarDate'/>"}),y&&v.push.apply(v,[{type:"button",text:D.t("dashboards:buttons.exportPdf"),url:"javascript:void(0)",click:function(){return it(g)}},{type:"button",text:D.t("dashboards:buttons.exportDocx"),url:"javascript:void(0)",click:function(){return nt(g)}},{type:"button",text:D.t("dashboards:buttons.exportPptx"),url:"javascript:void(0)",click:function(){return at(g)}},{type:"button",text:D.t("dashboards:buttons.exportXlsx"),url:"javascript:void(0)",click:function(){return rt(g)}}]),s&&v.push({type:"button",text:"Word",attribute:{download:"dashboard.docx"},url:L.resolve("board/engine/word/download.docx?"+E.param({id:c}))}),T={items:v},t.kendoToolBar(T),E("#dashboardsToolBarDate").kendoDatePicker({value:g.get("date"),change:function(){return g.set("date",this.value())}}),p&&(o=E("#dashboardsToolBarAsset"),S.filteredWidget(o,{valuePrimitive:!0},d.assetFilterCategories),(k=o.data("kendoDomosAssetTarget")).value(g.get("asset")),k.bind("dataBound",function(){return k.value(g.get("asset"))}),E("<a>").attr("href",g.assetUrl()).text(D.t("dashboards:dashboards.fields.asset")).appendTo(E("#label_assetId")),r=function(){return g.set("asset",parseInt(this.value())||0),E("#label_assetId").find("a").attr("href",g.assetUrl())},k.bind("change",r)),b&&(a=E("#label_perimeterId"),U.widget(E("#dashboardsToolBarPerimeter"),{valuePrimitive:!0}),k=E("#dashboardsToolBarPerimeter").data("kendoDomosDashboardPerimeter"),E("<a>").attr("href",g.perimeterUrl()).text(D.t("dashboards:dashboards.fields.perimeter")).appendTo(a),k.value(g.get("perimeter")),k.bind("dataBound",function(){return k.value(g.get("perimeter"))}),I=function(){return g.set("perimeter",parseInt(this.value())||0),a.find("a").attr("href",g.perimeterUrl())},k.bind("change",I)),f&&(a=E("#label_fundId"),l=g.get("dashboardId"),N.fundMenu(l).widget(E("#dashboardsToolBarFund"),{valuePrimitive:!0}),k=E("#dashboardsToolBarFund").data("kendoDropDownList"),E("<a>").attr("href",g.fundUrl()).text(D.t("dashboards:dashboards.fields.fund")).appendTo(a),k.value(g.get("fund")),k.bind("dataBound",function(){return k.value(g.get("fund"))}),u=function(){return g.set("fund",parseInt(this.value())||0),a.find("a").attr("href",g.fundUrl())},k.bind("change",u)),m&&(a=E("#label_mainEntity"),_.widget(E("#dashboardsToolBarMainEntity"),{valuePrimitive:!0}),k=E("#dashboardsToolBarMainEntity").data("kendoDomosEntity"),E("<a>").attr("href",g.mainEntityUrl()).text(D.t("dashboards:dashboards.fields.mainEntity")).appendTo(a),k.value(g.get("mainEntity")),k.bind("dataBound",function(){return k.value(g.get("mainEntity"))}),h=function(){return g.set("mainEntity",parseInt(this.value())||0),a.find("a").attr("href",g.mainEntityUrl())},k.bind("change",h),a=E("#label_secondEntity"),_.widget(E("#dashboardsToolBarSecondaryEntity"),{valuePrimitive:!0}),k=E("#dashboardsToolBarSecondaryEntity").data("kendoDomosEntity"),E("<a>").attr("href",g.secondaryEntityUrl()).text(D.t("dashboards:dashboards.fields.secondaryEntity")).appendTo(a),k.value(g.get("secondaryEntity")),k.bind("dataBound",function(){return k.value(g.get("secondaryEntity"))}),C=function(){return g.set("secondaryEntity",parseInt(this.value())||0),a.find("a").attr("href",g.secondaryEntityUrl())},k.bind("change",C)),null},$=function(t){var e,n,i;if(i=E("#dashboardToolBar"),l.destroy(i),i.empty(),e=t.selectedBoard)return n={id:e.id},E.when(E.getJSON(L.resolve("board/dashboard/jasper/name.json"),n),E.getJSON(L.resolve("board/dashboard/word/name.json"),n)).done(q.bind(null,i,t)),null},j=function(t){return c.create(E(Et),t.display,t.showId)},K=function(t){return null==t.engine&&(t.engine=j(t)),t.engine},mt=function(t){var e,n,i;if($(t),(n=K(t)).clean(),e=t.selectedBoard)return i=t.model,n.compute(e.id,e.type,i),null},dt=function(t,e){var n;if(t.selectedBoard!==e)return(n=t.model).set("hasDashboard",!!e),n.set("dashboardName",(null!=e?e.name:void 0)||""),n.set("dashboardId",(null!=e?e.id:void 0)||0),n.set("uuid",""),n.set("asset",null),n.set("perimeter",null),n.set("fund",null),n.set("mainEntity",null),n.set("secondaryEntity",null),t.selectedBoard=e,mt(t),null},Q=function(t,e){var n;return t.display=e,(n=t.engine)&&n.setDisplay(e),null},z=function(t,e){var n;return t.showId=e,(n=t.engine)&&n.setShowId(e),null},lt=function(t){return 19,1368/2.54/t},bt=function(t,e){return l.drawing.pdf.saveAs(e,t+".pdf")},vt=function(t){var e,n,i,a;if(e=t.selectedBoard)return a=(i=E(Et)).width(),n={forcePageBreak:".page-break",paperSize:"A4",margin:"1cm",scale:lt(a),template:"<div style='position: absolute;top:0;left:0;width:100%;height:100%;'> <div style='position:absolute;bottom:20px;right:20px;left:20px;'> <div style='float:right'> #:pageNum# / #:totalPages# </div> <div class='clearer'></div> </div> </div>"},l.drawing.drawDOM(i,n).then(bt.bind(null,e.name)),null},st=function(){return{selectedBoard:null,display:I.SCREEN,showId:!1}},yt=function(t){return mt(t),!1},ft=function(t){return vt(t),!1},pt=function(t,e){return{editable:e,hasDashboard:!1,dashboardId:0,dashboardName:"",date:null,uuid:"",asset:null,fund:null,perimeter:null,mainEntity:null,secondaryEntity:null,assetUrl:function(){return k.objectEdit(this.get("asset"))},fundUrl:function(){return k.objectEdit(this.get("fund"))},perimeterUrl:function(){return C.perimeterEdit(this.get("perimeter"))},mainEntityUrl:function(){return k.objectEdit(this.get("mainEntity"))},secondaryEntityUrl:function(){return k.objectEdit(this.get("secondaryEntity"))}}},It=function(t,e){var n;if(e&&e.data)return n=e.data,"create"===e.type?t.pushCreate(n):"update"===e.type?t.pushUpdate(n):"destroy"===e.type&&t.pushDestroy(n),null},Tt=function(t,e){var n;if(n=t.data.options,e)return i.isArray(e)?i.each(e,It.bind(null,n)):It(n,e),null},Ct=function(t){var e;return e={options:t},E("body").on("domosws:dashboards",e,Tt)},G=function(){var t;return t={transport:{read:{url:"board/dashboard/list.json",dataType:"json"},push:Ct},schema:{model:{id:"id",fields:{name:{type:"string"},active:{type:"boolean"}}}},sort:{field:"name",dir:"asc"},filter:{field:"active",operator:"eq",value:!0}},new l.data.HierarchicalDataSource(t)},wt=function(t,e){var n;return n=E(St).data("kendoTreeView").dataItem(e.node),dt(t,n)},kt=function(t){var e,n;return e=E(St),l.destroy(e),e.empty(),n={dataSource:G(),dataTextField:"name",select:wt.bind(null,t)},e.kendoTreeView(n),null},gt=function(t){return E("#dashboardPanelBoard").localize(),kt(t),null},tt=function(t){return X(),null},ct=function(t,e){var n,i;return i=l.template(T)({}),n={model:e,show:tt.bind(null,t),init:gt.bind(null,t)},new l.View(i,n)},ht=function(t){return E("#dashboardRoot").localize(),mt(t),null},ut=function(t,e){var n,i;return i=l.template(g)({}),n={model:e,init:ht.bind(null,t),show:$.bind(null,t)},new l.View(i,n)},{init:function(t,e,n){var i,a,r,o,d;return null==n&&(n=!0),i=st(),o=pt(0,n),a=l.observable(o),i.model=a,i.selectedBoard=null,a.set("hasDashboard",!1),a.set("dashboardId",0),a.set("dashboardName",""),r=ct(i,a),d=ut(i,a),null==e&&(e=w.dashboards),t.register("dashboards",e,d,r,A.dashboards),null}}})}.call(this),define("core/ui/grid/GridCommand",["require","exports"],function(t,e){"use strict";function r(t,e){var n,i,a="javascript:void(0)";if(t.urlFn){var r=t.urlFn(e);r&&(a=r)}return'<a href="'+a+'" class="k-button k-button-icontext '+t.id+'">'+(i="",(n=t).icon&&(i+='<span class="k-icon '+n.icon+'"></span>'),n.text&&(i+=n.text),i)+"</a>"}function i(r,t){if(t.clickFn){var o=t.clickFn;r.on("click","."+t.id,function(t){t.preventDefault();var e,n=(e=r).data("kendoGrid")||e.data("kendoTreeList");if(n){var i=$(t.currentTarget).closest("tr"),a=n.dataItem(i);a&&o(a)}})}}Object.defineProperty(e,"__esModule",{value:!0}),e.GridCommand=void 0;var n=function(){function t(t){void 0===t&&(t="id"),this.field=t,this.items=[],this._counter=0,this._width=null}return t.prototype.addView=function(t){return this.items.push({id:this._newId(),text:"View",icon:"k-i-zoom",urlFn:t}),this},t.prototype.addIdView=function(e){return this.addView(function(t){return e(t.id)})},t.prototype.addUrl=function(t,e){return this.items.push({id:this._newId(),text:t,urlFn:e}),this},t.prototype.addClick=function(t,e,n){return this.items.push({id:this._newId(),text:t,icon:e,clickFn:n}),this},t.prototype.width=function(t){return this._width=t,this},t.prototype.column=function(){var a=this;return{field:this.field,sortable:!1,groupable:!1,filterable:!1,editable:function(){return!1},menu:!1,title:" ",width:this._width||void 0,template:function(t){for(var e="",n=0,i=a.items;n<i.length;n++){e+=r(i[n],t)}return e}}},t.prototype.bind=function(t){for(var e=0,n=this.items;e<n.length;e++){i(t,n[e])}},t.prototype._newId=function(){return"cmd"+ ++this._counter},t}();e.GridCommand=n}),define("exportJson/data/StrategyObjectType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StrategyObjectType=void 0;var r,o;(r=e.StrategyObjectType||(e.StrategyObjectType={}))[r.TAG_CATEGORY=1]="TAG_CATEGORY",r[r.TAG_DEFINITION=2]="TAG_DEFINITION",r[r.RISK_GROUP=3]="RISK_GROUP",r[r.STRESS_PROFILE=4]="STRESS_PROFILE",r[r.RISK_INDICATOR=5]="RISK_INDICATOR",r[r.AGGREGATION_RULE=6]="AGGREGATION_RULE",r[r.RISK_PROFILE=7]="RISK_PROFILE",r[r.STYLE=8]="STYLE",r[r.PERIMETER=9]="PERIMETER",r[r.COMPONENT=10]="COMPONENT",r[r.DASHBOARD=11]="DASHBOARD",(o=e.StrategyObjectType||(e.StrategyObjectType={})).getExportFileName=n.EnumUtils.createNameFn("object:StrategyObjectType.export",o),o.getExportWindowTitle=n.EnumUtils.createNameFn("object:StrategyObjectType.export.window.title",o),o.getName=n.EnumUtils.createNameFn("object:StrategyObjectType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosStrategyObjectType",o,!0,!1),o.column=a.EnumColumnUtils.createFactory(o,o.widget)}),define("text!templates/object/export.json.window.html",[],function(){return'<div>\n\t<p data-bind="text: message"></p>\n\t<div>\n\t\t<select id="sourceElement"></select>\n\t\t<select id="targetElement"></select>\n\t</div>\n\t<div class="formWindowButtons">\n\t\t<button id="okClickId" class="k-primary" data-role="button" data-icon="check" data-bind="click: exportClick">Export</button>\n\t\t<button data-role="button" data-icon="cancel" data-bind="click: cancelClick">Cancel</button>\n\t</div>\n</div>'}),define("exportJson/repository/ExpotObjectToJsonRepository",["require","exports","core/web/WebHttp","core/util/Logger","exportJson/data/StrategyObjectType"],function(t,e,i,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExpotObjectToJsonRepository=void 0;var n=function(){function t(){}return t.exportToJson=function(t,n,e){i.WebHttp.postJson("export/json.json",{ids:JSON.stringify(t),dataType:n},e).then(function(t){var e=new Blob([JSON.stringify(t,null,2)],{type:"application/json;charset=utf-8"});kendo.saveAs({dataURI:e,fileName:r.StrategyObjectType.getExportFileName(n)})}).catch(function(t){return a.Logger.error(t)})},t}();e.ExpotObjectToJsonRepository=n}),define("exportJson/views/ExportToJsonWindow",["require","exports","i18n","text!templates/object/export.json.window.html","core/data/DObservableBuilder","exportJson/data/StrategyObjectType","core/util/Logger","exportJson/repository/ExpotObjectToJsonRepository"],function(t,e,s,u,c,p,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExportToJsonWindow=void 0;var m="#targetElement",f="sourceElement",b="targetElement";function a(d,l){return new Promise(function(t,e){var n=kendo.template(u)({}),i=$("<div>").addClass("export-json-window").appendTo($(document.body));i.html(n);i.kendoWindow({modal:!0,width:750,height:650});var a,r=i.data("kendoWindow");r.bind("close",function(){return kendo.destroy(i),i.remove(),t(a),!0});var o=c.DObservableBuilder.of(d).add("message",function(){return s.I18N.t("object:StrategyObjectType.export.window.selectMessage",{object:p.StrategyObjectType.getExportWindowTitle(l)})}).add("exportClick",function(){var t=$(m).data("kendoListBox");a=t.dataItems().toJSON().map(function(t){return t.id}),r.close()}).add("cancelClick",function(t){a=void 0,r.close()}).build();s.I18N.localize(i),o.bind(i),function(t,e){t.empty(),kendo.destroy(t);var n={dataSource:{data:e,sort:{field:"name",dir:"asc"}},connectWith:b,dropSources:[b],draggable:{placeholder:function(t){return t.clone().css({opacity:.3,border:"1px dashed #000000"})}},selectable:"multiple",dataTextField:"name",dataValueField:"id",toolbar:{position:"right",tools:["transferTo","transferFrom","transferAllTo","transferAllFrom"]}};t.kendoListBox(n),t.data("kendoListBox")}(i.find("#sourceElement"),d),function(t){t.empty(),kendo.destroy(t);var e={connectWith:f,dropSources:[f],draggable:{placeholder:function(t){return t.clone().css({opacity:.3,border:"1px dashed #000000"})}},dataTextField:"name",dataValueField:"id",toolbar:{position:"right",tools:["moveUp","moveDown"]}};t.kendoListBox(e),t.data("kendoListBox")}(i.find(m)),r.title(p.StrategyObjectType.getExportWindowTitle(l)).open().center()})}var r=function(){function t(){}return t.open=function(t,e){a(t,e).then(function(t){t&&i.ExpotObjectToJsonRepository.exportToJson(t,e)}).catch(function(t){return n.Logger.error(t)})},t}();e.ExportToJsonWindow=r}),function(){define("views/dashboards/dashboard.list",["lodash","jquery","i18n","kendo","site","ui","basic/ui/CurrencyUI","dashboard/ui/DashboardPerimeterUI","core/util/ObservableUtils","dashboard/data/DashboardType","core/web/WebLocation","core/ui/grid/GridCommand","core/ui/grid/GridToolbar","exportJson/data/StrategyObjectType","exportJson/views/ExportToJsonWindow","exportJson/repository/ExpotObjectToJsonRepository"],function(i,a,r,o,t,e,n,d,l,s,u,c,p,m,f,b){var v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P;return v=n.CurrencyUI,g=s.DashboardType,h=d.DashboardPerimeterUI,D=l.ObservableUtils,N=u.WebLocation,C=c.GridCommand,w=p.GridToolbar,S=m.StrategyObjectType,I=f.ExportToJsonWindow,b.ExpotObjectToJsonRepository,E=t.map,k=e.grid,T=kendo.guid(),F=function(t,e){var n,i;if(e&&e.data)return n=e.data,"create"===(i=e.type)?t.pushCreate(n):"update"===i?t.pushUpdate(n):"destroy"===i&&t.pushDestroy(n),null},A=function(t,e){var n;if(e)return n=t.data.options,i.isArray(e)?i.each(e,F.bind(null,n)):F(n,e),null},L=function(t){var e;return e={options:t},a("body").on("domosws:dashboards",e,A),null},y=null,R=function(){var t;return t={transport:{read:{url:"board/dashboard/list.json",dataType:"json"},push:L},schema:{model:{id:"id",fields:{id:{type:"number"},sid:{type:"string"},type:{type:"number"},name:{type:"string"},description:{type:"string"},active:{type:"boolean"},currency:{type:"number"},perimeter:{nullable:!0,validation:{required:!1}}},perimeterName:function(){return D.get(this,"perimeter.name")}}},sort:{field:"name",dir:"asc"}},new o.data.DataSource(t)},O=function(){return null==y&&(y=R()),y},P=function(t){return N.resolveKendo(E.getDashboardDashboardEdit(t))},x=function(t){return N.resolveKendo(E.getDashboardDashboardClone(t.id))},_=function(t){var e;return e=t.data("kendoGrid").dataSource.data().toJSON().map(function(t){return{id:t.id,name:t.name}}),I.open(e,S.DASHBOARD),null},U=function(){var t,e,n,i;return e=a("#dashboardListGrid"),o.destroy(e),e.empty(),i=(new w).addCreate(N.resolveKendo(E.getDashboardDashboardEdit())).addClick(r.t("dashboards:dashboards.actions.exportJSON"),"",_.bind(null,e),T).addExcel(),t=(new C).addIdView(P).addUrl(r.t("dashboards:dashboards.actions.clone"),x).width(155),n={dataSource:O(),editable:!1,columns:[t.column(),{field:"name",title:r.t("dashboards:dashboards.fields.name")},{field:"sid",title:r.t("dashboards:dashboards.fields.sid")},g.column({field:"type",title:r.t("dashboards:dashboards.fields.type")}),{field:"active",title:r.t("dashboards:dashboards.fields.active")},v.column({field:"currency",title:r.t("dashboards:dashboards.fields.currency"),width:"100px"},{field:"description",title:r.t("dashboards:dashboards.fields.description")},h.column({field:"perimeter",title:r.t("dashboards:dashboards.fields.perimeter")}))],pageable:k.defaultPageable(),height:770,scrollable:!0,toolbar:i.template()},k.defaultsWithoutExcel(n),e.kendoGrid(n),t.bind(e),i.bind(e),null},{updateRawModel:function(t,e){},init:function(t){return U(),null}}})}.call(this),function(){var C,t;C="#dashboardPerimeterListGrid",t="dashboardPerimeterToolbarMenu",define("views/dashboards/perimeter.list",["jquery","lodash","i18n","kendo","site","ui","exportJson/data/StrategyObjectType","exportJson/views/ExportToJsonWindow","exportJson/repository/ExpotObjectToJsonRepository"],function(r,i,o,d,n,t,e,a,l){var s,u,c,p,m,f,b,v,y,h,g,T,I;return c=t.grid,p=e.StrategyObjectType,u=a.ExportToJsonWindow,l.ExpotObjectToJsonRepository,g=function(t,e){var n,i;if(e&&e.data)return n=e.data,"create"===(i=e.type)?t.pushCreate(n):"update"===i?t.pushUpdate(n):"destroy"===i&&t.pushDestroy(n),null},h=function(t,e){var n;if(e)return n=t.data.options,i.isArray(e)?i.each(e,g.bind(null,n)):g(n,e),null},T=function(t){var e;return e={options:t},r("body").on("domosws:dashboards:perimeters",e,h),null},s=null,m=function(){var t;return t={transport:{read:{url:"board/perimeter/list.json",dataType:"json"},push:T},schema:{model:{id:"id",fields:{id:{type:"number"},stringId:{type:"string"}}}},sort:{field:"stringId",dir:"asc"}},new d.data.DataSource(t)},b=function(){return null==s&&(s=m()),s},f=function(t){var e;return e=t.data("kendoGrid").dataSource.data().toJSON().map(function(t){return{id:t.id,name:t.stringId}}),u.open(e,p.PERIMETER),null},I=function(t){var e;return"export"===r(t.item).data("key")?(e=r(C),void f(e)):(r(t.item).children(".k-link").data("key")&&n.router.navigate(n.map.getDashboardPerimeterEdit()),null)},v=function(t){var e;return(e=null!=t?t.id:void 0)?n.router.navigate(n.map.getDashboardPerimeterEdit(e)):n.router.navigate(n.map.notfound)},y=function(){var t,e,n,i,a;return t=r(C),d.destroy(t),t.empty(),a=d.template("<ul id='dashboardPerimeterToolbarMenu' class='gridToolbarMenu d-sprite-wrapper' data-role='menu'> <li> <a href='javascript:void(0)' class='k-link' data-key='create'> <span class='k-sprite d-new'></span> <span data-i18n='dashboards:perimeters.actions.create'></span> </a> </li> <li data-key='export'> <a href='javascript:void(0)' class='k-link' data-i18n='dashboards:perimeters.actions.exportJSON'></a> </li> </ul>"),i=a({}),e={dataSource:b(),editable:!1,columns:[{command:[c.customCommand(o.t("dashboards:perimeters.actions.view"),v)],title:" ",width:"100px"},{field:"stringId",title:o.t("dashboards:perimeters.fields.sid")}],pageable:c.defaultPageable(),height:770,scrollable:!0,toolbar:function(){return i}},c.withDefaults(e),t.kendoGrid(e),n=t.find("#dashboardPerimeterToolbarMenu"),d.bind(n,{}),n.localize(),n.data("kendoMenu").bind("select",I),null},{updateRawModel:function(t,e){},init:function(t){return y(),null}}})}.call(this),define("dashboard/repository/DashboardComponentRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardComponentRepository=void 0;var i=function(){function t(){}return t.fetchIdentifiables=function(){return n.WebHttp.getJson("board/component/id/list.json")},t.fetchTextBaseIdentifiables=function(){return n.WebHttp.getJson("board/component/id/list.json",{filter:"textBase"})},t.fetchDashboardIdentifiables=function(t){return n.WebHttp.getJson("board/component/dashboards.json",{componentId:t})},t}();e.DashboardComponentRepository=i}),define("dashboard/component/views/DashboardComponentGrid",["require","exports","i18n","core/ui/grid/GridUtils","dashboard/data/DashboardType","dashboard/web/DashboardMap","kendo","dashboard/repository/DashboardComponentRepository","lodash"],function(t,e,r,o,d,l,s,u,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardComponentGrid=void 0;var n=function(){function t(){}return t.setup=function(t,e){if(t.empty(),kendo.destroy(t),e){var n,i,a={dataSource:(n=e,i=kendo.data.Model.define({id:"id",fields:{id:{type:"number"},name:{type:"string"},type:{type:"number"}}}),{transport:{read:function(e){u.DashboardComponentRepository.fetchDashboardIdentifiables(n).then(function(t){return c.map(t,function(t){return new i(t)})}).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})}},schema:{model:i},sort:{field:"name",dir:"asc"}}),columns:[{field:"name",title:r.I18N.t("dashboards:dashboards.fields.name"),groupable:!1,template:function(t){var e=t.toJSON(),n=e.name,i=e.id;return'<a href="'+s.htmlEncode(l.DashboardMap.dashboardEdit(i))+'">'+s.htmlEncode(n)+"</a>"}},d.DashboardType.column({field:"type",title:r.I18N.t("dashboards:dashboards.fields.type")})],pageable:o.GridUtils.defaultPageable(),editable:!1,scrollable:!1,filterable:!1,reorderable:!1,resizable:!1};o.GridUtils.withDefaults(a),t.kendoGrid(a)}},t}();e.DashboardComponentGrid=n}),define("dashboard/component/views/DashboardComponentWindow",["require","exports","./DashboardComponentGrid","i18n"],function(t,e,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardComponentWindow=void 0;var n=function(){function t(){}return t.showDashboards=function(t){var e=$("<div>").addClass("formWindow").appendTo($(document.body)),n=$("<div>").addClass("floatingGrid_center").appendTo(e);e.kendoWindow({modal:!0,width:600,minWidth:300,visible:!1});var i=t.get("id");r.DashboardComponentGrid.setup(n,i);var a=e.data("kendoWindow");a.title(o.I18N.t("dashboards:components.fields.dashboards")),a.bind("close",function(){return kendo.destroy(e),e.remove(),!0}),o.I18N.localize(e),a.open().center()},t}();e.DashboardComponentWindow=n}),function(){var L,t;L="#dashboardComponentListGrid",t="dashboardComponentToolbarMenu",define("views/dashboards/component.list",["jquery","lodash","i18n","kendo","site","ui","basic/ui/CurrencyUI","core/api/DashboardComponentType","exportJson/data/StrategyObjectType","exportJson/views/ExportToJsonWindow","exportJson/repository/ExpotObjectToJsonRepository","dashboard/component/views/DashboardComponentWindow","core/web/WebLocation","core/ui/grid/GridCommand"],function(o,a,d,l,r,t,e,n,i,s,u,c,p,m){var f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F;return f=e.CurrencyUI,T=t.grid,v=n.DashboardComponentType,I=i.StrategyObjectType,h=s.ExportToJsonWindow,u.ExpotObjectToJsonRepository,y=c.DashboardComponentWindow,C=p.WebLocation,g=m.GridCommand,x=function(t,e){var n,i;if(e&&e.data)return n=e.data,"create"===(i=e.type)?t.pushCreate(n):"update"===i?t.pushUpdate(n):"destroy"===i&&t.pushDestroy(n),null},N=function(t,e){var n;if(e)return n=t.data.options,a.isArray(e)?a.each(e,x.bind(null,n)):x(n,e),null},R=function(t){var e;return e={options:t},o("body").on("domosws:dashboards:components",e,N),null},b=null,O=function(t,e){var n;return n={dashboard:t},o.getJSON("board/component/list.json",n).done(e.success).fail(e.error)},w=function(t){var e;return e={transport:{read:O.bind(null,t),push:R},schema:{model:{id:"id",fields:{id:{type:"number"},sid:{type:"string"},name:{type:"string"},type:{type:"number"},description:{type:"string"},currency:{type:"number"},dashboards:{nullable:!0}}}},sort:{field:"name",dir:"asc"}},new l.data.DataSource(e)},E=function(){return null==b&&(b=w()),b},F=function(t){var e,n,i;return"export"===o(t.item).data("key")?(e=o(L),void k(e)):((n=o(t.item).children(".k-link").data("key"))&&a.has(v,n)&&(i=v[n])&&r.router.navigate(r.map.getDashboardComponentCreate(i)),null)},A=function(t){return C.resolveKendo(r.map.getDashboardComponentEdit(t))},k=function(t){var e;return e=t.data("kendoGrid").dataSource.data().toJSON().map(function(t){return{id:t.id,name:t.name}}),h.open(e,I.COMPONENT),null},D=function(){var t,e,n,i,a,r;return e=o(L),l.destroy(e),e.empty(),r=l.template("<ul id='dashboardComponentToolbarMenu' class='gridToolbarMenu d-sprite-wrapper' data-role='menu'> <li> <span class='k-sprite d-new'></span> <span data-i18n='dashboards:components.actions.create'></span> <ul> <li> <a href='javascript:void(0)' class='k-link' data-key='OBJECT' data-i18n='dashboards:components.OBJECT.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='CURRENCY' data-i18n='dashboards:components.CURRENCY.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='GROUP_BY' data-i18n='dashboards:components.GROUP_BY.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='GROUP_BY_SCRIPT' data-i18n='dashboards:components.GROUP_BY_SCRIPT.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='INDEX' data-i18n='dashboards:components.INDEX.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='PORTFOLIO' data-i18n='dashboards:components.PORTFOLIO.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='TEXT' data-i18n='dashboards:components.TEXT.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='CONTEXTUAL_TEXT' data-i18n='dashboards:components.CONTEXTUAL_TEXT.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='COMPLEX_TEXT' data-i18n='dashboards:components.COMPLEX_TEXT.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='RISK' data-i18n='dashboards:components.RISK.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='DEBT_CASH_FLOWS' data-i18n='dashboards:components.DEBT_CASH_FLOWS.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='REPORT' data-i18n='dashboards:components.REPORT.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='DATA' data-i18n='dashboards:components.DATA.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='COMPLIANCE' data-i18n='dashboards:components.COMPLIANCE.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='SPREADSHEET' data-i18n='dashboards:components.SPREADSHEET.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='DOCUMENT_IMAGE' data-i18n='dashboards:components.DOCUMENT_IMAGE.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='SUB_COMPONENT' data-i18n='dashboards:components.SUB_COMPONENT.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='TABLE' data-i18n='dashboards:components.TABLE.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='CAPITAL_CALL' data-i18n='dashboards:components.CAPITAL_CALL.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='COMMITMENT' data-i18n='dashboards:components.COMMITMENT.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='DISTRIBUTION' data-i18n='dashboards:components.DISTRIBUTION.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='CAPITAL_ACCOUNT' data-i18n='dashboards:components.CAPITAL_ACCOUNT.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='OPERATIONS' data-i18n='dashboards:components.OPERATIONS.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='CHECK_NAME' data-i18n='dashboards:components.CHECK_NAME.new'></a> </li> <li> <a href='javascript:void(0)' class='k-link' data-key='EQUITY' data-i18n='dashboards:components.EQUITY.new'></a> </li> </ul> </li> <li data-key='export'> <a href='javascript:void(0)' class='k-link' data-i18n='dashboards:components.actions.exportJSON'></a> </li> </ul>"),a=r({}),t=(new g).addIdView(A).width(100),n={dataSource:E(),editable:!1,columns:[t.column(),{field:"name",title:d.t("dashboards:components.fields.name"),width:250},{field:"sid",title:d.t("dashboards:components.fields.sid")},v.column({field:"type",title:d.t("dashboards:components.fields.type")}),f.column({field:"currency",title:d.t("dashboards:dashboards.fields.currency"),width:100}),{field:"description",title:d.t("dashboards:dashboards.fields.description")},{command:[T.customCommand(d.t("dashboards:components.actions.dashboards"),y.showDashboards)],title:" ",width:165}],pageable:T.defaultPageable(),height:770,scrollable:!0,toolbar:function(){return a}},T.withDefaults(n),e.kendoGrid(n),i=e.find("#dashboardComponentToolbarMenu"),l.bind(i,{}),i.localize(),i.data("kendoMenu").bind("select",F),null},U=function(t,e){return t.dataSource.data(e)},S=function(t){var e,n;if(n=o(L).data("kendoGrid"))return e={dashboard:t},o.getJSON("board/component/list.json",e).done(U.bind(null,n))},_=function(t,e){return"dashboard"===e.field&&S(t.dashboard),null},{updateRawModel:function(t,e){return e.dashboard=null},init:function(t){var e;return D(),(e=t.model).bind("change",_.bind(null,e)),null}}})}.call(this),function(){var C,t;C="#dashboardStyleListGrid",t="dashboardStyleToolbarMenu",define("views/dashboards/style.list",["jquery","lodash","i18n","kendo","site","ui","exportJson/data/StrategyObjectType","exportJson/views/ExportToJsonWindow","exportJson/repository/ExpotObjectToJsonRepository"],function(r,i,o,d,n,t,e,a,l){var s,u,c,p,m,f,b,v,y,h,g,T,I;return c=t.grid,p=e.StrategyObjectType,u=a.ExportToJsonWindow,l.ExpotObjectToJsonRepository,g=function(t,e){var n,i;if(e&&e.data)return n=e.data,"create"===(i=e.type)?t.pushCreate(n):"update"===i?t.pushUpdate(n):"destroy"===i&&t.pushDestroy(n),null},h=function(t,e){var n;if(e)return n=t.data.options,i.isArray(e)?i.each(e,g.bind(null,n)):g(n,e),null},T=function(t){var e;return e={options:t},r("body").on("domosws:dashboards:styles",e,h),null},s=null,m=function(){var t;return t={transport:{read:{url:"board/style/list.json",dataType:"json"},push:T},schema:{model:{id:"id",fields:{id:{type:"number"},stringId:{type:"string"},name:{type:"string"}}}},sort:{field:"name",dir:"asc"},pageSize:10},new d.data.DataSource(t)},b=function(){return null==s&&(s=m()),s},f=function(t){var e;return e=t.data("kendoGrid").dataSource.data().toJSON().map(function(t){return{id:t.id,name:t.stringId}}),u.open(e,p.STYLE),null},I=function(t){var e;return"export"===r(t.item).data("key")?(e=r(C),void f(e)):(r(t.item).children(".k-link").data("key")&&n.router.navigate(n.map.getDashboardStyleEdit()),null)},v=function(t){var e;return(e=null!=t?t.id:void 0)?n.router.navigate(n.map.getDashboardStyleEdit(e)):n.router.navigate(n.map.notfound)},y=function(){var t,e,n,i,a;return t=r(C),d.destroy(t),t.empty(),a=d.template("<ul id='dashboardStyleToolbarMenu' class='gridToolbarMenu d-sprite-wrapper' data-role='menu'> <li> <a href='javascript:void(0)' class='k-link' data-key='create'> <span class='k-sprite d-new'></span> <span data-i18n='dashboards:styles.actions.create'></span> </a> </li> <li data-key='export'> <a href='javascript:void(0)' class='k-link' data-i18n='dashboards:styles.actions.exportJSON'></a> </li> </ul>"),i=a({}),e={dataSource:b(),editable:!1,columns:[{command:[c.customCommand(o.t("dashboards:styles.actions.view"),v)],title:" ",width:"100px"},{field:"stringId",title:o.t("dashboards:styles.fields.sid")},{field:"name",title:o.t("dashboards:styles.fields.name")}],pageable:c.defaultPageable(),height:400,scrollable:!0,toolbar:function(){return i}},c.withDefaults(e),t.kendoGrid(e),n=t.find("#dashboardStyleToolbarMenu"),d.bind(n,{}),n.localize(),n.data("kendoMenu").bind("select",I),null},{updateRawModel:function(t,e){},init:function(t){return y(),null}}})}.call(this),define("text!templates/dashboards/dashboards.setup.html",[],function(){return'<div id="dashboardSetupRoot">\n\t<div>\n\t\t<ul data-role="menu" style="width: 100%">\n\t\t\t<li>\n\t\t\t\t<a href="\\\\#!/dashboards" data-i18n="dashboards:menu.overview"></a>\n\t\t\t</li>\n\t\t\t<li class="k-state-active">\n\t\t\t\t<a href="javascript:void(0)" data-i18n="dashboards:menu.setup"></a>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n\t<div class="idxStandardContent">\n\t\t<div data-role="tabstrip">\n\t\t\t<ul>\n\t\t\t\t<li class="k-state-active">\n\t\t\t\t\t<span data-i18n="dashboards:menu.dashboards"></span>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<span data-i18n="dashboards:menu.perimeters"></span>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<span data-i18n="dashboards:menu.components"></span>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<span data-i18n="dashboards:menu.styles"></span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\n\t\t\t\x3c!-- Dashboards --\x3e\n\t\t\t<div class="dashboardSetupPane">\n\t\t\t\t<h2 data-i18n="dashboards:menu.dashboards"></h2>\n\t\t\t\t<div id="dashboardListGrid" class="floatingGrid"></div>\n\t\t\t\t<div class="clearer"></div>\n\t\t\t</div>\n\n\t\t\t\x3c!-- Perimeters --\x3e\n\t\t\t<div class="dashboardSetupPane">\n\t\t\t\t<h2 data-i18n="dashboards:menu.perimeters"></h2>\n\t\t\t\t<div id="dashboardPerimeterListGrid" class="floatingGrid_33"></div>\n\t\t\t\t<div class="clearer"></div>\n\t\t\t</div>\n\n\t\t\t\x3c!-- Components --\x3e\n\t\t\t<div class="dashboardSetupPane">\n\t\t\t\t<h2 data-i18n="dashboards:menu.components"></h2>\n\t\t\t\t<p></p>\n\t\t\t\t<p></p>\n\t\t\t\t<div class="k-content">\n\t\t\t\t\t<label for="dashboardId" data-i18n="dashboards:components.fields.dashboard"></label>\n\t\t\t\t\t<input id="dashboardId" data-bind="value: dashboard" data-role="domosdashboard"\n\t\t\t\t\t\tdata-value-primitive="true" />\n\t\t\t\t</div>\n\t\t\t\t<p></p>\n\t\t\t\t<p></p>\n\t\t\t\t<div id="dashboardComponentListGrid" class="floatingGrid"></div>\n\t\t\t\t<div class="clearer"></div>\n\t\t\t</div>\n\n\t\t\t\x3c!-- Styles --\x3e\n\t\t\t<div class="dashboardSetupPane">\n\t\t\t\t<h2 data-i18n="dashboards:menu.styles"></h2>\n\t\t\t\t<div id="dashboardStyleListGrid" class="floatingGrid_33"></div>\n\t\t\t\t<div class="clearer"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'}),function(){define("views/dashboards/dashboards.setup",["jquery","i18n","kendo","site","views/layout","views/not.found","views/dashboards/dashboard.list","views/dashboards/perimeter.list","views/dashboards/component.list","views/dashboards/style.list","core/data/SiteCategories","text!templates/dashboards/dashboards.setup.html"],function(i,t,a,r,o,e,n,d,l,s,u,c){var p,m,f,b,v;return p=[n,d,l,s],m=u.SiteCategories,function(){return{}},f=function(t){var e,n,i;for(i={},e=0,n=p.length;e<n;e++)p[e].updateRawModel(t,i);return i},v=function(t){var e,n;for(i("#dashboardSetupRoot").localize(),e=0,n=p.length;e<n;e++)p[e].init(t);return null},b=function(t,e){var n,i;return i=a.template(c)({}),n={model:e,init:v.bind(null,t)},new a.View(i,n)},{init:function(){var t,e,n,i;return n=f(t={}),e=a.observable(n),t.model=e,i=b(t,e),o.register("dashboardSetup",r.map.dashboardSetup,i,null,m.dashboards),null}}})}.call(this),define("text!templates/loading.html",[],function(){return"<div class='k-loading-image'></div>"}),define("text!templates/loading.panel.html",[],function(){return"<div></div>"}),function(){define("views/loading.light",["kendo","text!templates/loading.html","text!templates/loading.panel.html"],function(e,n,i){var t,a,r,o,d,l;return r=function(){var t;return t=e.template(i)({}),new e.View(t)},d=function(){return null==t&&(t=r()),t},o=function(){var t;return t=e.template(n)({}),new e.View(t)},a=t=null,l=function(){return null==a&&(a=o()),a},{display:function(t,e,n){var i,a;return null==n&&(n=!1),a=l(),i=null,n&&(i=d()),t.display(e,a,i)}}})}.call(this),function(){define("views/loading",["views/layout","views/loading.light"],function(n,i){return{display:function(t,e){return null==e&&(e=!1),i.display(n,t,e)}}})}.call(this),function(){var P,M;M="minValue",P="maxValue",define("views/data/tag/tags",["jquery","lodash","i18n","kendo","ui","tag/data/TagDefinitions","core/api/TagTarget","core/api/TagType","tag/repository/TagDefinitionRepository","core/ui/PercentUI"],function(f,b,n,d,t,e,i,a,r,o){var l,s,u,c,p,m,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L;return l=o.PercentUI,s=r.TagDefinitionRepository,c=i.TagTarget,p=a.TagType,u=e.TagDefinitions,R=function(t){return t.type===p.MULTIPLE?[]:null},v=function(t,e){return t.type===p.DATE?e?new Date(e):null:e},A=function(t){var e,n,i,a,r,o,d;for(d=t.tags,o={},i=0,r=(n=u.listByObjectType(t.type,c.OBJECT)).length;i<r;i++)a="tag"+(e=n[i]).id,b.has(d,a)?o[a]=v(e,d[a]):o[a]=R(e);return o},_=function(t){return"tag"+t.id},x=function(t,e){return null==e&&(e="value"),e+": tags.tag"+t.id},y=function(t,e,n){return f("<input>").attr("id",_(n)).attr("type","checkbox").attr("data-bind",x(n,"checked")).appendTo(t)},E=function(t,e,n){return f("<input>").attr("id",_(n)).attr("type","text").addClass("k-textbox").attr("data-bind",x(n)).appendTo(t)},T=function(t,e,n){var i,a,r,o;return n.percent?(a=f("<input>").attr("id",_(n)).attr("data-bind",x(n)).appendTo(t),o={min:n[M],max:n[P],decimals:n.decimals},l.widget(a,o)):(a=f("<input>").attr("id",_(n)).attr("data-bind",x(n)).appendTo(t),r="n",(i=n.decimals)&&0<i&&(r="n"+i),o={min:n[M],max:n[P],decimals:i,format:r},a.kendoNumericTextBox(o)),a},I=function(t,e,n){var i,a;return i=f("<input>").attr("id",_(n)).attr("data-bind",x(n)).appendTo(t),a={min:n[M],max:n[P],format:"n0"},i.kendoNumericTextBox(a),i},F=function(t){return{id:t.id,name:n.exists(t.label)?n.t(t.label):t.label,priority:t.priority}},U=function(t){var e;return e=t.sort?"name":"priority",b.chain(t.entries).map(F).sortBy(e).value()},k=function(t,e,n){var i,a;return a={autoWidth:!0,dataSource:U(n),dataValueField:"id",dataTextField:"name",valuePrimitive:!0,optionLabel:"--"},(i=f("<input>").attr("id",_(n)).attr("data-bind",x(n)).appendTo(t)).kendoDropDownList(a),i},w=function(t,e,n){var i,a,r,o;return a=U(n),o=f("<div>").appendTo(t),r={dataSource:a,dataValueField:"id",dataTextField:"name",valuePrimitive:!0},(i=f("<input>").attr("id",_(n)).attr("data-bind",x(n)).appendTo(o)).kendoMultiSelect(r),i},h=function(t,e,n){var i;return(i=f("<input>").attr("id",_(n)).attr("data-bind",x(n)).appendTo(t)).kendoDatePicker(),i},g=function(t,e,n){switch(n.type){case p.BOOLEAN:return y(t,0,n);case p.STRING:return E(t,0,n);case p.DOUBLE:return T(t,0,n);case p.INTEGER:return I(t,0,n);case p.SELECT:return k(t,0,n);case p.MULTIPLE:return w(t,0,n);case p.DATE:return h(t,0,n);default:return null}},C=function(t,e){return f("<label>").attr("for",_(e)).text(e.label).appendTo(t)},S=function(t,e,n,i){var a,r,o,d,l,s,u,c,p,m;if(n&&!(n.length<=0)){for(d=O(t,i),f("<h3>").text(e.label).appendTo(d),o=b.sortBy(n,"priority"),c=f("<table>").addClass("formTable").appendTo(d),m=null,u=[],l=a=0,s=o.length;l<s;l++)r=o[l],0===a&&(m=f("<tr>").appendTo(c)),2===++a&&(a=0),p=f("<td>").appendTo(m),C(p,r),p=f("<td>").appendTo(m),u.push(g(p,0,r));return u}},N=function(t,e){return f("<h3>").text(n.t("tags:noTags")).appendTo(O(t,e))},O=function(t,e){return e?e.find("#"+t.elementId):f("#"+t.elementId)},m=function(t,e){var n;return n=O(t,e),d.destroy(n),n.empty()},D=function(t,e,n,i){var a,r,o;if((n=b.sortBy(n,["priority","label"]))&&!(n.length<=0)){for(r=0,o=n.length;r<o;r++)a=n[r],S(t,a,a.definitions,i);return d.bind(O(t,i),e),null}N(t,i)},L=function(e,n,i){return m(e,i),s.listByCategory(n.get("type"),c.OBJECT).then(function(t){return D(e,n,t,i)}).catch(function(){return N(e,i)})},{create:function(t){return{display:L.bind(null,{elementId:t})}},updateRawModel:function(t){return t.tags={}},updateModel:function(t,e){return t.set("tags",A(e)),null}}})}.call(this),function(){define("views/data/history/histories",["jquery","lodash","i18n","kendo","site","tag/data/TagDefinitions","history/data/Histories","core/ui/PercentUI","core/api/HistoryCategory","core/api/HistoryType","core/api/TagTarget","core/api/TagType","core/web/WebLocation"],function(f,b,d,i,t,e,n,a,r,o,l,s,u){var m,c,p,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q,z,X,Z;return y=a.PercentUI,m=n.Histories,c=r.HistoryCategory,p=o.HistoryType,g=l.TagTarget,T=s.TagType,h=e.TagDefinitions,t.router,v=t.map,I=u.WebLocation,z=function(t){return"tag"+t.id},w=function(t,e){return e},H=function(t){return t.type===p.PRICE?{value:null,currency:978}:null},K=function(t){var e,n,i,a,r,o,d,l,s,u,c,p;for(a=t.history,c={},p=t.type,o=0,s=(n=h.listByObjectType(p,g.HISTORY)).length;o<s;o++)e=n[o],d=z(e),b.has(a,d)?c[d]=a[d]:c[d]=null;for(l=0,u=(r=m.listByObjectType(p)).length;l<u;l++)i=r[l],b.has(a,i.key)?c[i.key]=w(0,a[i.key]):c[i.key]=H(i);return c},Q=function(t){return 0===t.get("id")},J=function(t){return"histo_"+t.history},V=function(t){return"histo_currency_"+t.history},W=function(t,e,n){var i;return null==e&&(e="value"),null==n&&(n=null),i=n?"."+n:"",e+": history."+t.history+i},U=function(t,e,n,i){var a,r;return null==i&&(i=null),Q(n)?("p"===e.format?(a=f("<input>").attr("id",J(e)).attr("data-bind",W(e,"value",i)).appendTo(t),y.widget(a)):(a=f("<input>").attr("id",J(e)).attr("data-bind",W(e,"value",i)).appendTo(t),r={format:e.format},a.kendoNumericTextBox(r)),a):f("<input>").addClass("k-textbox").attr("id",J(e)).attr("data-bind",W(e,"display",i)).attr("data-format",e.format).attr("readonly","readonly").appendTo(t)},k=function(t,e,n,i){var a;return null==i&&(i=null),a=f("<input>").attr("type","checkbox").attr("id",J(e)).attr("data-bind",W(e,"checked",i)),Q(n)||(a=a.prop("readonly",!0).prop("disabled",!0)),a.appendTo(t)},O=function(t,e,n){var i;return i=null,(i=Q(n)?f("<label>").attr("for",J(e)).text(e.name).appendTo(t):f("<a>").addClass("k-link").attr("href",I.resolveKendo(v.getObjectHistory(n.get("id"),e.history))).text(e.name).appendTo(t))&&e.aifmRequired&&i.addClass("aifmRequired"),null},G=function(t,e,n){var i,a;return a=f("<tr>").appendTo(e),i=f("<td>").appendTo(a),O(i,t,n),i=f("<td>").appendTo(a),U(i,t,n),f("<td>").appendTo(a),f("<td>").appendTo(a),null},q=function(t,e,n){var i,a,r,o;return o=f("<tr>").appendTo(e),r=f("<td>").appendTo(o),O(r,t,n),r=f("<td>").appendTo(o),U(r,t,n,"value"),r=f("<td>").appendTo(o),f("<label>").attr("for",V(t)).text(d.t("data:fields.currency")).appendTo(r),r=f("<td>").appendTo(o),a=f("<input>").attr("id",V(t)).attr("data-bind",W(t,"value","currency")).appendTo(r),i={enable:Q(n)},a.kendoDomosCurrency(i),null},L=function(t,e,n){return G(t,e,n)},M=function(t,e,n){return G(t,e,n)},F=function(t,e,n){var i,a;return a=f("<tr>").appendTo(e),i=f("<td>").appendTo(a),O(i,t,n),i=f("<td>").appendTo(a),k(i,t,n),f("<td>").appendTo(a),f("<td>").appendTo(a),null},X=function(t){return{id:t.id,name:d.t(t.label),priority:t.priority}},$=function(t){var e;return e=t.sort?"name":"priority",b.chain(t.entries).map(X).sortBy(e).value()},B=function(t,e,n,i){var a,r,o,d;return d=f("<tr>").appendTo(n),o=f("<td>").appendTo(d),O(o,t,i),o=f("<td>").appendTo(d),a=f("<input>").attr("id",J(t)).attr("data-bind",W(t,"value")).appendTo(o),r={autoWidth:!0,dataSource:$(e),dataValueField:"id",dataTextField:"name",valuePrimitive:!0,optionLabel:"--",enable:Q(i)},a.kendoDropDownList(r),null},P=function(t,e,n){var i,a,r,o,d,l,s,u,c,p,m;for(o=Y(t),d=b.groupBy(e,"category"),(a=b.keys(d)).sort(),p=[],l=0,u=a.length;l<u;l++){for(i=a[l],f("<h2>").text(i).appendTo(o),r=b.sortBy(d[i],"name"),m=f("<table>").addClass("formTable").appendTo(o),s=0,c=r.length;s<c;s++)r[s].display(m,n);p.push(null)}return p},A=function(t,e,n){return P(t,n,e),i.bind(Y(t),e),null},j=function(t){return f("<h3>").text(d.t("history:noHistories")).appendTo(Y(t))},Y=function(t){return f("#"+t.elementId)},C=function(t){var e;return e=Y(t),i.destroy(e),e.empty(),null},x=function(t){var e;return(e={name:t.name,history:t.key,format:t.format,decimals:t.decimals,category:c.getName(t.historyCategory),aifmRequired:t.aifmRequired}).display=G.bind(null,e),e},R=function(t){var e;return(e={name:t.name,history:t.key,format:t.format,decimals:t.decimals,category:c.getName(t.historyCategory),aifmRequired:t.aifmRequired}).display=q.bind(null,e),e},D=function(t){var e;return e={name:d.t(t.label),history:z(t),format:"n",category:d.t(t.category.name),aifmRequired:!1},t.decimals&&(e.decimals=t.decimals),t.percent&&(e.format="p"),e.display=L.bind(null,e),e},N=function(t){var e;return(e={name:d.t(t.label),history:z(t),format:"n0",category:d.t(t.category.name),aifmRequired:!1}).display=M.bind(null,e),e},E=function(t){var e;return(e={name:d.t(t.label),history:z(t),category:d.t(t.category.name),aifmRequired:!1}).display=F.bind(null,e),e},_=function(t){var e;return(e={name:d.t(t.label),history:z(t),format:"n",category:d.t(t.category.name),aifmRequired:!1}).display=B.bind(null,e,t),e},S=function(t){var e,n,i,a,r,o,d,l,s,u,c;for(c=t.get("type"),n={},r=0,d=(u=h.listByObjectType(c,g.HISTORY)).length;r<d;r++)s=null,(e=u[r]).type===T.DOUBLE?s=D(e):e.type===T.INTEGER?s=N(e):e.type===T.SELECT?s=_(e):e.type===T.BOOLEAN&&(s=E(e)),s&&(n[s.history]=s);for(o=0,l=(a=m.listByObjectType(c)).length;o<l;o++)s=null,(i=a[o]).type===p.NUMBER?s=x(i):i.type===p.PRICE&&(s=R(i)),s&&(n[s.history]=s);return b.values(n)},Z=function(t,e){var n;return C(t),!(n=S(e))||n.length<=0?j(t):A(t,e,n),null},{create:function(t){return{display:Z.bind(null,{elementId:t})}},updateRawModel:function(t){return t.history={}},updateModel:function(t,e){return t.set("history",K(e)),null}}})}.call(this),define("metric/data/Metric",["require","exports","lodash","i18n"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metric=void 0;var a=function(){function t(t){this.key=t.key,this.type=t.type,this.format=t.format,this.decimals=t.decimals,this.min=t.min,this.max=t.max,this.step=t.step,this.aifmRequired=t.aifmRequired,this.categories=t.categories,this.enumObject=t.enumObject,this._nameKey="metric:"+this.key}return Object.defineProperty(t.prototype,"name",{get:function(){return i.I18N.t(this._nameKey)},enumerable:!1,configurable:!0}),t.prototype.isValid=function(e){return!!n.find(this.categories,function(t){return e.isOf(t)})},t}();e.Metric=a}),define("core/api/MetricType",["require","exports"],function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.MetricType=void 0,(n=e.MetricType||(e.MetricType={}))[n.SIMPLE=1]="SIMPLE",n[n.NUMBER=2]="NUMBER",n[n.BUCKET=3]="BUCKET",n[n.MARKET=4]="MARKET",n[n.VAR=5]="VAR",n[n.ENUM=6]="ENUM"}),define("core/api/AIFMDInvestorGroup",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AIFMDInvestorGroup=void 0;var r,o;(r=e.AIFMDInvestorGroup||(e.AIFMDInvestorGroup={}))[r.NON_FINANCIAL_CORPORATIONS=1]="NON_FINANCIAL_CORPORATIONS",r[r.BANKS=2]="BANKS",r[r.INSURANCE_CORPORATIONS=3]="INSURANCE_CORPORATIONS",r[r.OTHER_FINANCIAL_INSTITUTIONS=4]="OTHER_FINANCIAL_INSTITUTIONS",r[r.PENSION_PLANS_OR_FUNDS=5]="PENSION_PLANS_OR_FUNDS",r[r.GENERAL_GOVERNMENT=6]="GENERAL_GOVERNMENT",r[r.OTHER_CIU=7]="OTHER_CIU",r[r.HOUSEHOLDS=8]="HOUSEHOLDS",r[r.UNKNOWN=9]="UNKNOWN",r[r.NONE=10]="NONE",(o=e.AIFMDInvestorGroup||(e.AIFMDInvestorGroup={})).getName=a.EnumUtils.createNameFn("object:AIFMDInvestorGroup",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAIFMDInvestorGroup",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/AIFMDInvestorConcentration",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AIFMDInvestorConcentration=void 0;var r,o;(r=e.AIFMDInvestorConcentration||(e.AIFMDInvestorConcentration={}))[r.TOP_5=1]="TOP_5",r[r.PROFESSIONAL=2]="PROFESSIONAL",r[r.RETAIL=3]="RETAIL",(o=e.AIFMDInvestorConcentration||(e.AIFMDInvestorConcentration={})).getName=a.EnumUtils.createNameFn("object:AIFMDInvestorConcentration",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAIFMDInvestorConcentration",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("metric/data/Metrics",["require","exports","lodash","object/data/ObjectCategories","object/data/ObjectTypes","./Metric","core/api/MetricType","core/api/AIFMDLiquidationPeriod","core/api/AIFMDInvestorGroup","core/api/AIFMDInvestorConcentration"],function(t,e,n,p,i,m,f,b,v,y){"use strict";function h(t,e){return{key:t,type:f.MetricType.SIMPLE,categories:e,aifmRequired:!1,decimals:null,min:null,max:null,enumObject:null,format:"n",step:1}}function g(t,e,n){var i=h(t,e);return i.type=f.MetricType.SIMPLE,i.aifmRequired=n,i}function T(t,e){var n=h(t,e);return n.type=f.MetricType.NUMBER,n}function I(t,e){var n=h(t,e);return n.type=f.MetricType.NUMBER,n.format="p",n.decimals=4,n.step=.01,n}function C(t,e){var n=h(t,e);return n.type=f.MetricType.BUCKET,n}function w(t,e,n){var i=h(t,e);return i.type=f.MetricType.ENUM,i.min=0,i.enumObject=n,i}Object.defineProperty(e,"__esModule",{value:!0}),e.Metrics=e.MetricsImpl=void 0;var a=function(){function t(){var n=this;this._byKey={};var t,e,i,a,r,o,d,l,s,u,c=function(t){var e=new m.Metric(t);return n._byKey[e.key]=e};this.stressTestArticle15=c(g("stressTestArticle15",[p.ObjectCategories.portfolios],!0)),this.stressTestArticle16=c(g("stressTestArticle16",[p.ObjectCategories.portfolios],!0)),this.netEquityDelta=c(T("netEquityDelta",[p.ObjectCategories.portfolios])),this.netFXDelta=c(T("netFXDelta",[p.ObjectCategories.portfolios])),this.netCommodityDelta=c(T("netCommodityDelta",[p.ObjectCategories.portfolios])),this.grossInvestmentReturnRate=c(I("grossInvestmentReturnRate",[p.ObjectCategories.investmentVehicles])),this.netInvestmentReturnRate=c(I("netInvestmentReturnRate",[p.ObjectCategories.investmentVehicles])),this.grossLeverage=c(I("grossLeverage",[p.ObjectCategories.investmentVehicles])),this.netLeverage=c(I("netLeverage",[p.ObjectCategories.investmentVehicles])),this.totalOpenPositions=c(T("totalOpenPositions",[p.ObjectCategories.investmentVehicles])),this.netDV01=c(C("netDV01",[p.ObjectCategories.portfolios])),this.netCS01=c(C("netCS01",[p.ObjectCategories.portfolios])),this.vegaExposure=c((t="vegaExposure",e=[p.ObjectCategories.portfolios],(i=h(t,e)).type=f.MetricType.MARKET,i)),this.VAR=c((a="VAR",r=[p.ObjectCategories.portfolios],(o=h(a,r)).type=f.MetricType.VAR,o.format="p",o.step=.01,o)),this.financingLiquidity=c(w("financingLiquidity",[p.ObjectCategories.investmentVehicles],b.AIFMDLiquidationPeriod)),this.investorLiquidity=c(w("investorLiquidity",[p.ObjectCategories.investmentVehicles],b.AIFMDLiquidationPeriod)),this.portfolioLiquidity=c(w("portfolioLiquidity",[p.ObjectCategories.investmentVehicles],b.AIFMDLiquidationPeriod)),this.investorGroup=c(w("investorGroup",[p.ObjectCategories.investmentVehicles],v.AIFMDInvestorGroup)),this.investorConcentration=c((d="investorConcentration",l=[p.ObjectCategories.investmentVehicles],s=y.AIFMDInvestorConcentration,(u=w(d,l,s)).format="p",u.decimals=4,u.step=.01,u))}return t.prototype.get=function(t){return n.isString(t)?this._byKey[t]:t},t.prototype.getName=function(t){var e=this.get(t);return e?e.name:""},t.prototype.list=function(){return n.values(this._byKey)},t.prototype.listByObjectCategory=function(t){var e=p.ObjectCategories.get(t);return e?n.filter(this.list(),function(t){return t.isValid(e)}):[]},t.prototype.listByObjectType=function(t){var e=i.ObjectTypes.get(t);return e?this.listByObjectCategory(e.category):[]},t}();e.MetricsImpl=a,e.Metrics=new a}),define("core/api/VarMethod",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VarMethod=void 0;var r,o;(r=e.VarMethod||(e.VarMethod={}))[r.HISTORICAL=1]="HISTORICAL",r[r.MONTE_CARLO=2]="MONTE_CARLO",r[r.PARAMETRIC=3]="PARAMETRIC",(o=e.VarMethod||(e.VarMethod={})).getName=a.EnumUtils.createNameFn("metric:VarMethod",o),o.widget=i.EnumWidgetUtils.createDropList("DomosVarMethod",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),function(){var Tt,It;It="metric",Tt="formTable",define("views/data/metric/metrics",["jquery","lodash","i18n","kendo","site","metric/data/Metrics","core/api/MetricType","core/api/VarMethod","core/util/EnumUtils","core/ui/PercentUI"],function(p,l,e,a,t,n,i,r,o,d){var m,s,u,c,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q,z,X,Z,tt,et,nt,it,at,rt,ot,dt,lt,st,ut,ct,pt,mt,ft,bt,vt,yt,ht,gt;return b=d.PercentUI,f=n.Metrics,c=i.MetricType,r.VarMethod,m=o.EnumUtils,u=t.router,s=t.map,y=function(t,e){return e},g=function(t){var e,n,i,a;for(i={description:""},e=0,n=(a=m.list(t)).length;e<n;e++)i[t[a[e]]]=null;return i},$=function(t){switch(t.type){case c.NUMBER:return{value:null,description:""};case c.BUCKET:return{less5:null,fifteen:null,more15:null,description:""};case c.MARKET:return{lower:null,current:null,higher:null,description:""};case c.VAR:return{value:null,description:"",method:null};case c.SIMPLE:return{description:""};case c.ENUM:return g(t.enumObject);default:return null}},bt=function(t){var e,n,i,a,r,o;for(a=t[It],o={},n=0,i=(r=f.listByObjectType(t.type)).length;n<i;n++)e=r[n],l.has(a,e.key)?o[e.key]=y(0,a[e.key]):o[e.key]=$(e);return o},ht=function(t,e){return u.navigate(s.getObjectMetric(e,t.key))},ft=function(t){return"metric_"+t},z=function(t){return ft(t.key)},J=function(t){return ft(t.key+"_less5")},Y=function(t){return ft(t.key+"_15")},K=function(t){return ft(t.key+"_more15")},mt=function(t){return ft(t.key+"_lower")},ct=function(t){return ft(t.key+"_current")},pt=function(t){return ft(t.key+"_higher")},yt=function(t){return ft(t.key)},vt=function(t){return ft(t.key+"_method")},Q=function(t){return ft(t.key+"_description")},Z=function(t,e,n){return ft(n.key+"_"+t[e])},at=function(t){return t.name},et=function(t){return e.t("metric:"+t.key+"Less5")},tt=function(t){return e.t("metric:"+t.key+"Fifteen")},nt=function(t){return e.t("metric:"+t.key+"More15")},lt=function(t){return e.t("metric:"+t.key+"Lower")},ot=function(t){return e.t("metric:"+t.key+"Current")},dt=function(t){return e.t("metric:"+t.key+"Higher")},st=function(t){return t.name},ut=function(t){return e.t("metric:"+t.key+"Method")},it=function(t){return e.t("metric:description")},rt=function(t,e,n){return t.getName(e)||""},A=function(t,e,n){var i;return null==e&&(e="value"),null==n&&(n=null),i=n?"."+n:"",e+": "+It+"."+t.key+i},j=function(t,e){return A(t,e,"value")},L=function(t,e){return A(t,e,"less5")},F=function(t,e){return A(t,e,"fifteen")},P=function(t,e){return A(t,e,"more15")},V=function(t,e){return A(t,e,"lower")},q=function(t,e){return A(t,e,"current")},B=function(t,e){return A(t,e,"higher")},W=function(t,e){return A(t,e,"value")},H=function(t,e){return A(t,e,"method")},M=function(t,e){return A(t,e,"description")},G=function(t,e,n,i){return A(n,i,t[e])},E=function(t,e,n,i,a,r){var o,d;return 0===i?("p"===n.format?(o=p("<input>").attr("id",a(n)).attr("data-bind",r(n,"value")).appendTo(t),b.widget(o)):(o=p("<input>").attr("id",a(n)).attr("data-bind",r(n,"value")).appendTo(t),d={format:n.format},o.kendoNumericTextBox(d)),o):p("<input>").addClass("k-textbox").attr("id",a(n)).attr("data-bind",r(n,"display")).attr("data-format",n.format).attr("readonly","readonly").appendTo(t)},N=function(t,e,n,i,a,r){var o;return o=p("<textarea>").addClass("k-textbox").attr("id",a(n)).attr("data-bind",r(n,"value")).appendTo(t),0!==i&&o.attr("readonly","readonly"),o},w=function(t,e,n,i,a,r){var o,d;return d={enable:0===i},(o=p("<input>").attr("id",a(n)).attr("data-bind",r(n,"value")).appendTo(t)).kendoDomosVarMethod(d),o},R=function(t,e,n,i,a,r){var o;return(o=0===i?p("<label>").attr("for",a(n)).text(r(n)).appendTo(t):p("<a>").addClass("k-link").attr("href","#").text(r(n)).click(ht.bind(null,n,i)).appendTo(t))&&n.aifmRequired&&o.addClass("aifmRequired"),null},I=function(t,e,n,i,a,r){var o;return o=p("<label>").attr("for",a(n)).text(r(n)).appendTo(t),n.aifmRequired&&o.addClass("aifmRequired"),o},S=function(t,e,n,i,a){var r,o,d;return null==a&&(a="n"),p("<h3>").text(n.name).appendTo(t),r=p("<table>").addClass(Tt).appendTo(t),d=p("<tr>").appendTo(r),o=p("<td>").appendTo(d),I(o,0,n,0,Q,it),o=p("<td>").attr("colspan","3").appendTo(d),N(o,0,n,i,Q,M),null},D=function(t,e,n,i){var a,r,o;return p("<h3>").text(n.name).appendTo(t),a=p("<table>").addClass(Tt).appendTo(t),o=p("<tr>").appendTo(a),r=p("<td>").appendTo(o),R(r,0,n,i,z,at),r=p("<td>").appendTo(o),E(r,0,n,i,z,j),p("<td>").appendTo(o),p("<td>").appendTo(o),o=p("<tr>").appendTo(a),r=p("<td>").appendTo(o),I(r,0,n,0,Q,it),r=p("<td>").attr("colspan","3").appendTo(o),N(r,0,n,i,Q,M),null},h=function(t,e,n,i){var a,r,o;return p("<h3>").text(n.name).appendTo(t),a=p("<table>").addClass(Tt).appendTo(t),o=p("<tr>").appendTo(a),r=p("<td>").appendTo(o),R(r,0,n,i,J,et),r=p("<td>").appendTo(o),E(r,0,n,i,J,L),p("<td>").appendTo(o),p("<td>").appendTo(o),o=p("<tr>").appendTo(a),r=p("<td>").appendTo(o),R(r,0,n,i,Y,tt),r=p("<td>").appendTo(o),E(r,0,n,i,Y,F),p("<td>").appendTo(o),p("<td>").appendTo(o),o=p("<tr>").appendTo(a),r=p("<td>").appendTo(o),R(r,0,n,i,K,nt),r=p("<td>").appendTo(o),E(r,0,n,i,K,P),p("<td>").appendTo(o),p("<td>").appendTo(o),o=p("<tr>").appendTo(a),r=p("<td>").appendTo(o),I(r,0,n,0,Q,it),r=p("<td>").attr("colspan","3").appendTo(o),N(r,0,n,i,Q,M),null},C=function(t,e,n,i){var a,r,o;return p("<h3>").text(n.name).appendTo(t),a=p("<table>").addClass(Tt).appendTo(t),o=p("<tr>").appendTo(a),r=p("<td>").appendTo(o),R(r,0,n,i,mt,lt),r=p("<td>").appendTo(o),E(r,0,n,i,mt,V),p("<td>").appendTo(o),p("<td>").appendTo(o),o=p("<tr>").appendTo(a),r=p("<td>").appendTo(o),R(r,0,n,i,ct,ot),r=p("<td>").appendTo(o),E(r,0,n,i,ct,q),p("<td>").appendTo(o),p("<td>").appendTo(o),o=p("<tr>").appendTo(a),r=p("<td>").appendTo(o),R(r,0,n,i,pt,dt),r=p("<td>").appendTo(o),E(r,0,n,i,pt,B),p("<td>").appendTo(o),p("<td>").appendTo(o),o=p("<tr>").appendTo(a),r=p("<td>").appendTo(o),I(r,0,n,0,Q,it),r=p("<td>").attr("colspan","3").appendTo(o),N(r,0,n,i,Q,M),null},x=function(t,e,n,i){var a,r,o;return p("<h3>").text(n.name).appendTo(t),a=p("<table>").addClass(Tt).appendTo(t),o=p("<tr>").appendTo(a),r=p("<td>").appendTo(o),R(r,0,n,i,yt,st),r=p("<td>").appendTo(o),E(r,0,n,i,yt,W),p("<td>").appendTo(o),p("<td>").appendTo(o),o=p("<tr>").appendTo(a),r=p("<td>").appendTo(o),R(r,0,n,i,vt,ut),r=p("<td>").appendTo(o),w(r,0,n,i,vt,H),p("<td>").appendTo(o),p("<td>").appendTo(o),o=p("<tr>").appendTo(a),r=p("<td>").appendTo(o),I(r,0,n,0,Q,it),r=p("<td>").attr("colspan","3").appendTo(o),N(r,0,n,i,Q,M),null},T=function(t,e,n,i){var a,r,o,d,l,s,u,c;for(p("<h3>").text(n.name).appendTo(t),s=p("<table>").addClass(Tt).appendTo(t),a=n.enumObject,o=0,d=(l=m.list(a)).length;o<d;o++)r=l[o],c=p("<tr>").appendTo(s),u=p("<td>").appendTo(c),R(u,0,n,i,Z.bind(null,a,r),rt.bind(null,a,r)),u=p("<td>").appendTo(c),E(u,0,n,i,Z.bind(null,a,r),G.bind(null,a,r)),p("<td>").appendTo(c),p("<td>").appendTo(c);return c=p("<tr>").appendTo(s),u=p("<td>").appendTo(c),I(u,0,n,0,Q,it),u=p("<td>").attr("colspan","3").appendTo(c),N(u,0,n,i,Q,M),null},k=function(t,e,n,i){switch(n.type){case c.NUMBER:return D(t,0,n,i);case c.BUCKET:return h(t,0,n,i);case c.MARKET:return C(t,0,n,i);case c.VAR:return x(t,0,n,i);case c.SIMPLE:return S(t,0,n,i);case c.ENUM:return T(t,0,n,i);default:return null}},O=function(t,e,n){var i,a,r,o,d;for(i=X(t),a=0,r=(d=l.sortBy(e,"name")).length;a<r;a++)o=d[a],k(i,0,o,n);return null},_=function(t,e,n){var i;return i=e.get("id"),O(t,n,i),a.bind(X(t),e),null},U=function(t){return p("<h3>").text(e.t("metric:noMetrics")).appendTo(X(t))},X=function(t){return p("#"+t.elementId)},v=function(t){var e;return e=X(t),a.destroy(e),e.empty()},gt=function(t,e){var n;return v(t),!(n=f.listByObjectType(e.get("type")))||n.length<=0?U(t):_(t,e,n),null},{create:function(t){return{display:gt.bind(null,{elementId:t})}},updateRawModel:function(t){return t[It]={}},updateModel:function(t,e){return t.set(It,bt(e)),null}}})}.call(this),function(){var c=[].slice;define("views/data/model/object.model",["i18n","ui","object/ui/ObjectTypeUI","views/data/tag/tags","views/data/history/histories","views/data/metric/metrics","core/ui/DateTimeUI"],function(e,t,n,i,a,r,o){var d,l,s,u;return d=o.DateTimeUI,l=n.ObjectTypeUI,t.grid,"number","date","id",u="type",s="created","recipients",{addColumns:function(t){return t.push(l.column({field:u,title:e.t("data:fields.type"),width:150,priority:1e3})),t.push(d.column({field:s,title:e.t("data:fields.creationDate"),width:150,priority:1001})),t},createDataSourceSkeleton:function(){return{schema:{model:{id:"id",fields:{type:{type:"number"},created:{type:"date"}}}}}},updateRawModel:function(t){return t.id=0,t.type=0,t[s]=new Date,i.updateRawModel(t),a.updateRawModel(t),r.updateRawModel(t),t.recipients=[]},updateModel:function(t,e){var n;return t.set("id",e.id),t.set(u,e.type),t.set(s,new Date(e[s])),i.updateModel(t,e),a.updateModel(t,e),r.updateModel(t,e),(n=t.get("recipients")).splice.apply(n,[0,n.length].concat(c.call(e.recipients)))}}})}.call(this),function(){var d=[].slice;define("views/data/model/asset.model",["i18n","ui","basic/ui/CurrencyUI","basic/ui/MarketUI","views/data/model/object.model"],function(e,t,n,i,o){var a,r;return a=n.CurrencyUI,r=i.MarketUI,{createDataSourceSkeleton:function(){var t,e;return(e=(t=o.createDataSourceSkeleton()).schema.model.fields).name={type:"string"},e.shortName={type:"string"},e.currency={type:"number"},e.market={type:"number"},e.CUSIP={type:"string"},e.ECB={type:"string"},e.ISIN={type:"string"},e.RIC={type:"string"},e.SEDOL={type:"string"},e.TICKER={type:"string"},e.needsDocumentValidation={type:"boolean"},t.sort={field:"name",dir:"asc"},t},addColumns:function(t){return o.addColumns(t),t.push({field:"name",title:e.t("data:fields.name"),width:"300px",priority:0}),t.push({field:"shortName",title:e.t("data:fields.shortName"),width:"150px",priority:1}),t.push(a.column({field:"currency",title:e.t("data:fields.currency"),width:"150px",priority:2})),t.push(r.column({field:"market",title:e.t("data:fields.market"),priority:100})),t.push({field:"CUSIP",title:e.t("data:fields.CUSIP"),width:"150px",priority:61}),t.push({field:"ECB",title:e.t("data:fields.ECB"),width:"150px",priority:62}),t.push({field:"ISIN",title:e.t("data:fields.ISIN"),width:"150px",priority:63}),t.push({field:"RIC",title:e.t("data:fields.RIC"),width:"150px",priority:67}),t.push({field:"SEDOL",title:e.t("data:fields.SEDOL"),width:"150px",priority:68}),t.push({field:"TICKER",title:e.t("data:fields.TICKER"),width:"150px",priority:69}),t},updateRawModel:function(t){var e;return o.updateRawModel(t),t.name="",t.shortName="",t.currency=0,t.market=0,t.quotationType=1,t.CUSIP="",t.ECB="",t.ISIN="",t.NCA=[],t.customReferences=[],t.RIC="",t.SEDOL="",t.TICKER="",t.needsDocumentValidation=!1,e={geographicalFocus:0,liquidationPeriod:0,subAssetType:0},t.AIFMD=e,t},updateModel:function(t,e){var n,i,a,r;return o.updateModel(t,e),t.set("name",e.name),t.set("shortName",e.shortName),t.set("currency",e.currency),t.set("market",e.market),t.set("quotationType",e.quotationType),t.set("CUSIP",e.CUSIP),t.set("ECB",e.ECB),t.set("ISIN",e.ISIN),(r=t.get("NCA")).splice.apply(r,[0,r.length].concat(d.call(e.NCA))),(a=t.get("customReferences")).splice.apply(a,[0,a.length].concat(d.call(e.customReferences))),t.set("RIC",e.RIC),t.set("SEDOL",e.SEDOL),t.set("TICKER",e.TICKER),t.set("needsDocumentValidation",e.needsDocumentValidation),i=t.get("AIFMD"),n=e.AIFMD,i.set("geographicalFocus",n.geographicalFocus),i.set("liquidationPeriod",n.liquidationPeriod),i.set("subAssetType",n.subAssetType),null}}})}.call(this),define("core/api/DebtPaymentType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DebtPaymentType=void 0;var r,o;(r=e.DebtPaymentType||(e.DebtPaymentType={}))[r.ALL_LIFE_INSTALLMENT=1]="ALL_LIFE_INSTALLMENT",r[r.COUNT_INSTALLMENT=2]="COUNT_INSTALLMENT",(o=e.DebtPaymentType||(e.DebtPaymentType={})).getName=a.EnumUtils.createNameFn("object:debtPaymentTypes",o),o.widget=i.EnumWidgetUtils.createDropList("DomosDebtPaymentType",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),function(){var O=[].slice;define("views/data/model/debt.model",["jquery","i18n","ui","core/web/WebLocation","views/data/model/asset.model","core/api/DebtPaymentType","object/data/ObjectTypes","core/util/ObservableUtils","object/web/ObjectMap"],function(e,n,t,i,o,a,r,d,l){var s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_;return t.grid,s=a.DebtPaymentType,R=i.WebLocation,c=r.ObjectTypes,p=d.ObservableUtils,u=l.ObjectMap,"number","date","change","currency",b="direction","value",S="repaymentFrequency",h="interestFrequency",m="amortization",x="startDate",T="maturityDate",g="interestRate","cap","floor","rate",N="seniority",y="initialRedemption",k="premiumRedemption",f="dayCountBasis",I="paymentType",E="redemptionList",v="fixedToFloat",w="pikRate",C="pikBasis","stressSenarioId",D="redenominations",_=function(t){return"currency"===t.field&&this.set(g,null),null},{createDataSourceSkeleton:function(){return o.createDataSourceSkeleton()},addColumns:function(t){return o.addColumns(t),t},updateRawModel:function(t){return o.updateRawModel(t),t[b]=0,t.value=0,t.issuer=null,t.lender=null,t[S]=null,t[h]=null,t[m]=null,t[x]=null,t[T]=null,t[g]=null,t.cap=null,t.floor=null,t.rate=0,t[N]=0,t.asset=null,t[y]=0,t[k]=0,t[f]=null,t[I]=null,t[E]=[],t[D]=[],t.poolFactor=null,t.couponType=null,t.couponFrequency=null,t.couponLastPaymentDate=null,t.couponRate=null,t.firstCouponDate=null,t.beforeLastCouponDate=null,t.generationForward=!1,t.fixedToFloat=null,t.fixedToFloatIsNull=function(){return null===this.get(v)},t.fixedToFloatRate=null,t.pikRate=0,t.pikRateNotNull=function(){var t;return 0!==(t=this.get(w))&&null!==t},t.pikBasis=null,t.pikBasisNotNull=function(){var t,e;return 0!==(t=this.get(w))&&null!==t&&0!==(e=this.get(C))&&null!==e},t.nbTranches=null,t.isAllInstallment=function(){return this.get(I)===s.ALL_LIFE_INSTALLMENT},t.endOfMonth=!1,t.pikFrequency=null,t.firstCapitalisationDate=null,t.lastCapitalisationDate=null,t.trancheImputation=2,t.stressId=null,t.xmlUrl=function(){return R.resolve("debt/input.xml?"+e.param({id:this.get("id"),stressId:this.get("stressId")}))},t.issuerSelected=function(){var t;return null!=(t=!!this.get("issuer"))?t:{true:!1}},t.lenderSelected=function(){var t;return null!=(t=!!this.get("lender"))?t:{true:!1}},t.showIssuer=function(){var t;return R.resolveKendo("/object/edit/"+(null!=(t=this.get("issuer"))?t.id:void 0))},t.showLender=function(){var t;return R.resolveKendo("/object/edit/"+(null!=(t=this.get("lender"))?t.id:void 0))},t.share=null,t.conversionRatio=0,t.issueCount=0,t.hasInterestRate=function(){return!!this.get(g)},t.assetUrl=function(){return u.objectEdit(p.get(this,"asset.id"))},t.issuerUrl=function(){return u.objectEdit(p.get(this,"issuer.id"))},t.shareUrl=function(){return u.objectEdit(p.get(this,"share.id"))},t.lenderUrl=function(){return u.objectEdit(p.get(this,"lender.id"))},t.lenderText=function(){return c.get(this.get("type"))===c.creditLine?n.t("data:fields.borrower"):n.t("data:fields.lender")},t.issueCountText=function(){return c.get(this.get("type"))===c.creditFacilities?n.t("data:fields.maximumIssuable"):n.t("data:fields.issueCount")},t.nominalText=function(){return c.get(this.get("type"))===c.creditLine?n.t("data:fields.maximalAmount"):n.t("data:fields.nominal")},t},updateModel:function(t,e){var n,i,a,r;return t.unbind("change",_),o.updateModel(t,e),t.set(b,e[b]),t.set("value",e.value),t.set("issuer",e.issuer),t.set("lender",e.lender),t.set(S,e[S]),t.set(h,e[h]),t.set(m,e[m]),i=e[x],t.set(x,i?new Date(i):null),i=e[T],t.set(T,i?new Date(i):null),t.set(g,e[g]),t.set("cap",e.cap),t.set("floor",e.floor),t.set("rate",e.rate),t.set(N,e[N]),t.set("asset",e.asset),t.set(y,e[y]),t.set(k,e[k]),t.set(f,e[f]),t.set(I,e[I]),t.set("poolFactor",e.poolFactor),t.set("couponType",e.couponType),t.set("couponFrequency",e.couponFrequency),t.set("couponRate",e.couponRate),t.set("firstCouponDate",e.firstCouponDate),t.set("beforeLastCouponDate",e.beforeLastCouponDate),t.set("generationForward",e.generationForward),t.set(v,e[v]),t.set("fixedToFloatRate",e.fixedToFloatRate),t.set(w,e[w]),t.set(C,e[C]),t.set("nbTranches",e.nbTranches),t.set("endOfMonth",e.endOfMonth),t.set("pikFrequency",e.pikFrequency),t.set("firstCapitalisationDate",e.firstCapitalisationDate),t.set("lastCapitalisationDate",e.lastCapitalisationDate),t.set("trancheImputation",e.trancheImputation),t.set("stressId",e.stressId),t.set("share",e.share),t.set("conversionRatio",e.conversionRatio),n=e.couponLastPaymentDate,t.set("couponLastPaymentDate",n?new Date(n):null),t.set("issueCount",e.issueCount),(a=t.get(E)).splice.apply(a,[0,a.length].concat(O.call(e[E]))),(r=t.get(D)).splice.apply(r,[0,r.length].concat(O.call(e[D]))),null}}})}.call(this),define("core/ui/UploadUtils",["require","exports","../event/SiteEvents","i18n","../data/AjaxError"],function(t,e,i,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UploadUtils=void 0;var n=function(){function t(){}return t.withDefaults=function(t){var e=t.success;t.success=function(t){i.SiteEvents.success(a.I18N.t("errors:uploaded")),e&&e.call(this,t)};var n=t.error;return t.error=function(t){t&&t.XMLHttpRequest&&i.SiteEvents.ajaxError(r.AjaxError.fromXhr(t.XMLHttpRequest)),n&&n.call(this,t)},t},t}();e.UploadUtils=n}),define("document/repository/DocumentTagRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DocumentTagRepository=void 0;var i=function(){function t(){}return t.fetchIdentifiables=function(){return n.WebHttp.getJson("document/tag/id/list.json")},t}();e.DocumentTagRepository=i}),define("document/ui/DocumentTagUI",["require","exports","tslib","lodash","kendo","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","document/repository/DocumentTagRepository","core/ui/widget/Plugin","core/util/StringUtils","core/ui/binder/MultiValueBinder"],function(t,e,i,n,a,r,o,d,l,s,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DocumentTagUI=void 0;var c,p,m="DomosDocumentTagMultiSelect";function f(t,e){return t["kendo"+m](e)}function b(t,e){return t&&n.has(t,e)&&t[e]?n.chain(t[e]).map("name").sort().join(", ").value():""}c={autoWidth:!0,dataSource:{transport:{read:function(t){d.DocumentTagRepository.fetchIdentifiables().then(t.success).catch(t.error)}},schema:{model:{id:"id",fields:{id:{type:"number"},name:{type:"string"}}}},sort:{field:"name",dir:"asc"}},dataTextField:"name",dataValueField:"id",name:m},p=function(n){function t(t,e){return n.call(this,t,e)||this}return i.__extends(t,n),t}(a.ui.MultiSelect),l.Plugin.plugin(p,a.ui.MultiSelect,c);var v=function(){function t(){}return t.widgetMulti=function(t,e){return f(t,e)},t.widget=r.IdWidgetUtils.createDropList("DomosDocumentTag",d.DocumentTagRepository,!0),t.column=o.IdentifiableColumnUtils.createFactory(t.widget),t.columnMulti=function(t){return(a=(e=t).field)&&(e.template=function(t){return b(t,a)},e.sortable={compare:function(t,e){var n=b(t,a),i=b(e,a);return s.StringUtils.compare(n,i)}},e.filterable=!1,e.groupable=!1,e.editor=function(t,e){e.field&&f($("<select>").attr("data-bind",u.kMultiValueBinding+": "+e.field).appendTo(t))}),e;var e,a},t}();e.DocumentTagUI=v}),define("text!templates/documents/objects/object.documents.html",[],function(){return'<div>\n\t<div id="objectDocumentUpload" class="object-document-upload"></div>\n\t<div id="objectDocumentList" class="object-document-list"></div>\n\t<div>\n\t\t<div id="objectDocumentVersion" class="object-document-version floatingGrid"></div>\n\t\t<div class="clearer"></div>\n\t</div>\n</div>'}),define("document/data/FolderType",["require","exports","lodash","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FolderType=void 0;var o,d;(d=o=e.FolderType||(e.FolderType={}))[d.NOT_IDENTIFIED=1]="NOT_IDENTIFIED",d[d.ROOT=2]="ROOT",d[d.FUND=3]="FUND",d[d.COMMITMENT=4]="COMMITMENT",d[d.DASHBOARD=5]="DASHBOARD",d[d.CAPITAL_CALL=6]="CAPITAL_CALL",d[d.DISTRIBUTION=7]="DISTRIBUTION",d[d.DEAL_INTENTION=8]="DEAL_INTENTION",d[d.PRIVATE=9]="PRIVATE",d[d.PUBLIC=10]="PUBLIC",d[d.COMPANY=11]="COMPANY",d[d.FUNDRAISING=12]="FUNDRAISING";var l,s,u=i.EnumUtils.createNameFn("documents:FolderType",o),c=function(t){return!t||(t===o.ROOT||t===o.DEAL_INTENTION)};(l=o=e.FolderType||(e.FolderType={})).getName=u,l.widget=a.EnumWidgetUtils.createDropList("DomosFolderType",l,!0),l.column=r.EnumColumnUtils.createFactory(l,l.widget),l.businessWidget=(s={getName:u},s=n.reduce(i.EnumUtils.list(l),function(t,e){return c(e)||(t[e]=l[e],t[l[e]]=e),t},s),a.EnumWidgetUtils.createDropList("DomosBusinessFolderType",s,!0)),l.isTechnical=c,l.getAssociatedData=function(t){if(!t)return"none";switch(t){case l.NOT_IDENTIFIED:return"name";case l.FUND:return"fund";case l.DASHBOARD:return"dashboard";case l.DEAL_INTENTION:return"dealIntention";case l.COMPANY:return"company";default:return"none"}}}),define("document/data/FolderContent",["require","exports","./FolderType"],function(t,e,r){"use strict";function o(t){return!!t.folder}Object.defineProperty(e,"__esModule",{value:!0}),e.FolderContentUtils=void 0;var n=function(){function a(){}return a.toFolderData=function(t){return o(t)?t.folder:t},a.getName=function(t){return t?(o(t)&&(t=t.folder),t.id&&t.id.name?t.id.name:t.type===r.FolderType.NOT_IDENTIFIED?t.name:r.FolderType.getName(t.type)||"?"):""},a.canEdit=function(t){return!!t&&(o(t)&&(t=t.folder),!r.FolderType.isTechnical(t.type))},a.toFolderEdit=function(t){if(!t)return null;if(o(t)&&(t=t.folder),!a.canEdit(t))return null;var e={type:t.type,name:t.name,fund:null,company:null,dashboard:null,dealIntention:null},n=r.FolderType.getAssociatedData(t.type),i=t.id||null;switch(n){case"fund":e.fund=i;break;case"company":e.company=i;break;case"dashboard":e.dashboard=i;break;case"dealIntention":e.dealIntention=i}return e},a.editToFolderData=function(t){var e=r.FolderType.getAssociatedData(t.type),n={type:t.type,name:t.name};switch(e){case"fund":n.id=t.fund;break;case"company":n.id=t.company;break;case"dashboard":n.id=t.dashboard;break;case"dealIntention":n.id=t.dealIntention}return n},a.isEditValid=function(t){var e,n,i,a;if(!t)return!1;switch(r.FolderType.getAssociatedData(t.type)){case"name":return!!t.name;case"fund":return!!(null===(e=t.fund)||void 0===e?void 0:e.id);case"company":return!!(null===(n=t.company)||void 0===n?void 0:n.id);case"dashboard":return!!(null===(i=t.dashboard)||void 0===i?void 0:i.id);case"dealIntention":return!!(null===(a=t.dealIntention)||void 0===a?void 0:a.id)}return!0},a}();e.FolderContentUtils=n}),define("document/repository/DocumentRepository",["require","exports","core/web/WebHttp"],function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DocumentRepository=void 0;var n=function(){function t(){}return t.objectDocument=function(t){var e={object:t};return r.WebHttp.getJson("object/document/list.json",e)},t.removeDocument=function(t){var e={id:t};return r.WebHttp.destroyJson("document.json",e)},t.updateDocument=function(t,e,n,i){var a={id:t,name:e,description:n,tags:i};return r.WebHttp.postJson("document.json",{data:JSON.stringify(a)})},t.moveDocument=function(t,e,n){var i={object:t,document:e,target:JSON.stringify(n)};return r.WebHttp.postJson("object/document/move.json",i)},t.createFolder=function(t,e){var n={object:t,path:JSON.stringify(e)};return r.WebHttp.postJson("object/document/folder.json",n)},t.updateFolder=function(t,e,n){var i={object:t,path:JSON.stringify(e),update:JSON.stringify(n)};return r.WebHttp.postJson("object/document/folder.json",i)},t.removeFolder=function(t,e){var n={object:t,path:JSON.stringify(e)};return r.WebHttp.destroyJson("object/document/folder.json",n)},t.moveFolder=function(t,e,n){var i={object:t,folder:JSON.stringify(e),target:JSON.stringify(n)};return r.WebHttp.postJson("object/document/folder/move.json",i)},t}();e.DocumentRepository=n}),define("document/web/DocumentMap",["require","exports","core/web/UrlBuilder","document/data/FolderContent","document/data/FolderType","dashboard/web/DashboardMap","object/web/ObjectMap"],function(t,e,i,n,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DocumentMap=void 0;var d=function(){function t(){}return t.downloadUrl=function(t){return i.UrlBuilder.from("document/download").add("id",t).build()},t.thumbnailUrl=function(t){return i.UrlBuilder.from("document/thumbnail").add("id",t).build()},t.getUploadUrl=function(t,e){return i.UrlBuilder.from("object/document/upload.json").add("object",t).add("subFolderPath",e).build()},t.getFeeUploadUrl=function(t){return i.UrlBuilder.from("fee/document/upload.json").add("fee",t).build()},t.getObjectUploadUrl=function(t,e){var n=e?JSON.stringify(e):null;return i.UrlBuilder.from("object/document/upload.json").add("object",t).add("path",n).build()},t.getUpdateFileUrl=function(t){return i.UrlBuilder.from("document/update").add("id",t).build()},t.getObjectFolderUrl=function(t){if(!(t=n.FolderContentUtils.toFolderData(t)).id||!t.id.id)return null;var e=t.id.id;switch(t.type){case a.FolderType.FUND:case a.FolderType.COMPANY:case a.FolderType.DEAL_INTENTION:return o.ObjectMap.objectEdit(e);case a.FolderType.DASHBOARD:return r.DashboardMap.dashboardEdit(e)}return null},t}();e.DocumentMap=d}),define("document/view/ObjectDocumentViewerModel",["require","exports","tslib","lodash","document/data/FolderContent","core/event/DEvent","document/repository/DocumentRepository","document/web/DocumentMap","core/util/PromiseUtils"],function(t,e,o,i,d,n,l,a,r){"use strict";function u(t,e){return{id:kendo.guid(),parentId:e,name:t.name,folder:null,fileId:t.id,creationDate:t.creationDate,modificationDate:t.modificationDate,version:t.version,description:t.description,tags:t.tags}}function c(t,e){return{id:kendo.guid(),parentId:e,name:d.FolderContentUtils.getName(t),folder:t,fileId:"",creationDate:null,modificationDate:null,version:"",description:"",tags:[]}}function p(t,e,n){var i=c(e.folder,n),a=i.id;t.push(i);for(var r=0,o=e.subFolders;r<o.length;r++){p(t,o[r],a)}for(var d=0,l=e.files;d<l.length;d++){var s=l[d];t.push(u(s,a))}}Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectDocumentViewerModel=void 0;var s=function(){function t(t){this.objectId=t,this.refreshEvent=new n.DEvent(!0),this.selectEvent=new n.DEvent(!1),this.addedEvent=new n.DEvent(!1),this.modifiedEvent=new n.DEvent(!1),this.deletedEvent=new n.DEvent(!1),this._loadingPromise=null,this._data=[],this._dict={},r.PromiseUtils.consume(this.load())}return Object.defineProperty(t.prototype,"loading",{get:function(){return null!==this._loadingPromise},enumerable:!1,configurable:!0}),t.prototype.canEdit=function(t){return!(!t||this.loading)&&(!!t.fileId||!!t.folder&&d.FolderContentUtils.canEdit(t.folder))},t.prototype.canDelete=function(t){if(!t||this.loading)return!1;if(t.fileId)return!0;if(!t.folder)return!1;if(!d.FolderContentUtils.canEdit(t.folder))return!1;for(var e=0,n=this._data;e<n.length;e++){if(n[e].parentId===t.id)return!1}return!0},t.prototype.canAddFolder=function(t){return!this.loading&&(!t||!t.fileId&&!!t.folder)},t.prototype.canMove=function(t,e){if(this.isFile(t)&&this.isDestinationValidForFile(t,e))return!0;if(!d.FolderContentUtils.canEdit(t.folder))return!1;if(e){if(e.fileId)return!1;var n=t.id,i=e.id;if(i===n||i===t.parentId)return!1;for(var a=e.parentId;a;){var r=this._dict[a];if(r){if(r.id===n)return!1;a=r.parentId}else a=null}return!0}return!!t.parentId},t.prototype.url=function(t){return t?t.fileId?a.DocumentMap.downloadUrl(t.fileId):t.folder?a.DocumentMap.getObjectFolderUrl(t.folder):null:null},t.prototype.folderPath=function(t){if(!t)return[];var e=[];if(t.folder&&e.push(t.folder),t.parentId)for(var n=this._dict[t.parentId];n;){var i=n.folder;i&&e.push(i);var a=n.parentId;n=a?this._dict[a]:void 0}return e.reverse()},t.prototype.onFileUploaded=function(){this.refreshEvent.fire()},t.prototype.onSelected=function(t){this.selectEvent.fire(t)},t.prototype.createFolder=function(a,r){return o.__awaiter(this,void 0,void 0,function(){var e,n,i;return o.__generator(this,function(t){switch(t.label){case 0:return e=d.FolderContentUtils.editToFolderData(a),(n=r?this.folderPath(r):[]).push(e),[4,l.DocumentRepository.createFolder(this.objectId,n)];case 1:return t.sent(),i=c(e,r?r.id:null),this._dict[i.id]=i,this._data.push(i),this.addedEvent.fire(i),[2]}})})},t.prototype.updateFolder=function(n,i){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(t){switch(t.label){case 0:if(!this.canEdit(n))throw new Error("Cannot edit");if(!n.folder)throw new Error("Not a folder");return e=d.FolderContentUtils.editToFolderData(i),[4,l.DocumentRepository.updateFolder(this.objectId,this.folderPath(n),e)];case 1:return t.sent(),(n=this._dict[n.id])?(n.folder=e,n.name=d.FolderContentUtils.getName(e),this.modifiedEvent.fire(n),[2]):[2]}})})},t.prototype.modifyFile=function(e,n,i,a){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:if(!this.canEdit(e))throw new Error("Cannot edit");if(!e.fileId)throw new Error("Not a file");return[4,l.DocumentRepository.updateDocument(e.fileId,n,i,a)];case 1:return t.sent(),(e=this._dict[e.id])?(e.name=n,e.description=i,e.tags=a,this.modifiedEvent.fire(e),[2]):[2]}})})},t.prototype.delete=function(n){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(t){switch(t.label){case 0:if(!this.canDelete(n))throw new Error("Cannot delete");return n.fileId?[4,l.DocumentRepository.removeDocument(n.fileId)]:[3,2];case 1:return t.sent(),[3,5];case 2:return n.folder?(e=this.folderPath(n),[4,l.DocumentRepository.removeFolder(this.objectId,e)]):[3,4];case 3:return t.sent(),[3,5];case 4:throw new Error("Nothing to delete");case 5:return delete this._dict[n.id],i.remove(this._data,function(t){return t.id===n.id}),this.deletedEvent.fire(n),[2]}})})},t.prototype.move=function(i,a){return o.__awaiter(this,void 0,void 0,function(){var e,n;return o.__generator(this,function(t){switch(t.label){case 0:if(!this.canMove(i,a))throw new Error("Cannot move");return e=this.folderPath(a),i.folder?(n=this.folderPath(i),[4,l.DocumentRepository.moveFolder(this.objectId,n,e)]):[3,2];case 1:return t.sent(),[3,5];case 2:return i.fileId?[4,l.DocumentRepository.moveDocument(this.objectId,i.fileId,e)]:[3,4];case 3:return t.sent(),[3,5];case 4:throw new Error("Nothing to move");case 5:return(i=this._dict[i.id])&&(i.parentId=a?a.id:null),[2]}})})},t.prototype.cacheOrLoad=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return this._loadingPromise?[2,this._loadingPromise]:[2,this._data]})})},t.prototype.load=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:if(this._loadingPromise)return[2,this._loadingPromise];t.label=1;case 1:return t.trys.push([1,,3,4]),this._loadingPromise=this.performLoad(),[4,this._loadingPromise];case 2:return[2,t.sent()];case 3:return this._loadingPromise=null,[7];case 4:return[2]}})})},t.prototype.performLoad=function(){return o.__awaiter(this,void 0,void 0,function(){var e,n;return o.__generator(this,function(t){switch(t.label){case 0:return[4,l.DocumentRepository.objectDocument(this.objectId)];case 1:return e=t.sent(),n=function(t){for(var e=[],n=0,i=t.subFolders;n<i.length;n++)p(e,i[n],null);for(var a=0,r=t.files;a<r.length;a++){var o=r[a];e.push(u(o,null))}return e}(e),this._dict=i.keyBy(n,function(t){return t.id}),[2,this._data=n]}})})},t.prototype.isFile=function(t){return!!t.fileId},t.prototype.isDestinationValidForFile=function(t,e){if(e){if(e.fileId)return!1;var n=t.id,i=e.id;return i!==n&&i!==t.parentId}return!1},t}();e.ObjectDocumentViewerModel=s}),define("document/view/ObjectDocumentViewerUpload",["require","exports","document/web/DocumentMap","i18n","core/ui/UploadUtils"],function(t,e,l,s,u){"use strict";function i(t,e,n){kendo.destroy(t),t.empty();var i=function(t,e){var n=l.DocumentMap.getObjectUploadUrl(t.objectId),i=s.I18N.t("documents:upload.help.standard");if(e)if(e.fileId)n=l.DocumentMap.getUpdateFileUrl(e.fileId),i=s.I18N.t("documents:upload.help.updateFile",{name:e.name});else if(e.folder){var a=t.folderPath(e);n=l.DocumentMap.getObjectUploadUrl(t.objectId,a),i=s.I18N.t("documents:upload.help.inFolder",{name:e.name})}return{url:n,help:i}}(e,n),a=i.url,r=i.help,o=$('<input type="file">').appendTo(t),d={async:{saveUrl:a,saveField:"file"},complete:function(){return e.onFileUploaded()},multiple:!1,showFileList:!1};u.UploadUtils.withDefaults(d),o.kendoUpload(d),$("<span>").text(r).appendTo(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectDocumentViewerUpload=void 0;var n=function(){function t(){}return t.init=function(e,n){n.selectEvent.register(function(t){return i(e,n,t)}),i(e,n)},t}();e.ObjectDocumentViewerUpload=n}),define("document/repository/DocumentVersionRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DocumentVersionRepository=void 0;var i=function(){function t(){}return t.list=function(t){return n.WebHttp.getJson("document/version/list",{id:t})},t}();e.DocumentVersionRepository=i}),define("document/view/DocumentViewerVersionGrid",["require","exports","core/ui/grid/GridUtils","document/repository/DocumentVersionRepository","i18n","document/web/DocumentMap"],function(t,e,n,i,a,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DocumentViewerVersionGrid=void 0;function d(t){return t?new kendo.data.DataSource({transport:{read:function(e){i.DocumentVersionRepository.list(t).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})}},sort:{field:"version",dir:"desc"}}):new kendo.data.DataSource({data:[]})}var r=function(){function t(){}return t.init=function(r,t){kendo.destroy(r),r.empty(),r.hide(),t.selectEvent.register(function(t){var e,n,i=r.data("kendoGrid"),a=(e=t)?(n=e).folder||n.fileId?e.fileId:e.id:null;a&&i?(i.setDataSource(d(a)),r.show()):r.hide()});var e=n.GridUtils.withDefaults({dataSource:d(),columns:[{field:"id",title:a.I18N.t("data:documents.thumbnail"),groupable:!1,filterable:!1,sortable:!1,template:function(t){return'<img src="'+o.DocumentMap.thumbnailUrl(t.id)+'"></img>'}},{field:"name",title:a.I18N.t("data:documents.link"),template:function(t){var e=o.DocumentMap.downloadUrl(t.id),n=kendo.htmlEncode(t.name);return'<a class="d-link" href="'+e+'" download="'+n+'">'+n+"</a>"}},{field:"version",title:a.I18N.t("data:documents.version")}],editable:!1,pageable:n.GridUtils.defaultPageable(),groupable:!1,scrollable:!1});r.kendoGrid(e)},t}();e.DocumentViewerVersionGrid=r}),define("text!templates/documents/objects/object.document.edit.folder.html",[],function(){return'<div>\n\t<table class="formTable" style="width: 90%">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="type" data-i18n="documents:hierarchies.type"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input\n\t\t\t\t\tid="type"\n\t\t\t\t\tdata-role="domosbusinessfoldertype"\n\t\t\t\t\tdata-bind="value: type"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr data-bind="visible: hasName">\n\t\t\t<td>\n\t\t\t\t<label for="name" data-i18n="documents:hierarchies.name"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="name" name="Name" type="text" class="k-textbox" data-bind="value: name"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr data-bind="visible: hasFund">\n\t\t\t<td>\n\t\t\t\t<label for="fund" data-i18n="documents:hierarchies.fund"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="fund" name="Fund" data-role="domosvehicle" data-bind="value: fund"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr data-bind="visible: hasCompany">\n\t\t\t<td>\n\t\t\t\t<label for="company" data-i18n="documents:hierarchies.company"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="company" name="Company" data-role="domoscompany" data-bind="value: company"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr data-bind="visible: hasDashboard">\n\t\t\t<td>\n\t\t\t\t<label for="dashboard" data-i18n="documents:hierarchies.dashboard"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="dashboard" name="Dashboard" data-role="domosdashboard" data-bind="value: dashboard"/>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\t<div class="formWindowButtons">\n\t\t<button class="k-primary"\n\t\t\tdata-role="button"\n\t\t\tdata-icon="check"\n\t\t\tdata-bind="events:{click: saveClick}, enabled: isValid"\n\t\t\tdata-i18n="documents:actions.ok">OK</button>\n\t\t<button data-role="button"\n\t\t\tdata-icon="cancel"\n\t\t\tdata-bind="click: closeClick"\n\t\t\tdata-i18n="documents:actions.cancel">Cancel</button>\n\t</div>\n</div>'}),define("dashboard/ui/DashboardUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","dashboard/repository/DashboardRepository"],function(t,e,i,a,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardUI=void 0;function r(t,e){var n=i.IdWidgetUtils.createDropList(t,e,!0);return{widget:n,column:a.IdentifiableColumnUtils.createFactory(n)}}var o=function(){function t(){}return t.widget=i.IdWidgetUtils.createDropList("DomosDashboard",n.DashboardRepository,!0),t.column=a.IdentifiableColumnUtils.createFactory(t.widget),t.Asset=r("DomosAssetDashboard",n.DashboardRepository.fetchAssetIdentifiables),t.Active=r("DomosActiveDashboard",n.DashboardRepository.fetchActiveIdentifiables),t}();e.DashboardUI=o}),define("document/view/ObjectDocumentViewerEditFolder",["require","exports","tslib","text!templates/documents/objects/object.document.edit.folder.html","i18n","core/data/DObservableBuilder","document/data/FolderContent","core/util/PromiseUtils","document/data/FolderType","object/ui/VehicleUI","object/ui/CompanyUI","dashboard/ui/DashboardUI"],function(t,e,s,u,c,p,m,f,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectDocumentViewerEditFolder=void 0;var i={type:b.FolderType.NOT_IDENTIFIED,name:"",fund:null,company:null,dashboard:null,dealIntention:null};function a(t,i){var e=this,n=kendo.template(u)({}),a=$("<div>").addClass("formWindow").appendTo($(document.body));a.html(n),c.I18N.localize(a);var r=a.kendoWindow({modal:!0,width:400,minWidth:300,visible:!1}).data("kendoWindow"),o=function(t,e){return b.FolderType.getAssociatedData(t.get("type"))===e},d=s.__assign(s.__assign({},t),{locked:!1}),l=p.DObservableBuilder.of(d).add("hasName",function(t){return o(t,"name")}).add("hasFund",function(t){return o(t,"fund")}).add("hasCompany",function(t){return o(t,"company")}).add("hasDashboard",function(t){return o(t,"dashboard")}).add("hasDealIntention",function(t){return o(t,"dealIntention")}).add("isValid",function(t){return!t.get("locked")&&m.FolderContentUtils.isEditValid({type:(e=t).get("type"),name:e.get("name"),fund:e.get("fund"),company:e.get("company"),dashboard:e.get("dashboard"),dealIntention:e.get("dealIntention")});var e}).add("saveClick",function(t){return f.PromiseUtils.consume((n=t,s.__awaiter(e,void 0,void 0,function(){var e;return s.__generator(this,function(t){switch(t.label){case 0:e=n.toJson(),n.set("locked",!0),t.label=1;case 1:return t.trys.push([1,,3,4]),[4,i(e)];case 2:return t.sent(),[3,4];case 3:return n.set("locked",!1),[7];case 4:return r.close(),[2]}})})));var n}).add("closeClick",function(){r.close()}).build();r.bind("close",function(t){return l.get("locked")?(t.preventDefault(),!1):(kendo.destroy(a),a.remove(),!0)}),l.bind(a),r.title(c.I18N.t("documents:hierarchies.folder")).open().center()}var n=function(){function t(){}return t.create=function(e,n){e.canAddFolder(n)&&a(i,function(t){return e.createFolder(t,n)})},t.edit=function(e,n){if(e.canEdit(n)&&n.folder){var t=m.FolderContentUtils.toFolderEdit(n.folder);t&&a(t,function(t){return e.updateFolder(n,t)})}},t}();e.ObjectDocumentViewerEditFolder=n}),define("text!templates/documents/objects/object.document.edit.file.html",[],function(){return'<div>\n\t<table class="formTable" style="width: 90%;">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="name" data-i18n="documents:hierarchies.name"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="name" name="Name" type="text" class="k-textbox" data-bind="value: name"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="tags" data-i18n="documents:hierarchies.tags"></label>\n\t\t\t</td>\n\t\t\t<td></td>\n\t\t<tr>\n\t\t\t<td colspan="2">\n\t\t\t\t<input id="tags" name="Tags" data-role="domosdocumenttagmultiselect" data-bind="value: tags"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="description" data-i18n="documents:hierarchies.description"></label>\n\t\t\t</td>\n\t\t\t<td></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan="2">\n\t\t\t\t<textarea id="description" name="Description" class="k-textbox" rows="4" data-bind="value: description"></textarea>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\t<div class="formWindowButtons">\n\t\t<button class="k-primary"\n\t\t\tdata-role="button"\n\t\t\tdata-icon="check"\n\t\t\tdata-bind="events:{click: saveClick}, enabled: isValid"\n\t\t\tdata-i18n="documents:actions.ok">OK</button>\n\t\t<button data-role="button"\n\t\t\tdata-icon="cancel"\n\t\t\tdata-bind="click: closeClick"\n\t\t\tdata-i18n="documents:actions.cancel">Cancel</button>\n\t</div>\n</div>'}),define("document/view/ObjectDocumentViewerEditFile",["require","exports","tslib","text!templates/documents/objects/object.document.edit.file.html","i18n","core/data/DObservableBuilder","core/util/PromiseUtils"],function(t,e,s,r,u,c,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectDocumentViewerEditFile=void 0;var n=function(){function t(){}return t.display=function(o,d){var e=this;if(o.canEdit(d)){var t=kendo.template(r)({}),n=$("<div>").addClass("formWindow").appendTo($(document.body));n.html(t),u.I18N.localize(n);var l=n.kendoWindow({modal:!0,width:400,minWidth:300,visible:!1}).data("kendoWindow"),i={name:d.name,description:d.description,tags:d.tags,locked:!1},a=c.DObservableBuilder.of(i).add("isValid",function(t){return!t.get("locked")&&!!t.get("name")}).add("saveClick",function(t){return p.PromiseUtils.consume((r=t,s.__awaiter(e,void 0,void 0,function(){var e,n,i,a;return s.__generator(this,function(t){switch(t.label){case 0:e=r.toJson(),n=e.name,i=e.description,a=e.tags,r.set("locked",!0),t.label=1;case 1:return t.trys.push([1,,3,4]),[4,o.modifyFile(d,n,i,a)];case 2:return t.sent(),[3,4];case 3:return r.set("locked",!1),[7];case 4:return l.close(),[2]}})})));var r}).add("closeClick",function(){l.close()}).build();l.bind("close",function(t){return a.get("locked")?(t.preventDefault(),!1):(kendo.destroy(n),n.remove(),!0)}),a.bind(n),l.title(u.I18N.t("documents:hierarchies.file")).open().center()}},t}();e.ObjectDocumentViewerEditFile=n}),define("document/view/ObjectDocumentViewerList",["require","exports","tslib","i18n","core/ui/DateUI","core/ui/grid/column/ColumnUtils","core/ui/grid/column/ColumnStyle","core/ui/grid/GridUtils","core/ui/grid/GridToolbar","core/util/PromiseUtils","core/ui/Confirmation","./ObjectDocumentViewerEditFolder","./ObjectDocumentViewerEditFile","document/ui/DocumentTagUI","core/util/Logger","document/web/DocumentMap","lodash"],function(t,e,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectDocumentViewerList=void 0;var n=function(){function t(){}return t.init=function(i,o){var t=this;kendo.destroy(i),i.empty();var n=new function(){var t=this;this.useCache=!1,this.load=function(){return v.__awaiter(t,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:if(!this.useCache)return[3,4];t.label=1;case 1:return t.trys.push([1,,3,4]),[4,o.cacheOrLoad()];case 2:return[2,t.sent()];case 3:return this.useCache=!1,[7];case 4:return[2,o.load()]}})})}},e=kendo.guid(),a=kendo.guid(),r=kendo.guid(),d=function(){return i.data("kendoTreeList")},l=function(i){if(void 0===i&&(i=d()),i){n.useCache=!0;var a=[];i.items().each(function(t,e){var n=i.dataItem(e);n.get("expanded")&&a.push(n.get("id"))}),i.dataSource.read().then(function(){i.items().each(function(t,e){var n=i.dataItem(e);R.includes(a,n.get("id"))&&n.set("expanded",!0)})})}},s=function(t){var e=function(t){if(void 0===t&&(t=d()),!t)return null;var e=t.select();return e&&1===e.length&&t.dataItem(e)||null}(t);return e?e.toJSON():null},u=function(t,e){var n=i.find("#"+t);e?(n.removeClass("k-state-disabled"),n.addClass("k-state-default")):(n.removeClass("k-state-default"),n.addClass("k-state-disabled"))},c=function(t){u(e,o.canAddFolder(t)),u(a,o.canEdit(t)),u(r,o.canDelete(t))},p=function(t){var e=s(t.sender);c(e),o.onSelected(e)},m=function(t){try{t.setStatus("k-i-cancel")}catch(t){N.Logger.error("Cannot display cancel status from drag event",t)}},f=(new C.GridToolbar).addClick(y.I18N.t("documents:actions.create"),"k-icon k-i-plus",function(){return E.ObjectDocumentViewerEditFolder.create(o,s())},e).addClick(y.I18N.t("documents:actions.edit"),"k-icon k-i-edit",function(){var t;(t=s())&&o.canEdit(t)&&(t.folder?E.ObjectDocumentViewerEditFolder.edit(o,t):t.fileId&&D.ObjectDocumentViewerEditFile.display(o,t))},a).addClick(y.I18N.t("documents:actions.delete"),"k-icon k-i-close",function(){return w.PromiseUtils.consume(v.__awaiter(t,void 0,void 0,function(){var e;return v.__generator(this,function(t){switch(t.label){case 0:return(e=s())&&o.canDelete(e)?[4,k.Confirmation.confirmDelete(y.I18N.t("documents:actions.deleteConfirmation"))]:[2];case 1:return t.sent()?[4,o.delete(e)]:[2];case 2:return t.sent(),l(),[2]}})}))},r).addExcel(),b={dataSource:new kendo.data.TreeListDataSource({transport:{read:function(e){n.load().then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})}},schema:{model:{id:"id"}},sort:{field:"name",dir:"asc"}}),columns:[{field:"name",title:y.I18N.t("documents:hierarchies.name"),width:300,template:function(t){var e=kendo.htmlEncode(t.name),n=t.fileId?" d-tip":"",i=t.fileId?"k-i-txt":"k-i-folder",a=o.url(t),r='<span class="k-icon '+i+'"></span>'+e+"</a>";return a?'<a class="d-link'+n+'" href="'+a+'">'+r+"</a>":r}},h.DateUI.column({field:"creationDate",title:y.I18N.t("documents:hierarchies.creationDate"),width:150,hidden:!0}),h.DateUI.column({field:"modificationDate",title:y.I18N.t("documents:hierarchies.modificationDate"),width:150}),g.ColumnUtils.addStyle({field:"version",title:y.I18N.t("documents:hierarchies.version"),width:100},T.ColumnStyle.CENTER_ALIGNED),S.DocumentTagUI.columnMulti({field:"tags",title:y.I18N.t("documents:hierarchies.tags"),width:200}),{field:"description",title:y.I18N.t("documents:hierarchies.description"),width:400}],editable:{move:!0},scrollable:!0,change:p,dataBound:p,pageable:I.GridUtils.defaultPageable(),drag:function(t){if(t.source&&t.target){var e=t.source.toJSON(),n=t.sender.dataItem(t.target),i=n?n.toJSON():null;o.canMove(e,i)||m(t)}else m(t)},drop:function(n){if(n.valid)if(n.source){var t=n.source.toJSON(),e=n.destination?n.destination.toJSON():null;o.canMove(t,e)?(n.preventDefault(),o.move(t,e).then(function(){var t=n.dropTarget,e=n.sender;t&&e.dataItem(t).set("expanded",!0),l()}).catch(function(t){N.Logger.error(t),l()})):n.setValid=!1}else n.setValid=!1}};b.toolbar=f.template(),i.kendoTreeList(I.GridUtils.withDefaults(b)),f.bind(i),i.kendoTooltip({filter:"a.d-tip",content:function(t){var e=d(),n=t.target.closest("tr");if(!e||!n)return"";var i=e.dataItem(n),a=i?i.toJSON().fileId:null;return a?'<img src="'+x.DocumentMap.thumbnailUrl(a)+'"></img>':""}}),c(null);o.refreshEvent.register(function(){var t=function(){var t=i.data("kendoTreeList");if(t)return t.dataSource}();t&&t.read()}),o.deletedEvent.register(function(t){l()}),o.addedEvent.register(function(t){l()}),o.modifiedEvent.register(function(t){l()})},t}();e.ObjectDocumentViewerList=n}),define("document/view/ObjectDocumentViewer",["require","exports","text!templates/documents/objects/object.documents.html","i18n","./ObjectDocumentViewerModel","./ObjectDocumentViewerUpload","./DocumentViewerVersionGrid","./ObjectDocumentViewerList"],function(t,e,r,o,d,l,s,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectDocumentViewer=void 0;var n=function(){function t(){}return t.init=function(t,e){if(kendo.destroy(t),t.empty(),e){var n=new d.ObjectDocumentViewerModel(e),i=kendo.template(r)({}),a={init:function(t){var e=t.sender.element;o.I18N.localize(e),l.ObjectDocumentViewerUpload.init(e.find("#objectDocumentUpload"),n),u.ObjectDocumentViewerList.init(e.find("#objectDocumentList"),n),s.DocumentViewerVersionGrid.init(e.find("#objectDocumentVersion"),n)}};new kendo.View(i,a).render(t)}},t}();e.ObjectDocumentViewer=n}),function(){var A,F;A="#objectDocument",F="objectDocumentVersion",define("views/data/edit/common/documents",["jquery","i18n","kendo","ui","core/ui/UploadUtils","document/ui/DocumentTagUI","document/view/ObjectDocumentViewer"],function(d,l,i,t,e,n,a){var r,s,o,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,O,U;return u=e.UploadUtils,r=n.DocumentTagUI,s=t.grid,o=a.ObjectDocumentViewer,m=function(t,e){return R(t,e,b(t))},N=function(t,e,n){return R(t,e,f(t,n))},x=function(t,e,n){var i;return(i=n.find("#searchBox").val())&&N(t,e,i),null},function(t,e){var n,i;return n=d("<div>").appendTo(e),i={items:[{template:"<label>Search:</label>"},{template:"<input id='searchBox' class='k-textbox'/>",overflow:"never"},{type:"button",text:"Search",click:x.bind(null,t,e,n)},{type:"button",text:"Clear",click:m.bind(null,t,e)}]},n.kendoToolBar(i),null},p=function(t){var e;return e=t.find("#"+F),i.destroy(e),e.empty(),null},y=function(t,e,n){var i,a,r,o;if(p(e),n&&(r=n.get("id")))return i=e.find("#"+F),a=d("<div>").addClass("floatingGrid").appendTo(i),d("<div>").addClass("clearer").appendTo(i),o={dataSource:{transport:{read:{url:"document/version/list",dataType:"json",data:{id:r}}},schema:{model:{id:"id",fields:{name:{type:"string"},version:{type:"string",editable:!1},description:{type:"string"}}}},sort:{field:"version",dir:"desc"}},columns:[{field:"id",title:l.t("data:documents.thumbnail"),groupable:!1,filterable:!1,sortable:!1,template:"<img src='document/thumbnail?id=#: id#'></img>"},{field:"name",title:l.t("data:documents.link"),template:h.bind(null,t)},{field:"version",title:l.t("data:documents.version")}],pageable:s.defaultPageable(),scrollable:!1},s.withDefaults(o),a.kendoGrid(o),null},function(t,e){return d("<div>").attr("id",F).appendTo(e),null},w=function(t,e,n){return y(t,e,n)},D=function(t,e){return e.find(".k-upload").find("ul.k-upload-files").remove(),!0},function(t,e){return o.init(e,t.model.get("id")),null},function(t,e){var n,i,a,r;if(n=d("<div>").appendTo(e),i=t.model.get("id"))return r={object:i},a={async:{saveUrl:"object/document/upload.json?"+d.param(r),saveField:"file"},complete:D.bind(null,t,n)},u.withDefaults(a),d("<input>").attr("type","file").appendTo(n).kendoUpload(a),null},S=function(t,e,n){var i,a;if(a=t.model.get("id"))return i={object:a,search:e},d.getJSON("object/document/search.json",i).done(n.success).fail(n.error),null;n.success([])},function(t,e){var n,i;if(i=t.model.get("id"))return n={object:i},d.getJSON("object/document/list.json",n).done(e.success).fail(e.error),null;e.success([])},U=function(t,e){var n;return t.model,n={type:"POST",url:"document.json",dataType:"json",data:{data:i.stringify(e.data)}},d.ajax(n).done(e.success).fail(e.error),null},v=function(t,e){var n,i;return t.model,i={id:e.data.id},n={type:"DELETE",url:"document.json?"+d.param(i),dataType:"json"},d.ajax(n).done(e.success).fail(e.error)},k=function(t,e,n){var i;if(n&&n.data)return i=n.data,parseInt(i.object)===parseInt(t.model.get("id"))&&("create"===n.type?e.pushCreate(i):"update"===n.type?e.pushUpdate(i):"destroy"===n.type&&e.pushDestroy(i)),null},E=function(t,e,n,i){if(i)return _.isArray(i)?_.each(i,k.bind(null,t,e)):k(t,e,i),null},C=function(t,e){return d("body").on("domosws:object:document",E.bind(null,t,e))},h=function(t,e){var n,i;return n=e.id,i=e.name,n&&i?"<a href='document/download?id="+n+"' download='"+i+"'>"+i+"</a>":""},g=function(t,e){return"<input type='file' data-id='"+e.id+"'/>"},O=function(t,e){var n,i;return n={id:e.data("id")},i={async:{saveUrl:"document/update?"+d.param(n),saveField:"file"},multiple:!1,showFileList:!1},e.kendoUpload(i),null},I=function(t,e,n){return e.find("input[type='file']").each(function(){return O(0,d(this))}),!0},T=function(t,e,n){var i,a,r;return r=null,(a=(i=n.sender).select())&&0<a.length&&(r=i.dataItem(a[0])),w(t,e,r)},R=function(t,e,n){var i;return(i=e.find("#objectDocumentGrid").data("kendoGrid"))&&(i.setDataSource(n),i.refresh(),y(t,e,null)),null},f=function(t,e){var n;return n={transport:{read:S.bind(null,t,e),update:U.bind(null,t),destroy:v.bind(null,t),push:C.bind(null,t)},schema:{model:{id:"id",fields:{id:{editable:!1},name:{type:"string"},version:{type:"string",editable:!1},description:{type:"string"}}}},sort:{field:"name",dir:"asc"}},new i.data.DataSource(n)},b=function(t){var e;return e={data:t.folderModel.get("currentFolder"),transport:{update:U.bind(null,t),destroy:v.bind(null,t),push:C.bind(null,t)},schema:{model:{id:"id",fields:{id:{editable:!1},name:{type:"string"},version:{type:"string",editable:!1},description:{type:"string"}}}},sort:{field:"name",dir:"asc"}},new i.data.DataSource(e)},function(t,e){return null},function(t,e){var n,i;return n=d("<div>").attr("id","objectDocumentGrid").addClass("floatingGrid").appendTo(e),d("<div>").addClass("clearer").appendTo(e),i={columns:[{command:["edit","destroy"],title:" "},{field:"id",title:l.t("data:documents.thumbnail"),groupable:!1,filterable:!1,sortable:!1,template:"<img src='document/thumbnail?id=#: id#'></img>"},{field:"name",title:l.t("data:documents.link"),template:h.bind(null,t)},{field:"version",title:l.t("data:documents.version")},{field:"description",title:l.t("data:documents.description")},r.columnMulti({field:"tags",title:l.t("data:documents.tags")}),{title:" ",groupable:!1,sortable:!1,filterable:!1,template:g.bind(null,t),editor:function(t,e){return null}}],dataBound:I.bind(null,t,n),change:T.bind(null,t,e),pageable:s.defaultPageable(),scrollable:!1},s.withDefaults(i),n.kendoGrid(i),t.documentGrid=n.data("kendoGrid"),null},c=function(){var t;return t=d(A),i.destroy(t),t.empty(),null},{refresh:function(t){var e;return c(),(e=d(A)).addClass("documentsContent"),o.init(e,t.model.get("id")),null},init:function(t){return null}}})}.call(this),define("reference/repository/CustomReferenceRepository",["require","exports","core/web/WebHttp","object/data/ObjectCategories"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CustomReferenceRepository=void 0;var a=function(){function t(){}return t.fetchIdentifiables=function(t){var e=i.ObjectCategories.getId(t);return n.WebHttp.getJson("reference/definition/id/list.json",{category:e})},t}();e.CustomReferenceRepository=a}),define("reference/ui/CustomReferenceUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","../repository/CustomReferenceRepository"],function(t,e,i,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CustomReferenceUI=void 0;var n=function(){function n(){}return n.widget=function(t,e){return i.IdWidgetUtils.widget(function(){return r.CustomReferenceRepository.fetchIdentifiables(e)},t)},n.column=function(e,t){return a.IdentifiableColumnUtils.create(t,function(t){return n.widget(t,e)})},n}();e.CustomReferenceUI=n}),function(){define("views/data/edit/common/reference.grid",["jquery","i18n","kendo","ui","core/util/ObservableUtils","reference/ui/CustomReferenceUI"],function(n,a,t,e,i,r){var o,d,l,s,u;return s=i.ObservableUtils,o=r.CustomReferenceUI,d=e.grid,l=d.transports,u=function(t,e){return e?e.find(t):n(t)},{setupGrid:function(t,e,n){var i;return i={dataSource:{transport:l.createLocal({data:e.get("customReferences")}),schema:{model:{id:"id",fields:{definition:{nullable:!0,validation:{required:!0}},value:{type:"string"}},definitionName:function(){return s.get(this,"definition.name")}}}},columns:[{command:["edit","destroy"],title:" "},o.column(t,{field:"definition",title:a.t("data:fields.reference")}),{field:"value",title:a.t("data:fields.value")}],toolbar:["create"],pageable:d.defaultPageable(),scrollable:!1},d.withDefaults(i),u("#customReferenceGrid",n).kendoGrid(i)}}})}.call(this),define("common/date/HistoryDatePicker",["require","exports","core/web/WebHttp","lodash"],function(t,e,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HistoryDatePicker=void 0;var n=function(){function t(){}return t.history=function(t,e){t.kendoDatePicker({change:function(e){var t=e.get("historyDate"),n=e.get("id");if(t){var i={id:n,date:t=r.isDate(t)?t.toJSON():t};a.WebHttp.getJson("history/date/object.json",i).then(function(t){t=kendo.observable(t),e.set("history",t.get("history"))})}}.bind(null,e)})},t.metric=function(t,e){t.kendoDatePicker({change:function(e){var t=e.get("metricDate"),n=e.get("id");if(t){var i={id:n,date:t=r.isDate(t)?t.toJSON():t};a.WebHttp.getJson("history/date/object.json",i).then(function(t){t=kendo.observable(t),e.set("metric",t.get("metric"))})}}.bind(null,e)})},t}();e.HistoryDatePicker=n}),define("object/repository/RelatedObjectRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RelatedObjectRepository=void 0;var i=function(){function t(){}return t.list=function(t,e){return n.WebHttp.getJson("related/object/list.json",{id:t},e)},t}();e.RelatedObjectRepository=i}),define("object/data/RelatedObjectType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RelatedObjectType=void 0;var r,o;(r=e.RelatedObjectType||(e.RelatedObjectType={}))[r.OWNER=1]="OWNER",r[r.DEPOSITARY=2]="DEPOSITARY",r[r.SHARE=3]="SHARE",r[r.DIRECTOR=4]="DIRECTOR",r[r.TARGET_ASSET=5]="TARGET_ASSET",r[r.CONVERTIBLE=6]="CONVERTIBLE",r[r.LENDER=7]="LENDER",r[r.ISSUER=8]="ISSUER",r[r.BENCHMARK=9]="BENCHMARK",r[r.MANDATE=10]="MANDATE",r[r.CONTACT=11]="CONTACT",r[r.COMPANY_LEGAL=12]="COMPANY_LEGAL",r[r.JOINED_ENTITY=13]="JOINED_ENTITY",r[r.MANAGER=14]="MANAGER",r[r.MASTER_FUND=15]="MASTER_FUND",r[r.FLOW=16]="FLOW",r[r.INVESTMENT=17]="INVESTMENT",r[r.INVESTOR=18]="INVESTOR",r[r.VIRTUAL_PORTFOLIO=19]="VIRTUAL_PORTFOLIO",r[r.PARENT_PORTFOLIO=20]="PARENT_PORTFOLIO",r[r.PORTFOLIO=21]="PORTFOLIO",r[r.ASSET=22]="ASSET",r[r.COUNTERPART=23]="COUNTERPART",r[r.ORIGINAL_ASSET=24]="ORIGINAL_ASSET",(o=e.RelatedObjectType||(e.RelatedObjectType={})).getName=n.EnumUtils.createNameFn("data:RelatedObjectType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosRelatedObjectType",o,!0),o.column=a.EnumColumnUtils.createFactory(o,o.widget)}),define("object/views/related_object/views/RelatedObjectGrid",["require","exports","core/ui/grid/GridUtils","object/ui/ObjectUI","../../../repository/RelatedObjectRepository","i18n","../../../data/RelatedObjectType"],function(t,e,i,a,r,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RelatedObjectGrid=void 0;var n=function(){function t(){}return t.setup=function(t,n){kendo.destroy(t),t.empty();var e={dataSource:{transport:{read:function(e){n?r.RelatedObjectRepository.list(n).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)}):e.success([])}},schema:{model:{id:"id",fields:{id:{type:"number"},object:{editable:!1},type:{type:"number",editable:!1}},objectName:i.GridUtils.modelName("object")}},sort:{field:"objectName()",dir:"asc"}},columns:[a.ObjectUI.column({field:"object",title:o.I18N.t("data:fields.relatedObject.object"),width:200}),d.RelatedObjectType.column({field:"type",title:o.I18N.t("data:fields.relatedObject.type"),width:100})],toolbar:[{name:"excel"}],pageable:i.GridUtils.defaultPageable(),groupable:!0,editable:!1,height:700,scrollable:!0};i.GridUtils.withDefaults(e),t.kendoGrid(e)},t}();e.RelatedObjectGrid=n}),define("text!templates/data/register.date.dialog.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="date" data-i18n="data:fields.date"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="date" data-role="datepicker" data-bind="value: date"\n\t\t\t\t required />\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\t<div class="formWindowButtons">\n\t\t<button class="k-primary" data-role="button" data-icon="check" data-bind="click: okClick">#=\n\t\t\t$.t("data:actions.ok")#</button>\n\t\t<button data-role="button" data-icon="cancel" data-bind="click: cancelClick">#= $.t("data:actions.cancel")#</button>\n\t</div>'}),define("object/views/register/RegisterDateInputDialog",["require","exports","i18n","core/data/DObservableBuilder","text!templates/data/register.date.dialog.html"],function(t,e,o,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RegisterDateInputDialog=void 0;var n=function(){function t(){}return t.openDialog=function(){return new Promise(function(t,e){var n=kendo.template(l)({}),i=$("<div>").html(n).appendTo($(document.body));o.I18N.localize(i);i.kendoWindow({modal:!0,width:400,minWidth:300,visible:!1});var a,r=i.data("kendoWindow");r.bind("close",function(){return kendo.destroy(i),i.remove(),t(a),!0}),d.DObservableBuilder.of(new Date).add("okClick",function(t){a=t.toJson(),r.close()}).add("cancelClick",function(t){a=void 0,r.close()}).build().bind(i),r.title(o.I18N.t("data:register.dialog.title")).open().center()})},t}();e.RegisterDateInputDialog=n}),define("object/views/register/RegisterModule",["require","exports","tslib","lp/repository/LpEquityRepository","lp/views/overview/equity/LpEquityValueGrid","i18n","./RegisterDateInputDialog"],function(t,e,n,m,f,b,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RegisterModule=void 0;var i="#registerGrid";function y(t){var e=t.find(i);return kendo.destroy(e),e.empty(),e}var h=function(){function t(){}return t.display=function(u,c,p){return n.__awaiter(this,void 0,void 0,function(){var r,o,d,l,s;return n.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),0!==c?[3,1]:(o=[],[3,3]);case 1:return[4,(i=c,a=p,m.LpEquityRepository.compute(i,a,[],[]))];case 2:o=t.sent(),t.label=3;case 3:return r=o,d=y(u),f.LpEquityValueGrid.display(d,null,r),l=$('<a class="k-button"/>').text(b.I18N.t("lp:equity.actions.compute")).click(function(){return e=u,n=c,void v.RegisterDateInputDialog.openDialog().then(function(t){t&&h.display(e,n,t)});var e,n}),$(l).insertBefore(d.find(".k-grid-excel")),[3,5];case 4:throw s=t.sent(),n=s,e=y(e=u),$("<h4>").text(""+n).appendTo(e),s;case 5:return[2]}var e,n,i,a})})},t}();e.RegisterModule=h}),define("text!templates/data/edit/debt.html",[],function(){return'<div id="editRoot">\n\t<h1 data-i18n="object:debts.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="object:debts.edit" data-bind="invisible: isNew"></h1>\n\n\t<h2 data-bind="text: name"></h2>\n\n\t<div id="editActions"></div>\n\n\t<p></p>\n\n\t<div data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li class="k-state-active">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.advanced"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.references"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.tags"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.histories"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.documents"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.cashFlows"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.register"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="name" data-i18n="data:fields.name"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name"\n\t\t\t\t\t\t\trequired="required" data-i18n="[validationMessage]data:validation.nameRequired" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="created" data-i18n="data:fields.creationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="created" name="created" class="k-textbox" type="text" data-bind="display: created"\n\t\t\t\t\t\t\tdata-format="g" readonly="readonly" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="shortName" data-i18n="data:fields.shortName"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="shortName" name="shortName" class="k-textbox" type="text"\n\t\t\t\t\t\t\tdata-bind="value: shortName" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="type" data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="type" name="type" data-bind="value: type" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="currency" data-i18n="data:fields.currency"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="currency" name="currency" data-role="domoscurrency" data-bind="value: currency" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="needsDocumentValidation" data-i18n="data:fields.needsDocumentValidation"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="needsDocumentValidation" type="checkbox" data-bind="checked: needsDocumentValidation"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="market" data-i18n="data:fields.market"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="market" name="market" data-role="domosmarket" data-bind="value: market" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="seniority" data-i18n="data:fields.seniority"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="seniority" name="seniority" data-role="domosdebtseniority"\n\t\t\t\t\t\t\tdata-bind="value: seniority" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="asset">\n\t\t\t\t\t\t\t<a data-i18n="data:fields.asset" data-bind="attr: {href: assetUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="asset" name="asset" data-role="domosassettarget" data-bind="value: asset" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="nominal" data-bind="text :nominalText"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="nominal" name="nominal" data-role="numerictextbox" data-bind="value: value"\n\t\t\t\t\t\t\trequired="required" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="issueCount" data-bind="text: issueCountText"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="issueCount" name="issueCount" data-role="numerictextbox" data-format="n0" \n\t\t\t\t\t\t\tdata-bind="value: issueCount" required/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="invisible: hasInterestRate">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="dayCountBasis" data-i18n="data:fields.dayCountBasis"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="dayCountBasis" name="dayCountBasis" data-role="domosdaycountbasis"\n\t\t\t\t\t\t\tdata-bind="value: dayCountBasis" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="debtPaymentType" data-i18n="data:fields.debtPaymentType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="debtPaymentType" name="debtPaymentType" data-role="domosdebtpaymenttype"\n\t\t\t\t\t\t\tdata-bind="value: paymentType" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="nbTranches" data-i18n="data:fields.nbTranches"\n\t\t\t\t\t\t\tdata-bind="invisible: isAllInstallment"></label></td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="nbTranches" name="nbTranches" data-role="numerictextbox" data-format="n0"\n\t\t\t\t\t\t\tdata-bind="value: nbTranches, invisible: isAllInstallment" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="interestRate" data-i18n="data:fields.interestRate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="interestRate" name="interestRate" data-role="domosinterestrate"\n\t\t\t\t\t\t\tdata-bind="value: interestRate" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="rate" data-i18n="data:fields.rate" data-bind="invisible: hasInterestRate"></label>\n\t\t\t\t\t\t<label for="rate" data-i18n="data:fields.spread" data-bind="visible: hasInterestRate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="rate" name="rate" data-role="domospercent" data-format="p3"\n\t\t\t\t\t\t\tdata-bind="value: rate" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: hasInterestRate">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="cap" data-i18n="data:fields.debtCap"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="cap" data-role="domospercent" data-bind="value: cap" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: hasInterestRate">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="floor" data-i18n="data:fields.debtFloor"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="floor" data-role="domospercent" data-bind="value: floor" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="issuer">\n\t\t\t\t\t\t\t<a data-i18n="data:fields.issuer" data-bind="attr: {href: issuerUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="issuer" name="issuer" data-role="domosentity" data-bind="value: issuer" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="lender">\n\t\t\t\t\t\t\t<a data-bind="text: lenderText, attr: {href: lenderUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="lender" name="lender" data-role="domosentity" data-bind="value: lender" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="repaymentFrequency" data-i18n="data:fields.repaymentFrequency"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="repaymentFrequency" name="repaymentFrequency" data-role="domosperiodicity"\n\t\t\t\t\t\t\tdata-bind="value: repaymentFrequency" required />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="interestFrequency" data-i18n="data:fields.interestFrequency"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="interestFrequency" name="interestFrequency" data-role="domosperiodicity"\n\t\t\t\t\t\t\tdata-bind="value: interestFrequency" required />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="amortization" data-i18n="data:fields.amortization"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="amortization" name="amortization" data-role="domosdebtamortizationtype"\n\t\t\t\t\t\t\tdata-bind="value: amortization" required />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="trancheImputation" data-i18n="data:fields.trancheImputation"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="trancheImputation" name="trancheImputation" data-role="domostrancheimputation"\n\t\t\t\t\t\t\tdata-bind="value: trancheImputation" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="startDate" data-i18n="data:fields.startDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="startDate" name="startDate" data-role="datepicker" data-bind="value: startDate"\n\t\t\t\t\t\t\trequired />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="maturityDate" data-i18n="data:fields.maturityDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="maturityDate" name="maturityDate" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: maturityDate" required />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="initialRedemption" data-i18n="data:fields.initialRedemption"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="initialRedemption" name="initialRedemption" data-role="domospercent"\n\t\t\t\t\t\t\tdata-bind="value: initialRedemption" required />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="premiumRedemption" data-i18n="data:fields.premiumRedemption"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="premiumRedemption" name="premiumRedemption" data-role="domospercent"\n\t\t\t\t\t\t\tdata-bind="value: premiumRedemption" required />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\n\t\t\x3c!-- Advanced --\x3e\n\t\t<div>\n\t\t\t<h2 data-i18n="data:sections.AIFMD"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFSubAssetType" data-i18n="data:fields.AIFSubAssetType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFSubAssetType" name="AIFSubAssetType" data-role="domosaifsubassettype"\n\t\t\t\t\t\t\tdata-bind="value: AIFMD.subAssetType" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMDGeographicalFocus" data-i18n="data:fields.AIFMDGeographicalFocus"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMDGeographicalFocus" name="AIFMDGeographicalFocus"\n\t\t\t\t\t\t\tdata-role="domosaifmdgeographicalfocus" data-bind="value: AIFMD.geographicalFocus" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t\x3c!-- Not relevant, liquidity computed from redemption list\n\t\t\t\ttr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMDLiquidationPeriod" data-i18n="data:fields.AIFMDLiquidationPeriod"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMDLiquidationPeriod" name="AIFMDLiquidationPeriod" data-role="domosaifmdliquidationperiod" data-bind="value: AIFMD.liquidationPeriod"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr--\x3e\n\t\t\t</table>\n\t\t\t<div>\n\t\t\t\t<div class="flowTopPane">\n\t\t\t\t\t<h2 data-i18n="data:sections.redemptionList"></h2>\n\n\t\t\t\t\t<div id="redemptionGrid" class="floatingGrid_100"></div>\n\t\t\t\t\t<div class="clearer"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="flowTopPane">\n\t\t\t\t\t<h2 data-i18n="data:sections.redenominations"></h2>\n\t\t\t\t\t<div id="redenominationsGrid" class="floatingGrid_100"></div>\n\t\t\t\t\t<div class="clearer"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<h2 data-i18n="data:sections.TPT"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="direction" data-i18n="data:fields.direction"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="direction" name="direction" data-role="domosdebtdirection"\n\t\t\t\t\t\t\tdata-bind="value: direction" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="quotationType" data-i18n="data:fields.quotationType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="quotationType" data-role="domosquotationtype" data-bind="value: quotationType" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="poolFactor" data-i18n="data:fields.poolFactor"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="poolFactor" data-role="domospercent" data-format="p3"\n\t\t\t\t\t\t\tdata-bind="value: poolFactor" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="couponType" data-i18n="data:fields.couponType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="couponType" data-role="domoscoupontype" data-bind="value: couponType" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="couponFrequency" data-i18n="data:fields.couponFrequency"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="couponFrequency" data-role="domoscouponfrequency"\n\t\t\t\t\t\t\tdata-bind="value: couponFrequency" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="couponLastPaymentDate" data-i18n="data:fields.couponLastPaymentDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="couponLastPaymentDate" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: couponLastPaymentDate" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="couponRate" data-i18n="data:fields.couponRate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="couponRate" data-role="domospercent" data-format="p3"\n\t\t\t\t\t\t\tdata-bind="value: couponRate" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<h2 data-i18n="data:sections.couponsSchedule"></h2>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="firstCouponDate" data-i18n="data:fields.firstCouponDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="firstCouponDate" data-role="datepicker" data-bind="value: firstCouponDate" />\n\t\t\t\t\t</td>\n\n\t\t\t\t\t<td><label for="beforeLastCouponDate" data-i18n="data:fields.beforeLastCouponDate"></label></td>\n\t\t\t\t\t<td><input id="beforeLastCouponDate" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: beforeLastCouponDate" /></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td><label for="generationForward" data-i18n="data:fields.generationForward"></label></td>\n\t\t\t\t\t<td><input id="generationForward" type="checkbox" data-bind="checked: generationForward" /></td>\n\t\t\t\t\t<td><label for="endOfMonth" data-i18n="data:fields.endOfMonth"></label></td>\n\t\t\t\t\t<td><input id="endOfMonth" type="checkbox" data-bind="checked: endOfMonth" /></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<h2 data-i18n="data:sections.paymentInKind"></h2>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="pikRate" data-i18n="data:fields.pikRate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="pikRate" data-role="domospercent" data-bind="value: pikRate" />\n\t\t\t\t\t</td>\n\n\t\t\t\t\t<td><label for="pikBasis" data-i18n="data:fields.pikBasis"\n\t\t\t\t\t\t\tdata-bind="visible: pikRateNotNull"></label></td>\n\t\t\t\t\t<td><input id="pikBasis" data-role="domosdaycountbasis"\n\t\t\t\t\t\t\tdata-bind="value: pikBasis, visible: pikRateNotNull" /></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="pikFrequency" data-i18n="data:fields.pikFrequency"\n\t\t\t\t\t\t\tdata-bind="visible: pikBasisNotNull"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="pikFrequency" data-role="domosperiodicity"\n\t\t\t\t\t\t\tdata-bind="value: pikFrequency, visible: pikBasisNotNull" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="firstCapitalisationDate" data-i18n="data:fields.firstCapitalisationDate"\n\t\t\t\t\t\t\tdata-bind="visible: pikBasisNotNull"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="firstCapitalisationDate" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: firstCapitalisationDate, visible: pikBasisNotNull" />\n\t\t\t\t\t</td>\n\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="lastCapitalisationDate" data-i18n="data:fields.lastCapitalisationDate"\n\t\t\t\t\t\t\tdata-bind="visible: pikBasisNotNull"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="lastCapitalisationDate" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: lastCapitalisationDate, visible: pikBasisNotNull" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<h2 data-i18n="data:sections.fixedToFloat" data-bind="visible: hasInterestRate"></h2>\n\t\t\t<table class="formTable" data-bind="visible: hasInterestRate">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="fixedToFloat" data-i18n="data:fields.fixedToFloat"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="fixedToFloat" data-role="datepicker" data-bind="value: fixedToFloat" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="fixedToFloatRate" data-i18n="data:fields.fixedToFloatRate"\n\t\t\t\t\t\t\tdata-bind="invisible: fixedToFloatIsNull"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="fixedToFloatRate" data-role="numerictextbox"\n\t\t\t\t\t\t\tdata-bind="value: fixedToFloatRate, invisible:fixedToFloatIsNull" />\n\t\t\t\t\t</td>\n\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<h2 data-i18n="data:sections.convertible"></h2>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="share">\n\t\t\t\t\t\t\t<a data-i18n="data:fields.share" data-bind="attr:{href: shareUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="share" data-role="domoscompanyshare" data-bind="value: share" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="conversionRatio" data-i18n="data:fields.conversionRatio"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="conversionRatio" data-role="numerictextbox" data-format="n0"\n\t\t\t\t\t\t\tdata-bind="value: conversionRatio" />\n\t\t\t\t\t</td>\n\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\n\t\t\x3c!-- References --\x3e\n\t\t<div>\n\t\t\t\t<h2 data-i18n="data:sections.references"></h2>\n\n\t\t\t\t<table class="formTable">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="CUSIP" data-i18n="data:fields.CUSIP"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="CUSIP" name="CUSIP" class="k-textbox" type="text" data-bind="value: CUSIP"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t<td></td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="ISIN" data-i18n="data:fields.ISIN" class="aifmRequired"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="ISIN" name="ISIN" class="k-textbox" type="text" data-bind="value: ISIN"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t<td></td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="RIC" data-i18n="data:fields.RIC"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="RIC" name="RIC" class="k-textbox" type="text" data-bind="value: RIC"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t<td></td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="SEDOL" data-i18n="data:fields.SEDOL"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="SEDOL" name="SEDOL" class="k-textbox" type="text" data-bind="value: SEDOL"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t<td></td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="TICKER" data-i18n="data:fields.TICKER"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="TICKER" name="TICKER" class="k-textbox" type="text" data-bind="value: TICKER"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t<td></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t<h2 data-i18n="data:sections.customReferences"></h2>\n\n\t\t\t<div id="customReferenceGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t</div>\n\n\t\t\x3c!-- Tags --\x3e\n\t\t<div>\n\t\t\t<div id="editTags"></div>\n\t\t</div>\n\n\t\t\x3c!-- Histories --\x3e\n\t\t<div>\n\t\t\t<label for="historyDate" data-i18n="history:fields.historyDate"></label>\n\t\t\t<input id="historyDate" name="historyDate" data-bind="value: historyDate" />\n\t\t\t<p></p>\n\t\t\t<p></p>\n\t\t\t<div id="editHistory"></div>\n\t\t</div>\n\n\t\t\x3c!-- Documents --\x3e\n\t\t<div>\n\t\t\t<div id="objectDocument"></div>\n\t\t</div>\n\n\t\t\x3c!-- Cash flows --\x3e\n\t\t<div>\n\t\t\t<label for="stressId" data-i18n="stress:profiles.name"></label>\n\t\t\t<input id="stressId" name="stressId" data-bind="value: stressId" data-role="domosstressprofile"\n\t\t\t\tdata-value-primitive="true" />\n\n\t\t\t<a class="k-button" data-i18n="lp:summaries.downloadXml" data-bind="attr: {href: xmlUrl}" download></a>\n\n\n\t\t\t<div id="scheduleToolbar"></div>\n\t\t\t<p></p>\n\t\t\t<div id="scheduleGrid" class="floatingGrid_1300_px"></div>\n\t\t\t<div class="clearer"></div>\n\t\t\t<p></p>\n\t\t\t<div id="scheduleGraph" class="floatingGrid_1300_px"></div>\n\t\t</div>\n\n\t\t\x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n\n\t\t\x3c!-- Register --\x3e\n\t\t<div id="registerRoot">\n\t\t\t<div id="registerGrid"></div>\n\t\t</div>\n\t</div>\n</div>'}),define("core/api/DayCountBasis",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DayCountBasis=void 0;var r,o;(r=e.DayCountBasis||(e.DayCountBasis={}))[r.BASIS_30_360=1]="BASIS_30_360",r[r.ACTUAL_360=2]="ACTUAL_360",r[r.ACTUAL_365F=3]="ACTUAL_365F",r[r.ACTUAL_365=4]="ACTUAL_365",r[r.ACTUAL_ACTUAL=5]="ACTUAL_ACTUAL",(o=e.DayCountBasis||(e.DayCountBasis={})).getName=a.EnumUtils.createNameFn("object:dayCountBasis",o),o.widget=i.EnumWidgetUtils.createDropList("DomosDayCountBasis",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/DebtAmortizationType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DebtAmortizationType=void 0;var r,o;(r=e.DebtAmortizationType||(e.DebtAmortizationType={}))[r.EQUAL_AMOUNTS=1]="EQUAL_AMOUNTS",r[r.EQUAL_TRANCHES=2]="EQUAL_TRANCHES",r[r.CREDIT_LINE=3]="CREDIT_LINE",r[r.CUSTOM=4]="CUSTOM",(o=e.DebtAmortizationType||(e.DebtAmortizationType={})).getName=a.EnumUtils.createNameFn("object:debtAmortizationType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosDebtAmortizationType",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/Periodicity",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Periodicity=void 0;var r,o;(r=e.Periodicity||(e.Periodicity={}))[r.MONTHLY=1]="MONTHLY",r[r.QUARTERLY=2]="QUARTERLY",r[r.HALF_YEARLY=3]="HALF_YEARLY",r[r.YEARLY=4]="YEARLY",r[r.FINAL=5]="FINAL",(o=e.Periodicity||(e.Periodicity={})).getName=a.EnumUtils.createNameFn("object:Periodicity",o),o.widget=i.EnumWidgetUtils.createDropList("DomosPeriodicity",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/DebtDirection",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DebtDirection=void 0;var r,o;(r=e.DebtDirection||(e.DebtDirection={}))[r.BORROWING=1]="BORROWING",r[r.LENDING=2]="LENDING",(o=e.DebtDirection||(e.DebtDirection={})).getName=a.EnumUtils.createNameFn("object:debtDirection",o),o.widget=i.EnumWidgetUtils.createDropList("DomosDebtDirection",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/DebtSeniority",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DebtSeniority=void 0;var r,o;(r=e.DebtSeniority||(e.DebtSeniority={}))[r.SENIOR=1]="SENIOR",r[r.MEZZANINE=2]="MEZZANINE",r[r.JUNIOR=3]="JUNIOR",(o=e.DebtSeniority||(e.DebtSeniority={})).getName=a.EnumUtils.createNameFn("object:debtSeniority",o),o.widget=i.EnumWidgetUtils.createDropList("DomosDebtSeniority",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/CouponType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CouponType=void 0;var r,o;(r=e.CouponType||(e.CouponType={}))[r.FIXED=1]="FIXED",r[r.PROGRESSIVE=2]="PROGRESSIVE",r[r.FLOATING=3]="FLOATING",r[r.ZERO_COUPON=4]="ZERO_COUPON",r[r.INDEX_LINKED=5]="INDEX_LINKED",r[r.OTHER=6]="OTHER",(o=e.CouponType||(e.CouponType={})).getName=a.EnumUtils.createNameFn("object:CouponType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosCouponType",o,!0,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/CouponFrequency",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CouponFrequency=void 0;var r,o;(r=e.CouponFrequency||(e.CouponFrequency={}))[r.ZERO_COUPON=1]="ZERO_COUPON",r[r.ANNUAL=2]="ANNUAL",r[r.SEMI_ANNUAL=3]="SEMI_ANNUAL",r[r.QUARTERLY=4]="QUARTERLY",r[r.BI_MONTHLY=5]="BI_MONTHLY",r[r.MONTHLY=6]="MONTHLY",r[r.FORTNIGHTLY=7]="FORTNIGHTLY",r[r.OTHER=8]="OTHER",(o=e.CouponFrequency||(e.CouponFrequency={})).getName=a.EnumUtils.createNameFn("object:CouponFrequency",o),o.widget=i.EnumWidgetUtils.createDropList("DomosCouponFrequency",o,!0,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/HoldSecurityType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HoldSecurityType=void 0;var r,o;(r=e.HoldSecurityType||(e.HoldSecurityType={}))[r.NO_TEMPORARY_TRANSFER=1]="NO_TEMPORARY_TRANSFER",r[r.LENT=2]="LENT",r[r.REPURCHASE=3]="REPURCHASE",r[r.ISSUED=4]="ISSUED",r[r.SHORT=5]="SHORT",(o=e.HoldSecurityType||(e.HoldSecurityType={})).getName=a.EnumUtils.createNameFn("object:HoldSecurityType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosHoldSecurityType",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/QuotationType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QuotationType=void 0;var r,o;(r=e.QuotationType||(e.QuotationType={}))[r.CURRENCY_DIRTY=1]="CURRENCY_DIRTY",r[r.PERCENT_DIRTY=2]="PERCENT_DIRTY",r[r.CURRENCY_CLEAN=3]="CURRENCY_CLEAN",r[r.PERCENT_CLEAN=4]="PERCENT_CLEAN",r[r.IN_YIELD=5]="IN_YIELD",r[r.IN_ZC_SPREAD=6]="IN_ZC_SPREAD",(o=e.QuotationType||(e.QuotationType={})).getName=a.EnumUtils.createNameFn("object:QuotationType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosQuotationType",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("rate/repository/InterestRateRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InterestRateRepository=void 0;var i=function(){function t(){}return t.fetchIdentifiables=function(){return n.WebHttp.getJson("interest.rate/id/list.json")},t}();e.InterestRateRepository=i}),define("rate/ui/InterestRateUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","rate/repository/InterestRateRepository"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InterestRateUI=void 0;var r=function(){function t(){}return t.widget=n.IdWidgetUtils.createDropList("DomosInterestRate",a.InterestRateRepository,!0),t.column=i.IdentifiableColumnUtils.createFactory(t.widget),t}();e.InterestRateUI=r}),define("core/api/TrancheImputation",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TrancheImputation=void 0;var r,o;(r=e.TrancheImputation||(e.TrancheImputation={}))[r.FIRST=1]="FIRST",r[r.EQUAL=2]="EQUAL",r[r.LAST=3]="LAST",(o=e.TrancheImputation||(e.TrancheImputation={})).getName=a.EnumUtils.createNameFn("object:TrancheImputation",o),o.widget=i.EnumWidgetUtils.createDropList("DomosTrancheImputation",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),function(){var Q,z;z="#scheduleGrid",Q="#scheduleGraph",define("views/data/edit/edit.debt",["jquery","i18n","kendo","ui","core/web/WebLocation","object/ui/ObjectTypeUI","object/data/ObjectCategories","object/data/ObjectTypes","basic/data/Currencies","views/data/model/debt.model","views/data/edit/common/documents","views/data/edit/common/reference.grid","core/ui/DateUI","core/ui/IntegerUI","core/ui/NumberUI","common/date/HistoryDatePicker","core/ui/grid/column/ColumnStyle","core/ui/grid/column/ColumnUtils","basic/ui/CurrencyUI","object/views/related_object/views/RelatedObjectGrid","object/views/register/RegisterModule","text!templates/data/edit/debt.html","core/api/DayCountBasis","core/api/DebtPaymentType","core/api/DebtAmortizationType","core/api/AIFMDGeographicalFocus","core/api/AIFMDLiquidationPeriod","core/api/AIFSubAssetType","core/api/Periodicity","core/api/DebtDirection","core/api/DebtSeniority","core/api/CouponType","core/api/CouponFrequency","core/api/HoldSecurityType","core/api/QuotationType","rate/ui/InterestRateUI","basic/ui/MarketUI","object/ui/AssetUI","object/ui/LegalUI","core/ui/PercentUI","core/api/TrancheImputation","object/ui/AssetTargetUI"],function(r,o,d,t,e,n,i,a,l,s,u,c,p,m,f,b,v,y,h,g,T,I){var C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$;return O=f.NumberUI,S=p.DateUI,x=m.IntegerUI,E=l.Currencies,A=n.ObjectTypeUI,F=a.ObjectTypes,e.WebLocation,w=v.ColumnStyle,k=y.ColumnUtils,C=i.ObjectCategories.debts,R=t.grid,_=R.transports,N=b.HistoryDatePicker,D=h.CurrencyUI,P=g.RelatedObjectGrid,L=T.RegisterModule,j=function(t){var e,n;return e=t.model,n={dataSource:{transport:_.createLocal({data:e.get("redemptionList")}),schema:{model:{id:"id",fields:{date:{type:"date",validation:{required:!0}},value:{type:"number",validation:{required:!0}}}}}},columns:[k.addStyle({command:["edit","destroy"],title:" ",width:230},w.CENTER_ALIGNED),S.column({field:"date",title:o.t("data:fields.date"),width:200}),x.column({field:"value",title:o.t("data:fields.value"),width:100})],toolbar:["create"],pageable:R.defaultPageable(),scrollable:!0,height:500},R.withDefaults(n),r("#redemptionGrid").kendoGrid(n)},M=function(t){return t.get("currency")||E.EUR_ID},G=function(t){var e,n;return e=t.model,n={dataSource:{transport:_.createLocal({data:e.get("redenominations")}),schema:{model:{id:"id",fields:{redenominationDate:{type:"date",nullable:!1},notional:{type:"number",nullable:!1},issueCount:{type:"number",nullable:!1},currency:{type:"number",defaultValue:M.bind(null,e)},fx:{type:"number",nullable:!0}}}}},columns:[k.addStyle({command:["edit","destroy"],title:" ",width:230},w.CENTER_ALIGNED),S.column({field:"redenominationDate",title:o.t("data:fields.redenominations.redenominationDate"),width:200}),O.column({field:"notional",title:o.t("data:fields.redenominations.notional"),width:200}),x.column({field:"issueCount",title:o.t("data:fields.redenominations.issueCount"),width:150}),D.column({field:"currency",title:o.t("data:fields.redenominations.currency"),width:100}),O.column({field:"fx",title:o.t("data:fields.redenominations.fx"),width:100})],toolbar:["create"],pageable:R.defaultPageable(),scrollable:!0,height:500},R.withDefaults(n),r("#redenominationsGrid").kendoGrid(n)},q=function(t){var e,n;return e=r("#scheduleToolbar"),d.destroy(e),e.empty(),n={items:[{id:"scheduleRefrech",type:"button",text:o.t("data:actions.refresh"),click:H.bind(null,t)}]},e.kendoToolBar(n),null},$=function(t,e){var n;if(n=r(Q).data("kendoChart"))return n.options.categoryAxis.labels.step=t.length/10},J=function(t,e){var n,i,a;return i=t.model,n=E.getName(i.get("currency")),a={dataSource:{data:e},legend:{position:"bottom"},series:[{name:o.t("data:fields.capitalAmortization"),type:"line",field:"capitalAmortization",categoryField:"index"},{name:o.t("data:fields.interest"),type:"line",field:"interest",categoryField:"index"}],valueAxis:{title:{text:n},labels:{format:" {0:n}"}},categoryAxis:{line:{visible:!1}},dataBound:$.bind(null,e)},r(Q).kendoChart(a)},U=null,function(t){var e;return e={transport:{read:__read.bind(null,t)}},new d.data.DataSource(e)},function(t){return H(t)},B=function(t){return R.resizeGrid(t.sender),null},V=function(t,e){var n,i,a,r;return"stressId"===e.field&&(t.initDebt?t.initDebt=!1:H(t)),"type"===e.field&&(n=t.model,r=F.get(n.get("type")),i=F.get(U),(r===F.creditLine&&i!==F.creditLine||r!==F.creditLine&&i===F.creditLine)&&(a=n.get("issuer"),n.set("issuer",n.get("lender")),n.set("lender",a))),null},W=function(t){return"type"===t.field&&(U=t.sender.get(t.field)),null},K=function(t,e){var n;return n={dataSource:{data:e},columns:[x.column({field:"index",title:o.t("data:fields.index"),width:"80px"}),S.column({field:"date",title:o.t("data:fields.date"),width:"100px"}),O.column({field:"startBalance",title:o.t("data:fields.startBalance"),width:"140px"}),O.column({field:"payment",title:o.t("data:fields.payment"),width:"120px"}),O.column({field:"notionalForInterest",title:o.t("data:fields.notionalForInterest"),width:"180px"}),O.column({field:"interest",title:o.t("data:fields.interest"),width:"110px"}),O.column({field:"paymentInKind",title:o.t("data:fields.paymentInKind"),width:"160px"}),O.column({field:"capitalAmortization",title:o.t("data:fields.capitalAmortization"),width:"180px"}),O.column({field:"endBalance",title:o.t("data:fields.endBalance"),width:"150px"})],scrollable:!0,pageable:R.defaultPageable(),height:500,dataBound:B},R.withDefaults(n),r(z).kendoGrid(n)},Y=function(e){var n,t,i,a;return t=r(z),d.destroy(t),t.empty(),t=r(Q),d.destroy(t),t.empty(),a={schema:{model:{id:"index",fields:{index:{type:"number"},date:{type:"date"},startBalance:{type:"number"},notionalForInterest:{type:"number"},payment:{type:"number"},interest:{type:"number"},paymentInKind:{type:"number"},capitalAmortization:{type:"number"},endBalance:{type:"number"},stressId:{type:"number"}}}},sort:{field:"index",dir:"asc"}},(i=e.model.get("id"))?a.transport={read:{url:"debt/amortization.schedule.json",dataType:"json",data:{id:i}}}:a.data=[],(n=new d.data.DataSource(a)).read().then(function(){var t;return(t=n.data())||(t=[]),K(0,t),J(e,t),null}).fail(function(){return K(0,[]),J(e,[]),null})},{getTemplates:function(){return{view:I}},createRawModel:function(){var t;return t={},s.updateRawModel(t),t},updateModel:function(t,e){return s.updateModel(t,e)},init:function(t){var e,n;return A.widget(r("#type"),C),j(t),G(t),q(t),u.init(t),c.setupGrid(C,t.model),n=t.model,t.initDebt=!0,U=n.get("type"),n.bind("change",V.bind(null,t)),n.bind("set",W),N.history(r("#historyDate"),n),e=t.object.id,P.setup(r("#relatedObjectGrid"),e),L.display(r("#registerRoot"),e,null),null},viewShow:function(t){return Y(t),u.refresh(t),null},refreshSchedule:H=function(t){var n,i,e,a;return e=t.model.toJSON(),a={transport:{read:{url:"debt/amortization.schedule.json?",dataType:"json",data:n={debt:JSON.stringify(e)},type:"POST"}}},(i=new d.data.DataSource(a)).read().then(function(){var t,e;return(n=i.data())||(n=[]),null!=(t=r(z).data("kendoGrid"))&&t.dataSource.data(n),null!=(e=r(Q).data("kendoChart"))&&e.dataSource.data(n),null}).fail(function(){var t,e;return null!=(t=r(z).data("kendoGrid"))&&t.dataSource.data([]),null!=(e=r(Q).data("kendoChart"))&&e.dataSource.data([]),null}),null}}})}.call(this),define("stress/web/StressMap",["require","exports","core/web/WebLocation","core/web/UrlBuilder"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StressMap=void 0;var a=function(){function t(){}return t.stressEdit=function(t){return t?n.WebLocation.resolveKendo("/stress/profile/"+t):"javascript:void(0)"},t.openPortfolio=function(t){return i.UrlBuilder.from("stress/scenario/portfolio").add("objectId",t.objectId).add("stressId",t.stressId).add("date",t.date).add("pipeId",t.pipeId).add("transparencyId",t.transparencyId).build()},t.exitDateView=function(t){return i.UrlBuilder.from("exit/date/stress/scenario").add("id",t).build()},t}();e.StressMap=a}),function(){var et;et="#lendersButtonId",define("views/edit/edit.actions",["jquery","lodash","i18n","kendo","site","core/event/SiteEvents","core/web/WebLocation","core/ui/Confirmation","views/layout","object/data/ObjectTypes","views/data/edit/edit.debt","stress/web/StressMap"],function(d,a,l,s,t,e,n,i,r,o,u,c){var p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q,z,X,Z,tt;return f=e.SiteEvents,p=i.Confirmation,y=n.WebLocation,m=o.ObjectTypes,t.router,b=c.StressMap,v=s.View,C=function(t,e,n){return{options:t,module:e,model:n,toolbar:null,validator:null,query:null}},T=I=function(t){return y.close(!1),null},F=function(t){return f.deleteSuccessful(),I(),null},L=function(t){return null},A=function(t){return t.query=null},h=function(t,e){var n,i;if(!0===e)return i={id:t.model.get("id")},n={type:"DELETE",url:t.options.url+"?"+d.param(i)},t.query=d.ajax(n).done(F.bind(null,t)).fail(L.bind(null,t)).always(A.bind(null,t)),null},E=function(t){var e,n,i;if(!t.query)return n=t.model.toJSON(),e=null,t.options.askDestroy&&(i=t.options.askDestroy,a.isString(i)?e=i:a.isFunction(i)&&(e=i(n))),e||(e=l.t("site:confirmDeleteGeneric")),p.confirmDelete(e).then(h.bind(null,t)).catch(function(){}),null},j=function(t,e,n){var i;return f.saveSuccessful(),e?I():(i=t.model,n&&a.has(n,"id")&&(t.module.updateModel(i,n),V(i)),i.set("isModified",!1)),null},G=function(t){return null},M=function(t){return t.query=null},W=function(t,e){var n,i,a,r;if(!t.query)return a=t.model.toJSON(),(r=m.get(a.type))&&r===m.debt&&(t.initDebt=!0,u.refreshSchedule(t)),i={data:JSON.stringify(a)},n={type:"POST",url:t.options.url,dataType:"json",data:i},t.query=d.ajax(n).done(j.bind(null,t,e)).fail(G.bind(null,t)).always(M.bind(null,t)),null},Y=function(t,e){var n,i;if(!t.query)return n=t.model.toJSON(),(i=m.get(n.type))&&i===m.debt&&(t.initDebt=!0,u.refreshSchedule(t)),e?t.options.submit(n):t.options.save(n),null},w=function(t){var e,n;return n=null,(e=t.options.createValidatorOptions)&&(n=e(t)),n||{}},N=function(t){return d("#"+t.options.rootId)},_=function(t){var e,n;return n=w(t),(e=N(t)).kendoValidator(n),t.validator=e.data("kendoValidator")},U=function(t){var e;return!!(e=t.validator)&&e.validate()},H=function(t,e){return U(t)&&W(t,e),null},J=function(t,e){return U(t)&&Y(t,e),null},function(t,e){return t.options.close(),null},B=function(t,e){var n,i,a,r,o;return r=t.model,"isModified"===(n=e.field)?(o=r.get("isModified"),t.toolbar.enable(d("#tbSaveAndClose"),o),t.toolbar.enable(d("#tbSave"),o)):"id"===n?(a=r.isNew(),t.toolbar.enable(d("#tbDestroy"),!a)):"type"===n&&(i=m.get(r.type)===m.creditLine,t.toolbar.enable(d(et),!i)),!0},q=function(t,e){var n,i,a;return i=t.model,n=e.field,t.toolbar.enable(d("#tbSaveAndClose"),!0),"isModified"===n&&(a=i.get("isModified"),t.toolbar.enable(d("#tbSave"),a)),!0},X=function(t){var e,n,i;return n=(i=t.model).isNew(),t.toolbar.enable(d("#tbDestroy"),!n),t.toolbar.enable(d("#tbSaveAndClose"),n),t.toolbar.enable(d("#tbSave"),n),e=m.get(i.type)===m.creditLine,t.toolbar.enable(d(et),!e),null},z=function(t){return t.toolbar.enable(d("#tbSaveAndClose"),!0),t.toolbar.enable(d("#tbSave"),!1),null},D=function(t,e){return e?e.find("#"+t.options.actionsId):d("#"+t.options.actionsId)},R=function(t,e){var n,i,a,r,o;return i=[{id:"tbSaveAndClose",type:"button",text:l.t("risk:actions.saveAndClose"),icon:"check",click:H.bind(null,t,!0)},{id:"tbSave",type:"button",text:l.t("risk:actions.save"),icon:"check",click:H.bind(null,t,!1)},{id:"tbDestroy",type:"button",text:l.t("risk:actions.destroy"),icon:"close",enable:!1,click:E.bind(null,t)},{type:"button",text:l.t("risk:actions.cancel"),icon:"cancel",click:T.bind(null,t)}],(r=t.options).setupToolbar&&r.setupToolbar(t,i),"stressProfileActions"===r.actionsId&&(o=t.model.get("id"),i.push({type:"separator"}),i.push({type:"button",text:l.t("risk:actions.exitDate"),url:b.exitDateView(o)})),a={items:i},n=D(t,e),s.destroy(n),n.empty(),n.kendoToolBar(a),t.toolbar=n.data("kendoToolBar"),t.model.bind("change",B.bind(null,t)),null},x=function(t,e){var n,i;return i={items:[{id:"tbSave",type:"button",text:l.t("data:taskForm.buttonSave"),icon:"check",click:J.bind(null,t,!1)},{id:"tbSaveAndClose",type:"button",text:l.t("data:taskForm.buttonSubmit"),icon:"check",click:J.bind(null,t,!0)}]},n=D(t,e),s.destroy(n),n.empty(),n.kendoToolBar(i),t.toolbar=n.data("kendoToolBar"),t.model.bind("change",q.bind(null,t)),null},Q=function(t){return t.isNew=function(){return!this.get("id")},t.isModified=!1,null},P=function(t,e){return"isModified"!==e.field&&"historyDate"!==e.field&&"history"!==e.field&&"metric"!==e.field&&"metricDate"!==e.field&&t.set("isModified",!0),!0},g=function(t){return t.bind("change",P.bind(null,t))},V=function(t){return t.set("isModified",!1)},S=function(t,e){return e?e.find("#"+t.options.rootId):d("#"+t.options.rootId)},$=function(t,e){var n,i,a;return n=t.model,i=t.object,t.module.updateModel(n,i),V(n),(a=t.options).close||(a.submit?(x(t,e),z(t)):(R(t,e),X(t))),a.viewShow&&a.viewShow(t,e),!0},K=function(t){var e;return(e=t.options).viewHide&&e.viewHide(t),!0},O=function(t,e){return S(t,e).localize(),_(t),t.module.init(t,e),V(t.model),null},k=function(t,e,n){var i,a;return i=s.template(e)({}),a={model:t.model,init:O.bind(null,t,n),show:$.bind(null,t,n),hide:K.bind(null,t)},new v(i,a)},Z=function(t,e,n){var i;return i=t.options,t.object=n,r.display(i.key,e,null,i.siteCategory),null},tt=function(t,e,n,i){return t.options,t.object=n,e.render(i),null},{create:function(t,e,n){var i,a,r,o,d;return r=e.createRawModel(),Q(r),a=s.observable(r),g(a),i=C(t,e,a),d=e.getTemplates(),o=k(i,d.view,n),{display:Z.bind(null,i,o),displayInElement:tt.bind(null,i,o)}}}})}.call(this),function(){var T=[].slice;define("views/edit/edit",["jquery","i18n","site","core/web/WebLocation","views/layout","views/not.found","views/loading","views/edit/edit.actions"],function(i,t,e,n,a,r,o,d){var l,s,u,c,p,m,f,b,v,y,h,g;return l=n.WebLocation,v=function(t){return r.display(t.options.key,!0),null},f=function(t,e){var n,i,a;return n=t.options,a=t.viewContext,(i=n.getView(a,e))?i.display(e):v(t),null},s=function(t){var e;return null!=(e=t.query)&&e.abort(),t.query=null},g=function(t,e){var n;return n=e.name,l.setPageTitle(n),f(t,e),null},h=function(t){return v(t)},y=function(t){return t.query=null},c=function(t){var e;return e={},t&&(e.id=t),e},p=function(t,e){var n;return(n=t.options.createGetParameters)?n.apply(null,e):c.apply(null,e)},b=function(t,e){var n;return s(t),n=p(t,e),t.query=i.getJSON(t.options.url,n).done(g.bind(null,t)).fail(h.bind(null,t)).always(y.bind(null,t)),null},m=function(){var t,e,n;return e=arguments[0],t=2<=arguments.length?T.call(arguments,1):[],n=e.options,o.display(n.key,!0),b(e,t)},{create:function(t){var e;return e=u(t),{display:m.bind(null,e)}},createContext:u=function(t){return{options:t,viewContext:{create:d.create.bind(null,t)},query:null}},displayViewInElem:function(t,e,n){var i,a,r;return i=t.options,r=t.viewContext,(a=i.getView(r,e,n))?a.displayInElement(e,n):v(t),null}}})}.call(this),define("core/api/TriState",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TriState=void 0;var r,o;(r=e.TriState||(e.TriState={}))[r.UNSET=0]="UNSET",r[r.FALSE=1]="FALSE",r[r.TRUE=2]="TRUE",(o=e.TriState||(e.TriState={})).getName=a.EnumUtils.createNameFn("site:triStates",o),o.widget=i.EnumWidgetUtils.createDropList("DomosTriState",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/DashboardTimeUnit",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardTimeUnit=void 0;var r,o;(r=e.DashboardTimeUnit||(e.DashboardTimeUnit={}))[r.DAYS=1]="DAYS",r[r.WEEKS=2]="WEEKS",r[r.MONTHS=3]="MONTHS",r[r.QUARTERS=4]="QUARTERS",r[r.YEARS=5]="YEARS",r[r.SEMESTERS=6]="SEMESTERS",r[r.NAV_FREQUENCY=7]="NAV_FREQUENCY",(o=e.DashboardTimeUnit||(e.DashboardTimeUnit={})).getName=a.EnumUtils.createNameFn("dashboards:timeUnits",o),o.widget=i.EnumWidgetUtils.createDropList("DomosDashboardTimeUnit",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/DashboardOrigin",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardOrigin=void 0;var r,o;(r=e.DashboardOrigin||(e.DashboardOrigin={}))[r.JANUARY=1]="JANUARY",r[r.FEBRUARY=2]="FEBRUARY",r[r.MARCH=3]="MARCH",r[r.APRIL=4]="APRIL",r[r.MAY=5]="MAY",r[r.JUNE=6]="JUNE",r[r.JULY=7]="JULY",r[r.AUGUST=8]="AUGUST",r[r.SEPTEMBER=9]="SEPTEMBER",r[r.OCTOBER=10]="OCTOBER",r[r.NOVEMBER=11]="NOVEMBER",r[r.DECEMBER=12]="DECEMBER",r[r.CURRENT=13]="CURRENT",(o=e.DashboardOrigin||(e.DashboardOrigin={})).getName=a.EnumUtils.createNameFn("dashboards:DashboardOrigin",o),o.widget=i.EnumWidgetUtils.createDropList("DomosDashboardOrigin",o,!1,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("dashboard/web/DashboardWebUtils",["require","exports","core/web/WebLocation"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dashboardWebUtils=void 0;var i=function(){function t(){}return t.init=function(){return new t},t.prototype.getTemplate=function(t,e){return"<a class='d-link' href='"+this.getComponentUrl(t)+"'>"+e+"</a>"},t.prototype.getComponentUrl=function(t){return n.WebLocation.resolveKendo("/dashboards/component/edit/"+t)},t.prototype.getPerimeterUrl=function(t){return t?n.WebLocation.resolveKendo("/dashboards/perimeter/"+t):"javascript:void(0)"},t}();e.dashboardWebUtils=i.init()}),define("dashboard/ui/DashboardComponentUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","dashboard/repository/DashboardComponentRepository","dashboard/web/DashboardWebUtils"],function(t,e,n,i,a,r){"use strict";function o(t){return r.dashboardWebUtils.getComponentUrl(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardComponentUI=void 0;var d=function(){function t(){}return t.widget=n.IdWidgetUtils.createDropList("DomosDashboardComponent",a.DashboardComponentRepository,!0),t.widgetTextBase=n.IdWidgetUtils.createDropList("DomosDashboardTextComponent",a.DashboardComponentRepository.fetchTextBaseIdentifiables,!0),t.column=i.IdentifiableColumnUtils.createFactory(t.widget,o),t}();e.DashboardComponentUI=d}),define("user/repository/UserRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserRepository=void 0;var i=function(){function t(){}return t.fetchIdentifiables=function(t){var e={types:JSON.stringify(t)};return n.WebHttp.getJson("user/id/list.json",e)},t.fetchStringIdentifiables=function(t){var e={types:JSON.stringify(t)};return n.WebHttp.getJson("user/sid/list.json",e)},t.list=function(){return n.WebHttp.getJson("user/association/list.json")},t.update=function(t){var e={data:JSON.stringify(t)};return n.WebHttp.postJson("user/association.json",e)},t.delete=function(t){return n.WebHttp.destroyJson("user.json",{user:JSON.stringify(t)})},t.sendCreationMail=function(t){return n.WebHttp.postJson("user/mail/creation",{user:JSON.stringify(t)})},t.sendResetMail=function(t){return n.WebHttp.postJson("user/mail/reset",{user:JSON.stringify(t)})},t}();e.UserRepository=i}),define("core/api/UserType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserType=void 0;var r,o;(r=e.UserType||(e.UserType={}))[r.STANDARD=1]="STANDARD",r[r.DASHBOARD_ONLY=2]="DASHBOARD_ONLY",r[r.REPORTING_ONLY=3]="REPORTING_ONLY",r[r.WORKFLOW_ONLY=4]="WORKFLOW_ONLY",r[r.COMPLIANCE_EXTERNAL=5]="COMPLIANCE_EXTERNAL",r[r.DATA_UPLOAD=6]="DATA_UPLOAD",r[r.DATA_ROOM=7]="DATA_ROOM",r[r.PORTAL_VIEWER=8]="PORTAL_VIEWER",(o=e.UserType||(e.UserType={})).getName=a.EnumUtils.createNameFn("settings:userTypes",o),o.widget=i.EnumWidgetUtils.createDropList("DomosUserType",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("user/ui/UserUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","user/repository/UserRepository","core/api/UserType"],function(t,e,a,r,o,n){"use strict";function i(t){return function(){return o.UserRepository.fetchIdentifiables(t)}}function d(t,e){var n=a.IdWidgetUtils.createDropList(t,i(e),!0);return{widget:n,column:r.IdentifiableColumnUtils.createFactory(n)}}function l(t,e){var n,i=a.IdWidgetUtils.createDropList(t,(n=e,function(){return o.UserRepository.fetchStringIdentifiables(n)}),!0);return{widget:i,column:r.IdentifiableColumnUtils.createFactory(i)}}Object.defineProperty(e,"__esModule",{value:!0}),e.UserUI=void 0;var s=function(){function t(){}return t.widget=a.IdWidgetUtils.createDropList("DomosUser",i([]),!0),t.column=r.IdentifiableColumnUtils.createFactory(t.widget),t.DashboardOnly=d("DomosUserDashboard",[n.UserType.DASHBOARD_ONLY]),t.DataRoom=d("DomosUserDataRoom",[n.UserType.DATA_ROOM,n.UserType.WORKFLOW_ONLY]),t.ComplianceExternal=d("DomosUserComplianceExternal",[n.UserType.COMPLIANCE_EXTERNAL]),t.ComplianceExternalString=l("DomosUserComplianceExternalString",[n.UserType.COMPLIANCE_EXTERNAL]),t}();e.UserUI=s}),define("portfolio/data/PortfolioTransparency",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PortfolioTransparency=void 0;var r,o;(r=e.PortfolioTransparency||(e.PortfolioTransparency={}))[r.NO_TRANSPARENCY=1]="NO_TRANSPARENCY",r[r.FLAT_VIEW=2]="FLAT_VIEW",r[r.HIERARCHY=3]="HIERARCHY",r[r.NO_UNDISCLOSED=4]="NO_UNDISCLOSED",(o=e.PortfolioTransparency||(e.PortfolioTransparency={})).getName=a.EnumUtils.createNameFn("portfolio:PortfolioTransparency",o),o.widget=i.EnumWidgetUtils.createDropList("DomosPortfolioTransparency",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget),o.optionalColumn=function(t){return n.EnumColumnUtils.create(t,o,function(t){return o.widget(t,{optionLabel:"--"})})}}),define("text!templates/dashboards/edit/dashboard.html",[],function(){return'<div id="dashboardDashboardRoot" class="idxStandardContent">\n\t<h1 data-i18n="dashboards:dashboards.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="dashboards:dashboards.edit" data-bind="invisible: isNew"></h1>\n\n\t<div id="dashboardDashboardActions"></div>\n\n\t<h2 data-i18n="dashboards:dashboards.sections.mainInformation"></h2>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="sid" data-i18n="dashboards:dashboards.fields.sid"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="sid" class="k-textbox" type="text" data-bind="value: sid" />\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="type" data-i18n="dashboards:dashboards.fields.type"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="type" data-role="domosdashboardtype" data-bind="value: type"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="name" data-i18n="dashboards:dashboards.fields.name"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required"\n\t\t\t\t\tdata-i18n="[validationMessage]risk:validation.nameRequired" />\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="currency" data-i18n="dashboards:dashboards.fields.currency"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="active" data-i18n="dashboards:dashboards.fields.active"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="active" type="checkbox" data-bind="checked: active" />\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="perimeter" data-i18n="dashboards:dashboards.fields.perimeter"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="perimeter" data-role="domosdashboardperimeter" data-bind="value: perimeter" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="transparency" data-i18n="dashboards:dashboards.fields.transparency"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="transparency" data-role="domosportfoliotransparency" data-bind="value: transparency" />\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="email" data-i18n="dashboards:dashboards.fields.mail"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="email" data-role="domosdashboardtextcomponent" data-bind="value: mail" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="style" data-i18n="dashboards:dashboards.fields.style"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="style" data-role="domosdashboardstyle" data-bind="value: style" />\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="portal" data-i18n="dashboards:dashboards.fields.portal"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="portal" type="checkbox" class="k-checkbox" data-bind="checked: portal"/>\n\t\t\t\t<label for="portal" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr data-bind="visible: isAsset">\n\t\t\t<td>\n\t\t\t\t<label for="filterCategory" data-i18n="dashboards:dashboards.fields.assetFilterCategory"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="filterCategory" name="filterCategory" data-role="domosassetcategorymultiselect" data-bind="value: assetFilterCategories"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="recipientDocumentType" data-i18n="dashboards:dashboards.fields.recipientDocumentType" ></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="recipientDocumentType" data-role="domosrecipientdocumenttype"\n\t\t\t\t\tdata-bind="value: recipientDocumentType" data-value-primitive="true"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="description" data-i18n="dashboards:dashboards.fields.description"></label>\n\t\t\t</td>\n\t\t\t<td colspan="3">\n\t\t\t\t<textarea id="description" name="description" class="k-textbox"\n\t\t\t\t\tdata-bind="value: description"></textarea>\n\t\t\t</td>\n\t\t\t\n\t\t</tr>\n\t</table>\n\n\t<h2 data-i18n="dashboards:dashboards.sections.components"></h2>\n\n\t<div id="componentGrid" class="floatingGrid"></div>\n\t<div class="clearer"></div>\n\n\t<h2 data-i18n="dashboards:dashboards.sections.users"></h2>\n\n\t<div id="userGrid" class="floatingDashboardGrid_800_px"></div>\n\t<div class="clearer"></div>\n\n\t<div data-bind="invisible: isNew">\n\t\t<h2 data-i18n="dashboards:dashboards.sections.xml"></h2>\n\n\t\t<table data-bind="invisible: isNew">\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="xmlDate" data-i18n="dashboards:dashboards.fields.xmlDate"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="xmlDate" data-role="datepicker" data-bind="value: xmlDate" />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr data-bind="visible: isAsset">\n\t\t\t\t<td>\n\t\t\t\t\t<label for="xmlAsset" data-i18n="dashboards:dashboards.fields.asset"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="xmlAsset" data-role="domosasset" data-bind="value: xmlAsset" data-value-primitive="true"/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr data-bind="visible: isFund">\n\t\t\t\t<td>\n\t\t\t\t\t<label for="xmlFund" data-i18n="dashboards:dashboards.fields.fund"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="xmlFund" data-role="domosvehicle" data-bind="value: xmlFund" data-value-primitive="true"/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr data-bind="visible: isPerimeter">\n\t\t\t\t<td>\n\t\t\t\t\t<label for="xmlPerimeter" data-i18n="dashboards:dashboards.fields.perimeter"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="xmlSelectedObject" data-role="domosdashboardperimeter" data-bind="value: xmlPerimeter" data-value-primitive="true"/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr data-bind="visible: isEntities">\n\t\t\t\t<td>\n\t\t\t\t\t<label for="xmlMainEntity" data-i18n="dashboards:dashboards.fields.mainEntity"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="xmlMainEntity" data-role="domosentity" data-bind="value: xmlMainEntity" data-value-primitive="true"/>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="xmlSecondaryEntity" data-i18n="dashboards:dashboards.fields.secondaryEntity"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="xmlSecondaryEntity" data-role="domosentity" data-bind="value: xmlSecondaryEntity" data-value-primitive="true"/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n\n\t\t<a class="k-button" data-bind="attr: {download: xmlName, href: xmlLink}" data-bind="invisible: isNew">\n\t\t\t<span data-i18n="dashboards:buttons.exportXml"></span>\n\t\t</a>\n\t</div>\n\n\t<div data-bind="invisible: isNew">\n\t\t<h2 data-i18n="dashboards:dashboards.sections.report"></h2>\n\n\t\t<div id="jasperLink"></div>\n\t\t<p></p>\n\n\t\t<div id="japserImportFile"></div>\n\t</div>\n\n\t<div data-bind="invisible: isNew">\n\t\t<h2 data-i18n="dashboards:dashboards.sections.word"></h2>\n\n\t\t<div id="docxLink"></div>\n\t\t<p></p>\n\t\t<div id="docxImportFile"></div>\n\n\t\t<h3 data-i18n="dashboards:dashboards.sections.tables"></h3>\n\n\t\t<div id="docxTableGrid" class="floatingDashboardGrid_800_px"></div>\n\t\t<div class="clearer"></div>\n\n\t\t<h3 data-i18n="dashboards:dashboards.sections.charts"></h3>\n\n\t\t<div id="docxChartGrid" class="floatingDashboardGrid_800_px"></div>\n\t\t<div class="clearer"></div>\n\t</div>\n\n\t<p></p>\n</div>'}),function(){var Q,z=[].slice;Q="#jasperLink",define("views/dashboards/dashboard/dashboard",["jquery","lodash","i18n","kendo","ui","core/api/TriState","core/api/DashboardSize","core/api/DashboardTimeUnit","core/api/DashboardOrigin","dashboard/ui/DashboardComponentUI","dashboard/ui/DashboardPerimeterUI","core/util/ObservableUtils","user/ui/UserUI","core/ui/IntegerUI","core/ui/NumberUI","core/ui/UploadUtils","core/web/WebLocation","core/web/UrlBuilder","dashboard/data/DashboardType","portfolio/data/PortfolioTransparency","text!templates/dashboards/edit/dashboard.html"],function(d,a,r,l,t,e,n,i,o,s,u,c,p,m,f,b,v,y,h,g,T){var I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$;return L=v.WebLocation,U=b.UploadUtils,R=f.NumberUI,S=m.IntegerUI,F=p.UserUI,I=s.DashboardComponentUI,w=u.DashboardPerimeterUI,_=c.ObservableUtils,A=y.UrlBuilder,O=g.PortfolioTransparency,N=t.grid,x=N.transports,e.TriState,k=n.DashboardSize,E=i.DashboardTimeUnit,C=o.DashboardOrigin,D=h.DashboardType,K=function(t,e,n){var i,a;return i=e.model,l.destroy(t),t.empty(),a={dataSource:{transport:x.createLocal({data:i.get(n)}),schema:{model:{id:"id",fields:{customId:{type:"string",nullable:!1,defaultValue:"",validation:{required:!0}},index:{type:"number",nullable:!1,defaultValue:0,validation:{required:!0}}}}},sort:{field:"index",dir:"asc"}},columns:[{command:["edit","destroy"],title:" "},{field:"customId",title:r.t("dashboards:dashboards.fields.customId")},S.column({field:"index",title:r.t("dashboards:dashboards.fields.index")})],toolbar:["create"],pageable:N.defaultPageable(),scrollable:!1},N.withDefaults(a),t.kendoGrid(a),null},V=function(t){var e,n;return e=t.model,n={dataSource:{transport:x.createLocal({data:e.get("components")}),schema:{model:{id:"id",fields:{component:{nullable:!0,validation:{required:!0}},priority:{type:"number",defaultValue:1,validation:{required:!0}},size:{type:"number",defaultValue:1},newLine:{type:"boolean",defaultValue:!1},pageBreak:{type:"boolean",defaultValue:!1},perimeter:{nullable:!0},origin:{type:"number",nullable:!0},periodCount:{type:"number",defaultValue:0},period:{type:"number",defaultValue:1},transparency:{type:"number",nullable:!0},customId:{type:"string",nullable:!1,defaultValue:""}},componentName:function(){return _.get(this,"component.name")},perimeterName:function(){return _.get(this,"perimeter.name")}}},sort:{field:"priority",dir:"asc"}},columns:[{command:["edit","destroy"],title:" ",width:"230px"},{field:"customId",title:r.t("dashboards:dashboards.fields.customId"),width:"120px"},R.column({field:"priority",title:r.t("dashboards:dashboards.fields.priority"),width:"120px"}),I.column({field:"component",title:r.t("dashboards:dashboards.fields.component"),width:"120px"}),k.column({field:"size",title:r.t("dashboards:dashboards.fields.size"),width:"120px"}),{field:"newLine",title:r.t("dashboards:dashboards.fields.newLine"),width:"120px"},{field:"pageBreak",title:r.t("dashboards:dashboards.fields.pageBreak"),width:"120px"},w.column({field:"perimeter",title:r.t("dashboards:dashboards.fields.perimeter"),width:"120px"}),C.column({field:"origin",title:r.t("dashboards:dashboards.fields.origin"),width:"120px"}),S.column({field:"periodCount",title:r.t("dashboards:dashboards.fields.periodCount"),width:"120px"}),E.column({field:"period",title:r.t("dashboards:dashboards.fields.period"),width:"120px"}),O.optionalColumn({field:"transparency",title:r.t("dashboards:dashboards.fields.transparency"),width:"120px"})],toolbar:["create"],pageable:N.defaultPageable(),height:400,scrollable:!0},N.withDefaults(n),d("#componentGrid").kendoGrid(n)},$=function(t){var e,n;return e=t.model,n={dataSource:{transport:x.createLocal({data:e.get("users")}),schema:{model:{id:"id",fields:{user:{nullable:!0,validation:{required:!0}}},userName:function(){return _.get(this,"user.name")}}}},columns:[{command:["edit","destroy"],title:" "},F.DashboardOnly.column({field:"user",title:r.t("dashboards:dashboards.fields.user")})],toolbar:["create"],pageable:N.defaultPageable(),scrollable:!1},N.withDefaults(n),d("#userGrid").kendoGrid(n)},J=function(t,e){var n,i,a;if(n=d(Q),l.destroy(n),n.empty(),e&&(t.model,i=t.model.get("id")))return a=L.resolve("board/dashboard/jasper/source/download?"+d.param({id:i})),d("<a>").text(e).attr("href",a).prop("download","dashboard.jrxml").appendTo(n),null},B=function(t,e){return J(t,null!=e?e.name:void 0)},M=function(t){var e,n,i;if(n=d(Q),l.destroy(n),n.empty(),t.model,i=t.model.get("id"))return e={id:i},d.getJSON(L.resolve("board/dashboard/jasper/name.json"),e).done(B.bind(null,t)),null},q=function(t,e){var n,i;return i=(null!=(n=a.head(e.files))?n.name:void 0)||"",J(t,i),null},Y=function(t){var e,n,i,a,r;if(n=d("#japserImportFile"),l.destroy(n),n.empty(),e=d("<div>").appendTo(n),t.model,i=t.model.get("id"))return r={id:i},a={async:{saveUrl:"board/dashboard/jasper/upload.json?"+d.param(r),saveField:"file"},success:q.bind(null,t)},U.withDefaults(a),d("<input>").attr("type","file").appendTo(e).kendoUpload(a),null},H=function(t,e){var n,i,a;if(n=d("#docxLink"),l.destroy(n),n.empty(),e&&(t.model,i=t.model.get("id")))return a=L.resolve("board/dashboard/word/download?"+d.param({id:i})),d("<a>").text(e).attr("href",a).prop("download","dashboard.docx").appendTo(n),null},G=function(t,e){return H(t,null!=e?e.name:void 0)},P=function(t){var e,n,i;if(n=d("#docxLink"),l.destroy(n),n.empty(),t.model,i=t.model.get("id"))return e={id:i},d.getJSON(L.resolve("board/dashboard/word/name.json"),e).done(G.bind(null,t)),null},j=function(t,e){var n,i;return i=(null!=(n=a.head(e.files))?n.name:void 0)||"",H(t,i),null},W=function(t){var e,n,i,a,r,o;if(n=d("#docxImportFile"),l.destroy(n),n.empty(),e=d("<div>").appendTo(n),t.model,i=t.model.get("id"))return o={id:i},r="board/dashboard/word/upload.json?"+d.param(o),a={async:{saveUrl:L.resolve(r),saveField:"file"},success:j.bind(null,t)},U.withDefaults(a),d("<input>").attr("type","file").appendTo(e).kendoUpload(a),null},{getTemplates:function(){return{view:T}},createRawModel:function(){return{id:0,sid:"",type:0,name:"",currency:null,active:!0,perimeter:null,description:"",transparency:O.NO_TRANSPARENCY,mail:null,portal:!1,style:null,components:[],users:[],xmlDate:null,xmlAsset:null,xmlFund:null,xmlPerimeter:null,xmlMainEntity:null,xmlSecondaryEntity:null,assetFilterCategories:[],tableLinks:[],chartLinks:[],recipientDocumentType:null,isAsset:function(){return this.get("type")===D.ASSET},isFund:function(){return this.get("type")===D.FUND},isPerimeter:function(){return this.get("type")===D.PERIMETER},isEntities:function(){return this.get("type")===D.ENTITIES},xmlName:function(){return this.get("name")+".xml"},xmlLink:function(){var t;return t={dashboard:this.get("id"),date:this.get("xmlDate"),asset:this.get("xmlAsset"),fund:this.get("xmlFund"),perimeter:this.get("xmlPerimeter"),entity1:this.get("xmlMainEntity"),entity2:this.get("xmlSecondaryEntity")},A.from("board/engine.xml").add("type",this.get("type")).add("data",JSON.stringify(t)).build()}}},updateModel:function(t,e){var n,i,a,r,o,d,l,s,u,c,p,m,f;for(t.set("id",e.id),t.set("sid",e.sid),t.set("type",e.type),t.set("name",e.name),t.set("currency",e.currency),t.set("active",e.active),t.set("description",e.description),t.set("perimeter",e.perimeter),t.set("transparency",e.transparency),t.set("mail",e.mail),t.set("portal",e.portal),t.set("style",e.style),t.set("recipientDocumentType",e.recipientDocumentType),(a=t.get("components")).splice(0,a.length),o=0,l=(u=e.components).length;o<l;o++)i=u[o],a.push(i);for((f=t.get("users")).splice(0,f.length),d=0,s=(c=e.users).length;d<s;d++)m=c[d],f.push(m);return(r=t.get("assetFilterCategories")).splice.apply(r,[0,r.length].concat(z.call(e.assetFilterCategories))),(p=t.get("tableLinks")).splice.apply(p,[0,p.length].concat(z.call(e.tableLinks))),(n=t.get("chartLinks")).splice.apply(n,[0,n.length].concat(z.call(e.chartLinks))),t.set("xmlDate",null),null},viewShow:function(t){return Y(t),M(t),W(t),P(t),null},init:function(t){return V(t),$(t),K(d("#docxTableGrid"),t,"tableLinks"),K(d("#docxChartGrid"),t,"chartLinks"),null}}})}.call(this),define("dashboard/repository/DashboardStyleRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardStyleRepository=void 0;var i=function(){function t(){}return t.list=function(){return n.WebHttp.getJson("board/style/list.json")},t.fetchIdentifiables=function(){return n.WebHttp.getJson("board/style/id/list.json")},t}();e.DashboardStyleRepository=i}),define("dashboard/ui/DashboardStyleUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","../repository/DashboardStyleRepository"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardStyleUI=void 0;var r=function(){function t(){}return t.widget=n.IdWidgetUtils.createDropList("DomosDashboardStyle",a.DashboardStyleRepository,!0),t.column=i.IdentifiableColumnUtils.createFactory(t.widget),t}();e.DashboardStyleUI=r}),function(){define("views/dashboards/dashboard/edit.dashboard",["i18n","site","views/edit/edit","core/data/SiteCategories","views/dashboards/dashboard/dashboard","dashboard/ui/DashboardStyleUI"],function(t,e,i,n,a){var r,o,d,l,s,u,c,p,m,f;return o=e.router,r=e.map,d=n.SiteCategories,p=function(t){return t.create(a)},f=function(t){var e;return(e=t.module)&&e.viewShow&&e.viewShow(t),null},c=function(){return{siteCategory:d.dashboards,key:"dashboardDashboardEdit",rootId:"dashboardDashboardRoot",actionsId:"dashboardDashboardActions",url:"board/dashboard.json",viewShow:f,getView:p}},u=function(){var t;return t=c(),i.create(t)},s=function(n){var t;return(t=c()).createGetParameters=function(t){var e;return e={},t&&(e.id=t),e.clone=n,e},i.create(t)},m=function(t){return u().display(t)},l=function(t){return s(t).display()},{init:function(){return o.addRoute(r.dashboardDashboardEdit,m),o.addRoute(r.dashboardDashboardClone,l)}}})}.call(this),define("core/api/FeeType",["require","exports","lodash","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils","i18n"],function(t,e,n,i,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeeType=void 0;var d,l,s="history:FeeType";(d=e.FeeType||(e.FeeType={}))[d.MANAGEMENT=1]="MANAGEMENT",d[d.OLD_TRANSACTION=2]="OLD_TRANSACTION",d[d.PERFORMANCE=3]="PERFORMANCE",d[d.OTHER=4]="OTHER",d[d.ACCOUNTANT=5]="ACCOUNTANT",d[d.AUDIT=6]="AUDIT",d[d.DEPOSITARY=7]="DEPOSITARY",d[d.TRANSACTION=8]="TRANSACTION",d[d.COMMISSION=9]="COMMISSION",d[d.FORMATION=10]="FORMATION",d[d.TRANSACTION_NOT_DONE=11]="TRANSACTION_NOT_DONE",d[d.CATCH_UP_MANAGEMENT=12]="CATCH_UP_MANAGEMENT",d[d.ADVISORY=13]="ADVISORY",d[d.DIVIDEND=14]="DIVIDEND",d[d.INTEREST=15]="INTEREST",d[d.OTHER_INCOME=16]="OTHER_INCOME",d[d.USER_DEFINED=17]="USER_DEFINED",d[d.DIVIDEND_PAID=18]="DIVIDEND_PAID",d[d.CAPITAL_PAID=19]="CAPITAL_PAID",d[d.INTEREST_PAID=20]="INTEREST_PAID",d[d.COMMISSION_PAID=21]="COMMISSION_PAID",d[d.DRAW_DOWN=22]="DRAW_DOWN",(l=e.FeeType||(e.FeeType={})).getName=r.EnumUtils.createNameFn(s,l),l.widget=a.EnumWidgetUtils.createDropList("DomosFeeType",l,!1),l.column=i.EnumColumnUtils.createFactory(l,l.widget),l.list=function(){return r.EnumUtils.list(l)},l.getFeeName=function t(e){return n.isNumber(e)?t(l[e]):n.isString(e)?o.I18N.t(s+".names."+e):void 0}}),define("core/api/HistorySubscriptionType",["require","exports","core/util/EnumUtils"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HistorySubscriptionType=void 0;var i,a;(i=e.HistorySubscriptionType||(e.HistorySubscriptionType={}))[i.SUBSCRIPTION=1]="SUBSCRIPTION",i[i.REDEMPTION=2]="REDEMPTION",i[i.CAPITAL_CALL=3]="CAPITAL_CALL",i[i.NAV_DISTRIBUTION=4]="NAV_DISTRIBUTION",i[i.PURCHASE=5]="PURCHASE",(a=e.HistorySubscriptionType||(e.HistorySubscriptionType={})).getName=n.EnumUtils.createNameFn("history:HistorySubscriptionType",a),a.list=function(){return n.EnumUtils.list(a)}}),define("history/ui/HistoryUI",["require","exports","lodash","history/data/Histories","core/ui/grid/column/ColumnUtils","core/api/FeeType","core/api/HistorySubscriptionType"],function(t,e,r,n,o,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d={filterable:{multi:!(e.HistoryUI=void 0)}};function l(t,e){var n={autoWidth:!0,dataSource:{data:t,schema:{model:{id:"value",fields:{value:{type:"string"},text:{type:"string"}}}},sort:{field:"text",dir:"asc"}},dataTextField:"text",dataValueField:"value",valuePrimitive:!0};return e&&(n.optionLabel="--"),function(t){return t.kendoDropDownList(n)}}function s(i,a){return function(t){var e=i();t.values||(t.values=e);var n=l(e,a);return o.ColumnUtils.addEditor(t,function(t){return n(t)}),r.defaults(t,d)}}function u(){return r.map(n.Histories.list(),function(t){return{text:t.name,value:t.key}})}function c(){var t=u(),e=r.map(i.FeeType.list(),function(t){return{text:i.FeeType.getFeeName(t)||"",value:i.FeeType[t]}});t.push.apply(t,e);var n=r.map(a.HistorySubscriptionType.list(),function(t){return{text:a.HistorySubscriptionType.getName(t)||"",value:a.HistorySubscriptionType[t]}});return t.push.apply(t,n),t}var p=function(){function t(){}return t.column=s(u,!1),t.optionalColumn=s(u,!0),t.optionalWidget=l(u(),!0),t.WithFees={column:s(c,!1),optionalColumn:s(c,!0)},t}();e.HistoryUI=p}),define("core/api/PerimeterScope",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PerimeterScope=void 0;var r,o;(r=e.PerimeterScope||(e.PerimeterScope={}))[r.VEHICLES=1]="VEHICLES",r[r.ASSETS=2]="ASSETS",r[r.FUND_SHARES=3]="FUND_SHARES",(o=e.PerimeterScope||(e.PerimeterScope={})).getName=a.EnumUtils.createNameFn("dashboards:perimeterScopes",o),o.widget=i.EnumWidgetUtils.createDropList("DomosPerimeterScope",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/ComputationAggregation",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComputationAggregation=void 0;var r,o;(r=e.ComputationAggregation||(e.ComputationAggregation={}))[r.SUM=1]="SUM",r[r.MIN=2]="MIN",r[r.MAX=3]="MAX",r[r.ABSOLUTE_MIN=4]="ABSOLUTE_MIN",r[r.ABSOLUTE_MAX=5]="ABSOLUTE_MAX",r[r.AVERAGE=6]="AVERAGE",r[r.MARKET_VALUE_AVERAGE=7]="MARKET_VALUE_AVERAGE",(o=e.ComputationAggregation||(e.ComputationAggregation={})).getName=a.EnumUtils.createNameFn("computation:aggregations",o),o.widget=i.EnumWidgetUtils.createDropList("DomosComputationAggregation",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("object/ui/ObjectCategoryUtilsUI",["require","exports","tslib","lodash","kendo","../data/ObjectCategories","core/ui/widget/Plugin","core/util/StringUtils","core/ui/binder/MultiValueBinder","core/ui/grid/column/ColumnUtils"],function(t,e,r,l,o,s,d,u,c,p){"use strict";function m(n){return{transport:{read:function(t){var e=l.map(n,function(t){return l.pick(t,"id","name")});t.success(e)}},schema:{model:{id:"id",fields:{id:{type:"number"},name:{type:"string"}}}},sort:{field:"name",dir:"asc"}}}function f(t,e,n){return e["kendo"+t](n)}function b(t,e,n){return e["kendo"+t](n)}function v(t,e){if(!t||!l.has(t,e))return"";var n=t[e];return n?l.chain(n).map(function(t){return s.ObjectCategories.getName(t)}).filter(function(t){return!!t}).sortBy().join(", ").value():""}Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectCategoryUtilsUI=void 0;var n=function(){function t(){}return t.createWidget=function(n,t){var e,i,a;return e=n,i={autoWidth:!0,dataSource:m(t),dataTextField:"name",dataValueField:"id",valuePrimitive:!0,name:e},a=function(n){function t(t,e){return n.call(this,t,e)||this}return r.__extends(t,n),t}(o.ui.DropDownList),d.Plugin.plugin(a,o.ui.DropDownList,i),function(t,e){return f(n,t,e)}},t.createMultiWidget=function(n,t){var e,i,a;return e=n,i={autoWidth:!0,dataSource:m(t),dataTextField:"name",dataValueField:"id",valuePrimitive:!0,name:e},a=function(n){function t(t,e){return n.call(this,t,e)||this}return r.__extends(t,n),t}(o.ui.MultiSelect),d.Plugin.plugin(a,o.ui.MultiSelect,i),function(t,e){return b(n,t,e)}},t.createColumn=function(o,d){return function(t,e){return n=o,i=d,r=e,(a=t).values=l.map(i,function(t){return{text:t.name,value:t.id}}),a.filterable={multi:!0},a.sortable={compare:function(t,e){var n=s.ObjectCategories.get(t),i=s.ObjectCategories.get(e),a=n?n.name:"",r=i?i.name:"";return u.StringUtils.compare(a,r)}},p.ColumnUtils.addEditor(a,function(t){return f(n,t,r)});var n,i,a,r}},t.createMultiColumn=function(o){return function(t,e){return i=o,a=e,(r=(n=t).field)&&(n.template=function(t){return v(t,r)},n.sortable={compare:function(t,e){var n=v(t,r),i=v(e,r);return u.StringUtils.compare(n,i)}},n.filterable=!1,n.groupable=!1,n.editor=function(t,e){if(e.field){var n=$("<select>").attr("data-bind",c.kMultiValueBinding+": "+e.field).appendTo(t);b(i,n,a)}}),n;var i,n,a,r}},t}();e.ObjectCategoryUtilsUI=n}),define("object/ui/AssetCategoryUI",["require","exports","../data/ObjectCategories","./ObjectCategoryUtilsUI"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AssetCategoryUI=void 0;var a=n.ObjectCategories.assets.finals(),r="DomosAssetCategory",o="DomosAssetCategoryMultiSelect";e.AssetCategoryUI={widget:i.ObjectCategoryUtilsUI.createWidget(r,a),column:i.ObjectCategoryUtilsUI.createColumn(r,a),widgetMulti:i.ObjectCategoryUtilsUI.createMultiWidget(o,a),columnMulti:i.ObjectCategoryUtilsUI.createMultiColumn(o)}}),define("risk/repository/RiskIndicatorRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RiskIndicatorRepository=void 0;var i=function(){function t(){}return t.fetchIdentifiables=function(){return n.WebHttp.getJson("risk/indicator/id/list.json")},t.fetchAssetIdentifiables=function(){return n.WebHttp.getJson("risk/indicator/asset/id/list.json")},t.fetchPorfolioColumnIdentifiables=function(){return n.WebHttp.getJson("risk/indicator/portfolio/column/id/list.json")},t}();e.RiskIndicatorRepository=i}),define("risk/ui/RiskIndicatorUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","risk/repository/RiskIndicatorRepository","core/web/WebLocation"],function(t,e,n,i,a,r){"use strict";function o(t){return r.WebLocation.resolveKendo("/risk/indicator/edit/"+t)}Object.defineProperty(e,"__esModule",{value:!0}),e.RiskIndicatorUI=void 0;var d=function(){function t(){}return t.widget=n.IdWidgetUtils.createDropList("DomosRiskIndicator",a.RiskIndicatorRepository.fetchIdentifiables,!0),t.column=i.IdentifiableColumnUtils.createFactory(t.widget,o),t}();e.RiskIndicatorUI=d}),define("text!templates/dashboards/edit/component.object.html",[],function(){return'<div id="dashboardComponentRoot">\n    <h1 data-i18n="dashboards:components.OBJECT.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:components.OBJECT.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardComponentActions"></div>\n\n    <h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" class="k-textbox" type="text" data-bind="value: sid"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="dashboards:components.fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]risk:validation.nameRequired"/>\n            </td>\n            <td>\n                <label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n            </td>\n            <td>\n                <input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="chart" data-i18n="dashboards:components.fields.chart"></label>\n            </td>\n            <td>\n                <input id="chart" data-role="domoscharthistoricaltype" data-bind="value: chart"/>\n            </td>\n            <td>\n                <label for="stack" data-i18n="dashboards:components.fields.stack"></label>\n            </td>\n            <td>\n                <input id="stack" type="checkbox" data-bind="checked: stack"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="timeUnit" data-i18n="dashboards:components.fields.timeUnit"></label>\n            </td>\n            <td>\n                <input id="timeUnit" data-role="domosdashboardtimeunit" data-bind="value: timeUnit"/>\n            </td>\n            <td>\n                <label for="timeUnitCount" data-i18n="dashboards:components.fields.timeUnitCount"></label>\n            </td>\n            <td>\n                <input id="timeUnitCount" name="Count" data-role="numerictextbox" data-min="0" data-max="100" data-bind="value: timeUnitCount" required/>\n            </td>\n        </tr>\n        <tr>\n            <td></td>\n            <td></td>\n            <td>\n                <label for="dayRolling" data-i18n="dashboards:components.fields.dayRolling"></label>\n            </td>\n            <td>\n                <input id="dayRolling"  data-role="numerictextbox" data-format="n0" data-bind="value: dayRolling"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="dashboards:components.fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n            </td>\n        </tr>\n    </table>\n\n    <div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n    <h2 data-i18n="dashboards:components.sections.parameters"></h2>\n\n    <div id="dashboardObjectParameterGrid" class="floatingGrid"></div>\n    <div class="clearer"></div>\n\n</div>\n\n\n\n'}),function(){define("views/dashboards/component/object/component",["jquery","lodash","kendo","i18n","ui","history/ui/HistoryUI","core/api/PerimeterScope","core/api/ComputationAggregation","object/ui/AssetCategoryUI","core/api/DashboardComponentType","core/util/ObservableUtils","risk/ui/RiskIndicatorUI","tag/ui/TagDefinitionUI","core/ui/NumberUI","dashboard/component/views/DashboardComponentGrid","text!templates/dashboards/edit/component.object.html","basic/ui/CurrencyUI"],function(a,t,r,o,e,n,i,d,l,s,u,c,p,m,f,b){var v,y,h,g,T,I,C,w,k,E,D,S,N;return w=m.NumberUI,v=l.AssetCategoryUI,T=n.HistoryUI,k=u.ObservableUtils,D=c.RiskIndicatorUI,E=i.PerimeterScope,y=d.ComputationAggregation,g=s.DashboardComponentType,S=p.TagDefinitionUI,h=f.DashboardComponentGrid,I=e.grid,C=I.transports,N=function(t){var e,n,i;return e=a("#dashboardObjectParameterGrid"),r.destroy(e),e.empty(),n=t.model,i={dataSource:{transport:C.createLocal({data:n.get("objects")}),schema:{model:{id:"id",fields:{priority:{type:"number",defaultValue:1,validation:{required:!0}},history:{type:"string",nullable:!0},tagDefinition:{nullable:!0},riskIndicator:{nullable:!0},aggregation:{type:"number",defaultValue:1},scope:{type:"number",defaultValue:1},aggregateScope:{type:"boolean",defaultValue:!0},filterCategory:{type:"number",nullable:!0}},tagDefinitionName:function(){return k.get(this,"tagDefinition.name")},riskIndicatorName:function(){return k.get(this,"riskIndicator.name")}}},sort:{field:"priority",dir:"asc"}},columns:[{command:["edit","destroy"],title:" "},w.column({field:"priority",title:o.t("dashboards:components.fields.priority")}),E.column({field:"scope",title:o.t("dashboards:components.fields.scope")}),v.column({field:"filterCategory",title:o.t("dashboards:components.fields.filterCategory")},{optionLabel:"--"}),T.WithFees.optionalColumn({field:"history",title:o.t("dashboards:components.fields.history")}),S.Computation.column({field:"tagDefinition",title:o.t("dashboards:components.fields.tagDefinition")}),D.column({field:"riskIndicator",title:o.t("dashboards:components.fields.riskIndicator")}),y.column({field:"aggregation",title:o.t("dashboards:components.fields.aggregation")}),{field:"aggregateScope",title:o.t("dashboards:components.fields.aggregateScope")}],toolbar:["create"],pageable:I.defaultPageable(),scrollable:!1},I.withDefaults(i),e.kendoGrid(i)},{updateValidatorOptions:function(t,e){return e},getTemplates:function(){return{view:b}},createRawModel:function(){return{id:0,sid:"",type:g.OBJECT,name:"",currency:null,stack:!1,chart:0,timeUnit:0,timeUnitCount:0,description:"",dayRolling:null,objects:[]}},updateModel:function(t,e){var n,i,a,r,o;for(t.set("id",e.id),t.set("sid",e.sid),t.set("type",e.type),t.set("name",e.name),t.set("currency",e.currency),t.set("stack",e.stack),t.set("chart",e.chart),t.set("timeUnit",e.timeUnit),t.set("timeUnitCount",e.timeUnitCount),t.set("description",e.description),t.set("dayRolling",e.dayRolling),(r=t.get("objects")).splice(0,r.length),n=0,i=(o=e.objects).length;n<i;n++)a=o[n],r.push(a);return null},init:function(t){var e;return N(t),e=t.object,h.setup(a("#dashboardComponentGrid"),e.id),null}}})}.call(this),define("core/api/CentralBank",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CentralBank=void 0;var r,o;(r=e.CentralBank||(e.CentralBank={}))[r.ECB=1]="ECB",r[r.FED=2]="FED",r[r.PYG=3]="PYG",(o=e.CentralBank||(e.CentralBank={})).getName=a.EnumUtils.createNameFn("data:CentralBank",o),o.widget=i.EnumWidgetUtils.createDropList("DomosCentralBank",o,!1,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("text!templates/dashboards/edit/component.currency.html",[],function(){return'<div id="dashboardComponentRoot">\n    <h1 data-i18n="dashboards:components.CURRENCY.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:components.CURRENCY.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardComponentActions"></div>\n\n    <h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" class="k-textbox" type="text" data-bind="value: sid"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="dashboards:components.fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]risk:validation.nameRequired"/>\n            </td>\n            <td>\n                <label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n            </td>\n            <td>\n                <input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="chart" data-i18n="dashboards:components.fields.chart"></label>\n            </td>\n            <td>\n                <input id="chart" data-role="domoscharthistoricaltype" data-bind="value: chart"/>\n            </td>\n            <td>\n                <label for="stack" data-i18n="dashboards:components.fields.stack"></label>\n            </td>\n            <td>\n                <input id="stack" type="checkbox" data-bind="checked: stack"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="timeUnit" data-i18n="dashboards:components.fields.timeUnit"></label>\n            </td>\n            <td>\n                <input id="timeUnit" data-role="domosdashboardtimeunit" data-bind="value: timeUnit"/>\n            </td>\n            <td>\n                <label for="timeUnitCount" data-i18n="dashboards:components.fields.timeUnitCount"></label>\n            </td>\n            <td>\n                <input id="timeUnitCount" name="Count" data-role="numerictextbox" data-min="0" data-max="50" data-bind="value: timeUnitCount" required/>\n            </td>\n        </tr>\n        <tr>\n            <td></td>\n            <td></td>\n            <td>\n                <label for="dayRolling" data-i18n="dashboards:components.fields.dayRolling"></label>\n            </td>\n            <td>\n                <input id="dayRolling"  data-role="numerictextbox" data-format="n0" data-bind="value: dayRolling"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="dashboards:components.fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n            </td>\n        </tr>\n    </table>\n    <div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n    <h2 data-i18n="dashboards:components.sections.currencies"></h2>\n\n    <div id="dashboardCurrencyGrid" class="floatingGrid"></div>\n    <div class="clearer"></div>\n</div>\n\n\n\n'}),function(){define("views/dashboards/component/currency/component",["jquery","lodash","kendo","i18n","ui","basic/ui/CurrencyUI","core/api/CentralBank","core/api/DashboardComponentType","core/ui/NumberUI","dashboard/component/views/DashboardComponentGrid","text!templates/dashboards/edit/component.currency.html"],function(i,t,e,a,n,r,o,d,l,s,u){var c,p,m,f,b,v,y,h;return y=l.NumberUI,p=r.CurrencyUI,f=d.DashboardComponentType,m=s.DashboardComponentGrid,b=n.grid,v=b.transports,c=o.CentralBank,h=function(t){var e,n;return e=t.model,n={dataSource:{transport:v.createLocal({data:e.get("currencies")}),schema:{model:{id:"id",fields:{currency:{type:"number",validation:{required:!0},defaultValue:978},quota:{type:"number",defaultValue:1,validation:{required:!0}},bank:{type:"number",nullable:!0,defaultValue:null}}}}},columns:[{command:["edit","destroy"],title:" "},p.column({field:"currency",title:a.t("dashboards:components.fields.currency")}),y.column({field:"quota",title:a.t("dashboards:components.fields.quota")}),c.column({field:"bank",title:a.t("dashboards:components.fields.bank")})],toolbar:["create"],pageable:b.defaultPageable(),scrollable:!1},b.withDefaults(n),i("#dashboardCurrencyGrid").kendoGrid(n)},{updateValidatorOptions:function(t,e){return e},getTemplates:function(){return{view:u}},createRawModel:function(){return{id:0,sid:"",type:f.CURRENCY,name:"",currency:null,chart:0,stack:!1,timeUnit:0,timeUnitCount:0,description:"",dayRolling:null,currencies:[]}},updateModel:function(t,e){var n,i,a,r,o;for(t.set("id",e.id),t.set("sid",e.sid),t.set("type",e.type),t.set("name",e.name),t.set("currency",e.currency),t.set("chart",e.chart),t.set("stack",e.stack),t.set("timeUnit",e.timeUnit),t.set("timeUnitCount",e.timeUnitCount),t.set("description",e.description),t.set("dayRolling",e.dayRolling),(n=t.get("currencies")).splice(0,n.length),a=0,r=(o=e.currencies).length;a<r;a++)i=o[a],n.push(i);return null},init:function(t){var e;return h(t),e=t.object,m.setup(i("#dashboardComponentGrid"),e.id),null}}})}.call(this),define("core/api/DataCriteria",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataCriteria=void 0;var r,o;(r=e.DataCriteria||(e.DataCriteria={}))[r.CURRENCY=1]="CURRENCY",r[r.COUNTRY=2]="COUNTRY",r[r.MARKET=3]="MARKET",r[r.SUB_ASSET_TYPE=4]="SUB_ASSET_TYPE",r[r.GEOGRAPHICAL_FOCUS=5]="GEOGRAPHICAL_FOCUS",r[r.CATEGORY=6]="CATEGORY",r[r.TAG=7]="TAG",r[r.INVESTMENT=9]="INVESTMENT",(o=e.DataCriteria||(e.DataCriteria={})).getName=a.EnumUtils.createNameFn("computation:DataCriteria",o),o.widget=i.EnumWidgetUtils.createDropList("DomosComputationDataCriterion",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget),o.widgetMulti=i.EnumWidgetUtils.createMultiSelect("DomosComputationDataCriterionMultiSelect",o),o.columnMulti=n.EnumColumnUtils.createMultiFactory(o,o.widgetMulti),o.getDefault=function(){return o.CURRENCY}}),define("core/api/ComputationGrouping",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComputationGrouping=void 0;var r,o;(r=e.ComputationGrouping||(e.ComputationGrouping={}))[r.DATA=1]="DATA",r[r.TAG=2]="TAG",(o=e.ComputationGrouping||(e.ComputationGrouping={})).getName=a.EnumUtils.createNameFn("computation:grouping",o),o.widget=i.EnumWidgetUtils.createDropList("DomosComputationGrouping",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("text!templates/dashboards/edit/component.group.by.html",[],function(){return'<div id="dashboardComponentRoot">\n\t<h1 data-i18n="dashboards:components.GROUP_BY.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="dashboards:components.GROUP_BY.edit" data-bind="invisible: isNew"></h1>\n\n\t<div id="dashboardComponentActions"></div>\n\n\t<h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="sid" class="k-textbox" type="text" data-bind="value: sid"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="name" data-i18n="dashboards:components.fields.name"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]risk:validation.nameRequired"/>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="chart" data-i18n="dashboards:components.fields.chart"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="chart" data-role="domoscharttype" data-bind="value: chart"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="perObject" data-i18n="dashboards:components.fields.perObject"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="perObject" type="checkbox" data-bind="checked: perObject"/>\n\t\t\t</td>\n\t\t\t<td data-bind="visible: hasStack">\n\t\t\t\t<label for="stack" data-i18n="dashboards:components.fields.stack"></label>\n\t\t\t</td>\n\t\t\t<td data-bind="visible: hasStack">\n\t\t\t\t<input id="stack" type="checkbox" data-bind="checked: stack"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="method" data-i18n="dashboards:components.fields.method"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="method" data-role="domoscomputationmethod" data-bind="value: method"/>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="aggregation" data-i18n="dashboards:components.fields.aggregation"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="aggregation" data-role="domoscomputationaggregation" data-bind="value: aggregation"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="grouping" data-i18n="dashboards:components.fields.grouping"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="grouping" data-role="domoscomputationgrouping" data-bind="value: grouping"/>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="criterion" data-i18n="dashboards:components.fields.dataCriterion" data-bind="visible: isCriterion"></label>\n\t\t\t\t<label for="tagDefinition" data-i18n="dashboards:components.fields.tagDefinition" data-bind="invisible: isCriterion"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="criterion" data-role="domoscomputationdatacriterion" data-bind="value: dataCriterion, visible: isCriterion"/>\n\t\t\t\t<input id="tagDefinition" data-role="domostagdefinitionforgrouping" data-bind="value: tagDefinition, invisible: isCriterion"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="filterCategory" data-i18n="dashboards:components.fields.filterCategory"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="filterCategory" data-role="domosassetcategorymultiselect" data-bind="value: filterCategories"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="description" data-i18n="dashboards:components.fields.description"></label>\n\t\t\t</td>\n\t\t\t<td colspan="3">\n\t\t\t\t<textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n\t<div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n</div>\n\n\n\n'}),function(){var h=[].slice;define("views/dashboards/component/group/component",["jquery","lodash","kendo","i18n","ui","core/api/DataCriteria","core/api/ComputationAggregation","core/api/ComputationGrouping","core/api/DashboardComponentType","core/api/ChartType","dashboard/component/views/DashboardComponentGrid","text!templates/dashboards/edit/component.group.by.html","basic/ui/CurrencyUI","core/api/ComputationMethod","object/ui/AssetCategoryUI","tag/ui/TagDefinitionUI"],function(n,t,e,i,a,r,o,d,l,s,u,c){var p,m,f,b,v,y;return y=r.DataCriteria,m=o.ComputationAggregation,f=d.ComputationGrouping,v=l.DashboardComponentType,p=s.ChartType,b=u.DashboardComponentGrid,{updateValidatorOptions:function(t,e){return e},getTemplates:function(){return{view:c}},createRawModel:function(){return{id:0,sid:"",type:v.GROUP_BY,name:"",currency:null,chart:0,method:0,grouping:0,dataCriterion:y.getDefault(),tagDefinition:null,aggregation:m.SUM,perObject:!1,stack:!1,description:"",filterCategories:[],hasStack:function(){return this.get("perObject")&&this.get("chart")!==p.PIE&&this.get("chart")!==p.WATERFALL},isCriterion:function(){return this.get("grouping")===f.DATA}}},updateModel:function(t,e){var n;return t.set("id",e.id),t.set("sid",e.sid),t.set("type",e.type),t.set("name",e.name),t.set("currency",e.currency),t.set("chart",e.chart),t.set("method",e.method),t.set("grouping",e.grouping),t.set("dataCriterion",e.dataCriterion),t.set("tagDefinition",e.tagDefinition),t.set("aggregation",e.aggregation),t.set("perObject",e.perObject),t.set("stack",e.stack),t.set("description",e.description),(n=t.get("filterCategories")).splice.apply(n,[0,n.length].concat(h.call(e.filterCategories))),null},init:function(t){var e;return e=t.object,b.setup(n("#dashboardComponentGrid"),e.id),null}}})}.call(this),define("data/repository/IndexRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IndexRepository=void 0;var i=function(){function t(){}return t.fetchIdentifiables=function(){return n.WebHttp.getJson("index/id/list.json")},t}();e.IndexRepository=i}),define("data/ui/IndexUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","data/repository/IndexRepository"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IndexUI=void 0;var r=function(){function t(){}return t.widget=n.IdWidgetUtils.createDropList("DomosIndex",a.IndexRepository,!0),t.column=i.IdentifiableColumnUtils.createFactory(t.widget),t}();e.IndexUI=r}),define("text!templates/dashboards/edit/component.index.html",[],function(){return'<div id="dashboardComponentRoot">\n    <h1 data-i18n="dashboards:components.INDEX.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:components.INDEX.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardComponentActions"></div>\n\n    <h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" class="k-textbox" type="text" data-bind="value: sid"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="dashboards:components.fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]risk:validation.nameRequired"/>\n            </td>\n            <td>\n                <label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n            </td>\n            <td>\n                <input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="chart" data-i18n="dashboards:components.fields.chart"></label>\n            </td>\n            <td>\n                <input id="chart" data-role="domoscharthistoricaltype" data-bind="value: chart"/>\n            </td>\n            <td>\n                <label for="stack" data-i18n="dashboards:components.fields.stack"></label>\n            </td>\n            <td>\n                <input id="stack" type="checkbox" data-bind="checked: stack"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="timeUnit" data-i18n="dashboards:components.fields.timeUnit"></label>\n            </td>\n            <td>\n                <input id="timeUnit" data-role="domosdashboardtimeunit" data-bind="value: timeUnit"/>\n            </td>\n            <td>\n                <label for="timeUnitCount" data-i18n="dashboards:components.fields.timeUnitCount"></label>\n            </td>\n            <td>\n                <input id="timeUnitCount" name="Count" data-role="numerictextbox" data-min="0" data-max="50" data-bind="value: timeUnitCount" required/>\n            </td>\n        </tr>\n        <tr>\n            <td></td>\n            <td></td>\n            <td>\n                <label for="dayRolling" data-i18n="dashboards:components.fields.dayRolling"></label>\n            </td>\n            <td>\n                <input id="dayRolling"  data-role="numerictextbox" data-format="n0" data-bind="value: dayRolling"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="dashboards:components.fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n            </td>\n        </tr>\n    </table>\n\n    <div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n    <h2 data-i18n="dashboards:components.sections.indices"></h2>\n\n    <div id="dashboardIndexGrid" class="floatingGrid"></div>\n    <div class="clearer"></div>\n</div>\n\n\n\n'}),function(){define("views/dashboards/component/index/component",["jquery","lodash","kendo","i18n","ui","core/api/DashboardComponentType","core/util/ObservableUtils","data/ui/IndexUI","dashboard/component/views/DashboardComponentGrid","text!templates/dashboards/edit/component.index.html","basic/ui/CurrencyUI"],function(i,t,e,a,n,r,o,d,l,s){var u,c,p,m,f,b,v;return c=r.DashboardComponentType,b=o.ObservableUtils,p=d.IndexUI,u=l.DashboardComponentGrid,m=n.grid,f=m.transports,v=function(t){var e,n;return e=t.model,n={dataSource:{transport:f.createLocal({data:e.get("indices")}),schema:{model:{id:"id",fields:{index:{nullable:!0,validation:{required:!0}}},indexName:function(){return b.get(this,"index.name")}}}},columns:[{command:["edit","destroy"],title:" "},p.column({field:"index",title:a.t("dashboards:components.fields.index")})],toolbar:["create"],pageable:m.defaultPageable(),scrollable:!1},m.withDefaults(n),i("#dashboardIndexGrid").kendoGrid(n)},{updateValidatorOptions:function(t,e){return e},getTemplates:function(){return{view:s}},createRawModel:function(){return{id:0,sid:"",type:c.INDEX,name:"",currency:null,chart:0,stack:!1,timeUnit:0,timeUnitCount:0,description:"",dayRolling:null,indices:[]}},updateModel:function(t,e){var n,i,a,r,o;for(t.set("id",e.id),t.set("sid",e.sid),t.set("type",e.type),t.set("name",e.name),t.set("currency",e.currency),t.set("chart",e.chart),t.set("stack",e.stack),t.set("timeUnit",e.timeUnit),t.set("timeUnitCount",e.timeUnitCount),t.set("description",e.description),t.set("dayRolling",e.dayRolling),(a=t.get("indices")).splice(0,a.length),n=0,r=(o=e.indices).length;n<r;n++)i=o[n],a.push(i);return null},init:function(t){var e;return v(t),e=t.object,u.setup(i("#dashboardComponentGrid"),e.id),null}}})}.call(this),define("risk/ui/RiskAssetIndicatorUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","risk/repository/RiskIndicatorRepository"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RiskAssetIndicatorUI=void 0;var r=function(){function t(){}return t.widget=n.IdWidgetUtils.createDropList("DomosRiskAssetIndicator",a.RiskIndicatorRepository.fetchAssetIdentifiables,!0),t.listBoxwidget=n.IdWidgetUtils.createListBox("DomosRiskAssetIndicatorListBox",a.RiskIndicatorRepository.fetchAssetIdentifiables),t.column=i.IdentifiableColumnUtils.createFactory(t.widget),t}();e.RiskAssetIndicatorUI=r}),define("text!templates/dashboards/component/portfolio/portfolio.column.edit.window.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="portfolioComponentColumnType"\n\t\t\t\t\tdata-i18n="dashboards:components.portfolioComponentColumnType"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="portfolioComponentColumnType" data-role="domosportfoliocomponentcolumntype"\n\t\t\t\t\tdata-bind="value:type" />\n\t\t\t</td>\n\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="PortfolioViewerColumn" data-i18n="dashboards:components.portfolioColumn"\n\t\t\t\t\tdata-bind="visible:isPortfolio"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="PortfolioViewerColumn" data-role="domosportfolioviewercolumnstandard"\n\t\t\t\t\tdata-bind="value:column, visible:isPortfolio" />\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="tagDefinition" data-i18n="dashboards:components.fields.tagDefinition"\n\t\t\t\t\tdata-bind="visible:isTagDefinition"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="tagDefinition" data-role="domostagdefinition"\n\t\t\t\t\tdata-bind="value:tagDefinition, visible:isTagDefinition" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="riskIndicator" data-i18n="dashboards:components.fields.riskIndicator"\n\t\t\t\t\tdata-bind="visible:isRiskIndicator"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="riskIndicator" data-role="domosriskassetindicator"\n\t\t\t\t\tdata-bind="value:riskIndicator, visible:isRiskIndicator" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="PortfolioViewerColumn" data-i18n="computation:FinancialValueCategory.title"\n\t\t\t\t\tdata-bind="visible:isFinancial"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="financialValueCategory" data-role="domosfinancialvaluecategory"\n\t\t\t\t\tdata-bind="value:financialValueCategory, visible:isFinancial" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="priority" data-i18n="dashboards:components.fields.priority"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="priority" data-role="numerictextbox" data-bind="value:priority" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="aggregation" data-i18n="dashboards:components.fields.aggregation"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="aggregation" data-role="domoscolumnaggregation" data-bind="value: aggregation" />\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n\t<div class="formWindowButtons">\n\t\t<button id="okClickId" class="k-primary" data-role="button" data-icon="check"\n\t\t\tdata-bind="click: okClick, enabled: isValid">OK</button>\n\t\t<button data-role="button" data-icon="cancel" data-bind="click: cancelClick">Cancel</button>\n\t</div>\n</div>'}),define("dashboard/component/portfolio/ui/PortfolioComponentColumnType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PortfolioComponentColumnType=void 0;var r,o;(r=e.PortfolioComponentColumnType||(e.PortfolioComponentColumnType={}))[r.PORTFOLIO=1]="PORTFOLIO",r[r.FINANCIAL=2]="FINANCIAL",r[r.RISK_INDICATOR=3]="RISK_INDICATOR",r[r.TAG_DEFINITION=4]="TAG_DEFINITION",(o=e.PortfolioComponentColumnType||(e.PortfolioComponentColumnType={})).getName=n.EnumUtils.createNameFn("portfolio:PortfolioComponentColumn",o),o.widget=i.EnumWidgetUtils.createDropList("DomosPortfolioComponentColumnType",o,!0),o.column=a.EnumColumnUtils.createFactory(o,o.widget),o.listBox=i.EnumWidgetUtils.createListBox("DomosPortfolioComponentColumnTypeListBox",o)}),define("dashboard/component/portfolio/view/DashboardPortfolioColumnWindow",["require","exports","tslib","i18n","core/data/DObservableBuilder","text!templates/dashboards/component/portfolio/portfolio.column.edit.window.html","dashboard/component/portfolio/ui/PortfolioComponentColumnType","core/api/PortfolioViewerColumn","portfolio/data/ColumnAggregation","portfolio/data/ColumnAggregation"],function(t,e,u,c,p,m,f,b,n){"use strict";function i(s){return new Promise(function(t,e){var n=kendo.template(m)({}),i=$("<div>").addClass("formWindow").appendTo($(document.body));i.html(n);i.kendoWindow({modal:!0,width:600,minWidth:300,visible:!1});var a,r=i.data("kendoWindow");r.bind("close",function(){return kendo.destroy(i),i.remove(),t(a),!0});var o=function(t){if(t.column){if(t.financialValueCategory)return f.PortfolioComponentColumnType.FINANCIAL;if(t.riskIndicator)return f.PortfolioComponentColumnType.RISK_INDICATOR;if(t.tagDefinition)return f.PortfolioComponentColumnType.TAG_DEFINITION}return f.PortfolioComponentColumnType.PORTFOLIO}(s),d=u.__assign(u.__assign({},s),{type:o}),l=p.DObservableBuilder.of(d).add("isPortfolio",function(t){return t.get("type")===f.PortfolioComponentColumnType.PORTFOLIO}).add("isTagDefinition",function(t){return t.get("type")===f.PortfolioComponentColumnType.TAG_DEFINITION}).add("isRiskIndicator",function(t){return t.get("type")===f.PortfolioComponentColumnType.RISK_INDICATOR}).add("isFinancial",function(t){return t.get("type")===f.PortfolioComponentColumnType.FINANCIAL}).add("isValid",function(t){var e=t.get("column"),n=t.get("type"),i=t.get("financialValueCategory"),a=t.get("riskIndicator"),r=t.get("tagDefinition");return!(!n||!i&&!a&&!r&&!e)}).add("okClick",function(t){a=t.toJson(),r.close()}).add("cancelClick",function(t){a=void 0,r.close()}).build();l.bindChange(function(t,e){if("type"===e)switch(t.get("type")){case f.PortfolioComponentColumnType.FINANCIAL:t.set("riskIndicator",null),t.set("tagDefinition",null),t.set("column",b.PortfolioViewerColumn.FINANCIAL);break;case f.PortfolioComponentColumnType.RISK_INDICATOR:t.set("financialValueCategory",null),t.set("tagDefinition",null),t.set("column",b.PortfolioViewerColumn.RISK_INDICATOR);break;case f.PortfolioComponentColumnType.TAG_DEFINITION:t.set("riskIndicator",null),t.set("financialValueCategory",null),t.set("column",b.PortfolioViewerColumn.TAG);break;case f.PortfolioComponentColumnType.PORTFOLIO:t.set("riskIndicator",null),t.set("financialValueCategory",null),t.set("tagDefinition",null)}}),c.I18N.localize(i),l.bind(i),r.title("Edit").open().center()})}Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardPortfolioColumnWindow=void 0;var a=function(){function t(){}return t.open=function(t){return t||(t={column:b.PortfolioViewerColumn.ASSET,tagDefinition:null,riskIndicator:null,financialValueCategory:null,priority:0,aggregation:n.ColumnAggregation.NONE,tagId2:null}),i(t)},t}();e.DashboardPortfolioColumnWindow=a}),define("dashboard/component/portfolio/view/DashboardPortfolioColumnGrid",["require","exports","ui/grid/transports","core/util/ObservableUtils","core/api/PortfolioViewerColumn","tag/ui/TagDefinitionUI","risk/ui/RiskAssetIndicatorUI","finance/data/FinancialValueCategory","core/ui/IntegerUI","i18n","core/ui/grid/GridUtils","core/ui/grid/GridToolbar","core/util/Logger","core/ui/Confirmation","./DashboardPortfolioColumnWindow","portfolio/data/ColumnAggregation"],function(t,e,d,l,s,u,c,p,m,f,b,v,y,h,n,g){"use strict";function T(t){return n.DashboardPortfolioColumnWindow.open(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardPortfolioColumnGrid=void 0;var i=function(){function t(){}return t.createColumnGrid=function(t,e){kendo.destroy(t),t.empty();var n,i,a=e.model,r=(new v.GridToolbar).addClick("Add new record","k-icon k-i-plus",function(){var e;(e=t.data("kendoGrid"))&&T().then(function(t){t&&(e.dataSource.add(t),e.dataSource.sync())}).catch(function(t){return y.Logger.error(t)})}).addClick("Edit","k-icon k-i-edit",function(){return function(t){var e=t.data("kendoGrid");if(e){var n=e.select();if(0<n.length){var i=e.dataItem(n);T(i.toJSON()).then(function(t){t&&(l.ObservableUtils.update(i,t),e.dataSource.sync())}).catch(function(t){return y.Logger.error(t)})}}}(t)},"editRowId").addClick("Delete","k-icon k-i-close",function(){return function(t){var e=t.data("kendoGrid"),n=e.select();if(0<n.length){var i=e.dataItem(n);if(!i)return;h.Confirmation.confirmDelete("Are you sure you want to delete this entry?").then(function(t){t&&(e.dataSource.remove(i),e.dataSource.sync())}).catch(function(t){return y.Logger.error(t)})}}(t)},"removeRowId"),o={dataSource:(n=a,i={transport:d.createLocal({data:n.get("columns")}),schema:{model:{id:"id",fields:{column:{type:"number",defaultValue:1},priority:{type:"number",defaultValue:0,validation:{required:!0}},tagDefinition:{nullable:!0},riskIndicator:{nullable:!0},financialValueCategory:{type:"number",defaultValue:1}},tagDefinitionName:function(){return l.ObservableUtils.get(this,"tagDefinition.name")||""},riskIndicatorName:function(){return l.ObservableUtils.get(this,"riskIndicator.name")||""}}},sort:{field:"priority"},dir:"asc"},new kendo.data.DataSource(i)),columns:[s.PortfolioViewerColumn.column({field:"column",title:f.I18N.t("dashboards:components.fields.column")}),u.TagDefinitionUI.column({field:"tagDefinition",title:f.I18N.t("dashboards:components.fields.tagDefinition")}),c.RiskAssetIndicatorUI.column({field:"riskIndicator",title:f.I18N.t("dashboards:components.fields.riskIndicator")}),p.FinancialValueCategory.column({field:"financialValueCategory",title:f.I18N.t("dashboards:components.fields.financial")}),m.IntegerUI.column({field:"priority",title:f.I18N.t("dashboards:components.fields.priority")}),g.ColumnAggregation.column({field:"aggregation",title:f.I18N.t("dashboards:components.fields.aggregation")})],pageable:b.GridUtils.defaultPageable(),scrollable:!1,editable:!1,change:function(t){b.GridUtils.onRowSelectChange(t.sender,[$("#removeRowId"),$("#editRowId")])},dataBound:function(t){b.GridUtils.onRowSelectChange(t.sender,[$("#removeRowId"),$("#editRowId")])}};o.toolbar=r.template(),b.GridUtils.withDefaults(o),t.kendoGrid(o),r.bind(t)},t}();e.DashboardPortfolioColumnGrid=i}),define("text!templates/dashboards/edit/component.portfolio.html",[],function(){return'<div id="dashboardComponentRoot">\n\t<h1 data-i18n="dashboards:components.PORTFOLIO.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="dashboards:components.PORTFOLIO.edit" data-bind="invisible: isNew"></h1>\n\n\t<div id="dashboardComponentActions"></div>\n\n\t<h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="sid" class="k-textbox" type="text" data-bind="value: sid" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="name" data-i18n="dashboards:components.fields.name"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required"\n\t\t\t\t\tdata-i18n="[validationMessage]risk:validation.nameRequired" />\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="perObject" data-i18n="dashboards:components.fields.perObject"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="perObject" type="checkbox" data-bind="checked: perObject"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t\x3c!--tr>\n\t\t\t<td>\n\t\t\t\t<label for="display" data-i18n="dashboards:components.fields.displayMethod"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="display" data-role="domosriskdisplaymethod" data-bind="value: displayMethod"/>\n\t\t\t</td>\n\t\t\t<td></td>\n\t\t\t<td></td>\n\t\t</tr--\x3e\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="description" data-i18n="dashboards:components.fields.description"></label>\n\t\t\t</td>\n\t\t\t<td colspan="3">\n\t\t\t\t<textarea id="description" name="description" class="k-textbox"\n\t\t\t\t\tdata-bind="value: description"></textarea>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\t<div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n\t<h2 data-i18n="dashboards:components.sections.consolidations"></h2>\n\n\t<input id="consolidations" data-role="domoscomputationdatacriterionmultiselect" data-bind="value: consolidations" />\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="tagDefinition" data-i18n="dashboards:components.fields.tagDefinition"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="tagDefinition" data-role="domostagdefinition" data-bind="value: tagId"/>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="undefinedFiltered" data-i18n="dashboards:components.fields.undefinedFiltered"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="undefinedFiltered" type="checkbox" data-bind="checked: undefinedFiltered"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="tagDefinition2" data-i18n="dashboards:components.fields.tagDefinition2"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="tagDefinition2" data-role="domostagdefinition" data-bind="value: tagId2"/>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n\t<h2 data-i18n="dashboards:components.sections.columns"></h2>\n\n\t<div id="dashboardColumnsGrid" class="floatingGrid"></div>\n\t<div class="clearer"></div>\n\t<h2 data-i18n="dashboards:components.sections.filter"></h2>\n\n\t<input id="filterCategory" data-role="domosassetcategorymultiselect" data-bind="value: filterCategories" />\n</div>'}),function(){define("views/dashboards/component/portfolio/component",["jquery","lodash","kendo","i18n","ui","core/api/PortfolioViewerColumn","core/api/DashboardComponentType","risk/ui/RiskAssetIndicatorUI","core/util/ObservableUtils","tag/ui/TagDefinitionUI","core/ui/IntegerUI","dashboard/component/portfolio/view/DashboardPortfolioColumnGrid","dashboard/component/views/DashboardComponentGrid","text!templates/dashboards/edit/component.portfolio.html","basic/ui/CurrencyUI","core/api/DataCriteria"],function(n,t,e,i,a,r,o,d,l,s,u,c,p,m){var f,b,v,y;return u.IntegerUI,l.ObservableUtils,d.RiskAssetIndicatorUI,r.PortfolioViewerColumn,b=o.DashboardComponentType,s.TagDefinitionUI,v=c.DashboardPortfolioColumnGrid,f=p.DashboardComponentGrid,a.grid.transports,y=function(t){return v.createColumnGrid(n("#dashboardColumnsGrid"),t)},{updateValidatorOptions:function(t,e){return e},getTemplates:function(){return{view:m}},createRawModel:function(){return{id:0,sid:"",type:b.PORTFOLIO,name:"",currency:null,description:"",displayMethod:1,perObject:!1,consolidations:[],columns:[],filterCategories:[],tagId:null,undefinedFiltered:!1,tagId2:null}},updateModel:function(t,e){var n,i,a,r,o,d,l,s,u,c,p,m,f,b,v;for(t.set("id",e.id),t.set("sid",e.sid),t.set("type",e.type),t.set("name",e.name),t.set("currency",e.currency),t.set("description",e.description),t.set("displayMethod",e.displayMethod),t.set("perObject",e.perObject),(r=t.get("consolidations")).splice(0,r.length),l=0,c=(f=e.consolidations).length;l<c;l++)a=f[l],r.push(a);for((i=t.get("columns")).splice(0,i.length),s=0,p=(b=e.columns).length;s<p;s++)n=b[s],i.push(n);for((o=t.get("filterCategories")).splice(0,o.length),u=0,m=(v=e.filterCategories).length;u<m;u++)d=v[u],o.push(d);return t.set("tagId",e.tagId),t.set("undefinedFiltered",e.undefinedFiltered),t.set("tagId2",e.tagId2),null},init:function(t){var e;return y(t),e=t.object,f.setup(n("#dashboardComponentGrid"),e.id),null}}})}.call(this),define("text!templates/dashboards/edit/component.text.html",[],function(){return'<div id="dashboardComponentRoot">\n\t<h1 data-i18n="dashboards:components.TEXT.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="dashboards:components.TEXT.edit" data-bind="invisible: isNew"></h1>\n\n\t<div id="dashboardComponentActions"></div>\n\n\t<h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="sid" class="k-textbox" type="text" data-bind="value: sid"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="name" data-i18n="dashboards:components.fields.name"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]risk:validation.nameRequired"/>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="objectNoteTag" data-i18n="dashboards:components.fields.objectNoteTag"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="objectNoteTag" data-role="domosobjectnotetag" data-bind="value: objectNoteTag"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="periodicity" data-i18n="dashboards:components.fields.periodicity"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="periodicity" data-role="domosperiodicity" data-bind="value: periodicity"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="description" data-i18n="dashboards:components.fields.description"></label>\n\t\t\t</td>\n\t\t\t<td colspan="3">\n\t\t\t\t<textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n\t<div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n\t<h2 data-i18n="dashboards:components.sections.title"></h2>\n\n\t<div id="dashboardTitleEditor"></div>\n\n\t<h2 data-i18n="dashboards:components.sections.text"></h2>\n\n\t<div id="dashboardTextEditor"></div>\n\n\t<div id="dashboardTextHelp" class="dashboardHelp"></div>\n</div>\n\n\n\n'}),define("text!templates/dashboards/edit/text.variable.help.html",[],function(){return'<h2>Help</h2>\n\nYou can use variables in your text.<br/>\nVariables are defined at perimeter level (in the "Variables" section) and consist of pairs of keys and values.<br/>\nWhen Domos renders the dashboards, it will change each variable with the matching value found in the perimeter\n(but keeps the variable name if no value can be found).<br/>\nTo reference a variable named <code>FOO</code>, just add the text <code>{{FOO}}</code>.\n<p>\n\tExample:\n\t<ul>\n\t\t<li>You enter the text: <code>This is a test with variables: {{FOO}} and {{DOES_NOT_EXIST}}</code></li>\n\t\t<li>You define the variable <code>FOO</code> with the value <code>Bar</code> in the perimeter</li>\n\t\t<li>You setup the perimeter at the dashboard or component level (in the dashboard ID card)</li>\n\t\t<li>The resulting text will be: <code>This is a test with variables: Bar and {{DOES_NOT_EXIST}}</code></li>\n\t</ul>\n</p>\n\n<h3>Predefined variables</h3>\nThe LP workflow uses dashboards to generate the PDF documents that should be send to the LPs.<br/>\nTo generate these documents, Domos will get the dashboard to use, fill in several variables with values specific to each LPs\nand creates the PDF.<br/>\nHere is an exhaustive list of all the variables used by the LP workflows:\n\n<h4>Capital calls</h4>\n<table>\n\t<tr>\n\t\t<td><strong>DMS_LP_NAME</strong></td>\n\t\t<td>The LP name</td>\n\t</tr>\n\t<tr>\n\t\t<td><strong>DMS_LP_PHONE</strong></td>\n\t\t<td>The LP phone number</td>\n\t</tr>\n\t<tr>\n\t\t<td><strong>DMS_LP_MAIL</strong></td>\n\t\t<td>The LP email address</td>\n\t</tr>\n\t<tr>\n\t\t<td><strong>DMS_LP_DATE</strong></td>\n\t\t<td>The date of the capital call</td>\n\t</tr>\n\t<tr>\n\t\t<td><strong>DMS_LP_CURRENCY</strong></td>\n\t\t<td>The currency for the capital call</td>\n\t</tr>\n\t<tr>\n\t\t<td><strong>DMS_LP_AMOUNT</strong></td>\n\t\t<td>The amount of the capital call</td>\n\t</tr>\n\t<tr>\n\t\t<td><strong>DMS_LP_PREMIUM</strong></td>\n\t\t<td>The premium to pay</td>\n\t</tr>\n\t<tr>\n\t\t<td><strong>DMS_LP_FEES</strong></td>\n\t\t<td>The fees to pay for delay</td>\n\t</tr>\n\t<tr>\n\t\t<td><strong>DMS_LP_RESERVE</strong></td>\n\t\t<td>The amount that can be taken from the reserve of the LP in the fund</td>\n\t</tr>\n</table>\n<h4>Distributions</h4>\n<table>\t<tr>\n\t<td><strong>DMS_LP_NAME</strong></td>\n\t<td>The LP name</td>\n</tr>\n<tr>\n\t<td><strong>DMS_LP_PHONE</strong></td>\n\t<td>The LP phone number</td>\n</tr>\n<tr>\n\t<td><strong>DMS_LP_MAIL</strong></td>\n\t<td>The LP email address</td>\n</tr>\n<tr>\n\t<td><strong>DMS_LP_DATE</strong></td>\n\t<td>The date of the distribution</td>\n</tr>\n<tr>\n\t<td><strong>DMS_LP_CURRENCY</strong></td>\n\t<td>The currency for the distribution</td>\n</tr>\n<tr>\n\t<td><strong>DMS_LP_AMOUNT</strong></td>\n\t<td>The amount to pay to LP</td>\n</tr>\n<tr>\n\t<td><strong>DMS_LP_PLEDGED</strong></td>\n\t<td>The amount in pledge</td>\n</tr>\n<tr>\n\t<td><strong>DMS_LP_RECALLABLE</strong></td>\n\t<td>The amount that GP can recall</td>\n</tr>\n<tr>\n\t<td><strong>DMS_LP_RESERVE</strong></td>\n\t<td>The amount in reserve</td>\n</tr>\n</table>'}),define("core/repository/RepositoryImpl",["require","exports","lodash","core/web/WebHttp"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RepositoryImpl=void 0;var a=function(){function t(t){var e;n.isString(t)?this.options={singleUrl:(e=t)+".json",listUrl:e+"/list.json",identifiableUrl:e+"/id/list.json"}:this.options=t}return Object.defineProperty(t.prototype,"getOptions",{get:function(){return this.options},enumerable:!1,configurable:!0}),t.prototype.fetchIdentifiables=function(t){return i.WebHttp.getJson(this.options.identifiableUrl,t)},t.prototype.fetchIdentifiableGroupables=function(){return i.WebHttp.getJson(this.options.identifiableUrl)},t.prototype.list=function(t){return i.WebHttp.getJson(this.options.listUrl,t)},t.prototype.fetch=function(t,e){return i.WebHttp.getJson(this.options.singleUrl,{id:t},e)},t.prototype.save=function(t,e){var n=JSON.stringify(t);return i.WebHttp.postJson(this.options.singleUrl,{data:n},e)},t.prototype.destroy=function(t,e){var n=t.id;return i.WebHttp.destroyJson(this.options.singleUrl,{id:n},e)},t}();e.RepositoryImpl=a}),define("object/repository/ObjectNoteTagRepository",["require","exports","core/repository/RepositoryImpl"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectNoteTagRepository=void 0,e.ObjectNoteTagRepository=new n.RepositoryImpl("object/note/tag")}),define("object/ui/ObjectNoteTagUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","object/repository/ObjectNoteTagRepository"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectNoteTagUI=void 0;var r=function(){function t(){}return t.widget=n.IdWidgetUtils.createDropList("DomosObjectNoteTag",a.ObjectNoteTagRepository,!0),t.column=i.IdentifiableColumnUtils.createFactory(t.widget),t}();e.ObjectNoteTagUI=r}),function(){define("views/dashboards/component/text/component",["jquery","lodash","kendo","i18n","ui","core/api/DashboardComponentType","dashboard/component/views/DashboardComponentGrid","text!templates/dashboards/edit/component.text.html","text!templates/dashboards/edit/text.variable.help.html","basic/ui/CurrencyUI","object/ui/ObjectNoteTagUI","core/api/Periodicity"],function(r,t,o,e,n,i,a,d,l){var s,u,c,p,m,f,b;return u=i.DashboardComponentType,s=a.DashboardComponentGrid,m=function(t){var e;if(e=t.titleEditor)return t.model.set("title",e.value())},p=function(t){var e;if(e=t.textEditor)return t.model.set("text",e.value())},c=function(t){return t.replace(/(<\/?)strong(\s?)/g,"$1b$2").replace(/(<\/?)em(\s?)/g,"$1i$2")},b=function(t){var e,n,i,a;return n=r("#dashboardTitleEditor"),o.unbind(n),o.destroy(n),n.empty(),t.titleEditor=null,a=t.model.get("title"),(e=r("<textarea>").addClass("componentTitleEditor").appendTo(n)).val(a),i={deserialization:{custom:c},serialization:{custom:c},tools:["bold","italic","underline","strikethrough","createLink","unlink","foreColor","backColor","fontName","fontSize"],change:m.bind(null,t)},e.kendoEditor(i),t.titleEditor=e.data("kendoEditor"),null},f=function(t){var e,n,i,a;return n=r("#dashboardTextEditor"),o.unbind(n),o.destroy(n),n.empty(),t.textEditor=null,a=t.model.get("text"),(e=r("<textarea>").addClass("componentEditor").appendTo(n)).val(a),i={deserialization:{custom:c},serialization:{custom:c},tools:["formatting","bold","italic","underline","strikethrough","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","indent","outdent","createLink","unlink","insertImage","foreColor","backColor","fontName","fontSize","createTable"],change:p.bind(null,t)},e.kendoEditor(i),t.textEditor=e.data("kendoEditor"),null},{updateValidatorOptions:function(t,e){return e},getTemplates:function(){return{view:d}},createRawModel:function(){return{id:0,sid:"",type:u.TEXT,name:"",currency:null,description:"",title:"",text:"",objectNoteTag:null,periodicity:1}},updateModel:function(t,e){return t.set("id",e.id),t.set("sid",e.sid),t.set("type",e.type),t.set("name",e.name),t.set("currency",e.currency),t.set("description",e.description),t.set("title",e.title),t.set("text",e.text),t.set("objectNoteTag",e.objectNoteTag),t.set("periodicity",e.periodicity),null},viewShow:function(t){return b(t),f(t),null},init:function(t){var e;return e=t.object,s.setup(r("#dashboardComponentGrid"),e.id),r("#dashboardTextHelp").append(l),null}}})}.call(this),define("core/api/DashboardRiskOutput",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardRiskOutput=void 0;var r,o;(r=e.DashboardRiskOutput||(e.DashboardRiskOutput={}))[r.FULL=1]="FULL",r[r.FUND=2]="FUND",r[r.ASSET=3]="ASSET",(o=e.DashboardRiskOutput||(e.DashboardRiskOutput={})).getName=a.EnumUtils.createNameFn("dashboards:DashboardRiskOutput",o),o.widget=i.EnumWidgetUtils.createDropList("DomosDashboardRiskOutput",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("text!templates/dashboards/edit/component.risk.html",[],function(){return'<div id="dashboardComponentRoot">\n    <h1 data-i18n="dashboards:components.RISK.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:components.RISK.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardComponentActions"></div>\n\n    <h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" class="k-textbox" type="text" data-bind="value: sid"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="dashboards:components.fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]risk:validation.nameRequired"/>\n            </td>\n            <td>\n                <label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n            </td>\n            <td>\n                <input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="display" data-i18n="dashboards:components.fields.displayMethod"></label>\n            </td>\n            <td>\n                <input id="display" data-role="domosriskdisplaymethod" data-bind="value: displayMethod"/>\n            </td>\n            <td></td>\n            <td></td>\n        </tr>\n        <tr>\n            <td>\n                <label for="comparing" data-i18n="dashboards:components.fields.comparing"></label>\n            </td>\n            <td>\n                <input id="comparing" type="checkbox" data-bind="checked: comparing"/>\n            </td>\n            <td data-bind="visible: comparing">\n                <label for="origin" data-i18n="dashboards:components.fields.origin"></label>\n            </td>\n            <td data-bind="visible: comparing">\n                <input id="origin" data-role="domosdashboardorigin" data-bind="value: origin"/>\n            </td>\n        </tr>\n        <tr data-bind="visible: comparing">\n            <td>\n                <label for="timeUnit" data-i18n="dashboards:components.fields.timeUnit"></label>\n            </td>\n            <td>\n                <input id="timeUnit" data-role="domosdashboardtimeunit" data-bind="value: timeUnit"/>\n            </td>\n            <td>\n                <label for="timeUnitCount" data-i18n="dashboards:components.fields.timeUnitCount"></label>\n            </td>\n            <td>\n                <input id="timeUnitCount" name="Count" data-role="numerictextbox" data-min="0" data-max="50" data-bind="value: timeUnitCount" required/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="output" data-i18n="dashboards:components.fields.output"></label>\n            </td>\n            <td>\n                <input id="output" data-role="domosdashboardriskoutput" data-bind="value: output"/>\n            </td>\n            <td></td>\n            <td></td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="dashboards:components.fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n            </td>\n        </tr>\n    </table>\n\n    <div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n\n\t<h2 data-i18n="dashboards:components.sections.dates"></h2>\n\t\n\t<div id="dashboardRiskDateGrid" class="floatingGrid"></div>\n    <div class="clearer"></div>\n</div>\n\n\n\n'}),define("core/api/RiskDisplayMethod",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RiskDisplayMethod=void 0;var r,o;(r=e.RiskDisplayMethod||(e.RiskDisplayMethod={}))[r.VALUE=1]="VALUE",r[r.COLOR=2]="COLOR",r[r.INITIAL=3]="INITIAL",(o=e.RiskDisplayMethod||(e.RiskDisplayMethod={})).getName=a.EnumUtils.createNameFn("risk:displayMethods",o),o.widget=i.EnumWidgetUtils.createDropList("DomosRiskDisplayMethod",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),function(){var g=[].slice;define("views/dashboards/component/risk/component",["jquery","lodash","kendo","i18n","ui","core/api/DashboardComponentType","core/api/DashboardRiskOutput","core/api/DashboardTimeUnit","core/ui/NumberUI","dashboard/component/views/DashboardComponentGrid","text!templates/dashboards/edit/component.risk.html","basic/ui/CurrencyUI","core/api/RiskDisplayMethod","core/api/DashboardOrigin"],function(a,t,r,o,e,n,i,d,l,s,u){var c,p,m,f,b,v,y,h;return p=n.DashboardComponentType,m=i.DashboardRiskOutput,f=d.DashboardTimeUnit,y=l.NumberUI,c=s.DashboardComponentGrid,b=e.grid,v=b.transports,h=function(t){var e,n,i;return e=a("#dashboardRiskDateGrid"),r.destroy(e),e.empty(),n=t.model,i={dataSource:{transport:v.createLocal({data:n.get("dates")}),schema:{model:{id:"id",fields:{id:{type:"number"},timeUnitCount:{type:"number",defaultValue:1,validation:{required:!0}},timeUnit:{type:"number"}}}}},columns:[{command:["edit","destroy"],title:" ",width:"230px"},y.column({field:"timeUnitCount",title:o.t("dashboards:components.fields.timeUnitCount")}),f.column({field:"timeUnit",title:o.t("dashboards:components.fields.timeUnit")})],toolbar:["create"],pageable:b.defaultPageable(),scrollable:!1},b.withDefaults(i),e.kendoGrid(i),null},{updateValidatorOptions:function(t,e){return e},getTemplates:function(){return{view:u}},createRawModel:function(){return{id:0,sid:"",type:p.RISK,name:"",currency:null,description:"",consolidateByAsset:!1,displayMethod:1,comparing:!1,origin:null,timeUnitCount:0,timeUnit:0,output:m.FULL,dates:[]}},updateModel:function(t,e){var n;return t.set("id",e.id),t.set("sid",e.sid),t.set("type",e.type),t.set("name",e.name),t.set("currency",e.currency),t.set("description",e.description),t.set("consolidateByAsset",e.consolidateByAsset),t.set("displayMethod",e.displayMethod),t.set("comparing",e.comparing),t.set("origin",e.origin),t.set("timeUnitCount",e.timeUnitCount),t.set("timeUnit",e.timeUnit),t.set("output",e.output),(n=t.get("dates")).splice.apply(n,[0,n.length].concat(g.call(e.dates))),null},init:function(t){var e;return h(t),e=t.object,c.setup(a("#dashboardComponentGrid"),e.id),null}}})}.call(this),function(){define("views/risk/indicator/script/indicator.completers",[],function(){var t,e,n,i,a;return a=function(t,e){var n;return{name:n="'"+t+"'",value:n,score:1e3,meta:e,lower:t.toLowerCase()}},n=[(i=function(t,e){return{name:t,value:t,score:1e3,meta:e,lower:t.toLowerCase()}})("context","Domos context (object)"),i("orNull","Value (-> number?)"),i("orZero","Value (-> number)"),i("date","Value (-> date)"),i("id","Value (-> string)"),i("minusDays","Date (int -> date)"),i("current","Value context (-> value)"),i("atTodayMinus","Value context (string -> value)"),i("at","Value context (date -> value)"),i("in","Value context (currency -> value)"),i("get","Object (string -> value context)"),i("forex","Context ((from, to) -> value)"),i("index","Context ((id) -> value context)"),i("root","Object (-> Object (N))"),i("investor","Object (-> Object (N))"),i("currency","Object (-> string)"),i("country","Object (-> string)"),i("continent","Object (-> string)"),i("marketValue","Object (-> value context)"),i("assetsUnderManagement","Object (-> value context)"),i("grossExposure","Object (-> value context)"),i("netExposure","Object (-> value context)"),i("financing","Object (-> value context)"),i("factor","Portfolio/Position (-> number)"),i("portfolios","Fund/Portfolio (-> Portfolio list)"),i("positions","Fund/Portfolio (-> Position list)"),i("netAssetValue","Fund (-> value context)"),i("quantity","Position (-> value context)"),i("asset","Position (-> Asset)"),i("isProperty","Asset (-> boolean)"),i("isDebt","Asset (-> boolean)"),i("isCompanyShare","Asset (-> boolean)"),i("asset","Debt (-> Asset)"),i("maturityDate","Debt (-> date)"),i("rate","Debt (-> number)"),i("repaymentFrequency","Debt (-> string)"),i("actualNotional","Debt (-> number?)"),i("installment","Debt (-> number?)"),i("nextNotionalPaymentDate","Debt (-> date?)"),i("company","CompanyShare (-> Object)"),i("market","Asset (-> string)"),i("AIFType","Asset (-> string)"),i("geographicalFocus","Asset (-> string)"),i("last","Asset (-> value context)"),i("occupancy","Property (-> value context)"),i("weightedAverageLeaseTerm","Property (-> value context)"),i("loanToValue","Property (-> value context)"),i("debtServiceCoverageRatio","Property (-> value context)"),i("netOperatingIncome","Property (-> value context)"),i("estimatedRentalValue","Property (-> value context)"),i("inTermOfZoneA","Property (-> value context)"),i("localLandTaxValue","Property (-> value context)"),i("squareMeterPrice","Property (-> value context)"),i("squareMeterMonthlyLeaseValue","Property (-> value context)"),i("insuredValue","Property (-> value context)"),i("reconstructionValue","Property (-> value context)"),i("grossInvestmentReturnRate","Fund (-> value context)"),i("netInvestmentReturnRate","Fund (-> value context)"),i("netEquityDelta","Portfolio (-> value context)"),i("netFXDelta","Portfolio (-> value context)"),i("netCommodityDelta","Portfolio (-> value context)"),a("AFRICA","Continent/Geo. (String)"),a("ASIA","Continent (String)"),a("ASIA_PACIFIC","Geo. (String)"),a("EUROPE","Geo. (String)"),a("EEA","Geo. (String)"),a("EUROPE_EEA","Continent (String)"),a("EUROPE_NON_EEA","Continent (String)"),a("MIDDLE_EAST","Geo. (String)"),a("NORTH_AMERICA","Continent/Geo. (String)"),a("SOUTH_AMERICA","Continent/Geo. (String)"),a("SUPRA_NATIONAL","Geo. (String)"),a("OCEANIA","Continent (String)")],e={getCompletions:function(t,e,n,i,a,r){var o,d,l,s,u;if(!a||a.length<=0)return r(null,[]);for(s=a.toLowerCase(),o=[],d=0,l=t.length;d<l;d++)(u=t[d]).lower.startsWith(s)&&o.push(u);return r(null,o)}.bind(null,n)},t=[e],{list:function(){return t}}})}.call(this),function(){define("views/dashboards/component/script/component.completers",["views/risk/indicator/script/indicator.completers"],function(t){var e,n;return e=t.list().slice(),function(t,e){return{name:t,value:t,score:1e3,meta:e,lower:t.toLowerCase()}},n={getCompletions:function(t,e,n,i,a,r){var o,d,l,s,u;if(!a||a.length<=0)return r(null,[]);for(s=a.toLowerCase(),o=[],d=0,l=t.length;d<l;d++)(u=t[d]).lower.startsWith(s)&&o.push(u);return r(null,o)}.bind(null,[])},e.push(n),{list:function(){return e}}})}.call(this),define("scripts/web/ScriptsMap",["require","exports","core/web/WebLocation"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScriptsMap=void 0;var n=function(){function t(){}return t.downloadUrl=function(t,e){var n=e.map(function(t){return t.stringId});return i.WebLocation.resolve("script/js/download?"+$.param({moduleCategory:t,scriptSids:n}))},t.help=i.WebLocation.resolve("jsdoc/index.html"),t}();e.ScriptsMap=n}),function(){define("views/common/script.help",["jquery","kendo","scripts/web/ScriptsMap"],function(i,a,t){var e,r;return e=t.ScriptsMap,r=function(){return window.open(e.help)},{setup:function(t){var e,n;return n={helpClick:r.bind(null)},e=a.observable(n),t.helpModel=e,a.bind(i("#scriptHelpRoot"),e)}}})}.call(this),define("text!templates/dashboards/edit/component.group.by.script.html",[],function(){return'<div id="dashboardComponentRoot">\n\t<h1 data-i18n="dashboards:components.GROUP_BY_SCRIPT.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="dashboards:components.GROUP_BY_SCRIPT.edit" data-bind="invisible: isNew"></h1>\n\n\t<div id="dashboardComponentActions"></div>\n\n\t<h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="sid" class="k-textbox" type="text" data-bind="value: sid"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="name" data-i18n="dashboards:components.fields.name"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]risk:validation.nameRequired"/>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="chart" data-i18n="dashboards:components.fields.chart"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="chart" data-role="domoscharttype" data-bind="value: chart"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="perObject" data-i18n="dashboards:components.fields.perObject"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="perObject" type="checkbox" data-bind="checked: perObject"/>\n\t\t\t</td>\n\t\t\t<td data-bind="visible: hasStack">\n\t\t\t\t<label for="stack" data-i18n="dashboards:components.fields.stack"></label>\n\t\t\t</td>\n\t\t\t<td data-bind="visible: hasStack">\n\t\t\t\t<input id="stack" type="checkbox" data-bind="checked: stack"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="description" data-i18n="dashboards:components.fields.description"></label>\n\t\t\t</td>\n\t\t\t<td colspan="3">\n\t\t\t\t<textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n\t<div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n\n\t<h2 data-i18n="dashboards:components.sections.script"></h2>\n\n\t<div id="groupByScript" class="riskScript"></div>\n\t<div id="scriptHelpRoot">\n\t\t<button class="k-button" data-i18n="scripts:editor.helpButton" data-bind="click: helpClick"></button>\n\t</div>\n\n</div>\n\n\n\n'}),function(){define("views/dashboards/component/script/component",["jquery","lodash","kendo","i18n","ui","views/dashboards/component/script/component.completers","core/api/DashboardComponentType","core/api/ChartType","views/common/script.help","dashboard/component/views/DashboardComponentGrid","text!templates/dashboards/edit/component.group.by.script.html","basic/ui/CurrencyUI"],function(l,t,e,n,i,s,a,r,u,o,d){var c,p,m,f,b,v;return m=a.DashboardComponentType,c=r.ChartType,p=o.DashboardComponentGrid,void 0===v&&(v=window.ace),f=v,b=function(t){return t.editorLocked||t.model.set("script",t.editor.getSession().getValue()),null},{updateValidatorOptions:function(t,e){return e},getTemplates:function(){return{view:d}},createRawModel:function(){return{id:0,sid:"",type:m.GROUP_BY_SCRIPT,name:"",currency:null,chart:0,script:"",perObject:!1,stack:!1,hasStack:function(){return this.get("perObject")&&this.get("chart")!==c.PIE&&this.get("chart")!==c.WATERFALL}}},updateModel:function(t,e){return t.set("id",e.id),t.set("sid",e.sid),t.set("type",e.type),t.set("name",e.name),t.set("currency",e.currency),t.set("description",e.description),t.set("chart",e.chart),t.set("script",e.script),t.set("perObject",e.perObject),t.set("stack",e.stack),null},viewShow:function(t){var e;return(e=t.editor)&&(t.editorLocked=!0,e.getSession().setValue(t.model.get("script")),e.getSession().setUndoManager(new f.UndoManager),e.resize(),t.editorLocked=!1),null},init:function(t){var e,n,i,a,r,o,d;for(o={enableBasicAutocompletion:!(t.editorLocked=!1),fontSize:"12pt",maxLines:50},(i=f.edit("groupByScript")).setOptions(o),i.setTheme("ace/theme/chrome"),i.getSession().setMode("ace/mode/javascript"),a=0,r=(d=s.list()).length;a<r;a++)e=d[a],i.completers.push(e);return(t.editor=i).getSession().on("change",b.bind(null,t)),n=t.object,p.setup(l("#dashboardComponentGrid"),n.id),u.setup(t),null}}})}.call(this),define("text!templates/dashboards/edit/component.debt.html",[],function(){return'<div id="dashboardComponentRoot">\n    <h1 data-i18n="dashboards:components.DEBT_CASH_FLOWS.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:components.DEBT_CASH_FLOWS.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardComponentActions"></div>\n\n    <h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" class="k-textbox" type="text" data-bind="value: sid"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="dashboards:components.fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]risk:validation.nameRequired"/>\n            </td>\n            <td>\n                <label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n            </td>\n            <td>\n                <input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="frequency" data-i18n="dashboards:components.fields.frequency"></label>\n            </td>\n            <td>\n                <input id="frequency" data-role="domosdashboarddebtfrequency" data-bind="value: frequency"/>\n            </td>\n            <td>\n                <label for="bucketCount" data-i18n="dashboards:components.fields.bucketCount"></label>\n            </td>\n            <td>\n                <input id="bucketCount" name="Count" data-role="numerictextbox" data-min="0" data-max="50" data-bind="value: bucketCount" required/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="dashboards:components.fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n            </td>\n        </tr>\n    </table>\n    <div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n\n</div>\n\n\n\n'}),function(){define("views/dashboards/component/debt/component",["jquery","lodash","kendo","i18n","ui","core/api/DashboardComponentType","dashboard/component/views/DashboardComponentGrid","text!templates/dashboards/edit/component.debt.html","basic/ui/CurrencyUI","core/api/DashboardDebtFrequency"],function(n,t,e,i,a,r,o,d){var l,s;return s=r.DashboardComponentType,l=o.DashboardComponentGrid,{updateValidatorOptions:function(t,e){return e},getTemplates:function(){return{view:d}},createRawModel:function(){return{id:0,sid:"",type:s.DEBT_CASH_FLOWS,name:"",currency:null,frequency:null,bucketCount:0,description:""}},updateModel:function(t,e){return t.set("id",e.id),t.set("sid",e.sid),t.set("type",e.type),t.set("name",e.name),t.set("currency",e.currency),t.set("description",e.description),t.set("frequency",e.frequency),t.set("bucketCount",e.bucketCount),null},init:function(t){var e;return e=t.object,l.setup(n("#dashboardComponentGrid"),e.id),null}}})}.call(this),define("text!templates/dashboards/edit/component.report.html",[],function(){return'<div id="dashboardComponentRoot">\n    <h1 data-i18n="dashboards:components.REPORT.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:components.REPORT.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardComponentActions"></div>\n\n    <h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" class="k-textbox" type="text" data-bind="value: sid"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="dashboards:components.fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]risk:validation.nameRequired"/>\n            </td>\n            <td>\n                <label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n            </td>\n            <td>\n                <input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="timeUnit" data-i18n="dashboards:components.fields.timeUnit"></label>\n            </td>\n            <td>\n                <input id="timeUnit" data-role="domosdashboardtimeunit" data-bind="value: timeUnit"/>\n            </td>\n            <td>\n                <label for="timeUnitCount" data-i18n="dashboards:components.fields.timeUnitCount"></label>\n            </td>\n            <td>\n                <input id="timeUnitCount" name="Count" data-role="numerictextbox" data-min="0" data-max="50" data-bind="value: timeUnitCount" required/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="dashboards:components.fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n            </td>\n        </tr>\n    </table>\n\n    <div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n\n    <h2 data-i18n="dashboards:components.sections.reportSources"></h2>\n\n    <div data-role="domosreportingsourcemultiselect" data-bind="value: sources"></div>\n</div>\n\n\n\n'}),function(){var u=[].slice;define("views/dashboards/component/report/component",["jquery","lodash","kendo","i18n","ui","core/api/DashboardComponentType","dashboard/component/views/DashboardComponentGrid","text!templates/dashboards/edit/component.report.html","basic/ui/CurrencyUI","core/api/ReportingSource"],function(n,t,e,i,a,r,o,d){var l,s;return s=r.DashboardComponentType,l=o.DashboardComponentGrid,{updateValidatorOptions:function(t,e){return e},getTemplates:function(){return{view:d}},createRawModel:function(){return{id:0,sid:"",type:s.REPORT,name:"",currency:null,timeUnit:0,timeUnitCount:0,sources:[],description:""}},updateModel:function(t,e){var n;return t.set("id",e.id),t.set("sid",e.sid),t.set("type",e.type),t.set("name",e.name),t.set("currency",e.currency),t.set("timeUnit",e.timeUnit),t.set("timeUnitCount",e.timeUnitCount),t.set("description",e.description),(n=t.get("sources")).splice.apply(n,[0,n.length].concat(u.call(e.sources))),null},init:function(t){var e;return e=t.object,l.setup(n("#dashboardComponentGrid"),e.id),null}}})}.call(this),define("text!templates/dashboards/component/data/data.column.edit.window.html",[],function(){return'<div class="idxStandardContent">\n\t\t<div class="flowTopPane">\n\t\t\t<div class="zoom0_8p parameter-data-edit-column-section">\n\t\t\t\t<label for="columnType" class="columnTypeLabel" data-i18n="dashboards:components.DATA.listBox.columnType"></label>\n\t\t\t\t<label for="valueSource" class="columnSourceLabel" data-i18n="dashboards:components.DATA.listBox.sourceList"></label>\n\t\t\t\t<label for="dataColumns" data-i18n="dashboards:components.DATA.listBox.listColumns"></label>\n\t\t\t\t<br />\n\t\t\t\t<select id="columnType" data-bind="events: {change: mainChange}"></select>\n\t\t\t\t<select id="valueSource"  data-bind="source: sourceValues"></select>\n\t\t\t\t<select id="dataColumns" data-bind="events: {change: targetChange}"></select>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="flowTopPane">\n\t\t\t<div class="zoom0_8p">\n\t\t\t\t<div id="columnToolbar" class="parameter-data-toolbar-section"></div>\n\t\t\t\t<table class="formTable" data-bind="visible: isTargetSelected" >\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="field" data-i18n="dashboards:components.fields.field"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="field" data-role="domosobjectfieldtype" data-bind="value: entry.field" data-enabled="false"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="history" data-i18n="dashboards:components.fields.history"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="history"  data-bind="value: entry.history" data-enabled="false"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="riskIndicator" data-i18n="dashboards:components.fields.riskIndicator"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="riskIndicator" data-role="domosriskindicator" data-bind="value: entry.riskIndicator" data-enabled="false"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="tagDefinition" data-i18n="dashboards:components.fields.tagDefinition"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="tagDefinition" data-role="domostagdefinition" data-bind="value: entry.tagDefinition" data-enabled="false"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="priority" data-i18n="dashboards:components.fields.priority"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="priority" data-role="numerictextbox" data-bind="value: entry.priority"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="method" data-i18n="dashboards:components.fields.method"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="method"  data-role="domoscomputationmethod" data-bind="value: entry.method"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="origin" data-i18n="dashboards:components.fields.origin"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="origin" data-role="domosdashboardorigin" data-bind="value: entry.origin"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="timeUnit" data-i18n="dashboards:components.fields.timeUnit"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="timeUnit" data-role="domosdashboardtimeunit" data-bind="value: entry.timeUnit"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="timeUnitCount" data-i18n="dashboards:components.fields.timeUnitCount"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="timeUnitCount"  data-role="numerictextbox" data-bind="value: entry.timeUnitCount" data-format="n0"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="aggregation" data-i18n="dashboards:components.fields.aggregation"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="aggregation"  data-role="domoscolumnaggregation" data-bind="value: entry.aggregation"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\t<div class="flowBottomPane">\n\t\t<div id="dashboardDataParameterGrid" class="floatingGrid_100 zoom0_8p"></div>\n\t</div>\n</div>'}),define("dashboard/component/data/columns/data/DashboardComponentDataColumnType",["require","exports","core/util/EnumUtils","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardComponentDataColumnType=void 0;var r,o;(r=e.DashboardComponentDataColumnType||(e.DashboardComponentDataColumnType={}))[r.FIELD=1]="FIELD",r[r.HISTORY=2]="HISTORY",r[r.RISK=3]="RISK",r[r.TAG=4]="TAG",(o=e.DashboardComponentDataColumnType||(e.DashboardComponentDataColumnType={})).getName=n.EnumUtils.createNameFn("dashboards:DashboardComponentDataColumnType",o),o.widget=a.EnumWidgetUtils.createDropList("DomosDashboardComponentDataColumnType",o,!1),o.column=i.EnumColumnUtils.createFactory(o,o.widget),o.widgetList=a.EnumWidgetUtils.createListBox("DomosDashboardComponentDataColumnTypeList",o)}),define("dashboard/component/data/columns/data/ui/DataParameterUtils",["require","exports","core/util/EnumUtils","history/data/Histories","risk/repository/RiskIndicatorRepository","tag/repository/TagDefinitionRepository","lodash","../DashboardComponentDataColumnType","core/api/ComputationMethod","core/api/DashboardTimeUnit","core/util/ObservableUtils","portfolio/data/ColumnAggregation"],function(t,i,a,e,n,r,o,d,l,s,u,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DataParameterUtils=i.DataParameterSchemaModel=void 0;var p="valueSource",m="dataColumns";i.DataParameterSchemaModel=kendo.data.Model.define({id:"id",fields:{priority:{type:"number"},field:{type:"number",nullable:!0},method:{type:"number",nullable:!0},history:{type:"string",nullable:!0},tagDefinition:{nullable:!0},riskIndicator:{nullable:!0},origin:{type:"number",nullable:!0},timeUnit:{type:"number",defaultValue:1},timeUnitCount:{type:"number",defaultValue:0},aggregation:{type:"number"}},tagDefinitionName:function(){return u.ObservableUtils.get(this,"tagDefinition.name")||""},riskIndicatorName:function(){return u.ObservableUtils.get(this,"riskIndicator.name")||""}});var f=function(){function t(){}return t.dataSourceEnum=function(t){return n=t,e={transport:{read:function(t){t.success(a.EnumUtils.map(n,function(t,e){return new i.DataParameterSchemaModel({name:n.getName(e)||"",id:t,field:t,history:null,method:l.ComputationMethod.getDefault(),origin:null,priority:0,riskIndicator:null,tagDefinition:null,timeUnit:s.DashboardTimeUnit.DAYS,timeUnitCount:0,aggregation:c.ColumnAggregation.NONE})}))}},schema:{model:i.DataParameterSchemaModel},sort:{field:"name",dir:"asc"}},new kendo.data.DataSource(e);var n,e},t.dataSourceHistory=function(){return t={transport:{read:function(t){t.success(o.map(e.Histories.list(),function(t){return new i.DataParameterSchemaModel({name:t.name,id:t.key,field:null,history:t.key,method:l.ComputationMethod.getDefault(),origin:null,priority:0,riskIndicator:null,tagDefinition:null,timeUnit:s.DashboardTimeUnit.DAYS,timeUnitCount:0,aggregation:c.ColumnAggregation.NONE})}))}},schema:{model:i.DataParameterSchemaModel},sort:{field:"name",dir:"asc"}},new kendo.data.DataSource(t);var t},t.dataSourceRisk=function(){return t={transport:{read:function(t){n.RiskIndicatorRepository.fetchPorfolioColumnIdentifiables().then(function(t){return o.map(t,function(t){return new i.DataParameterSchemaModel({name:t.name,id:t.id,field:null,history:null,method:l.ComputationMethod.getDefault(),origin:null,priority:0,riskIndicator:t,tagDefinition:null,timeUnit:s.DashboardTimeUnit.DAYS,timeUnitCount:0,aggregation:c.ColumnAggregation.NONE})})}).then(t.success).catch(t.error)}},schema:{model:i.DataParameterSchemaModel},sort:{field:"name",dir:"asc"}},new kendo.data.DataSource(t);var t},t.dataSourceTag=function(){return t={transport:{read:function(t){r.TagDefinitionRepository.fetchIdentifiables().then(function(t){return o.map(t,function(t){return new i.DataParameterSchemaModel({name:t.name,id:t.id,field:null,history:null,method:l.ComputationMethod.getDefault(),origin:null,priority:0,riskIndicator:null,tagDefinition:t,timeUnit:s.DashboardTimeUnit.DAYS,timeUnitCount:0,aggregation:c.ColumnAggregation.NONE})})}).then(t.success).catch(t.error)}},schema:{model:i.DataParameterSchemaModel},sort:{field:"name",dir:"asc"}},new kendo.data.DataSource(t);var t},t.initMainListBox=function(t){!function(t){t.empty(),kendo.destroy(t);var e={dataTextField:"name",dataValueField:"id",dataSource:f.dataSourceEnum(d.DashboardComponentDataColumnType)};t.kendoListBox(e)}(t)},t.initSourceListBox=function(t){!function(t){t.empty(),kendo.destroy(t);var e={connectWith:m,dropSources:[m],selectable:"multiple",dataTextField:"name",dataValueField:"id",toolbar:{position:"right",tools:["transferTo","transferFrom","transferAllTo","transferAllFrom"]}};t.kendoListBox(e)}(t)},t.createTargetListBox=function(t,e){!function(t,n){t.empty(),kendo.destroy(t);var e={dataSource:{data:n.data,schema:{model:i.DataParameterSchemaModel},sort:{field:"priority",dir:"asc"}},connectWith:p,dropSources:[p],add:function(t){var e=t.dataItems;n.onAdd(e)},remove:function(t){var e=t.dataItems;n.delete(e)},selectable:"multiple",dataTextField:"name",dataValueField:"id"};t.kendoListBox(e)}(t,e)},t}();i.DataParameterUtils=f}),define("dashboard/component/data/columns/data/views/DataParameterModel",["require","exports","lodash","core/event/DEvent","core/api/ObjectFieldType","history/data/Histories"],function(t,e,i,n,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataParameterModel=void 0;var o=function(){function t(t){this.selectEvent=new n.DEvent(!1),this.addedEvent=new n.DEvent(!1),this.addedEvent=new n.DEvent(!1),this.updatedEvent=new n.DEvent(!1),this.deletedEvent=new n.DEvent(!1);var e=i.chain(t).each(function(t){(i.isNil(t.name)||i.isEmpty(t.name))&&(t.name=i.isNil(t.field)?i.isNil(t.history)?t.riskIndicator?t.riskIndicator.name:t.tagDefinition?t.tagDefinition.name:"?":r.Histories.getName(t.history):a.ObjectFieldType.getName(t.field)||"?")}).value();this._data=e,this._dict=i.keyBy(e,function(t){return t.id})}return t.prototype.onSelected=function(t){this.selectEvent.fire(t)},Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),t.prototype.delete=function(t){var n=this;i.each(t,function(e){delete n._dict[e.id],i.remove(n._data,function(t){return t.id===e.id})}),this.deletedEvent.fire(t)},t.prototype.onAdd=function(t){var e=this;i.each(t,function(t){e._dict[t.id]=t,e._data.push(t)}),this.addedEvent.fire(t)},t.prototype.onUpdated=function(t){this.updatedEvent.fire(t)},t}();e.DataParameterModel=o}),define("dashboard/component/data/columns/data/views/DataParameterEditWindow",["require","exports","i18n","lodash","text!templates/dashboards/component/data/data.column.edit.window.html","core/data/DObservableBuilder","core/api/DashboardTimeUnit","./DataParameterGrid","../DashboardComponentDataColumnType","core/api/ObjectFieldType","../ui/DataParameterUtils","history/ui/HistoryUI","./DataParameterModel","core/util/ObservableUtils","core/ui/Confirmation","portfolio/data/ColumnAggregation"],function(t,e,v,y,h,g,T,I,C,n,w,k,E,D,S,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataParameterEditWindow=void 0;var x=kendo.guid(),R=kendo.guid(),_=kendo.guid(),O="#columnType",U="#valueSource",A="#dataColumns",F=function(t,e){e?(t.addClass("k-state-default"),t.removeClass("k-state-disabled")):(t.removeClass("k-state-default"),t.addClass("k-state-disabled"))},L=function(t){return F(t.find("#"+_),!1)},P=function(t){return F(t.find("#"+x),!1)},M=function(t){return F(t.find("#"+R),!0)};function j(t){switch(t){case C.DashboardComponentDataColumnType.FIELD:return w.DataParameterUtils.dataSourceEnum(n.ObjectFieldType);case C.DashboardComponentDataColumnType.HISTORY:return w.DataParameterUtils.dataSourceHistory();case C.DashboardComponentDataColumnType.RISK:return w.DataParameterUtils.dataSourceRisk();case C.DashboardComponentDataColumnType.TAG:return w.DataParameterUtils.dataSourceTag()}return new kendo.data.DataSource}function G(t){kendo.destroy(t),t.empty();return t.kendoToolBar({}),t.data("kendoToolBar")}function i(b){return new Promise(function(t,e){var r=$("<div>").addClass("formWindow").appendTo($(document.body)),n=kendo.template(h)({});r.html(n);var i=new E.DataParameterModel(b.get("columns").toJSON()),a=I.DataParameterGrid.init(r.find("#dashboardDataParameterGrid"),b,!0);w.DataParameterUtils.initMainListBox(r.find(O)),w.DataParameterUtils.initSourceListBox(r.find(U)),w.DataParameterUtils.createTargetListBox(r.find(A),i);var o=r.find(A).data("kendoListBox"),d=o.dataItems();a.dataSource.data(d);r.kendoWindow({modal:!0,width:1600,minWidth:1200,visible:!1});var l=r.data("kendoWindow"),s=[];l.bind("close",function(){return kendo.destroy(r),r.remove(),!0});var u={entry:{name:null,field:null,history:null,id:0,method:null,origin:null,priority:0,riskIndicator:null,tagDefinition:null,timeUnit:T.DashboardTimeUnit.DAYS,timeUnitCount:0,aggregation:N.ColumnAggregation.NONE},sourceValues:j(C.DashboardComponentDataColumnType.FIELD),sourceType:C.DashboardComponentDataColumnType.FIELD,isTargetSelected:!1,isModified:!1},c=g.DObservableBuilder.of(u).add("mainChange",function(t){var e=r.find(O).data("kendoListBox"),n=e.select();if(1===n.length){var i=e.dataItem(n[0]).toJSON(),a=void 0;i?(a=i.id,t.set("sourceType",i.id)):(a=C.DashboardComponentDataColumnType.FIELD,t.set("sourceType",C.DashboardComponentDataColumnType.FIELD)),t.set("sourceType",a),t.set("sourceValues",j(a))}}).add("targetChange",function(t){t.set("isModified",!1);var e=o.select(),n=1===e.length?o.dataItem(e[0]).toJSON():null;i.onSelected(n)}).build();v.I18N.localize(r),c.bind(r),o.bind("dataBound",function(){1===o.select().length?c.set("isTargetSelected",!0):c.set("isTargetSelected",!1)});var p,m=G($("#columnToolbar"));m.add({type:"buttonGroup",text:"Actions",buttons:[{id:x,text:v.I18N.t("ui:toolbar.update"),click:function(){var t=o.select();if(1===t.length){var e=o.dataItem(t[0]);i.onUpdated(e)}}},{id:R,text:v.I18N.t("ui:toolbar.confirmAndClose"),icon:"check",click:function(){s=a.dataSource.data().toJSON(),t(s),l.close()}},{id:"cancel",text:v.I18N.t("ui:toolbar.cancel"),icon:"cancel",click:function(){l.close()}}]}),P(m.element),p=m.element,F(p.find("#"+R),!1),c.bindChange(function(t,e){var n;y.includes(["entry.method","entry.aggregation","entry.timeUnitCount","entry.timeUnit","entry.origin","entry.priority"],e)&&(1===o.select().length?t.set("isModified",!0):t.set("isModified",!1));"isModified"===e&&(t.get("isModified")?(n=m.element,F(n.find("#"+x),!0)):P(m.element))}),l.title(v.I18N.t("dashboards:components.DATA.parameters.title")).open().center(),k.HistoryUI.optionalWidget(r.find("#history"));var f=$("<div/>",{id:"toolGrid"});G(f).add({type:"buttonGroup",text:"Actions",buttons:[{id:_,class:"k-state-disabled",text:v.I18N.t("ui:toolbar.refresh"),icon:"refresh",click:function(){a.saveChanges(),L($(f))}}]}),$(f).insertBefore(a.element.find(".k-grouping-header")),L($(f)),i.selectEvent.register(function(t){t?(c.set("entry",t),c.set("isTargetSelected",!0)):c.set("isTargetSelected",!1)}),i.updatedEvent.register(function(t){var e;e=$(f),F(e.find("#"+_),!0),M(m.element),D.ObservableUtils.update(t,c.get("entry")),c.set("isModified",!1)}),i.addedEvent.register(function(t){M(m.element),a.dataSource.pushCreate(t)}),i.deletedEvent.register(function(e){S.Confirmation.confirmDelete(v.I18N.t("dashboards:components.DATA.parameters.deletionConfirmation")).then(function(t){!0===t&&(M(m.element),a.dataSource.pushDestroy(e),r.find(U).data("kendoListBox").dataSource.read())})})})}var a=function(){function t(){}return t.open=function(t){return i(t)},t}();e.DataParameterEditWindow=a}),define("dashboard/component/data/columns/data/views/DataParameterGrid",["require","exports","core/ui/grid/GridUtils","i18n","core/ui/NumberUI","core/api/ObjectFieldType","core/api/ComputationMethod","history/ui/HistoryUI","tag/ui/TagDefinitionUI","risk/ui/RiskIndicatorUI","core/api/DashboardOrigin","core/api/DashboardTimeUnit","core/ui/IntegerUI","./DataParameterEditWindow","core/util/Logger","../ui/DataParameterUtils","portfolio/data/ColumnAggregation"],function(t,e,a,r,o,d,l,s,u,c,p,m,f,b,v,y,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataParameterGrid=void 0;var n=function(){function t(){}return t.init=function(t,n,e){void 0===e&&(e=!1),kendo.destroy(t),t.empty();var i={dataSource:{data:n.get("columns"),schema:{model:y.DataParameterSchemaModel},sort:{field:"priority",dir:"asc"}},columns:[o.NumberUI.column({field:"priority",title:r.I18N.t("dashboards:components.fields.priority"),width:200}),d.ObjectFieldType.column({field:"field",title:r.I18N.t("dashboards:components.fields.field"),width:200}),l.ComputationMethod.column({field:"method",title:r.I18N.t("dashboards:components.fields.method"),width:200}),s.HistoryUI.optionalColumn({field:"history",title:r.I18N.t("dashboards:components.fields.history"),width:200}),u.TagDefinitionUI.column({field:"tagDefinition",title:r.I18N.t("dashboards:components.fields.tagDefinition"),width:200}),c.RiskIndicatorUI.column({field:"riskIndicator",title:r.I18N.t("dashboards:components.fields.riskIndicator"),width:200}),p.DashboardOrigin.column({field:"origin",title:r.I18N.t("dashboards:components.fields.origin"),width:200}),m.DashboardTimeUnit.column({field:"timeUnit",title:r.I18N.t("dashboards:components.fields.timeUnit"),width:200}),f.IntegerUI.column({field:"timeUnitCount",title:r.I18N.t("dashboards:components.fields.timeUnitCount"),width:200}),h.ColumnAggregation.column({field:"aggregation",title:r.I18N.t("dashboards:components.fields.aggregation"),width:200})],editable:!1,scrollable:!0,height:500,pageable:a.GridUtils.defaultPageable()};return e||(i.toolbar=[{name:"edit",iconClass:"k-icon k-i-edit",text:r.I18N.t("ui:toolbar.edit")},{name:"excel"}]),a.GridUtils.withDefaults(i),t.kendoGrid(i),t.find(".k-grid-edit").click(function(){var e=t.data("kendoGrid");e&&b.DataParameterEditWindow.open(n).then(function(t){n.set("columns",t),e.dataSource.data(t)}).catch(function(t){return v.Logger.error(t)})}),t.data("kendoGrid")},t}();e.DataParameterGrid=n}),define("text!templates/dashboards/edit/component.data.html",[],function(){return'<div id="dashboardComponentRoot">\n    <h1 data-i18n="dashboards:components.DATA.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:components.DATA.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardComponentActions"></div>\n\n    <h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" class="k-textbox" type="text" data-bind="value: sid"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="dashboards:components.fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]risk:validation.nameRequired"/>\n            </td>\n            <td>\n                <label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n            </td>\n            <td>\n                <input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="dashboards:components.fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n            </td>\n        </tr>\n    </table>\n\n    <div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n\n    <h2 data-i18n="dashboards:components.sections.parameters"></h2>\n\n    <div id="dashboardDataParameterGrid" class="floatingGrid_1600_px"></div>\n    <div class="clearer"></div>\n\n</div>\n\n\n\n'}),function(){var C=[].slice;define("views/dashboards/component/data/component",["jquery","lodash","kendo","i18n","ui","history/ui/HistoryUI","core/api/DashboardTimeUnit","core/api/ObjectFieldType","core/api/DashboardComponentType","core/api/DashboardOrigin","core/api/ComputationMethod","core/util/ObservableUtils","risk/ui/RiskIndicatorUI","tag/ui/TagDefinitionUI","core/ui/IntegerUI","core/ui/NumberUI","dashboard/component/views/DashboardComponentGrid","dashboard/component/data/columns/data/views/DataParameterGrid","text!templates/dashboards/edit/component.data.html","basic/ui/CurrencyUI"],function(n,t,e,i,a,r,o,d,l,s,u,c,p,m,f,b,v,y,h){var g,T,I;return b.NumberUI,f.IntegerUI,r.HistoryUI,c.ObservableUtils,p.RiskIndicatorUI,u.ComputationMethod,o.DashboardTimeUnit,d.ObjectFieldType,T=l.DashboardComponentType,s.DashboardOrigin,m.TagDefinitionUI,g=v.DashboardComponentGrid,I=y.DataParameterGrid,a.grid.transports,{updateValidatorOptions:function(t,e){return e},getTemplates:function(){return{view:h}},createRawModel:function(){return{id:0,sid:"",type:T.DATA,name:"",currency:null,description:"",columns:[]}},updateModel:function(t,e){var n;return t.set("id",e.id),t.set("sid",e.sid),t.set("type",e.type),t.set("name",e.name),t.set("currency",e.currency),t.set("description",e.description),(n=t.get("columns")).splice.apply(n,[0,n.length].concat(C.call(e.columns))),null},init:function(t){var e;return e=t.object,g.setup(n("#dashboardComponentGrid"),e.id),I.init(n("#dashboardDataParameterGrid"),t.model),null}}})}.call(this),define("text!templates/dashboards/edit/component.compliance.html",[],function(){return'<div id="dashboardComponentRoot">\n    <h1 data-i18n="dashboards:components.COMPLIANCE.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:components.COMPLIANCE.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardComponentActions"></div>\n\n    <h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" class="k-textbox" type="text" data-bind="value: sid"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="dashboards:components.fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]risk:validation.nameRequired"/>\n            </td>\n            <td>\n                <label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n            </td>\n            <td>\n                <input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency"/>\n            </td>\n\t\t</tr>\n\t\t<tr>\n            <td>\n                <label for="includeForms" data-i18n="dashboards:components.fields.includeForms"></label>\n            </td>\n            <td>\n                <input id="includeForms" type="checkbox" class="k-checkbox" data-bind="checked: includeForms"/>\n                <label for="includeForms" class="k-checkbox-label">&nbsp;</label>\n            </td>\n        <tr>\n        <tr>\n            <td>\n                <label for="includeCheckName" data-i18n="dashboards:components.fields.includeCheckName"></label>\n            </td>\n            <td>\n                <input id="includeCheckName" type="checkbox" class="k-checkbox" data-bind="checked: includeCheckName"/>\n                <label for="includeCheckName" class="k-checkbox-label">&nbsp;</label>\n            </td>\n        <tr>\n            <td>\n                <label for="description" data-i18n="dashboards:components.fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n            </td>\n        </tr>\n    </table>\n    <div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n\t<div data-bind="visible: includeForms">\n\t\t<h2 data-i18n="dashboards:components.sections.rolesForForms"></h2>\n\n\t\t<div id="roles" data-role="domosrolemultiselect" data-bind="value: rolesForForms"></div>\n\t</div>\n</div>\n\n\n\n'}),define("core/api/EntityRole",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntityRole=void 0;var r,o;(r=e.EntityRole||(e.EntityRole={}))[r.EXPERT=1]="EXPERT",r[r.PROPERTY_MANAGER=2]="PROPERTY_MANAGER",r[r.LAWYER=3]="LAWYER",r[r.LLTA=4]="LLTA",r[r.ACCOUNTANT=5]="ACCOUNTANT",r[r.ADVISER=6]="ADVISER",r[r.TENANT=7]="TENANT",r[r.INVESTOR=8]="INVESTOR",r[r.DEPOSITARY=9]="DEPOSITARY",r[r.AUDITOR=10]="AUDITOR",r[r.VALUATOR=11]="VALUATOR",r[r.BOARD=12]="BOARD",r[r.CUSTODIAN=13]="CUSTODIAN",r[r.ADMINISTRATIVE_AGENT=14]="ADMINISTRATIVE_AGENT",r[r.TRANSFER_AGENT=15]="TRANSFER_AGENT",r[r.REGISTRATION_AGENT=16]="REGISTRATION_AGENT",r[r.DOMICILIATION_AGENT=17]="DOMICILIATION_AGENT",r[r.U11=18]="U11",r[r.CRS=19]="CRS",r[r.FATCA=20]="FATCA",r[r.PRIME_BROKER=21]="PRIME_BROKER",r[r.MANCO=22]="MANCO",r[r.PORTFOLIO_MANAGER=23]="PORTFOLIO_MANAGER",r[r.DISTRIBUTOR=24]="DISTRIBUTOR",r[r.INITIATOR=25]="INITIATOR",r[r.PROSPECT=26]="PROSPECT",r[r.PRINCIPAL_PAYING_AGENT=27]="PRINCIPAL_PAYING_AGENT",r[r.PLACEMENT_AGENT=28]="PLACEMENT_AGENT",r[r.SENIOR_MANAGER_DIRECTOR=29]="SENIOR_MANAGER_DIRECTOR",r[r.CONTROLLING_PERSON=30]="CONTROLLING_PERSON",r[r.SETTLOR=31]="SETTLOR",r[r.TRUSTEE=32]="TRUSTEE",r[r.PROTECTOR=33]="PROTECTOR",r[r.BENEFICIARY=34]="BENEFICIARY",r[r.OTHER_EQUIVALENT=35]="OTHER_EQUIVALENT",r[r.CONTROLLING_PERSON_OTHER_MEANS=36]="CONTROLLING_PERSON_OTHER_MEANS",r[r.SIGNATORY=37]="SIGNATORY",r[r.SHAREHOLDER_10_PCT=38]="SHAREHOLDER_10_PCT",r[r.FUNDRAISING_PROSPECT=39]="FUNDRAISING_PROSPECT",r[r.DIRECTOR=40]="DIRECTOR",r[r.OTHER=41]="OTHER",(o=e.EntityRole||(e.EntityRole={})).getName=a.EnumUtils.createNameFn("object:roles",o),o.widget=i.EnumWidgetUtils.createDropList("DomosEntityRole",o,!0,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget),o.widgetMulti=i.EnumWidgetUtils.createMultiSelect("DomosRoleMultiSelect",o),o.columnMulti=n.EnumColumnUtils.createMultiFactory(o,o.widgetMulti)}),function(){var u=[].slice;define("views/dashboards/component/compliance/component",["jquery","lodash","kendo","i18n","ui","core/api/DashboardComponentType","dashboard/component/views/DashboardComponentGrid","text!templates/dashboards/edit/component.compliance.html","basic/ui/CurrencyUI","core/api/EntityRole"],function(n,t,e,i,a,r,o,d){var l,s;return s=r.DashboardComponentType,l=o.DashboardComponentGrid,{updateValidatorOptions:function(t,e){return e},getTemplates:function(){return{view:d}},createRawModel:function(){return{id:0,sid:"",type:s.COMPLIANCE,name:"",currency:null,description:"",includeForms:!1,includeCheckName:!1,rolesForForms:[]}},updateModel:function(t,e){var n;return t.set("id",e.id),t.set("sid",e.sid),t.set("type",e.type),t.set("name",e.name),t.set("currency",e.currency),t.set("description",e.description),t.set("includeForms",e.includeForms),t.set("includeCheckName",e.includeCheckName),(n=t.get("rolesForForms")).splice.apply(n,[0,n.length].concat(u.call(e.rolesForForms))),null},init:function(t){var e;return e=t.object,l.setup(n("#dashboardComponentGrid"),e.id),null}}})}.call(this),define("text!templates/dashboards/edit/component.contextual.text.html",[],function(){return'<div id="dashboardComponentRoot">\n    <h1 data-i18n="dashboards:components.CONTEXTUAL_TEXT.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:components.CONTEXTUAL_TEXT.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardComponentActions"></div>\n\n    <h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" class="k-textbox" type="text" data-bind="value: sid"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="dashboards:components.fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]risk:validation.nameRequired"/>\n            </td>\n            <td>\n                <label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n            </td>\n            <td>\n                <input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="dashboards:components.fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n            </td>\n        </tr>\n    </table>\n\n    <h2 data-i18n="dashboards:components.sections.text"></h2>\n\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="perimeterSelector" data-i18n="dashboards:components.fields.perimeter"></label>\n            </td>\n            <td>\n                <input id="perimeterSelector"/>\n            </td>\n        </tr>\n    </table>\n    <div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n\n    <h3 data-i18n="dashboards:components.sections.title"></h3>\n\n    <div id="dashboardDefaultTitleEditor"></div>\n\n    <h3 data-i18n="dashboards:components.sections.text"></h3>\n\n    <div id="dashboardDefaultTextEditor"></div>\n\n\n    <div id="dashboardContextualTextHelp" class="dashboardHelp"></div>\n\n</div>\n\n\n\n'}),function(){var I=[].slice;define("views/dashboards/component/contextual/component",["jquery","lodash","kendo","i18n","ui","core/api/DashboardComponentType","dashboard/component/views/DashboardComponentGrid","text!templates/dashboards/edit/component.contextual.text.html","text!templates/dashboards/edit/text.variable.help.html","basic/ui/CurrencyUI"],function(r,d,o,t,e,n,i,a,l){var s,u,c,p,m,f,b,v,y,h,g,T;return u=n.DashboardComponentType,s=i.DashboardComponentGrid,m=function(t){var e,n,i;return n=t.model,(i=t.contextualTextContext.selectedPerimeter)?(e=d.find(n.get("perimeters").toJSON(),{perimeter:i}))?e.title:"":n.get("title")},y=function(t,e){var n,i,a,r,o;return i=t.model,(o=t.contextualTextContext.selectedPerimeter)?(r=(a=i.get("perimeters")).toJSON(),(n=d.find(r,{perimeter:o}))?n.title=e:r.push({perimeter:o,title:e,text:""}),void a.splice.apply(a,[0,a.length].concat(I.call(r)))):i.set("title",e)},p=function(t){var e,n,i;return n=t.model,(i=t.contextualTextContext.selectedPerimeter)?(e=d.find(n.get("perimeters").toJSON(),{perimeter:i}))?e.text:"":n.get("text")},v=function(t,e){var n,i,a,r,o;return i=t.model,(o=t.contextualTextContext.selectedPerimeter)?(r=(a=i.get("perimeters")).toJSON(),(n=d.find(r,{perimeter:o}))?n.text=e:r.push({perimeter:o,title:"",text:e}),void a.splice.apply(a,[0,a.length].concat(I.call(r)))):i.set("text",e)},g=function(e){var t;return t=r("#perimeterSelector"),o.destroy(t),t.kendoDomosDashboardPerimeter({change:function(t){return e.contextualTextContext.selectedPerimeter=parseInt(this.value()),T(e),h(e)}}),null},b=function(t){var e;if(e=t.contextualTextContext.titleEditor)return y(t,e.value())},f=function(t){var e;if(e=t.contextualTextContext.textEditor)return v(t,e.value())},c=function(t){return t.replace(/(<\/?)strong(\s?)/g,"$1b$2").replace(/(<\/?)em(\s?)/g,"$1i$2")},T=function(t){var e,n,i,a;return n=r("#dashboardDefaultTitleEditor"),o.unbind(n),o.destroy(n),n.empty(),t.contextualTextContext.textEditor=null,a=m(t),(e=r("<textarea>").addClass("componentTitleEditor").appendTo(n)).val(a),i={deserialization:{custom:c},serialization:{custom:c},tools:["bold","italic","underline","strikethrough","createLink","unlink","foreColor","backColor","fontName"],change:b.bind(null,t)},e.kendoEditor(i),t.contextualTextContext.titleEditor=e.data("kendoEditor"),null},h=function(t){var e,n,i,a;return n=r("#dashboardDefaultTextEditor"),o.unbind(n),o.destroy(n),n.empty(),t.contextualTextContext.textEditor=null,a=p(t),(e=r("<textarea>").addClass("componentEditor").appendTo(n)).val(a),i={deserialization:{custom:c},serialization:{custom:c},tools:["formatting","bold","italic","underline","strikethrough","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","indent","outdent","createLink","unlink","insertImage","foreColor","backColor","fontName","fontSize","createTable"],change:f.bind(null,t)},e.kendoEditor(i),t.contextualTextContext.textEditor=e.data("kendoEditor"),null},{updateValidatorOptions:function(t,e){return e},getTemplates:function(){return{view:a}},createRawModel:function(){return{id:0,sid:"",type:u.CONTEXTUAL_TEXT,name:"",currency:null,description:"",title:"",text:"",perimeters:[]}},updateModel:function(t,e){var n;return t.set("id",e.id),t.set("sid",e.sid),t.set("type",e.type),t.set("name",e.name),t.set("currency",e.currency),t.set("description",e.description),t.set("title",e.title),t.set("text",e.text),(n=t.get("perimeters")).splice.apply(n,[0,n.length].concat(I.call(e.perimeters))),null},viewShow:function(t){return t.contextualTextContext.selectedPerimeter=null,T(t),h(t),g(t),null},init:function(t){var e,n;return n={selectedPerimeter:null,titleEditor:null,textEditor:null},t.contextualTextContext=n,e=t.object,s.setup(r("#dashboardComponentGrid"),e.id),r("#dashboardContextualTextHelp").append(l),null}}})}.call(this),define("text!templates/dashboards/edit/component.complex.text.html",[],function(){return'<div id="dashboardComponentRoot">\n\t<h1 data-i18n="dashboards:components.COMPLEX_TEXT.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="dashboards:components.COMPLEX_TEXT.edit" data-bind="invisible: isNew"></h1>\n\n\t<div id="dashboardComponentActions"></div>\n\n\t<h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="sid" class="k-textbox" type="text" data-bind="value: sid"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="name" data-i18n="dashboards:components.fields.name"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]risk:validation.nameRequired"/>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="description" data-i18n="dashboards:components.fields.description"></label>\n\t\t\t</td>\n\t\t\t<td colspan="3">\n\t\t\t\t<textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\t<div data-bind="invisible: isNew">\n\t\t<h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n\n\t\t<div id="dashboardComponentGrid" class="floatingGrid"></div>\n\t\t<div class="clearer"></div>\n\t</div>\n\t<h2 data-i18n="dashboards:components.sections.title"></h2>\n\n\t<div id="dashboardTitleEditor"></div>\n\n\t<h2 data-i18n="dashboards:components.sections.text"></h2>\n\n\t<div id="dashboardTextEditor"></div>\n\n\t<h2 data-i18n="dashboards:components.sections.script"></h2>\n\n\t<div id="script" class="riskScript"></div>\n\t<div id="scriptHelpRoot">\n\t\t<button class="k-button" data-i18n="scripts:editor.helpButton" data-bind="click: helpClick"></button>\n\t</div>\n\n\t<div id="dashboardTextHelp" class="dashboardHelp"></div>\n</div>\n\n\n\n'}),function(){define("views/dashboards/component/complex/component",["jquery","lodash","kendo","i18n","ui","core/api/DashboardComponentType","views/common/script.help","dashboard/component/views/DashboardComponentGrid","text!templates/dashboards/edit/component.complex.text.html","text!templates/dashboards/edit/text.variable.help.html","basic/ui/CurrencyUI"],function(r,t,o,e,n,i,a,d,l,s){var u,c,p,m,f,b,v,y,h,g;return c=i.DashboardComponentType,u=d.DashboardComponentGrid,void 0===g&&(g=window.ace),p=g,f=function(t){return t.editorLocked||t.model.set("script",t.editor.getSession().getValue()),null},v=function(t){var e;if(e=t.titleEditor)return t.model.set("title",e.value())},b=function(t){var e;if(e=t.textEditor)return t.model.set("text",e.value())},m=function(t){return t.replace(/(<\/?)strong(\s?)/g,"$1b$2").replace(/(<\/?)em(\s?)/g,"$1i$2")},h=function(t){var e,n,i,a;return n=r("#dashboardTitleEditor"),o.unbind(n),o.destroy(n),n.empty(),t.titleEditor=null,a=t.model.get("title"),(e=r("<textarea>").addClass("componentTitleEditor").appendTo(n)).val(a),i={deserialization:{custom:m},serialization:{custom:m},tools:["bold","italic","underline","strikethrough","createLink","unlink","foreColor","backColor","fontName","fontSize"],change:v.bind(null,t)},e.kendoEditor(i),t.titleEditor=e.data("kendoEditor"),null},y=function(t){var e,n,i,a;return n=r("#dashboardTextEditor"),o.unbind(n),o.destroy(n),n.empty(),t.textEditor=null,a=t.model.get("text"),(e=r("<textarea>").addClass("componentEditor").appendTo(n)).val(a),i={deserialization:{custom:m},serialization:{custom:m},tools:["formatting","bold","italic","underline","strikethrough","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","indent","outdent","createLink","unlink","insertImage","foreColor","backColor","fontName","fontSize","createTable"],change:b.bind(null,t)},e.kendoEditor(i),t.textEditor=e.data("kendoEditor"),null},{updateValidatorOptions:function(t,e){return e},getTemplates:function(){return{view:l}},createRawModel:function(){return{id:0,sid:"",type:c.COMPLEX_TEXT,name:"",currency:null,description:"",title:"",text:"",script:""}},updateModel:function(t,e){return t.set("id",e.id),t.set("sid",e.sid),t.set("type",e.type),t.set("name",e.name),t.set("currency",e.currency),t.set("description",e.description),t.set("title",e.title),t.set("text",e.text),t.set("script",e.script),null},viewShow:function(t){var e;return h(t),y(t),(e=t.editor)&&(t.editorLocked=!0,e.getSession().setValue(t.model.get("script")),e.getSession().setUndoManager(new p.UndoManager),e.resize(),t.editorLocked=!1),null},init:function(t){var e,n,i;return i={enableBasicAutocompletion:!(t.editorLocked=!1),fontSize:"12pt",maxLines:50},(n=p.edit("script")).setOptions(i),n.setTheme("ace/theme/chrome"),n.getSession().setMode("ace/mode/javascript"),(t.editor=n).getSession().on("change",f.bind(null,t)),a.setup(t),r("#dashboardTextHelp").append(s),e=t.object,u.setup(r("#dashboardComponentGrid"),e.id),null}}})}.call(this),define("text!templates/dashboards/edit/component.spreadsheet.html",[],function(){return'<div id="dashboardComponentRoot">\n    <h1 data-i18n="dashboards:components.SPREADSHEET.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:components.SPREADSHEET.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardComponentActions"></div>\n\n    <h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" class="k-textbox" type="text" data-bind="value: sid"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="dashboards:components.fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]risk:validation.nameRequired"/>\n            </td>\n            <td>\n                <label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n            </td>\n            <td>\n                <input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="dashboards:components.fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n            </td>\n        </tr>\n    </table>\n\n    <div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n\n    <h2 data-i18n="dashboards:components.section.spreadsheet"></h2>\n\n    <div id="dashboardSpreadsheet" class="spreadsheet"></div>\n\n    <p></p>\n</div>\n\n\n\n'}),function(){var p=[].slice;define("views/dashboards/component/spreadsheet/component",["jquery","lodash","kendo","i18n","ui","core/api/DashboardComponentType","dashboard/component/views/DashboardComponentGrid","text!templates/dashboards/edit/component.spreadsheet.html","basic/ui/CurrencyUI"],function(i,t,a,e,n,r,o,d){var l,s,u,c;return s=r.DashboardComponentType,l=o.DashboardComponentGrid,c=function(t,e){var n;return n=e.sender.toJSON(),t.model.set("spreadsheet",JSON.stringify(n)),null},u=function(t){var e,n;return e=i("#dashboardSpreadsheet"),a.destroy(e),e.empty(),n=(n=t.model.get("spreadsheet"))?JSON.parse(n):{},e.kendoSpreadsheet(n),e.data("kendoSpreadsheet").bind("change",c.bind(null,t)),null},{updateValidatorOptions:function(t,e){return e},getTemplates:function(){return{view:d}},createRawModel:function(){return{id:0,sid:"",type:s.SPREADSHEET,name:"",currency:null,description:"",spreadsheet:""}},updateModel:function(t,e){return t.set("id",e.id),t.set("sid",e.sid),t.set("type",e.type),t.set("name",e.name),t.set("currency",e.currency),t.set("description",e.description),t.set("spreadsheet",e.spreadsheet),dashboards.splice.apply(dashboards,[0,dashboards.length].concat(p.call(e.dashboards))),null},viewShow:function(t){var e;return u(t),e=t.object,l.setup(i("#dashboardComponentGrid"),e.id),null},init:function(t){return null}}})}.call(this),define("text!templates/dashboards/edit/component.document.image.html",[],function(){return'<div id="dashboardComponentRoot">\n    <h1 data-i18n="dashboards:components.DOCUMENT_IMAGE.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:components.DOCUMENT_IMAGE.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardComponentActions"></div>\n\n    <h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n\n    <p>\n        This component displays an image from an object documents.<br/>\n        When the dashboard is run on a single asset or when the dashboard perimeter consists of a single object,\n        the first document (of image type) having the specified tag is used for display.\n    </p>\n\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" class="k-textbox" type="text" data-bind="value: sid"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="dashboards:components.fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]risk:validation.nameRequired"/>\n            </td>\n            <td>\n                <label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n            </td>\n            <td>\n                <input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="documentTag" data-i18n="dashboards:components.fields.documentTag"></label>\n            </td>\n            <td>\n                <input id="documentTag" data-role="domosdocumenttag" data-bind="value: documentTag"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="dashboards:components.fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n            </td>\n        </tr>\n    </table>\n    <div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n</div>\n\n\n\n'}),function(){define("views/dashboards/component/document/component",["jquery","lodash","kendo","i18n","ui","core/api/DashboardComponentType","dashboard/component/views/DashboardComponentGrid","text!templates/dashboards/edit/component.document.image.html","basic/ui/CurrencyUI","document/ui/DocumentTagUI"],function(n,t,e,i,a,r,o,d){var l,s;return s=r.DashboardComponentType,l=o.DashboardComponentGrid,{updateValidatorOptions:function(t,e){return e},getTemplates:function(){return{view:d}},createRawModel:function(){return{id:0,sid:"",type:s.DOCUMENT_IMAGE,name:"",currency:null,description:"",documentTag:null}},updateModel:function(t,e){return t.set("id",e.id),t.set("sid",e.sid),t.set("type",e.type),t.set("name",e.name),t.set("currency",e.currency),t.set("description",e.description),t.set("documentTag",e.documentTag),null},viewShow:function(t){return null},init:function(t){var e;return e=t.object,l.setup(n("#dashboardComponentGrid"),e.id),null}}})}.call(this),define("text!templates/dashboards/edit/component.sub.html",[],function(){return'<div id="dashboardComponentRoot">\n    <h1 data-i18n="dashboards:components.SUB_COMPONENT.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:components.SUB_COMPONENT.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardComponentActions"></div>\n\n    <h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" class="k-textbox" type="text" data-bind="value: sid"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="dashboards:components.fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]risk:validation.nameRequired"/>\n            </td>\n            <td>\n                <label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n            </td>\n            <td>\n                <input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="dashboard" data-i18n="dashboards:components.fields.dashboard"></label>\n            </td>\n            <td>\n                <input id="dashboard" name="Dashboard" data-role="domosassetdashboard" data-bind="value: dashboard" required/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="categories" data-i18n="dashboards:components.fields.filter"></label>\n            </td>\n            <td>\n                <input id="categories" name="categories" data-role="domosassetcategorymultiselect" data-bind="value: categories"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="dashboards:components.fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n            </td>\n        </tr>\n    </table>\n\n    <div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n\n</div>\n\n\n\n'}),function(){var u=[].slice;define("views/dashboards/component/sub/component",["jquery","lodash","kendo","i18n","ui","core/api/DashboardComponentType","dashboard/component/views/DashboardComponentGrid","text!templates/dashboards/edit/component.sub.html","basic/ui/CurrencyUI","dashboard/ui/DashboardUI"],function(n,t,e,i,a,r,o,d){var l,s;return s=r.DashboardComponentType,l=o.DashboardComponentGrid,{updateValidatorOptions:function(t,e){return e},getTemplates:function(){return{view:d}},createRawModel:function(){return{id:0,sid:"",type:s.SUB_COMPONENT,name:"",currency:null,description:"",dashboard:null,categories:[]}},updateModel:function(t,e){var n;return t.set("id",e.id),t.set("sid",e.sid),t.set("type",e.type),t.set("name",e.name),t.set("currency",e.currency),t.set("description",e.description),t.set("dashboard",e.dashboard),(n=t.get("categories")).splice.apply(n,[0,n.length].concat(u.call(e.categories))),null},viewShow:function(t){return null},init:function(t){var e;return e=t.object,l.setup(n("#dashboardComponentGrid"),e.id),null}}})}.call(this),define("text!templates/dashboards/edit/component.table.html",[],function(){return'<div id="dashboardComponentRoot">\n    <h1 data-i18n="dashboards:components.TABLE.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:components.TABLE.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardComponentActions"></div>\n\n    <h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" class="k-textbox" type="text" data-bind="value: sid"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="dashboards:components.fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]risk:validation.nameRequired"/>\n            </td>\n            <td>\n                <label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n            </td>\n            <td>\n                <input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="dashboards:components.fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n            </td>\n        </tr>\n    </table>\n\n    <div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n\n    <h2 data-i18n="dashboards:components.sections.script"></h2>\n\n    <div id="tableScript" class="riskScript"></div>\n    <div id="scriptHelpRoot">\n\t\t<button class="k-button" data-i18n="scripts:editor.helpButton" data-bind="click: helpClick"></button>\n\t</div>\n\n</div>\n\n\n\n'}),function(){define("views/dashboards/component/table/component",["jquery","lodash","kendo","i18n","core/api/DashboardComponentType","views/common/script.help","dashboard/component/views/DashboardComponentGrid","text!templates/dashboards/edit/component.table.html","basic/ui/CurrencyUI"],function(a,t,e,n,i,r,o,d){var l,s,u,c,p;return s=i.DashboardComponentType,l=o.DashboardComponentGrid,void 0===p&&(p=window.ace),u=p,c=function(t){return t.editorLocked||t.model.set("script",t.editor.getSession().getValue()),null},{updateValidatorOptions:function(t,e){return e},getTemplates:function(){return{view:d}},createRawModel:function(){return{id:0,sid:"",type:s.TABLE,name:"",currency:null,script:""}},updateModel:function(t,e){return t.set("id",e.id),t.set("sid",e.sid),t.set("type",e.type),t.set("name",e.name),t.set("currency",e.currency),t.set("description",e.description),t.set("script",e.script),null},viewShow:function(t){var e;return(e=t.editor)&&(t.editorLocked=!0,e.getSession().setValue(t.model.get("script")),e.getSession().setUndoManager(new u.UndoManager),e.resize(),t.editorLocked=!1),null},init:function(t){var e,n,i;return i={enableBasicAutocompletion:!(t.editorLocked=!1),fontSize:"12pt",maxLines:50},(n=u.edit("tableScript")).setOptions(i),n.setTheme("ace/theme/chrome"),n.getSession().setMode("ace/mode/javascript"),(t.editor=n).getSession().on("change",c.bind(null,t)),e=t.object,l.setup(a("#dashboardComponentGrid"),e.id),r.setup(t),null}}})}.call(this),define("dashboard/component/Component",["require","exports","./views/DashboardComponentGrid"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0;var i=function(){function t(){}return t.init=function(t){t.editorLocked=!1;var e=t.model;n.DashboardComponentGrid.setup($("#dashboardComponentGrid"),e.get("dashboards"))},t.viewShow=function(t){t.editor&&(t.editorLocked=!1)},t.updateModel=function(t,e){t.set("id",e.id),t.set("sid",e.sid),t.set("type",e.type),t.set("name",e.name),t.set("currency",e.currency),t.set("description",e.description)},t.updateValidatorOptions=function(t,e){return e},t}();e.Component=i}),define("text!templates/dashboards/edit/component.capital.call.html",[],function(){return'<div id="dashboardComponentRoot">\n    <h1 data-i18n="dashboards:components.CAPITAL_CALL.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:components.CAPITAL_CALL.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardComponentActions"></div>\n\n    <h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" class="k-textbox" type="text" data-bind="value: sid" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="dashboards:components.fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required"\n                    data-i18n="[validationMessage]risk:validation.nameRequired" />\n            </td>\n            <td>\n                <label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n            </td>\n            <td>\n                <input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="dashboards:components.fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox"\n                    data-bind="value: description"></textarea>\n            </td>\n        </tr>\n    </table>\n    <div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n</div>'}),define("dashboard/component/capitalCall/CapitalCall",["require","exports","tslib","../Component","text!templates/dashboards/edit/component.capital.call.html","core/api/DashboardComponentType","../views/DashboardComponentGrid"],function(t,e,n,i,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CapitalCall=void 0;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.getTemplates=function(){return{view:a}},e.createRawModel=function(){return{id:0,sid:"",type:r.DashboardComponentType.CAPITAL_CALL,name:"",description:"",currency:null}},e.init=function(t){var e=t.object;o.DashboardComponentGrid.setup($("#dashboardComponentGrid"),e.id)},e}(i.Component);e.CapitalCall=d}),define("text!templates/dashboards/edit/component.commitment.html",[],function(){return'<div id="dashboardComponentRoot">\n    <h1 data-i18n="dashboards:components.COMMITMENT.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:components.COMMITMENT.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardComponentActions"></div>\n\n    <h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" class="k-textbox" type="text" data-bind="value: sid" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="dashboards:components.fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required"\n                    data-i18n="[validationMessage]risk:validation.nameRequired" />\n            </td>\n            <td>\n                <label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n            </td>\n            <td>\n                <input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="dashboards:components.fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox"\n                    data-bind="value: description"></textarea>\n            </td>\n        </tr>\n    </table>\n    <div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n</div>'}),define("dashboard/component/commitment/Commitment",["require","exports","tslib","text!templates/dashboards/edit/component.commitment.html","core/api/DashboardComponentType","../Component","../views/DashboardComponentGrid"],function(t,e,n,i,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Commitment=void 0;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.getTemplates=function(){return{view:i}},e.createRawModel=function(){return{id:0,sid:"",type:a.DashboardComponentType.COMMITMENT,name:"",currency:null,description:""}},e.init=function(t){var e=t.object;o.DashboardComponentGrid.setup($("#dashboardComponentGrid"),e.id)},e}(r.Component);e.Commitment=d}),define("text!templates/dashboards/edit/component.distribution.html",[],function(){return'<div id="dashboardComponentRoot">\n    <h1 data-i18n="dashboards:components.DISTRIBUTION.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:components.DISTRIBUTION.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardComponentActions"></div>\n\n    <h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" class="k-textbox" type="text" data-bind="value: sid" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="dashboards:components.fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required"\n                    data-i18n="[validationMessage]risk:validation.nameRequired" />\n            </td>\n            <td>\n                <label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n            </td>\n            <td>\n                <input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="dashboards:components.fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox"\n                    data-bind="value: description"></textarea>\n            </td>\n        </tr>\n    </table>\n    <div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n</div>'}),define("dashboard/component/distribution/Distribution",["require","exports","tslib","../Component","text!templates/dashboards/edit/component.distribution.html","core/api/DashboardComponentType","../views/DashboardComponentGrid"],function(t,e,n,i,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Distribution=void 0;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.getTemplates=function(){return{view:a}},e.createRawModel=function(){return{id:0,sid:"",type:r.DashboardComponentType.DISTRIBUTION,name:"",currency:null,description:""}},e.init=function(t){var e=t.object;o.DashboardComponentGrid.setup($("#dashboardComponentGrid"),e.id)},e}(i.Component);e.Distribution=d}),define("text!templates/dashboards/edit/component.capitalAccount.html",[],function(){return'<div id="dashboardComponentRoot">\n    <h1 data-i18n="dashboards:components.CAPITAL_ACCOUNT.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:components.CAPITAL_ACCOUNT.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardComponentActions"></div>\n\n    <h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" class="k-textbox" type="text" data-bind="value: sid" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="dashboards:components.fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required"\n                    data-i18n="[validationMessage]risk:validation.nameRequired" />\n            </td>\n            <td>\n                <label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n            </td>\n            <td>\n                <input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="dashboards:components.fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox"\n                    data-bind="value: description"></textarea>\n            </td>\n        </tr>\n    </table>\n    <div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n</div>'}),define("dashboard/component/capitalAccount/CapitalAccount",["require","exports","tslib","../Component","text!templates/dashboards/edit/component.capitalAccount.html","core/api/DashboardComponentType","../views/DashboardComponentGrid"],function(t,e,n,i,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CapitalAccount=void 0;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.getTemplates=function(){return{view:a}},e.createRawModel=function(){return{id:0,sid:"",type:r.DashboardComponentType.CAPITAL_ACCOUNT,name:"",currency:null,description:""}},e.init=function(t){var e=t.object;o.DashboardComponentGrid.setup($("#dashboardComponentGrid"),e.id)},e}(i.Component);e.CapitalAccount=d}),define("text!templates/dashboards/edit/component.operations.html",[],function(){return'<div id="dashboardComponentRoot">\n    <h1 data-i18n="dashboards:components.OPERATIONS.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:components.OPERATIONS.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardComponentActions"></div>\n\n    <h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n\t<table class="formTable">\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="sid" class="k-textbox" type="text" data-bind="value: sid" />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="name" data-i18n="dashboards:components.fields.name"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required"\n\t\t\t\t\t\t\tdata-i18n="[validationMessage]risk:validation.nameRequired" />\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency" />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="description" data-i18n="dashboards:components.fields.description"></label>\n\t\t\t\t</td>\n\t\t\t\t<td colspan="3">\n\t\t\t\t\t<textarea id="description" name="description" class="k-textbox"\n\t\t\t\t\t\t\tdata-bind="value: description"></textarea>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="subscription" data-i18n="dashboards:components.fields.operations.subscription"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="subscription" type="checkbox" class="k-checkbox" data-bind="checked: subscription"/>\n\t\t\t\t<label for="subscription" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="capitalCall" data-i18n="dashboards:components.fields.operations.capitalCall"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="capitalCall" type="checkbox" class="k-checkbox" data-bind="checked: capitalCall"/>\n\t\t\t\t<label for="capitalCall" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="recallable" data-i18n="dashboards:components.fields.operations.recallable"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="recallable" type="checkbox" class="k-checkbox" data-bind="checked: recallable"/>\n\t\t\t\t<label for="recallable" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="netDistribution" data-i18n="dashboards:components.fields.operations.netDistribution"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="netDistribution" type="checkbox" class="k-checkbox" data-bind="checked: netDistribution"/>\n\t\t\t\t<label for="netDistribution" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="capitalCallSplit" data-i18n="dashboards:components.fields.operations.capitalCallSplit"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="capitalCallSplit" type="checkbox" class="k-checkbox" data-bind="checked: capitalCallSplit"/>\n\t\t\t\t<label for="capitalCallSplit" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="distributionSplit" data-i18n="dashboards:components.fields.operations.distributionSplit"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="distributionSplit" type="checkbox" class="k-checkbox" data-bind="checked: distributionSplit"/>\n\t\t\t\t<label for="distributionSplit" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t\t\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="fundTransfer" data-i18n="dashboards:components.fields.operations.fundTransfer"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="fundTransfer" type="checkbox" class="k-checkbox" data-bind="checked: fundTransfer"/>\n\t\t\t\t<label for="fundTransfer" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="redemption" data-i18n="dashboards:components.fields.operations.redemption"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="redemption" type="checkbox" class="k-checkbox" data-bind="checked: redemption"/>\n\t\t\t\t<label for="redemption" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="transparency" data-i18n="dashboards:components.fields.operations.transparency"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="transparency" type="checkbox" class="k-checkbox" data-bind="checked: transparency"/>\n\t\t\t\t<label for="transparency" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="paymentCapitalCall" data-i18n="dashboards:components.fields.operations.paymentCapitalCall"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="paymentCapitalCall" type="checkbox" class="k-checkbox" data-bind="checked: paymentCapitalCall"/>\n\t\t\t\t<label for="paymentCapitalCall" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="reserveTransfer" data-i18n="dashboards:components.fields.operations.reserveTransfer"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="reserveTransfer" type="checkbox" class="k-checkbox" data-bind="checked: reserveTransfer" />\n\t\t\t\t<label for="reserveTransfer" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="capitalCallTypes" data-i18n="dashboards:components.fields.operations.capitalCallTypes"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="capitalCallTypes" data-role="domoscapitalcalltypemulti" data-bind="value: capitalCallTypes" />\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="distributionTypes" data-i18n="dashboards:components.fields.operations.distributionTypes"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="distributionTypes" data-role="domosdistributiontypemulti" data-bind="value: distributionTypes" />\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n\t<div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n</div>\n'}),define("dashboard/component/operations/Operations",["require","exports","tslib","../Component","text!templates/dashboards/edit/component.operations.html","core/api/DashboardComponentType","core/util/ObservableUtils","../views/DashboardComponentGrid"],function(t,e,n,i,a,r,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Operations=void 0;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.getTemplates=function(){return{view:a}},e.createRawModel=function(){return{id:0,sid:"",type:r.DashboardComponentType.OPERATIONS,name:"",currency:null,description:"",subscription:!0,capitalCall:!0,recallable:!0,netDistribution:!0,capitalCallSplit:!0,distributionSplit:!0,fundTransfer:!0,redemption:!0,transparency:!1,paymentCapitalCall:!0,reserveTransfer:!0,distributionTypes:[],capitalCallTypes:[]}},e.updateModel=function(t,e){o.ObservableUtils.update(t,e)},e.init=function(t){var e=t.object;d.DashboardComponentGrid.setup($("#dashboardComponentGrid"),e.id)},e}(i.Component);e.Operations=l}),define("text!templates/dashboards/edit/component.checkName.html",[],function(){return'<div id="dashboardComponentRoot">\n    <h1 data-i18n="dashboards:components.CHECK_NAME.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:components.CHECK_NAME.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardComponentActions"></div>\n\n    <h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n\t<table class="formTable">\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="sid" class="k-textbox" type="text" data-bind="value: sid" />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="name" data-i18n="dashboards:components.fields.name"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required"\n\t\t\t\t\t\t\tdata-i18n="[validationMessage]risk:validation.nameRequired" />\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency" />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="description" data-i18n="dashboards:components.fields.description"></label>\n\t\t\t\t</td>\n\t\t\t\t<td colspan="3">\n\t\t\t\t\t<textarea id="description" name="description" class="k-textbox"\n\t\t\t\t\t\t\tdata-bind="value: description"></textarea>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="timeUnit" data-i18n="dashboards:components.fields.checkName.timeUnit"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="timeUnit" data-role="domosdashboardtimeunit" data-bind="value: timeUnit"/>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="timeUnitCount" data-i18n="dashboards:components.fields.checkName.timeUnitCount"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="timeUnitCount" data-role="numerictextbox" data-format="n0" data-bind="value: timeUnitCount"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="requested" data-i18n="dashboards:components.fields.checkName.requested"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="requested" type="checkbox" class="k-checkbox" data-bind="checked: requested"/>\n\t\t\t\t<label for="requested" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="includeInList" data-i18n="dashboards:components.fields.checkName.includeInList"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="includeInList" type="checkbox" class="k-checkbox" data-bind="checked: includeInList"/>\n\t\t\t\t<label for="includeInList" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="showAll" data-i18n="dashboards:components.fields.checkName.showAll"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="showAll" type="checkbox" class="k-checkbox" data-bind="checked: showAll"/>\n\t\t\t\t<label for="showAll" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\t<div data-bind="invisible: isNew">\n\t<h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n\n\t<div id="dashboardComponentGrid" class="floatingGrid"></div>\n\t<div class="clearer"></div>\n</div>\n</div>\n'}),define("dashboard/component/checkName/CheckNameComponent",["require","exports","tslib","../Component","text!templates/dashboards/edit/component.checkName.html","core/api/DashboardTimeUnit","core/api/DashboardComponentType","core/util/ObservableUtils","../views/DashboardComponentGrid"],function(t,e,n,i,a,r,o,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CheckNameComponent=void 0;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.getTemplates=function(){return{view:a}},e.createRawModel=function(){return{id:0,sid:"",type:o.DashboardComponentType.CHECK_NAME,name:"",currency:null,description:"",timeUnit:r.DashboardTimeUnit.DAYS,timeUnitCount:0,requested:!1,includeInList:!1,showAll:!1}},e.updateModel=function(t,e){d.ObservableUtils.update(t,e)},e.init=function(t){var e=t.object;l.DashboardComponentGrid.setup($("#dashboardComponentGrid"),e.id)},e}(i.Component);e.CheckNameComponent=s}),define("text!templates/dashboards/edit/component.equity.html",[],function(){return'<div id="dashboardComponentRoot">\n    <h1 data-i18n="dashboards:components.EQUITY.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:components.EQUITY.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardComponentActions"></div>\n\n    <h2 data-i18n="dashboards:components.sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="dashboards:components.fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" class="k-textbox" type="text" data-bind="value: sid" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="dashboards:components.fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required"\n                       data-i18n="[validationMessage]risk:validation.nameRequired" />\n            </td>\n            <td>\n                <label for="currency" data-i18n="dashboards:components.fields.currency"></label>\n            </td>\n            <td>\n                <input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="dashboards:components.fields.description"></label>\n            </td>\n            <td colspan="3">\n\t\t\t\t\t<textarea id="description" name="description" class="k-textbox"\n                              data-bind="value: description"></textarea>\n            </td>\n        </tr>\n    </table>\n    <h2 data-i18n="dashboards:components.EQUITY.columns.section"></h2>\n    <div id="columnGrid" class="floatingGrid_1600_px"></div>\n    <div class="clearer"></div>\n    <div data-bind="invisible: isNew">\n        <h2 data-i18n="dashboards:components.sections.dashboardGrid"></h2>\n        <div id="dashboardComponentGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n</div>\n'}),define("text!templates/dashboards/edit/equity.column.edit.window.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="dashboardEquityColumnType"\n\t\t\t\t\tdata-i18n="dashboards:components.dashboardEquityColumnType"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="dashboardEquityColumnType" data-role="domosdashboardequitysectiontype"\n\t\t\t\t\tdata-bind="value:section" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="standard" data-i18n="dashboards:components.fields.equity.standard"\n\t\t\t\t\tdata-bind="visible:isStandard"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="standard" data-role="domosdashboardequitystandardcolumn"\n\t\t\t\t\tdata-bind="value:standard, visible:isStandard"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr data-bind="visible:isAddress">\n\t\t\t<td>\n\t\t\t\t<label for="addressType" data-i18n="dashboards:components.fields.equity.addressType"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="addressType" data-role="domosequityaddresscolumntype" data-bind="value:addressType"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="equityValue" data-i18n="dashboards:components.fields.equity.equityValue"\n\t\t\t\t\tdata-bind="visible:isEquityValue"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="equityValue" data-role="domosequityvaluetype"\n\t\t\t\t\tdata-bind="value:equityValue, visible:isEquityValue"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="valuation" data-i18n="dashboards:components.fields.equity.valuation"\n\t\t\t\t\tdata-bind="visible:isValuation"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="valuation" data-role="domosvaluationcolumn"\n\t\t\t\t\tdata-bind="value:valuation, visible:isValuation"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="capitalCallSplit" data-i18n="dashboards:components.fields.equity.capitalCallSplit"\n\t\t\t\t\tdata-bind="visible:isCapitalCallSplit"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="capitalCallSplit" data-role="domoscapitalcallsplittype"\n\t\t\t\t\tdata-bind="value:capitalCallSplit, visible:isCapitalCallSplit" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="distributionSplit" data-i18n="dashboards:components.fields.equity.distributionSplit"\n\t\t\t\t\tdata-bind="visible:isDistributionSplit"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="distributionSplit" data-role="domosdistributionsplittype"\n\t\t\t\t\tdata-bind="value:distributionSplit, visible:isDistributionSplit" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="finance" data-i18n="dashboards:components.fields.equity.finance"\n\t\t\t\t\tdata-bind="visible:isFinance"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="finance" data-role="domosfinancialvaluecategory"\n\t\t\t\t\tdata-bind="value:finance, visible:isFinance"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="tag" data-i18n="dashboards:components.fields.equity.tag"\n\t\t\t\t\tdata-bind="visible:isTag"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="tag" data-role="domostagdefinition"\n\t\t\t\t\tdata-bind="value:tag, visible:isTag"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="priority" data-i18n="dashboards:components.fields.equity.priority"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="priority" data-role="numerictextbox" data-min="0" data-decimals="0" data-format="n0" data-bind="value: priority" required/>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n\t<div class="formWindowButtons">\n\t\t<button id="okClickId" class="k-primary" data-role="button" data-icon="check" data-bind="click: okClick">OK</button>\n\t\t<button data-role="button" data-icon="cancel" data-bind="click: cancelClick">Cancel</button>\n\t</div>\n</div>'}),define("dashboard/component/equity/EquityColumnWindow",["require","exports","i18n","text!templates/dashboards/edit/equity.column.edit.window.html","core/data/DObservableBuilder","./data/DashboardEquitySectionType","./data/DashboardEquityStandardColumn"],function(t,e,l,s,u,c,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquityColumnWindow=void 0;var n=function(){function t(){}return t.open=function(t){return console.log(t),t||(t={capitalCallSplit:null,distributionSplit:null,equityValue:null,priority:0,section:c.DashboardEquitySectionType.STANDARD,standard:null,tag:null,valuation:null,finance:null,addressType:null}),d=t,new Promise(function(t,e){var n=kendo.template(s)({}),i=$("<div>").addClass("formWindow").appendTo($(document.body));i.html(n),i.kendoWindow({modal:!0,width:1e3,minWidth:300,visible:!1});var a,r=i.data("kendoWindow");r.bind("close",function(){return kendo.destroy(i),i.remove(),t(a),!0});var o=u.DObservableBuilder.of(d).add("isStandard",function(t){return t.get("section")===c.DashboardEquitySectionType.STANDARD}).add("isAddress",function(t){return t.get("standard")===p.DashboardEquityStandardColumn.ADDRESSES&&t.get("section")===c.DashboardEquitySectionType.STANDARD}).add("isEquityValue",function(t){return t.get("section")===c.DashboardEquitySectionType.VALUES}).add("isValuation",function(t){return t.get("section")===c.DashboardEquitySectionType.LAST_VALUATION}).add("isCapitalCallSplit",function(t){return t.get("section")===c.DashboardEquitySectionType.CAPITAL_CALL_SPLIT}).add("isDistributionSplit",function(t){return t.get("section")===c.DashboardEquitySectionType.DISTRIBUTION_SPLIT}).add("isFinance",function(t){return t.get("section")===c.DashboardEquitySectionType.FINANCE}).add("isTag",function(t){return t.get("section")===c.DashboardEquitySectionType.TAG}).add("okClick",function(t){a=t.toJson(),r.close()}).add("cancelClick",function(t){a=void 0,r.close()}).build();o.bindChange(function(t,e){if("section"===e)switch(t.get("section")){case c.DashboardEquitySectionType.STANDARD:t.set("capitalCallSplit",null),t.set("distributionSplit",null),t.set("tag",null),t.set("finance",null),t.set("equityValue",null),t.set("valuation",null),t.set("section",c.DashboardEquitySectionType.STANDARD);break;case c.DashboardEquitySectionType.CAPITAL_CALL_SPLIT:t.set("standard",null),t.set("addressType",null),t.set("distributionSplit",null),t.set("tag",null),t.set("finance",null),t.set("equityValue",null),t.set("valuation",null),t.set("section",c.DashboardEquitySectionType.CAPITAL_CALL_SPLIT);break;case c.DashboardEquitySectionType.DISTRIBUTION_SPLIT:t.set("standard",null),t.set("addressType",null),t.set("capitalCallSplit",null),t.set("tag",null),t.set("finance",null),t.set("equityValue",null),t.set("valuation",null),t.set("section",c.DashboardEquitySectionType.DISTRIBUTION_SPLIT);break;case c.DashboardEquitySectionType.VALUES:t.set("standard",null),t.set("addressType",null),t.set("distributionSplit",null),t.set("tag",null),t.set("finance",null),t.set("capitalCallSplit",null),t.set("valuation",null),t.set("section",c.DashboardEquitySectionType.VALUES);break;case c.DashboardEquitySectionType.TAG:t.set("standard",null),t.set("addressType",null),t.set("distributionSplit",null),t.set("capitalCallSplit",null),t.set("finance",null),t.set("equityValue",null),t.set("valuation",null),t.set("section",c.DashboardEquitySectionType.TAG);break;case c.DashboardEquitySectionType.LAST_VALUATION:t.set("standard",null),t.set("addressType",null),t.set("distributionSplit",null),t.set("tag",null),t.set("finance",null),t.set("equityValue",null),t.set("capitalCallSplit",null),t.set("section",c.DashboardEquitySectionType.LAST_VALUATION);break;case c.DashboardEquitySectionType.FINANCE:t.set("standard",null),t.set("addressType",null),t.set("distributionSplit",null),t.set("tag",null),t.set("capitalCallSplit",null),t.set("equityValue",null),t.set("valuation",null),t.set("section",c.DashboardEquitySectionType.FINANCE)}}),l.I18N.localize(i),o.bind(i),r.title(l.I18N.t("dashboards:components.EQUITY.columns.editWindow.title")).open().center()});var d},t}();e.EquityColumnWindow=n}),define("dashboard/component/equity/EquityColumnGrid",["require","exports","core/util/ObservableUtils","./data/DashboardEquitySectionType","i18n","tag/ui/TagDefinitionUI","core/ui/IntegerUI","history/data/DistributionSplitType","history/data/CapitalCallSplitType","./data/ValuationColumn","./data/EquityValueType","./data/DashboardEquityStandardColumn","core/ui/grid/GridUtils","core/util/Logger","core/ui/Confirmation","core/ui/grid/GridToolbar","./EquityColumnWindow","finance/data/FinancialValueCategory","core/data/DObservable","./data/EquityAddressColumnType"],function(t,e,d,l,s,u,c,p,m,f,b,v,y,h,g,T,n,I,C,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquityColumnGrid=void 0;var k="ui:grid.actionsClick";function E(t,e,n){var i=[t.element.find("#"+e),t.element.find("#"+n)];y.GridUtils.onRowSelectChange(t,i)}function D(t){return n.EquityColumnWindow.open(t)}var i=function(){function t(){}return t.setup=function(t,e){kendo.destroy(t),t.empty();var n,i=kendo.guid(),a=kendo.guid(),r=(new T.GridToolbar).addClick(s.I18N.t(k+".add.text"),T.GridToolbar.ICON_ADD,function(){var e;(e=t.data("kendoGrid"))&&D().then(function(t){t&&e.dataSource.data().push(t)})}).addClick(s.I18N.t(k+".edit.text"),T.GridToolbar.ICON_EDIT,function(){return function(t){var e=t.data("kendoGrid");if(e){var n=e.select();if(0<n.length){var i=e.dataItem(n[0]);D(i.toJSON()).then(function(t){t&&d.ObservableUtils.update(i,t)})}}}(t)},i).addClick(s.I18N.t(k+".delete.text"),T.GridToolbar.ICON_DELETE,function(){return function(t){var e=t.data("kendoGrid"),n=e.select();if(0<n.length){var i=e.dataItem(n);if(!i)return;g.Confirmation.confirmDelete(s.I18N.t(k+".delete.confirmation")).then(function(t){t&&e.dataSource.remove(i)}).catch(function(t){return h.Logger.error(t)})}}(t)},a),o={dataSource:(n=e,{data:n.get("columns"),schema:{model:{id:"id",fields:{section:{defaultValue:l.DashboardEquitySectionType.STANDARD},priority:{type:"number",defaultValue:0,validation:{required:!0}},tag:{nullable:!0},capitalCallSplit:{type:"number",nullable:!0},distributionSplit:{type:"number",nullable:!0},valuation:{type:"number",nullable:!0},equityValue:{type:"number",nullable:!0},standard:{type:"number",nullable:!0},finance:{type:"number",nullable:!0}},tagName:function(){return d.ObservableUtils.get(this,"tag.name")||""}}},sort:{field:"priority"},dir:"asc"}),columns:[l.DashboardEquitySectionType.column({field:"section",title:s.I18N.t("dashboards:components.fields.equity.section"),width:250}),{field:"standard",title:s.I18N.t("dashboards:components.fields.equity.standard"),width:250,template:function(t){var e=C.DObservable.of(t),n=e.get("standard"),i=e.get("addressType");return n===v.DashboardEquityStandardColumn.ADDRESSES&&i?kendo.htmlEncode(w.EquityAddressColumnType.getName(i)||""):kendo.htmlEncode(v.DashboardEquityStandardColumn.getName(n)||"")}},u.TagDefinitionUI.column({field:"tag",title:s.I18N.t("dashboards:components.fields.equity.tag"),width:250}),c.IntegerUI.column({field:"priority",title:s.I18N.t("dashboards:components.fields.equity.priority"),width:250}),p.DistributionSplitType.column({field:"distributionSplit",title:s.I18N.t("dashboards:components.fields.equity.distributionSplit"),width:250}),m.CapitalCallSplitType.column({field:"capitalCallSplit",title:s.I18N.t("dashboards:components.fields.equity.capitalCallSplit"),width:250}),f.ValuationColumn.column({field:"valuation",title:s.I18N.t("dashboards:components.fields.equity.valuation"),width:250}),b.EquityValueType.column({field:"equityValue",title:s.I18N.t("dashboards:components.fields.equity.equityValue"),width:250}),I.FinancialValueCategory.column({field:"finance",title:s.I18N.t("dashboards:components.fields.equity.finance"),width:250})],toolbar:[{name:"create"},{name:"excel"}],pageable:y.GridUtils.defaultPageable(),scrollable:!0,editable:!1,height:600,change:function(t){E(t.sender,i,a)},dataBound:function(t){E(t.sender,i,a)}};y.GridUtils.withDefaults(o),o.toolbar=r.template(),t.kendoGrid(o),r.bind(t)},t}();e.EquityColumnGrid=i}),define("dashboard/component/equity/EquityComponent",["require","exports","tslib","../Component","core/api/DashboardComponentType","core/util/ObservableUtils","text!templates/dashboards/edit/component.equity.html","../views/DashboardComponentGrid","./EquityColumnGrid"],function(t,e,n,i,a,r,o,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquityComponent=void 0;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.getTemplates=function(){return{view:o}},e.createRawModel=function(){return{id:0,sid:"",type:a.DashboardComponentType.EQUITY,name:"",currency:null,description:"",columns:[]}},e.updateModel=function(t,e){r.ObservableUtils.update(t,e)},e.init=function(t){var e=t.model,n=t.object;l.EquityColumnGrid.setup($("#columnGrid"),e),d.DashboardComponentGrid.setup($("#dashboardComponentGrid"),n.id)},e}(i.Component);e.EquityComponent=s}),define("core/api/RecipientDocumentType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RecipientDocumentType=void 0;var r,o;(r=e.RecipientDocumentType||(e.RecipientDocumentType={}))[r.INVESTOR_REPORTING=1]="INVESTOR_REPORTING",r[r.CAPITAL_CALL=2]="CAPITAL_CALL",r[r.DISTRIBUTION=3]="DISTRIBUTION",r[r.COMMITMENT=4]="COMMITMENT",(o=e.RecipientDocumentType||(e.RecipientDocumentType={})).getName=n.EnumUtils.createNameFn("dashboards:RecipientDocumentType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosRecipientDocumentType",o,!1,!0),o.column=a.EnumColumnUtils.createFactory(o,o.widget),o.widgetMulti=i.EnumWidgetUtils.createMultiSelect("DomosRecipientDocumentTypeMultiSelect",o),o.columnMulti=a.EnumColumnUtils.createMultiFactory(o,o.widgetMulti)}),function(){define("views/dashboards/component/edit.component",["lodash","i18n","site","views/edit/edit","core/data/SiteCategories","views/dashboards/component/object/component","views/dashboards/component/currency/component","views/dashboards/component/group/component","views/dashboards/component/index/component","views/dashboards/component/portfolio/component","views/dashboards/component/text/component","views/dashboards/component/risk/component","views/dashboards/component/script/component","views/dashboards/component/debt/component","views/dashboards/component/report/component","views/dashboards/component/data/component","views/dashboards/component/compliance/component","views/dashboards/component/contextual/component","views/dashboards/component/complex/component","views/dashboards/component/spreadsheet/component","views/dashboards/component/document/component","views/dashboards/component/sub/component","views/dashboards/component/table/component","dashboard/component/capitalCall/CapitalCall","dashboard/component/commitment/Commitment","dashboard/component/distribution/Distribution","dashboard/component/capitalAccount/CapitalAccount","dashboard/component/operations/Operations","dashboard/component/checkName/CheckNameComponent","dashboard/component/equity/EquityComponent","core/api/DashboardComponentType","core/api/DashboardTimeUnit","core/api/RecipientDocumentType"],function(i,n,t,e,a,r,o,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R){var _,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q,z;return _=R.DashboardComponentType,F=t.router,U=t.map,L=a.SiteCategories,(P={})[_.OBJECT]=r,P[_.CURRENCY]=o,P[_.GROUP_BY]=d,P[_.INDEX]=l,P[_.PORTFOLIO]=s,P[_.TEXT]=u,P[_.RISK]=c,P[_.GROUP_BY_SCRIPT]=p,P[_.DEBT_CASH_FLOWS]=m,P[_.REPORT]=f,P[_.DATA]=b,P[_.COMPLIANCE]=v,P[_.CONTEXTUAL_TEXT]=y,P[_.SPREADSHEET]=g,P[_.DOCUMENT_IMAGE]=T,P[_.SUB_COMPONENT]=I,P[_.TABLE]=C,P[_.CAPITAL_CALL]=w.CapitalCall,P[_.COMMITMENT]=k.Commitment,P[_.DISTRIBUTION]=E.Distribution,P[_.CAPITAL_ACCOUNT]=D.CapitalAccount,P[_.COMPLEX_TEXT]=h,P[_.OPERATIONS]=S.Operations,P[_.CHECK_NAME]=N.CheckNameComponent,P[_.EQUITY]=x.EquityComponent,H=function(t){var e,n;return n={},(e=t.module)&&e.updateValidatorOptions&&e.updateValidatorOptions(t,n),n},q=function(t){return{id:t}},W=function(t){var e,n;return n=t,i.isString(t)&&(e=parseInt(t),i.isFinite(e)||(n=_[t])),{type:n}},Q=function(t,e){var n,i;return e?(i=null,(n=P[e])&&(i=t.create(n)),i):null},$=function(t,e){return e?Q(t,e.type):null},z=function(t){var e;return(e=t.module)&&e.viewShow&&e.viewShow(t),null},M=function(t){var e;return(e=_[t.type])?n.t("dashboards:components."+e+".confirmDelete"):null},V=function(){return{siteCategory:L.dashboards,key:"dashboardComponentEdit",rootId:"dashboardComponentRoot",actionsId:"dashboardComponentActions",url:"board/component.json",askDestroy:M,createValidatorOptions:H,viewShow:z,getView:$}},B=function(){var t;return(t=V()).createGetParameters=W,e.create(t)},G=function(){var t;return(t=V()).createGetParameters=q,e.create(t)},K=function(){return null==A&&(A=B()),A},O=A=null,J=function(){return null==O&&(O=G()),O},j=function(t){return K().display(t)},Y=function(t){return J().display(t)},{init:function(){return F.addRoute(U.dashboardComponentEdit,Y),F.addRoute(U.dashboardComponentCreate,j)}}})}.call(this),define("object/ui/VirtualPortfolioUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","object/repository/ObjectRepository"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VirtualPortfolioUI=void 0;var r=function(){function t(){}return t.widget=n.IdWidgetUtils.createDropList("DomosVirtualPortfolio",a.ObjectRepository.fetchVirtualPortfolioIdentifiables,!0),t.column=i.IdentifiableColumnUtils.createFactory(t.widget),t}();e.VirtualPortfolioUI=r}),define("core/query/QueryBuilderRules",["require","exports"],function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.QueryBuilderOperator=void 0,(n=e.QueryBuilderOperator||(e.QueryBuilderOperator={})).EQUAL="equal",n.NOT_EQUAL="not_equal",n.IS_NULL="is_null",n.IS_NOT_NULL="is_not_null",n.BEGINS_WITH="begins_with",n.NOT_BEGINS_WITH="not_begins_with",n.CONTAINS="contains",n.NOT_CONTAINS="not_contains",n.ENDS_WITH="ends_with",n.NOT_ENDS_WITH="not_ends_with",n.IS_EMPTY="is_empty",n.IS_NOT_EMPTY="is_not_empty",n.LESS="less",n.LESS_OR_EQUAL="less_or_equal",n.GREATER="greater",n.GREATER_OR_EQUAL="greater_or_equal",n.IN="in",n.NOT_IN="not_in",n.BETWEEN="between",n.NOT_BETWEEN="not_between",n.SET_CONTAINS="set_contains",n.SET_NOT_CONTAINS="set_not_contains"}),define("core/query/QueryBuilder",["require","exports","lodash","core/event/DEvent","./QueryBuilderRules","core/util/Logger","core/util/ObservableUtils","i18n"],function(t,e,i,a,r,d,o,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryBuilder=void 0;var s="afterAddGroup.queryBuilder afterDeleteGroup.queryBuilder afterAddRule.queryBuilder afterDeleteRule.queryBuilder afterUpdateGroupCondition.queryBuilder afterUpdateRuleValue.queryBuilder afterUpdateRuleOperator.queryBuilder afterUpdateRuleFilter.queryBuilder";function u(t){var e=t.toLowerCase();return e===r.QueryBuilderOperator.SET_CONTAINS||e===r.QueryBuilderOperator.SET_NOT_CONTAINS?{type:e,nb_inputs:1,multiple:!0,apply_to:["string","number","datetime","boolean"]}:{type:e}}var n=function(){function n(t,e){this.$element=t,this._blockEvent=!1,this.event=new a.DEvent(!1),this.init(e),this.hide()}return n.init=function(t,e){return new n(t,e)},n.prototype.destroy=function(){this.event.clear(),this.$element.off(s),this.$element.queryBuilder("destroy"),this.$element.empty()},n.prototype.getRules=function(){return this.$element.queryBuilder("getRules")||null},n.prototype.setRules=function(t){t=o.ObservableUtils.unpack(t);var e=this._blockEvent;this._blockEvent=!0;try{return this.$element.show(),t?this.$element.queryBuilder("setRules",t):this.$element.queryBuilder("reset"),this}finally{this._blockEvent=e}},n.prototype.hide=function(){return this.$element.hide(),this},n.prototype.init=function(t){var e=this;if(this.destroy(),t&&!(t.length<=0)){(t=this.checkAndCleanFilters(t)).forEach(function(t){var e;t.label=(e=t.label||t.id).length<=50?e:e.substr(0,49)+"&hellip;"}),this.$element.on(s,function(t){e._blockEvent||e.event.fire()});var n={plugins:["bt-tooltip-errors"],filters:t,operators:i.keys(r.QueryBuilderOperator).map(u),lang:{operators:{set_contains:"contains",set_not_contains:"doesn't contain"}}};this.$element.queryBuilder(n)}},n.prototype.checkAndCleanFilters=function(t){for(var e={},n=[],i=0,a=t;i<a.length;i++){var r=a[i],o=r.id;e[o]?d.Logger.error(l.I18N.t("site:queryBuilder.duplicateFilterIgnored",{id:o})):(e[o]=!0,n.push(r))}return n},n}();e.QueryBuilder=n}),define("core/util/FieldUtils",["require","exports","i18n"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FieldUtils=void 0;var i=function(){function e(){}return e.fieldName=function(t){var e=t.name;return n.I18N.exists(e)?n.I18N.t(e):e},e.isString=function(t){return!!t&&"string"===t.type},e.isNumber=function(t){return!!t&&"number"===t.type},e.isEnum=function(t){return!!t&&"enum"===t.type},e.isEnumArray=function(t){return!!t&&"enumArray"===t.type},e.isEnumBase=function(t){return e.isEnum(t)||e.isEnumArray(t)},e.visit=function(t,e){switch(t.type){case"string":return e.whenString(t);case"number":return e.whenNumber(t);case"enum":return e.whenEnum(t);case"enumArray":return e.whenEnumArray(t);case"date":return e.whenDate(t);default:return e.otherwise(t)}},e}();e.FieldUtils=i}),define("core/query/QueryBuilderFilterFactory",["require","exports","lodash","./QueryBuilderRules","core/util/FieldUtils","core/util/EnumUtils","i18n"],function(t,e,i,n,r,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryBuilderFilterFactory=void 0;var l=[n.QueryBuilderOperator.EQUAL,n.QueryBuilderOperator.NOT_EQUAL,n.QueryBuilderOperator.IS_NULL,n.QueryBuilderOperator.IS_NOT_NULL,n.QueryBuilderOperator.BEGINS_WITH,n.QueryBuilderOperator.NOT_BEGINS_WITH,n.QueryBuilderOperator.CONTAINS,n.QueryBuilderOperator.NOT_CONTAINS,n.QueryBuilderOperator.ENDS_WITH,n.QueryBuilderOperator.NOT_ENDS_WITH,n.QueryBuilderOperator.IS_EMPTY,n.QueryBuilderOperator.IS_NOT_EMPTY],s=[n.QueryBuilderOperator.EQUAL,n.QueryBuilderOperator.NOT_EQUAL,n.QueryBuilderOperator.IS_NULL,n.QueryBuilderOperator.IS_NOT_NULL,n.QueryBuilderOperator.LESS,n.QueryBuilderOperator.LESS_OR_EQUAL,n.QueryBuilderOperator.GREATER,n.QueryBuilderOperator.GREATER_OR_EQUAL,n.QueryBuilderOperator.BETWEEN,n.QueryBuilderOperator.NOT_BETWEEN],u=s,c=[n.QueryBuilderOperator.EQUAL,n.QueryBuilderOperator.NOT_EQUAL,n.QueryBuilderOperator.IS_NULL,n.QueryBuilderOperator.IS_NOT_NULL],p=[n.QueryBuilderOperator.EQUAL,n.QueryBuilderOperator.NOT_EQUAL,n.QueryBuilderOperator.IS_NULL,n.QueryBuilderOperator.IS_NOT_NULL,n.QueryBuilderOperator.SET_CONTAINS,n.QueryBuilderOperator.SET_NOT_CONTAINS,n.QueryBuilderOperator.IN,n.QueryBuilderOperator.NOT_IN];function m(t){for(var e=[],n=0,i=t;n<i.length;n++){var a=i[n];if(a.id){var r={};r[a.id]=a.label||"?",e.push(r)}}return e}var a=function(){function a(){}return a.createTextFilter=function(t,e){return{id:t,label:e,type:"string",input:"text",operators:l}},a.createTextAreaFilter=function(t,e){return{id:t,label:e,type:"string",input:"textarea",operators:l}},a.createNumberFilter=function(t,e){return{id:t,label:e,type:"double",operators:s}},a.createIntegerFilter=function(t,e){return{id:t,label:e,type:"integer",operators:s}},a.createBooleanFilter=function(t,e){return{id:t,label:e,type:"integer",input:"radio",operators:[n.QueryBuilderOperator.EQUAL,n.QueryBuilderOperator.NOT_EQUAL,n.QueryBuilderOperator.IS_NULL,n.QueryBuilderOperator.IS_NOT_NULL],values:[{1:d.I18N.t("data:predicate.booleanLabel.true")},{2:d.I18N.t("data:predicate.booleanLabel.false")}]}},a.createDateFilter=function(t,e){return{id:t,label:e,type:"date",operators:u,validation:{format:"YYYY-MM-DD"},plugin:"datepicker",plugin_config:{format:"yyyy-mm-dd",todayBtn:"linked",todayHighlight:!0,autoclose:!0}}},a.createSelectIntegerFilter=function(t,e,n){return{id:t,label:e,type:"integer",input:"select",operators:c,values:m(n)}},a.createMultipleStringFilter=function(t,e,n){return a.createMultipleFilter(t,e,"string",n)},a.createMultipleIntegerFilter=function(t,e,n){return a.createMultipleFilter(t,e,"integer",n)},a.createEnumSelect=function(t,e,n){var i=a.listEnum(n);return a.createSelectIntegerFilter(t,e,i)},a.createFromField=function(t){return r.FieldUtils.visit(t,{whenString:function(t){return a.createTextFilter(t.id,r.FieldUtils.fieldName(t))},whenNumber:function(t){return a.createNumberFilter(t.id,r.FieldUtils.fieldName(t))},whenEnum:function(t){return a.createFromEnumField(t)},whenEnumArray:function(t){return a.createFromEnumField(t)},whenDate:function(t){return a.createDateFilter(t.id,r.FieldUtils.fieldName(t))},otherwise:function(t){return a.createTextFilter(t.id,r.FieldUtils.fieldName(t))}})},a.createFromEnumField=function(t){var e=t.enumeration,n=i.chain(o.EnumUtils.list(t.enumeration)).map(function(t){return{id:t,label:e.getName(t)||""}}).sortBy(function(t){return t.label}).map(function(t){var e={};return e[t.id]=t.label,e}).value();return{id:t.id,label:r.FieldUtils.fieldName(t),type:"integer",input:"checkbox",operators:p,values:n}},a.createMultipleFilter=function(t,e,n,i){var a=m(i);return{id:t,label:e,type:n,input:"checkbox",operators:p,values:a}},a.listEnum=function(e){return o.EnumUtils.map(e,function(t){return{id:t,label:e.getName(t)||""}})},a}();e.QueryBuilderFilterFactory=a}),define("basic/query/CountryQueryBuilderFilterFactory",["require","exports","lodash","basic/data/Countries","core/query/QueryBuilderFilterFactory"],function(t,e,i,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CountryQueryBuilderFilterFactory=void 0;var n=function(){function t(){}return t.create=function(t,e){var n=i.chain(a.Countries.list()).sortBy("name").map(function(t){return{id:t.id,label:t.name}}).value();return r.QueryBuilderFilterFactory.createSelectIntegerFilter(t,e,n)},t}();e.CountryQueryBuilderFilterFactory=n}),define("object/query/ObjectTypeQueryBuilderFactory",["require","exports","lodash","core/query/QueryBuilderFilterFactory","object/data/ObjectTypes"],function(t,e,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectTypeQueryBuilderFactory=void 0;var n=function(){function t(){}return t.create=function(t,e,n){var i=a.chain(o.ObjectTypes.listByCategory(t)).sortBy("name").map(function(t){return{id:t.id,label:t.name}}).value();return r.QueryBuilderFilterFactory.createSelectIntegerFilter(e,n,i)},t}();e.ObjectTypeQueryBuilderFactory=n}),define("object/query/InvestmentCompanyQueryBuilder",["require","exports","tslib","lodash","core/query/QueryBuilderFilterFactory","object/data/ObjectCategories","object/repository/ObjectRepository","core/util/Loader"],function(t,e,i,a,n,r,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InvestmentCompanyQueryBuilderInstance=void 0;var l=[],s=new(function(){function t(){}return t.prototype.create=function(t,e){return n.QueryBuilderFilterFactory.createSelectIntegerFilter(t,e,l)},t}());d.Loader.add(i.__awaiter(void 0,void 0,void 0,function(){var e,n;return i.__generator(this,function(t){switch(t.label){case 0:return[4,o.ObjectRepository.fetchIdentifiables(r.ObjectCategories.investmentCompanies)];case 1:return e=t.sent(),n=a.chain(e).sortBy(function(t){return t.name}).map(function(t){return{id:t.id,label:t.name}}).value(),l.splice.apply(l,i.__spreadArrays([0,l.length],n)),[2]}})})),e.InvestmentCompanyQueryBuilderInstance=s}),define("core/api/AIFType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AIFType=void 0;var r,o;(r=e.AIFType||(e.AIFType={}))[r.NONE=0]="NONE",r[r.HEDGE_FUND=1]="HEDGE_FUND",r[r.PRIVATE_EQUITY_FUND=2]="PRIVATE_EQUITY_FUND",r[r.REAL_ESTATE_FUND=3]="REAL_ESTATE_FUND",r[r.FUND_OF_FUNDS=4]="FUND_OF_FUNDS",r[r.OTHER_FUND=5]="OTHER_FUND",(o=e.AIFType||(e.AIFType={})).getName=a.EnumUtils.createNameFn("object:AIFType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAIFType",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget),o.widgetMulti=i.EnumWidgetUtils.createMultiSelect("DomosAIFTypeMultiSelect",o),o.columnMulti=n.EnumColumnUtils.createMultiFactory(o,o.widgetMulti)}),define("dashboard/query/DashboardFundQueryBuilder",["require","exports","tslib","lodash","core/query/QueryBuilder","i18n","object/data/ObjectCategories","basic/query/CountryQueryBuilderFilterFactory","../../object/query/ObjectTypeQueryBuilderFactory","object/query/InvestmentCompanyQueryBuilder","core/query/QueryBuilderFilterFactory","core/api/AIFType"],function(t,e,n,a,i,r,o,d,l,s,u,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashboardFundQueryBuilder=void 0;var p="dms_rule_country",m="dms_rule_type",f="dms_rule_aifm",b="dms_rule_internal",v="dms_rule_aifmd_strategy";var y=function(i){function e(t){return i.call(this,t,(e=o.ObjectCategories.investmentVehicles,(n=[]).push(s.InvestmentCompanyQueryBuilderInstance.create(f,r.I18N.t("data:predicate.aifm"))),n.push(l.ObjectTypeQueryBuilderFactory.create(e,m,r.I18N.t("data:predicate.objectType"))),n.push(d.CountryQueryBuilderFilterFactory.create(p,r.I18N.t("data:predicate.country"))),n.push(u.QueryBuilderFilterFactory.createBooleanFilter(b,r.I18N.t("data:predicate.internal"))),n.push(u.QueryBuilderFilterFactory.createEnumSelect(v,r.I18N.t("data:predicate.aifmdStrategy"),c.AIFType)),a.sortBy(n,function(t){return t.label})))||this;var e,n}return n.__extends(e,i),e.init=function(t){return new e(t)},e}(i.QueryBuilder);e.DashboardFundQueryBuilder=y}),define("text!templates/dashboards/perimeter/fund.edit.window.html",[],function(){return'<div>\n\t<p data-bind="text: message"></p>\n\t<div>\n\t\t<select id="sourceElement"></select>\n\t\t<select id="targetElement"></select>\n\t</div>\n\t<div class="formWindowButtons">\n\t\t<button id="okClickId" class="k-primary" data-role="button" data-icon="check" data-bind="click: okClick"\n\t\t\tdata-i18n="dashboards:perimeters.actions.okClick"></button>\n\t\t<button data-role="button" data-icon="cancel" data-bind="click: cancelClick"\n\t\t\tdata-i18n="dashboards:perimeters.actions.cancelClick"></button>\n\t</div>\n</div>'}),define("dashboard/views/PerimeterAddFundsWindow",["require","exports","i18n","text!templates/dashboards/perimeter/fund.edit.window.html","core/data/DObservableBuilder","lodash","object/repository/ObjectRepository"],function(t,e,l,s,u,c,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PerimeterAddFundsWindow=void 0;var p="sourceElement",d="targetElement",m="#"+p,f="#"+d;function b(r,o){r.empty(),kendo.destroy(r),n.ObjectRepository.fetchVehicleIdentifiables().then(function(t){var e,n,i,a={dataSource:{data:(e=t,n=o,i=c.map(n,function(t){return t.object.id}),c.chain(e).filter(function(t){return!c.includes(i,t.id)}).value()),sort:{field:"name",dir:"asc"}},connectWith:d,dropSources:[d],draggable:{placeholder:function(t){return t.clone().css({opacity:.3,border:"1px dashed #000000"})}},selectable:"multiple",dataTextField:"name",dataValueField:"id",toolbar:{position:"right",tools:["transferTo","transferFrom","transferAllTo","transferAllFrom"]}};r.kendoListBox(a)})}function i(d){return new Promise(function(t,e){var n=kendo.template(s)({}),i=$("<div>").addClass("export-json-window").appendTo($(document.body));i.html(n);i.kendoWindow({modal:!0,width:750,height:650});var a,r=i.data("kendoWindow");r.bind("close",function(){return kendo.destroy(i),i.remove(),t(a),!0});var o=u.DObservableBuilder.of(d).add("okClick",function(){var t=$(f).data("kendoListBox"),n=0;a=c.chain(t.dataItems().toJSON()).map(function(t,e){return{id:e,object:t,priority:n++}}).value(),r.close()}).add("cancelClick",function(t){a=void 0,r.close()}).build();l.I18N.localize(i),o.bind(i),b(i.find(m),d),function(t,e){t.empty(),kendo.destroy(t);var n={dataSource:{data:e,sort:{field:"name",dir:"asc"}},connectWith:p,dropSources:[p],draggable:{placeholder:function(t){return t.clone().css({opacity:.3,border:"1px dashed #000000"})}},selectable:"multiple",dataTextField:"name",dataValueField:"id",toolbar:{position:"right",tools:["moveUp","moveDown"]}};t.kendoListBox(n)}(i.find(f),c.map(d,function(t){return t.object})),r.title(l.I18N.t("dashboards:perimeters.actions.addVehicles")).open().center()})}var a=function(){function t(){}return t.open=function(t){return i(t)},t}();e.PerimeterAddFundsWindow=a}),define("text!templates/dashboards/edit/perimeter.html",[],function(){return'<div id="dashboardPerimeterRoot" class="idxStandardContent">\n    <h1 data-i18n="dashboards:perimeters.edit.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:perimeters.edit.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardPerimeterActions"></div>\n\n    <h2 data-i18n="dashboards:perimeters.sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="dashboards:perimeters.fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" class="k-textbox" type="text" data-bind="value: stringId"/>\n            </td>\n\t\t\t<td>\n\t\t\t\t<label for="currency" data-i18n="dashboards:perimeters.fields.currency"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="currency" data-role="domoscurrency" data-option-label="--" data-bind="value: currency" />\n\t\t\t</td>\n        </tr>\n        <tr>\n            <td>\n                <label for="profile" data-i18n="dashboards:perimeters.fields.riskProfile"></label>\n            </td>\n            <td>\n                <input id="profile" data-role="domosriskprofile" data-bind="value: riskProfile"/>\n            </td>\n            <td>\n                <label for="stressProfile" data-i18n="dashboards:perimeters.fields.stressProfile"></label>\n            </td>\n            <td>\n                <input id="stressProfile" data-role="domosstressprofile" data-bind="value: stressProfile"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="pipeManager" data-i18n="dashboards:perimeters.fields.pipeManager"></label>\n            </td>\n            <td>\n                <input id="pipeManager" data-role="domosflowpipemanager" data-bind="value: pipeManager"/>\n            </td>\n        </tr>\n    </table>\n    <div id="fundQueryBuilder"></div>\n    <h2 data-i18n="dashboards:perimeters.sections.vehicles"></h2>\n\n    <div id="vehicleGrid" class="floatingDashboardGrid_800_px"></div>\n    <div class="clearer"></div>\n\n    \n    <h2 data-i18n="dashboards:perimeters.sections.virtualPortfolios"></h2>\n\n    <div id="virtualGrid" class="floatingDashboardGrid_800_px"></div>\n    <div class="clearer"></div>\n\n    <h2 data-i18n="dashboards:perimeters.sections.variables"></h2>\n\n    <div id="variablesGrid" class="floatingDashboardGrid_800_px"></div>\n    <div class="clearer"></div>\n</div>\n\n\n\n'}),define("risk/repository/RiskProfileRepository",["require","exports","tslib","lodash","core/web/WebHttp","core/repository/RepositoryImpl"],function(t,e,a,n,r,i){"use strict";function o(t){return n.isNumber(t)?t:t.id}Object.defineProperty(e,"__esModule",{value:!0}),e.RiskProfileRepository=e.RiskProfileRepositoryImpl=void 0;var d=function(t){function e(){return t.call(this,"risk/profile")||this}return a.__extends(e,t),e.prototype.getStructure=function(t,e){return t=o(t),r.WebHttp.getJson("risk/profile/structure.json",{profile:t},e)},e.prototype.getOverload=function(t,e,n){return t=o(t),e=o(e),r.WebHttp.getJson("risk/profile/overload.json",{profile:t,fund:e},n)},e.prototype.saveOverload=function(t,e,n,i){t=o(t),e=o(e);var a=JSON.stringify(n);return r.WebHttp.postJson("risk/profile/overload.json",{profile:t,fund:e,data:a},i)},e.prototype.deleteOverload=function(t,e,n,i){return(n=a.__assign({},n)).exclude=!1,n.lowerOverload=!1,n.upperOverload=!1,this.saveOverload(t,e,n,i)},e.prototype.fetchIdentifiableGroupables=function(){return r.WebHttp.getJson(this.getOptions.identifiableUrl)},e}(i.RepositoryImpl);e.RiskProfileRepositoryImpl=d,e.RiskProfileRepository=new d}),define("risk/ui/RiskProfileUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","risk/repository/RiskProfileRepository"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GroupableUI=e.RiskProfileUI=void 0;var r,o=function(){function t(){}return t.widget=n.IdWidgetUtils.createDropList("DomosRiskProfile",a.RiskProfileRepository,!0),t.column=i.IdentifiableColumnUtils.createFactory(t.widget),t}();e.RiskProfileUI=o,e.GroupableUI=(r=n.IdWidgetUtils.createDropList("DomosRiskProfile",a.RiskProfileRepository,!0),{column:i.IdentifiableColumnUtils.createFactory(o.widget),widget:r,Groupable:function(){var t=function(t){return e={autoWidth:!0,dataSource:{transport:{read:function(t){a.RiskProfileRepository.fetchIdentifiableGroupables().then(function(t){return t.map(function(t){return{id:t.id,name:t.name,grouping:t.grouping}})}).then(t.success).catch(t.error)}},schema:{model:{id:"id",fields:{id:{type:"number"},name:{type:"string"},grouping:{type:"string"}}}},group:{field:"grouping"}},dataTextField:"name",dataValueField:"id",optionLabel:"--"},t.kendoDropDownList(e);var e};return{widget:t,column:i.IdentifiableColumnUtils.createFactory(t)}}})}),define("stress/repository/StressProfileRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StressProfileRepository=void 0;var i=function(){function t(){}return t.fetchIdentifiables=function(){return n.WebHttp.getJson("stress/profile/id/list.json")},t}();e.StressProfileRepository=i}),define("stress/ui/StressProfileUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","stress/repository/StressProfileRepository"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StressProfileUI=void 0;var r=function(){function t(){}return t.widget=n.IdWidgetUtils.createDropList("DomosStressProfile",a.StressProfileRepository.fetchIdentifiables,!0),t.column=i.IdentifiableColumnUtils.createFactory(t.widget),t}();e.StressProfileUI=r}),define("flow/repository/FlowPipeManagerRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FlowPipeManagerRepository=void 0;var i=function(){function t(){}return t.fetchIdentifiables=function(){return n.WebHttp.getJson("flow/pipe/id/list.json")},t}();e.FlowPipeManagerRepository=i}),define("flow/ui/FlowPipeManagerUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","flow/repository/FlowPipeManagerRepository"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FlowPipeManagerUI=void 0;var r=function(){function t(){}return t.widget=n.IdWidgetUtils.createDropList("DomosFlowPipeManager",a.FlowPipeManagerRepository,!0),t.column=i.IdentifiableColumnUtils.createFactory(t.widget),t}();e.FlowPipeManagerUI=r}),function(){var x=[].slice;define("views/dashboards/perimeter/perimeter",["jquery","i18n","ui","core/util/ObservableUtils","object/ui/VehicleUI","object/ui/VirtualPortfolioUI","core/ui/IntegerUI","dashboard/query/DashboardFundQueryBuilder","dashboard/views/PerimeterAddFundsWindow","core/ui/grid/GridToolbar","text!templates/dashboards/edit/perimeter.html","risk/ui/RiskProfileUI","stress/ui/StressProfileUI","flow/ui/FlowPipeManagerUI"],function(r,o,t,e,n,i,a,d,l,s,u){var c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N;return v=e.ObservableUtils,g=i.VirtualPortfolioUI,h=n.VehicleUI,m=a.IntegerUI,f=t.grid,b=f.transports,c=d.DashboardFundQueryBuilder,y=l.PerimeterAddFundsWindow,p=s.GridToolbar,N=function(t,e){var n,i,a,r,o;return t.set("id",e.id),t.set("stringId",e.stringId),t.set("currency",e.currency),t.set("riskProfile",e.riskProfile),t.set("stressProfile",e.stressProfile),t.set("pipeManager",e.pipeManager),t.set("predicate",e.predicate),(r=t.get("vehicles")).splice.apply(r,[0,r.length].concat(x.call(e.vehicles))),(o=t.get("virtualPortfolios")).splice.apply(o,[0,o.length].concat(x.call(e.virtualPortfolios))),(a=t.get("variables")).splice.apply(a,[0,a.length].concat(x.call(e.variables))),T(n={}),n.predicateLocked=!0,n.model=t,i=D(n),n.rules.setRules(i),n.predicateLocked=!1,null},I=function(t){var e;return t.predicateLocked||(e=t.rules.getRules(),S(t,e)),null},T=function(t){var e;return e=r("#fundQueryBuilder"),t.rules=c.init(e),t.rules.event.register(I.bind(null,t)),null},S=function(t,e){var n;return n=t.model,e?n.set("predicate",JSON.stringify(e)):n.set("predicate","")},D=function(t){var e;e=t.model.get("predicate");try{return JSON.parse(e)}catch(t){return t,null}},C=function(n,t){var i;if(i=t.data("kendoGrid"))return y.open(i.dataSource.data()).then(function(t){var e;if(t)return e=n.model,i.dataSource.data(t),e.set("vehicles",t)}).catch(function(){})},k=function(t){var e,n,i,a;return e=r("#vehicleGrid"),a=(new p).addClick(o.t("dashboards:perimeters.actions.addVehicles"),"k-icon k-i-plus",C.bind(null,t,e)).addExcel(),n=t.model,i={dataSource:{transport:b.createLocal({data:n.get("vehicles")}),schema:{model:{id:"id",fields:{object:{nullable:!0,validation:{required:!0}},priority:{type:"number",defaultValue:0}},objectName:function(){return v.get(this,"object.name")}}},sort:{field:"object.name",dir:"asc"}},columns:[{command:["edit","destroy"],title:" ",width:230},h.column({field:"object",title:o.t("dashboards:perimeters.fields.vehicle"),width:300}),m.column({field:"priority",title:o.t("dashboards:perimeters.fields.priority"),width:100})],toolbar:a.template(),pageable:f.defaultPageable(),scrollable:!0},f.withDefaults(i),e.kendoGrid(i),a.bind(e)},E=function(t){var e,n;return e=t.model,n={dataSource:{transport:b.createLocal({data:e.get("virtualPortfolios")}),schema:{model:{id:"id",fields:{object:{nullable:!0,validation:{required:!0}},priority:{type:"number",defaultValue:0}},objectName:function(){return v.get(this,"object.name")}}},sort:{field:"object",dir:"asc"}},columns:[{command:["edit","destroy"],title:" "},g.column({field:"object",title:o.t("dashboards:perimeters.fields.virtualPortfolio")}),m.column({field:"priority",title:o.t("dashboards:perimeters.fields.priority")})],toolbar:["create"],pageable:f.defaultPageable(),scrollable:!1},f.withDefaults(n),r("#virtualGrid").kendoGrid(n)},w=function(t){var e,n;return e=t.model,n={dataSource:{transport:b.createLocal({data:e.get("variables")}),schema:{model:{id:"id",fields:{variable:{type:"string",validation:{required:!0}},value:{type:"string",defaultValue:""}}}}},columns:[{command:["edit","destroy"]},{field:"variable",title:o.t("dashboards:perimeters.fields.variable")},{field:"value",title:o.t("dashboards:perimeters.fields.value")}],toolbar:["create"],pageable:f.defaultPageable(),scrollable:!1},f.withDefaults(n),r("#variablesGrid").kendoGrid(n)},{getTemplates:function(){return{view:u}},createRawModel:function(){return{id:0,stringId:"",currency:null,riskProfile:null,stressProfile:null,pipeManager:null,predicate:null,vehicles:[],virtualPortfolios:[],variables:[]}},updateModel:N,init:function(t){return k(t),E(t),w(t),null}}})}.call(this),function(){define("views/dashboards/perimeter/edit.perimeter",["site","views/edit/edit","core/data/SiteCategories","views/dashboards/perimeter/perimeter"],function(t,e,n,i){var a,r,o,d,l,s,u,c;return o=t.router,r=t.map,d=n.SiteCategories,s=function(t){return t.create(i)},l=function(){var t;return t={siteCategory:d.dashboards,key:"dashboardPerimeterEdit",rootId:"dashboardPerimeterRoot",actionsId:"dashboardPerimeterActions",url:"board/perimeter.json",getView:s},e.create(t)},a=null,c=function(){return null==a&&(a=l()),a},u=function(t){return c().display(t)},{init:function(){return o.addRoute(r.dashboardPerimeterEdit,u)}}})}.call(this),define("core/ui/ColorUI",["require","exports","./grid/column/ColumnUtils"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorUI=void 0;var n=function(){function t(){}return t.column=function(t,e){i.ColumnUtils.addEditor(t,function(t){return t.kendoColorPicker(e||{})});var n=t.field;return n&&(t.template||(t.template=function(t){return'<div style="background-color:'+t[n]+';">&nbsp;</div>'})),t},t}();e.ColorUI=n}),define("text!templates/dashboards/edit/style.html",[],function(){return'<div id="dashboardStyleRoot" class="idxStandardContent">\n    <h1 data-i18n="dashboards:styles.edit.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="dashboards:styles.edit.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="dashboardStyleActions"></div>\n\n    <h2 data-i18n="dashboards:styles.sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="dashboards:styles.fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" class="k-textbox" type="text" data-bind="value: stringId" required/>\n            </td>\n            <td></td>\n            <td></td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="dashboards:styles.fields.name"></label>\n            </td>\n            <td>\n                <input id="name" class="k-textbox" type="text" data-bind="value: name" required/>\n            </td>\n            <td></td>\n            <td></td>\n        </tr>\n    </table>\n\n    <h2 data-i18n="dashboards:styles.sections.legend"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="legendKey" data-i18n="dashboards:styles.fields.legendKey"></label>\n            </td>\n            <td>\n                <input id="legendKey" type="checkbox" data-bind="checked: legendKey"/>\n            </td>\n            <td>\n                <label for="leaderLines" data-i18n="dashboards:styles.fields.leaderLines"></label>\n            </td>\n            <td>\n                <input id="leaderLines" type="checkbox" data-bind="checked: leaderLines"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="category" data-i18n="dashboards:styles.fields.category"></label>\n            </td>\n            <td>\n                <input id="category" type="checkbox" data-bind="checked: category"/>\n            </td>\n            <td>\n                <label for="series" data-i18n="dashboards:styles.fields.series"></label>\n            </td>\n            <td>\n                <input id="series" type="checkbox" data-bind="checked: series"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="value" data-i18n="dashboards:styles.fields.value"></label>\n            </td>\n            <td>\n                <input id="value" type="checkbox" data-bind="checked: value"/>\n            </td>\n            <td>\n                <label for="percent" data-i18n="dashboards:styles.fields.percent"></label>\n            </td>\n            <td>\n                <input id="percent" type="checkbox" data-bind="checked: percent"/>\n            </td>\n        </tr>\n    </table>\n\n    \n    <h2 data-i18n="dashboards:styles.sections.colors"></h2>\n\n    <div id="colorGrid" class="floatingGrid"></div>\n    <div class="clearer"></div>\n\n</div>\n\n\n\n'}),function(){var c=[].slice;define("views/dashboards/style/style",["jquery","i18n","ui","core/ui/IntegerUI","core/ui/ColorUI","text!templates/dashboards/edit/style.html"],function(i,a,t,e,n,r){var o,d,l,s,u;return d=e.IntegerUI,o=n.ColorUI,l=t.grid,s=l.transports,u=function(t){var e,n;return e=t.model,n={dataSource:{transport:s.createLocal({data:e.get("colors")}),schema:{model:{id:"id",fields:{color:{type:"string",defaultValue:"#000000"},priority:{type:"number",defaultValue:0}}}},sort:{field:"priority",dir:"asc"}},columns:[{command:["edit","destroy"],title:" "},d.column({field:"priority",title:a.t("dashboards:styles.fields.priority")}),o.column({field:"color",title:a.t("dashboards:styles.fields.color")})],toolbar:["create"],pageable:l.defaultPageable(),scrollable:!1},l.withDefaults(n),i("#colorGrid").kendoGrid(n)},{getTemplates:function(){return{view:r}},createRawModel:function(){return{id:0,stringId:"",name:"",legendKey:!1,value:!1,category:!1,series:!1,percent:!1,leaderLines:!1,colors:[]}},updateModel:function(t,e){var n;return t.set("id",e.id),t.set("stringId",e.stringId),t.set("name",e.name),t.set("legendKey",e.legendKey),t.set("value",e.value),t.set("category",e.category),t.set("series",e.series),t.set("percent",e.percent),t.set("leaderLines",e.leaderLines),(n=t.get("colors")).splice.apply(n,[0,n.length].concat(c.call(e.colors))),null},init:function(t){return u(t),null}}})}.call(this),function(){define("views/dashboards/style/edit.style",["site","views/edit/edit","core/data/SiteCategories","views/dashboards/style/style"],function(t,e,n,i){var a,r,o,d,l,s,u,c;return o=t.router,r=t.map,d=n.SiteCategories,s=function(t){return t.create(i)},l=function(){var t;return t={siteCategory:d.dashboards,key:"dashboardStyleEdit",rootId:"dashboardStyleRoot",actionsId:"dashboardStyleActions",url:"board/style.json",getView:s},e.create(t)},a=null,c=function(){return null==a&&(a=l()),a},u=function(t){return c().display(t)},{init:function(){return o.addRoute(r.dashboardStyleEdit,u)}}})}.call(this),function(){define("views/dashboards/module",["views/layout","views/dashboards/dashboards","views/dashboards/dashboards.setup","views/dashboards/dashboard/edit.dashboard","views/dashboards/component/edit.component","views/dashboards/perimeter/edit.perimeter","views/dashboards/style/edit.style"],function(t,e,n,i,a,r,o){return{init:function(){return e.init(t),n.init(),i.init(),a.init(),r.init(),o.init(),null}}})}.call(this),define("core/api/InvestorType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InvestorType=void 0;var r,o;(r=e.InvestorType||(e.InvestorType={}))[r.RETAIL=1]="RETAIL",r[r.PROFESSIONAL=2]="PROFESSIONAL",(o=e.InvestorType||(e.InvestorType={})).getName=a.EnumUtils.createNameFn("object:InvestorType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosInvestorType",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/ui/LinkUI",["require","exports","lodash"],function(t,e,r){"use strict";function n(a){return{column:function(t){return n=a,(i=(e=t).field)&&(n=n?n+":":"",e.template=function(t){var e=(t||{})[i];return r.isNil(e)||!r.isString(e)?"":'<a class="d-link" href="'+n+encodeURI(e)+'">'+kendo.htmlEncode(e)+"</a>"}),e;var e,n,i}}}Object.defineProperty(e,"__esModule",{value:!0}),e.LinkUI=void 0;var i=function(){function t(){}return t.Web=n(),t.Mail=n("mailto"),t}();e.LinkUI=i}),function(){var D=[].slice;define("views/data/model/entity.model",["i18n","site","views/data/model/object.model","core/api/EntityRole","core/api/InvestorType","core/ui/LinkUI"],function(e,t,d,n,i,a,r){var o,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E;return s=a.LinkUI,l=i.InvestorType,o=n.EntityRole,I=t.router,u=t.map,w="string",C="number","id",v="name",h="phone",b="mail",f="investorType",y="needsCertification",T="roles","TIN",m="customReferences",c="blockedPeriods",g="reportingCurrency",p="contacts",k=function(t){var e,n,i,a;for(i=[],e=0,n=t.length;e<n;e++)a=t[e],i.push(ALL.getName(a.id));return i.sort().join(", ")},function(t){return k(t.toJSON())},E=function(t){var e;return e=JSON.stringify({id:t.id,name:t.name,type:t.type,currency:t.reportingCurrency||t.currency}),I.navigate(u.getPortfolioInvestor(e))},{createDataSourceSkeleton:function(){var t,e;return(e=(t=d.createDataSourceSkeleton()).schema.model.fields).id={type:C},e.name={type:w},e[h]={type:w},e.mail={type:w},e[f]={type:C},e[y]={type:"boolean"},e[g]={type:C},t.sort={field:v,dir:"asc"},t},addColumns:function(t){return d.addColumns(t),t.push({field:v,title:e.t("data:fields.name"),width:"300px",priority:0}),t.push({field:h,title:e.t("data:fields.phone"),width:"150px",priority:100}),t.push(s.Mail.column({field:b,title:e.t("data:fields.mail"),priority:200})),t.push(l.column({field:f,title:e.t("data:fields.investorType"),priority:300})),t.push(o.columnMulti({field:T,title:e.t("data:sections.roles"),priority:400})),t.push({field:"id",title:e.t("data:fields.id"),width:80,priority:1002}),t},updateRawModel:function(t){return d.updateRawModel(t),t.id=0,t.name="",t[h]="",t.mail="",t[f]=0,t[y]=!1,t.TIN="",t[T]=[],t[m]=[],t.addresses=[],t[c]=[],t[g]=null,t.portfolioClick=function(){return E(this)},t[p]=[]},updateModel:function(t,e){var n,i,a,r,o;return d.updateModel(t,e),t.set("id",e.id),t.set(v,e.name),t.set(h,e[h]),t.set(b,e.mail),t.set(f,e[f]),t.set(y,e[y]),t.set("TIN",e.TIN),t.set(g,e[g]),(r=t.get(m)).splice.apply(r,[0,r.length].concat(D.call(e[m]))),(o=t.get(T)).splice.apply(o,[0,o.length].concat(D.call(e[T]))),(n=t.get("addresses")).splice.apply(n,[0,n.length].concat(D.call(e.addresses))),(i=t.get(c)).splice.apply(i,[0,i.length].concat(D.call(e[c]))),(a=t.get(p)).splice.apply(a,[0,a.length].concat(D.call(e[p]))),null}}})}.call(this),function(){var I=[].slice;define("views/data/model/individual.model",["i18n","ui","views/data/model/entity.model"],function(e,t,o){var d,l,s,u,c,p,m,f,b,v,y,h,g,T,n;return t.grid,n="string","number","date",T="title",c="firstName",y="middleName",v="lastName",l="company",b="language","AIFMD",p="investorGroup",f="joinedEntities",u="dataByCountry",d="birthDate",g="placeOfBirth",s="countryOfBirth",m="idCardNumber",h="passportNumber",{createDataSourceSkeleton:function(){var t,e;return(e=(t=o.createDataSourceSkeleton()).schema.model.fields)[T]={type:n},e[c]={type:n},e[y]={type:n},e[v]={type:n},e[l]={type:"number"},e[b]={type:n},e[d]={type:"date"},e[g]={type:n},e[s]={type:"number"},e[m]={type:n},e[h]={type:n},t},addColumns:function(t){return o.addColumns(t),t.push({field:T,title:e.t("data:fields.title"),width:"50px",priority:10}),t.push({field:c,title:e.t("data:fields.firstName"),width:"100px",priority:20}),t.push({field:y,title:e.t("data:fields.middleName"),width:"80px",priority:30}),t.push({field:v,title:e.t("data:fields.lastName"),width:"100px",priority:40}),t},updateRawModel:function(t){var e;return o.updateRawModel(t),t[T]="",t[c]="",t[y]="",t[v]="",t[l]=null,t[b]=null,t[d]=null,t[g]=null,t[s]=null,t.user=null,e={investorGroup:0},t.AIFMD=e,t[f]=[],t[u]=[],t},updateModel:function(t,e){var n,i,a,r;return o.updateModel(t,e),t.set(T,e[T]),t.set(c,e[c]),t.set(y,e[y]),t.set(v,e[v]),t.set(l,e[l]),t.set(b,e[b]),t.set(d,e[d]),t.set(g,e[g]),t.set(s,e[s]),t.set(m,e[m]),t.set(h,e[h]),t.set("user",e.user),i=t.get("AIFMD"),n=e.AIFMD,i.set(p,n[p]),(r=t.get(f)).splice.apply(r,[0,r.length].concat(I.call(e[f]))),(a=t.get(u)).splice.apply(a,[0,a.length].concat(I.call(e[u]))),null}}})}.call(this),define("core/api/AIFMReportingCode",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AIFMReportingCode=void 0;var r,o;(r=e.AIFMReportingCode||(e.AIFMReportingCode={}))[r.REGISTERED=1]="REGISTERED",r[r.AUTHORISED_OPT_IN=2]="AUTHORISED_OPT_IN",r[r.AUTHORISED_UNLEVERAGED=3]="AUTHORISED_UNLEVERAGED",r[r.AUTHORISED_HALF_YEARLY=4]="AUTHORISED_HALF_YEARLY",r[r.AUTHORISED_QUARTERLY=5]="AUTHORISED_QUARTERLY",r[r.NON_EU_PPR_ANNUAL=6]="NON_EU_PPR_ANNUAL",r[r.NON_EU_PPR_UNLEVERAGED=7]="NON_EU_PPR_UNLEVERAGED",r[r.NON_EU_PPR_HALF_YEARLY=8]="NON_EU_PPR_HALF_YEARLY",r[r.NON_EU_PPR_QUARTERLY=9]="NON_EU_PPR_QUARTERLY",(o=e.AIFMReportingCode||(e.AIFMReportingCode={})).getName=a.EnumUtils.createNameFn("object:AIFMReportingCode",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAIFMReportingCode",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/AIFMReportingObligation",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AIFMReportingObligation=void 0;var r,o;(r=e.AIFMReportingObligation||(e.AIFMReportingObligation={}))[r.NONE=0]="NONE",r[r.ARTICLE_24_1=1]="ARTICLE_24_1",r[r.ARTICLE_3_3_D=2]="ARTICLE_3_3_D",r[r.ARTICLE_24_1_MEMBER=3]="ARTICLE_24_1_MEMBER",(o=e.AIFMReportingObligation||(e.AIFMReportingObligation={})).getName=a.EnumUtils.createNameFn("object:AIFMReportingObligation",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAIFMReportingObligation",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/AIFMReportingObligationFrequency",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AIFMReportingObligationFrequency=void 0;var r,o;(r=e.AIFMReportingObligationFrequency||(e.AIFMReportingObligationFrequency={}))[r.NONE=0]="NONE",r[r.QUARTERLY=1]="QUARTERLY",r[r.HALF_YEARLY=2]="HALF_YEARLY",r[r.YEARLY=3]="YEARLY",(o=e.AIFMReportingObligationFrequency||(e.AIFMReportingObligationFrequency={})).getName=a.EnumUtils.createNameFn("object:AIFMReportingObligationFrequency",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAIFMReportingObligationFrequency",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),function(){var U=[].slice;define("views/data/model/legal.model",["i18n","views/data/model/entity.model","core/api/AIFMReportingCode","core/api/AIFMReportingObligation","core/api/AIFMReportingObligationFrequency","core/api/AIFMDInvestorGroup","basic/ui/CountryUI","core/ui/DateUI","core/ui/LinkUI"],function(e,o,t,n,i,a,r,d,l){var s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O;return b=l.LinkUI,f=d.DateUI,m=r.CountryUI,u=t.AIFMReportingCode,c=n.AIFMReportingObligation,p=i.AIFMReportingObligationFrequency,s=a.AIFMDInvestorGroup,"number","date","boolean",O="string",h="country",w="inceptionDate",S="liquidationDate",E="internal",_="webSite","value","BIC",g="CUSIP","ECB",D="ISIN","LEI","IEI","NCA","RIC",x="SEDOL",R="TICKER",I="GIIN",k="IDENTIFICATION_NUMBER_EXTENSION",v="AIFMD",C="investorGroup",y="AIFMReportingCode",N="AIFMReportingObligation",T="AIFMReportingObligationFrequency",{createDataSourceSkeleton:function(){var t,e;return(e=(t=o.createDataSourceSkeleton()).schema.model.fields).shortName={type:O},e[h]={type:"number"},e[w]={type:"date"},e[S]={type:"date"},e[E]={type:"boolean"},e[_]={type:O},e.BIC={type:O},e[g]={type:O},e.ECB={type:O},e.ISIN={type:O},e.LEI={type:O},e.IEI={type:O},e.RIC={type:O},e[x]={type:O},e[R]={type:O},e.GIIN={type:O},t},addColumns:function(t){return o.addColumns(t),t.push({field:"shortName",title:e.t("data:fields.shortName"),width:"150px",priority:1}),t.push(m.column({field:h,title:e.t("data:fields.country"),priority:10})),t.push(f.column({field:w,title:e.t("data:fields.inceptionDate"),priority:20})),t.push(f.column({field:S,title:e.t("data:fields.liquidationDate"),priority:30})),t.push({field:E,title:e.t("data:fields.internal"),width:"50px",priority:40}),t.push(b.Web.column({field:_,title:e.t("data:fields.webSite"),priority:50})),t.push({field:"BIC",title:e.t("data:fields.BIC"),width:"150px",priority:60}),t.push({field:g,title:e.t("data:fields.CUSIP"),width:"150px",priority:61}),t.push({field:"ECB",title:e.t("data:fields.ECB"),width:"150px",priority:62}),t.push({field:D,title:e.t("data:fields.ISIN"),width:"150px",priority:63}),t.push({field:"LEI",title:e.t("data:fields.LEI"),width:"150px",priority:64}),t.push({field:"IEI",title:e.t("data:fields.IEI"),width:"150px",priority:65}),t.push({field:"RIC",title:e.t("data:fields.RIC"),width:"150px",priority:67}),t.push({field:x,title:e.t("data:fields.SEDOL"),width:"150px",priority:68}),t.push({field:R,title:e.t("data:fields.TICKER"),width:"150px",priority:69}),t.push(s.column({field:v+"."+C,title:e.t("data:fields.AIFMDInvestorGroup"),width:"200px",priority:80})),t.push(u.column({field:v+"."+y,title:e.t("data:fields.AIFMReportingCode"),width:"200px",priority:81})),t.push(c.column({field:v+"."+N,title:e.t("data:fields.AIFMReportingObligation"),width:"200px",priority:82})),t.push(p.column({field:v+"."+T,title:e.t("data:fields.AIFMReportingObligationFrequency"),width:"200px",priority:82})),t},updateRawModel:function(t){var e;return o.updateRawModel(t),t.shortName="",t[h]=0,t[w]=new Date,t[S]=null,t[E]=!1,t[_]="",t.bclSector=null,t.BIC="",t[g]="",t.ECB="",t.ISIN="",t.LEI="",t.IEI="",t.NCA=[],t.RIC="",t[x]="",t[R]="",t.GIIN="",t[k]="",e={investorGroup:0,AIFMReportingCode:0,AIFMReportingObligation:0,AIFMReportingObligationFrequency:0},t[v]=e},updateModel:function(t,e){var n,i,a,r;return o.updateModel(t,e),t.set("shortName",e.shortName),t.set(h,e[h]),t.set(w,new Date(e[w])),i=e[S],t.set(S,i?new Date(i):null),t.set(E,e[E]),t.set(_,e[_]),t.set("bclSector",e.bclSector),t.set("BIC",e.BIC),t.set(g,e[g]),t.set("ECB",e.ECB),t.set(D,e.ISIN),t.set("LEI",e.LEI),t.set("IEI",e.IEI),(r=t.get("NCA")).splice.apply(r,[0,r.length].concat(U.call(e.NCA))),t.set("RIC",e.RIC),t.set(x,e[x]),t.set(R,e[R]),t.set(I,e.GIIN),t.set(k,e[k]),a=t.get(v),n=e[v],a.set(C,n[C]),a.set(y,n[y]),a.set(N,n[N]),a.set(T,n[T])}}})}.call(this),define("core/api/AIFStrategyFundOfFunds",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AIFStrategyFundOfFunds=void 0;var r,o;(r=e.AIFStrategyFundOfFunds||(e.AIFStrategyFundOfFunds={}))[r.FUND_OF_HEDGE_FUNDS=1]="FUND_OF_HEDGE_FUNDS",r[r.FUND_OF_PRIVATE_EQUITY=2]="FUND_OF_PRIVATE_EQUITY",r[r.OTHER_FUND_OF_FUNDS=3]="OTHER_FUND_OF_FUNDS",(o=e.AIFStrategyFundOfFunds||(e.AIFStrategyFundOfFunds={})).getName=a.EnumUtils.createNameFn("object:AIFStrategyFundOfFunds",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAIFStrategyFundOfFunds",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/AIFStrategyHedgeFund",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AIFStrategyHedgeFund=void 0;var r,o;(r=e.AIFStrategyHedgeFund||(e.AIFStrategyHedgeFund={}))[r.EQUITY_LONG_BIAS=1]="EQUITY_LONG_BIAS",r[r.EQUITY_LONG_SHORT=2]="EQUITY_LONG_SHORT",r[r.EQUITY_MARKET_NEUTRAL=3]="EQUITY_MARKET_NEUTRAL",r[r.EQUITY_SHORT_BIAS=4]="EQUITY_SHORT_BIAS",r[r.RELATIVE_VALUE_FIXED_INCOME_ARB=5]="RELATIVE_VALUE_FIXED_INCOME_ARB",r[r.RELATIVE_VALUE_CB_ARB=6]="RELATIVE_VALUE_CB_ARB",r[r.RELATIVE_VALUE_VOL_ARB=7]="RELATIVE_VALUE_VOL_ARB",r[r.EVENT_DRIVEN_DISTRESSED=8]="EVENT_DRIVEN_DISTRESSED",r[r.EVENT_DRIVEN_RISK_ARB=9]="EVENT_DRIVEN_RISK_ARB",r[r.EVENT_DRIVEN_EQUITY_SPECIAL=10]="EVENT_DRIVEN_EQUITY_SPECIAL",r[r.CREDIT_LONG_SHORT=11]="CREDIT_LONG_SHORT",r[r.CREDIT_ASSET_BASED_LENDING=12]="CREDIT_ASSET_BASED_LENDING",r[r.MACRO=13]="MACRO",r[r.MANAGED_FUTURES_FUNDAMENTAL=14]="MANAGED_FUTURES_FUNDAMENTAL",r[r.MANAGED_FUTURES_QUANTITATIVE=15]="MANAGED_FUTURES_QUANTITATIVE",r[r.MULTI_STRATEGY=16]="MULTI_STRATEGY",r[r.OTHER_STRATEGY=17]="OTHER_STRATEGY",(o=e.AIFStrategyHedgeFund||(e.AIFStrategyHedgeFund={})).getName=a.EnumUtils.createNameFn("object:AIFStrategyHedgeFund",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAIFStrategyHedgeFund",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/AIFStrategyOther",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AIFStrategyOther=void 0;var r,o;(r=e.AIFStrategyOther||(e.AIFStrategyOther={}))[r.COMMODITY_FUND=1]="COMMODITY_FUND",r[r.EQUITY_FUND=2]="EQUITY_FUND",r[r.FIXED_INCOME_FUND=3]="FIXED_INCOME_FUND",r[r.INFRASTRUCTURE_FUND=4]="INFRASTRUCTURE_FUND",r[r.OTHER_FUND=5]="OTHER_FUND",(o=e.AIFStrategyOther||(e.AIFStrategyOther={})).getName=a.EnumUtils.createNameFn("object:AIFStrategyOther",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAIFStrategyOther",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/AIFStrategyPrivateEquity",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AIFStrategyPrivateEquity=void 0;var r,o;(r=e.AIFStrategyPrivateEquity||(e.AIFStrategyPrivateEquity={}))[r.VENTURE_CAPITAL=1]="VENTURE_CAPITAL",r[r.GROWTH_CAPITAL=2]="GROWTH_CAPITAL",r[r.MEZZANINE_CAPITAL=3]="MEZZANINE_CAPITAL",r[r.MULTI_STRATEGY=4]="MULTI_STRATEGY",r[r.OTHER=5]="OTHER",(o=e.AIFStrategyPrivateEquity||(e.AIFStrategyPrivateEquity={})).getName=a.EnumUtils.createNameFn("object:AIFStrategyPrivateEquity",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAIFStrategyPrivateEquity",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/AIFStrategyRealEstate",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AIFStrategyRealEstate=void 0;var r,o;(r=e.AIFStrategyRealEstate||(e.AIFStrategyRealEstate={}))[r.RESIDENTIAL=1]="RESIDENTIAL",r[r.COMMERCIAL=2]="COMMERCIAL",r[r.INDUSTRIAL=3]="INDUSTRIAL",r[r.MULTI=4]="MULTI",r[r.OTHER=5]="OTHER",(o=e.AIFStrategyRealEstate||(e.AIFStrategyRealEstate={})).getName=a.EnumUtils.createNameFn("object:AIFStrategyRealEstate",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAIFStrategyRealEstate",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/MasterFeeder",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MasterFeeder=void 0;var r,o;(r=e.MasterFeeder||(e.MasterFeeder={}))[r.NONE=1]="NONE",r[r.MASTER=2]="MASTER",r[r.FEEDER=3]="FEEDER",(o=e.MasterFeeder||(e.MasterFeeder={})).getName=a.EnumUtils.createNameFn("object:MasterFeeder",o),o.widget=i.EnumWidgetUtils.createDropList("DomosMasterFeeder",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/ShareIssuingType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils","lodash"],function(t,e,n,i,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShareIssuingType=void 0;var o,d;(o=e.ShareIssuingType||(e.ShareIssuingType={}))[o.AT_SUBSCRIPTION=1]="AT_SUBSCRIPTION",o[o.DURING_CAPITAL_CALL=2]="DURING_CAPITAL_CALL",o[o.WITHOUT_CAPITAL_CALL=3]="WITHOUT_CAPITAL_CALL",o[o.WITH_ONE_CAPITAL_CALL=4]="WITH_ONE_CAPITAL_CALL",(d=e.ShareIssuingType||(e.ShareIssuingType={})).getName=a.EnumUtils.createNameFn("object:ShareIssuingType",d),d.widget=i.EnumWidgetUtils.createDropList("DomosShareIssuingType",d,!1),d.column=n.EnumColumnUtils.createFactory(d,d.widget),d.withOneOrWithoutCapitalCall=function(t){return r.includes([d.WITHOUT_CAPITAL_CALL,d.WITH_ONE_CAPITAL_CALL],t)}}),function(){var ut=[].slice;define("views/data/model/vehicle.model",["i18n","basic/ui/CurrencyUI","basic/ui/CountryUI","views/data/model/legal.model","core/api/AIFStrategyFundOfFunds","core/api/AIFStrategyHedgeFund","core/api/AIFStrategyOther","core/api/AIFStrategyPrivateEquity","core/api/AIFStrategyRealEstate","core/api/AIFType","core/api/MasterFeeder","object/ui/EntityUI","core/api/ShareIssuingType","core/util/ObservableUtils","core/ui/NumberUI","object/ui/ObjectTypeUI","core/api/AIFMReportingCode","core/api/AIFMReportingObligation","core/api/AIFMReportingObligationFrequency","core/api/AIFMDInvestorGroup","core/ui/DateTimeUI","core/ui/LinkUI","core/api/EntityRole","core/api/InvestorType","core/ui/DateUI","core/ui/PercentUI","object/web/ObjectMap"],function(e,t,n,c,i,a,r,o,d,l,s,u,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D){var S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q,z,X,Z,tt,et,nt,it,at,rt,ot,dt,lt,st;return K=f.NumberUI,z=m.ObservableUtils,M=t.CurrencyUI,_=i.AIFStrategyFundOfFunds,O=a.AIFStrategyHedgeFund,U=r.AIFStrategyOther,A=o.AIFStrategyPrivateEquity,F=d.AIFStrategyRealEstate,L=l.AIFType,J=s.MasterFeeder,B=u.EntityUI,V=B.Individual,H=B.Legal,Z=H.Vehicle,Q=b.ObjectTypeUI,P=n.CountryUI,N=v.AIFMReportingCode,x=y.AIFMReportingObligation,R=h.AIFMReportingObligationFrequency,S=g.AIFMDInvestorGroup,j=T.DateTimeUI,Y=I.LinkUI,W=w.InvestorType,q=C.EntityRole,G=k.DateUI,X=E.PercentUI,$=D.ObjectMap,nt=function(t){return t===L.HEDGE_FUND},it=function(t,e){return nt(t)&&e===O.OTHER_STRATEGY},ot=function(t){return t===L.PRIVATE_EQUITY_FUND},dt=function(t,e){return ot(t)&&e===A.OTHER},lt=function(t){return t===L.REAL_ESTATE_FUND},st=function(t,e){return lt(t)&&e===F.OTHER},tt=function(t){return t===L.FUND_OF_FUNDS},et=function(t,e){return tt(t)&&e===_.OTHER_FUND_OF_FUNDS},at=function(t){return t===L.OTHER_FUND},rt=function(t,e){return at(t)&&e===U.OTHER_FUND},{createDataSourceSkeleton:function(){var t,e,n;return(e=(n=(t=c.createDataSourceSkeleton()).schema.model).fields).currency={type:"number"},e.company={nullable:!0},e.manager={nullable:!0},e.amountSought={type:"number"},e.expectedReturn={type:"number"},e.description={type:"string"},e.withdrawal={type:"boolean"},e.masterFeeder={type:"number"},e.master={type:"number"},e.navFrequency={type:"number"},e.navFrequencyComments={type:"string"},e.launchDate={type:"date"},e.closingReason={type:"number"},e.investmentPeriodInYears={type:"number"},e.investmentPeriodEndDate={type:"date"},e.subscriptionPeriodEndDate={type:"date"},e.maturityDate={type:"date"},e.maturityExtensionInYears={type:"number"},e.firstNavDate={type:"date"},e.faceValue={type:"number"},e.feesDayCountBasis={type:"number"},e.hurdleDayCountBasis={type:"number"},e.hurdlePeriodicity={type:"number"},e.managementInvestmentMinimumPercent={type:"number"},e.carriedInvestmentMinimumPercent={type:"number"},e.premiumInterestRate={type:"number"},e.premiumDayCountBasis={type:"number"},e.premiumCapitalizationFrequency={type:"number"},e.firstCallCommitmentPercent={type:"number"},e.otherFeesCapPercent={type:"number"},e.formationFeesCapPercent={type:"number"},e.latePaymentFloatingRateId={type:"number"},e.latePaymentMarginPercent={type:"number"},e.latePaymentFrequency={type:"number"},e.clawBackPercent={type:"number"},e.transparencyType={type:"number"},e.benchmarkIndex={nullable:!0},e.firstDayCalculation={type:"date"},e.firstCutOff={type:"date"},e.endFirstPeriod={type:"date"},e.cutOffPeriod={nullable:!0},e.paymentPeriod={nullable:!0},e.fundSize={type:"number"},n.masterName=function(){return z.get(this,"master.name")},n.companyName=function(){return z.get(this,"company.name")},n.companyUrl=function(){return $.objectEdit(z.get(this,"company.id"))},n.managerName=function(){return z.get(this,"manager.name")},n.managerUrl=function(){return $.objectEdit(z.get(this,"manager.id"))},t},addColumns:function(t){return t.push({field:"name",title:e.t("data:fields.name"),width:245,priority:0}),t.push({field:"shortName",title:e.t("data:fields.shortName"),width:125,priority:10}),t.push(Q.column({field:"type",title:e.t("data:fields.type"),width:250,priority:20})),t.push(P.column({field:"country",title:e.t("data:fields.country"),width:130,priority:30})),t.push(M.column({field:"currency",title:e.t("data:fields.currency"),width:110,priority:40})),t.push(H.column({field:"company",title:e.t("data:fields.company"),width:245,priority:50})),t.push(G.column({field:"inceptionDate",title:e.t("data:fields.inceptionDate"),width:136,priority:60})),t.push(K.column({field:"amountSought",title:e.t("data:fields.amountSought"),width:142,priority:70})),t.push(X.column({field:"expectedReturn",title:e.t("data:fields.expectedReturn"),width:150,priority:80})),t.push(Z.Master.column({field:"master",title:e.t("data:fields.master"),width:245,priority:90})),t.push({field:"ISIN",title:e.t("data:fields.ISIN"),width:125,priority:100}),t.push(q.columnMulti({field:"roles",title:e.t("data:sections.roles"),width:103,priority:110})),t.push(j.column({field:"created",title:e.t("data:fields.creationDate"),width:150,priority:130})),t.push({field:"id",title:e.t("data:fields.id"),width:80,priority:140}),t.push({field:"phone",title:e.t("data:fields.phone"),width:150,priority:1e3,hidden:!0}),t.push(Y.Mail.column({field:"mail",title:e.t("data:fields.mail"),width:200,priority:1010,hidden:!0})),t.push(W.column({field:"investorType",title:e.t("data:fields.investorType"),width:150,priority:1020,hidden:!0})),t.push(G.column({field:"liquidationDate",title:e.t("data:fields.liquidationDate"),width:140,priority:1030,hidden:!0})),t.push({field:"internal",title:e.t("data:fields.internal"),width:50,priority:1040,hidden:!0}),t.push(Y.Web.column({field:"webSite",title:e.t("data:fields.webSite"),width:200,priority:1050,hidden:!0})),t.push({field:"BIC",title:e.t("data:fields.BIC"),width:"150px",priority:1060,hidden:!0}),t.push({field:"CUSIP",title:e.t("data:fields.CUSIP"),width:"150px",priority:1061,hidden:!0}),t.push({field:"ECB",title:e.t("data:fields.ECB"),width:150,priority:1062,hidden:!0}),t.push({field:"LEI",title:e.t("data:fields.LEI"),width:150,priority:1064,hidden:!0}),t.push({field:"IEI",title:e.t("data:fields.IEI"),width:150,priority:1065,hidden:!0}),t.push({field:"RIC",title:e.t("data:fields.RIC"),width:150,priority:1067,hidden:!0}),t.push({field:"SEDOL",title:e.t("data:fields.SEDOL"),width:150,priority:1068,hidden:!0}),t.push({field:"TICKER",title:e.t("data:fields.TICKER"),width:150,priority:1069,hidden:!0}),t.push(S.column({field:"AIFMD.investorGroup",title:e.t("data:fields.AIFMDInvestorGroup"),width:200,priority:1080,hidden:!0})),t.push(N.column({field:"AIFMD.AIFMReportingCode",title:e.t("data:fields.AIFMReportingCode"),width:200,priority:1081,hidden:!0})),t.push(x.column({field:"AIFMD.AIFMReportingObligation",title:e.t("data:fields.AIFMReportingObligation"),width:200,priority:1082,hidden:!0})),t.push(R.column({field:"AIFMD.AIFMReportingObligationFrequency",title:e.t("data:fields.AIFMReportingObligationFrequency"),width:200,priority:1083,hidden:!0})),t.push(V.column({field:"manager",title:e.t("data:fields.manager"),width:150,priority:2e3,hidden:!0})),t.push({field:"description",title:e.t("data:fields.description"),width:200,priority:2021,hidden:!0}),t.push({field:"withdrawal",title:e.t("data:fields.withdrawal"),width:50,priority:2022,hidden:!0}),t.push(J.column({field:"masterFeeder",title:e.t("data:fields.masterFeeder"),priority:2023,width:100,hidden:!0})),t.push(L.column({field:"AIFMD.AIFType",title:e.t("data:fields.AIFType"),width:200,priority:2051,hidden:!0})),t.push(O.column({field:"AIFMD.hedgeFundStrategy",title:e.t("data:fields.AIFStrategies.hedgeFund"),width:200,priority:2052,hidden:!0})),t.push(_.column({field:"AIFMD.fundOfFundsStrategy",title:e.t("data:fields.AIFStrategies.fundOfFunds"),width:200,priority:2053,hidden:!0})),t.push(A.column({field:"AIFMD.privateEquityStrategy",title:e.t("data:fields.AIFStrategies.privateEquityFund"),width:200,priority:2054,hidden:!0})),t.push(F.column({field:"AIFMD.realEstateStrategy",title:e.t("data:fields.AIFStrategies.realEstateFund"),width:200,priority:2055,hidden:!0})),t.push(U.column({field:"AIFMD.otherFundStrategy",title:e.t("data:fields.AIFStrategies.otherFund"),width:200,priority:2056,hidden:!0})),t.push(K.column({field:"investmentPeriodInYears",title:e.t("data:fields.investmentPeriodInYears"),style:"text-align: right;",width:50,priority:2057,hidden:!0})),t},updateRawModel:function(t){var e;return c.updateRawModel(t),t.id=0,t.currency=0,t.company=null,t.manager=null,t.amountSought=0,t.expectedReturn=0,t.description="",t.withdrawal=!1,t.masterFeeder=0,t.master=null,t.navFrequency=1,t.navFrequencyComments="",t.launchDate=new Date,t.closingReason=null,t.bank=null,t.fundShares=[],t.investmentPeriodInYears=0,t.investmentPeriodEndDate=null,t.subscriptionPeriodEndDate=null,t.maturityDate=null,t.maturityExtensionInYears=0,t.firstNavDate=null,t.portalPublicationDate=null,t.faceValue=0,t.feesDayCountBasis=5,t.hurdleDayCountBasis=5,t.hurdlePeriodicity=4,t.managementInvestmentMinimumPercent=.03,t.carriedInvestmentMinimumPercent=.025,t.premiumInterestRate=0,t.premiumDayCountBasis=3,t.premiumCapitalizationFrequency=4,t.firstCallCommitmentPercent=0,t.otherFeesCapPercent=0,t.formationFeesCapPercent=0,t.latePaymentFloatingRateId=null,t.latePaymentMarginPercent=0,t.latePaymentFrequency=4,t.clawBackPercent=null,t.launchAtNavDate=!1,t.closingDates=[],t.shareIssuing=1,t.feesFrequency=3,t.companyUrl=function(){return $.objectEdit(z.get(this,"company.id"))},t.managerUrl=function(){return $.objectEdit(z.get(this,"manager.id"))},t.masterUrl=function(){return $.objectEdit(z.get(this,"master.id"))},t.transparencyType=2,t.benchmarkIndex=null,t.firstDayCalculation=null,t.firstCutOff=null,t.endFirstPeriod=null,t.cutOffPeriod=null,t.paymentPeriod=null,t.fundSize=0,null==t.AIFMD&&(t.AIFMD={}),(e=t.AIFMD).AIFReportingCode=0,e.AIFReportingObligation=0,e.AIFType=0,e.hedgeFundStrategy=0,e.hedgeFundDescription="",e.fundOfFundsStrategy=0,e.fundOfFundsDescription="",e.privateEquityStrategy=0,e.privateEquityDescription="",e.realEstateStrategy=0,e.realEstateDescription="",e.otherFundStrategy=0,e.otherFundDescription="",e.transparency="",t.hasMaster=function(){return this.get("masterFeeder")===J.FEEDER},e.isHedgeFund=function(){return nt(this.get("AIFType"))},e.isHedgeFundOther=function(){return it(this.get("AIFType"),this.get("hedgeFundStrategy"))},e.isPrivateEquityFund=function(){return ot(this.get("AIFType"))},e.isPrivateEquityFundOther=function(){return dt(this.get("AIFType"),this.get("privateEquityStrategy"))},e.isRealEstateFund=function(){return lt(this.get("AIFType"))},e.isRealEstateFundOther=function(){return st(this.get("AIFType"),this.get("realEstateStrategy"))},e.isFundOfFunds=function(){return tt(this.get("AIFType"))},e.isFundOfFundsOther=function(){return et(this.get("AIFType"),this.get("fundOfFundsStrategy"))},e.isOtherFund=function(){return at(this.get("AIFType"))},e.isOtherFundOther=function(){return rt(this.get("AIFType"),this.get("otherFundStrategy"))},t},updateModel:function(t,e){var n,i,a,r,o,d,l,s,u;return c.updateModel(t,e),t.set("id",e.id),t.set("currency",e.currency),t.set("company",e.company),t.set("manager",e.manager),t.set("amountSought",e.amountSought),t.set("expectedReturn",e.expectedReturn),t.set("description",e.description),t.set("withdrawal",e.withdrawal),t.set("masterFeeder",e.masterFeeder),t.set("master",e.master),t.set("navFrequency",e.navFrequency),t.set("navFrequencyComments",e.navFrequencyComments),t.set("launchDate",new Date(e.launchDate)),t.set("closingReason",e.closingReason),t.set("bank",e.bank),t.set("investmentPeriodInYears",e.investmentPeriodInYears),a=e.investmentPeriodEndDate,t.set("investmentPeriodEndDate",a?new Date(a):null),u=e.subscriptionPeriodEndDate,t.set("subscriptionPeriodEndDate",u?new Date(u):null),r=e.maturityDate,t.set("maturityDate",r?new Date(r):null),t.set("maturityExtensionInYears",e.maturityExtensionInYears),i=e.firstNavDate,t.set("firstNavDate",i?new Date(i):null),s=e.portalPublicationDate,t.set("portalPublicationDate",s?new Date(s):null),t.set("faceValue",e.faceValue),t.set("feesDayCountBasis",e.feesDayCountBasis),t.set("hurdleDayCountBasis",e.hurdleDayCountBasis),t.set("hurdlePeriodicity",e.hurdlePeriodicity),t.set("managementInvestmentMinimumPercent",e.managementInvestmentMinimumPercent),t.set("carriedInvestmentMinimumPercent",e.carriedInvestmentMinimumPercent),t.set("premiumInterestRate",e.premiumInterestRate),t.set("premiumDayCountBasis",e.premiumDayCountBasis),t.set("premiumCapitalizationFrequency",e.premiumCapitalizationFrequency),t.set("firstCallCommitmentPercent",e.firstCallCommitmentPercent),t.set("otherFeesCapPercent",e.otherFeesCapPercent),t.set("formationFeesCapPercent",e.formationFeesCapPercent),t.set("latePaymentFloatingRateId",e.latePaymentFloatingRateId),t.set("latePaymentMarginPercent",e.latePaymentMarginPercent),t.set("latePaymentFrequency",e.latePaymentFrequency),t.set("clawBackPercent",e.clawBackPercent),t.set("shareIssuing",e.shareIssuing),t.set("feesFrequency",e.feesFrequency),t.set("launchAtNavDate",e.launchAtNavDate),t.set("transparencyType",e.transparencyType),t.set("benchmarkIndex",e.benchmarkIndex),t.set("firstDayCalculation",e.firstDayCalculation),t.set("firstCutOff",e.firstCutOff),t.set("endFirstPeriod",e.endFirstPeriod),t.set("cutOffPeriod",e.cutOffPeriod),t.set("paymentPeriod",e.paymentPeriod),t.set("fundSize",e.fundSize),(l=t.get("fundShares")).splice.apply(l,[0,l.length].concat(ut.call(e.fundShares))),(d=t.get("closingDates")).splice.apply(d,[0,d.length].concat(ut.call(e.closingDates))),o=t.get("AIFMD"),n=e.AIFMD,o.set("AIFReportingCode",n.AIFReportingCode),o.set("AIFReportingObligation",n.AIFReportingObligation),o.set("AIFType",n.AIFType),o.set("hedgeFundStrategy",n.hedgeFundStrategy),o.set("hedgeFundDescription",n.hedgeFundDescription),o.set("fundOfFundsStrategy",n.fundOfFundsStrategy),o.set("fundOfFundsDescription",n.fundOfFundsDescription),o.set("privateEquityStrategy",n.privateEquityStrategy),o.set("privateEquityDescription",n.privateEquityDescription),o.set("realEstateStrategy",n.realEstateStrategy),o.set("realEstateDescription",n.realEstateDescription),o.set("otherFundStrategy",n.otherFundStrategy),o.set("otherFundDescription",n.otherFundDescription),o.set("transparency",n.transparency),null}}})}.call(this),function(){define("views/data/model/cash.model",["i18n","views/data/model/asset.model","core/util/ObservableUtils","object/web/ObjectMap"],function(t,n,e,i){var a,r,o,d,l,s,u,c;return r=e.ObservableUtils,a=i.ObjectMap,"number",c="boolean",u="value",d="pledged",o="blocked",l="subsidiaries",s="assetTargetId",{createDataSourceSkeleton:function(){var t,e;return(e=(t=n.createDataSourceSkeleton()).schema.model.fields)[u]={type:"number"},e[d]={type:c},e[o]={type:c},e[l]={type:c},t},addColumns:function(t){return n.addColumns(t),t},updateRawModel:function(t){return n.updateRawModel(t),t[u]=0,t[d]=!1,t[o]=!1,t[l]=!1,t[s]=null,t.assetTargetUrl=function(){return a.objectEdit(r.get(this,"assetTargetId.id"))},t},updateModel:function(t,e){return n.updateModel(t,e),t.set(u,e[u]),t.set(d,e[d]),t.set(o,e[o]),t.set(l,e[l]),t.set(s,e[s]),null}}})}.call(this),define("core/api/AIFTransactionType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AIFTransactionType=void 0;var r,o;(r=e.AIFTransactionType||(e.AIFTransactionType={}))[r.ACAP=1]="ACAP",r[r.BOUT=2]="BOUT",r[r.CONS=3]="CONS",r[r.CDIV=4]="CDIV",r[r.ESOP=5]="ESOP",r[r.GCAP=6]="GCAP",r[r.RCAP=7]="RCAP",r[r.SLIQ=8]="SLIQ",r[r.TURN=9]="TURN",r[r.OTHR=10]="OTHR",(o=e.AIFTransactionType||(e.AIFTransactionType={})).getName=a.EnumUtils.createNameFn("object:AIFTransactionType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAIFTransactionType",o,!0,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),function(){var z=[].slice;define("views/data/model/fund.share.model",["i18n","ui","views/data/model/asset.model","core/api/AIFTransactionType","object/web/ObjectMap","core/util/ObservableUtils","object/data/ShareClassType"],function(t,e,l,n,i,a,r){var o,d,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q;return e.grid,o=n.AIFTransactionType,d=i.ObjectMap,s=a.ObservableUtils,Y=r.ShareClassType,$="number",K="date",J="boolean","string",D="issueDate",N="lockDownDate",U="openEnded",F="redeemable",j="sidePocket",v="dealingSuspension",C="gatePercent",I="gateDate",E="illiquid",W="treasury",_="navPerShareDecimals",T="fxHedge",L="redemptionFrequency",M="redemptionNoticePeriod",P="redemptionLockUpPeriod",S="launchDate",f="closingDate",b="closingReason",G="specificForex",B="specificRate",q="specificOther",V="transactionType",A="otherTransactionTypeDescription",H="votingPercent",y="description",m="classType",O="notionalPaidAfterLP",R="minimumAmountInReserve",u="carriedInterests",c="carriedPercentage",k="hurdleYield",w="hurdleMultiple","catchUp",p="catchUpPercentage",x="managementFees",h="equityType",g="fundId",Q=function(t){return t===o.OTHR},{createDataSourceSkeleton:function(){var t,e;return(e=(t=l.createDataSourceSkeleton()).schema.model.fields)[D]={type:K},e[N]={type:K},e[U]={type:J},e[F]={type:J},e[j]={type:J},e[v]={type:J},e[C]={type:$},e[I]={type:K},e[E]={type:J},e[W]={type:J},e[_]={type:$},e[T]={type:$},e[L]={type:$},e[M]={type:$},e[P]={type:$},e[S]={type:K},e[f]={type:K},e[b]={type:$},e[G]={type:J},e[B]={type:J},e[m]={type:$},e[O]={type:J},e[q]={type:J},e[R]={type:$},e[c]={type:$},e[k]={type:$},e[w]={type:$},e.catchUp={type:$},e[p]={type:$},t},addColumns:function(t){return l.addColumns(t),t},updateRawModel:function(t){return l.updateRawModel(t),t.benchmark=null,t[D]=null,t[N]=null,t[U]=!1,t[F]=!1,t[j]=!1,t[v]=!1,t[C]=0,t[I]=null,t[E]=!1,t[W]=!1,t[_]=0,t[T]=0,t[L]=0,t[M]=0,t[P]=0,t[S]=new Date,t[f]=null,t[b]=null,t[G]=!1,t[B]=!1,t[q]=!1,t[V]=null,t[A]="",t[H]=0,t.splitDate=null,t.splitRatio=0,t[y]="",t[m]=1,t[O]=!1,t[R]=null,t[u]=[],t[c]=.2,t[k]=0,t[w]=1,t.catchUp=1,t[p]=1,t[x]=[],t.cashManagement=!1,t[h]=null,t[g]=0,t.benchmarkUrl=function(){return d.objectEdit(s.get(this,"benchmark.id"))},t.fundUrl=function(){return d.objectEdit(s.get(this,g))},t.isAIFOtherTransaction=function(){return Q(this.get(V))},t.isClassTypeStandard=function(){return this.get(m)===Y.STANDARD},t},updateModel:function(t,e){var n,i,a,r,o,d;return l.updateModel(t,e),t.set("benchmark",e.benchmark),i=e[D],t.set(D,i?new Date(i):null),a=e[N],t.set(N,a?new Date(a):null),t.set(U,e[U]),t.set(F,e[F]),t.set(j,e[j]),t.set(v,e[v]),t.set(C,e[C]),n=e[I],t.set(I,n?new Date(n):null),t.set(E,e[E]),t.set(W,e[W]),t.set(_,e[_]),t.set(T,e[T]),t.set(L,e[L]),t.set(M,e[M]),t.set(P,e[P]),n=e[S],t.set(S,n?new Date(n):null),n=e[f],t.set(f,n?new Date(n):null),t.set(b,e[b]),t.set(G,e[G]),t.set(B,e[B]),t.set(q,e[q]),t.set(V,e[V]),t.set(A,e[A]),t.set(H,e[H]),d=e.splitDate,t.set(y,e[y]),t.set(m,e[m]),t.set(O,e[O]),t.set(R,e[R]),t.set("splitDate",d?new Date(d):null),t.set("splitRatio",e.splitRatio),t.set("cashManagement",e.cashManagement),t.set(h,e[h]),t.set(g,e[g]),(r=t.get(u)).splice.apply(r,[0,r.length].concat(z.call(e[u]))),(o=t.get(x)).splice.apply(o,[0,o.length].concat(z.call(e[x]))),null}}})}.call(this),function(){define("views/data/model/mandate.model",["i18n","views/data/model/asset.model","core/util/ObservableUtils","object/web/ObjectMap"],function(t,a,e,n){var i,r;return r=e.ObservableUtils,i=n.ObjectMap,{createDataSourceSkeleton:function(){return a.createDataSourceSkeleton()},addColumns:function(t){return a.addColumns(t),t},updateRawModel:function(t){return a.updateRawModel(t),t.vehicle=null,t.startDate=null,t.endDate=null,t.vehicleUrl=function(){return i.objectEdit(r.get(this,"vehicle.id"))},t},updateModel:function(t,e){var n,i;return a.updateModel(t,e),t.set("vehicle",e.vehicle),i=e.startDate,t.set("startDate",i?new Date(i):null),n=e.endDate,t.set("endDate",n?new Date(n):null),null}}})}.call(this),function(){var C=[].slice;define("views/data/model/property.model",["i18n","ui","basic/ui/CountryUI","views/data/model/asset.model"],function(e,t,n,d){var i,l,s,u,c,p,m,f,b,v,y,h,g,T,I,a,r;return i=n.CountryUI,t.grid,r="string",a="number",l="address",h="postalCode",s="city",T="state",p="country",m="description",u="constructionYear",g="restructuringYear",c="contacts","units",v="measurements",I="valuations",f="expertise",y="occupancy",b="loanToValue",{createDataSourceSkeleton:function(){var t,e;return(e=(t=d.createDataSourceSkeleton()).schema.model.fields)[l]={type:r},e[h]={type:r},e.city={type:r},e[T]={type:r},e[p]={type:a},e[m]={type:r},e[u]={type:a},e[g]={type:a},e[y]={type:a},e[b]={type:a},t},addColumns:function(t){return d.addColumns(t),t.push(i.column({field:p,title:e.t("data:fields.country"),width:"200px",priority:10})),t.push({field:s,title:e.t("data:fields.city"),width:"150px",priority:11}),t.push({field:h,title:e.t("data:fields.postalCode"),width:"150px",priority:12}),t.push({field:l,title:e.t("data:fields.address"),width:"350px",priority:13}),t.push({field:T,title:e.t("data:fields.state"),width:"150px",priority:14}),t},updateRawModel:function(t){return d.updateRawModel(t),t[l]="",t[h]="",t.city="",t[T]="",t[p]=0,t[m]="",t[u]=null,t[g]=null,t[c]=[],t.units=[],t[v]=[],t[I]=[],t[f]=[],t[y]=null,t[b]=null,t},updateModel:function(t,e){var n,i,a,r,o;return d.updateModel(t,e),t.set(l,e[l]),t.set(h,e[h]),t.set(s,e.city),t.set(T,e[T]),t.set(p,e[p]),t.set(m,e[m]),t.set(u,e[u]),t.set(g,e[g]),t.set(y,e[y]),t.set(b,e[b]),(n=t.get(c)).splice.apply(n,[0,n.length].concat(C.call(e[c]))),(r=t.get("units")).splice.apply(r,[0,r.length].concat(C.call(e.units))),(a=t.get(v)).splice.apply(a,[0,a.length].concat(C.call(e[v]))),(o=t.get(I)).splice.apply(o,[0,o.length].concat(C.call(e[I]))),(i=t.get(f)).splice.apply(i,[0,i.length].concat(C.call(e[f]))),null}}})}.call(this),function(){define("views/data/model/other.asset.model",["i18n","ui","views/data/model/asset.model"],function(t,e,n){var i,a;return e.grid,"string",i="description",a="hedging",{createDataSourceSkeleton:function(){var t,e;return(e=(t=n.createDataSourceSkeleton()).schema.model.fields)[i]={type:"string"},e[a]={type:"boolean"},t},addColumns:function(t){return n.addColumns(t),t},updateRawModel:function(t){return n.updateRawModel(t),t[i]="",t[a]=!1,t.nominal=0,t},updateModel:function(t,e){return n.updateModel(t,e),t.set(i,e[i]),t.set(a,e[a]),t.set("nominal",e.nominal),null}}})}.call(this),function(){var m=[].slice;define("views/data/model/company.model",["i18n","ui","site","views/data/model/legal.model","object/data/ObjectTypes","core/util/ObservableUtils","object/web/ObjectMap"],function(t,e,n,r,i,a,o){var d,l,s,u,c,p;return e.grid,s=i.ObjectTypes,c=n.router,d=n.map,u=a.ObservableUtils,l=o.ObjectMap,p=function(t){var e;return e=JSON.stringify({id:t.id,name:t.name,currency:t.currency}),c.navigate(d.getPortfolio(e))},{createDataSourceSkeleton:function(){var t,e;return(e=(t=r.createDataSourceSkeleton()).schema.model.fields).size={type:"number"},e.currency={type:"number"},e.needsCreation={type:"boolean"},e.sector={type:"number"},e.fiscalYear={type:"date"},e.description={type:"string"},e.totalEmployeeCount={type:"number"},e.headOfficeEmployeeCount={type:"number"},t},addColumns:function(t){return r.addColumns(t),t},updateRawModel:function(t){return r.updateRawModel(t),t.size=1,t.currency=978,t.needsCreation=!1,t.sector=1,t.fiscalYear=new Date,t.description="",t.totalEmployeeCount=0,t.headOfficeEmployeeCount=0,t.directors=[],t.shareLinks=[],t.isHolding=function(){return this.get("type")===s.getId("holding")||this.get("type")===s.getId("nonFinancialPassiveHolding")},t.balanceSheetClick=function(){return p(this)},t.assetTargetId=null,t.assetTargetUrl=function(){return l.objectEdit(u.get(this,"assetTargetId.id"))},t},updateModel:function(t,e){var n,i,a;return r.updateModel(t,e),t.set("size",e.size),t.set("currency",e.currency),t.set("needsCreation",e.needsCreation),t.set("sector",e.sector),n=e.fiscalYear,t.set("fiscalYear",n?new Date(n):null),t.set("description",e.description),t.set("totalEmployeeCount",e.totalEmployeeCount),t.set("headOfficeEmployeeCount",e.headOfficeEmployeeCount),t.set("assetTargetId",e.assetTargetId),(i=t.get("directors")).splice.apply(i,[0,i.length].concat(m.call(e.directors))),(a=t.get("shareLinks")).splice.apply(a,[0,a.length].concat(m.call(e.shareLinks))),null}}})}.call(this),function(){define("views/data/model/company.share.model",["i18n","ui","views/data/model/asset.model","core/util/ObservableUtils","object/web/ObjectMap"],function(t,e,n,i,a){var r,o;return e.grid,o=i.ObservableUtils,r=a.ObjectMap,{createDataSourceSkeleton:function(){return n.createDataSourceSkeleton()},addColumns:function(t){return n.addColumns(t),t},updateRawModel:function(t){return n.updateRawModel(t),t.shareType=null,t.ratio=1,t.equityType=1,t.capitalNotional=0,t.companyId=0,t.votingRight=1,t.fullyDiluted=1,t.companyUrl=function(){return r.objectEdit(o.get(this,"companyId"))},t},updateModel:function(t,e){return n.updateModel(t,e),t.set("shareType",e.shareType),t.set("ratio",e.ratio),t.set("equityType",e.equityType),t.set("capitalNotional",e.capitalNotional),t.set("companyId",e.companyId),t.set("votingRight",e.votingRight),t.set("fullyDiluted",e.fullyDiluted),null}}})}.call(this),function(){define("views/data/model/portfolio.model",["i18n","ui","core/util/ObservableUtils","object/ui/EntityUI","basic/ui/CurrencyUI","views/data/model/object.model","object/web/ObjectMap"],function(e,t,n,i,a,r,o){var d,l,s,u,c,p,m,f,b,v;return u=n.ObservableUtils,l=i.EntityUI,d=a.CurrencyUI,t.grid,s=o.ObjectMap,b="name",v="shortName",m="currency",p="composite",c="benchmark",f="investment",{createDataSourceSkeleton:function(){var t,e,n;return(e=(n=(t=r.createDataSourceSkeleton()).schema.model).fields).name={type:"string"},e[m]={type:"number"},e.parentPortfolioName={type:"string"},e.investor={nullable:!0},e[p]={type:"boolean"},e[c]={type:"boolean"},e[f]={type:"boolean"},n.investorName=function(){return u.get(this,"investor.name")},t.sort={field:b,dir:"asc"},t},addColumns:function(t){return r.addColumns(t),t.push({field:b,title:e.t("data:fields.name"),width:"300px",priority:0}),t.push(d.column({field:m,title:e.t("data:fields.currency"),width:"150px",priority:1})),t.push({field:"parentPortfolioName",title:e.t("data:fields.portfolio"),width:"300px",priority:100}),t.push(l.column({field:"investor",title:e.t("data:fields.investor"),width:"300px",priority:200})),t.push({field:p,title:e.t("data:fields.composite"),width:"50px",priority:300}),t.push({field:c,title:e.t("data:fields.benchmark"),width:"50px",priority:400}),t.push({field:f,title:e.t("data:fields.investment"),width:"50px",priority:500}),t},updateRawModel:function(t){return r.updateRawModel(t),t.name="",t[v]="",t[m]=0,t.parentPortfolio=null,t.parentPortfolioName="",t.investor=null,t[p]=!1,t[c]=!1,t[f]=!1,t.investorUrl=function(){return s.objectEdit(u.get(this,"investor.id"))}},updateModel:function(t,e){return r.updateModel(t,e),t.set(b,e.name),t.set(v,e[v]),t.set(m,e[m]),t.set("parentPortfolio",e.parentPortfolio),t.set("parentPortfolioName",e.parentPortfolioName),t.set("investor",e.investor),t.set(p,e[p]),t.set(c,e[c]),t.set(f,e[f]),null}}})}.call(this),function(){define("views/data/model/record.model",["i18n","ui","views/data/model/object.model"],function(t,e,n){return{createDataSourceSkeleton:function(){return n.createDataSourceSkeleton()},addColumns:function(t){return n.addColumns(t),t},updateRawModel:function(t){return n.updateRawModel(t)},updateModel:function(t,e){return n.updateModel(t,e),null}}})}.call(this),define("core/api/PositionOwnership",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PositionOwnership=void 0;var r,o;(r=e.PositionOwnership||(e.PositionOwnership={}))[r.FULL=1]="FULL",r[r.UNDIVIDED=2]="UNDIVIDED",r[r.LEASING=3]="LEASING",r[r.LEASEHOLD=4]="LEASEHOLD",r[r.OTHER=5]="OTHER",r[r.CO_OWNERSHIP=6]="CO_OWNERSHIP",r[r.VOLUME_UNIT=7]="VOLUME_UNIT",r[r.ASSET_PORTFOLIO=8]="ASSET_PORTFOLIO",r[r.DIRECT_INVEST=9]="DIRECT_INVEST",(o=e.PositionOwnership||(e.PositionOwnership={})).getName=a.EnumUtils.createNameFn("object:PositionOwnership",o),o.widget=i.EnumWidgetUtils.createDropList("DomosPositionOwnership",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/CounterpartControlling",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CounterpartControlling=void 0;var r,o;(r=e.CounterpartControlling||(e.CounterpartControlling={}))[r.NOT_DEFINED=1]="NOT_DEFINED",r[r.NOT_LINKED_ENTITY=2]="NOT_LINKED_ENTITY",r[r.SUBSIDIARIES=3]="SUBSIDIARIES",r[r.SISTER=4]="SISTER",r[r.SHAREHOLDER=5]="SHAREHOLDER",(o=e.CounterpartControlling||(e.CounterpartControlling={})).getName=n.EnumUtils.createNameFn("data:CounterpartControlling",o),o.widget=i.EnumWidgetUtils.createDropList("DomosCounterpartControlling",o,!1),o.column=a.EnumColumnUtils.createFactory(o,o.widget)}),function(){define("views/data/model/position.model",["i18n","core/util/ObservableUtils","object/ui/AssetUI","object/ui/EntityUI","views/data/model/record.model","core/api/AIFStrategyFundOfFunds","core/api/AIFStrategyHedgeFund","core/api/AIFStrategyOther","core/api/AIFStrategyPrivateEquity","core/api/AIFStrategyRealEstate","core/api/AIFType","core/api/PositionOwnership","core/ui/NumberUI","core/api/BalanceSheet","core/api/HoldSecurityType","object/web/ObjectMap","core/api/CounterpartControlling"],function(e,t,n,i,a,r,o,d,l,s,u,c,p,m,f,b,v){var y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q,z,X,Z,tt,et,nt,it,at,rt,ot,dt;return x=p.NumberUI,_=t.ObservableUtils,D=i.EntityUI,N=D.Legal,w=n.AssetUI,y=r.AIFStrategyFundOfFunds,h=o.AIFStrategyHedgeFund,g=d.AIFStrategyOther,T=l.AIFStrategyPrivateEquity,I=s.AIFStrategyRealEstate,K=c.PositionOwnership,k=m.BalanceSheet,S=f.HoldSecurityType,C=u.AIFType,R=b.ObjectMap,E=v.CounterpartControlling,"string",$="number","boolean",P="portfolio","depositary",L="ownership",F="controlling",O="AIFMD",U="AIFInvestorType",A="AIFType",G="hedgeFundStrategy",q="hedgeFundDescription",M="fundOfFundsStrategy",j="fundOfFundsDescription",W="privateEquityStrategy",H="privateEquityDescription",Y="realEstateStrategy",J="realEstateDescription",B="otherFundStrategy",V="otherFundDescription",z=function(t){return!t||t===C.OTHER_FUND},Q=function(t,e){return z(t)?e:t},tt=function(t,e){return Q(t,e)===C.HEDGE_FUND},et=function(t,e,n){return tt(t,e)&&n===h.OTHER_STRATEGY},at=function(t,e){return Q(t,e)===C.PRIVATE_EQUITY_FUND},rt=function(t,e,n){return at(t,e)&&n===T.OTHER},ot=function(t,e){return Q(t,e)===C.REAL_ESTATE_FUND},dt=function(t,e,n){return ot(t,e)&&n===I.OTHER},X=function(t,e){return Q(t,e)===C.FUND_OF_FUNDS},Z=function(t,e,n){return X(t,e)&&n===y.OTHER_FUND_OF_FUNDS},nt=function(t,e){return Q(t,e)===C.OTHER_FUND},it=function(t,e,n){return nt(t,e)&&n===g.OTHER_FUND},{createDataSourceSkeleton:function(){var t,e,n;return(e=(n=(t=a.createDataSourceSkeleton()).schema.model).fields).portfolioName={type:"string"},e.asset={nullable:!0},e.depositary={nullable:!0},e[L]={type:$},e[F]={type:$},e.counterParty={nullable:!0},e.origin={nullable:!0},e.balanceSheet={type:$},e.holdSecurityType={type:$},n.assetName=function(){return _.get(this,"asset.name")},n.counterPartyName=function(){return _.get(this,"counterParty.name")},n.originName=function(){return _.get(this,"origin.name")},n.depositaryName=function(){return _.get(this,"depositary.name")},t.sort={field:"asset.name",dir:"asc"},t},addColumns:function(t){return a.addColumns(t),t.push({field:"portfolioName",title:e.t("data:fields.portfolio"),width:"300px",priority:0,hidden:!0}),t.push({field:"asset.name",title:e.t("data:fields.asset"),width:"150px",priority:1}),t.push(x.column({field:"history.quantity",title:e.t("history:quantity"),priority:2})),t.push(D.column({field:"depositary",title:e.t("data:fields.depositary"),width:"50px",priority:100})),t.push(K.column({field:L,title:e.t("data:fields.ownership"),width:"50px",priority:200})),t.push(E.column({field:F,title:e.t("data:fields.controlling"),width:"50px",priority:300})),t.push(N.column({field:"counterParty",title:e.t("data:fields.counterParty"),priority:400})),t.push(w.column({field:"origin",title:e.t("data:fields.origin"),width:"150px",priority:500})),t.push(k.column({field:"balanceSheet",title:e.t("data:fields.BalanceSheet"),priority:600})),t.push(S.column({field:"holdSecurityType",title:e.t("data:fields.holdSecurityType"),priority:700})),t},updateRawModel:function(t){var e;return a.updateRawModel(t),t[P]=null,t.asset=null,t.depositary=null,t[L]=null,t[F]=E.NOT_DEFINED,t.counterParty=null,t.origin=null,t.portfolioName="",t.balanceSheet=null,t.holdSecurityType=null,t.assetUrl=function(){return R.objectEdit(this.get("asset.id"))},t.depositaryUrl=function(){return R.objectEdit(this.get("depositary.id"))},t.counterPartyUrl=function(){return R.objectEdit(this.get("counterParty.id"))},t.originUrl=function(){return R.objectEdit(this.get("origin.id"))},null==t[O]&&(t[O]={}),(e=t[O])[U]=0,e[A]=0,e[G]=0,e[q]="",e[M]=0,e[j]="",e[W]=0,e[H]="",e[Y]=0,e[J]="",e[B]=0,e[V]="",e.hasAIFType=function(){return z(this.get(U))},e.hasHedgeFund=function(){return tt(this.get(U),this.get(A))},e.hasHedgeFundOther=function(){return et(this.get(U),this.get(A),this.get(G))},e.hasPrivateEquityFund=function(){return at(this.get(U),this.get(A))},e.hasPrivateEquityFundOther=function(){return rt(this.get(U),this.get(A),this.get(W))},e.hasRealEstateFund=function(){return ot(this.get(U),this.get(A))},e.hasRealEstateFundOther=function(){return dt(this.get(U),this.get(A),this.get(Y))},e.hasFundOfFunds=function(){return X(this.get(U),this.get(A))},e.hasFundOfFundsOther=function(){return Z(this.get(U),this.get(A),this.get(M))},e.hasOtherFund=function(){return nt(this.get(U),this.get(A))},e.hasOtherFundOther=function(){return it(this.get(U),this.get(A),this.get(B))},t},updateModel:function(t,e){var n,i;return a.updateModel(t,e),t.set(P,e[P]),t.set("portfolioName",e.portfolioName),t.set("asset",e.asset),t.set("depositary",e.depositary),t.set(L,e[L]),t.set(F,e[F]),t.set("counterParty",e.counterParty),t.set("origin",e.origin),t.set("balanceSheet",e.balanceSheet),t.set("holdSecurityType",e.holdSecurityType),i=t.get(O),n=e[O],i.set(U,n[U]),i.set(A,n[A]),i.set(G,n[G]),i.set(q,n[q]),i.set(M,n[M]),i.set(j,n[j]),i.set(W,n[W]),i.set(H,n[H]),i.set(Y,n[Y]),i.set(J,n[J]),i.set(B,n[B]),i.set(V,n[V]),null}}})}.call(this),define("core/api/WorkflowCategory",["require","exports","core/ui/grid/column/EnumColumnUtils","core/util/EnumUtils"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkflowCategory=void 0;var a,r;(a=e.WorkflowCategory||(e.WorkflowCategory={}))[a.DEAL_FLOW=1]="DEAL_FLOW",a[a.REPORTING=2]="REPORTING",a[a.FUND_FLOW=3]="FUND_FLOW",a[a.DATA_STRATEGY=4]="DATA_STRATEGY",a[a.COMPLIANCE_INDICATOR=5]="COMPLIANCE_INDICATOR",a[a.INVESTMENT=6]="INVESTMENT",a[a.LIMITED_PARTNER=7]="LIMITED_PARTNER",a[a.COMPLIANCE_KCI=8]="COMPLIANCE_KCI",a[a.DOCUMENT_REVIEW=9]="DOCUMENT_REVIEW",a[a.DATA=10]="DATA",(r=e.WorkflowCategory||(e.WorkflowCategory={})).getName=i.EnumUtils.createNameFn("workflow:WorkflowCategory",r),r.column=n.EnumColumnUtils.createFactory(r)}),define("workflow/ui/WorkflowUI",["require","exports","core/api/WorkflowCategory","workflow/repository/WorkflowRepository","core/ui/grid/column/IdentifiableColumnUtils","core/ui/widget/IdWidgetUtils"],function(t,e,i,a,r,o){"use strict";function d(t,e){return{widget:o.IdWidgetUtils.createDropList(t,function(){return a.WorkflowRepository.listIdentifiables(e)},!0)}}Object.defineProperty(e,"__esModule",{value:!0}),e.WorkflowUI=void 0;var n=function(){function t(){}var e,n;return t.column=r.IdentifiableColumnUtils.createFactory(),t.DealFlow=d("DomosWorkflowDealFlow",i.WorkflowCategory.DEAL_FLOW),t.FundFlow=d("DomosWorkflowFundFlow",i.WorkflowCategory.FUND_FLOW),t.Reporting=d("DomosWorkflowReporting",i.WorkflowCategory.REPORTING),t.Strategy=d("DomosWorkflowStrategy",i.WorkflowCategory.DATA_STRATEGY),t.ComplianceIndicator=d("DomosWorkflowComplianceIndicator",i.WorkflowCategory.COMPLIANCE_KCI),t.ComplianceIndicatorKey=(e="DomosWorkflowKeyComplianceIndicator",n=i.WorkflowCategory.COMPLIANCE_KCI,{widget:o.IdWidgetUtils.createDropList(e,function(){return a.WorkflowRepository.listKeyIdentifiables(n)},!0)}),t.Lp=d("DomosWorkflowLp",i.WorkflowCategory.LIMITED_PARTNER),t.Investment=d("DomosWorkflowInvestment",i.WorkflowCategory.INVESTMENT),t.DocumentReview=d("DomosWorkflowDocumentReview",i.WorkflowCategory.DOCUMENT_REVIEW),t.Data=d("DomosWorkflowData",i.WorkflowCategory.DATA),t}();e.WorkflowUI=n}),define("risk/web/RiskMap",["require","exports","core/web/WebLocation"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RiskMap=void 0;var n=function(){function t(){}return t.profileEdit=function(t){return t?i.WebLocation.resolveKendo("/risk/profile/edit/"+t):"javascript:void(0)"},t.riskEdit=function(t,e,n){return t&&e&&n?i.WebLocation.resolveKendo("/risk/local/"+t+"/"+e+"/"+n):"javascript:void(0)"},t.ruleEdit=function(t){return i.WebLocation.resolveKendo("/risk/rule/"+t)},t.indicatorEdit=function(t){return i.WebLocation.resolveKendo("/risk/indicator/edit/"+t)},t}();e.RiskMap=n}),function(){define("views/data/model/deal.intention.model",["i18n","core/util/ObservableUtils","views/data/model/object.model","workflow/ui/WorkflowUI","object/ui/ObjectUI","core/ui/DateUI","object/web/ObjectMap","risk/web/RiskMap"],function(e,t,i,n,a,r,o,d){var l,s,u,c,p,m;return l=r.DateUI,c=t.ObservableUtils,m=n.WorkflowUI,u=a.ObjectUI,s=o.ObjectMap,p=d.RiskMap,{createDataSourceSkeleton:function(){var t,e,n;return(e=(n=(t=i.createDataSourceSkeleton()).schema.model).fields).name={type:"string"},e.date={type:"date"},e.object={nullable:!0},e.workflow={type:"string"},e.workflowDefinition={nullable:!0},e.workflowRunning={type:"boolean"},e.status={type:"string"},e.opportunity={type:"boolean"},n.objectName=function(){return c.get(this,"object.name")},n.workflowDefinitionName=function(){return c.get(this,"workflowDefinition.name")},n.objectUrl=function(){return s.objectEdit(c.get(this,"object.id"))},n.riskProfileUrl=function(){return p.objectEdit(c.get(this,"riskProfile.id"))},t.sort={field:"name",dir:"asc"},t},addColumns:function(t){return i.addColumns(t),t.push({field:"name",title:e.t("data:fields.name"),width:"300px",priority:0}),t.push(u.column({field:"object",title:e.t("data:fields.object"),priority:1})),t.push(l.column({field:"date",title:e.t("data:fields.date"),priority:2})),t.push(m.column({field:"workflowDefinition",title:e.t("data:fields.workflow"),priority:3})),t.push({field:"workflowRunning",title:e.t("data:fields.workflowRunning"),priority:4}),t.push({field:"status",title:e.t("data:fields.status"),priority:5}),t.push({field:"opportunity",title:e.t("data:fields.opportunity"),priority:6}),t},updateRawModel:function(t){return i.updateRawModel(t),t.name="",t.object=null,t.workflow=null,t.workflowDefinition=null,t.workflowRunning=!1,t.date=null,t.documentList=null,t.status="",t.opportunity=!1,t.riskProfile=null,t.objectUrl=function(){return s.objectEdit(c.get(this,"object.id"))},t.riskProfileUrl=function(){return p.profileEdit(c.get(this,"riskProfile.id"))},t},updateModel:function(t,e){var n;return i.updateModel(t,e),t.set("name",e.name),t.set("object",e.object),t.set("workflow",e.workflow),t.set("workflowDefinition",e.workflowDefinition),t.set("workflowRunning",e.workflowRunning),t.set("documentList",e.documentList),n=e.date,t.set("date",n?new Date(n):null),t.set("status",e.status),t.set("opportunity",e.opportunity),t.set("riskProfile",e.riskProfile),null}}})}.call(this),function(){var s=[].slice;define("views/data/model/deal.project.model",["i18n","ui","views/data/model/deal.intention.model"],function(t,e,r){var o,d,l;return d="events",o="allocations",l="managers",{createDataSourceSkeleton:function(){return r.createDataSourceSkeleton()},addColumns:function(t){return r.addColumns(t)},updateRawModel:function(t){return r.updateRawModel(t),t[d]=[],t[o]=[],t[l]=[],t},updateModel:function(t,e){var n,i,a;return r.updateModel(t,e),(i=t.get(d)).splice.apply(i,[0,i.length].concat(s.call(e[d]))),(n=t.get(o)).splice.apply(n,[0,n.length].concat(s.call(e[o]))),(a=t.get(l)).splice.apply(a,[0,a.length].concat(s.call(e[l]))),null}}})}.call(this),function(){define("views/data/model/real.estate.deal.flow.model",["i18n","ui","views/data/model/deal.project.model"],function(t,e,n){return{createDataSourceSkeleton:function(){return n.createDataSourceSkeleton()},addColumns:function(t){return n.addColumns(t),t},updateRawModel:function(t){return n.updateRawModel(t)},updateModel:function(t,e){return n.updateModel(t,e),null}}})}.call(this),function(){define("views/data/model/fund.flow.model",["i18n","ui","views/data/model/deal.intention.model"],function(t,e,n){return{createDataSourceSkeleton:function(){return n.createDataSourceSkeleton()},addColumns:function(t){return n.addColumns(t),t},updateRawModel:function(t){return n.updateRawModel(t)},updateModel:function(t,e){return n.updateModel(t,e),null}}})}.call(this),function(){var r=[].slice;define("views/data/model/virtual.portfolio.model",["i18n","ui","basic/ui/CurrencyUI","views/data/model/object.model"],function(e,t,n,i){var a;return a=n.CurrencyUI,{createDataSourceSkeleton:function(){var t,e;return(e=(t=i.createDataSourceSkeleton()).schema.model.fields).name={type:"string"},e.currency={type:"number"},t.sort={field:"name",dir:"asc"},t},addColumns:function(t){return i.addColumns(t),t.push({field:"name",title:e.t("data:fields.name"),width:"300px",priority:0}),t.push(a.column({field:"currency",title:e.t("data:fields.currency"),width:"150px",priority:1})),t},updateRawModel:function(t){return i.updateRawModel(t),t.name="",t.currency=0,t.portfolios=[],t.predicate="",t.stressProfile=null,t.pipeManager=null},updateModel:function(t,e){var n;return i.updateModel(t,e),t.set("name",e.name),t.set("currency",e.currency),t.set("predicate",e.predicate),t.set("stressProfile",e.stressProfile),t.set("pipeManager",e.pipeManager),(n=t.get("portfolios")).splice.apply(n,[0,n.length].concat(r.call(e.portfolios))),null}}})}.call(this),define("investment/data/InvestmentStatus",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InvestmentStatus=void 0;var r,o;(r=e.InvestmentStatus||(e.InvestmentStatus={}))[r.IN_PIPE_1=1]="IN_PIPE_1",r[r.IN_PIPE_2=2]="IN_PIPE_2",r[r.IN_PIPE_3=3]="IN_PIPE_3",r[r.STARTING=4]="STARTING",r[r.STARTED=5]="STARTED",r[r.CLOSED=6]="CLOSED",r[r.ABORTED=7]="ABORTED",(o=e.InvestmentStatus||(e.InvestmentStatus={})).getName=n.EnumUtils.createNameFn("investment:InvestmentStatus",o),o.widget=i.EnumWidgetUtils.createDropList("DomosInvestmentStatus",o,!1),o.column=a.EnumColumnUtils.createFactory(o,o.widget)}),function(){var s=[].slice;define("views/data/model/investment.model",["i18n","site","ui","object/data/ObjectCategories","basic/ui/CurrencyUI","views/data/model/object.model","investment/data/InvestmentStatus"],function(e,n,t,i,a,r,o){var d,l;return d=a.CurrencyUI,l=i.ObjectCategories,t.grid,"string","number","boolean",{createDataSourceSkeleton:function(){var t,e;return(e=(t=r.createDataSourceSkeleton()).schema.model.fields).name={type:"string"},e.currency={type:"number"},t.sort={field:"name",dir:"asc"},t},addColumns:function(t){return r.addColumns(t),t.push({field:"name",title:e.t("data:fields.name"),width:"300px",priority:0}),t.push({field:"investmentObject.name",title:e.t("data:fields.asset"),width:"200px",priority:10}),t.push(d.column({field:"currency",title:e.t("data:fields.currency"),width:"150px",priority:20})),t},updateRawModel:function(t){return r.updateRawModel(t),t.name="",t.description="",t.currency=978,t.investmentObject=null,t.assetValue=0,t.leverage=0,t.status=o.IN_PIPE,t.investmentAmount=0,t.coInvestmentAmount=0,t.investors=[],t.createAsset=!1,t.creationAssetName="",t.creationAssetCategory=l.properties.id,t.creationAssetValue=0,t.assetLinkClick=function(){var t;return(t=this.get("investmentObject.id"))&&n.router.navigate(n.map.getObjectEdit(t)),null},t.assetName=function(){return this.get("investmentObject.name")||"?"},t.isNewAndNotCreateAsset=function(){return!(this.get("id")||this.get("createAsset"))},t.isNewAndCreateAsset=function(){return!this.get("id")&&this.get("createAsset")},t.isAssetProperty=function(){var t,e,n,i;return t=this.get("investmentObject.category"),e=this.get("creationAssetCategory"),this.get("createAsset")?(null!=(n=l.get(e))?n.isOf(l.properties):void 0)||!1:(null!=(i=l.get(t))?i.isOf(l.properties):void 0)||!1},t.isAssetCompany=function(){var t,e,n,i;return t=this.get("investmentObject.category"),e=this.get("creationAssetCategory"),this.get("createAsset")?(null!=(n=l.get(e))?n.isOf(l.companies):void 0)||!1:(null!=(i=l.get(t))?i.isOf(l.companies):void 0)||!1},t.isInvestmentVehicle=function(){var t,e,n,i;return t=this.get("investmentObject.category"),e=this.get("creationAssetCategory"),this.get("createAsset")?(null!=(n=l.get(e))?n.isOf(l.investmentVehicles):void 0)||!1:(null!=(i=l.get(t))?i.isOf(l.investmentVehicles):void 0)||!1},null},updateModel:function(t,e){var n;return r.updateModel(t,e),t.set("name",e.name),t.set("description",e.description),t.set("currency",e.currency),t.set("investmentObject",e.investmentObject),t.set("assetValue",e.assetValue),t.set("leverage",e.leverage),t.set("status",e.status),t.set("investmentAmount",e.investmentAmount),t.set("coInvestmentAmount",e.coInvestmentAmount),t.set("creationAssetName",""),t.set("creationAssetCategory",l.properties.id),t.set("creationAssetValue",0),(n=t.get("investors")).splice.apply(n,[0,n.length].concat(s.call(e.investors))),null}}})}.call(this),define("core/api/DerivativeClearingMethod",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DerivativeClearingMethod=void 0;var r,o;(r=e.DerivativeClearingMethod||(e.DerivativeClearingMethod={}))[r.CCP=1]="CCP",r[r.BILATERAL=2]="BILATERAL",r[r.ISSUE=3]="ISSUE",(o=e.DerivativeClearingMethod||(e.DerivativeClearingMethod={})).getName=a.EnumUtils.createNameFn("object:DerivativeClearingMethod",o),o.widget=i.EnumWidgetUtils.createDropList("DomosDerivativeClearingMethod",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),function(){define("views/data/model/derivative.model",["i18n","ui","core/api/DerivativeClearingMethod","views/data/model/asset.model"],function(t,e,n,i){var a;return a=n.DerivativeClearingMethod,{createDataSourceSkeleton:function(){return i.createDataSourceSkeleton()},addColumns:function(t){return i.addColumns(t),t},updateRawModel:function(t){return i.updateRawModel(t),t.clearingMethod=a.ISSUE,t.issuer=null,t.holder=null,t.expiryDate=new Date,t.issueDate=new Date,t.issueCount=0,t.hedging=!1,t.issuePrice=0,t.description="",t},updateModel:function(t,e){return i.updateModel(t,e),t.set("clearingMethod",e.clearingMethod),t.set("issuer",e.issuer),t.set("holder",e.holder),t.set("expiryDate",e.expiryDate),t.set("issueDate",e.issueDate),t.set("issueCount",e.issueCount),t.set("hedging",e.hedging),t.set("issuePrice",e.issuePrice),t.set("description",e.description),null}}})}.call(this),function(){define("views/data/model/equity.derivative.model",["i18n","ui","views/data/model/derivative.model"],function(t,e,n){return{createDataSourceSkeleton:function(){return n.createDataSourceSkeleton()},addColumns:function(t){return n.addColumns(t),t},updateRawModel:function(t){return n.updateRawModel(t),t.strikePerShare=0,t.strikeCurrency=978,t.conversionRatio=0,t.proportion=0,t.exerciseStartDate=null,t.shareUnderlying=null,t},updateModel:function(t,e){return n.updateModel(t,e),t.set("strikePerShare",e.strikePerShare),t.set("strikeCurrency",e.strikeCurrency),t.set("conversionRatio",e.conversionRatio),t.set("proportion",e.proportion),t.set("exerciseStartDate",e.exerciseStartDate),t.set("shareUnderlying",e.shareUnderlying),null}}})}.call(this),function(){define("views/data/model/bank.account.model",["i18n","ui","site","views/data/model/asset.model","object/data/ObjectTypes","core/util/ObservableUtils","object/web/ObjectMap"],function(t,e,n,i,a,r,o){var d,l;return e.grid,a.ObjectTypes,n.router,n.map,l=r.ObservableUtils,d=o.ObjectMap,{createDataSourceSkeleton:function(){var t,e;return(e=(t=i.createDataSourceSkeleton()).schema.model.fields).bankName={type:"string"},e.specialPayment={type:"boolean"},e.owner={nullable:!0},e.sellSide={nullable:!0},e.investorIban={type:"string",nullable:!0},e.bankSwift={type:"string",nullable:!0},e.paymentReference={type:"string",nullable:!0},e.reference={type:"string",nullable:!0},e.intermediaryBankName={type:"string",nullable:!0},e.intermediaryBankIban={type:"string",nullable:!0},e.intermediaryBankSwift={type:"string",nullable:!0},e.beneficiaryBankName={type:"string",nullable:!0},e.beneficiaryBankSwift={type:"string",nullable:!0},e.beneficiaryBankIban={type:"string",nullable:!0},e.beneficiaryBankAccount={type:"string",nullable:!0},t},addColumns:function(t){return i.addColumns(t),t},updateRawModel:function(t){return i.updateRawModel(t),t.bankName="",t.specialPayment=!1,t.owner=0,t.sellSide=null,t.investorIban=null,t.bankSwift=null,t.paymentReference=null,t.reference=null,t.intermediaryBankName=null,t.intermediaryBankIban=null,t.intermediaryBankSwift=null,t.beneficiaryBankName=null,t.beneficiaryBankSwift=null,t.beneficiaryBankIban=null,t.beneficiaryBankAccount=null,t.ownerUrl="javascript:void(0)",t.sellSideUrl=function(){return d.objectEdit(l.get(this,"sellSide.id"))},t},updateModel:function(t,e){var n;return i.updateModel(t,e),t.set("bankName",e.bankName),t.set("specialPayment",e.specialPayment),t.set("owner",e.owner),t.set("sellSide",e.sellSide),t.set("investorIban",e.investorIban),t.set("bankSwift",e.bankSwift),t.set("paymentReference",e.paymentReference),t.set("reference",e.reference),t.set("intermediaryBankName",e.intermediaryBankName),t.set("intermediaryBankIban",e.intermediaryBankIban),t.set("intermediaryBankSwift",e.intermediaryBankSwift),t.set("beneficiaryBankName",e.beneficiaryBankName),t.set("beneficiaryBankSwift",e.beneficiaryBankSwift),t.set("beneficiaryBankIban",e.beneficiaryBankIban),t.set("beneficiaryBankAccount",e.beneficiaryBankAccount),(n=e.owner)&&t.set("ownerUrl",d.objectEdit(n.id)),null}}})}.call(this),function(){define("views/data/model/models",["object/data/ObjectCategories","views/data/model/entity.model","views/data/model/individual.model","views/data/model/legal.model","views/data/model/vehicle.model","views/data/model/asset.model","views/data/model/cash.model","views/data/model/debt.model","views/data/model/fund.share.model","views/data/model/mandate.model","views/data/model/property.model","views/data/model/other.asset.model","views/data/model/company.model","views/data/model/company.share.model","views/data/model/portfolio.model","views/data/model/record.model","views/data/model/position.model","views/data/model/deal.intention.model","views/data/model/deal.project.model","views/data/model/real.estate.deal.flow.model","views/data/model/fund.flow.model","views/data/model/virtual.portfolio.model","views/data/model/investment.model","views/data/model/derivative.model","views/data/model/equity.derivative.model","views/data/model/bank.account.model"],function(t,e,n,i,a,r,o,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E){var D,S;return(D={})[(S=t.ObjectCategories).entities.id]=e,D[S.individuals.id]=n,D[S.legals.id]=i,D[S.corporates.id]=i,D[S.investmentCompanies.id]=i,D[S.sellSides.id]=i,D[S.legalOthers.id]=i,D[S.investmentVehicles.id]=a,D[S.assets.id]=r,D[S.cash.id]=o,D[S.debts.id]=d,D[S.fundShares.id]=l,D[S.mandates.id]=s,D[S.properties.id]=u,D[S.otherAssets.id]=c,D[S.companies.id]=p,D[S.companyShares.id]=m,D[S.portfolios.id]=f,D[S.records.id]=b,D[S.positions.id]=v,D[S.dealIntentions.id]=y,D[S.dealProjects.id]=h,D[S.realEstateDealFlows.id]=g,D[S.fundFlows.id]=T,D[S.virtualPortfolios.id]=I,D[S.investments.id]=C,D[S.derivatives.id]=w,D[S.equityDerivatives.id]=k,D[S.bankAccounts.id]=E,D})}.call(this),define("audit/data/StandardAuditTrailTable",["require","exports","core/util/EnumUtils"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StandardAuditTrailTable=void 0;var i,a;(i=e.StandardAuditTrailTable||(e.StandardAuditTrailTable={}))[i.BUSINESS_OBJECT=1]="BUSINESS_OBJECT",i[i.RISK_INDICATOR=2]="RISK_INDICATOR",i[i.RISK_RULE=3]="RISK_RULE",i[i.RISK_GROUP=4]="RISK_GROUP",i[i.RISK_PROFILE=5]="RISK_PROFILE",i[i.STRESS_PROFILE=6]="STRESS_PROFILE",i[i.CP_PLAN=7]="CP_PLAN",i[i.CP_KEY_INDICATOR=8]="CP_KEY_INDICATOR",i[i.CP_TASK=9]="CP_TASK",i[i.CP_CHECK_LIST=10]="CP_CHECK_LIST",i[i.CP_TAG=11]="CP_TAG",i[i.CP_FORM=12]="CP_FORM",i[i.DOCUMENT_LIST=13]="DOCUMENT_LIST",i[i.FORWARD_FOREX=14]="FORWARD_FOREX",i[i.PIPE=15]="PIPE",i[i.KPI=16]="KPI",i[i.TASK_FORM=17]="TASK_FORM",i[i.FUND_ACCOUNTING=18]="FUND_ACCOUNTING",i[i.SUBSCRIPTION=19]="SUBSCRIPTION",i[i.CAPITAL_CALL=20]="CAPITAL_CALL",i[i.DISTRIBUTION=21]="DISTRIBUTION",i[i.PURCHASE=22]="PURCHASE",i[i.REDEMPTION=23]="REDEMPTION",i[i.CAPITAL_CALL_SPLIT=24]="CAPITAL_CALL_SPLIT",i[i.DISTRIBUTION_SPLIT=25]="DISTRIBUTION_SPLIT",i[i.DOCUMENT_REVIEW_TASK=26]="DOCUMENT_REVIEW_TASK",i[i.PAYMENT_CAPITAL_CALL=27]="PAYMENT_CAPITAL_CALL",i[i.BANK_ACCOUNT_ENTRY=28]="BANK_ACCOUNT_ENTRY",i[i.RESERVE_TRANSFER=29]="RESERVE_TRANSFER",(a=e.StandardAuditTrailTable||(e.StandardAuditTrailTable={})).getName=n.EnumUtils.createNameFn("data:audit.StandardAuditTrailTable",a)}),define("audit/web/AuditTrailMap",["require","exports","core/web/UrlBuilder"],function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AuditTrailMap=void 0;var n=function(){function t(){}return t.auditTrail=function(t,e,n,i){return r.UrlBuilder.from("audit/trail").add("objectId",t).add("objectName",e).add("auditTable",n).add("businessObjectId",i).build()},t.auditTrailHistory=function(t,e,n,i){return r.UrlBuilder.from("history/value/audit/trail").add("objectId",t).add("objectName",e).add("history",n).add("date",i.toJSON()).build()},t.auditTrailMetric=function(t,e,n,i){return r.UrlBuilder.from("metric/value/audit/trail").add("objectId",t).add("objectName",e).add("metric",n).add("date",i.toJSON()).build()},t.auditTrailKpiObject=function(t,e,n,i,a){return r.UrlBuilder.from("kpi/object/value/audit/trail").add("object",t).add("indicator",e).add("year",n).add("period",i).add("objectName",a).build()},t}();e.AuditTrailMap=n}),define("text!templates/data/data.toolbar.html",[],function(){return'<ul id="dataToolbarMenu" class="gridToolbarMenu d-sprite-wrapper" data-role="menu">\n    <li>\n        <span class="k-sprite d-new"></span>\n        <span data-i18n="data:actions.create"></span>\n        <ul>\n            # for (var i = 0, length = categories.length; i < length; ++i) {#\n            # var category = categories[i] #\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="#=category.id#" data-i18n="object:#=category.key#.new"></a>\n            </li>\n            # } #\n        </ul>\n    </li>\n    <li id="audit">\n        <a href="javascript:void(0)" class="k-link" data-key="audit">\n        <span class="k-icon k-i-track-changes"></span>\n        <span data-i18n="ui:grid.toolbar.auditTrail"></span>\n    </li>\n    <li>\n        <span class="k-sprite d-grid"></span>\n        <span data-i18n="ui:grid.columns"></span>\n        <ul>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="saveColumns" data-i18n="ui:grid.saveColumns"></a>\n            </li>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="loadColumns" data-i18n="ui:grid.loadColumns"></a>\n            </li>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="resetColumns" data-i18n="ui:grid.resetColumns"></a>\n            </li>\n        </ul>\n    </li>\n</ul>\n'}),function(){var G;G="domosws:object",define("views/data/data.grid",["jquery","lodash","i18n","kendo","site","ui","core/web/WebLocation","core/ui/grid/GridCommand","object/data/ObjectTypes","views/data/model/models","audit/data/StandardAuditTrailTable","audit/web/AuditTrailMap","text!templates/data/data.toolbar.html"],function(b,v,y,h,i,t,e,n,a,g,r,o,T){var d,I,C,w,l,s,u,c,p,k,E,D,S,m,f,N,x,R,_,O,U,A,F,L,P,M,j;return u=e.WebLocation,I=n.GridCommand,l=a.ObjectTypes,C=t.grid,w=C.statePersistence,s=r.StandardAuditTrailTable,d=o.AuditTrailMap,"saveColumns","loadColumns","resetColumns",N=function(t){var e;return e=i.map.getObjectEdit(t),u.resolveKendo(e)},p=function(t){return t.handler&&b("body").on(G,t.handler),!0},f=function(t){return t.handler&&b("body").off(G,t.handler),!0},m=function(){var t,e;return f(this),this.handler=null,k(this),(this.gridState=null)!=(t=this.grid)&&t.destroy(),(this.grid=null)!=(e=this.element)&&e.empty(),this.element=null},E=function(t){var e;return(e={element:t,grid:null,gridState:null,menu:null,handler:null}).destroy=m.bind(e),e},U=function(t,e,n){var i,a,r;if(n&&n.data)return i=n.data,(a=null!=(r=l.get(i.type))?r.category:void 0)&&a.isOf(t)&&("create"===n.type?e.pushCreate(i):"update"===n.type?e.pushUpdate(i):"destroy"===n.type&&e.pushDestroy(i)),null},A=function(t,e,n,i){if(i)return v.isArray(i)?v.each(i,U.bind(null,t,e)):U(t,e,i),null},O=function(t,e,n){return f(t),t.handler=A.bind(null,e,n),p(t)},R=function(t,e){return t&&C.resizeGrid(e.sender),c(e)},c=function(t){var e,n,i,a,r;return a=(i=t.sender).select(),e=i.element.find("#audit"),0<a.length?(e.removeClass("k-state-disabled"),e.addClass("k-state-default"),n=i.dataItem(a),r=d.auditTrail(n.id,n.name,s.BUSINESS_OBJECT)):(e.addClass("k-state-disabled"),e.removeClass("k-state-default"),r="javascript:void(0)"),e.find(".k-link").attr("href",r),null},_=function(t){return c(t),null},D=function(t,e,n,i){var a;return a=n.createDataSourceSkeleton(),i?a.data=i:a.transport={read:{url:"object/list.json",dataType:"json",data:{category:e}},push:O.bind(null,t,e)},a},S=function(t,e,n,i,a,r,o,d,l){var s,u,c,p,m,f,b;return u=n.id,s=[],o||((p=e.column()).priority=-1e5,p.width=100,s.push(p)),i.addColumns(s),c=v.sortBy(s,"priority"),null===a,m={dataSource:D(t,u,i,a),editable:!1,columns:c,pageable:!1,height:850,scrollable:!0,change:_,dataBound:R.bind(null,l)},d&&(f=h.template(T),b={categories:n.finals()},m.toolbar=function(){return f(b)}),C.withDefaults(m),r&&v.assign(m,r),m},M=function(t){return"data_gs_"+t.id},L=function(t){var e;return null!=(e=t.gridState)&&e.save(),!0},x=function(t){var e;return null!=(e=t.gridState)&&e.load(),!0},F=function(t){var e;return null!=(e=t.gridState)&&e.reset(),!0},j=function(t,e){var n;return"saveColumns"===(n=b(e.item).children(".k-link").data("key"))?L(t):"loadColumns"===n?x(t):"resetColumns"===n?F(t):n&&i.router.navigate(i.map.getObjectCreate(n)),null},P=function(t){var e,n;return e=t.element.find("#dataToolbarMenu"),h.bind(e,{}),e.localize(),null!=(n=e.data("kendoMenu"))&&n.bind("select",j.bind(null,t)),t.menu=n,null},k=function(t){var e;return null!=(e=t.menu)&&e.destroy(),t.menu=null},{createGrid:function(t,e,n,i,a,r){var o,d,l,s,u,c,p,m,f;return null==n&&(n=!1),null==i&&(i=null),null==a&&(a=null),null==r&&(r=!1),o=e.id,v.has(g,o)?(m=g[o],s=E(t),p=null===i&&!r,d=(new I).addIdView(N),l=S(s,d,e,m,i,a,r,p,n),t.kendoGrid(l),d.bind(t),u=(c=t.data("kendoGrid")).dataSource,b("<div/>",{id:"id",class:"k-pager-wrap k-grid-pager"}).insertBefore(t.find(".k-grid-toolbar")).kendoPager({refresh:!0,dataSource:u,numeric:!1,messages:{display:y.t("ui:grid.pageable.messages.display")},previousNext:!1}),c.element.addClass("data-grid-section"),s.grid=c,f={initialLoad:!0,key:M(e),grid:c},p&&(f.toolbar={setup:P.bind(null,s),clean:k.bind(null,s)}),s.gridState=w.createState(f),s):null}}})}.call(this),define("object/ui/ObjectCategoryUI",["require","exports","../data/ObjectCategories","./ObjectCategoryUtilsUI"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectCategoryUI=void 0;var a=n.ObjectCategories.list(),r="DomosObjectCategory",o="DomosObjectCategoryMultiSelect";e.ObjectCategoryUI={widget:i.ObjectCategoryUtilsUI.createWidget(r,a),column:i.ObjectCategoryUtilsUI.createColumn(r,a),widgetMulti:i.ObjectCategoryUtilsUI.createMultiWidget(o,a),columnMulti:i.ObjectCategoryUtilsUI.createMultiColumn(o)}}),define("core/api/StrategyImportResultCategory",["require","exports","core/ui/grid/column/EnumColumnUtils","core/util/EnumUtils"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StrategyImportResultCategory=void 0;var a,r;(a=e.StrategyImportResultCategory||(e.StrategyImportResultCategory={}))[a.OBJECTS=1]="OBJECTS",a[a.HISTORIES=2]="HISTORIES",a[a.METRICS=3]="METRICS",(r=e.StrategyImportResultCategory||(e.StrategyImportResultCategory={})).getName=i.EnumUtils.createNameFn("strategy:StrategyImportResultCategory",r),r.column=n.EnumColumnUtils.createFactory(r)}),define("core/web/AsyncWebHttp",["require","exports","tslib","lodash","./WebHttp","core/util/PromiseUtils"],function(t,e,d,n,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncWebHttp=void 0;var i=function(){function r(){}return r.toConfiguration=function(t){return n.isString(t)?{startUrl:t+"/start.json",doneUrl:t+"/done.json",getUrl:t+"/get.json"}:t},r.waitAndGet=function(a,r,o){return d.__awaiter(this,void 0,void 0,function(){var e,n,i;return d.__generator(this,function(t){switch(t.label){case 0:e=d.__assign({},r),n=!1,i=0,t.label=1;case 1:return i<1e3&&!n?[4,s.PromiseUtils.wait(2e3,o)]:[3,5];case 2:return t.sent(),[4,l.WebHttp.getJson(a.doneUrl,e,o)];case 3:n=t.sent().done,t.label=4;case 4:return++i,[3,1];case 5:if(!n)throw new Error("Request timeout");return[2,l.WebHttp.getJson(a.getUrl,e,o)]}})})},r.getJson=function(n,i,a){return d.__awaiter(this,void 0,void 0,function(){var e;return d.__generator(this,function(t){switch(t.label){case 0:return n=r.toConfiguration(n),[4,l.WebHttp.getJson(n.startUrl,i,a)];case 1:return e=t.sent(),[2,r.waitAndGet(n,e,a)]}})})},r}();e.AsyncWebHttp=i}),function(){define("views/strategy/common/data.upload",["jquery","lodash","kendo","i18n","site","ui","object/ui/ObjectCategoryUI","core/api/StrategyImportResultCategory","core/ui/IntegerUI","core/ui/UploadUtils","core/event/SiteEvents","core/web/WebLocation","core/web/AsyncWebHttp","lp/views/simulation/LpSimulationGrid"],function(d,r,a,o,t,e,n,i,l,s,u,c,p,m){var f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q;return w=c.WebLocation,T=u.SiteEvents,C=s.UploadUtils,b=l.IntegerUI,g=n.ObjectCategoryUI,I=i.StrategyImportResultCategory,v=m.LpSimulationGrid,f=p.AsyncWebHttp,h=t.map,y=e.grid,N=function(t){return a.destroy(t),t.empty(),null},j=function(t){return T.saveSuccessful(),N(t),null},q=function(t,e){var n;return n={uuid:e.uuid},d.post(w.resolve("import/strategy/data/confirm.json"),n).done(j.bind(null,t)),null},L=function(t){return N(t),null},R=function(t,e){var n;return n={uuid:e.uuid},d.post(w.resolve("import/strategy/data/discard.json"),n).done(L.bind(null,t)),null},k=function(t,e){var n,i;if(e)return n=d("<div>").appendTo(t),i={items:[{type:"button",primary:!0,text:"Save",icon:"check",click:q.bind(null,t,e)},{type:"button",text:"Discard",icon:"cancel",click:R.bind(null,t,e)}]},n.kendoToolBar(i),a.alert(o.t("strategy:import.confirmAlert")).title("Import"),null},S=function(t){return d("<span>").addClass("strategy-import-loading").text(o.t("strategy:import.processing")).appendTo(t),null},E=function(t){return d("<span>").addClass("strategy-import-error").text(o.t("strategy:import.processingError")).appendTo(t),null},x=function(t){var e;if(!t||!t.XMLHttpRequest)return null;if((e=t.XMLHttpRequest).responseJSON)return e.responseJSON;if(e.responseText)try{return JSON.parse(e.responseText)}catch(t){}return null},D=function(t){var e;return e=d("<div>").addClass("floatingGrid").appendTo(t),d("<div>").addClass("clearer").appendTo(t),e},_=function(t,e){var n;if(e&&r.has(e,"errors")&&(n=e.errors)&&r.isArray(n))return D(t),null},O=function(t,e){var n,i,a;if(e&&r.has(e,"logs")&&(i=e.logs)&&r.isArray(i))return n=D(t),a={dataSource:{data:i},columns:[{field:"level",title:o.t("strategy:mapping.test.level"),width:"100px"},{field:"message",title:o.t("strategy:mapping.test.message")}],editable:!1,pageable:y.defaultPageable(),scrollable:!0,height:400},y.withDefaults(a),n.kendoGrid(a),null},F=function(t,e){var n,i;if(e&&r.has(e,"tracker")&&(i=e.tracker)&&r.isArray(i))return n=D(t),v.display(null,i,n),null},U=function(t,e){var n,i,a;if(e&&r.has(e,"mappings")&&(i=e.mappings)&&r.isArray(i))return n=D(t),a={dataSource:{data:i},columns:[{field:"name",title:o.t("strategy:mapping.name"),template:function(t){var e;return e=h.getStrategyMappingEdit(t.id),"<a class='d-link' href='"+(e=w.resolveKendo(e))+"'>"+(t.name||"?")+"</a>"}},{field:"type",title:o.t("strategy:mapping.type")},{field:"subType",title:o.t("strategy:mapping.subType")},{field:"description",title:o.t("strategy:mapping.description")}],editable:!1,pageable:y.defaultPageable(),scrollable:!0,height:400},y.withDefaults(a),n.kendoGrid(a),null},G=function(t){var e,n,i,a;if(n=[],(e=t.data.get("category"))===I.OBJECTS)n.push(g.column({field:"type",title:o.t("strategy:import.type")})),n.push(b.column({field:"created",title:o.t("strategy:import.created")})),n.push(b.column({field:"updated",title:o.t("strategy:import.updated")}));else if(e===I.HISTORIES)n.push({field:"type",title:o.t("strategy:import.type"),template:function(t){var e,n;return e="history:"+(n=t.type),o.exists(e)?o.t(e):o.t(n)}}),n.push(b.column({field:"saved",title:o.t("strategy:import.saved")}));else{if(e!==I.METRICS)return;n.push({field:"type",title:o.t("strategy:import.type"),template:function(t){var e,n;return e="metric:"+(n=t.type),o.exists(e)?o.t(e):o.t(n)}}),n.push(b.column({field:"saved",title:o.t("strategy:import.saved")}))}return i=d("<div>").addClass("floatingGrid").appendTo(t.detailCell),a={dataSource:t.data.details,columns:n,editable:!1,pageable:y.defaultPageable(),scrollable:!0,height:400},i.kendoGrid(a)},A=function(t,e){var n,i,a;if(e&&r.has(e,"data")&&(n=e.data)&&r.isArray(n))return i=D(t),a={dataSource:{data:n},columns:[I.column({field:"category",title:o.t("strategy:import.category")}),b.column({field:"total",title:o.t("strategy:import.total")})],detailInit:G,editable:!1,scrollable:!0,height:400,pageable:y.defaultPageable()},y.withDefaults(a),i.kendoGrid(a)},P=function(t,e){var n;return n=d(t),N(n),E(n),null},M=function(t,e){var n,i;return n=d(t),N(n),0<(null!=(i=e.errors)?i.length:void 0)?(T.error(e.errors[0].message),_(n,e)):(k(n,e),A(n,e)),O(n,e),U(n,e),F(n,e),null},{init:function(t,i,n,a){var r,e,o;return e={async:{saveUrl:(r=f.toConfiguration("import/strategy")).startUrl,saveField:"file"}},C.withDefaults(e),e.success,o=e.error,e.upload=function(t){var e;if(n)return e=n(),t.data={type:e.type,subType:e.subType},null},e.success=function(t){var e,n;if(a&&a(),e=d(i),N(e),null!=(n=x(t))?n.uuid:void 0)return S(e),f.waitAndGet(r,n).then(M.bind(null,i)).catch(P.bind(null,i)),null;a||E(e)},e.error=function(t){var e,n;return"function"==typeof o&&o(t),n=x(t),e=d(i),N(e),_(e,n),null},d(t).kendoUpload(e),null}}})}.call(this),define("excel/web/ExcelMap",["require","exports","core/web/UrlBuilder"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExcelMap=void 0;var i=function(){function t(){}return t.templateDownloadUrl=function(t){return n.UrlBuilder.from("import/template/download").add("type",t).build()},t.workflowFileDownloadUrl=function(t,e){return n.UrlBuilder.from("workflow/file/download.json").add("workflow",t).add("target",e).build()},t.workflowFileInlineDownloadUrl=function(t,e){return n.UrlBuilder.from("workflow/file/download/inline").add("workflow",t).add("target",e).build()},t}();e.ExcelMap=i}),define("text!templates/core/navigation.view.html",[],function(){return'<div>\n\t<ul id="navigationMenu"></ul>\n\t<div id="navigationContent"></div>\n</div>'}),define("core/views/NavigationView",["require","exports","lodash","kendo","text!templates/core/navigation.view.html","i18n"],function(t,e,o,d,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NavigationView=void 0;var n=function(){function t(){}return t.create=function(t){var e=t.selected||window.location.pathname,n=d.template(l)({}),i=function(t,e){for(var n=[],i=0,a=t;i<a.length;i++){var r=a[i],o={text:r.text},d=r.url;d!==e?o.url=d:o.cssClass="k-state-active",n.push(o)}return{dataSource:n}}(t.items,e),a=t.view,r=!!o.isNil(t.padding)||t.padding;return new d.View(n,{init:function(t){var e=t.sender.element;s.I18N.localize(e),e.find("#navigationMenu").kendoMenu(i);var n=e.find("#navigationContent");r&&n.addClass("idxStandardContent"),a.render(n)}})},t}();e.NavigationView=n}),define("data/web/DataMap",["require","exports","core/web/WebLocation","core/web/UrlBuilder"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataMap=void 0;var a=function(){function t(){}return t.checkItem=function(t){return i.UrlBuilder.from("data/check.list/edit").add("id",t).build()},t.form=function(t){return i.UrlBuilder.from("data/form/edit").add("id",t).build()},t.data=n.WebLocation.resolve("#!/data"),t.production=n.WebLocation.resolve("data/production"),t.setup=n.WebLocation.resolve("data/setup"),t}();e.DataMap=a}),define("data/DataNavigationMenu",["require","exports","core/views/NavigationView","i18n","./web/DataMap"],function(t,e,i,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataNavigationMenu=void 0;var n=function(){function t(){}return t.create=function(t,e,n){return void 0===n&&(n=!1),i.NavigationView.create({items:[{text:a.I18N.t("data:menu.data"),url:r.DataMap.data},{text:a.I18N.t("data:menu.production"),url:r.DataMap.production},{text:a.I18N.t("data:menu.setup"),url:r.DataMap.setup}],view:t,selected:e,padding:n})},t}();e.DataNavigationMenu=n}),define("strategyImportJson/views/JsonImportGrid",["require","exports","i18n","core/ui/grid/GridUtils"],function(t,e,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JsonImportGrid=void 0;var n=function(){function t(){}return t.init=function(t,e){kendo.destroy(t),t.empty();var n={dataSource:{data:e,schema:{model:kendo.data.Model.define({id:"id",fields:{id:{type:"number"},name:{type:"string"},idNew:{type:"number"}}})}},columns:[{field:"id",title:i.I18N.t("object:import.fields.id"),width:100},{field:"name",title:i.I18N.t("object:import.fields.name"),width:150},{field:"idNew",title:i.I18N.t("object:import.fields.idNew"),width:100}],pageable:a.GridUtils.defaultPageable(),scrollable:!0,editable:!1,groupable:!1};a.GridUtils.withDefaults(n),t.kendoGrid(n),t.data("kendoGrid")},t}();e.JsonImportGrid=n}),define("text!templates/object/import.json.confirmation.window.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="jsonAction" data-i18n="object:import.jsonAction"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="jsonAction" data-role="domosjsonaction" data-bind="value: jsonAction"/>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\t<div class="formWindowButtons">\n\t\t<button id="okClickId" class="k-primary" data-role="button" data-icon="check" data-bind="click: okClick">OK</button>\n\t\t<button data-role="button" data-icon="cancel" data-bind="click: cancelClick">Cancel</button>\n\t</div>\n</div>'}),define("strategyImportJson/data/JsonAction",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JsonAction=void 0;var r,o;(r=e.JsonAction||(e.JsonAction={}))[r.CREATE=1]="CREATE",r[r.CREATE_OR_UPDATE=2]="CREATE_OR_UPDATE",r[r.CREATE_OR_FORGET=3]="CREATE_OR_FORGET",r[r.UPDATE=4]="UPDATE",r[r.UPDATE_OR_FORGET=5]="UPDATE_OR_FORGET",r[r.DUPLICATE=6]="DUPLICATE",r[r.FORGET=7]="FORGET",(o=e.JsonAction||(e.JsonAction={})).getName=n.EnumUtils.createNameFn("object:JsonAction",o),o.widget=i.EnumWidgetUtils.createDropList("DomosJsonAction",o,!0),o.column=a.EnumColumnUtils.createFactory(o,o.widget),o.getId=function(t){return o[t]}}),define("strategyImportJson/views/JsonImportWindow",["require","exports","text!templates/object/import.json.confirmation.window.html","i18n","core/data/DObservableBuilder","strategyImportJson/data/JsonAction","strategyImportJson/data/JsonAction"],function(t,e,s,u,c,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JsonImportWindow=void 0;var n=function(){function t(){}return t.open=function(l){return new Promise(function(t,e){var n=kendo.template(s)({}),i=$("<div>").addClass("formWindow").appendTo($(document.body));i.html(n);i.kendoWindow({modal:!0,width:400,height:150});var a,r=i.data("kendoWindow");r.bind("close",function(){return kendo.destroy(i),i.remove(),t(a),!0});var o={uuid:l,jsonAction:p.JsonAction.CREATE},d=c.DObservableBuilder.of(o).add("okClick",function(t){a=t.toJson(),r.close()}).add("cancelClick",function(t){a=void 0,r.close()}).build();u.I18N.localize(i),d.bind(i),r.title(u.I18N.t("object:import.windowSave.title")).open().center()})},t}();e.JsonImportWindow=n}),define("strategyImportJson/repository/JsonImportRepository",["require","exports","core/web/WebHttp","strategyImportJson/data/JsonAction"],function(t,e,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JsonImportRepository=void 0;var n=function(){function t(){}return t.save=function(t,e){var n={uuid:t.uuid,action:JSON.stringify({jsonAction:a.JsonAction.getId(t.jsonAction)})};return i.WebHttp.postJson("import/json/confirmation.json",n,e)},t.cancellation=function(t,e){var n={uuid:t.uuid};return i.WebHttp.postJson("import/json/cancellation.json",n,e)},t}();e.JsonImportRepository=n}),define("strategyImportJson/views/JsonUpload",["require","exports","core/ui/UploadUtils","i18n","core/web/WebLocation","lodash","./JsonImportGrid","./JsonImportWindow","strategyImportJson/repository/JsonImportRepository","core/util/Logger","core/event/SiteEvents"],function(t,e,n,o,i,d,l,a,r,s,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JsonUpload=void 0;function c(t){kendo.destroy(t),t.empty()}function p(n,i){if(i){var t,e=$("<div>").appendTo(n);(c(t=e),t.empty(),t.kendoToolBar({}),t.data("kendoToolBar")).add({type:"buttonGroup",text:"Actions",buttons:[{type:"button",primary:!0,text:o.I18N.t("object:import.toolbar.actions.save"),icon:"check",click:function(){var e,t;e=n,t=i,a.JsonImportWindow.open(t.uuid).then(function(t){r.JsonImportRepository.save(t).then(function(){u.SiteEvents.saveSuccessful(),c(e)}).catch(function(t){return s.Logger.error(t)})}).catch(function(t){return s.Logger.error(t)})}},{type:"button",text:o.I18N.t("object:import.toolbar.actions.cancel"),icon:"cancel",click:function(){var t,e;t=n,e=i,r.JsonImportRepository.cancellation(e).then(function(){c(t)}).catch(function(t){return s.Logger.error(t)})}}]}),$("<div>").appendTo(document.body).kendoDialog({title:o.I18N.t("object:import.confirmAlert.title"),content:o.I18N.t("object:import.confirmAlert.content"),actions:[{primary:!0,text:"OK"}]}).data("kendoDialog").open()}}var m=function(){function t(){}return t.init=function(t,r){kendo.destroy(r),r.empty();var e={async:{saveUrl:i.WebLocation.resolve("import/json/start.json"),saveField:"file"},success:function(t){kendo.destroy(r),r.empty();var e,a,n,i=function(t){if(!t||!t.XMLHttpRequest)return null;var e=t.XMLHttpRequest;if(e.responseJSON)return e.responseJSON;if(e.responseText)try{return JSON.parse(e.responseText)}catch(t){return null}}(t);if(!(i?i.uuid:""))return e=r,void $("<span>").addClass("strategy-import-error").text(o.I18N.t("object:import.processingError")).appendTo(e);p(r,i),a=r,n=i,d.each(n,function(t,e){if(null!==t&&"uuid"!==e){var n="object:import.grid.title."+e;$("<h4>").text(o.I18N.exists(n)?o.I18N.t(n):e).appendTo(a);var i=$("<div>").addClass("floatingGrid").appendTo(a);l.JsonImportGrid.init(i,t),$("<div>").addClass("clearer").appendTo(a)}})}};n.UploadUtils.withDefaults(e),t.kendoUpload(e)},t}();e.JsonUpload=m}),define("text!templates/data/data.html",[],function(){return'<div id="dataRoot" data-bind="events:{onload:load}">\n    <div data-bind="visible: isDetailDisplayed">\n        <h2 class="dataHd" data-bind="text: categoryName"></h2>\n        <h3 data-i18n="data:errors.categoryNotConfigured" data-bind="visible: categoryNotConfigured"></h3>\n        <div data-bind="invisible: categoryNotConfigured">\n            <div id="dataDetailGrid"></div>\n        </div>\n    </div>\n    <div data-bind="visible: isSearchDisplayed">\n        <h2 class="dataHd" data-i18n="data:search.results"></h2>\n        <h3 class="dataSearchStatus" data-bind="text: searchStatus"></h3>\n        <div id="dataSearchResults"></div>\n    </div>\n    <div data-bind="visible: isImportDisplayed">\n        <table>\n            <tr>\n                <td>\n                    <div>\n                        <h2 class="dataHd" data-i18n="data:import.name"></h2>\n                    </div>\n                </td>\n                <td>\n                <td></td>\n                <td></td>\n                <div>\n                    <button class="k-button" data-bind="click: simulationClick">#=\n                        $.t("lp:simulation.actions.startSimulation")#\n                    </button>\n                </div>\n                </td>\n            </tr>\n        </table>\n        <p></p>\n\n\n        <h3>\n            <span data-i18n="data:import.assets"></span>\n            &nbsp;<a class="k-button" href="#=assetUrl#" data-i18n="[title]site:importing.downloadTemplate" download>\n            <span class="k-icon k-i-download"></span>\n        </a>\n        </h3>\n        <input id="dataImportAssets" type="file"/>\n        <p></p>\n        <h3>\n            <span data-i18n="data:import.entities"></span>\n            &nbsp;<a class="k-button" href="#=entityUrl#" data-i18n="[title]site:importing.downloadTemplate" download>\n            <span class="k-icon k-i-download"></span>\n        </a>\n        </h3>\n        <input id="dataImportEntities" type="file">\n        <p></p>\n        <h3>\n            <span data-i18n="data:import.portfolios"></span>\n            &nbsp;<a class="k-button" href="#=portfolioUrl#" data-i18n="[title]site:importing.downloadTemplate"\n                     download>\n            <span class="k-icon k-i-download"></span>\n        </a>\n        </h3>\n        <input id="dataImportPortfolios" type="file"/>\n        <p></p>\n        <h3>\n            <span data-i18n="data:import.dashboards"></span>\n        </h3>\n        <input id="dataImportDashboards" type="file"/>\n        <p></p>\n        <div id="dataImportDashboardsResults" style="width: 800px"></div>\n        <h3 data-i18n="data:import.strategyData"></h3>\n        <input id="dataImportStrategyData" type="file"/>\n        <p></p>\n        <div id="dataImportStrategyDataResults" style="width: 800px"></div>\n        <p></p>\n    </div>\n</div>'}),function(){var $,Q;$="domos:data.import",Q={details:1,search:2,import:3},define("views/data/data.main",["jquery","lodash","i18n","kendo","site","ui","core/ApplicationConstants","workflow/repository/WorkflowRepository","core/ui/UploadUtils","object/data/ObjectCategories","object/data/ObjectTypes","views/data/data.grid","views/strategy/common/data.upload","excel/web/ExcelMap","data/DataNavigationMenu","data/web/DataMap","strategyImportJson/views/JsonUpload","text!templates/data/data.html"],function(y,h,g,r,t,e,n,i,a,o,d,T,l,s,u,c,p,m){var f,b,v,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K;return E=a.UploadUtils,k=d.ObjectTypes,w=o.ObjectCategories,D=i.WorkflowRepository,f=n.ApplicationConstants,I=s.ExcelMap,v=u.DataNavigationMenu,b=c.DataMap,C=p.JsonUpload,O=function(){return{details:{defaultCategory:w.entities,gridContext:null},search:{gridContexts:[],query:null}}},U=function(){return{view:Q.details,categoryName:g.t("data:errors.unknownCategory"),categoryNotConfigured:!0,searchStatus:g.t("data:search.running"),isDetailDisplayed:function(){return this.get("view")===Q.details},isSearchDisplayed:function(){return this.get("view")===Q.search},isImportDisplayed:function(){return this.get("view")===Q.import},simulationClick:function(){return D.simulateWorkflow(),y("body").trigger($),null}}},L=function(){return y("#dataDetailGrid")},R=function(t){var e;return null!=(e=t.details.gridContext)&&e.destroy(),t.details.gridContext=null,L().empty(),null},A=function(t,e,n){var i;return R(t),_(t),e.set("view",Q.details),n?(e.set("categoryName",n.name),i=null,n.isData&&(i=T.createGrid(L(),n)),e.set("categoryNotConfigured",!i),t.details.gridContext=i):(e.set("categoryName",g.t("data:errors.unknownCategory")),e.set("categoryNotConfigured",!0)),null},M=function(){return y("#dataSearchResults")},_=function(t){var e,n,i,a;for(S(t),n=0,i=(a=t.search.gridContexts).length;n<i;n++)null!=(e=a[n])&&e.destroy();return t.search.grids=[],M().empty(),null},P=function(t){var e;return(null!=(e=k.get(t.type))?e.category.id:void 0)||0},F=function(t,e,n){var i,a,r,o,d,l,s,u,c,p,m,f,b,v;for(c in null==(f=null!=n?n.results:void 0)&&(f=[]),o=0,r=[],m=h.groupBy(f,P))null!=(v=m[c])&&0<(null!=v?v.length:void 0)&&(i=w.get(c))&&i.isData&&(r.push(i),o+=v.length);for(e.set("searchStatus",g.t("data:search.resultCount",{count:o})),b=h.sortBy(r,"id"),d=M(),u=0,p=b.length;u<p;u++)a=m[(i=b[u]).id],d.append(y("<h2>").text(i.name)),s=y("<div>").appendTo(d),l=T.createGrid(s,i,!0,a),t.search.gridContexts.push(l);return null},S=function(t){var e;return null!=(e=t.search.query)&&e.abort(),t.search.query=null},q=function(t,e,n){return t.search.query=null,F(t,e,n)},N=function(t,e,n){var i;return S(t),i={},t.search.query=y.getJSON("object/search.json",{search:n}).done(function(t){return i.results=t}).always(q.bind(null,t,e,i)),null},H=function(t,e,n){return R(t),_(t),e.set("searchStatus",g.t("data:search.running")),e.set("view",Q.search),N(t,e,n)},Y=function(t,e,n,i){var a;return a={async:{saveUrl:i,saveField:"file"}},E.withDefaults(a),y(n).kendoUpload(a),null},J=function(t,e){return Y(0,0,"#dataImportAssets","import/asset.json"),Y(0,0,"#dataImportEntities","import/entity.json"),Y(0,0,"#dataImportPortfolios","import/portfolio.json"),l.init("#dataImportStrategyData","#dataImportStrategyDataResults",null,null),C.init(y("#dataImportDashboards"),y("#dataImportDashboardsResults")),null},j=function(t,e){return e.set("view",Q.import)},B=function(t,e){var n,i;return n=t.data.context,i=t.data.model,A(n,i,e)},W=function(t,e){var n,i;return n=t.data.context,i=t.data.model,H(n,i,e)},V=function(t){var e;return t.data.context,e=t.data.model,j(0,e)},x=function(t,e){var n,i;return n={context:t,model:e},(i=y("body")).on("domos:data.categoryChanged",n,B),i.on("domos:data.search",n,W),i.on($,n,V),null},G=function(t,e){return y("#dataRoot").localize(),x(t,e),A(t,e,t.details.defaultCategory),J(),null},K=function(){var t,e,n,i,a;return n=U(),t=O(),e=r.observable(n),i=r.template(m)({simulation:f.isSimulation(),entityUrl:I.templateDownloadUrl(7),assetUrl:I.templateDownloadUrl(8),portfolioUrl:I.templateDownloadUrl(9)}),a={model:e,init:G.bind(null,t,e)},new r.View(i,a)},{createView:function(){var t;return t=K(),v.create(t,b.data)}}})}.call(this),define("text!templates/data/data.panel.html",[],function(){return'<div id="dataPanelRoot">\n\n    <div id="dataPanelToolbar"></div>\n\n    <form data-bind="events: {submit: searchSubmit}">\n        <span class="dataSearchBox k-textbox k-space-right">\n            <input type="search" data-i18n="[placeholder]data:search.placeholder" data-bind="value: searchText"/>\n            <a href="javascript:void(0)" class=\'k-icon k-i-search\' data-i18n="[title]data:search.start" data-bind="click: searchClick"></a>\n        </span>\n    </form>\n\n    #var setupTree = function(cats) {#\n    #  cats = _.sortBy(cats, "id") #\n    #  for (var i = 0, length = cats.length; i < length; ++i) {#\n    #    var cat = cats[i] #\n    #    if (cat.isData) {#\n    #      var children = _.filter(cat.children, function(c) { return c.isData; }) #\n    #      var hasChildren = (children !== null && children.length > 0) #\n    #      if (hasChildren) {#\n    <li data-expanded="true" data-key="#= cat.id#">#= cat.name#\n        <ul>\n            #        setupTree(children)#\n        </ul>\n    </li>\n    #      } else {#\n    <li data-key="#= cat.id#">#= cat.name#</li>\n    #      }#\n    #    }#\n    #  }#\n    #}#\n\n    <ul id="dataTreeView" data-role="treeview" data-bind="events: {select: categorySelect}">\n        # setupTree(categories.getDataRoots()) #\n    </ul>\n\n</div>\n\n'}),function(){define("views/data/data.panel",["jquery","i18n","kendo","core/web/WebLocation","object/data/ObjectCategories","text!templates/data/data.panel.html"],function(a,n,r,t,e,o){var d,l,i,s,u,c,p,m,f,b,v,y,h,g;return l=t.WebLocation,d=e.ObjectCategories,s=function(){return{defaultCategory:d.entities,tree:null}},c=function(t){return a("body").trigger("domos:data.categoryChanged",t)},m=function(t){return a("body").trigger("domos:data.search",t)},p=function(){return a("body").trigger("domos:data.import")},f=function(t){return g(t),p()},h=function(t){var e;return e={items:[{type:"button",text:n.t("data:import.name"),click:f.bind(null,t)}]},a("#dataPanelToolbar").kendoToolBar(e),null},y=function(t,e){var n,i;return e?null!=(n=t.tree)&&n.select(a("li[data-key='"+e.id+"']")):null!=(i=t.tree)&&i.select(a()),null},g=function(t){return y(t,null)},i=function(t,e){var n,i;return e.node&&(i=a(e.node).attr("data-key")),n=d.get(i),l.setPageTitle(n.name),c(n)},v=function(t,e){return g(t),m(e)},u=function(t){var n;return n=v.bind(null,t),{searchText:"",searchClick:function(t){return t.preventDefault(),a(t.currentTarget).closest("form").submit(),!1},searchSubmit:function(t){var e;return t.preventDefault(),(e=this.get("searchText"))&&n(e),null},categorySelect:i.bind(null,t)}},b=function(t,e){return a("#dataPanelRoot").localize(),t.tree=a("#dataTreeView").data("kendoTreeView"),y(t,t.defaultCategory),h(t),l.setPageTitle(t.defaultCategory.name),null},{createView:function(){var t,e,n,i,a;return t=s(),n=u(t),e=r.observable(n),i=r.template(o)({categories:d}),a={model:e,init:b.bind(null,t,e)},new r.View(i,a)}}})}.call(this),function(){define("views/data/data",["site","views/layout","views/data/data.main","views/data/data.panel","core/data/SiteCategories"],function(n,i,a,r,t){var o;return o=t.SiteCategories,{init:function(){var t,e;return t=r.createView(),e=a.createView(),i.register("data",n.map.data,e,t,o.data),null}}})}.call(this),define("iban",[],function(){return IBAN}),define("reference/data/Reference",["require","exports"],function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.Reference=void 0,(n=e.Reference||(e.Reference={}))[n.LEI=1]="LEI",n[n.IEI=2]="IEI",n[n.AII=3]="AII",n[n.BIC=4]="BIC",n[n.CUSIP=5]="CUSIP",n[n.ECB=6]="ECB",n[n.ISIN=7]="ISIN",n[n.NCA=8]="NCA",n[n.RIC=9]="RIC",n[n.SEDOL=10]="SEDOL",n[n.TICKER=11]="TICKER",n[n.GIIN=12]="GIIN",n[n.TIN=13]="TIN",n[n.IDENTIFICATION_NUMBER_EXTENSION=14]="IDENTIFICATION_NUMBER_EXTENSION"}),define("reference/data/ReferenceValidation",["require","exports","lodash","./Reference"],function(t,e,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReferenceValidation=void 0;var n=function(){for(var t={},e="a".charCodeAt(0)-1,n=0;n<=26;++n){e+=1,t[String.fromCharCode(e)]=String(10+n)}return t}(),r=new RegExp(Object.keys(n).join("|"),"gi");function o(t){return!!/^[0-9a-zA-Z]{18}[0-9]{2}$/.test(t)&&1===function(t,e){for(var n=0,i="0".charCodeAt(0),a=t.length,r=0;r<a;++r)n=(10*n+(t.charCodeAt(r)-i))%e;return n}(t.replace(r,function(t){return n[t.toLowerCase()]}),97)}var d=o;function l(t){var e=t.length;return 1<=e&&e<=12}function s(t){return/^[A-Z]{6}[0-9A-Z]{2}([0-9A-Z]{3})?$/.test(t)}function u(t){return/^[A-Z0-9]{8}[0-9]$/.test(t)}function c(t){return 20===t.length}function p(t){return/^[A-Z]{2}([A-Z0-9]){9}[0-9]$/.test(t)}function m(t){var e=t.length;return 1<=e&&e<=30}function f(t){var e=t.length;return 1<=e&&e<=20}function b(t){return/^[0-9BCDFGHJKLMNPQRSTVWXZ]{6}[0-9]$/.test(t)}function v(t){var e=t.length;return 1<=e&&e<=20}function y(t){return/^[A-NP-Z0-9]{6}\.[A-NP-Z0-9]{5}\.(LE|SL|ME|BR|SP)\.[0-9]{3}$/.test(t)}function h(t){var e=t.length;return 1<=e&&e<=13}function g(t){return/^[A-Z][0-9]{8}$/.test(t)}var T=function(){function t(){}return t.isValid=function(t,e){return function(t){if(!t)return function(){return!1};switch(t){case a.Reference.LEI:return o;case a.Reference.IEI:return d;case a.Reference.AII:return l;case a.Reference.BIC:return s;case a.Reference.CUSIP:return u;case a.Reference.ECB:return c;case a.Reference.ISIN:return p;case a.Reference.NCA:return m;case a.Reference.RIC:return f;case a.Reference.SEDOL:return b;case a.Reference.TICKER:return v;case a.Reference.GIIN:return y;case a.Reference.TIN:return h;case a.Reference.IDENTIFICATION_NUMBER_EXTENSION:return g;default:return function(){return!1}}}((n=t,i.isString(n)?a.Reference[n]:n))(e);var n},t}();e.ReferenceValidation=T}),define("performance/web/KeyPerformanceMap",["require","exports","core/web/WebLocation","core/web/UrlBuilder"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyPerformanceMap=void 0;var a=function(){function t(){}return t.indicatorEdit=function(t){return i.UrlBuilder.from("kpi/edit").add("id",t).build()},t.indicatorCreate=function(t){return i.UrlBuilder.from("kpi/edit").add("type",t).build()},t.objectIndicators=function(t){return i.UrlBuilder.from("kpi/object").add("id",t).build()},t.indicators=n.WebLocation.resolve("kpi"),t}();e.KeyPerformanceMap=a}),define("bankAccount/web/BankMap",["require","exports","core/web/UrlBuilder"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BankMap=void 0;var i=function(){function t(){}return t.summary=function(t){return n.UrlBuilder.from("bank/summary").add("ownerId",t).build()},t.statement=function(t){return n.UrlBuilder.from("bank/account/statement").add("bankAccountId",t).build()},t}();e.BankMap=i}),define("object/views/strategy/web/StrategyMap",["require","exports","core/web/UrlBuilder"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StrategyMap=void 0;var i=function(){function t(){}return t.objectStrategy=function(t){return n.UrlBuilder.from("object/strategy").add("id",t).build()},t.dataStrategyDownload=function(t){return n.UrlBuilder.from("strategy/data/download").add("id",t).build()},t}();e.StrategyMap=i}),define("object/web/ValuationHistoryMap",["require","exports","core/web/UrlBuilder"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ValuationHistoryMap=void 0;var i=function(){function t(){}return t.objectValuationss=function(t){return n.UrlBuilder.from("object/valuation/history").add("id",t).build()},t}();e.ValuationHistoryMap=i}),define("history/web/FundPaymentCapitalCallMap",["require","exports","core/web/UrlBuilder"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FundPaymentCapitalCallMap=void 0;var i=function(){function t(){}return t.fundPaymentCapitalCalls=function(t){return n.UrlBuilder.from("payment/capital/call/fund").add("id",t).build()},t}();e.FundPaymentCapitalCallMap=i}),define("object/validators/PeriodValidator",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PeriodValidator=void 0;var n=/^([-+]?)P(?:([-+]?[0-9]+)Y)?(?:([-+]?[0-9]+)M)?(?:([-+]?[0-9]+)W)?(?:([-+]?[0-9]+)D)?$/;var i=function(){function t(){}return t.isValid=function(t){return e=t,n.test(e);var e},t}();e.PeriodValidator=i}),define("history/web/FeesObjectMap",["require","exports","core/web/UrlBuilder"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeesObjectMap=void 0;var i=function(){function t(){}return t.getFundFees=function(t){return n.UrlBuilder.from("fund/fees/incomes").add("id",t).build()},t.getDebtFees=function(t){return n.UrlBuilder.from("debt/cash/flows").add("id",t).build()},t.getCompanyFees=function(t){return n.UrlBuilder.from("company/pl/operations").add("id",t).build()},t}();e.FeesObjectMap=i}),define("history/web/NetAssetValueMap",["require","exports","core/web/UrlBuilder"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NetAssetValueMap=void 0;var i=function(){function t(){}return t.listFirst=function(t){return n.UrlBuilder.from("history/nav/list/for.entity.json").add("id",t).build()},t.listSecond=function(t){return n.UrlBuilder.from("history/nav/list/for.asset.json").add("id",t).build()},t}();e.NetAssetValueMap=i}),define("history/web/ReserveTransferMap",["require","exports","core/web/UrlBuilder"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReserveTransferMap=void 0;var i=function(){function t(){}return t.reserveTransfer=function(t){return n.UrlBuilder.from("reserve/transfer/fund").add("id",t).build()},t}();e.ReserveTransferMap=i}),define("basic/repository/LanguageRepository",["require","exports","tslib","core/web/WebStorages","core/web/WebHttp"],function(t,e,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageRepository=void 0;var n=function(){function t(){}return t.list=function(){return a.__awaiter(this,void 0,void 0,function(){var e,n,i;return a.__generator(this,function(t){switch(t.label){case 0:return e=r.WebStorages.siteCacheStorage(),(n=e.getObject("languages"))?[2,n]:[4,o.WebHttp.getJson("language/list.json")];case 1:return i=t.sent(),e.setObject("languages",i),[2,i]}})})},t}();e.LanguageRepository=n}),define("basic/data/Languages",["require","exports","tslib","lodash","core/util/Loader","basic/repository/LanguageRepository"],function(t,e,n,i,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Languages=e.LanguageImpl=void 0;var o=function(){function t(){this.cache={};var e=this.cache;a.Loader.add(function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:return[4,r.LanguageRepository.list()];case 1:return t.sent().forEach(function(t){e[t.iso2]=t}),[2]}})})}())}return t.prototype.get=function(t){if(t)return this.cache[t]},t.prototype.getName=function(t){var e=this.get(t);return e?e.name:""},t.prototype.getStringSid=function(t){var e=this.get(t);return e?e.iso2:""},t.prototype.list=function(){return i.values(this.cache)},t}();e.LanguageImpl=o,e.Languages=new o}),define("basic/ui/LanguageUI",["require","exports","tslib","basic/data/Languages","core/ui/grid/column/ColumnUtils","core/ui/widget/Plugin","lodash"],function(t,e,i,a,r,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageUI=void 0;var d,l,s="DomosLanguage";function u(t,e){return t["kendo"+s](e)}function c(t,e){t.values=o.map(a.Languages.list(),function(t){return{text:t.name,value:t.iso2}});var n={};return e&&(n.optionLabel="--"),r.ColumnUtils.addEditor(t,function(t){return u(t,n)})}d={autoWidth:!0,dataSource:{transport:{read:function(t){t.success(a.Languages.list().map(function(t){return{iso2:t.iso2,name:o.startCase(t.name)}}))}},schema:{model:{id:"id",fields:{iso2:{type:"string"},name:{type:"string"}}}},sort:{field:"name",dir:"asc"}},dataTextField:"name",dataValueField:"iso2",valuePrimitive:!0,optionLabel:"--",template:"<span style='display: inline-block; width: 50px; font-weight: bold;'>#: iso2#</span><span>#: name#</span>",name:s},l=function(n){function t(t,e){return n.call(this,t,e)||this}return i.__extends(t,n),t}(kendo.ui.DropDownList),n.Plugin.plugin(l,kendo.ui.DropDownList,d);var p=function(){function t(){}return t.widget=function(t,e){return u(t,e)},t.column=function(t){return c(t,!1)},t.optionalColumn=function(t){return c(t,!0)},t}();e.LanguageUI=p}),define("common/grids/BusinessRecipientGrid",["require","exports","ui","i18n","core/api/RecipientDocumentType","core/ui/grid/GridUtils","basic/ui/LanguageUI"],function(t,e,n,o,d,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BusinessRecipientGrid=void 0;var u=n.grid.transports;var i=function(){function t(){}return t.init=function(t,e){kendo.destroy(t),t.empty();var n,i,a,r={dataSource:(n=e,a=n.model,i={transport:u.createLocal({data:a.get("recipients")}),schema:{model:{id:"id",fields:{id:{type:"number",defaultValue:0},name:{type:"string",validation:{required:!0,message:"Name is required"}},mail:{validation:{email:!0}},portal:{type:"boolean"},language:{type:"string"},reportingAccepted:{nullable:!0}}}},sort:{field:"date",dir:"desc"}},new kendo.data.DataSource(i)),columns:[{command:["edit","destroy"],title:" ",width:"150px"},{field:"name",title:o.I18N.t("object:recipients.name")},{field:"mail",title:o.I18N.t("object:recipients.mail")},{field:"portal",title:o.I18N.t("object:recipients.portal")},s.LanguageUI.column({field:"language",title:o.I18N.t("object:recipients.language")}),d.RecipientDocumentType.columnMulti({field:"reportingAccepted",title:o.I18N.t("object:recipients.reportingAccepted")})],toolbar:[{name:"create"}],pageable:l.GridUtils.defaultPageable(),scrollable:!1};l.GridUtils.withDefaults(r),t.kendoGrid(r)},t}();e.BusinessRecipientGrid=i}),define("text!templates/object/address.html",[],function(){return'<div>\n\t<button class="k-button" data-bind="click: addAddress"><span class="k-icon k-i-add"></span><span data-i18n="object:address.actions.add"></span></button>\n\t<div data-bind="invisible: hasAddresses">\n\t\t<p></p>\n\t\t<p data-i18n="object:address.ui.noAddresses"></p>\n\t</div>\n\t<div data-bind="visible: hasAddresses">\n\t\t<div id="addressList" class="address-list floating-left-container"></div>\n\t\t<p data-i18n="object:address.ui.noDuplicateHelp"></p>\n\t</div>\n</div>'}),define("object/views/address/ObjectAddressModel",["require","exports","lodash","core/data/DObservable","core/data/DObservableBuilder","core/event/DEvent","basic/data/AddressType","core/ui/Confirmation","core/util/Logger","i18n"],function(t,e,n,i,a,r,o,d,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectAddressModel=void 0;var u=function(){function t(t){var e=this;this.addRequestedEvent=new r.DEvent(!0),this.addressesChangedEvent=new r.DEvent(!0),this.addressEditEvent=new r.DEvent(!0),this.entityObservable=i.DObservable.wrap(t),this.addresses=this.entityObservable.getRaw("addresses"),this.observable=a.DObservableBuilder.of({hasAddresses:0<this.addresses.length}).add("addAddress",function(t){return e.addRequestedEvent.fire()}).build(),this.addresses.bind("change",function(t){e.observable.set("hasAddresses",0<e.addresses.length),e.addressesChangedEvent.fire()})}return t.prototype.kendo=function(){return this.observable.kendo()},t.prototype.kendoAddresses=function(){return this.addresses},t.prototype.edit=function(t){this.addressEditEvent.fire(i.DObservable.wrap(t))},t.prototype.remove=function(e){var n=this;d.Confirmation.confirm(s.I18N.t("object:address.actions.remove"),s.I18N.t("object:address.ui.confirmRemove")).then(function(t){t&&n.addresses.remove(e)}).catch(function(t){return l.Logger.error(t)})},t.prototype.add=function(t){t&&this.addresses.push(t)},t.prototype.newAddress=function(){return{type:o.AddressType.LEGAL,streetNumber:"",street:"",postalCode:"",city:"",state:"",country:this.defaultCountry()}},t.prototype.defaultCountry=function(){var t=this.entityObservable.kendo().get("country");if(t)return t;var e=n.chain(this.entityObservable.get("addresses")).sortBy(function(t){return t.type}).head().value();return e?e.country:826},t}();e.ObjectAddressModel=u}),define("text!templates/object/address.edit.window.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="type" data-i18n="object:address.fields.type"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="type" data-role="domosaddresstype" data-bind="value: type"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="number" data-i18n="object:address.fields.number"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="number" class="k-textbox" data-bind="value: streetNumber"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="street" data-i18n="object:address.fields.street"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="street" class="k-textbox" data-bind="value: street"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="post" data-i18n="object:address.fields.postalCode"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="post" class="k-textbox" data-bind="value: postalCode"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="city" data-i18n="object:address.fields.city"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="city" class="k-textbox" data-bind="value: city"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="state" data-i18n="object:address.fields.state"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="state" class="k-textbox" data-bind="value: state"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="country" data-i18n="object:address.fields.country"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="country" data-role="domoscountry" data-bind="value: country"/>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\t<div class="formWindowButtons">\n\t\t<button class="k-primary" data-role="button" data-icon="check" data-bind="click: okClick" data-i18n="object:address.actions.ok"></button>\n\t\t<button data-role="button" data-icon="cancel" data-bind="click: closeClick" data-i18n="object:address.actions.cancel"></button>\n\t</div>\n</div>'}),define("object/views/address/ObjectAddressEditionWindow",["require","exports","text!templates/object/address.edit.window.html","i18n","core/data/DObservableBuilder","core/util/Logger","basic/data/AddressType"],function(t,e,d,l,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectAddressEditionWindow=void 0;var i=function(){function t(){}return t.init=function(e){e.addRequestedEvent.register(function(){t.open(e.newAddress()).then(function(t){return e.add(t)}).catch(function(t){return n.Logger.error(t)})}),e.addressEditEvent.register(function(e){t.open(e.toJson()).then(function(t){t&&e.update(t)}).catch(function(t){return n.Logger.error(t)})})},t.open=function(o){return new Promise(function(t,e){var n=kendo.template(d)({}),i=$("<div>").addClass("formWindow").appendTo($(document.body));i.html(n),l.I18N.localize(i);var a,r=i.kendoWindow({modal:!0,width:400,minHeight:150,visible:!1}).data("kendoWindow");r.bind("close",function(){return kendo.destroy(i),i.remove(),t(a),!0}),s.DObservableBuilder.of(o).add("okClick",function(t){a=t.toJson(),r.close()}).add("closeClick",function(t){return r.close()}).build().bind(i),r.title(l.I18N.t("object:address.actions.edit")).open().center()})},t}();e.ObjectAddressEditionWindow=i}),define("text!templates/object/address.card.html",[],function(){return'<div class="address-card k-content">\n\t<div class="k-header">\n\t\t#: type#\n\t\t<span class="floating-right-container">\n\t\t\t<a id="remove" class="k-icon k-i-close" data-i18n="[title]object:address.actions.remove"></a>\n\t\t\t<a id="edit" class="k-icon k-i-edit" data-i18n="[title]object:address.actions.edit"></a>\n\t\t</span>\n\t</div>\n\t<div class="k-content">\n\t\t#= address#\n\t</div>\n</div>'}),define("basic/util/AddressFormatter",["require","exports","basic/data/Countries"],function(t,e,r){"use strict";function o(t){return kendo.htmlEncode(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.AddressFormatter=void 0;var n=function(){function n(){}return n.formatHtml=function(t,e){return n.formatArray(t,e).join("<br/>")},n.formatArray=function(t,e){if(!t)return[];var n,i,a=(i=(i=e)||function(t){return r.Countries.getIso(t)},{houseNumber:o((n=t).streetNumber),road:o(n.street),city:o(n.city),postcode:o(n.postalCode),state:o(n.state),countryCode:o(i(n.country))});return window.addressFormatter.format(a,{output:"array",appendCountry:!0})},n}();e.AddressFormatter=n}),define("object/views/address/ObjectAddressEditorList",["require","exports","text!templates/object/address.card.html","basic/data/AddressType","basic/util/AddressFormatter"],function(t,e,i,c,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectAddressEditorList=void 0;var n=function(){function n(){}return n.init=function(t,e){kendo.destroy(t),t.empty(),n.display(t,e),e.addressesChangedEvent.register(function(){return n.display(t,e)})},n.display=function(d,l){kendo.destroy(d),d.empty();for(var s=kendo.template(i),u=l.kendoAddresses(),t=u.length,e=function(t){var e=u[t],n=e.toJSON(),i=c.AddressType.getName(n.type)||"?",a=p.AddressFormatter.formatHtml(n),r=s({type:i,address:a}),o=$(r);d.append(o),o.find("#remove").click(function(){return l.remove(e)}),o.find("#edit").click(function(){return l.edit(e)})},n=0;n<t;++n)e(n)},n}();e.ObjectAddressEditorList=n}),define("object/views/address/ObjectAddressEditor",["require","exports","text!templates/object/address.html","./ObjectAddressModel","i18n","./ObjectAddressEditionWindow","./ObjectAddressEditorList"],function(t,e,r,o,d,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectAddressEditor=void 0;var n=function(){function t(){}return t.initEntity=function(t,e){kendo.destroy(t),t.empty();var n=kendo.template(r)({}),i=new o.ObjectAddressModel(e),a={model:i.kendo(),init:function(t){var e=t.sender.element;d.I18N.localize(e),l.ObjectAddressEditionWindow.init(i),s.ObjectAddressEditorList.init(e.find("#addressList"),i)}};new kendo.View(n,a).render(t)},t}();e.ObjectAddressEditor=n}),define("object/views/blockedPeriod/BlockedPeriodGrid",["require","exports","ui/grid/transports","core/ui/grid/GridUtils","core/ui/DateUI","i18n","./BlockedReasonType","object/ui/VehicleUI","core/util/ObservableUtils"],function(t,e,i,a,r,o,d,l,s){"use strict";function u(t,e){$('<textarea class="k-textbox" name="'+e.field+'" style="width:100%;height:100%;" />').appendTo(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.BlockedPeriodGrid=void 0;var n=function(){function t(){}return t.init=function(t,e){var n={dataSource:{transport:i.createLocal({data:e.blockedPeriods}),schema:{model:{id:"id",fields:{fund:{nullable:!0},startDate:{type:"date"},endDate:{type:"date",nullable:!0},reason:{type:"number"},comment:{type:"string"}},fundName:function(){return s.ObservableUtils.get(this,"fund.name")||""}}},sort:{field:"startDate",dir:"desc"}},columns:[{command:["edit","destroy"],title:" ",width:230},l.VehicleUI.column({field:"fund",title:o.I18N.t("data:fields.blockedPeriod.fund"),width:200}),r.DateUI.column({field:"startDate",title:o.I18N.t("data:fields.blockedPeriod.startDate"),width:150}),r.DateUI.column({field:"endDate",title:o.I18N.t("data:fields.blockedPeriod.endDate"),width:150}),d.BlockedReasonType.column({field:"reason",title:o.I18N.t("data:fields.blockedPeriod.reason"),width:200}),{field:"comment",title:o.I18N.t("data:fields.blockedPeriod.comment"),width:300,editor:u,attributes:{style:"white-space: pre-line"}}],height:500,toolbar:[{name:"create"},{name:"excel"}],pageable:a.GridUtils.defaultPageable()};a.GridUtils.withDefaults(n),t.kendoGrid(n)},t}();e.BlockedPeriodGrid=n}),define("common/models/ResidentType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResidentType=void 0;var r,o;(r=e.ResidentType||(e.ResidentType={}))[r.NotResident=1]="NotResident",r[r.Resident=2]="Resident",r[r.NotDomiciled=3]="NotDomiciled",r[r.TaxableAsResident=4]="TaxableAsResident",r[r.Unknown=5]="Unknown",(o=e.ResidentType||(e.ResidentType={})).getName=n.EnumUtils.createNameFn("data:ResidentType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosResidentType",o,!0),o.column=a.EnumColumnUtils.createFactory(o)}),define("text!templates/data/edit/data.country.edit.window.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="country" data-i18n="data:object.country.data.country"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="country" data-role="domoscountry" data-bind="value: country" />\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="residentType" data-i18n="data:object.country.data.residentType"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="residentType" data-role="domosresidenttype" data-bind="value: residentType" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="citizen" data-i18n="data:object.country.data.citizen"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="citizen" type="checkbox" class="k-checkbox" data-bind="checked: citizen"/>\n\t\t\t\t<label for="citizen" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="taxCode" data-i18n="data:object.country.data.taxCode"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="taxCode" class="k-textbox" type="text" data-bind="value: taxCode" />\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n\t<div class="formWindowButtons">\n\t\t<button id="okClickId" class="k-primary" data-role="button" data-icon="check" data-bind="click: okClick, enabled: isValid">OK</button>\n\t\t<button data-role="button" data-icon="cancel" data-bind="click: cancelClick">Cancel</button>\n\t</div>\n</div>'}),define("common/views/DataByCountryEditWindow",["require","exports","i18n","text!templates/data/edit/data.country.edit.window.html","core/data/DObservableBuilder","common/models/ResidentType"],function(t,e,l,s,u,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataByCountryEditWindow=void 0;var i=function(){function t(){}return t.open=function(t){return t||(t={id:0,country:0,citizen:null,residentType:n.ResidentType.Unknown,taxCode:null}),d=t,new Promise(function(t,e){var n=kendo.template(s)({}),i=$("<div>").addClass("formWindow").appendTo($(document.body));i.html(n),i.kendoWindow({modal:!0,width:1e3,minWidth:300,visible:!1});var a,r=i.data("kendoWindow");r.bind("close",function(){return kendo.destroy(i),i.remove(),t(a),!0});var o=u.DObservableBuilder.of(d).add("isValid",function(t){return!!t.get("country")&&!!t.get("residentType")}).add("okClick",function(t){a=t.toJson(),r.close()}).add("cancelClick",function(t){a=void 0,r.close()}).build();l.I18N.localize(i),o.bind(i),r.title(l.I18N.t("data:object.country.data.editWindow.title")).open().center()});var d},t}();e.DataByCountryEditWindow=i}),define("common/grids/DataByCountryGrid",["require","exports","i18n","core/ui/grid/GridUtils","basic/ui/CountryUI","../models/ResidentType","core/ui/grid/GridToolbar","lodash","core/util/ObservableUtils","core/ui/Confirmation","core/util/Logger","core/ui/grid/column/ColumnUtils","core/ui/grid/column/ColumnStyle","common/views/DataByCountryEditWindow"],function(t,e,s,u,c,p,m,f,b,v,y,h,g,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataByCountryGrid=void 0;var T="ui:grid.actionsClick",I="country";function C(t,e,n){var i=[t.element.find("#"+e),t.element.find("#"+n)];u.GridUtils.onRowSelectChange(t,i)}function w(t){return n.DataByCountryEditWindow.open(t)}function i(t,e){kendo.destroy(t),t.empty();var n,i=e.model,a=kendo.guid(),r=kendo.guid(),o=(new m.GridToolbar).addClick(s.I18N.t(T+".add.text"),m.GridToolbar.ICON_ADD,function(){var i;(i=t.data("kendoGrid"))&&w().then(function(e){if(e){var t=i.dataSource.data(),n=f.first(f.filter(t,function(t){return t.get(I)===e.country}));n?b.ObservableUtils.update(n,e):i.dataSource.data().push(e)}})}).addClick(s.I18N.t(T+".edit.text"),m.GridToolbar.ICON_EDIT,function(){return function(t){var a=t.data("kendoGrid");if(a){var e=a.select();if(0<e.length){var r=a.dataItem(e);w(r.toJSON()).then(function(e){if(e){var t=a.dataSource.data(),n=f.first(f.filter(t,function(t){return t.get(I)===e.country})),i=null;(i=n||r)&&b.ObservableUtils.update(i,e)}})}}}(t)},a).addClick(s.I18N.t(T+".delete.text"),m.GridToolbar.ICON_DELETE,function(){return function(t){var e=t.data("kendoGrid"),n=e.select();if(0<n.length){var i=e.dataItem(n);if(!i)return;v.Confirmation.confirmDelete(s.I18N.t(T+".delete.confirmation")).then(function(t){t&&e.dataSource.remove(i)}).catch(function(t){return y.Logger.error(t)})}}(t)},r),d={dataSource:(n=i,{data:n.get("dataByCountry"),schema:{model:kendo.data.Model.define({id:"id",fields:{country:{type:"number"},citizen:{type:"boolean"},residentType:{type:"number"},taxCode:{type:"string"}}})},sort:{field:"country",dir:"asc"}}),columns:[c.CountryUI.column({field:"country",title:s.I18N.t("data:object.country.data.country"),width:120}),h.ColumnUtils.addStyle({field:"citizen",title:s.I18N.t("data:object.country.data.citizen"),template:"<input type='checkbox' class='k-checkbox' #= (citizen == true) ? checked ='checked' : '' # disabled/><label class='k-checkbox-label'>&nbsp;</label>",width:100},g.ColumnStyle.CENTER_ALIGNED),p.ResidentType.column({field:"residentType",title:s.I18N.t("data:object.country.data.residentType"),width:140}),{field:"taxCode",title:s.I18N.t("data:object.country.data.taxCode"),width:180}],change:function(t){C(t.sender,a,r)},dataBound:function(t){C(t.sender,a,r)},scrollable:!0,pageable:u.GridUtils.defaultPageable()};d.toolbar=o.template(),u.GridUtils.withDefaults(d),t.kendoGrid(d),o.bind(t);var l=t.data("kendoGrid");l&&0===l.dataSource.data().length&&C(l,a,r)}var a=function(){function t(){}return t.init=function(t,e){i(t,e)},t}();e.DataByCountryGrid=a}),define("text!templates/object/object.conformity.html",[],function(){return'<div>\n\t<div class="lpExplanationInput k-content">\n\t\t<table class="lpExplanationInputTable">\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="checkDate" data-i18n="data:compliance.checkDate"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="checkDate" data-role="datepicker" data-bind="value: checkDate"/>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<button class="k-button" data-i18n="data:compliance.computeForEntity" data-bind="click: computeChecksList"></button>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n\t<div class="clearer"></div>\n\t<div id="complianceResult" class="floatingGrid_1600_px"></div>\n\t<div class="clearer"></div>\n\t<div class="complianceBottomPane">\n\t\t\t<div id="productionTab" data-role="tabstrip" data-bind="visible: hasTask">\n\t\t\t\t<ul>\n\t\t\t\t\t<li id="productionWorkflowLi" class="k-state-active">\n\t\t\t\t\t\t<span data-i18n="data:compliance.task.details"></span>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t\x3c!-- task details --\x3e\n\t\t\t\t<div>\n\t\t\t\t\t<div id="taskDetail"></div>\n\t\t\t\t\t<h3 data-i18n="compliance:production.task"></h3>\n\t\t\t\t\t<h4 data-bind="text: taskName"></h4>\n\t\t\t\t\t<div class="floatThird">\n\t\t\t\t\t\t<table class="formTable">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<label for="dueDate" data-i18n="compliance:production.dueDate"></label>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input id="dueDate"  data-format="d" class="k-textbox" data-bind="display: dueDate" readonly/>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<label for="nextDate" data-i18n="compliance:production.nextDate"></label>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input id="nextDate"  data-format="d" class="k-textbox" data-bind="display: nextDate" readonly/>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t\t<div class=clearer></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="clearer"></div>\n\t\t\t\t\t<h3 data-i18n="compliance:production.workflow"></h3>\n\t\t\t\t\t<h4 data-bind="text: workflowName"></h4>\n\t\t\t\t\t<div class="clearer"></div>\n\t\t\t\t\t<div id="workflowData"></div>\n\t\t\t\t\t<div class="clearer"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n</div>'}),define("compliance/repository/ComplianceOverviewRepository",["require","exports","tslib","core/web/WebHttp"],function(t,e,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceOverviewRepository=void 0;var n=function(){function t(){}return t.compute=function(t,e,n){var i={id:t,date:e?e.toJSON():void 0};return o.WebHttp.getJson("compliance/overview/engine.json",i,n)},t.computeForEntity=function(n,i,a){return r.__awaiter(this,void 0,void 0,function(){var e;return r.__generator(this,function(t){return e={id:n,date:i?i.toJSON():void 0},[2,o.WebHttp.getJson("compliance/overview/entity/engine.json",e,a)]})})},t}();e.ComplianceOverviewRepository=n}),define("compliance/repository/ComplianceWorkflowRepository",["require","exports","tslib","lodash","core/web/WebHttp","core/util/DateUtils"],function(t,e,i,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceWorkflowRepository=void 0;var n=function(){function t(){}return t.list=function(t){return r.WebHttp.getJson("compliance/workflow/instance/list.json",t)},t.listTasks=function(t,e){var n={};return t&&(a.isString(t)?n.workflow=t:n.workflow=t.id),r.WebHttp.getJson("compliance/workflow/task/list.json",n,e)},t.fetchWorkflowData=function(t,e){var n=a.isString(t)?t:t.id;return r.WebHttp.getJson("compliance/workflow/data.json",{id:n},e)},t.fetchDefaultOnSite=function(e){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(t){switch(t.label){case 0:return[4,r.WebHttp.getJson("compliance/workflow/default.json",e)];case 1:return[2,t.sent().id]}})})},t.saveDefaultOnSite=function(e,n){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(t){switch(t.label){case 0:return[4,r.WebHttp.postJson("compliance/workflow/default.json",{id:e},n)];case 1:return[2,t.sent().id]}})})},t.updateWorkflow=function(t,e,n){var i=JSON.stringify(e);return r.WebHttp.postJson("compliance/workflow/update.json",{id:t,data:i},n)},t.postpone=function(t,e,n){var i={id:t,date:o.DateUtils.toString(e)};return r.WebHttp.postJson("compliance/workflow/postpone.json",i,n)},t.fetchExternalUserIdentifiables=function(t,e){return t=a.isString(t)?t:t.id,r.WebHttp.getJson("compliance/external/user/id/list.json",{task:t},e)},t}();e.ComplianceWorkflowRepository=n}),define("document/ui/DocumentUI",["require","exports","document/web/DocumentMap"],function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DocumentUI=void 0;var n=function(){function t(){}return t.Link={column:function(t){var a=t.field;return a&&(t.field=a+"Name()",t.editable=function(){return!1},t.editor=function(){},t.template=function(t){var e=t[a];if(!e)return"";var n=kendo.htmlEncode(t[a].name||"")||"?",i=r.DocumentMap.downloadUrl(e.id);return i?'<a class="d-link" href="'+i+'" download="'+n+'">'+n+"</a>":n}),t}},t.Thumbnail={column:function(t){var i=t.field;return i&&(t.editable=function(){return!1},t.editor=function(){},t.sortable=!1,t.groupable=!1,t.filterable=!1,t.template=function(t){var e=t[i];if(!e)return"";var n=r.DocumentMap.thumbnailUrl(e.id);return n?'<img src="'+n+'"></img>':""}),t}},t}();e.DocumentUI=n}),define("checklist/repository/WorkflowCheckListRepository",["require","exports","core/web/WebHttp","core/util/DateUtils"],function(t,e,r,o){"use strict";var d,n;Object.defineProperty(e,"__esModule",{value:!0}),e.WorkflowCheckListRepository=e.WFIdentType=void 0,(n=d=e.WFIdentType||(e.WFIdentType={}))[n.TASK=0]="TASK",n[n.WORKFLOW=1]="WORKFLOW";var i=function(){function t(){}return t.prototype.getCheckListValidated=function(t){var e="workflow/check/list/validated.json";return t.identType===d.TASK?r.WebHttp.getJson(e,{taskId:t.identValue}):r.WebHttp.getJson(e,{workflowId:t.identValue})},t.prototype.listWorkflowCheckItemsCore=function(t,e){return e.identType===d.TASK?r.WebHttp.getJson(t,{taskId:e.identValue}):r.WebHttp.getJson(t,{workflowId:e.identValue})},t.prototype.setItemCheck=function(t,e,n,i){var a={task:t.identType===d.TASK?t.identValue:null,workflow:t.identType===d.WORKFLOW?t.identValue:null,checkId:e,objectId:n,checked:i};return r.WebHttp.postJson("workflow/checkItem/setData.json",a)},t.prototype.setItemComments=function(t,e,n,i){var a={task:t.identType===d.TASK?t.identValue:null,workflow:t.identType===d.WORKFLOW?t.identValue:null,checkId:e,objectId:n,comments:i};return r.WebHttp.postJson("workflow/checkItem/setData.json",a)},t.prototype.setTrackingComputationStartDate=function(t,e,n,i){var a={task:t.identType===d.TASK?t.identValue:null,workflow:t.identType===d.WORKFLOW?t.identValue:null,checkId:e,objectId:n,trackingComputationStartTime:o.DateUtils.toJson(i)};return r.WebHttp.postJson("workflow/checkItem/setData.json",a)},t}();e.WorkflowCheckListRepository=i}),define("checklist/data/CheckItemDocumentResponse",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CheckItemDocumentResponse=void 0;var r,o;(r=e.CheckItemDocumentResponse||(e.CheckItemDocumentResponse={}))[r.NONE=1]="NONE",r[r.OPTIONAL=2]="OPTIONAL",r[r.MANDATORY=3]="MANDATORY",(o=e.CheckItemDocumentResponse||(e.CheckItemDocumentResponse={})).getName=a.EnumUtils.createNameFn("documents:CheckItemDocumentResponse",o),o.widget=i.EnumWidgetUtils.createDropList("DomosCheckItemDocumentResponse",o,!1,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("checklist/data/CheckItemStatus",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CheckItemStatus=void 0;var r,o;(r=e.CheckItemStatus||(e.CheckItemStatus={}))[r.INACTIVE=1]="INACTIVE",r[r.ACTIVE=2]="ACTIVE",r[r.EXPIRED=3]="EXPIRED",(o=e.CheckItemStatus||(e.CheckItemStatus={})).getName=a.EnumUtils.createNameFn("documents:CheckItemStatus",o),o.widget=i.EnumWidgetUtils.createDropList("DomosCheckItemStatus",o,!1,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("text!templates/checklist/checkitems.grid.toolbar.html",[],function(){return'<div class="k-header k-grid-toolbar">\n    <a class="k-button" data-bind="click: exportAsExcel">\n        <span class="k-icon k-i-excel"></span>\n        #=$.t("investment:checkItems.actions.exportExcel")#\n    </a>\n    <span class="showDetailsBtnContainer" data-bind="invisible: showDetails">\n        <a role="button" class="k-button k-button-icontext k-grid-custom" data-bind="click: showDetailsAction" href="javascript:void(0)">\n            <span class="k-icon k-i-zoom-in"></span>\n            #=$.t("investment:checkItems.actions.showDetails")#\n        </a>\n    </span>\n    <span class="hideDetailsBtnContainer" data-bind="visible: showDetails" >\n        <a role="button" class="k-button k-button-icontext k-grid-update" data-bind="click: hideDetailsAction" href="javascript:void(0)">\n            <span class="k-icon k-i-zoom-out"></span>\n            #=$.t("investment:checkItems.actions.hideDetails")#\n        </a>\n    </span>\n</div>'}),define("checklist/view/CheckItemsGrid",["require","exports","tslib","lodash","core/util/ObservableUtils","document/ui/DocumentUI","core/ui/grid/GridUtils","core/ui/UploadUtils","../repository/WorkflowCheckListRepository","../data/CheckItemDocumentResponse","i18n","core/ui/DateUI","../data/CheckItemStatus","document/ui/DocumentTagUI","object/ui/AssetUI","object/ui/ObjectCategoryUI","core/web/WebLocation","core/util/Logger","text!templates/checklist/checkitems.grid.toolbar.html","core/data/DObservableBuilder"],function(t,e,l,s,m,f,b,d,v,y,h,g,T,I,C,w,k,u,E,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CheckItemsGrid=void 0;var S="checkItem",N="object",x={showDetails:!1};function R(n,i,a,r,o,d){return l.__awaiter(this,void 0,void 0,function(){var e;return l.__generator(this,function(t){switch(t.label){case 0:t.trys.push([0,11,,12]),t.label=1;case 1:return t.trys.push([1,,8,10]),s.isString(d)?[4,i.setItemComments(n,a,r,d)]:[3,3];case 2:return t.sent(),[3,7];case 3:return s.isBoolean(d)?[4,i.setItemCheck(n,a,r,d)]:[3,5];case 4:return t.sent(),[3,7];case 5:return[4,i.setTrackingComputationStartDate(n,a,r,d)];case 6:t.sent(),t.label=7;case 7:return[3,10];case 8:return[4,o.dataSource.read()];case 9:return t.sent(),[7];case 10:return[3,12];case 11:return e=t.sent(),u.Logger.error(e),[3,12];case 12:return[2]}})})}var n=function(){function p(){}return p.validateCreationData=function(t){for(var e=[],n=t.items(),i=0;i<n.length;i++){var a=$(n[i]),r=t.dataItem(a).toJSON();r.checked||r.status!==T.CheckItemStatus.ACTIVE||e.push(""+h.I18N.t("investment:errors.mandatoryCheckInRow",{row:i+1}))}return e},p.display=function(t,l,a,s,e){var n=kendo.template(E),i={transport:{read:function(t){s.listWorkflowCheckItems(l).then(t.success).catch(t.error)},update:function(t){s.listWorkflowCheckItems(l).then(t.success).catch(t.error)}},schema:{model:{id:"id",fields:{priority:{type:"number",editable:!1},checkItem:{editable:!1},description:{type:"string",editable:!1},object:{nullable:!0,editable:!1},checked:{type:"boolean",editable:!0},status:{type:"number",editable:!1},trackingComputationStartTime:{type:"date",editable:!0},startValidityDate:{type:"date",editable:!1},endValidityDate:{type:"date",editable:!1},document:{nullable:!0,editable:!0},documentTag:{},documentTemplate:{nullable:!0,editable:!1},comments:{type:"string",editable:!0}},checkItemName:function(){return m.ObservableUtils.get(this,"checkItem.name")||""},objectName:function(){return m.ObservableUtils.get(this,"object.name")||""},objectCategory:function(){return m.ObservableUtils.get(this,"object.category")},documentName:function(){return m.ObservableUtils.get(this,"document.name")||""},documentTemplateName:function(){return m.ObservableUtils.get(this,"documentTemplate.name")||""},documentTagName:function(){return m.ObservableUtils.get(this,"documentTag.name")||""}}},sort:{field:"priority",dir:"asc"}},r=[],o=l.identType===v.WFIdentType.TASK&&!a.validated;e&&r.push({title:" ",groupable:!1,sortable:!1,filterable:!1,width:145,editable:function(){return!1},editor:function(){},template:function(t){switch(t.documentResponse){case y.CheckItemDocumentResponse.MANDATORY:case y.CheckItemDocumentResponse.OPTIONAL:if(a.validated)return"";var e=t.object?t.object.id:null,n=t.checkItem.id;return'<input type="file" data-'+S+'="'+n+'" data-'+N+'="'+e+'"/>';case y.CheckItemDocumentResponse.NONE:default:return""}}});var d={dataSource:i,editable:!0,scrollable:!1,pageable:b.GridUtils.defaultPageable(),columns:r.concat([f.DocumentUI.Thumbnail.column({field:"document",title:h.I18N.t("checklist:fields.thumbnail"),width:120}),{field:"priority",title:h.I18N.t("checklist:fields.priority"),width:95},{field:"checkItemName()",title:h.I18N.t("checklist:fields.name"),template:function(t){var e=t.checkItem;if(!e)return"";var n=kendo.htmlEncode(e.name||""),i=s.getEditRootUrl(),a=k.WebLocation.resolve(i+"?id="+e.id);return a?'<a class="d-link" href="'+a+'">'+n+"</a>":n},editable:function(){return!1}},C.AssetUI.column({field:"object",title:h.I18N.t("investment:checkItems.fields.object"),editable:function(){return!1}}),w.ObjectCategoryUI.column({field:"objectCategory()",title:h.I18N.t("investment:checkItems.fields.objectCategory"),width:95,editable:function(){return!1}}),{field:"checked",title:h.I18N.t("checklist:fields.checked"),attributes:{style:"text-align: center;"},template:function(t){var e=t;if(e){var n=o&&(e.documentResponse!==y.CheckItemDocumentResponse.MANDATORY||!!e.document);return'<input type="checkbox" '+(t.checked?' checked="checked"':"")+(n?"":' disabled="disabled"')+' class="chkbx" />'}return""},width:90,editable:function(){return o}},T.CheckItemStatus.column({field:"status",title:h.I18N.t("checklist:fields.status"),width:70,editable:function(){return!1}}),g.DateUI.column({field:"trackingComputationStartTime",title:h.I18N.t("checklist:fields.trackingComputationStartTime"),width:150}),g.DateUI.column({field:"startValidityDate",title:h.I18N.t("checklist:fields.startValidityDate"),hidden:!0,editable:function(){return!1}}),g.DateUI.column({field:"endValidityDate",title:h.I18N.t("checklist:fields.endValidityDate"),hidden:!0,editable:function(){return!1}}),p.createDocumentLinkColumn({field:"document",title:h.I18N.t("checklist:fields.document")}),I.DocumentTagUI.column({field:"documentTag",title:h.I18N.t("checklist:fields.documentTag"),width:"150px",editable:function(){return!1},hidden:!0}),p.createDocumentLinkColumn({field:"documentTemplate",title:h.I18N.t("checklist:fields.documentTemplate"),hidden:!0}),{field:"description",title:h.I18N.t("checklist:fields.description"),hidden:!0,editable:function(){return!1}},{field:"comments",title:h.I18N.t("checklist:fields.comments"),editable:function(){return o}}]),dataBound:function(t){var e,n,i=t.sender;a.validated||i.element.find("input[type='file']").each(function(t,e){p.setupUpload(l,i,$(e),s)}),(e=x,n=t.sender,D.DObservableBuilder.of(e).add("exportAsExcel",function(){n&&n.saveAsExcel()}).add("showDetailsAction",function(t){n&&(n.showColumn("documentTagName()"),n.showColumn("documentTemplateName()"),n.showColumn("description"),t.set("showDetails",!0))}).add("hideDetailsAction",function(t){n&&(n.hideColumn("documentTagName()"),n.hideColumn("documentTemplateName()"),n.hideColumn("description"),t.set("showDetails",!1))}).build()).bind(u)},save:function(t){if(t.model&&t.values){var e=t.sender,n=t.model.get("comments"),i=t.model.get("trackingComputationStartTime"),a=t.model.get(S),r=t.model.get(N),o=t.model.get("document"),d=t.values.comments?t.values.comments:"";d!==n?R(l,s,a.id,r?r.id:null,e,d):o&&t.values.trackingComputationStartTime&&t.values.trackingComputationStartTime!==i?R(l,s,a.id,r?r.id:null,e,t.values.trackingComputationStartTime):e.dataSource.cancelChanges()}},toolbar:function(){return n}};b.GridUtils.withDefaults(d);var u=$("<div>").addClass("floatingGrid_100").appendTo(t),c=u.kendoGrid(d);return u.on("change","input.chkbx",function(t){var e=c.data("kendoGrid"),n=e.dataItem($(t.target).closest("tr")),i=!n.get("checked"),a=n.get(S),r=n.get(N);R(l,s,a.id,r?r.id:null,e,i)}),$("<div>").addClass("clearer").appendTo(t),u},p.createDocumentLinkColumn=function(n){(n=f.DocumentUI.Link.column(n)).groupable=!1,n.sortable=!1,n.filterable=!1;var i=n.template;return n.template=function(t){var e=i(t);return e||("documentName()"!==n.field?"":'<span class="documentPlaceholder">'+(y.CheckItemDocumentResponse.getName(t.documentResponse)||"")+"</span>")},n},p.setupUpload=function(t,e,n,i){var a=n.data(S.toLowerCase());if(a){var r={checkItemId:a,objectId:n.data(N.toLowerCase())};kendo.destroy(n),n.empty();var o={async:{saveUrl:i.checkListDocumentUploadUrl(t,r),saveField:"file"},multiple:!1,showFileList:!1,success:function(t){e.dataSource.read().then(function(){},function(t){u.Logger.error(t)})}};d.UploadUtils.withDefaults(o),n.kendoUpload(o)}},p}();e.CheckItemsGrid=n}),define("compliance/repository/ComplianceWorkflowCheckListRepository",["require","exports","tslib","core/web/UrlBuilder","checklist/repository/WorkflowCheckListRepository"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceWorkflowCheckListRepository=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.checkListDocumentUploadUrl=function(t,e){var n=i.UrlBuilder.from("compliance/document/upload.json");return t.identType===a.WFIdentType.TASK?n.add("task",t.identValue):n.add("workflow",t.identValue),n.add("checkId",e.checkItemId).add("objectId",e.objectId).build()},e.prototype.getEditRootUrl=function(){return"compliance/check.list/edit"},e.prototype.listWorkflowCheckItems=function(t){return this.listWorkflowCheckItemsCore("compliance/workflow/check/list.json",t)},e}(a.WorkflowCheckListRepository);e.ComplianceWorkflowCheckListRepository=new r}),define("compliance/workflow/ComplianceTaskCheckListKey",["require","exports","lodash","kendo","core/util/Logger","i18n","checklist/view/CheckItemsGrid","checklist/repository/WorkflowCheckListRepository","core/ui/Information","compliance/repository/ComplianceWorkflowCheckListRepository"],function(t,e,s,u,a,c,p,m,f,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceTaskCheckListKey=void 0;var n="DMS_COMPLIANCE_CHECK_LIST_KEY";function r(t){u.destroy(t),t.empty(),$("<h2>").text(c.I18N.t("lp:checklist.form.noForm")).appendTo(t)}var i=function(){function t(){}return t.getKey=function(){return n},Object.defineProperty(t.prototype,"key",{get:function(){return n},enumerable:!1,configurable:!0}),t.prototype.display=function(t,e,n){var i=$("<div>").appendTo(t);this.loadAndDisplay(i,e,n)},t.prototype.loadAndDisplay=function(e,n,i){b.ComplianceWorkflowCheckListRepository.getCheckListValidated({identType:m.WFIdentType.TASK,identValue:n}).then(function(t){s.has(t,"validated")?function(t,e,n,a){u.destroy(t),t.empty();var i=$("<div>").appendTo(t);$("<p>").appendTo(t);var r={identType:m.WFIdentType.TASK,identValue:n},o=p.CheckItemsGrid.display(t,r,e,b.ComplianceWorkflowCheckListRepository,!0),d=function(t){var e=o.data("kendoGrid");if(e){if(e.tbody.find("tr:last").length&&t){var n=p.CheckItemsGrid.validateCreationData(e);if(n.length)return void f.Information.error(s.chain(n).take(6).join(", ").value())}var i=e.dataSource.data().toJSON();a({accepted:t,items:i})}},l={items:[{type:"button",icon:"check",text:c.I18N.t("lp:checklist.form.buttonAccept"),click:function(){return d(!0)}},{type:"button",icon:"check",text:c.I18N.t("lp:checklist.form.buttonReject"),click:function(){return d(!1)}}]};i.kendoToolBar(l)}(e,t,n,i):r(e)}).catch(function(t){a.Logger.error(t),r(e)})},t}();e.ComplianceTaskCheckListKey=i}),define("compliance/views/production/ComplianceProductionModel",["require","exports","tslib","kendo","lodash","compliance/repository/ComplianceWorkflowRepository","core/event/DEvent","core/data/DObservable","core/data/DObservableBuilder","core/util/DateUtils","compliance/data/ComplianceFormRating","compliance/workflow/ComplianceTaskCheckListKey"],function(t,e,d,a,l,s,n,r,i,o,u,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceProductionModel=void 0;function p(t){if(!t)return"";var e=[];return t.kciTask&&e.push(t.kciTask.name),t.fund&&e.push(t.fund.name),t.serviceProvider&&e.push(t.serviceProvider.name),e.join(" - ")}function m(t){var e=t.getRaw("workflow");return e?r.DObservable.wrap(e):null}function f(t,e){var n=m(t);if(!n)return"";var i=n.get(e);return i?a.toString(i,"d"):""}function b(t,e){var n=m(t);if(!n)return"";var i=n.get(e);if(l.isNil(i))return"";var a=u.ComplianceFormRating.getRatingEnum(i);return u.ComplianceFormRating.getName(a)||""}var v=function(){function t(){var e=this;this.gridHeightInPx=450,this.workflowUpdatedEvent=new n.DEvent(!1),this.updateWorkflowEvent=new n.DEvent(!1);this.model=i.DObservableBuilder.of({workflow:null,task:null}).add("hasWorkflow",function(t){return!!t.get("workflow")}).add("hasTask",function(t){return!!t.get("task")}).add("hasTab",function(t){return!!t.get("workflow")||!!t.get("task")}).add("workflowName",function(t){return p(t.get("workflow"))}).add("taskWorkflowName",function(t){return p(t.get("task"))}).add("updateWorkflow",function(t){return e.updateWorkflowEvent.fire()}).add("acceptanceDateStr",function(t){return f(t,"acceptanceDate")}).add("customNextDueDateStr",function(t){return f(t,"customDueDate")}).add("defaultNextDueDateStr",function(t){return function(t){var e=m(t);if(!e)return"";var n=e.get("acceptanceDate");if(!n)return"";var i=o.DateUtils.addMonths(n,e.get("dueDateMonths"));return a.toString(i,"d")}(t)}).add("customFormScoreStr",function(t){return b(t,"customFormScore")}).add("calculatedFormScoreStr",function(t){return b(t,"calculatedFormScore")||"N/A"}).add("hasNotWorkflowOrHasChecklistTask",function(t){return function(t){if(!t.get("workflow"))return!0;var e=t.get("task");return!!e&&e.formKey===c.ComplianceTaskCheckListKey.getKey()}(t)}).build(),this._loadWorkflowInitial=s.ComplianceWorkflowRepository.list(),this._loadWorkflow=null}return t.prototype.defaultNextDueDateStr=function(){return this.model.kendo().get("defaultNextDueDateStr")()},t.prototype.calculatedFormScoreStr=function(){return this.model.kendo().get("calculatedFormScoreStr")()},t.prototype.kendo=function(){return this.model.kendo()},t.prototype.workflow=function(){return this.model.get("workflow")},t.prototype.setWorkflow=function(t){this.model.set("workflow",t)},t.prototype.task=function(){return this.model.get("task")},t.prototype.setTask=function(t){this.model.set("task",t)},t.prototype.setCalculatedFormScore=function(t){var e=this.model.getRaw("workflow");e&&r.DObservable.wrap(e).set("calculatedFormScore",t)},t.prototype.updateWorkflow=function(i){return d.__awaiter(this,void 0,void 0,function(){var e,n;return d.__generator(this,function(t){switch(t.label){case 0:return(e=this.model.getRaw("workflow"))?(n=r.DObservable.wrap(e),[4,s.ComplianceWorkflowRepository.updateWorkflow(n.get("id"),i)]):[2];case 1:return t.sent(),n.update(i),this.workflowUpdatedEvent.fire(n.toJson()),[2]}})})},t.prototype.loadWorkflows=function(){return d.__awaiter(this,void 0,void 0,function(){return d.__generator(this,function(t){return this._loadWorkflow?this._loadWorkflow=s.ComplianceWorkflowRepository.list():(this._loadWorkflow=this._loadWorkflowInitial,this._loadWorkflowInitial=Promise.resolve([])),[2,this._loadWorkflow]})})},t.prototype.loadTasks=function(){return d.__awaiter(this,void 0,void 0,function(){var e,n,i,a,r,o;return d.__generator(this,function(t){switch(t.label){case 0:return[4,s.ComplianceWorkflowRepository.listTasks(this.workflow())];case 1:return e=t.sent(),[4,this._loadWorkflow?this._loadWorkflow:this._loadWorkflowInitial];case 2:for(n=t.sent(),i=l.chain(n).filter(function(t){return t.running}).reduce(function(t,e){return t[e.id]=e.taskDueDate,t},{}).value(),a=0,r=e;a<r.length;a++)(o=r[a]).dueDate=i[o.instance]||null;return[2,e]}})})},t}();e.ComplianceProductionModel=v}),define("compliance/data/ComplianceDocumentResponse",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceDocumentResponse=void 0;var r,o;(r=e.ComplianceDocumentResponse||(e.ComplianceDocumentResponse={}))[r.NONE=1]="NONE",r[r.INTERNAL_OPTIONAL=2]="INTERNAL_OPTIONAL",r[r.INTERNAL_MANDATORY=3]="INTERNAL_MANDATORY",r[r.EXTERNAL_OPTIONAL=4]="EXTERNAL_OPTIONAL",r[r.EXTERNAL_MANDATORY=5]="EXTERNAL_MANDATORY",(o=e.ComplianceDocumentResponse||(e.ComplianceDocumentResponse={})).getName=a.EnumUtils.createNameFn("compliance:ComplianceDocumentResponse",o),o.widget=i.EnumWidgetUtils.createDropList("DomosComplianceDocumentResponse",o,!1,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("compliance/data/ComplianceFormFeatureDisplay",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormFeatureDisplay=void 0;var a,r;(a=e.ComplianceFormFeatureDisplay||(e.ComplianceFormFeatureDisplay={}))[a.NOT_AVAILABLE=1]="NOT_AVAILABLE",a[a.READONLY=2]="READONLY",a[a.EDITABLE=3]="EDITABLE",(r=e.ComplianceFormFeatureDisplay||(e.ComplianceFormFeatureDisplay={})).getName=n.EnumUtils.createNameFn("compliance:ComplianceFormFeatureDisplay",r),r.widget=i.EnumWidgetUtils.createDropList("DomosComplianceFormFeatureDisplay",r,!1,!1)}),define("compliance/data/ComplianceFormAction",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormAction=void 0;var a,r;(a=e.ComplianceFormAction||(e.ComplianceFormAction={}))[a.SAVE_DRAFT=1]="SAVE_DRAFT",a[a.SUBMIT=2]="SUBMIT",a[a.ACCEPT=3]="ACCEPT",a[a.REJECT=4]="REJECT",a[a.CANCEL=5]="CANCEL",a[a.SUBMIT_PARTIAL=6]="SUBMIT_PARTIAL",(r=e.ComplianceFormAction||(e.ComplianceFormAction={})).getName=n.EnumUtils.createNameFn("compliance:ComplianceFormAction",r),r.widgetMulti=i.EnumWidgetUtils.createMultiSelect("DomosComplianceFormActionMultiSelect",r),r.isCompleted=function(t){switch(t){case r.SUBMIT:case r.ACCEPT:case r.SUBMIT_PARTIAL:return!0;default:return!1}}}),define("compliance/form/ComplianceFormRenderOptions",["require","exports","compliance/data/ComplianceFormFeatureDisplay","compliance/data/ComplianceFormAction"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.kComplianceFormRenderScoringOptions=e.kComplianceFormRenderReadonlyOptions=e.kComplianceFormRenderNoneOptions=e.kComplianceFormRenderAllOptions=e.kComplianceFormRenderExternalOptions=e.kComplianceFormRenderInternalAnswerOptions=e.kComplianceFormRenderInternalOptions=void 0,e.kComplianceFormRenderInternalOptions={formEditable:!1,notes:n.ComplianceFormFeatureDisplay.EDITABLE,privateNotes:n.ComplianceFormFeatureDisplay.EDITABLE,ratings:n.ComplianceFormFeatureDisplay.EDITABLE,documents:n.ComplianceFormFeatureDisplay.READONLY,actions:[i.ComplianceFormAction.ACCEPT,i.ComplianceFormAction.REJECT,i.ComplianceFormAction.SAVE_DRAFT]},e.kComplianceFormRenderInternalAnswerOptions={formEditable:!0,notes:n.ComplianceFormFeatureDisplay.EDITABLE,privateNotes:n.ComplianceFormFeatureDisplay.EDITABLE,ratings:n.ComplianceFormFeatureDisplay.NOT_AVAILABLE,documents:n.ComplianceFormFeatureDisplay.NOT_AVAILABLE,actions:[i.ComplianceFormAction.SUBMIT_PARTIAL,i.ComplianceFormAction.SAVE_DRAFT]},e.kComplianceFormRenderExternalOptions={formEditable:!0,notes:n.ComplianceFormFeatureDisplay.EDITABLE,privateNotes:n.ComplianceFormFeatureDisplay.NOT_AVAILABLE,ratings:n.ComplianceFormFeatureDisplay.NOT_AVAILABLE,documents:n.ComplianceFormFeatureDisplay.EDITABLE,actions:[i.ComplianceFormAction.SAVE_DRAFT,i.ComplianceFormAction.SUBMIT]},e.kComplianceFormRenderAllOptions={formEditable:!0,notes:n.ComplianceFormFeatureDisplay.EDITABLE,privateNotes:n.ComplianceFormFeatureDisplay.EDITABLE,ratings:n.ComplianceFormFeatureDisplay.EDITABLE,documents:n.ComplianceFormFeatureDisplay.EDITABLE,actions:[i.ComplianceFormAction.SAVE_DRAFT,i.ComplianceFormAction.SUBMIT,i.ComplianceFormAction.ACCEPT,i.ComplianceFormAction.REJECT,i.ComplianceFormAction.CANCEL]},e.kComplianceFormRenderNoneOptions={formEditable:!1,notes:n.ComplianceFormFeatureDisplay.NOT_AVAILABLE,privateNotes:n.ComplianceFormFeatureDisplay.NOT_AVAILABLE,ratings:n.ComplianceFormFeatureDisplay.NOT_AVAILABLE,documents:n.ComplianceFormFeatureDisplay.NOT_AVAILABLE,actions:[i.ComplianceFormAction.CANCEL]},e.kComplianceFormRenderReadonlyOptions={formEditable:!1,notes:n.ComplianceFormFeatureDisplay.READONLY,privateNotes:n.ComplianceFormFeatureDisplay.READONLY,ratings:n.ComplianceFormFeatureDisplay.READONLY,documents:n.ComplianceFormFeatureDisplay.READONLY,actions:[i.ComplianceFormAction.CANCEL]},e.kComplianceFormRenderScoringOptions={formEditable:!0,notes:n.ComplianceFormFeatureDisplay.EDITABLE,privateNotes:n.ComplianceFormFeatureDisplay.EDITABLE,ratings:n.ComplianceFormFeatureDisplay.EDITABLE,documents:n.ComplianceFormFeatureDisplay.NOT_AVAILABLE,actions:[i.ComplianceFormAction.SAVE_DRAFT,i.ComplianceFormAction.SUBMIT]}}),define("compliance/form/render/ComplianceFormRenderExplanation",["require","exports","core/util/Logger","i18n"],function(t,e,n,a){"use strict";function r(t){return t||a.I18N.t("compliance:forms.render.unspecifiedError")}function o(t){return t||a.I18N.t("compliance:forms.render.unspecifiedWarning")}Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormRenderExplanation=void 0;var i=function(){function t(){this.warnings=[],this.errors=[]}return Object.defineProperty(t.prototype,"hasWarnings",{get:function(){return 0<this.warnings.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasErrors",{get:function(){return 0<this.errors.length},enumerable:!1,configurable:!0}),t.prototype.forElement=function(t){var e=t.id,n=function(t){return a.I18N.t("compliance:forms.render.elementError",{id:e,message:t})},i=this;return{logWarning:function(t){i.logWarning(n(o(t)))},logError:function(t){i.logError(n(r(t)))},asQuery:function(){return{error:function(t){i.logError(a.I18N.t("compliance:forms.render.elementQueryError",{id:e,message:r(t)}))}}}}},t.prototype.listErrors=function(){return this.errors},t.prototype.listWarnings=function(){return this.warnings},t.prototype.logError=function(t){this.errors.push(r(t)),n.Logger.error(t)},t.prototype.logWarning=function(t){this.warnings.push(o(t))},t}();e.ComplianceFormRenderExplanation=i}),define("core/form/FormBuilderSize",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FormBuilderSize=void 0;var r,o;(r=e.FormBuilderSize||(e.FormBuilderSize={}))[r.FULL=1]="FULL",r[r.HALF_WIDTH=2]="HALF_WIDTH",(o=e.FormBuilderSize||(e.FormBuilderSize={})).getName=n.EnumUtils.createNameFn("site:FormBuilderSize",o),o.widget=i.EnumWidgetUtils.createDropList("DomosFormBuilderSize",o,!1),o.column=a.EnumColumnUtils.createFactory(o,o.widget)}),define("compliance/form/render/ComplianceFormRenderLayout",["require","exports","core/form/FormBuilderSize"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormRenderLayout=void 0;var i=function(){function t(t){this.$table=$("<table>").addClass("frmb-render-layout").appendTo(t),this.$tr=void 0}return t.prototype.destroy=function(){kendo.destroy(this.$table),this.$table.remove()},t.prototype.next=function(t){switch(t){case n.FormBuilderSize.HALF_WIDTH:return this.nextHalf();case n.FormBuilderSize.FULL:default:return this.nextFull()}},t.prototype.bind=function(t){kendo.bind(this.$table,t)},t.prototype.nextHalf=function(){if(this.$tr){var t=$("<td>").appendTo(this.$tr);return this.$tr=void 0,t}return this.$tr=$("<tr>").appendTo(this.$table),$("<td>").appendTo(this.$tr)},t.prototype.nextFull=function(){return this.$tr&&this.nextHalf(),$('<td colspan="2">').appendTo($("<tr>").appendTo(this.$table))},t}();e.ComplianceFormRenderLayout=i}),define("compliance/data/ComplianceFormDataType",["require","exports","lodash","core/util/ObservableUtils","core/util/DateUtils"],function(t,e,i,n,a){"use strict";var r,o;function d(t){return i.isNil(t)?"":i.isString(t)?t:i.isArray(t)?d(t[0]):i.isDate(t)?a.DateUtils.toISODateOnly(t):""+t}function l(t){if(i.isNil(t))return null;if(i.isNumber(t))return t;var e=i.isArray(t)?t[0]:t;if(!e)return null;var n=parseFloat(e);return isNaN(n)?null:n}function s(t){return i.isNil(t)?[]:i.isArray(t)?t:[""+t]}Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormDataType=void 0,(r=e.ComplianceFormDataType||(e.ComplianceFormDataType={}))[r.NONE=0]="NONE",r[r.STRING=1]="STRING",r[r.NUMBER=2]="NUMBER",r[r.STRING_ARRAY=3]="STRING_ARRAY",(o=e.ComplianceFormDataType||(e.ComplianceFormDataType={})).getValue=function(t,e){switch(e=n.ObservableUtils.unpack(e),t){case o.STRING:return d(e);case o.NUMBER:return l(e);case o.STRING_ARRAY:return s(e);case o.NONE:default:return null}},o.isEmpty=function(t,e){if(i.isNil(e))return!1;switch(t){case o.STRING:return!d(e);case o.NUMBER:return i.isNil(l(e));case o.STRING_ARRAY:return s(e).length<=0;case o.NONE:default:return!0}}}),define("compliance/data/ComplianceFormElementType",["require","exports","./ComplianceFormDataType","core/util/EnumUtils"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormElementType=void 0;var a,r;(a=e.ComplianceFormElementType||(e.ComplianceFormElementType={}))[a.TEXT=1]="TEXT",a[a.TEXTAREA=2]="TEXTAREA",a[a.RADIO=3]="RADIO",a[a.CHECKBOX=4]="CHECKBOX",a[a.NUMBER=5]="NUMBER",a[a.HEADER=6]="HEADER",a[a.SELECT=7]="SELECT",a[a.MULTI_SELECT=8]="MULTI_SELECT",a[a.BLANK=9]="BLANK",a[a.PARAGRAPH=10]="PARAGRAPH",a[a.LIKERT_RADIO=11]="LIKERT_RADIO",a[a.LIKERT_CHECKBOX=12]="LIKERT_CHECKBOX",a[a.FORM=13]="FORM",(r=e.ComplianceFormElementType||(e.ComplianceFormElementType={})).getName=i.EnumUtils.createNameFn("compliance:ComplianceFormElementType",r),r.getStringId=function(t){return r[t].toLowerCase()||"unknown"},r.useLabel=function(t){switch(t){case r.HEADER:case r.PARAGRAPH:case r.BLANK:return!1;default:return!0}},r.isQuestion=function(t){switch(t){case r.HEADER:case r.PARAGRAPH:case r.BLANK:case r.FORM:return!1;default:return!0}},r.useRadio=function(t){switch(t){case r.RADIO:case r.SELECT:case r.LIKERT_RADIO:return!0;default:return!1}},r.hasPlaceholder=function(t){switch(t){case r.TEXT:case r.TEXTAREA:case r.SELECT:case r.MULTI_SELECT:case r.NUMBER:return!0;default:return!1}},r.isLikert=function(t){switch(t){case r.LIKERT_CHECKBOX:case r.LIKERT_RADIO:return!0;default:return!1}},r.hasOptions=function(t){switch(t){case r.RADIO:case r.CHECKBOX:case r.SELECT:case r.MULTI_SELECT:case r.LIKERT_CHECKBOX:case r.LIKERT_RADIO:return!0;default:return!1}},r.getDataType=function(t){switch(t){case r.TEXT:case r.TEXTAREA:case r.RADIO:case r.SELECT:case r.LIKERT_RADIO:return n.ComplianceFormDataType.STRING;case r.CHECKBOX:case r.MULTI_SELECT:case r.LIKERT_CHECKBOX:return n.ComplianceFormDataType.STRING_ARRAY;case r.NUMBER:return n.ComplianceFormDataType.NUMBER;default:return n.ComplianceFormDataType.NONE}},r.getValue=function(t,e){return n.ComplianceFormDataType.getValue(r.getDataType(t),e)},r.isEmpty=function(t,e){return n.ComplianceFormDataType.isEmpty(r.getDataType(t),e)}}),define("core/query/QueryBuilderUtils",["require","exports","lodash"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryBuilderUtils=void 0;var i=function(){function t(){}return t.isGroup=function(t){return n.has(t,"condition")},t}();e.QueryBuilderUtils=i}),define("compliance/repository/ComplianceFormRepository",["require","exports","tslib","core/web/WebHttp","core/web/WebStorages","core/repository/RepositoryImpl"],function(t,e,n,i,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormRepository=e.ComplianceFormRepositoryImpl=void 0;var o=a.WebStorages.tenantLocalStorage();function d(t){return"form_draft_"+t}var l=function(t){function e(){return t.call(this,"compliance/form")||this}return n.__extends(e,t),e.prototype.destroy=function(t,e){var n=t.id;return i.WebHttp.destroyJson("compliance/form.json",{id:n},e)},e.prototype.saveDraft=function(t,e){o.setObject(d(t),e)},e.prototype.clearDraft=function(t){o.removeItem(d(t))},e.prototype.loadDraft=function(t){return o.getObject(d(t))||void 0},e}(r.RepositoryImpl);e.ComplianceFormRepositoryImpl=l,e.ComplianceFormRepository=new l}),define("compliance/form/common/ComplianceFormUtils",["require","exports","tslib","lodash","compliance/data/ComplianceFormElementType","compliance/data/ComplianceFormRating","core/query/QueryBuilderUtils","compliance/repository/ComplianceFormRepository"],function(t,e,o,l,s,a,d,u){"use strict";function c(t,e){return t+"_"+e}function p(t,e){if(d.QueryBuilderUtils.isGroup(e))for(var n=0,i=e.rules;n<i.length;n++){p(t,i[n])}else a=t,(r=e).id=c(a,r.id),r.field=c(a,r.field);var a,r}function m(t,e){if(t)for(var n=0,i=e;n<i.length;n++){var a=i[n];a.id=c(t,a.id);var r=a.activeQuery;if(r)for(var o=0,d=r.rules;o<d.length;o++){p(t,d[o])}}}Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormUtils=void 0;var n=function(){function d(){}return d.bindingId=function(t){return t.id},d.likertBindingId=function(t,e){return t.id+"$"+e.id},d.inactiveBindingId=function(t){return"$inactive__"+t.id},d.requiredError=function(t){return"$rqe__"+t.id},d.note=function(t){return"$n__"+t.id},d.privateNote=function(t){return"$pn__"+t.id},d.document=function(t){return"$doc__"+t.id},d.documentCount=function(t){return"$docnt__"+t.id},d.formRating=function(){return"$fr"},d.formRatingLabel=function(){return"$fr_lbl"},d.rating=function(t){return"$r__"+t.id},d.ratingLabel=function(t){return"$r_lbl__"+t.id},d.ratingRequiredError=function(t){return"$r_rqe__"+t.id},d.getBindings=function(t){var e=t.type;if(!s.ComplianceFormElementType.isQuestion(e))return[];if(!s.ComplianceFormElementType.isLikert(e))return[d.bindingId(t)];var n=t;return l.map(n.questions,function(t){return d.likertBindingId(n,t)})},d.isAnswered=function(t,e){for(var n=t.required,i=!1,a=0,r=d.getBindings(t);a<r.length;a++){var o=e[r[a]];if(d.isAnswerCorrect(t,o))i=!0;else if(n)return!1}return i},d.fillModel=function(t,e,n){for(var i=0,a=d.getBindings(e);i<a.length;i++){var r=a[i],o=n[r];l.isUndefined(o)&&(o=d.getDefaultValue(e)),t[r]=s.ComplianceFormElementType.getValue(e.type,o)}},d.getDefaultRating=function(e,n){var t=d.getBindings(e),i=l.chain(t).map(function(t){return n[t]}).map(function(t){return d.getDefaultRatingNumberForAnswer(e,t)}).compact().mean().value();return isNaN(i)?null:a.ComplianceFormRating.getRatingEnum(i)},d.getOptions=function(t){return s.ComplianceFormElementType.hasOptions(t.type)?t.options:[]},d.copyFormElements=function(i,a,r){return o.__awaiter(this,void 0,void 0,function(){var e,n;return o.__generator(this,function(t){switch(t.label){case 0:return[4,u.ComplianceFormRepository.fetch(i,r)];case 1:return e=t.sent(),n=e.elements,m(a,n),[2,n]}})})},d.prefixElements=function(t,e){m(t,e)},d.isAnswerCorrect=function(t,e){var n=d.getOptions(t);if(0<n.length)return s.ComplianceFormElementType.useRadio(t.type)?l.isString(e)&&!!l.find(n,function(t){return t.id===e}):l.isArray(e)&&0<e.length&&l.difference(e,l.map(n,function(t){return t.id})).length<=0;switch(t.type){case s.ComplianceFormElementType.NUMBER:return l.isNumber(e);case s.ComplianceFormElementType.TEXT:case s.ComplianceFormElementType.TEXTAREA:return l.isString(e)&&!!e.trim();default:return!1}},d.getDefaultRatingNumberForAnswer=function(t,e){if(!d.isAnswerCorrect(t,e))return null;var n=d.getOptions(t);if(0<n.length){if(s.ComplianceFormElementType.useRadio(t.type)){var i=l.find(n,function(t){return t.id===e});return i?i.defaultRating:null}var a=l.chain(n).intersectionWith(e,function(t,e){return t.id===e}).map(function(t){return t.defaultRating}).compact().value();return 0<a.length?l.mean(a):null}switch(t.type){case s.ComplianceFormElementType.TEXT:case s.ComplianceFormElementType.TEXTAREA:var r=t;return e.trim()?r.defaultRatingIfNotEmpty:r.defaultRatingIfEmpty;default:return null}},d.getDefaultValue=function(t){switch(t.type){case s.ComplianceFormElementType.TEXT:case s.ComplianceFormElementType.TEXTAREA:case s.ComplianceFormElementType.NUMBER:return t.defaultValue;case s.ComplianceFormElementType.RADIO:case s.ComplianceFormElementType.SELECT:var e=l.find(d.getOptions(t),function(t){return t.selected});return e?e.id:null;case s.ComplianceFormElementType.CHECKBOX:case s.ComplianceFormElementType.MULTI_SELECT:return l.chain(d.getOptions(t)).filter(function(t){return t.selected}).map(function(t){return t.id}).value();default:return null}},d}();e.ComplianceFormUtils=n}),define("compliance/form/render/ComplianceFormRenderModelAnswers",["require","exports","lodash","compliance/form/common/ComplianceFormUtils","core/util/ObservableUtils","compliance/data/ComplianceFormElementType"],function(t,e,c,p,m,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormRenderModelAnswers=void 0;var n=function(){function t(){}return t.createRawModel=function(t,e,n){for(var i,a,r,o=(i=e,a=n,r=c.chain(i).sortBy(function(t){return t.date}).map(function(t){return t.answer}).compact().reduceRight(function(t,e){return c.defaults(t,e)},{}).value(),a&&a.answer&&c.assign(r,a.answer),r),d={},l=0,s=t;l<s.length;l++){var u=s[l];p.ComplianceFormUtils.fillModel(d,u.element,o)}return d},t.toHistory=function(t,e,n){if(t){for(var i={},a=0,r=n;a<r.length;a++)for(var o=r[a].element,d=0,l=p.ComplianceFormUtils.getBindings(o);d<l.length;d++){var s=l[d],u=m.ObservableUtils.getUnpacked(e,s);i[s]=f.ComplianceFormElementType.getValue(o.type,u)}return i}},t}();e.ComplianceFormRenderModelAnswers=n}),define("compliance/form/render/ComplianceFormRenderModelNotes",["require","exports","lodash","compliance/form/common/ComplianceFormUtils","compliance/data/ComplianceFormFeatureDisplay"],function(t,e,r,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormRenderModelNotes=void 0;var i=function(){function t(t,e,n){var i,a;this.option=e,this.privateNotes=n,this.key=n?"privateNotes":"notes",this.notes=e?(i=t,a=this.key,r.chain(i).flatMap(function(t){var e=t[a]||{},n=t.date,i=t.user;return r.map(e,function(t,e){return{id:e,date:n,user:i,note:t}})}).groupBy(function(t){return t.id}).value()):{}}return t.prototype.listNotes=function(t){return this.notes[t.id]||[]},t.prototype.fillModel=function(t,e,n){if(this.option===s.ComplianceFormFeatureDisplay.EDITABLE)for(var i=0,a=e;i<a.length;i++){var r=a[i],o=r.element,d="";if(n&&n[this.key]){var l=n[this.key];l&&(d=l[o.id])}t[this.binding(r.element)]=d||""}},t.prototype.toHistory=function(t,e){if(this.option!==s.ComplianceFormFeatureDisplay.EDITABLE)return{};for(var n={},i=0,a=e;i<a.length;i++){var r=a[i].element,o=t.get(this.binding(r));o&&(n[r.id]=o)}return n},t.prototype.binding=function(t){return this.privateNotes?n.ComplianceFormUtils.privateNote(t):n.ComplianceFormUtils.note(t)},t}();e.ComplianceFormRenderModelNotes=i}),define("compliance/form/render/ComplianceFormRenderModelRatings",["require","exports","lodash","compliance/form/common/ComplianceFormUtils","compliance/data/ComplianceFormRating","compliance/data/ComplianceFormFeatureDisplay"],function(t,e,o,d,r,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormRenderModelRatings=void 0;var n=function(){function t(t,e,n){var i,a,r;(this.option=n)!==l.ComplianceFormFeatureDisplay.NOT_AVAILABLE?this.ratings=(i=t,a=e,r=o.chain(i).sortBy(function(t){return t.date}).map(function(t){return t.ratings}).compact().reduceRight(function(t,e){return o.defaults(t,e)},{}).value(),a&&a.ratings&&o.assign(r,a.ratings),r):this.ratings={}}return t.prototype.fillModel=function(t,e){for(var n=0,i=e;n<i.length;n++){var a=i[n];this.fillModelForElement(t,a)}this.option!==l.ComplianceFormFeatureDisplay.NOT_AVAILABLE&&(t[d.ComplianceFormUtils.formRatingLabel()]=function(){var t=this[d.ComplianceFormUtils.formRating()];return r.ComplianceFormRating.getName(t)||"N/A"})},t.prototype.toHistory=function(t,e){if(this.option===l.ComplianceFormFeatureDisplay.EDITABLE){for(var n={},i=0,a=e;i<a.length;i++){var r=a[i].element,o=t.get(d.ComplianceFormUtils.rating(r));n[r.id]=o}return n}},t.prototype.fillModelForElement=function(t,e){if(this.option!==l.ComplianceFormFeatureDisplay.NOT_AVAILABLE){var n=e.element,i=d.ComplianceFormUtils.rating(n),a=this.ratings[n.id];a||(a=d.ComplianceFormUtils.getDefaultRating(n,t)),t[i]=a,t[d.ComplianceFormUtils.ratingLabel(n)]=function(){var t=this.get(i);return r.ComplianceFormRating.getName(t)||"N/A"}}},t}();e.ComplianceFormRenderModelRatings=n}),define("compliance/form/render/ComplianceFormRenderModelDocuments",["require","exports","lodash","compliance/data/ComplianceFormFeatureDisplay","../common/ComplianceFormUtils","core/util/ObservableUtils"],function(t,e,o,d,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormRenderModelDocuments=void 0;var n=function(){function t(t,e,n){var i,a,r;(this.option=n)!==d.ComplianceFormFeatureDisplay.NOT_AVAILABLE?this.documents=(i=t,a=e,r=o.chain(i).sortBy(function(t){return t.date}).map(function(t){return t.documents}).compact().reduceRight(function(t,e){return o.defaults(t,e)},{}).value(),a&&a.documents&&o.assign(r,a.documents),r):this.documents={}}return t.prototype.fillModel=function(a,t){if(this.option!==d.ComplianceFormFeatureDisplay.NOT_AVAILABLE)for(var e=function(t){var e=t.element,n=l.ComplianceFormUtils.document(e),i=r.documents[e.id]||[];a[n]=i,a[l.ComplianceFormUtils.documentCount(e)]=function(){var t=this.get(n);if(!t)return"0";var e=t.length;return 9<e?"9+":""+e}},r=this,n=0,i=t;n<i.length;n++){e(i[n])}},t.prototype.toHistory=function(t,e){if(this.option!==d.ComplianceFormFeatureDisplay.EDITABLE)return{};for(var n={},i=0,a=e;i<a.length;i++){var r=a[i].element,o=t.get(l.ComplianceFormUtils.document(r));o&&(n[r.id]=s.ObservableUtils.unpack(o))}return n},t}();e.ComplianceFormRenderModelDocuments=n}),define("core/query/QueryCompiler",["require","exports","lodash","./QueryBuilderRules","core/util/Logger","./QueryBuilderUtils","core/util/ObservableUtils","i18n"],function(t,n,r,e,a,o,d,l){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.QueryCompiler=n.NoCheckQueryCompilerValidation=n.LogQueryCompilerExplanation=void 0;var s=function(){return!0},u=function(){return!1},c=function(t){return r.isNil(t)||r.isArray(t)&&t.length<=0},p=function(t){return r.isString(t)&&t.trim().length<=0};function m(t){return r.castArray(t)}function f(e){return function(t){return!e.call(null,t)}}function b(t){return r.isString(t)?t.trim().toLocaleUpperCase():r.isArray(t)?r.chain(t).map(b).sort().value():t}n.LogQueryCompilerExplanation={error:function(t){a.Logger.error(t)}},n.NoCheckQueryCompilerValidation={ruleExists:function(){return!0},optionExists:function(){return!0}};var i=function(){function i(t,e){this.validation=t||n.NoCheckQueryCompilerValidation,this.explanation=e||n.LogQueryCompilerExplanation}return i.compile=function(t,e,n){return t?new i(e,n).compile(t):s},i.prototype.compile=function(t){t=d.ObservableUtils.unpack(t);try{return this.compileGroup(t)}catch(t){return this.explanation.error(t),u}},i.prototype.compileGroupOrRule=function(t){return o.QueryBuilderUtils.isGroup(t)?this.compileGroup(t):this.compileRule(t)},i.prototype.compileGroup=function(t){var e=this;if(t.rules.length<=0)return s;if(1===t.rules.length)return this.compileGroupOrRule(t.rules[0]);var n=r.map(t.rules,function(t){return e.compileGroupOrRule(t)});switch(t.condition){case"AND":return function(e){return r.every(n,function(t){return t.call(null,e)})};case"OR":default:return function(e){return!!r.find(n,function(t){return t.call(null,e)})}}},i.prototype.compileRule=function(t){return this.validateRule(t),e=t,n=this.compileRuleValue(t),i=e.id,function(t){try{return n(t.call(null,i))}catch(t){return a.Logger.error(t),!1}};var e,n,i},i.prototype.compileRuleValue=function(t){switch(t.operator){case e.QueryBuilderOperator.IS_NULL:return c;case e.QueryBuilderOperator.IS_NOT_NULL:return f(c);case e.QueryBuilderOperator.EQUAL:return this.compileEqual(t);case e.QueryBuilderOperator.NOT_EQUAL:return f(this.compileEqual(t));case e.QueryBuilderOperator.CONTAINS:return this.compileString(t,function(t,e){return t.includes(e)});case e.QueryBuilderOperator.NOT_CONTAINS:return this.compileString(t,function(t,e){return!t.includes(e)});case e.QueryBuilderOperator.BEGINS_WITH:return this.compileString(t,function(t,e){return t.startsWith(e)});case e.QueryBuilderOperator.NOT_BEGINS_WITH:return this.compileString(t,function(t,e){return!t.startsWith(e)});case e.QueryBuilderOperator.ENDS_WITH:return this.compileString(t,function(t,e){return t.endsWith(e)});case e.QueryBuilderOperator.NOT_ENDS_WITH:return this.compileString(t,function(t,e){return!t.endsWith(e)});case e.QueryBuilderOperator.IS_EMPTY:return p;case e.QueryBuilderOperator.IS_NOT_EMPTY:return f(p);case e.QueryBuilderOperator.LESS:return this.compileNumber(t,function(t,e){return t<e});case e.QueryBuilderOperator.LESS_OR_EQUAL:return this.compileNumber(t,function(t,e){return t<=e});case e.QueryBuilderOperator.GREATER:return this.compileNumber(t,function(t,e){return e<t});case e.QueryBuilderOperator.GREATER_OR_EQUAL:return this.compileNumber(t,function(t,e){return e<=t});case e.QueryBuilderOperator.IN:return this.compileIn(t);case e.QueryBuilderOperator.NOT_IN:return f(this.compileIn(t));case e.QueryBuilderOperator.BETWEEN:return this.compileBetween(t);case e.QueryBuilderOperator.NOT_BETWEEN:return f(this.compileBetween(t));case e.QueryBuilderOperator.SET_CONTAINS:return this.compileSetContains(t);case e.QueryBuilderOperator.SET_NOT_CONTAINS:return f(this.compileSetContains(t));default:return this.explanation.error(l.I18N.t("site:queryBuilder.unsupportedOperator",t)),u}},i.prototype.compileEqual=function(t){var e=b(t.value);if(r.isString(e))return this.compileString(t,function(t,e){return 0===t.localeCompare(e)});var n=m(e);return function(t){return r.isEqual(m(b(t)),n)}},i.prototype.compileSetContains=function(t){var e=m(b(t.value));return function(t){return r.difference(e,m(b(t))).length<=0}},i.prototype.compileIn=function(t){if(!r.isArray(t.value))return this.compileEqual(t);var e=b(t.value);return function(t){return t=m(t),r.difference(b(t),e).length<=0}},i.prototype.compileString=function(t,e){if(!r.isString(t.value))return this.explanation.error(l.I18N.t("site:queryBuilder.stringOnlyOperator",t)),u;var n=b(t.value);return function(t){return r.isString(t)&&e(b(t),n)}},i.prototype.compileNumber=function(t,e){if(!r.isNumber(t.value))return this.explanation.error(l.I18N.t("site:queryBuilder.numberOnlyOperator",t)),u;var n=b(t.value);return function(t){return r.isNumber(t)&&e(b(t),n)}},i.prototype.compileBetween=function(t){if(!r.isArray(t.value))return this.explanation.error(l.I18N.t("site:queryBuilder.numberArrayOnlyOperator",t)),u;var e=r.chain(t.value).filter(r.isNumber).sortBy().value();if(e.length<2)return this.explanation.error(l.I18N.t("site:queryBuilder.numberArrayOnlyOperator",t)),u;var n=b(e[0]),i=b(e[e.length-1]);return function(t){return r.isNumber(t)&&(e=b(t),n<=e&&e<=i);var e}},i.prototype.validateRule=function(t){if(this.validation.ruleExists(t.id))for(var e=t.value,n=0,i=r.isArray(e)?e:[e];n<i.length;n++){var a=i[n];this.validation.optionExists(t.id,a)||this.explanation.error(l.I18N.t("site:queryBuilder.unknownOption",{id:t.id,option:e}))}else this.explanation.error(l.I18N.t("site:queryBuilder.unknownRule",t))},i}();n.QueryCompiler=i}),define("compliance/form/render/ComplianceFormRenderModelDynamic",["require","exports","lodash","core/query/QueryCompiler","../common/ComplianceFormUtils","compliance/data/ComplianceFormFeatureDisplay","compliance/data/ComplianceFormRating"],function(t,e,b,p,v,y,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormRenderModelDynamic=void 0;var m="values";var n=function(){function t(t,e){this.rElements=t,this.options=e;for(var n,i,a,r,o,d=(n=t,i=b.chain(n).map(function(t){return t.control.filterRule(t.element)}).flatten().keyBy(function(t){return t.id}).value(),{ruleExists:function(t){return!!i[t]},optionExists:function(t,e){var n=i[t];return!(!n||b.has(n,m)&&!b.find(n.values,function(t){return b.has(t,e)}))}}),l={},s=0,u=t;s<u.length;s++){var c=u[s];l[c.element.id]=(r=d,void 0,o=(a=c).element.activeQuery,p.QueryCompiler.compile(o,r,a.explanation.asQuery()))}this.predicates=l}return t.prototype.fillDynamicValues=function(e,t){for(var n=this.options.ratings!==y.ComplianceFormFeatureDisplay.NOT_AVAILABLE,i=this.options.ratings===y.ComplianceFormFeatureDisplay.EDITABLE,a=[],r=0,o=this.rElements;r<o.length;r++){var d=o[r].element,l=(this.predicates[d.id]||function(){return!0}).call(null,function(t){return e[t]}),s=v.ComplianceFormUtils.isAnswered(d,e);if(t[v.ComplianceFormUtils.inactiveBindingId(d)]=!l,t[v.ComplianceFormUtils.requiredError(d)]=d.required&&l&&!s,n){var u=v.ComplianceFormUtils.rating(d),c=v.ComplianceFormUtils.ratingRequiredError(d);if(i)if(e[u])t[c]=!1;else{var p=!l||d.optionalRating||!d.required&&!s;t[c]=!p}else t[c]=!1;if(l&&(d.required||s)){var m=e[u];b.isNil(m)&&!d.optionalRating?a.push(null):a.push(m)}}}if(n){var f=b.compact(a);f.length<=0||f.length!==a.length?t[v.ComplianceFormUtils.formRating()]=null:t[v.ComplianceFormUtils.formRating()]=h.ComplianceFormRating.getRatingEnum(b.mean(f))}},t}();e.ComplianceFormRenderModelDynamic=n}),define("compliance/form/render/ComplianceFormRenderModel",["require","exports","./ComplianceFormRenderModelAnswers","./ComplianceFormRenderModelNotes","./ComplianceFormRenderModelRatings","compliance/form/common/ComplianceFormUtils","./ComplianceFormRenderModelDocuments","./ComplianceFormRenderModelDynamic","core/util/ObservableUtils"],function(t,e,p,m,f,o,b,v,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormRenderModel=void 0;var n=function(){function t(t,e,n,i){this.rElements=t,this.options=i,this.runId=e.run;var a=e.histories,r=p.ComplianceFormRenderModelAnswers.createRawModel(t,a,n),o=new f.ComplianceFormRenderModelRatings(a,n,i.ratings),d=new v.ComplianceFormRenderModelDynamic(t,i),l=new m.ComplianceFormRenderModelNotes(a,i.notes,!1),s=new m.ComplianceFormRenderModelNotes(a,i.privateNotes,!0),u=new b.ComplianceFormRenderModelDocuments(a,n,i.documents);this.documents=new kendo.data.ObservableArray(e.documents),o.fillModel(r,t),l.fillModel(r,t,n),s.fillModel(r,t,n),u.fillModel(r,t),d.fillDynamicValues(r,r),r.isModified=!1,this.model=kendo.observable(r);var c=!1;this.model.bind("change",function(t){if(!c&&t&&t.sender&&"isModified"!==t.field){c=!0;try{t.sender.set("isModified",!0);var e=y.ObservableUtils.unpack(t.sender),n={};d.fillDynamicValues(e,n),y.ObservableUtils.update(t.sender,n)}finally{c=!1}}}),this.modelNotes=l,this.modelPrivateNotes=s,this.modelRatings=o,this.modelDocuments=u}return t.prototype.kendo=function(){return this.model},Object.defineProperty(t.prototype,"isModified",{get:function(){return!!this.model.get("isModified")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValid",{get:function(){for(var t=0,e=this.rElements;t<e.length;t++){var n=e[t],i=o.ComplianceFormUtils.requiredError(n.element),a=o.ComplianceFormUtils.ratingRequiredError(n.element),r=this.model;if(r[i]||r[a])return!1}return!0},enumerable:!1,configurable:!0}),t.prototype.isInactive=function(t){var e=o.ComplianceFormUtils.inactiveBindingId(t);return this.model[e]},t.prototype.listNotes=function(t){return this.modelNotes.listNotes(t)},t.prototype.listPrivateNotes=function(t){return this.modelPrivateNotes.listNotes(t)},t.prototype.toHistory=function(){return{answer:p.ComplianceFormRenderModelAnswers.toHistory(this.options.formEditable,this.model,this.rElements),notes:this.modelNotes.toHistory(this.model,this.rElements),privateNotes:this.modelPrivateNotes.toHistory(this.model,this.rElements),ratings:this.modelRatings.toHistory(this.model,this.rElements),documents:this.modelDocuments.toHistory(this.model,this.rElements)}},t}();e.ComplianceFormRenderModel=n}),define("compliance/form/render/ComplianceFormRenderHeaderRating",["require","exports","compliance/form/common/ComplianceFormUtils","compliance/data/ComplianceFormRating","compliance/data/ComplianceFormFeatureDisplay","i18n"],function(t,e,o,r,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormRenderHeaderRating=void 0;var n=function(){function t(t){this.display=t}return t.prototype.render=function(t,e){if(this.display===d.ComplianceFormFeatureDisplay.NOT_AVAILABLE)return null;var n=o.ComplianceFormUtils.inactiveBindingId(e.element),i=$("<div>").addClass("frmb-render-rating-cont").appendTo(t).append($("<span>").attr("data-bind","css:{k-state-disabled:"+n+"}").text(l.I18N.t("compliance:forms.render.rating")));if(this.display===d.ComplianceFormFeatureDisplay.READONLY)return this.renderReadonly(i,e),null;var a=this.renderNormal(i,e);return function(t){r.ComplianceFormRating.widget(a),kendo.bind(a,t.kendo())}},t.prototype.renderReadonly=function(t,e){var n=o.ComplianceFormUtils.ratingLabel(e.element),i=o.ComplianceFormUtils.inactiveBindingId(e.element);$("<span>").addClass("frmb-render-rating").attr("data-bind","text:"+n+",css:{k-state-disabled:"+i+"}").appendTo(t)},t.prototype.renderNormal=function(t,e){var n=o.ComplianceFormUtils.rating(e.element),i=o.ComplianceFormUtils.inactiveBindingId(e.element),a=$("<input>").addClass("frmb-render-rating").addClass("plop").attr("data-bind","value:"+n+",disabled:"+i).appendTo(t),r=o.ComplianceFormUtils.ratingRequiredError(e.element);return $("<span>").addClass("frmb-render-rating-required-error").attr("data-bind","visible:"+r).appendTo(t).append($("<span>").addClass("k-icon k-i-close-circle")).append($("<span>").html("&nbsp;"+l.I18N.t("compliance:forms.render.ratingRequiredError"))),a},t}();e.ComplianceFormRenderHeaderRating=n}),define("compliance/form/render/ComplianceFormRenderHeaderNotes",["require","exports","lodash","compliance/form/common/ComplianceFormUtils","compliance/data/ComplianceFormFeatureDisplay","i18n"],function(t,e,y,h,g,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormRenderHeaderNotes=void 0;var n=function(){function t(t,e,n){this.model=t,this.display=e,this.privateNotes=n}return t.prototype.render=function(t,e,n){var i=this;if(this.display!==g.ComplianceFormFeatureDisplay.NOT_AVAILABLE){var a=n.element,r=y.chain(this.list(n)).sortBy(function(t){return t.date}).map(function(t){return i.noteToString(t)}).value(),o=r.length<=0;if(!o||this.display!==g.ComplianceFormFeatureDisplay.READONLY){var d=h.ComplianceFormUtils.inactiveBindingId(a),l=$("<div>").appendTo(e),s=$("<span>").addClass("frmb-render-question-button").addClass("frmb-note-badge").appendTo(t).append($("<a>").addClass("k-icon").addClass(this.icon()));o?(s.attr("data-bind","invisible:"+d),l.attr("data-bind","invisible:"+d)):9<r.length?s.attr("data-badge","9+"):s.attr("data-badge",r.length);var u=$("<div>").addClass("frmb-render-notes-cont").addClass("k-content").appendTo(l);if(!o)for(var c=$("<ol>").attr("data-bind","css:{k-state-disabled:"+d+"}").appendTo(u),p=0,m=r;p<m.length;p++){var f=m[p];$("<li>").text(f).appendTo(c)}var b=this.privateNotes?T.I18N.t("compliance:forms.render.privateNotes"):T.I18N.t("compliance:forms.render.notes");if(o||(b+="\r\n"+r.join("\r\n")),s.attr("title",b),s.click(function(){return u.slideToggle()}),this.display===g.ComplianceFormFeatureDisplay.EDITABLE){var v=this.privateNotes?h.ComplianceFormUtils.privateNote(a):h.ComplianceFormUtils.note(a);$('<textarea rows="2">').addClass("k-textbox").attr("placeholder",this.privateNotes?T.I18N.t("compliance:forms.render.privateNote"):T.I18N.t("compliance:forms.render.note")).attr("data-bind","value:"+v+",invisible:"+d).appendTo(u)}}}},t.prototype.list=function(t){return this.privateNotes?this.model.listPrivateNotes(t.element):this.model.listNotes(t.element)},t.prototype.noteToString=function(t){return"["+kendo.toString(t.date,"d")+" "+t.user+"] "+t.note},t.prototype.icon=function(){return this.privateNotes?"k-i-brush":"k-i-edit"},t}();e.ComplianceFormRenderHeaderNotes=n}),define("compliance/form/render/ComplianceFormRenderHeaderError",["require","exports","compliance/form/common/ComplianceFormUtils","i18n"],function(t,e,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormRenderHeaderError=void 0;var n=function(){function t(){}return t.prototype.render=function(t,e){var n=e.element,i=a.ComplianceFormUtils.requiredError(n);$("<div>").addClass("frmb-render-required-error").attr("data-bind","visible: "+i).appendTo(t).append($("<span>").addClass("k-icon k-i-close-circle")).append($("<span>").html("&nbsp;"+r.I18N.t("compliance:forms.render.requiredError")))},t}();e.ComplianceFormRenderHeaderError=n}),define("core/ui/grid/LocalTransport",["require","exports","lodash","kendo"],function(t,e,u,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalTransport=void 0;function c(t,e){var n=t._block;t._block=!0;try{e()}finally{t._block=n}}function n(t,e,n){var i,a,r,o,d=n.data,l=(a=d,r=(i=e).id,o=a[r],u.find(i.data,function(t){return t.get(r)===o}));if(l){var s=u.indexOf(e.data,l);s<0?n.error():(c(e,function(){t?e.data.splice(s,1,d):e.data.splice(s,1)}),n.success(d))}else n.error()}var i=function(){function t(){}return t.bind=function(t,e){var r={data:t,id:"id",_newId:0,_block:!1};return{create:function(t){return e=r,(i=(n=t).data)[e.id]=--e._newId,c(e,function(){return e.data.push(i)}),void n.success(i);var e,n,i},read:function(t){return function(t,e,n){var i=t.data.toJSON();if(n){for(var a=new l.data.ObservableArray([]),r=0,o=i;r<o.length;r++){var d=o[r];a.push(new n(d))}e.success(a)}else e.success(i)}(r,t,e)},update:function(t){n(!0,r,t)},destroy:function(t){n(!1,r,t)},push:function(t){return a=t,void(i=r).data.bind("change",function(t){if(!(i._block||!t.items||t.items.length<=0)&&t.action){var e=t.action,n=u.map(t.items,function(t){return t.toJSON()});"add"===e?a.pushCreate(n):"itemchange"===e?a.pushUpdate(n):"remove"===e&&a.pushDestroy(n)}});var i,a}}},t}();e.LocalTransport=i}),define("compliance/form/render/ComplianceFormRenderHeaderDocuments",["require","exports","compliance/data/ComplianceFormFeatureDisplay","core/ui/grid/LocalTransport","../common/ComplianceFormUtils","i18n"],function(t,e,s,i,u,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormRenderHeaderDocuments=void 0;var n=function(){function t(t,e){this.model=t,this.display=e;var n={transport:i.LocalTransport.bind(t.documents),schema:{model:{id:"id",fields:{id:{type:"string"},name:{type:"string"}}}},sort:{field:"name",dir:"asc"}};this.dataSource=new kendo.data.DataSource(n)}return t.prototype.render=function(t,e,n){var i=this;if(this.display!==s.ComplianceFormFeatureDisplay.NOT_AVAILABLE){var a=n.element,r=$("<div>").addClass("frmb-render-question-doc-cont").addClass("k-content").appendTo(e),o=$("<span>").addClass("frmb-render-question-button").addClass("frmb-note-badge").attr("title",c.I18N.t("compliance:forms.render.documents")).attr("data-bind","attr:{data-badge:"+u.ComplianceFormUtils.documentCount(a)+"}").appendTo(t).append($("<a>").addClass("k-icon").addClass("k-i-upload")),d=$("<div>").appendTo(r),l=!1;o.click(function(){!function(){if(!l){l=!0,d.kendoMultiSelect({dataSource:i.dataSource,placeholder:c.I18N.t("compliance:forms.render.documents"),dataTextField:"name",dataValueField:"id",valuePrimitive:!0});var t=u.ComplianceFormUtils.document(a);if(i.display===s.ComplianceFormFeatureDisplay.READONLY){d.attr("data-bind","value:"+t);var e=d.data("kendoMultiSelect");i.model.isInactive(a)?e.enable(!1):e.readonly(!0)}else{var n=u.ComplianceFormUtils.inactiveBindingId(a);d.attr("data-bind","value:"+t+",disabled:"+n)}kendo.bind(d,i.model.kendo())}}(),r.slideToggle()})}},t}();e.ComplianceFormRenderHeaderDocuments=n}),define("compliance/form/render/ComplianceFormRenderHeader",["require","exports","tslib","lodash","./ComplianceFormRenderHeaderRating","compliance/data/ComplianceFormElementType","compliance/form/common/ComplianceFormUtils","./ComplianceFormRenderHeaderNotes","./ComplianceFormRenderHeaderError","i18n","./ComplianceFormRenderHeaderDocuments","core/util/PromiseUtils"],function(t,e,s,u,n,l,c,i,a,p,r,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormRenderHeader=void 0;var o=function(){function t(t,e){this.options=t,this.initFunctions=[],this.error=new a.ComplianceFormRenderHeaderError,this.rating=new n.ComplianceFormRenderHeaderRating(t.ratings),this.notes=new i.ComplianceFormRenderHeaderNotes(e,t.notes,!1),this.privateNotes=new i.ComplianceFormRenderHeaderNotes(e,t.privateNotes,!0),this.documents=new r.ComplianceFormRenderHeaderDocuments(e,t.documents)}return t.prototype.render=function(t,e){var n=e.element;if(l.ComplianceFormElementType.useLabel(n.type)){var i=n.label||"";this.options.displayQuestionNumbers&&e.questionNumber&&(i=e.questionNumber+". "+i);var a=c.ComplianceFormUtils.inactiveBindingId(n),r=$("<div>").addClass("frmb-render-header").appendTo(t),o=$("<div>").appendTo(r),d=$("<span>").text(i).addClass("frmb-render-question").attr("data-bind","css:{k-state-disabled:"+a+"}").appendTo(o);n.required&&d.addClass("frmb-required").attr("title",p.I18N.t("compliance:forms.render.required")),this.initFunctions.push(this.rating.render(r,e)),this.notes.render(o,r,e),this.privateNotes.render(o,r,e),this.documents.render(o,r,e),this.error.render(r,e)}},t.prototype.postInit=function(t,e){m.PromiseUtils.consume(this.postInitAsync(t,e))},t.prototype.postInitAsync=function(d,l){return s.__awaiter(this,void 0,void 0,function(){var e,n,i,a,r,o;return s.__generator(this,function(t){switch(t.label){case 0:if(l.requested)return[2];e=u.compact(this.initFunctions),n=function(e){return s.__generator(this,function(t){switch(t.label){case 0:if(l.requested)return[2,{value:void 0}];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,m.PromiseUtils.asPromise(function(){return e(d)})];case 2:return t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return[2]}})},i=0,a=e,t.label=1;case 1:return i<a.length?(r=a[i],[5,n(r)]):[3,4];case 2:if("object"==typeof(o=t.sent()))return[2,o.value];t.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t}();e.ComplianceFormRenderHeader=o}),define("compliance/form/controls/ComplianceFormControl",["require","exports","compliance/form/common/ComplianceFormUtils","compliance/data/ComplianceFormElementType"],function(t,e,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormControl=void 0;var n=function(){function t(t){this.type=t}return Object.defineProperty(t.prototype,"name",{get:function(){return d.ComplianceFormElementType.getName(this.type)||"Unknown"},enumerable:!1,configurable:!0}),t.prototype.preview=function(t,e){var n=d.ComplianceFormElementType.useLabel(this.type);if(!n&&!e.label)return!0;var i=e,a={};a[o.ComplianceFormUtils.inactiveBindingId(i)]=!1,o.ComplianceFormUtils.fillModel(a,i,{});var r=$("<div>").appendTo(t);return this.render({$element:r,element:i,preview:!0}),kendo.bind(r,kendo.observable(a)),n},t}();e.ComplianceFormControl=n}),define("compliance/form/query/ComplianceFormQueryBuilder",["require","exports","core/query/QueryBuilder","i18n"],function(t,e,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormQueryBuilder=void 0;var u="activeQuery",n=function(){function t(t,e,n){this.$element=t,this.model=e,this.context=n,this.init()}return t.prototype.refresh=function(){this.init()},t.prototype.destroy=function(){this.builder&&this.builder.destroy(),kendo.destroy(this.$element),this.$element.empty()},t.prototype.init=function(){for(var t=this,e=this.model.get("id"),n=[],i=0,a=this.context.list();i<a.length;i++){var r=a[i];if(r.id!==e){var o=this.context.getControl(r);o&&n.push.apply(n,o.filterRule(r))}}if(this.builder&&this.builder.destroy(),n.length<=0)return this.destroy(),void this.$element.append($("<h4>").text(s.I18N.t("compliance:forms.builder.activeQueryAddMoreElements")));this.builder=l.QueryBuilder.init(this.$element,n);var d=this.model.get(u);this.builder.setRules(d?d.toJSON():void 0),this.builder.event.register(function(){t.builder&&t.model.set(u,t.builder.getRules())})},t}();e.ComplianceFormQueryBuilder=n}),define("compliance/form/controls/ComplianceFormFilterControl",["require","exports","tslib","./ComplianceFormControl","../query/ComplianceFormQueryBuilder","i18n"],function(t,e,n,i,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormFilterControl=void 0;var a=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.prototype.destroyEdit=function(){this.builder&&this.builder.destroy(),this.builder=void 0},t.prototype.edit=function(t,n,i){var a=this,e=this.editHtml(),r={model:n,init:function(t){var e=t.sender.element;d.I18N.localize(e),a.initEdit(e,n),a.builder=new o.ComplianceFormQueryBuilder(e.find(".cp-frm-query"),n,i),e.find(".cp-frm-query-refresh").click(function(){a.builder&&a.builder.refresh()})}};new kendo.View(e,r).render(t)},t.prototype.initEdit=function(t,e){},t}(i.ComplianceFormControl);e.ComplianceFormFilterControl=a}),define("compliance/data/ComplianceFormHeaderType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormHeaderType=void 0;var a,r;(a=e.ComplianceFormHeaderType||(e.ComplianceFormHeaderType={}))[a.H1=1]="H1",a[a.H2=2]="H2",a[a.H3=3]="H3",a[a.H4=4]="H4",(r=e.ComplianceFormHeaderType||(e.ComplianceFormHeaderType={})).getName=n.EnumUtils.createNameFn("domos:ComplianceFormHeaderType",r),r.widget=i.EnumWidgetUtils.createDropList("DomosComplianceFormHeaderType",r,!1,!1),r.toJQuery=function(t){var e=(r[t]||"h1").toLowerCase();return $("<"+e+">")}}),define("text!templates/compliance/form/control/header.edit.html",[],function(){return'\n<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.label"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: label"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.type"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domoscomplianceformheadertype" data-bind="value: subType"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.size"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domosformbuildersize" data-bind="value: size"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.activeQuery"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<a class="k-button cp-frm-query-refresh"><span class="k-icon k-i-refresh"></a>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan="2">\n\t\t\t\t<div class="cp-frm-query"></div>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>\n'}),define("compliance/form/controls/ComplianceFormHeaderControl",["require","exports","tslib","compliance/data/ComplianceFormElementType","core/form/FormBuilderSize","./ComplianceFormFilterControl","compliance/form/common/ComplianceFormUtils","compliance/data/ComplianceFormHeaderType","text!templates/compliance/form/control/header.edit.html","core/form/FormBuilderSize"],function(t,e,n,i,a,r,o,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormHeaderControl=void 0;var s=i.ComplianceFormElementType.HEADER,u=function(t){function e(){return t.call(this,s)||this}return n.__extends(e,t),e.prototype.filterRule=function(t){return[]},e.prototype.defaultConfiguration=function(){return{id:i.ComplianceFormElementType.getStringId(s),reuseId:"",label:"",required:!1,size:a.FormBuilderSize.FULL,activeQuery:null,optionalRating:!1,subType:d.ComplianceFormHeaderType.H1}},e.prototype.render=function(t){var e=t.element,n=o.ComplianceFormUtils.inactiveBindingId(e);d.ComplianceFormHeaderType.toJQuery(e.subType).text(e.label||"").attr("data-bind","css:{k-state-disabled:"+n+"}").appendTo(t.$element)},e.prototype.editHtml=function(){return kendo.template(l)({})},e}(r.ComplianceFormFilterControl);e.ComplianceFormHeaderControl=u}),define("text!templates/compliance/form/control/paragraph.edit.html",[],function(){return'\n<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.label"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<textarea class="k-textbox" data-bind="value: label"></textarea>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.size"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domosformbuildersize" data-bind="value: size"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.activeQuery"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<a class="k-button cp-frm-query-refresh"><span class="k-icon k-i-refresh"></a>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan="2">\n\t\t\t\t<div class="cp-frm-query"></div>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>\n'}),define("compliance/form/controls/ComplianceFormParagraphControl",["require","exports","tslib","compliance/data/ComplianceFormElementType","core/form/FormBuilderSize","./ComplianceFormFilterControl","compliance/form/common/ComplianceFormUtils","text!templates/compliance/form/control/paragraph.edit.html"],function(t,e,n,i,a,r,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormParagraphControl=void 0;var l=i.ComplianceFormElementType.PARAGRAPH,s=function(t){function e(){return t.call(this,l)||this}return n.__extends(e,t),e.prototype.filterRule=function(t){return[]},e.prototype.defaultConfiguration=function(){return{id:i.ComplianceFormElementType.getStringId(l),reuseId:"",label:"",required:!1,size:a.FormBuilderSize.FULL,activeQuery:null,optionalRating:!1}},e.prototype.render=function(t){var e=t.element,n=o.ComplianceFormUtils.inactiveBindingId(e);$("<p>").text(e.label||"").css({"white-space":"pre-line"}).attr("data-bind","css:{k-state-disabled:"+n+"}").appendTo(t.$element)},e.prototype.editHtml=function(){return kendo.template(d)({})},e}(r.ComplianceFormFilterControl);e.ComplianceFormParagraphControl=s}),define("text!templates/compliance/form/control/text.edit.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.required"></label>\n\t\t\t</td>\n\t\t\t# var uid = kendo.guid(); #\n\t\t\t<td>\n\t\t\t\t<input id="#:uid#" type="checkbox" class="k-checkbox" data-bind="checked: required"/>\n\t\t\t\t<label for="#:uid#" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.id"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: id" readonly/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.reuseId"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: reuseId"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.label"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: label"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.size"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domosformbuildersize" data-bind="value: size"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.placeholder"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: placeholder"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t#if (area) {#\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.defaultValue"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: defaultValue"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t#}else{#\n\t\t<tr>\n\t\t\t<td style="vertical-align:top">\n\t\t\t\t<label data-i18n="compliance:forms.builder.defaultValue"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<textarea type="text" class="k-textbox" data-bind="value: defaultValue"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t#}#\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.preFill"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domoslegalstringfield" data-value-primitive="true" data-bind="value: preFill"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.maxLength"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="numerictextbox" data-min="1" data-max="255" data-format="n0" data-decimals="0" data-bind="value: maxLength"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t#if(area){#\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.rows"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="numerictextbox" data-min="1" data-max="20" data-format="n0" data-decimals="0" data-bind="value: rows"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t#}#\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.optionalRating"></label>\n\t\t\t</td>\n\t\t\t# var rating_uid = kendo.guid(); #\n\t\t\t<td>\n\t\t\t\t<input id="#:rating_uid#" type="checkbox" class="k-checkbox" data-bind="checked: optionalRating"/>\n\t\t\t\t<label for="#:rating_uid#" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.ratingNotEmpty"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domoscomplianceformrating" data-bind="value: defaultRatingIfNotEmpty"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.ratingEmpty"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domoscomplianceformrating" data-bind="value: defaultRatingIfEmpty"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.activeQuery"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<a class="k-button cp-frm-query-refresh"><span class="k-icon k-i-refresh"></a>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan="2">\n\t\t\t\t<div class="cp-frm-query"></div>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>'}),define("core/util/FieldsFactory",["require","exports","tslib","lodash"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FieldsFactory=void 0;var a=function(){function t(t){this._list=t,this._dict=i.keyBy(t,function(t){return t.id})}return t.prototype.get=function(t){if(!i.isNil(t))return this._dict[t]},t.prototype.list=function(){return this._list},t.prototype.listByType=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.filter(this._list,function(t){return 0<=e.indexOf(t.type)})},t}(),r=function(){function t(){}return t.create=function(t){return new a(t)},t.extends=function(t,e){return new a(n.__spreadArrays(t.list(),e))},t}();e.FieldsFactory=r}),define("object/data/BusinessObjectFields",["require","exports","core/util/FieldsFactory"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BusinessObjectFields=void 0,e.BusinessObjectFields=n.FieldsFactory.create([])}),define("core/util/FieldFactory",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FieldFactory=void 0;var n=function(){function t(){}return t.prototype.createString=function(e,t){return{id:e,name:t,type:"string",get:function(t){return t?t[e]:void 0}}},t.prototype.createNumber=function(e,t){return{id:e,name:t,type:"number",get:function(t){return t?t[e]:void 0}}},t.prototype.createDate=function(e,t){return{id:e,name:t,type:"date",get:function(t){return t?t[e]:void 0}}},t.prototype.createEnum=function(e,t,n){return{id:e,name:t,type:"enum",enumeration:n,get:function(t){return t?t[e]:void 0}}},t.prototype.createEnumArray=function(e,t,n){return{id:e,name:t,type:"enumArray",enumeration:n,get:function(t){return t?t[e]:void 0}}},t.prototype.createCalculatedString=function(t,e,n){return{id:t,name:e,type:"string",get:n}},t}();e.FieldFactory=n}),define("object/data/EntityFields",["require","exports","lodash","core/util/FieldsFactory","./BusinessObjectFields","core/api/EntityRole","core/util/FieldFactory","../../basic/data/AddressType","basic/data/Countries","compliance/data/aml/AmlHitType"],function(t,e,a,n,i,r,o,d,l,s){"use strict";function u(t,e,n){var i=d.AddressType.getName(n)||e;return t.createCalculatedString(e,i,function(t){var e=a.find(t.addresses,function(t){return t.type===n});if(e)return a.chain([e.streetNumber,e.street,e.postalCode,e.city,l.Countries.getName(e.country)]).compact().join(" ").value()})}Object.defineProperty(e,"__esModule",{value:!0}),e.EntityFields=void 0;var c,p=[(c=new o.FieldFactory).createString("name","data:fields.name"),c.createString("mail","data:fields.mail"),c.createString("phone","data:fields.phone"),c.createEnumArray("roles","data:fields.roles",r.EntityRole),c.createNumber("reportingCurrency","data:fields.reportingCurrency"),u(c,"address",d.AddressType.LEGAL),u(c,"mailingAddress",d.AddressType.MAILING),u(c,"taxAddress",d.AddressType.TAX),c.createEnumArray("amlHits","data:fields.amlLists",s.AmlHitType)];e.EntityFields=n.FieldsFactory.extends(i.BusinessObjectFields,p)}),define("object/data/LegalPersonFields",["require","exports","core/util/FieldsFactory","./EntityFields","core/util/FieldFactory"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LegalPersonFields=void 0;var r,o=[(r=new a.FieldFactory).createString("shortName","data:fields.shortName"),r.createDate("inceptionDate","data:fields.inceptionDate"),r.createString("webSite","data:fields.webSite")];e.LegalPersonFields=n.FieldsFactory.extends(i.EntityFields,o)}),define("object/ui/LegalFieldUI",["require","exports","tslib","lodash","core/ui/widget/IdWidgetUtils","core/util/FieldUtils","object/data/LegalPersonFields"],function(t,e,i,a,r,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LegalFieldUI=void 0;function n(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return{widget:r.IdWidgetUtils.createDropList(t,function(){return function(n){return i.__awaiter(this,void 0,void 0,function(){var e;return i.__generator(this,function(t){return e=d.LegalPersonFields.listByType.apply(d.LegalPersonFields,n),[2,a.map(e,function(t){return{id:t.id,name:o.FieldUtils.fieldName(t)}})]})})}(e)},!0)}}var l=function(){function t(){}return t.String=n("DomosLegalStringField","string","date"),t.Double=n("DomosLegalDoubleField","number"),t}();e.LegalFieldUI=l}),define("compliance/form/controls/ComplianceFormTextControl",["require","exports","tslib","compliance/data/ComplianceFormElementType","core/form/FormBuilderSize","core/query/QueryBuilderFilterFactory","./ComplianceFormFilterControl","compliance/form/common/ComplianceFormUtils","text!templates/compliance/form/control/text.edit.html","core/form/FormBuilderSize","compliance/data/ComplianceFormRating","object/ui/LegalFieldUI"],function(t,e,n,i,a,r,o,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormTextControl=void 0;var s=i.ComplianceFormElementType.TEXT,u=function(t){function e(){return t.call(this,s)||this}return n.__extends(e,t),e.prototype.filterRule=function(t){return[r.QueryBuilderFilterFactory.createTextFilter(d.ComplianceFormUtils.bindingId(t),t.label)]},e.prototype.defaultConfiguration=function(){return{id:i.ComplianceFormElementType.getStringId(s),reuseId:"",label:"",required:!1,size:a.FormBuilderSize.FULL,activeQuery:null,optionalRating:!1,placeholder:"",maxLength:null,defaultValue:"",preFill:null,defaultRatingIfNotEmpty:null,defaultRatingIfEmpty:null}},e.prototype.render=function(t){var e=d.ComplianceFormUtils.bindingId(t.element),n=t.element,i=$('<input type="text" class="k-textbox">').appendTo(t.$element);if(n.maxLength&&i.attr("maxlength",n.maxLength),n.placeholder&&i.attr("placeholder",n.placeholder),t.readOnly)i.attr("data-bind","value:"+e),t.disabled?i.prop("disabled",!0).addClass("k-state-disabled"):i.prop("readonly",!0);else{var a=d.ComplianceFormUtils.inactiveBindingId(t.element);i.attr("data-bind","value:"+e+",disabled:"+a+",css:{k-state-disabled:"+a+"}")}},e.prototype.editHtml=function(){return kendo.template(l)({area:!1})},e}(o.ComplianceFormFilterControl);e.ComplianceFormTextControl=u}),define("compliance/form/controls/ComplianceFormTextAreaControl",["require","exports","tslib","compliance/data/ComplianceFormElementType","core/form/FormBuilderSize","core/query/QueryBuilderFilterFactory","./ComplianceFormFilterControl","compliance/form/common/ComplianceFormUtils","text!templates/compliance/form/control/text.edit.html","core/form/FormBuilderSize","compliance/data/ComplianceFormRating","object/ui/LegalFieldUI"],function(t,e,n,i,a,r,o,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormTextAreaControl=void 0;var s=i.ComplianceFormElementType.TEXTAREA,u=function(t){function e(){return t.call(this,s)||this}return n.__extends(e,t),e.prototype.filterRule=function(t){return[r.QueryBuilderFilterFactory.createTextAreaFilter(t.id,t.label)]},e.prototype.defaultConfiguration=function(){return{id:i.ComplianceFormElementType.getStringId(s),reuseId:"",label:"",required:!1,size:a.FormBuilderSize.FULL,activeQuery:null,optionalRating:!1,placeholder:"",maxLength:null,defaultValue:"",preFill:null,defaultRatingIfNotEmpty:null,defaultRatingIfEmpty:null,rows:4}},e.prototype.render=function(t){var e=d.ComplianceFormUtils.bindingId(t.element),n=t.element,i=$('<textarea class="k-textbox">').appendTo(t.$element);if(n.maxLength&&i.attr("maxlength",n.maxLength),n.placeholder&&i.attr("placeholder",n.placeholder),n.rows&&i.attr("rows",n.rows),t.readOnly)i.attr("data-bind","value:"+e),t.disabled?i.prop("disabled",!0).addClass("k-state-disabled"):i.prop("readonly",!0);else{var a=d.ComplianceFormUtils.inactiveBindingId(t.element);i.attr("data-bind","value:"+e+",disabled:"+a+",css:{k-state-disabled:"+a+"}")}},e.prototype.editHtml=function(){return kendo.template(l)({area:!0})},e}(o.ComplianceFormFilterControl);e.ComplianceFormTextAreaControl=u}),define("core/form/internal/FormBuilderUtils",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FormBuilderUtils=void 0;var n={cursor:"move",opacity:.9,revert:150,placeholder:"frmb-placeholder"},i=function(){function t(){}return t.sortableOptions=function(){return n},t.cssMoving=function(){return"frmb-moving"},t}();e.FormBuilderUtils=i}),define("compliance/form/controls/ComplianceFormItemList",["require","exports","tslib","lodash","core/form/internal/FormBuilderUtils"],function(t,e,u,c,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormItemList=void 0;var m="cp-frm-item-list",f="cp-frm-item-actions",b="frmb-stage-deleting-hover";function v(t,e){var n=$("<button>").addClass("k-button").appendTo(t);if(e.click){var i=e.click;n.click(function(t){t.preventDefault(),i()})}e.className&&n.addClass(e.className);var a=e.label;e.kendoIcon&&(a='<span class="k-icon '+e.kendoIcon+'"></span>&nbsp;'+a),n.html(a)}var n=function(){function t(){}return t.init=function(n){var t=n.$element,o=n.data;t.html('\n<ul class="cp-frm-item-list"></ul>\n<div class="cp-frm-item-actions"></div>\n');var r=t.find("."+m),e=t.find("."+f);function i(t){var e=$("<li>").addClass("frmb-edit-list-option").attr("data-uid",t.uid).appendTo(r);n.itemView(e,t)}for(var a=0;a<o.length;++a)i(o[a]);if(n.sortable){var d={};r.sortable(u.__assign(u.__assign({},p.FormBuilderUtils.sortableOptions()),{cancel:"input,textarea,button,select,option,k-radio,k-radio-label,k-widget",start:function(t,e){e.item.show().addClass("frmb-hint"),d.oldIndex=e.item.index()},stop:function(t,e){e.item.removeClass("frmb-hint");var n=d.oldIndex;c.isNil(n)&&r.sortable("cancel");var i=e.item.index();if(!c.isNil(n)&&!c.isNil(i)&&n!==i){var a=o[n];o.splice(n,1),o.splice(i,0,a)}}}))}if(r.on("click",".cp-frm-item-destroy",function(t){t.preventDefault();var e=$(t.target).closest("li"),n=e.attr("data-uid");if(n)for(var i=o.length,a=0;a<i;++a){var r=o[a];if(r.uid===n)return o.remove(r),void e.remove()}}),r.on("mouseover",".cp-frm-item-destroy",function(t){$(t.target).closest("li").addClass(b)}),r.on("mouseout",".cp-frm-item-destroy",function(t){$(t.target).closest("li").removeClass(b)}),n.actions)for(var l=0,s=n.actions.reverse();l<s.length;l++){v(e,s[l])}e.on("click",".cp-frm-item-add",function(t){t.preventDefault();var e=n.newItem();o.push(e),i(o[o.length-1])})},t}();e.ComplianceFormItemList=n}),define("text!templates/compliance/form/control/options.edit.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.required"></label>\n\t\t\t</td>\n\t\t\t# var uid = kendo.guid(); #\n\t\t\t<td>\n\t\t\t\t<input id="#:uid#" type="checkbox" class="k-checkbox" data-bind="checked: required"/>\n\t\t\t\t<label for="#:uid#" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.id"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: id" readonly/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.reuseId"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: reuseId"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.label"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: label"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.size"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domosformbuildersize" data-bind="value: size"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t# if (placeholder) {#\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.placeholder"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: placeholder"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t#}#\n\t\t<tr>\n\t\t\t<td style="vertical-align:top">\n\t\t\t\t<label data-i18n="compliance:forms.builder.options"></label>\n\t\t\t</td>\n\t\t\t<td class="frmb-option-list-query">\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.activeQuery"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<a class="k-button cp-frm-query-refresh"><span class="k-icon k-i-refresh"></a>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan="2">\n\t\t\t\t<div class="cp-frm-query"></div>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>'}),define("text!templates/compliance/form/control/option.item.html",[],function(){return'\n<table class="cp-frm-item-table">\n\t<colgroup>\n\t\t<col width="5%"/>\n\t\t<col width="15%"/>\n\t\t<col width="54%"/>\n\t\t<col width="20%"/>\n\t\t<col width="3%"/>\n\t\t<col width="3%"/>\n\t</colgroup>\n\t<tr>\n\t\t<td>\n\t\t\t#if (useRadio) {#\n\t\t\t<input id="#:gpId#" type="radio" name="#:gpId#" data-bind="checked: selected" value="true" data-type="boolean" class="k-radio"/>\n\t\t\t<label for="#:gpId#" class="k-radio-label">&thinsp;</label>\n\t\t\t#} else {#\n\t\t\t<input id="#:gpId#" type="checkbox" data-bind="checked: selected" class="k-checkbox"/>\n\t\t\t<label for=#:gpId# class="k-checkbox-label">&thinsp;</label>\n\t\t\t#}#\n\t\t</td>\n\t\t<td><input type="text" class="k-textbox" data-i18n="[placeholder]compliance:forms.builder.id" data-bind="value: id" readonly/></td>\n\t\t<td><input type="text" class="k-textbox" data-i18n="[placeholder]compliance:forms.builder.label" data-bind="value: label"/></td>\n\t\t<td><input data-role="domoscomplianceformrating" data-bind="value: defaultRating"/></td>\n\t\t<td><a class="cp-frm-prefill-button" data-i18n="[title]compliance:forms.builder.preFill"><span class="k-icon k-i-filter"></span><a></td>\n\t\t<td><a class="cp-frm-item-destroy" data-i18n="[title]compliance:forms.builder.removeOption"><span class="k-icon k-i-close"></span></a></td>\n\t</tr>\n</table>\n<div class="cp-frm-option-filter">\n\t<p data-i18n="compliance:forms.builder.optionPreFillDescription"></p>\n</div>'}),define("object/query/ObjectQueryBuilder",["require","exports","lodash","core/query/QueryBuilder","core/query/QueryBuilderFilterFactory","core/query/QueryCompiler","core/util/FieldUtils","core/util/ObservableUtils"],function(t,e,a,n,i,r,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectQueryBuilder=void 0;var l=function(){function t(i){this.fields=i,this.validation={ruleExists:function(t){return!!i.get(t)},optionExists:function(t,e){var n=i.get(t);return!o.FieldUtils.isEnumBase(n)||a.has(n.enumeration,e)}}}return t.prototype.init=function(t){return new n.QueryBuilder(t,this.createFilters())},t.prototype.compile=function(t,e){var i=this,a=r.QueryCompiler.compile(t,this.validation,e);return function(n){n=d.ObservableUtils.unpack(n);return a.call(null,function(t){var e=i.fields.get(t);return e?e.get(n):void 0})}},t.prototype.createFilters=function(){return a.map(this.fields.list(),function(t){return i.QueryBuilderFilterFactory.createFromField(t)})},t}();e.ObjectQueryBuilder=l}),define("object/query/LegalQueryBuilder",["require","exports","object/data/LegalPersonFields","./ObjectQueryBuilder"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LegalQueryBuilder=void 0,e.LegalQueryBuilder=new i.ObjectQueryBuilder(n.LegalPersonFields)}),define("compliance/form/controls/ComplianceFormMultipleControl",["require","exports","tslib","lodash","compliance/data/ComplianceFormElementType","core/form/FormBuilderSize","core/query/QueryBuilderFilterFactory","./ComplianceFormFilterControl","./ComplianceFormItemList","core/util/ObservableUtils","text!templates/compliance/form/control/options.edit.html","text!templates/compliance/form/control/option.item.html","i18n","object/query/LegalQueryBuilder"],function(t,e,i,a,r,o,d,n,l,s,u,c,p,m){"use strict";function f(t){return"option"+t}function b(t,e){for(var n=f(e),i=t.length,a=0;a<i;++a){var r=t[a];if(r&&r.get("id")===n)return!0}return!1}function v(t){var e,n=a.isNumber(t)?t:function(t){for(var e=1;;++e)if(!b(t,e))return e}(t);return{id:f(n),label:(e=n,"Option #"+e),defaultRating:null,selected:!1,preFillQuery:null}}Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormMultipleControl=void 0;var y=function(n){function t(t){var e=n.call(this,t)||this;return e.useRadio=r.ComplianceFormElementType.useRadio(t),e.hasPlaceholder=r.ComplianceFormElementType.hasPlaceholder(t),e}return i.__extends(t,n),t.prototype.filterRule=function(t){var e=t;return[d.QueryBuilderFilterFactory.createMultipleStringFilter(e.id,e.label,e.options)]},t.prototype.defaultConfiguration=function(){var t=[v(1)];return this.useRadio&&t.push(v(2)),{id:r.ComplianceFormElementType.getStringId(this.type),reuseId:"",label:"",required:!1,size:o.FormBuilderSize.FULL,activeQuery:null,optionalRating:!1,placeholder:"",options:t}},t.prototype.editHtml=function(){return kendo.template(u)({placeholder:this.hasPlaceholder})},t.prototype.initEdit=function(t,e){var n=this,i=t.find(".frmb-option-list-query"),a=e.get("options");if(l.ComplianceFormItemList.init({$element:i,data:a,sortable:!0,newItem:function(){return v(a)},itemView:function(t,e){return n.optionView(t,e)},actions:[{label:p.I18N.t("compliance:forms.builder.deselect"),className:"frmb-edit-option-unselect",kendoIcon:"k-i-tri-state-null",click:function(){return a.forEach(function(t){return t.set("selected",!1)})}},{label:p.I18N.t("compliance:forms.builder.addOption"),className:"cp-frm-item-add",kendoIcon:"k-i-add"}]}),this.useRadio){var r=!1;a.bind("change",function(t){if(!r&&"itemchange"===t.action&&"selected"===t.field&&t.items){var e=t.items[0];if(e&&e.get("selected")){var i=e.uid;setTimeout(function(){r=!0;try{for(var t=a.length,e=0;e<t;++e){var n=a[e];n.uid!==i&&n.set("selected",!1)}}finally{r=!1}},0)}}})}},t.prototype.optionView=function(t,d){var e=kendo.template(c)({gpId:d.uid,useRadio:this.useRadio}),n={model:d,init:function(t){var e=t.sender.element;p.I18N.localize(e);var n,i=e.find(".cp-frm-prefill-button"),a=e.find(".cp-frm-option-filter"),r="preFillQuery",o=function(){s.ObservableUtils.getUnpacked(d,r)?i.attr("data-badge",1):i.removeAttr("data-badge")};o(),d.bind("change",function(t){t.field===r&&o()});i.click(function(){!function(){if(!n){var t=$("<div>").appendTo(a);(n=m.LegalQueryBuilder.init(t)).setRules(s.ObservableUtils.getUnpacked(d,r)),n.event.register(function(){n&&d.set(r,n.getRules())})}}(),a.slideToggle()})}};new kendo.View(e,n).render(t)},t}(n.ComplianceFormFilterControl);e.ComplianceFormMultipleControl=y}),define("text!templates/compliance/form/control/radio.render.html",[],function(){return'\n# var uid = kendo.guid();\nfor (var it = 0, length = options.length; it < length; ++it) {\n  var option = options[it];\n  var optId = uid + "_" + option.id;#\n<div style="margin-bottom: 5px">\n<input id="#:optId#" type="radio" name="#:uid#" value="#:option.id#" class="k-radio"\n# if (readonly) {#\n    data-bind="checked: #:binding#" disabled/>\n#} else {#\n    data-bind="checked: #:binding#, disabled: #:inactive#"/>\n#}#\n# if (readonly && !disabled) {#\n    <label class="k-radio-label" for="#:optId#"></label><span class="frmb-radio-readonly">#:option.label#</span>\n#} else {#\n<label class="k-radio-label" for="#:optId#">#:option.label#</label>\n#}#\n</div>\n# } #'}),define("compliance/form/controls/ComplianceFormRadioControl",["require","exports","tslib","compliance/data/ComplianceFormElementType","./ComplianceFormMultipleControl","compliance/form/common/ComplianceFormUtils","text!templates/compliance/form/control/radio.render.html"],function(t,e,n,i,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormRadioControl=void 0;var d=i.ComplianceFormElementType.RADIO,l=function(t){function e(){return t.call(this,d)||this}return n.__extends(e,t),e.prototype.render=function(t){var e=t.element,n=kendo.template(o)({binding:r.ComplianceFormUtils.bindingId(e),inactive:r.ComplianceFormUtils.inactiveBindingId(e),readonly:t.readOnly,disabled:t.disabled,options:e.options});t.$element.html(n)},e}(a.ComplianceFormMultipleControl);e.ComplianceFormRadioControl=l}),define("text!templates/compliance/form/control/checkbox.render.html",[],function(){return'# var uid = kendo.guid();\nfor (var it = 0, length = options.length; it < length; ++it) {\n  var option = options[it];\n  var optId = uid + "_" + option.id;#\n<div style="margin-bottom: 5px">\n<input id="#:optId#" type="checkbox" name="#:uid#" value="#:option.id#" class="k-checkbox"\n# if (readonly) {#\n    data-bind="checked: #:binding#" disabled/>\n#} else {#\n    data-bind="checked: #:binding#, disabled: #:inactive#"/>\n#}#\n# if (readonly && !disabled) {#\n    <label class="k-checkbox-label" for="#:optId#"></label><span class="frmb-checkbox-readonly">#:option.label#</span>\n#} else {#\n<label class="k-checkbox-label" for="#:optId#">#:option.label#</label>\n#}#\n</div>\n# } #'}),define("compliance/form/controls/ComplianceFormCheckboxControl",["require","exports","tslib","compliance/data/ComplianceFormElementType","./ComplianceFormMultipleControl","compliance/form/common/ComplianceFormUtils","text!templates/compliance/form/control/checkbox.render.html"],function(t,e,n,i,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormCheckboxControl=void 0;var d=i.ComplianceFormElementType.CHECKBOX,l=function(t){function e(){return t.call(this,d)||this}return n.__extends(e,t),e.prototype.render=function(t){var e=t.element,n=kendo.template(o)({binding:r.ComplianceFormUtils.bindingId(e),inactive:r.ComplianceFormUtils.inactiveBindingId(e),readonly:t.readOnly,disabled:t.disabled,required:e.required,options:e.options});t.$element.html(n)},e}(a.ComplianceFormMultipleControl);e.ComplianceFormCheckboxControl=l}),define("compliance/form/controls/ComplianceFormSelectControl",["require","exports","tslib","compliance/data/ComplianceFormElementType","./ComplianceFormMultipleControl","compliance/form/common/ComplianceFormUtils"],function(t,e,n,i,a,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormSelectControl=void 0;var r=i.ComplianceFormElementType.SELECT,d=function(t){function e(){return t.call(this,r)||this}return n.__extends(e,t),e.prototype.render=function(t){var e=t.element,n=o.ComplianceFormUtils.bindingId(e),i=$("<input>").appendTo(t.$element).kendoDropDownList({dataSource:{data:e.options},optionLabel:e.placeholder||"--",dataTextField:"label",dataValueField:"id",valuePrimitive:!0});if(t.readOnly){i.attr("data-bind","value:"+n);var a=i.data("kendoDropDownList");t.disabled?a.enable(!1):a.readonly(!0)}else{var r=o.ComplianceFormUtils.inactiveBindingId(e);i.attr("data-bind","value:"+n+",disabled:"+r)}},e}(a.ComplianceFormMultipleControl);e.ComplianceFormSelectControl=d}),define("compliance/form/controls/ComplianceFormMultiSelectControl",["require","exports","tslib","compliance/data/ComplianceFormElementType","./ComplianceFormMultipleControl","compliance/form/common/ComplianceFormUtils"],function(t,e,n,i,a,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormMultiSelectControl=void 0;var r=i.ComplianceFormElementType.MULTI_SELECT,d=function(t){function e(){return t.call(this,r)||this}return n.__extends(e,t),e.prototype.render=function(t){var e=t.element,n=o.ComplianceFormUtils.bindingId(e),i=$("<div>").appendTo(t.$element).kendoMultiSelect({dataSource:{data:e.options},placeholder:e.placeholder,dataTextField:"label",dataValueField:"id",valuePrimitive:!0});if(t.readOnly){i.attr("data-bind","value:"+n);var a=i.data("kendoMultiSelect");t.disabled?a.enable(!1):a.readonly(!0)}else{var r=o.ComplianceFormUtils.inactiveBindingId(e);i.attr("data-bind","value:"+n+",disabled:"+r)}},e}(a.ComplianceFormMultipleControl);e.ComplianceFormMultiSelectControl=d}),define("text!templates/compliance/form/control/number.edit.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.required"></label>\n\t\t\t</td>\n\t\t\t# var uid = kendo.guid(); #\n\t\t\t<td>\n\t\t\t\t<input id="#:uid#" type="checkbox" class="k-checkbox" data-bind="checked: required"/>\n\t\t\t\t<label for="#:uid#" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.id"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: id" readonly/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.reuseId"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: reuseId"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.label"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: label"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.size"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domosformbuildersize" data-bind="value: size"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.placeholder"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: placeholder"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.defaultValue"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="numerictextbox" data-bind="value: defaultValue"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.preFill"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domoslegaldoublefield" data-value-primitive="true" data-bind="value: preFill"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.minimum"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="numerictextbox" data-bind="value: min"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.maximum"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="numerictextbox" data-bind="value: max"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.step"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="numerictextbox" data-bind="value: step"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.decimals"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="numerictextbox" data-min="0" data-decimals="0" data-format="n0" data-bind="value: decimals"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.activeQuery"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<a class="k-button cp-frm-query-refresh"><span class="k-icon k-i-refresh"></a>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan="2">\n\t\t\t\t<div class="cp-frm-query"></div>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>\n'}),define("compliance/form/controls/ComplianceFormNumberControl",["require","exports","tslib","lodash","compliance/data/ComplianceFormElementType","core/form/FormBuilderSize","core/query/QueryBuilderFilterFactory","./ComplianceFormFilterControl","compliance/form/common/ComplianceFormUtils","text!templates/compliance/form/control/number.edit.html","object/ui/LegalFieldUI"],function(t,e,n,l,i,a,r,o,s,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormNumberControl=void 0;var u=i.ComplianceFormElementType.NUMBER,c=function(t){function e(){return t.call(this,u)||this}return n.__extends(e,t),e.prototype.filterRule=function(t){return[r.QueryBuilderFilterFactory.createNumberFilter(s.ComplianceFormUtils.bindingId(t),t.label)]},e.prototype.defaultConfiguration=function(){return{id:i.ComplianceFormElementType.getStringId(u),reuseId:"",label:"",required:!1,size:a.FormBuilderSize.FULL,activeQuery:null,optionalRating:!1,placeholder:"",defaultValue:null,preFill:null,min:null,max:null,decimals:null,step:null}},e.prototype.render=function(t){var e=s.ComplianceFormUtils.inactiveBindingId(t.element),n=s.ComplianceFormUtils.bindingId(t.element),i=t.element,a={min:i.min||void 0,max:i.max||void 0,step:i.step||void 0,placeholder:i.placeholder||void 0},r=i.decimals;l.isNil(r)||(a.decimals=r,a.format="n"+r);var o=$("<input>").appendTo(t.$element).kendoNumericTextBox(a);if(t.readOnly){o.attr("data-bind","value:"+n);var d=o.data("kendoNumericTextBox");t.disabled?d.enable(!1):d.readonly(!0)}else o.attr("data-bind","value:"+n+", disabled:"+e)},e.prototype.editHtml=function(){return kendo.template(d)({})},e}(o.ComplianceFormFilterControl);e.ComplianceFormNumberControl=c}),define("text!templates/compliance/form/control/likert.edit.html",[],function(){return'\n<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.required"></label>\n\t\t\t</td>\n\t\t\t# var uid = kendo.guid(); #\n\t\t\t<td>\n\t\t\t\t<input id="#:uid#" type="checkbox" class="k-checkbox" data-bind="checked: required"/>\n\t\t\t\t<label for="#:uid#" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.id"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: id" readonly/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.reuseId"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: reuseId"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.label"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: label"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.size"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domosformbuildersize" data-bind="value: size"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style="vertical-align:top">\n\t\t\t\t<label data-i18n="compliance:forms.builder.options"></label>\n\t\t\t</td>\n\t\t\t<td class="cp-frm-likert-options-query"></td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<td style="vertical-align:top">\n\t\t\t\t<label data-i18n="compliance:forms.builder.questions"></label>\n\t\t\t</td>\n\t\t\t<td class="cp-frm-likert-questions-query"></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.activeQuery"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<a class="k-button cp-frm-query-refresh"><span class="k-icon k-i-refresh"></a>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan="2">\n\t\t\t\t<div class="cp-frm-query"></div>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>'}),define("text!templates/compliance/form/control/likert.render.html",[],function(){return'\n#if (preview) {#\n<div class="floating-left-container">\n#}#\n<div class="k-grid k-widget cp-frm-likert" data-bind="css:{k-state-disabled:#:inactive#}">\n<table>\n\t<thead class="k-grid-header">\n\t\t<tr>\n\t\t\t<th class="k-header"></th>\n\t\t\t#  for (var it = 0, length = options.length; it < length; ++it) {\n\t\t\t  var option = options[it]; #\n\t\t\t<th class="k-header">#:option.label#</th>\n\t\t\t# } #\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t# var alt = true;\n\tfor (var questionIt = 0, questionLength = questions.length; questionIt < questionLength; ++questionIt) {\n\t\tvar question = questions[questionIt];\n\t\talt = !alt;\n\t#\n\t<tr# if (alt) {# class="k-alt"#}#>\n\t\t<td>#:question.label#</td>\n\t\t#\n\t\tvar uid = kendo.guid();\n\t\tfor (var it = 0, length = options.length; it < length; ++it) {\n\t\t\tvar option = options[it];\n\t\t\tvar optId = uid + "_" + option.id;#\n\t\t<td>\n\t\t\t<input id="#:optId#" name="#:uid#" value="#:option.id#"\n\t\t\t# if (radio) {#\n\t\t\t\ttype="radio" class="k-radio"\n\t\t\t# } else {#\n\t\t\t\ttype="checkbox" class="k-checkbox"\n\t\t\t# } #\n\t\t\t# if (readonly) {#\n\t\t\t\tdata-bind="checked:#:question.binding#" disabled\n\t\t\t# } else {#\n\t\t\t\tdata-bind="checked:#:question.binding#, disabled:#:inactive#"\n\t\t\t# } #\n\t\t\t/>\n\t\t\t<label for="#:optId#" class="#if(radio){#k-radio-label#}else{#k-checkbox-label#}#">&thinsp;</label>\n\t\t</td>\n\t\t# } #\n\t</tr>\n\t# } #\n\t</tbody>\n</table>\n</div>\n#if (preview) {#\n</div>\n#}#'}),define("text!templates/compliance/form/control/likert.option.html",[],function(){return'\n<table class="cp-frm-item-table">\n\t<colgroup>\n\t\t<col width="3%"/>\n\t\t<col width="15%"/>\n\t\t<col width="59%"/>\n\t\t<col width="20%"/>\n\t\t<col width="3%"/>\n\t</colgroup>\n\t<tr>\n\t\t<td></td>\n\t\t<td><input type="text" class="k-textbox cp-frm-likert-option-id" data-i18n="[placeholder]compliance:forms.builder.id" data-bind="value: id" readonly/></td>\n\t\t<td><input type="text" class="k-textbox cp-frm-likert-option-label" data-i18n="[placeholder]compliance:forms.builder.placeholder" data-bind="value: label"/></td>\n\t\t<td><input class="cp-frm-likert-option-rating" data-role="domoscomplianceformrating" data-bind="value: defaultRating"/></td>\n\t\t<td><a class="cp-frm-item-destroy" data-i18n="[title]compliance:forms.builder.removeOption"><span class="k-icon k-i-close"></span></a></td>\n\t</tr>\n</table>'}),define("text!templates/compliance/form/control/likert.question.html",[],function(){return'\n<table class="cp-frm-item-table">\n\t<colgroup>\n\t\t<col width="3%"/>\n\t\t<col width="15%"/>\n\t\t<col width="76%"/>\n\t\t<col width="3%"/>\n\t\t<col width="3%"/>\n\t</colgroup>\n\t<tr>\n\t\t<td></td>\n\t\t<td><input type="text" class="k-textbox frmb-question-id" data-i18n="[placeholder]compliance:forms.builder.id" data-bind="value: id" readonly/></td>\n\t\t<td><input type="text" class="k-textbox frmb-question-label" data-i18n="[placeholder]compliance:forms.builder.label" data-bind="value: label"/></td>\n\t\t<td><a class="cp-frm-prefill-button" data-i18n="[title]compliance:forms.builder.preFill"><span class="k-icon k-i-filter"></span><a></td>\n\t\t<td><a class="cp-frm-item-destroy" data-i18n="[title]compliance:forms.builder.removeQuestion"><span class="k-icon k-i-close"></span></a></td>\n\t</tr>\n</table>\n<div class="cp-frm-question-filter">\n\t<p data-i18n="compliance:forms.builder.optionPreFillDescription"></p>\n\t<div class="cp-frm-question-filter-list"></div>\n</div>'}),define("text!templates/compliance/form/control/likert.prefill.html",[],function(){return'\n<table class="cp-frm-question-prefill-table">\n\t<colgroup>\n\t\t<col width="15%"/>\n\t\t<col width="82%"/>\n\t\t<col width="3%"/>\n\t</colgroup>\n\t<tr>\n\t\t<td><input class="frmb-prefill-option" data-bind="value: optionId"/></td>\n\t\t<td><div class="frmb-prefill-query"></div></td>\n\t\t<td><a class="cp-frm-item-destroy" style="visibility:visible" data-i18n="[title]compliance:forms.builder.removePreFill"><span class="k-icon k-i-close"></span></a></td>\n\t</tr>\n</table>'}),define("compliance/form/controls/ComplianceFormLikertControl",["require","exports","tslib","lodash","compliance/data/ComplianceFormElementType","core/query/QueryBuilderFilterFactory","compliance/form/common/ComplianceFormUtils","./ComplianceFormFilterControl","core/form/FormBuilderSize","./ComplianceFormItemList","core/util/ObservableUtils","core/ui/grid/LocalTransport","text!templates/compliance/form/control/likert.edit.html","text!templates/compliance/form/control/likert.render.html","text!templates/compliance/form/control/likert.option.html","text!templates/compliance/form/control/likert.question.html","text!templates/compliance/form/control/likert.prefill.html","i18n","object/query/LegalQueryBuilder"],function(t,e,a,r,o,d,l,n,i,s,u,c,p,m,f,b,v,y,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormLikertControl=void 0;var g="preFill";function T(t){return"option"+t}function I(t){return"question"+t}function C(t,e){for(var n=t.length,i=0;i<n;++i){var a=t[i];if(a&&a.get("id")===e)return!0}return!1}function w(t,e){for(var n=1;;++n){if(!C(t,e?T(n):I(n)))return n}}var k=function(n){function t(t){var e=n.call(this,t)||this;return e.useRadio=o.ComplianceFormElementType.useRadio(t),e}return a.__extends(t,n),t.prototype.filterRule=function(t){var a=t;return r.map(a.questions,function(t){return d.QueryBuilderFilterFactory.createMultipleStringFilter((n=a,i=t,l.ComplianceFormUtils.likertBindingId(n,i)),(e=t,"["+a.id+"] "+e.label),a.options);var e,n,i})},t.prototype.defaultConfiguration=function(){var t=[];t.push(this.newOption(1)),this.useRadio&&t.push(this.newOption(2));var e=[];return e.push(this.newQuestion(1)),e.push(this.newQuestion(2)),{id:o.ComplianceFormElementType.getStringId(this.type),reuseId:"",label:"",required:!1,size:i.FormBuilderSize.FULL,activeQuery:null,optionalRating:!1,placeholder:"",options:t,questions:e}},t.prototype.render=function(t){var e=t.element,n=e.questions.map(function(t){return a.__assign(a.__assign({},t),{binding:l.ComplianceFormUtils.likertBindingId(e,t)})}),i=kendo.template(m)({inactive:l.ComplianceFormUtils.inactiveBindingId(e),radio:o.ComplianceFormElementType.useRadio(this.type),readonly:t.readOnly,preview:t.preview,options:e.options,questions:n});t.$element.html(i)},t.prototype.initEdit=function(t,n){var i=this,e=t.find(".cp-frm-likert-options-query"),a=t.find(".cp-frm-likert-questions-query"),r=n.get("options");s.ComplianceFormItemList.init({$element:e,data:r,sortable:!0,newItem:function(){return i.newOption(r)},itemView:function(t,e){return i.optionView(t,e)},actions:[{label:y.I18N.t("compliance:forms.builder.addOption"),className:"cp-frm-item-add",kendoIcon:"k-i-add"}]});var o=n.get("questions");s.ComplianceFormItemList.init({$element:a,data:o,sortable:!0,newItem:function(){return i.newQuestion(o)},itemView:function(t,e){return i.questionView(t,n,e)},actions:[{label:y.I18N.t("compliance:forms.builder.addQuestion"),className:"cp-frm-item-add",kendoIcon:"k-i-add"}]})},t.prototype.editHtml=function(){return kendo.template(p)({})},t.prototype.newQuestion=function(t,e){var n,i=r.isNumber(t)?t:w(t,!1);return{id:I(i),label:e||(n=i,"Question #"+n),preFill:null}},t.prototype.newOption=function(t,e){var n,i=r.isNumber(t)?t:w(t,!0);return{id:T(i),label:e||(n=i,"Option #"+n),defaultRating:null,selected:!1,preFillQuery:null}},t.prototype.optionView=function(t,e){var n=kendo.template(f)({}),i={model:e,init:function(t){y.I18N.localize(t.sender.element)}};new kendo.View(n,i).render(t)},t.prototype.questionView=function(t,n,i){var a=this,e=kendo.template(b)({}),r={model:i,init:function(t){var e=t.sender.element;y.I18N.localize(e),a.initQuestionView(e,n,i)}};new kendo.View(e,r).render(t)},t.prototype.initQuestionView=function(t,e,n){var i=this,a=t.find(".cp-frm-prefill-button"),r=t.find(".cp-frm-question-filter");this.initBadge(a,n);var o=!1;a.click(function(){o||(o=!0,i.initQuestionPreFillList(r,e,n)),r.slideToggle()})},t.prototype.initBadge=function(e,n){var i=function(){var t=u.ObservableUtils.getUnpacked(n,g);r.isEmpty(t)?e.removeAttr("data-badge"):e.attr("data-badge",1)};i(),n.bind("change",function(t){t&&t.field===g&&i()})},t.prototype.initQuestionPreFillList=function(t,e,n){var i=this,a=this.preFillToArray(n),r=t.find(".cp-frm-question-filter-list"),o=this.optionDataSource(e);s.ComplianceFormItemList.init({$element:r,data:a,sortable:!1,newItem:function(){return{optionId:null,preFill:null}},itemView:function(t,e){return i.questionPreFillView(t,o,e)},actions:[{label:y.I18N.t("compliance:forms.builder.addPreFill"),className:"cp-frm-item-add",kendoIcon:"k-i-add"}]})},t.prototype.questionPreFillView=function(t,a,r){var e=kendo.template(v)({}),n={model:r,init:function(t){var e=t.sender.element;y.I18N.localize(e),e.find(".frmb-prefill-option").kendoDropDownList({dataSource:a,valuePrimitive:!0,dataTextField:"label",dataValueField:"id",optionLabel:"--"});var n=e.find(".frmb-prefill-query"),i=h.LegalQueryBuilder.init(n);i.setRules(u.ObservableUtils.getUnpacked(r,"preFill")),i.event.register(function(){return r.set("preFill",i.getRules())})}};new kendo.View(e,n).render(t)},t.prototype.preFillToArray=function(e){var t=u.ObservableUtils.getUnpacked(e,g)||{},n=r.map(t,function(t,e){return{optionId:e,preFill:t}}),i=new kendo.data.ObservableArray(n);return i.bind("change",function(){var t=r.reduce(i.toJSON(),function(t,e){return e.optionId&&e.preFill&&(t[e.optionId]=e.preFill),t},{});e.set(g,t)}),i},t.prototype.optionDataSource=function(t){var e={transport:c.LocalTransport.bind(t.get("options"))},n=new kendo.data.DataSource(e);return n.read(),n},t}(n.ComplianceFormFilterControl);e.ComplianceFormLikertControl=k}),define("compliance/form/controls/ComplianceFormLikertRadioControl",["require","exports","tslib","./ComplianceFormLikertControl","compliance/data/ComplianceFormElementType"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormLikertRadioControl=void 0;var r=a.ComplianceFormElementType.LIKERT_RADIO,o=function(t){function e(){return t.call(this,r)||this}return n.__extends(e,t),e}(i.ComplianceFormLikertControl);e.ComplianceFormLikertRadioControl=o}),define("compliance/form/controls/ComplianceFormLikertCheckboxControl",["require","exports","tslib","./ComplianceFormLikertControl","compliance/data/ComplianceFormElementType"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormLikertCheckboxControl=void 0;var r=a.ComplianceFormElementType.LIKERT_CHECKBOX,o=function(t){function e(){return t.call(this,r)||this}return n.__extends(e,t),e}(i.ComplianceFormLikertControl);e.ComplianceFormLikertCheckboxControl=o}),define("text!templates/compliance/form/control/blank.edit.html",[],function(){return'\n<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td colspan="2">\n\t\t\t\t<p data-i18n="compliance:forms.builder.blankDescription"></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.size"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domosformbuildersize" data-bind="value: size"/>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>'}),define("compliance/form/controls/ComplianceFormBlankControl",["require","exports","tslib","compliance/data/ComplianceFormElementType","core/form/FormBuilderSize","./ComplianceFormControl","i18n","text!templates/compliance/form/control/blank.edit.html","core/form/FormBuilderSize"],function(t,e,n,i,a,r,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormBlankControl=void 0;var l=i.ComplianceFormElementType.BLANK,s=function(t){function e(){return t.call(this,l)||this}return n.__extends(e,t),e.prototype.filterRule=function(t){return[]},e.prototype.defaultConfiguration=function(){return{id:i.ComplianceFormElementType.getStringId(l),reuseId:"",label:"",required:!1,size:a.FormBuilderSize.HALF_WIDTH,activeQuery:null,optionalRating:!1}},e.prototype.edit=function(t,e,n){var i=kendo.template(d)({}),a={model:e,init:function(t){o.I18N.localize(t.sender.element)}};new kendo.View(i,a).render(t)},e.prototype.render=function(t){},e}(r.ComplianceFormControl);e.ComplianceFormBlankControl=s}),define("text!templates/compliance/form/control/form.edit.html",[],function(){return'\n<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td colspan="2">\n\t\t\t\t<p data-i18n="compliance:forms.builder.formDescription"><p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.id"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: id" readonly/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="compliance:forms.builder.form"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domoscomplianceform" data-bind="value: form"/>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>\n'}),define("text!templates/compliance/form/control/form.customize.html",[],function(){return'<label data-i18n="compliance:forms.builder.form"></label>\n<input data-role="domoscomplianceform" data-bind="value: form"/>\n<div class="formWindowButtons">\n\t<button\n\t\tclass="k-primary"\n\t\tdata-role="button"\n\t\tdata-icon="check-outline"\n\t\tdata-bind="click: addClick, enabled: isValid"\n\t\tdata-i18n="compliance:forms.builder.formActions.add"></button>\n\t<button\n\t\tdata-role="button"\n\t\tdata-icon="check-circle"\n\t\tdata-bind="click: copyClick, enabled: isValid"\n\t\tdata-i18n="compliance:forms.builder.formActions.copy"></button>\n\t<button\n\t\tdata-role="button"\n\t\tdata-icon="cancel"\n\t\tdata-bind="click: cancelClick"\n\t\tdata-i18n="compliance:forms.builder.formActions.cancel"></button>\n</div>'}),define("compliance/ui/ComplianceFormUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","compliance/repository/ComplianceFormRepository"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormUI=void 0;var r=function(){function t(){}return t.widget=n.IdWidgetUtils.createDropList("DomosComplianceForm",a.ComplianceFormRepository,!0),t.column=i.IdentifiableColumnUtils.createFactory(t.widget),t}();e.ComplianceFormUI=r}),define("compliance/form/controls/ComplianceFormSubFormControl",["require","exports","tslib","compliance/data/ComplianceFormElementType","core/form/FormBuilderSize","./ComplianceFormControl","../common/ComplianceFormUtils","core/util/Logger","text!templates/compliance/form/control/form.edit.html","text!templates/compliance/form/control/form.customize.html","i18n","compliance/ui/ComplianceFormUI"],function(t,e,p,n,i,a,m,f,r,b,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormSubFormControl=void 0;var y=n.ComplianceFormElementType.FORM,o=function(t){function e(){return t.call(this,y)||this}return p.__extends(e,t),e.prototype.filterRule=function(t){return[]},e.prototype.defaultConfiguration=function(){return{id:n.ComplianceFormElementType.getStringId(y),reuseId:"",label:"",required:!1,size:i.FormBuilderSize.FULL,activeQuery:null,optionalRating:!1,form:null}},e.prototype.edit=function(t,e,n){var i=kendo.template(r)({}),a={model:e,init:function(t){v.I18N.localize(t.sender.element)}};new kendo.View(i,a).render(t)},e.prototype.render=function(t){},e.prototype.customLabel=function(t){var e=t.form;return e?"Form: "+e.name:"Form (none)"},e.prototype.customizeCreation=function(u,c){return p.__awaiter(this,void 0,void 0,function(){var s=this;return p.__generator(this,function(t){return[2,new Promise(function(t){var e=kendo.template(b)({}),n={modal:!0,width:400,title:v.I18N.t("compliance:forms.builder.formActions.title"),visible:!1},i=$("<div>").html(e).appendTo($(document.body));v.I18N.localize(i);var a=i.kendoWindow(n).data("kendoWindow"),r=[];a.bind("close",function(){return kendo.destroy(i),i.remove(),t(r),!0});var o=s,d={form:null,locked:!1,isValid:function(){return!!this.get("form")&&!this.get("locked")},addClick:function(){var t=this.get("form");if(t){var e=p.__assign(p.__assign({},o.defaultConfiguration()),{type:y,form:t,id:u});r=[e],a.close()}},copyClick:function(){var t=this,i=this.get("form");i&&p.__awaiter(t,void 0,void 0,function(){var e,n;return p.__generator(this,function(t){switch(t.label){case 0:e=this.get("locked"),this.set("locked",!0),t.label=1;case 1:return t.trys.push([1,,3,4]),[4,m.ComplianceFormUtils.copyFormElements(i.id,c)];case 2:return n=t.sent(),r=n,a.close(),[3,4];case 3:return this.set("locked",e),[7];case 4:return[2]}})}).catch(function(t){return f.Logger.error(t)})},cancelClick:function(){r=[],a.close()}},l=kendo.observable(d);kendo.bind(i,l),a.open().center()})]})})},e}(a.ComplianceFormControl);e.ComplianceFormSubFormControl=o}),define("compliance/form/controls/ComplianceFormControls",["require","exports","lodash","./ComplianceFormHeaderControl","./ComplianceFormParagraphControl","./ComplianceFormTextControl","./ComplianceFormTextAreaControl","./ComplianceFormRadioControl","./ComplianceFormCheckboxControl","./ComplianceFormSelectControl","./ComplianceFormMultiSelectControl","./ComplianceFormNumberControl","./ComplianceFormLikertRadioControl","./ComplianceFormLikertCheckboxControl","./ComplianceFormBlankControl","./ComplianceFormSubFormControl"],function(t,e,n,i,a,r,o,d,l,s,u,c,p,m,f,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormControls=void 0;var v=[new i.ComplianceFormHeaderControl,new a.ComplianceFormParagraphControl,new r.ComplianceFormTextControl,new o.ComplianceFormTextAreaControl,new d.ComplianceFormRadioControl,new l.ComplianceFormCheckboxControl,new s.ComplianceFormSelectControl,new u.ComplianceFormMultiSelectControl,new c.ComplianceFormNumberControl,new p.ComplianceFormLikertRadioControl,new m.ComplianceFormLikertCheckboxControl,new f.ComplianceFormBlankControl,new b.ComplianceFormSubFormControl],y=n.keyBy(v,"type"),h=function(){function t(){}return t.get=function(t){if(!n.isNil(t))return y[t]},t.list=function(){return v},t}();e.ComplianceFormControls=h}),define("compliance/form/render/ComplianceFormRenderActions",["require","exports","lodash","compliance/data/ComplianceFormAction","compliance/data/ComplianceFormFeatureDisplay","core/event/DEvent","i18n"],function(t,e,i,s,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormRenderActions=void 0;var n=function(){function t(t,e,n){this.model=e,this.event=new r.DEvent(!1),this.actions=i.chain(t.actions).compact().sort().uniq().value(),this.actions.length<=0&&n.logError(o.I18N.t("compliance:forms.render.noActions")),t.formEditable||t.notes===a.ComplianceFormFeatureDisplay.EDITABLE||t.privateNotes===a.ComplianceFormFeatureDisplay.EDITABLE||t.ratings===a.ComplianceFormFeatureDisplay.EDITABLE?this.actions.indexOf(s.ComplianceFormAction.SUBMIT)<0&&this.actions.indexOf(s.ComplianceFormAction.ACCEPT)<0&&this.actions.indexOf(s.ComplianceFormAction.REJECT)<0&&this.actions.indexOf(s.ComplianceFormAction.SUBMIT_PARTIAL)<0&&n.logError(o.I18N.t("compliance:forms.render.editableNoSave")):i.isEqual(this.actions,[s.ComplianceFormAction.CANCEL])||n.logError(o.I18N.t("compliance:forms.render.onlyCancelValid"))}return t.prototype.render=function(t){var e=this,n=$("<div>").appendTo(t);return this.setupToolbar(n),this.model.kendo().bind("change",function(){return e.setupToolbar(n)}),n},t.prototype.setupToolbar=function(t){var e=this;kendo.destroy(t),t.empty();for(var n=this.model.isModified,i=this.model.isValid,a=[],r=0,o=this.actions;r<o.length;r++){var d=o[r],l=this.isActionEnabled(d,n,i);a.push({type:"button",text:s.ComplianceFormAction.getName(d),attributes:{"data-action":d},enable:l})}t.kendoToolBar({items:a,click:function(t){return e.actionClick(t)}})},t.prototype.isActionEnabled=function(t,e,n){switch(t){case s.ComplianceFormAction.CANCEL:case s.ComplianceFormAction.REJECT:case s.ComplianceFormAction.SUBMIT_PARTIAL:return!0;case s.ComplianceFormAction.SUBMIT:case s.ComplianceFormAction.ACCEPT:return e&&n;case s.ComplianceFormAction.SAVE_DRAFT:return e;default:return!1}},t.prototype.actionClick=function(t){if(t.target){var e=t.target.attr("data-action")||"",n=parseInt(e,10);n&&this.isActionEnabled(n,!0,this.model.isValid)&&this.event.fire(n)}},t}();e.ComplianceFormRenderActions=n}),define("compliance/form/render/ComplianceFormRenderFormRating",["require","exports","compliance/data/ComplianceFormFeatureDisplay","../common/ComplianceFormUtils","i18n"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormRenderFormRating=void 0;var r=function(){function t(t,e){this.display=t.ratings!==n.ComplianceFormFeatureDisplay.NOT_AVAILABLE,this.model=e}return t.prototype.render=function(t){if(!this.display)return null;var e=i.ComplianceFormUtils.formRatingLabel(),n=$("<div>").addClass("frmb-render-rating-cont").appendTo(t).append($("<span>").text(a.I18N.t("compliance:forms.render.overallRating"))).append($("<span>").addClass("frmb-render-rating").attr("data-bind","text:"+e));return kendo.bind(n,this.model.kendo()),null},t}();e.ComplianceFormRenderFormRating=r}),define("compliance/form/render/ComplianceFormRenderDocuments",["require","exports","compliance/data/ComplianceFormFeatureDisplay","core/web/WebLocation","core/ui/DateTimeUI","core/ui/grid/GridUtils","core/ui/grid/LocalTransport","i18n","core/web/WebHttp","core/util/ObservableUtils"],function(t,e,p,m,f,b,v,y,h,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormRenderDocuments=void 0;var n=function(){function t(t,e){this.display=t.documents,this.model=e}return t.prototype.render=function(t){var n=this;if(this.display===p.ComplianceFormFeatureDisplay.NOT_AVAILABLE)return null;var e=this.display===p.ComplianceFormFeatureDisplay.EDITABLE,i=this.model.runId,a=$("<div>").addClass("frmb-render-documents-cont").appendTo(t),r=$("<button>").text(y.I18N.t("compliance:forms.render.documents")).appendTo(a).kendoButton({icon:"upload"}),o=$("<div>").addClass("k-content").addClass("frmb-render-documents").css({display:"none"}).appendTo(a);r.click(function(){return o.slideToggle()});var d=v.LocalTransport.bind(this.model.documents);if(e){var l="compliance/form/document/upload.json";i&&(l=l+"?run="+encodeURIComponent(""+i)),$('<input type="file">').appendTo(o).kendoUpload({async:{saveField:"file",saveUrl:m.WebLocation.resolve(l)},multiple:!1,showFileList:!1,enabled:!!i,success:function(t){var e=t.response;e&&n.model.documents.push(e)}}),i&&(d.update=function(e){var t=g.ObservableUtils.unpack(e.data),n={run:i,data:JSON.stringify(t)};h.WebHttp.postJson("compliance/form/document.json",n).then(function(){return e.success(t)}).catch(function(t){return e.error(t)})})}var s={transport:d,schema:{model:{id:"id",fields:{id:{type:"string",editable:!1},name:{type:"string",editable:!1},userName:{type:"string",editable:!1},created:{type:"date",editable:!1},description:{type:"string"}}}},sort:{field:"name",dir:"asc"}},u=[{field:"name",title:"Document",template:function(t){var e="compliance/form/document/download?id="+encodeURIComponent(t.id);return i&&(e+="&run="+encodeURIComponent(""+i)),'<a href="'+m.WebLocation.resolve(e)+'">'+t.name+"</a>"}},{field:"description",title:"Description"},{field:"userName",title:"User"},f.DateTimeUI.column({field:"created",title:"Created"})];e&&u.unshift({command:["edit"]});var c={dataSource:s,columns:u,pageable:!1,scrollable:!1};return b.GridUtils.withDefaults(c),$("<div>").addClass("floatingGrid").appendTo(o).kendoGrid(c),$("<div>").addClass("clearer").appendTo(o),a},t}();e.ComplianceFormRenderDocuments=n}),define("compliance/form/render/ComplianceFormRenderController",["require","exports","tslib","lodash","./ComplianceFormRenderExplanation","./ComplianceFormRenderLayout","compliance/data/ComplianceFormElementType","./ComplianceFormRenderModel","./ComplianceFormRenderHeader","../controls/ComplianceFormControls","./ComplianceFormRenderActions","core/event/DEvent","./ComplianceFormRenderFormRating","i18n","./ComplianceFormRenderDocuments","core/util/PromiseUtils","core/util/CancelToken"],function(t,e,o,f,b,v,y,h,g,T,I,C,w,k,E,d,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormRenderController=void 0;var n=function(){function t(t,e,n,i,a){var r,o,d,l;this.cancelSource=D.CancelToken.source(),this.$forDestroying=[],this.event=new C.DEvent(!1),this.options=e,this.$container=$("<div>").addClass("frmb-render-cont").css({width:100*(d=n,l=d.form.width,l=Math.min(l,1),l=Math.max(l,.1))+"%","font-size":100*(r=n,o=r.form.fontSize,o=Math.min(o,5),o=Math.max(o,.1))+"%","background-color":n.form.backgroundColor}).appendTo(t),a=a||new b.ComplianceFormRenderExplanation;var s,u,c,p,m=(s=n.form,u=a,c={},p=0,f.chain(s.elements).map(function(t){var e=u.forElement(t),n=t.id;n?(c[n]&&e.logError(k.I18N.t("compliance:forms.render.duplicateId")),c[n]=!0):e.logError(k.I18N.t("compliance:forms.render.missingId"));var i=t.type;i===y.ComplianceFormElementType.FORM&&e.logError(k.I18N.t("compliance:forms.render.formElementsFlattened"));var a=T.ComplianceFormControls.get(i);if(a)return{questionNumber:y.ComplianceFormElementType.isQuestion(i)?++p:0,element:t,control:a,explanation:e};e.logError(k.I18N.t("compliance:forms.render.unknownControl",{id:y.ComplianceFormElementType.getStringId(t.type)}))}).compact().value());this.model=new h.ComplianceFormRenderModel(m,n,i,this.options),this.render(m,a)}return t.prototype.getHistoryData=function(){return this.model.toHistory()},t.prototype.destroy=function(){this.cancelSource.cancel(),this.event.clear(),this.$container.hide(),d.PromiseUtils.consume(this.destroyAsync())},t.prototype.destroyAsync=function(){return o.__awaiter(this,void 0,void 0,function(){var e,n,i,a,r;return o.__generator(this,function(t){switch(t.label){case 0:e=f.compact(this.$forDestroying),n=function(e){return o.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,d.PromiseUtils.asPromise(function(){return kendo.destroy(e)})];case 1:return t.sent(),[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}})},i=0,a=e,t.label=1;case 1:return i<a.length?(r=a[i],[5,n(r)]):[3,4];case 2:t.sent(),t.label=3;case 3:return i++,[3,1];case 4:return this.$container.remove(),[2]}})})},t.prototype.render=function(t,e){this.renderForm(t,e)},t.prototype.renderForm=function(t,e){var n=this;if(t.length<=0)e.logError(k.I18N.t("compliance:forms.render.formEmptyError"));else{var i=!this.options.formEditable,a=new I.ComplianceFormRenderActions(this.options,this.model,e),r=new w.ComplianceFormRenderFormRating(this.options,this.model),o=new E.ComplianceFormRenderDocuments(this.options,this.model),d=new g.ComplianceFormRenderHeader(this.options,this.model);this.$forDestroying.push(a.render(this.$container)),this.$forDestroying.push(r.render(this.$container)),this.$forDestroying.push(o.render(this.$container));var l=new v.ComplianceFormRenderLayout(this.$container);this.$forDestroying.push(r.render(this.$container)),this.$forDestroying.push(a.render(this.$container));for(var s=0,u=t;s<u.length;s++){var c=u[s],p=c.element,m=l.next(p.size);this.$forDestroying.push(m),d.render(m,c);var f=i&&this.model.isInactive(p),b={$element:$("<div>").appendTo(m),element:p,readOnly:i,disabled:f};c.control.render(b)}l.bind(this.model.kendo()),d.postInit(this.model,this.cancelSource.token),a.event.register(function(t){return n.event.fire(t)})}},t}();e.ComplianceFormRenderController=n}),define("compliance/form/ComplianceFormRender",["require","exports","tslib","./ComplianceFormRenderOptions","./render/ComplianceFormRenderController","core/event/DEvent","../data/ComplianceFormRating"],function(t,e,o,d,l,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormRender=void 0;var i=function(){function t(t){this.event=new n.DEvent(!1),this.$element=t}return t.prototype.getHistoryData=function(){return this.controller?this.controller.getHistoryData():{}},t.prototype.render=function(t,e,n,i){var a=this;this.controller&&(this.controller.destroy(),this.controller=void 0);var r=o.__assign(o.__assign(o.__assign({},d.kComplianceFormRenderNoneOptions),t),{displayQuestionNumbers:e.form.displayQuestionNumbers});this.controller=new l.ComplianceFormRenderController(this.$element,r,e,n,i),this.controller.event.register(function(t){return a.event.fire(t)})},t.prototype.destroy=function(){this.event.clear(),this.controller&&this.controller.destroy(),this.controller=void 0},t}();e.ComplianceFormRender=i}),define("compliance/form/ComplianceFormOverlay",["require","exports","tslib","./ComplianceFormRender","./ComplianceFormRenderOptions","core/util/PromiseUtils"],function(t,e,o,d,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceFormOverlay=void 0;var u="frmb-overlay-body",c="frmb-overlay-hidden",n=function(){function t(){}return t.display=function(t){var e=this;if(t){var n=$(document.body);n.addClass(u);var i=$("<div>").addClass("frmb-overlay").addClass(c).appendTo(n),a=$("<div>").addClass("frmb-overlay-content").appendTo(i);t.form.backgroundColor="white";var r=new d.ComplianceFormRender(a);r.render(l.kComplianceFormRenderReadonlyOptions,t);r.event.register(function(){return s.PromiseUtils.consume(o.__awaiter(e,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return i.addClass(c),[4,s.PromiseUtils.wait(400)];case 1:return t.sent(),r.destroy(),i.remove(),n.removeClass(u),[2]}})}))}),i.removeClass(c)}},t}();e.ComplianceFormOverlay=n}),define("text!templates/compliance/compliance.production.updatable.html",[],function(){return'<div>\n\t<div class="floatThird">\n\t\t<table class="formTable">\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="cpProdAcceptance" data-i18n="compliance:production.acceptanceDate"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="cpProdAcceptance" class="k-textbox" data-bind="value: acceptanceDateStr" readonly/>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="cpProdNextDue" data-i18n="compliance:production.nextDueDate"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="cpProdNextDue" class="k-textbox" data-bind="value: customNextDueDateStr, attr: {placeholder: defaultNextDueDateStr}" readonly/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="cpProdScore" data-i18n="compliance:production.formScore"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="cpProdScore" class="k-textbox" data-bind="value: customFormScoreStr, attr: {placeholder: calculatedFormScoreStr" readonly/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td  colspan="4">\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tclass="k-textbox"\n\t\t\t\t\t\trows="2"\n\t\t\t\t\t\tdata-i18n="[placeholder]compliance:production.commentsPlaceholder"\n\t\t\t\t\t\tdata-bind="value: workflow.comments"\n\t\t\t\t\t\treadonly></textarea>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<button class="k-button" data-i18n="compliance:production.actions.updateWorkflow" data-bind="click: updateWorkflow"></button>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n\t<div class="clearer"></div>\n</div>'}),define("compliance/views/production/ComplianceProductionUtils",["require","exports","../util/ComplianceViewUtil","i18n","document/ui/DocumentUI","compliance/data/ComplianceDocumentResponse","core/ui/grid/GridUtils","compliance/form/ComplianceFormOverlay","core/ui/DateTimeUI","lodash","core/util/DateUtils","compliance/data/aml/AmlHitType","core/ui/DateUI","text!templates/compliance/compliance.production.updatable.html","jquery","kendo","document/web/DocumentMap"],function(t,e,d,l,a,r,o,s,u,c,p,m,f,b,v,y,h){"use strict";function g(t,e){if(!(e.length<=0)){v("<h4>").text(l.I18N.t("compliance:production.checkList")).appendTo(t);var n=v("<div>").addClass("floatingGrid").appendTo(t);v("<div>").addClass("clearer").appendTo(t);var i={dataSource:{data:e,schema:{model:{id:"id",fields:{name:{type:"string",editable:!1},description:{type:"string",editable:!1},checked:{type:"boolean"},document:{nullable:!0}},documentName:o.GridUtils.modelName("document")}}},editable:!1,groupable:!1,filterable:!1,sortable:!1,pageable:!1,scrollable:!1,reorderable:!1,resizable:!1,columnMenu:!1,columns:[{field:"name",title:"Title"},{field:"description",title:"Description"},{field:"checked",title:"Checked"},function(t){(t=a.DocumentUI.Link.column(t)).groupable=!1,t.sortable=!1,t.filterable=!1;var n=t.template;return t.template=function(t){if(n){var e=n(t);if(e)return e}return'<span class="compliancePlaceholder">'+(r.ComplianceDocumentResponse.getName(t.documentResponse)||"")+"</span>"},t}({field:"document",title:"Document"}),a.DocumentUI.Thumbnail.column({field:"document",title:"Thumbnail"})]};o.GridUtils.withDefaults(i),n.kendoGrid(i)}}function T(t,n){v("<h4>").text(l.I18N.t("compliance:production.form")).appendTo(t),v("<button>").addClass("k-button").attr("name",I.OPEN_FORM_BUTTON_NAME).text(l.I18N.t("compliance:production.openForm")).click(function(t){var e;e=n,s.ComplianceFormOverlay.display(e)}).appendTo(t),v("<p>").appendTo(t);var e=c.chain(n.histories).filter(function(t){return 1950<t.date.getFullYear()}).map(function(t,e){return{id:e+1,user:t.user,date:t.date}}).value();if(!(e.length<=0)){var i={dataSource:{data:e,schema:{model:{id:"id",field:{user:{type:"string"},date:{type:"date"}}}},sort:{field:"date",dir:"asc"}},editable:!1,scrollable:!1,pageable:!1,columns:[{field:"user",title:"User"},u.DateTimeUI.column({field:"date",title:"Date"})]};v("<div>").addClass("floatingGrid").appendTo(t).kendoGrid(i),v("<div>").addClass("clearer").appendTo(t)}}Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceProductionUtils=void 0;var I=function(){function t(){}return t.displayData=function(t,e,n){var i,a,r,o;!function(t,e){var n=e.workflow();if(n){var i=n.status;if(i){var a=d.ComplianceViewUtil.getCss(n.statusOk),r=n.actionPlan;r&&(i+=" ("+r+")"),v("<h4>").appendTo(t).append(v("<span>").text(l.I18N.t("compliance:production.status")+": ")).append(v("<span>").addClass(a).text(i))}}}(t,e),function(t,e,n){if(e.workflow()){var i=n.formScore;c.isUndefined(i)||e.setCalculatedFormScore(i);var a=v("<div>").appendTo(t);v("<h4>").text(l.I18N.t("compliance:production.data")).appendTo(a);var r=y.template(b)({}),o={model:e.kendo(),init:function(t){l.I18N.localize(t.sender.element)}};new y.View(r,o).render(v("<div>").appendTo(a))}}(t,e,n),n.checkList&&g(t,n.checkList),n.form&&T(t,n.form),n.amlCheckFormResult&&function(t,e){v("<h3>").text(l.I18N.t("compliance:production.amlCheckForm")).appendTo(t);var n=null,i="Not checked",a=null;e.amlCheck&&e.amlCheck.lastFired&&(a=p.DateUtils.toString(e.amlCheck.lastFired),0===e.amlRegisteredHits.length?(n=!0,i="Clean"):(n=!1,i="Hits found"));var r=d.ComplianceViewUtil.getCss(n);if(v("<h4>").appendTo(t).append(v("<span>").text(l.I18N.t("compliance:production.amlCheckStatus")+": ")).append(v("<span>").addClass(r).text(i)),a&&v("<h4>").appendTo(t).append(v("<span>").text(l.I18N.t("compliance:production.amlCheckDate")+": ")).append(v("<span>").text(a)),0<e.amlRegisteredHits.length){var o={dataSource:{data:e.amlRegisteredHits,schema:{model:{id:"id",fields:{name:{type:"string",nullable:!1,editable:!1},firstName:{type:"string",nullable:!0,editable:!1},nationality:{type:"string",nullable:!0,editable:!1},reason:{type:"string",nullable:!0,editable:!1},hitType:{nullable:!0,editable:!1},listName:{type:"string",nullable:!0,editable:!1},score:{type:"number",nullable:!0,editable:!1},lastUpdate:{type:"date",nullable:!0,editable:!1}}}}},editable:!1,scrollable:!1,pageable:!1,columns:[{field:"name",title:l.I18N.t("compliance:aml.trackedHitsGrid.name"),width:150},{field:"firstName",title:l.I18N.t("compliance:aml.trackedHitsGrid.foreName"),width:150},{field:"nationality",title:l.I18N.t("compliance:aml.trackedHitsGrid.nationality"),width:120},{field:"reason",title:l.I18N.t("compliance:aml.trackedHitsGrid.reason")},m.AmlHitType.column({field:"hitType",title:l.I18N.t("compliance:aml.trackedHitsGrid.hitType"),width:200}),{field:"listName",title:l.I18N.t("compliance:aml.trackedHitsGrid.listName"),width:110},{field:"score",title:l.I18N.t("compliance:aml.trackedHitsGrid.score"),width:80},f.DateUI.column({field:"lastUpdate",title:l.I18N.t("compliance:aml.trackedHitsGrid.lastUpdate"),width:130})]};v("<div>").addClass("floatingGrid").appendTo(t).kendoGrid(o),v("<div>").addClass("clearer").appendTo(t)}}(t,n.amlCheckFormResult),n.amlReportData&&(i=t,a=n.amlReportData,r=v("<h4>").text(l.I18N.t("compliance:production.amlReport")).appendTo(i),o=v("<p>").appendTo(r),v("<a>").text(a.fileName).attr("href",h.DocumentMap.downloadUrl(a.documentId)).appendTo(o))},t.OPEN_FORM_BUTTON_NAME="openForm",t}();e.ComplianceProductionUtils=I}),define("compliance/data/ComplianceWorkflowType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/util/EnumUtils"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceWorkflowType=void 0;var a,r;(a=e.ComplianceWorkflowType||(e.ComplianceWorkflowType={}))[a.DUE_DILIGENCE=1]="DUE_DILIGENCE",a[a.REVIEW=2]="REVIEW",a[a.ON_SITE=3]="ON_SITE",(r=e.ComplianceWorkflowType||(e.ComplianceWorkflowType={})).getName=i.EnumUtils.createNameFn("compliance:ComplianceWorkflowType",r),r.column=n.EnumColumnUtils.createFactory(r)}),define("object/views/compliance/ComplianceEntityGrid",["require","exports","tslib","i18n","compliance/web/ComplianceMap","core/ui/grid/GridUtils","lodash","compliance/views/aml/TrackingHitsGrid","compliance/views/production/ComplianceProductionModel","compliance/repository/ComplianceWorkflowRepository","core/util/Logger","core/util/ObservableUtils","object/ui/EntityUI","core/ui/DateTimeUI","compliance/data/aml/AmlHitType","core/ui/DateUI","compliance/views/production/ComplianceProductionUtils","compliance/data/ComplianceWorkflowType","compliance/data/ComplianceFormRating","compliance/views/util/ComplianceViewUtil"],function(t,e,s,d,r,l,u,c,p,m,f,b,v,y,h,g,T,o,i,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceEntityGrid=void 0;var C=kendo.data.Model.define({id:"id",fields:{type:{type:"number"},task:{nullable:!1},fund:{nullable:!0},taskRating:{type:"number"}},taskName:l.GridUtils.modelName("task"),fundName:l.GridUtils.modelName("fund"),customFormScoreStr:function(){var t=this.get("workflow"),e=u.isNil(t)?null:t.customFormScore,n=i.ComplianceFormRating.getRatingEnum(e);return i.ComplianceFormRating.getName(n)||"N/A"}});function w(r,o){return s.__awaiter(this,void 0,void 0,function(){var e,n,i,a;return s.__generator(this,function(t){return r&&(0<(e=r.select()).length?(n=r.dataItem(e[0]).toJSON())&&(o.set("hasTask",!0),o.set("taskName",n.task.name),n.review&&(o.set("dueDate",n.review.dueDate),o.set("nextDate",n.review.nextDate),n.checkName?(o.set("hasChackName",!0),(new c.TrackingHitsGrid).createAndDisplay($("#checkNameDetailGrid"),n.checkName)):o.set("hasChackName",!1),i=new p.ComplianceProductionModel,(a=n.workflow)&&(i.setWorkflow(a),o.set("workflowName",i.kendo().get("workflowName")),o.set("acceptanceDate",i.kendo().get("acceptanceDateStr")),o.set("customDueDate",a.customDueDate),o.set("customFormScore",i.kendo().get("customNextDueDateStr")),o.set("comments",a.comments),m.ComplianceWorkflowRepository.fetchWorkflowData(a.id).then(function(t){var e=$("#workflowData");kendo.destroy(e),e.empty(),T.ComplianceProductionUtils.displayData(e,i,t),function(t,e){if(!u.isEmpty(e)&&e){$("<h4>").text(d.I18N.t("compliance:overview.checkName")).appendTo(t);var n=$("<div>").addClass("floatingGrid").appendTo(t);$("<div>").addClass("clearer").appendTo(t);var i={dataSource:{data:e,schema:{model:{id:"id",fields:{name:{type:"string"},firstName:{type:"string"},reason:{type:"string"},nationality:{type:"string"},birthDate:{type:"string"},hitType:{nullable:!0},listNumber:{type:"number"},listName:{type:"string"},score:{type:"number"},lastUpdate:{type:"date"},isPerson:{type:"boolean"},isActive:{type:"boolean"},trackedObject:{nullable:!1},responseTime:{type:"date"}},trackedObjectName:function(){return b.ObservableUtils.get(this,"trackedObject.name")||""}}}},editable:!1,scrollable:!0,groupable:!1,filterable:!1,sortable:!1,reorderable:!1,resizable:!1,pageable:l.GridUtils.defaultPageable(),columns:[v.EntityUI.column({field:"trackedObject",title:d.I18N.t("compliance:aml.trackedHitsGrid.trackedObject"),width:200}),y.DateTimeUI.column({field:"responseTime",title:d.I18N.t("compliance:aml.trackedHitsGrid.verifiedOn"),width:150}),{field:"name",title:d.I18N.t("compliance:aml.trackedHitsGrid.name"),width:150},{field:"firstName",title:d.I18N.t("compliance:aml.trackedHitsGrid.foreName"),width:150},{field:"nationality",title:d.I18N.t("compliance:aml.trackedHitsGrid.nationality"),width:120},{field:"reason",title:d.I18N.t("compliance:aml.trackedHitsGrid.reason")},{field:"birthDate",title:d.I18N.t("compliance:aml.trackedHitsGrid.birthDate"),width:110},h.AmlHitType.column({field:"hitType",title:d.I18N.t("compliance:aml.trackedHitsGrid.hitType"),width:200}),{field:"listNumber",title:d.I18N.t("compliance:aml.trackedHitsGrid.listNumber"),hidden:!0},{field:"listName",title:d.I18N.t("compliance:aml.trackedHitsGrid.listName"),width:110},{field:"score",title:d.I18N.t("compliance:aml.trackedHitsGrid.score"),width:80},g.DateUI.column({field:"lastUpdate",title:d.I18N.t("compliance:aml.trackedHitsGrid.lastUpdate"),width:130}),{field:"isPerson",title:d.I18N.t("compliance:aml.trackedHitsGrid.isPerson"),width:105},{field:"isActive",title:d.I18N.t("compliance:aml.trackedHitsGrid.isActive"),width:105}]};l.GridUtils.withDefaults(i),n.kendoGrid(i)}}(e,n.checkName),e.find(".k-button").each(function(t,e){e.getAttribute("name")!==T.ComplianceProductionUtils.OPEN_FORM_BUTTON_NAME&&$(e).hide()})}).catch(function(t){f.Logger.error(t)})))):o.set("hasTask",!1)),[2]})})}function k(t,n){return{transport:{read:function(e){(function(d,l){return s.__awaiter(this,void 0,void 0,function(){var e,a,n,i,r,o;return s.__generator(this,function(t){switch(t.label){case 0:return[4,(new p.ComplianceProductionModel).loadWorkflows()];case 1:for(e=t.sent(),a=[],u.each(d,function(i){u.forEach(e,function(t){var e=t.kciTask;if(e&&e.id===i.task.id&&t.serviceProvider.id===l){var n=u.map(i.suppliers,function(t){return t.checkName});a.push({workflow:t,type:t.type,task:i.task,fund:t.fund,taskRating:i.taskRating,checkName:n[0],review:u.first(u.map(i.suppliers,function(t){return t.review}))})}})}),n=new kendo.data.ObservableArray([]),i=0,r=a;i<r.length;i++)o=r[i],n.push(new C(o));return[2,n]}})})})(t,n).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})}},schema:{model:C},sort:{field:"taskName()",dir:"asc"}}}var n=function(){function t(){}return t.display=function(t,e,n){kendo.destroy(t),t.empty(),function(n,i,a){s.__awaiter(this,void 0,void 0,function(){var e;return s.__generator(this,function(t){return e={dataSource:k(i,a.get("entityId")),columns:[o.ComplianceWorkflowType.column({field:"type",title:d.I18N.t("compliance:production.type"),width:150}),{field:"task",title:d.I18N.t("compliance:production.kciTask"),width:350,template:function(t){var e=t.get("task"),n=e.name,i=r.ComplianceMap.task(e.id);return i?'<a class="d-link" href="'+i+'">'+kendo.htmlEncode(n)+"</a>":n||""}},{field:"status",title:d.I18N.t("compliance:production.status"),template:function(t){var e=t.get("workflow"),n=u.isNil(e)?null:e.statusOk,i=u.isNil(e)?"":e.status;return'<span class="'+I.ComplianceViewUtil.getCss(n)+'">'+kendo.htmlEncode(i)+"</span>"},width:200},v.EntityUI.Legal.Vehicle.column({field:"fund",title:d.I18N.t("compliance:production.fund"),width:150}),{field:"customFormScoreStr()",title:d.I18N.t("compliance:production.formScore"),width:200},{field:"comments",title:d.I18N.t("compliance:production.comments"),template:function(t){var e=t.get("workflow");return u.isNil(e)?"":e.comments},width:350}],scrollable:!0,pageable:l.GridUtils.defaultPageable(),editable:!1,height:400,toolbar:[{name:"excel"}],change:function(t){w(t.sender,a)},dataBound:function(t){w(t.sender,a)}},l.GridUtils.withDefaults(e),n.kendoGrid(e),[2]})})}(t,e,n)},t}();e.ComplianceEntityGrid=n}),define("object/views/compliance/ComplianceEntityView",["require","exports","text!templates/object/object.conformity.html","i18n","core/util/Logger","compliance/repository/ComplianceOverviewRepository","core/data/DObservableBuilder","lodash","./ComplianceEntityGrid"],function(t,e,o,d,a,r,l,s,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceEntityView=void 0;function c(n,i){r.ComplianceOverviewRepository.computeForEntity(i.get("entityId"),i.get("checkDate")).then(function(t){var e=s.flatMap(t.plans,function(t){return s.flatMap(t.keyIndicators,function(t){return t.tasks})});u.ComplianceEntityGrid.display(n.find("#complianceResult"),e,i)}).catch(function(t){a.Logger.error(t)})}var n=function(){function t(){}return t.init=function(e,t){if(t){kendo.destroy(e),e.empty();var n={entityId:t,checkDate:null,hasTask:!1,hasChackName:!1,taskName:"",dueDate:null,nextDate:null,workflowName:"",acceptanceDate:null,customDueDate:null,customFormScore:"",comments:""},i=l.DObservableBuilder.of(n).add("computeChecksList",function(t){c(e,t)}).build(),a={model:i.kendo(),init:function(t){var e=t.sender.element;d.I18N.localize(e)},show:function(t){t.preventDefault(),c(e,i)}},r=kendo.template(o)({});new kendo.View(r,a).render(e)}},t}();e.ComplianceEntityView=n}),define("text!templates/compliance/compliance.aml.tracked.entities.html",[],function(){return'<div style="display: flex; flex-direction: column; align-items: center;">\n\t<h2 data-i18n="compliance:aml.trackedEntities.title">Title</h2>\n\t<p></p>\n\t<div id="trackedEntitiesGrid" class="floatingGrid"></div>\n\t<p></p>\n\t<h2 id="hitsGridTitle" data-i18n="compliance:aml.trackedEntities.hitsTitle">Title</h2>\n\t<p></p>\n\t<div id="hitsGrid" class="floatingGrid"></div>\n\t<p></p>\n\t<h2 id="newsGridTitle" data-i18n="compliance:aml.trackedEntities.newsTitle">Title</h2>\n\t<p></p>\n\t<div id="newsGrid" class="floatingGrid"></div>\n</div>\n'}),define("text!templates/compliance/compliance.aml.tracked.entities.grid.toolbar.html",[],function(){return'<div class="k-header k-grid-toolbar">\n    <a class="k-button" data-bind="click: exportAsExcel, enabled: hasData">\n        <span class="k-icon k-i-excel"></span>\n        #=$.t("site:export.excel")#\n    </a>\n    <a class="k-button" data-bind="click: deactivatePeriodicalCheck, visible: canDeactivate">\n        #=$.t("compliance:aml.trackedEntitiesGrid.deactivatePeriodicalCheck")#\n    </a>\n    <a class="k-button" data-bind="click: reactivatePeriodicalCheck, visible: canActivate">\n        #=$.t("compliance:aml.trackedEntitiesGrid.reactivatePeriodicalCheck")#\n    </a>\n    <a class="k-button" data-bind="click: stopTracking, visible: canStopTracking">\n        <span class="k-icon k-i-close"></span>\n        #=$.t("compliance:aml.trackedEntitiesGrid.stopTracking")#\n    </a>\n</div>'}),define("compliance/data/aml/AmlHitStatus",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AmlHitStatus=void 0;var r,o;(r=e.AmlHitStatus||(e.AmlHitStatus={}))[r.UNKNOWN=1]="UNKNOWN",r[r.TO_BE_CHECKED=2]="TO_BE_CHECKED",r[r.CHECKED_CLEAN=3]="CHECKED_CLEAN",r[r.CHECKED_DIRTY=4]="CHECKED_DIRTY",(o=e.AmlHitStatus||(e.AmlHitStatus={})).getName=a.EnumUtils.createNameFn("compliance:aml.AmlHitStatus",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAmlCheckStatus",o,!1,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("compliance/data/aml/AmlNewsStatus",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AmlNewsStatus=void 0;var r,o;(r=e.AmlNewsStatus||(e.AmlNewsStatus={}))[r.UNKNOWN=1]="UNKNOWN",r[r.NOT_APPLICABLE=2]="NOT_APPLICABLE",r[r.TO_BE_CHECKED=3]="TO_BE_CHECKED",r[r.CHECKED_CLEAN=4]="CHECKED_CLEAN",r[r.CHECKED_DIRTY=5]="CHECKED_DIRTY",(o=e.AmlNewsStatus||(e.AmlNewsStatus={})).getName=a.EnumUtils.createNameFn("compliance:aml.AmlNewsStatus",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAmlCheckStatus",o,!1,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("text!templates/compliance/compliance.aml.trackingNews.grid.toolbar.html",[],function(){return'<div class="k-header k-grid-toolbar">\n    <a href="javascript:void(0)" class="k-button k-button-icontext k-grid-save-changes" data-bind="click: saveChanges, enabled: hasChanges">\n        <span class="k-icon k-i-check"></span>\n        #=$.t("compliance:aml.grids.actions.saveChanges")#\n    </a>\n    <a href="javascript:void(0)" class="k-button k-button-icontext k-grid-cancel-changes" data-bind="click: cancelChanges, enabled: hasChanges">\n        <span class="k-icon k-i-cancel"></span>\n        #=$.t("compliance:aml.grids.actions.cancelChanges")#\n    </a>\n    <a class="k-button" data-bind="click: delete, enabled: isSelected">\n        <span class="k-icon k-i-close"></span>\n        #=$.t("compliance:aml.trackedNewsGrid.delete")#\n    </a>\n    <a class="k-button" data-bind="click: exportAsExcel, enabled: hasData">\n        <span class="k-icon k-i-excel"></span>\n        #=$.t("site:export.excel")#\n    </a>\n</div>'}),define("compliance/views/aml/TrackingNewsGrid",["require","exports","lodash","core/ui/grid/GridUtils","i18n","core/ui/grid/GridToolbar","compliance/repository/AmlRepository","core/ui/DateUI","object/ui/EntityUI","text!templates/compliance/compliance.aml.trackingNews.grid.toolbar.html","core/data/DObservableBuilder","core/ui/Confirmation","core/util/ObservableUtils","core/util/PromiseUtils","lodash"],function(t,e,i,s,u,c,p,m,f,b,a,r,v,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TrackingNewsGrid=void 0;function l(){}function y(e,n){return a.DObservableBuilder.of({id:0,requestId:0,trackedObject:{id:0,name:"",category:0},title:"",extract:"",address:"",tag:"",publisher:null,publishDate:null,updateTime:null,name:"",firstName:"",lastFired:null,comments:null}).add("isSelected",function(){return 0<e.length}).add("hasData",function(){return n&&!i.isEmpty(n.dataSource.data())}).add("exportAsExcel",function(){n&&n.saveAsExcel()}).add("hasChanges",function(){return!!n&&n.dataSource.hasChanges()}).add("saveChanges",function(){n&&n.dataSource.sync()}).add("cancelChanges",function(){n&&n.cancelChanges()}).add("delete",function(){0<e.length&&r.Confirmation.confirmDelete(u.I18N.t("compliance:aml.trackedNewsGrid.confirmDelete")).then(function(t){if(t)return p.AmlRepository.deleteTrackedNews(e[0].id).then(function(){n&&n.dataSource.read()})}).catch(l)}).build()}var n=function(){function t(t){this.kendoGrid=null,this.viewModel=t}return t.prototype.refresh=function(){this.kendoGrid&&this.kendoGrid.dataSource.read()},t.prototype.getGridData=function(){return null==this.kendoGrid?[]:this.kendoGrid.dataSource.data().toJSON()},t.prototype.createAndDisplay=function(i,t){var a,n=this,e=kendo.template(b),r={transport:{read:function(e){n.readTrackedData(t).then(function(t){n.viewModel&&n.viewModel.set("retainedNewsExist",0<t.length),e.success(t)}).catch(e.error)},update:function(t){p.AmlRepository.saveTrackingNewsComments(t.data.models).then(t.success).catch(t.error)}},batch:!0,schema:{model:{id:"id",fields:{trackedObject:{nullable:!1,editable:!1},title:{type:"string",nullable:!1,editable:!1},extract:{type:"string",nullable:!1,editable:!1},address:{type:"string",nullable:!0,editable:!1},tag:{type:"string",nullable:!0,editable:!1},publisher:{type:"string",nullable:!0,editable:!1},publishDate:{type:"date",nullable:!0,editable:!1},updateTime:{type:"date",nullable:!0,editable:!1},name:{type:"string",nullable:!1,editable:!1},firstName:{type:"string",nullable:!1,editable:!1},lastFired:{type:"date",nullable:!0,editable:!1},comments:{type:"string",nullable:!0,editable:!0}},trackedObjectName:function(){return v.ObservableUtils.get(this,"trackedObject.name")||""}}}},o=(new c.GridToolbar).addExcel(),d={dataSource:r,editable:!0,scrollable:!0,pageable:s.GridUtils.defaultPageable(),toolbar:o.template(),columns:[f.EntityUI.column({field:"trackedObject",title:u.I18N.t("compliance:aml.trackedNewsGrid.trackedObject"),width:170,editable:function(){return!1}}),{field:"name",title:u.I18N.t("compliance:aml.trackedNewsGrid.name"),width:150,editable:function(){return!1}},{field:"firstName",title:u.I18N.t("compliance:aml.trackedNewsGrid.foreName"),width:120,editable:function(){return!1}},{field:"title",title:u.I18N.t("compliance:aml.newsGrid.title"),width:400,template:function(t){return'<a class="d-link" target="_blank" href="'+t.address+'">'+t.title+"</a>"},editable:function(){return!1}},{field:"tag",title:u.I18N.t("compliance:aml.newsGrid.tag"),width:100,editable:function(){return!1}},{field:"publisher",title:u.I18N.t("compliance:aml.newsGrid.publisher"),width:250,editable:function(){return!1}},m.DateUI.column({field:"publishDate",title:u.I18N.t("compliance:aml.newsGrid.publishDate"),width:150,editable:function(){return!1}}),{field:"comments",title:u.I18N.t("compliance:aml.grids.comments"),width:150}],change:function(t){var e=t.sender,n=s.GridUtils.getSelectedRows(e);0<n.length?((!a||a&&a.id!==n[0].id)&&y(n,e).bind(i),a=n[0]):(a&&y(n,e).bind(i),a=void 0)},cellClose:function(t){var e=t.sender;y(s.GridUtils.getSelectedRows(e),e).bind(i)},dataBound:function(t){var e=t.sender;y(s.GridUtils.getSelectedRows(e),e).bind(i)}};d.toolbar=function(){return e},s.GridUtils.withDefaults(d),kendo.destroy(i),i.empty(),i.kendoGrid(d);var l=i.data("kendoGrid");o.bind(i),i.kendoTooltip({filter:"tr",position:"bottom",width:600,content:function(t){var e=l.dataItem(t.target.closest("tr")).get("extract");setTimeout(function(){t.sender.content.html("<div style='text-align:justify;'><p> "+e+"</p></div>")},1)}}).data("kendoTooltip"),this.kendoGrid=l},t.prototype.readTrackedData=function(t){if(void 0!==t)return(n=t).length<=0||d.isNumber(n[0])?p.AmlRepository.listTrackingNewsForRequests(t):o.PromiseUtils.asPromise(function(){return t});if(this.viewModel){var e=this.viewModel.get("checkedObject");return e?p.AmlRepository.listTrackingNews(e.id):o.PromiseUtils.asPromise(function(){return[]})}return p.AmlRepository.listTrackingNews(null);var n},t}();e.TrackingNewsGrid=n}),define("compliance/data/aml/AmlCheckRelationType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AmlCheckRelationType=void 0;var r,o;(r=e.AmlCheckRelationType||(e.AmlCheckRelationType={}))[r.IDENTITY=1]="IDENTITY",r[r.JOINED_ENTITY=2]="JOINED_ENTITY",r[r.DIRECTOR=3]="DIRECTOR",(o=e.AmlCheckRelationType||(e.AmlCheckRelationType={})).getName=a.EnumUtils.createNameFn("compliance:aml.AmlCheckRelationType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAmlCheckRelationType",o,!1,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("compliance/views/aml/TrackedEntitiesGrid",["require","exports","lodash","core/ui/grid/GridUtils","i18n","core/ui/grid/GridToolbar","compliance/repository/AmlRepository","core/ui/DateUI","object/ui/EntityUI","core/ui/DateTimeUI","text!templates/compliance/compliance.aml.tracked.entities.grid.toolbar.html","core/data/DObservableBuilder","core/ui/Confirmation","core/util/ObservableUtils","compliance/data/aml/AmlHitStatus","./TrackingHitsGrid","compliance/data/aml/AmlNewsStatus","./TrackingNewsGrid","core/ApplicationConstants","compliance/data/aml/AmlCheckRelationType","object/ui/ObjectUtilsUI"],function(t,e,i,l,s,u,a,c,p,m,f,r,o,b,v,d,y,h,g,T,I){"use strict";function C(){}function w(t){var e,n=t.select();if(0<n.length){var i=t.dataItem(n[0]);i&&(e=i.toJSON())}return e}function k(e,t,n){return r.DObservableBuilder.of(t).add("isSelected",function(){return!!e}).add("hasData",function(){return n&&!i.isEmpty(n.dataSource.data())}).add("exportAsExcel",function(){n&&n.saveAsExcel()}).add("canDeactivate",function(){return!!(e&&g.ApplicationConstants.isAdministrator()&&e.trackingActive)}).add("canActivate",function(){return!(!e||!g.ApplicationConstants.isAdministrator()||e.trackingActive)}).add("canStopTracking",function(){return!(!e||!g.ApplicationConstants.isAdministrator())}).add("deactivatePeriodicalCheck",function(){e&&o.Confirmation.confirmDelete(s.I18N.t("compliance:aml.trackedEntitiesGrid.confirmDeactivatePeriodicalCheck")).then(function(t){if(t)return a.AmlRepository.periodicalCheck(e.checkNameRequestId,!1).then(function(){n&&n.dataSource.read()})}).catch(C)}).add("reactivatePeriodicalCheck",function(){e&&o.Confirmation.confirmDelete(s.I18N.t("compliance:aml.trackedEntitiesGrid.confirmReactivatePeriodicalCheck")).then(function(t){if(t)return a.AmlRepository.periodicalCheck(e.checkNameRequestId,!0).then(function(){n&&n.dataSource.read()})}).catch(C)}).add("stopTracking",function(){e&&o.Confirmation.confirmDelete(s.I18N.t("compliance:aml.trackedEntitiesGrid.confirmStopTracking")).then(function(t){if(t)return a.AmlRepository.stopTrackingEntity(e.checkNameRequestId).then(function(){n&&n.dataSource.read()})}).catch(C)}).build()}Object.defineProperty(e,"__esModule",{value:!0}),e.TrackedEntitiesGrid=void 0;var n=function(){function t(t,e,n,i,a){this.gridElement=t,this.hitsGridElement=n,this.hitsGridTitleElement=e,this.newsGridElement=a,this.newsGridTitleElement=i,this.hitsGrid=new d.TrackingHitsGrid,this.newsGrid=new h.TrackingNewsGrid}return Object.defineProperty(t.prototype,"element",{get:function(){return this.gridElement},enumerable:!1,configurable:!0}),t.prototype.createAndDisplay=function(i){var a,r=this,o={},t=kendo.template(f),e={transport:{read:function(t){r.readTrackedEntities(i).then(t.success).catch(t.error)}},schema:{model:{id:"checkNameRequestId",fields:{checkExtendedRequestId:{nullable:!0,editable:!1},entity:{nullable:!1,editable:!1},trackingActive:{type:"boolean",nullable:!1,editable:!1},name:{type:"string",nullable:!1,editable:!1},firstName:{type:"string",nullable:!0,editable:!1},isPerson:{type:"boolean",nullable:!1,editable:!1},dateFrom:{type:"date",nullable:!1,editable:!1},probability:{type:"number",nullable:!1,editable:!1},lastChecked:{type:"date",nullable:!0,editable:!1},hitStatus:{nullable:!1,editable:!1},newsStatus:{nullable:!1,editable:!1}},entityName:function(){return b.ObservableUtils.get(this,"entity.name")||""}}},sort:{field:"entityName()",dir:"asc"}},n=(new u.GridToolbar).addExcel(),d={dataSource:e,editable:!1,scrollable:!0,pageable:l.GridUtils.defaultPageable(),toolbar:n.template(),height:i?250:500,columns:[p.EntityUI.column({field:"entity",title:s.I18N.t("compliance:aml.trackedEntitiesGrid.entity")}),{title:s.I18N.t("compliance:aml.hitGrid.checkReason"),template:function(t){if(0===t.checkRelations.length)return"";var r="";return t.checkRelations.forEach(function(t){""!==r&&(r+="<br>");var e=T.AmlCheckRelationType.getName(t.type),n=e||"";if(t.type===T.AmlCheckRelationType.IDENTITY)r=r+"<span>"+n+"</span>";else{var i=s.I18N.t("compliance:aml.hitGrid.relationDescription",{relationType:n}),a=I.ObjectUtilsUI.getUrl(t.relatedEntity.id);r=r+"<span>"+i+'<a class="d-link" href="'+a+'">'+t.relatedEntity.name+"</a></span>"}}),r},editable:function(){return!1},width:200},{field:"name",title:s.I18N.t("compliance:aml.trackedEntitiesGrid.name")},{field:"firstName",title:s.I18N.t("compliance:aml.trackedEntitiesGrid.firstName")},{field:"isPerson",title:s.I18N.t("compliance:aml.trackedEntitiesGrid.isPerson")},c.DateUI.column({field:"dateFrom",title:s.I18N.t("compliance:aml.trackedEntitiesGrid.dateFrom"),hidden:!0}),{field:"probability",title:s.I18N.t("compliance:aml.trackedEntitiesGrid.probability"),hidden:!0},m.DateTimeUI.column({field:"lastChecked",title:s.I18N.t("compliance:aml.trackedEntitiesGrid.lastChecked")}),v.AmlHitStatus.column({field:"hitStatus",title:s.I18N.t("compliance:aml.trackedEntitiesGrid.hitStatus")}),y.AmlNewsStatus.column({field:"newsStatus",title:s.I18N.t("compliance:aml.trackedEntitiesGrid.newsStatus")}),{field:"trackingActive",title:s.I18N.t("compliance:aml.trackedEntitiesGrid.trackingActive")}],change:function(t){var e=t.sender,n=w(e);n?(!a||a&&a.checkNameRequestId!==n.checkNameRequestId)&&(k(n,o,e).bind(r.gridElement),n.hitStatus===v.AmlHitStatus.CHECKED_DIRTY?(r.hitsGridTitleElement.show(),r.hitsGrid.createAndDisplay(r.hitsGridElement,[n.checkNameRequestId])):(r.hitsGridTitleElement.hide(),kendo.destroy(r.hitsGridElement),r.hitsGridElement.empty()),n.newsStatus===y.AmlNewsStatus.CHECKED_DIRTY&&n.checkExtendedRequestId?(r.newsGridTitleElement.show(),r.newsGrid.createAndDisplay(r.newsGridElement,[n.checkExtendedRequestId])):(r.newsGridTitleElement.hide(),kendo.destroy(r.newsGridElement),r.newsGridElement.empty())):(void 0===i?(r.hitsGridTitleElement.hide(),kendo.destroy(r.hitsGridElement),r.hitsGridElement.empty(),r.newsGridTitleElement.hide(),kendo.destroy(r.newsGridElement),r.newsGridElement.empty()):r.displayAllHitsAndNews(e),a&&k(n,o,e).bind(r.gridElement)),a=n},dataBound:function(t){var e=t.sender;k(w(e),o,e).bind(r.gridElement),function(t,e){for(var n=e.find(".k-grid-header [data-field=hitStatus]").index(),i=e.find(".k-grid-header [data-field=newsStatus]").index(),a=t.tbody.children(),r=0;r<a.length;r++){var o=$(a[r]),d=t.dataItem(o).toJSON();d.hitStatus===v.AmlHitStatus.CHECKED_DIRTY?o.children().eq(n).addClass("complianceError"):d.hitStatus===v.AmlHitStatus.CHECKED_CLEAN&&o.children().eq(n).addClass("complianceOk"),d.newsStatus===y.AmlNewsStatus.CHECKED_DIRTY?o.children().eq(i).addClass("complianceError"):d.newsStatus===y.AmlNewsStatus.CHECKED_CLEAN&&o.children().eq(i).addClass("complianceOk")}}(e,r.gridElement),i&&r.displayAllHitsAndNews(e)}};return d.toolbar=function(){return t},l.GridUtils.withDefaults(d),this.hitsGridTitleElement.hide(),this.newsGridTitleElement.hide(),kendo.destroy(this.gridElement),this.gridElement.empty(),this.gridElement.kendoGrid(d),n.bind(this.gridElement),this.gridElement},t.prototype.readTrackedEntities=function(t){return a.AmlRepository.listTrackedEntities(t)},t.prototype.displayAllHitsAndNews=function(t){var e,n,i=(e=t.dataSource.data().toJSON(),n={checkNameRequestIds:[],checkExtendedRequestIds:[]},e.forEach(function(t){t.hitStatus===v.AmlHitStatus.CHECKED_DIRTY&&n.checkNameRequestIds.push(t.checkNameRequestId),t.checkExtendedRequestId&&t.newsStatus===y.AmlNewsStatus.CHECKED_DIRTY&&n.checkExtendedRequestIds.push(t.checkExtendedRequestId)}),n);this.hitsGridTitleElement.show(),this.hitsGrid.createAndDisplay(this.hitsGridElement,i.checkNameRequestIds),this.newsGridTitleElement.show(),this.newsGrid.createAndDisplay(this.newsGridElement,i.checkExtendedRequestIds)},t}();e.TrackedEntitiesGrid=n}),define("compliance/views/aml/TrackedEntitiesView",["require","exports","kendo","text!templates/compliance/compliance.aml.tracked.entities.html","i18n","./TrackedEntitiesGrid","object/ui/EntityUI"],function(t,e,n,i,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TrackedEntitiesView=void 0;var a=function(){function t(){}return t.create=function(d){var t=n.template(i)({}),e={init:function(t){var e=t.sender.element;l.I18N.localize(e);var n=e.find("#trackedEntitiesGrid"),i=e.find("#hitsGridTitle"),a=e.find("#hitsGrid"),r=e.find("#newsGridTitle"),o=e.find("#newsGrid");new s.TrackedEntitiesGrid(n,i,a,r,o).createAndDisplay(d)}};return new n.View(t,e)},t.display=function(t,e){e&&this.create(e).render(t)},t}();e.TrackedEntitiesView=a}),function(){define("views/common/contacts.grid",["jquery","lodash","i18n","ui","core/util/ObservableUtils","object/ui/EntityUI","core/api/EntityRole"],function(i,t,a,e,n,r,o){var d,l,s,u,c;return s=e.grid,u=s.transports,c=n.ObservableUtils,l=r.EntityUI,d=o.EntityRole,{init:function(t){var e,n;return e=t.model,n={dataSource:{transport:u.createLocal({data:e.get("contacts")}),schema:{model:{id:"id",fields:{entity:{nullable:!0,validation:{required:!0}},description:{type:"string"},role:{type:"number",defaultValue:d.U11},mailOrganisation:{validation:{email:!0}}},entityName:function(){return c.get(this,"entity.name")},getPhone:function(){return c.get(this,"entity.phone")},getMail:function(){return c.get(this,"entity.mail")}}}},columns:[{command:["edit","destroy"],title:" "},l.Extended.column({field:"entity",title:a.t("data:fields.contact")}),d.column({field:"role",title:a.t("data:fields.role")}),{field:"description",title:a.t("data:fields.description")},{field:"getPhone()",title:a.t("data:fields.phone"),editable:!1},{field:"getMail()",title:a.t("data:fields.mail"),editable:!1},{field:"mailOrganisation",title:a.t("data:fields.mailOrganisation")}],toolbar:["create"],pageable:s.defaultPageable(),scrollable:!1},s.withDefaults(n),i("#contactGrid").kendoGrid(n)}}})}.call(this),define("text!templates/data/edit/individual.html",[],function(){return'<div id="editRoot">\n\t<h1 data-i18n="object:individuals.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="object:individuals.edit" data-bind="invisible: isNew"></h1>\n\n\t<h2 data-bind="text: name"></h2>\n\n\t<div id="editActions"></div>\n\n\t<p></p>\n\n\t<div data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li class="k-state-active">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.advanced"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.references"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.tags"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.histories"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.documents"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.compliance"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.amlKyc"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="name" data-i18n="data:fields.name"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="name"\n\t\t\t\t\t\t\tname="name"\n\t\t\t\t\t\t\tclass="k-textbox"\n\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\tdata-bind="value: name"\n\t\t\t\t\t\t\trequired="required"\n\t\t\t\t\t\t\tdata-i18n="[validationMessage]data:validation.nameRequired"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tfor="created"\n\t\t\t\t\t\t\tdata-i18n="data:fields.creationDate"\n\t\t\t\t\t\t></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="created"\n\t\t\t\t\t\t\tname="created"\n\t\t\t\t\t\t\tclass="k-textbox"\n\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\tdata-bind="display: created"\n\t\t\t\t\t\t\tdata-format="g"\n\t\t\t\t\t\t\treadonly="readonly"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tfor="title"\n\t\t\t\t\t\t\tdata-i18n="data:fields.title"\n\t\t\t\t\t\t></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="title"\n\t\t\t\t\t\t\tname="title"\n\t\t\t\t\t\t\tclass="k-textbox"\n\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\tdata-bind="value: title"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="type" data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="type" name="type" data-bind="value: type" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tfor="firstName"\n\t\t\t\t\t\t\tdata-i18n="data:fields.firstName"\n\t\t\t\t\t\t></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="firstName"\n\t\t\t\t\t\t\tname="firstName"\n\t\t\t\t\t\t\tclass="k-textbox"\n\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\tdata-bind="value: firstName"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tfor="domosUser"\n\t\t\t\t\t\t\tdata-i18n="data:fields.user"\n\t\t\t\t\t\t></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="domosUser"\n\t\t\t\t\t\t\tdata-role="domosusercomplianceexternal"\n\t\t\t\t\t\t\tdata-bind="value: user"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tfor="middleName"\n\t\t\t\t\t\t\tdata-i18n="data:fields.middleName"\n\t\t\t\t\t\t></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="middleName"\n\t\t\t\t\t\t\tname="middleName"\n\t\t\t\t\t\t\tclass="k-textbox"\n\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\tdata-bind="value: middleName"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass="k-button"\n\t\t\t\t\t\t\tdata-i18n="object:entities.actions.portfolio"\n\t\t\t\t\t\t\tdata-bind="click: portfolioClick"\n\t\t\t\t\t\t></button>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tfor="lastName"\n\t\t\t\t\t\t\tdata-i18n="data:fields.lastName"\n\t\t\t\t\t\t></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="lastName"\n\t\t\t\t\t\t\tname="lastName"\n\t\t\t\t\t\t\tclass="k-textbox"\n\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\tdata-bind="value: lastName"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tfor="needsCertification"\n\t\t\t\t\t\t\tdata-i18n="data:fields.needsCertification"\n\t\t\t\t\t\t></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="needsCertification"\n\t\t\t\t\t\t\tname="needsCertification"\n\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\tdata-bind="checked: needsCertification"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tfor="idCardNumber"\n\t\t\t\t\t\t\tdata-i18n="data:fields.idCardNumber"\n\t\t\t\t\t\t></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="idCardNumber"\n\t\t\t\t\t\t\tname="idCardNumber"\n\t\t\t\t\t\t\tclass="k-textbox"\n\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\tdata-bind="value: idCardNumber"\n\t\t\t\t\t\t\tpattern="[a-zA-Z0-9]*"\n\t\t\t\t\t\t\tdata-i18n="[validationMessage]data:validation.idCardNumber"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tfor="passportNumber"\n\t\t\t\t\t\t\tdata-i18n="data:fields.passportNumber"\n\t\t\t\t\t\t></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="passportNumber"\n\t\t\t\t\t\t\tname="passportNumber"\n\t\t\t\t\t\t\tclass="k-textbox"\n\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\tdata-bind="value: passportNumber"\n\t\t\t\t\t\t\tpattern="[a-zA-Z0-9]*"\n\t\t\t\t\t\t\tdata-i18n="[validationMessage]data:validation.passportNumber"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tfor="company"\n\t\t\t\t\t\t\tdata-i18n="data:fields.company"\n\t\t\t\t\t\t></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="company"\n\t\t\t\t\t\t\tname="company"\n\t\t\t\t\t\t\tdata-role="domoslegalperson"\n\t\t\t\t\t\t\tdata-bind="value: company"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tfor="phone"\n\t\t\t\t\t\t\tdata-i18n="data:fields.phone"\n\t\t\t\t\t\t></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="phone"\n\t\t\t\t\t\t\tname="phone"\n\t\t\t\t\t\t\tclass="k-textbox"\n\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\tdata-bind="value: phone"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="mail" data-i18n="data:fields.mail"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="mail"\n\t\t\t\t\t\t\tname="mail"\n\t\t\t\t\t\t\tclass="k-textbox"\n\t\t\t\t\t\t\ttype="email"\n\t\t\t\t\t\t\tdata-bind="value: mail"\n\t\t\t\t\t\t\tdata-i18n="[validationMessage]data:validation.mailIncorrect"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label data-i18n="data:fields.reportingCurrency"></label>\t\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input data-role="domoscurrency" data-bind="value: reportingCurrency" data-option-label="--"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tfor="investorType"\n\t\t\t\t\t\t\tdata-i18n="data:fields.investorType"\n\t\t\t\t\t\t></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="investorType"\n\t\t\t\t\t\t\tname="investorType"\n\t\t\t\t\t\t\tdata-role="domosinvestortype"\n\t\t\t\t\t\t\tdata-bind="value: investorType"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tfor="language"\n\t\t\t\t\t\t\tdata-i18n="data:fields.language"\n\t\t\t\t\t\t></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="language"\n\t\t\t\t\t\t\tname="investorType"\n\t\t\t\t\t\t\tdata-role="domoslanguage"\n\t\t\t\t\t\t\tdata-bind="value: language"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tfor="birthDate"\n\t\t\t\t\t\t\tdata-i18n="data:fields.birthDate"\n\t\t\t\t\t\t></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="birthDate"\n\t\t\t\t\t\t\tname="birthDate"\n\t\t\t\t\t\t\tdata-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: birthDate"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tfor="placeOfBirth"\n\t\t\t\t\t\t\tdata-i18n="data:fields.placeOfBirth"\n\t\t\t\t\t\t></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="placeOfBirth"\n\t\t\t\t\t\t\tname="placeOfBirth"\n\t\t\t\t\t\t\tclass="k-textbox"\n\t\t\t\t\t\t\tdata-bind="value: placeOfBirth"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tfor="countryOfBirth"\n\t\t\t\t\t\t\tdata-i18n="data:fields.countryOfBirth"\n\t\t\t\t\t\t></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="countryOfBirth"\n\t\t\t\t\t\t\tname="countryOfBirth"\n\t\t\t\t\t\t\tdata-role="domoscountry"\n\t\t\t\t\t\t\tdata-bind="value: countryOfBirth"\n\t\t\t\t\t\t\tdata-option-label="--"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.dataByCountry"></h2>\n\t\t\t<div id="dataByCountryGrid" class="floatingGrid_600_px"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.addresses"></h2>\n\t\t\t<div id="addresses"></div>\n\n\t\t\t<h2 data-i18n="data:sections.roles"></h2>\n\n\t\t\t<div\n\t\t\t\tid="roles"\n\t\t\t\tdata-role="domosrolemultiselect"\n\t\t\t\tdata-bind="value: roles"\n\t\t\t></div>\n\t\t</div>\n\t\t\x3c!-- Advanced --\x3e\n\t\t<div>\n\t\t\t<h2 data-i18n="data:sections.contacts"></h2>\n\t\t\t<div id="contactGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t\t<h2 data-i18n="data:sections.joinedEntities"></h2>\n\t\t\t<div id="joinedEntityGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t\t<h2 data-i18n="data:sections.recipients"></h2>\n\t\t\t<div id="recipientsGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t\t<h2 data-i18n="data:sections.blockedPeriods"></h2>\n\t\t\t<div id="blockedPeriods" class="floatingGrid_1600_px"></div>\n\t\t\t<div class="clearer"></div>\n\t\t\t<h2 data-i18n="data:sections.AIFMD"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tfor="investorGroup"\n\t\t\t\t\t\t\tdata-i18n="data:fields.AIFMDInvestorGroup"\n\t\t\t\t\t\t\tclass="aifmRequired"\n\t\t\t\t\t\t></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="investorGroup"\n\t\t\t\t\t\t\tname="investorGroup"\n\t\t\t\t\t\t\tdata-role="domosaifmdinvestorgroup"\n\t\t\t\t\t\t\tdata-bind="value: AIFMD.investorGroup"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\t\t\x3c!-- References --\x3e\n\t\t<div>\n\t\t\t<h2 data-i18n="data:sections.customReferences"></h2>\n\n\t\t\t<div id="customReferenceGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t</div>\n\n\t\t\x3c!-- Tags --\x3e\n\t\t<div>\n\t\t\t<div id="editTags"></div>\n\t\t</div>\n\n\t\t\x3c!-- Histories --\x3e\n\t\t<div>\n\t\t\t<label\n\t\t\t\tfor="historyDate"\n\t\t\t\tdata-i18n="history:fields.historyDate"\n\t\t\t></label>\n\t\t\t<input\n\t\t\t\tid="historyDate"\n\t\t\t\tname="historyDate"\n\t\t\t\tdata-bind="value: historyDate"\n\t\t\t/>\n\t\t\t<p></p>\n\t\t\t<p></p>\n\t\t\t<div id="editHistory"></div>\n\t\t</div>\n\n\t\t\x3c!-- Documents --\x3e\n\t\t<div>\n\t\t\t<div id="objectDocument"></div>\n\t\t</div>\n\n\t\t\x3c!-- compliance --\x3e\n\t\t<div>\n\t\t\t<div id="compliance"></div>\n\t\t</div>\n\n\t\t\x3c!-- aml/kyc --\x3e\n\t\t<div>\n\t\t\t<div id="amlKyc"></div>\n\t\t</div>\n\n\t\t\x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n\t</div>\n</div>\n'}),function(){define("views/data/edit/edit.individual",["jquery","i18n","ui","object/ui/ObjectTypeUI","object/data/ObjectCategories","views/data/model/individual.model","views/data/edit/common/documents","common/grids/BusinessRecipientGrid","common/date/HistoryDatePicker","views/data/edit/common/reference.grid","object/ui/IndividualUI","core/ui/PercentUI","core/util/ObservableUtils","object/views/address/ObjectAddressEditor","object/views/blockedPeriod/BlockedPeriodGrid","common/grids/DataByCountryGrid","object/views/compliance/ComplianceEntityView","compliance/views/aml/TrackedEntitiesView","views/common/contacts.grid","object/views/related_object/views/RelatedObjectGrid","text!templates/data/edit/individual.html","core/api/AIFMDInvestorGroup","object/ui/LegalUI","basic/ui/LanguageUI","basic/ui/CountryUI"],function(a,r,t,e,n,i,o,d,l,s,u,c,p,m,f,b,v,y,h,g,T){var I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M;return _=e.ObjectTypeUI,w=n.ObjectCategories.individuals,C=d.BusinessRecipientGrid,D=l.HistoryDatePicker,S=u.IndividualUI,U=c.PercentUI,N=t.grid,x=N.transports,O=p.ObservableUtils,R=m.ObjectAddressEditor,I=f.BlockedPeriodGrid,E=b.DataByCountryGrid,k=v.ComplianceEntityView,F=y.TrackedEntitiesView,A=g.RelatedObjectGrid,L=function(t,e){var n,i,a;return n=t.model,i=t.object.id,a={dataSource:{transport:x.createLocal({data:n.get("joinedEntities")}),schema:{model:{id:"id",fields:{joinedEntity:{nullable:!0},barePropertyPercentage:{type:"number",nullable:!0},usufructPercentage:{type:"number",nullable:!0}},joinedEntityName:function(){return O.get(this,"joinedEntity.name")}}}},columns:[{command:["edit","destroy"],title:" ",width:150},S.exclude(i).column({field:"joinedEntity",title:r.t("data:fields.joinedEntity")}),U.column({field:"barePropertyPercentage",title:r.t("data:fields.barePropertyPercentage")}),U.column({field:"usufructPercentage",title:r.t("data:fields.usufructPercentage")})],toolbar:["create"],pageable:N.defaultPageable(),scrollable:!1},N.withDefaults(a),M("#joinedEntityGrid",e).kendoGrid(a)},M=function(t,e){return e?e.find(t):a(t)},P=function(t,e){var n,i,a;return n=e.field,"idCardNumber"!==(i=e.field)&&"passportNumber"!==i||(a=t.get(n))&&t.set(n,a.replace(/\s/g,"").toUpperCase()),null},{getTemplates:function(){return{view:T}},createRawModel:function(){var t;return t={},i.updateRawModel(t),t},updateModel:function(t,e){return i.updateModel(t,e)},init:function(t,e){var n,i;return i=t.model,h.init(t),_.widget(M("#type",e),w),o.init(t),D.history(M("#historyDate",e),i),C.init(M("#recipientsGrid",e),t),s.setupGrid(w,i,e),L(t,e),E.init(M("#dataByCountryGrid",e),t),R.initEntity(M("#addresses",e),i),I.init(M("#blockedPeriods",e),i),n=t.object.id,k.init(M("#compliance",e),n),F.display(M("#amlKyc",e),n),A.setup(a("#relatedObjectGrid"),n),i.bind("change",P.bind(null,i)),null},viewShow:function(t){return o.refresh(t),null}}})}.call(this),function(){define("views/data/edit/common/national.code.grid",["jquery","i18n","kendo","ui","basic/ui/CountryUI","core/api/EntityRole"],function(n,i,t,e,a,r){var o,d,l,s,u;return o=a.CountryUI,d=r.EntityRole,l=e.grid,s=l.transports,u=function(t,e){return e?e.find(t):n(t)},{setupGrid:function(t,e){var n;return n={dataSource:{transport:s.createLocal({data:t.get("NCA")}),schema:{model:{id:"id",fields:{value:{type:"string"},country:{type:"number",defaultValue:826}}}}},columns:[{command:["edit","destroy"],title:" ",width:230},o.column({field:"country",title:i.t("data:fields.NCACountry"),width:150}),{field:"value",title:i.t("data:fields.NCA"),width:200},d.columnMulti({field:"roles",title:i.t("data:fields.roles"),width:300})],toolbar:["create"],pageable:l.defaultPageable(),scrollable:!0},l.withDefaults(n),u("#nationalCodeGrid",e).kendoGrid(n)}}})}.call(this),define("text!templates/data/edit/corporate.html",[],function(){return'<div id="editRoot">\n\t<h1 data-i18n="object:corporates.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="object:corporates.edit" data-bind="invisible: isNew"></h1>\n\n\t<h2 data-bind="text: name"></h2>\n\n\t<div id="editActions"></div>\n\n\t<p></p>\n\n\t<div data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li class="k-state-active">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.advanced"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.references"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.tags"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.histories"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.documents"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.compliance"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.amlKyc"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="name" data-i18n="data:fields.name"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]data:validation.nameRequired"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="created" data-i18n="data:fields.creationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="created" name="created" class="k-textbox" type="text" data-bind="display: created" data-format="g" readonly="readonly"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="shortName" data-i18n="data:fields.shortName"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="shortName" name="shortName" class="k-textbox" type="text" data-bind="value: shortName"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="type" data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="type" name="type" data-bind="value: type"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="country" data-i18n="data:fields.country" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="country" name="country" data-role="domoscountry" data-bind="value: country" data-option-label="--"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="needsCertification" data-i18n="data:fields.needsCertification"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="needsCertification" name="needsCertification" type="checkbox" data-bind="checked: needsCertification"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="inceptionDate" data-i18n="data:fields.inceptionDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="inceptionDate" name="inceptionDate" data-role="datepicker" data-bind="value: inceptionDate" required="required" data-i18n="[validationMessage]data:validation.dateRequired"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<button class="k-button" data-i18n="object:entities.actions.portfolio" data-bind="click: portfolioClick"></button>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="liquidationDate" data-i18n="data:fields.liquidationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="liquidationDate" name="liquidationDate" data-role="datepicker" data-bind="value: liquidationDate"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="internal" data-i18n="data:fields.internal"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="internal" name="internal" type="checkbox" data-bind="checked: internal"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="phone" data-i18n="data:fields.phone"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="phone" name="phone" class="k-textbox" type="text" data-bind="value: phone"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="mail" data-i18n="data:fields.mail"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="mail" name="mail" class="k-textbox" type="email" data-bind="value: mail" data-i18n="[validationMessage]data:validation.mailIncorrect"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="webSite" data-i18n="data:fields.webSite"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="webSite" name="webSite" class="k-textbox" type="url" data-bind="value: webSite" data-i18n="[validationMessage]data:validation.urlIncorrect"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label data-i18n="data:fields.reportingCurrency"></label>\t\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input data-role="domoscurrency" data-bind="value: reportingCurrency" data-option-label="--"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="investorType" data-i18n="data:fields.investorType" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="investorType" name="investorType" data-role="domosinvestortype" data-bind="value: investorType"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.addresses"></h2>\n\n\t\t\t<div id="addresses"></div>\n\n\t\t\t<h2 data-i18n="data:sections.roles"></h2>\n\n\t\t\t<div id="roles" data-role="domosrolemultiselect" data-bind="value: roles"></div>\n\t\t</div>\n\n\t\t\x3c!-- Advanced --\x3e\n\t\t<div>\n\t\t\t<h2 data-i18n="data:sections.contacts"></h2>\n\n\t\t\t<div id="contactGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t\t<h2 data-i18n="data:sections.recipients"></h2>\n\t\t\t<div id="recipientsGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t\t<h2 data-i18n="data:sections.blockedPeriods"></h2>\n\t\t\t<div id="blockedPeriods" class="floatingGrid_1600_px"></div>\n\t\t\t<div class="clearer"></div>\n\t\t\t<h2 data-i18n="data:sections.AIFMD"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="investorGroup" data-i18n="data:fields.AIFMDInvestorGroup" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="investorGroup" name="investorGroup" data-role="domosaifmdinvestorgroup" data-bind="value: AIFMD.investorGroup"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMReportingCode" data-i18n="data:fields.AIFMReportingCode" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMReportingCode" class="formLarge" name="AIFMReportingCode" data-role="domosaifmreportingcode" data-bind="value: AIFMD.AIFMReportingCode"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMReportingObligation" data-i18n="data:fields.AIFMReportingObligation" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMReportingObligation" class="formLarge" name="AIFMReportingObligation" data-role="domosaifmreportingobligation" data-bind="value: AIFMD.AIFMReportingObligation"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMReportingObligationFrequency" data-i18n="data:fields.AIFMReportingObligationFrequency" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMReportingObligationFrequency" name="AIFMReportingObligation" data-role="domosaifmreportingobligationfrequency" data-bind="value: AIFMD.AIFMReportingObligationFrequency"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.TPT"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="bclSector" data-i18n="data:fields.bclSector"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="bclSector" data-role="domosbclsector" data-bind="value: bclSector"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\t\t\x3c!-- References --\x3e\n\t\t<div>\n\n\t\t\t<h2 data-i18n="data:sections.regulation"></h2>\n\n\t\t\t<div id="nationalCodeGrid" class="floatingGrid_900_px"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.references"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="BIC" data-i18n="data:fields.BIC"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="BIC" name="BIC" class="k-textbox" type="text" data-bind="value: BIC"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="CUSIP" data-i18n="data:fields.CUSIP"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="CUSIP" name="CUSIP" class="k-textbox" type="text" data-bind="value: CUSIP"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="ECB" data-i18n="data:fields.ECB"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="ECB" name="ECB" class="k-textbox" type="text" data-bind="value: ECB"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="ISIN" data-i18n="data:fields.ISIN"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="ISIN" name="ISIN" class="k-textbox" type="text" data-bind="value: ISIN"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="LEI" data-i18n="data:fields.LEI"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="LEI" name="LEI" class="k-textbox" type="text" data-bind="value: LEI"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="IEI" data-i18n="data:fields.IEI"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="IEI" name="IEI" class="k-textbox" type="text" data-bind="value: IEI"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="RIC" data-i18n="data:fields.RIC"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="RIC" name="RIC" class="k-textbox" type="text" data-bind="value: RIC"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="SEDOL" data-i18n="data:fields.SEDOL"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="SEDOL" name="SEDOL" class="k-textbox" type="text" data-bind="value: SEDOL"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="TICKER" data-i18n="data:fields.TICKER"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="TICKER" name="TICKER" class="k-textbox" type="text" data-bind="value: TICKER"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="GIIN" data-i18n="data:fields.GIIN"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="GIIN" name="GIIN" data-role="maskedtextbox" data-mask="AAAAAA\\.AAAAA\\.LL\\.000" data-bind="value: GIIN"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="TIN" data-i18n="data:fields.TIN"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="TIN" name="TIN" class="k-textbox" type="text" data-bind="value: TIN"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="INE" data-i18n="data:fields.IDENTIFICATION_NUMBER_EXTENSION"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="INE" name="INE" data-role="maskedtextbox" data-mask="L00000000" data-bind="value: IDENTIFICATION_NUMBER_EXTENSION"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.customReferences"></h2>\n\n\t\t\t<div id="customReferenceGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t</div>\n\n\t\t\x3c!-- Tags --\x3e\n\t\t<div>\n\t\t\t<div id="editTags"></div>\n\t\t</div>\n\n\t\t\x3c!-- Histories --\x3e\n\t\t<div>\n\t\t\t\t<label for="historyDate" data-i18n="history:fields.historyDate"></label>\n\t\t\t\t<input id="historyDate" name="historyDate" data-bind="value: historyDate" />\n\t\t\t\t<p></p>\n\t\t\t\t<p></p>\n\t\t\t<div id="editHistory"></div>\n\t\t</div>\n\n\t\t\x3c!-- Documents --\x3e\n\t\t<div>\n\t\t\t<div id="objectDocument"></div>\n\t\t</div>\n\n\t\t\x3c!-- compliance --\x3e\n\t\t<div>\n\t\t\t<div id="compliance"></div>\n\t\t</div>\n\n\t\t\x3c!-- aml/kyc --\x3e\n\t\t<div>\n\t\t\t<div id="amlKyc"></div>\n\t\t</div>\n\n\t\t\x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n\t</div>\n</div>\n\n\n\n'}),define("core/api/BclSector",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BclSector=void 0;var r,o;(r=e.BclSector||(e.BclSector={}))[r.CENTRAL_BANKS=1]="CENTRAL_BANKS",r[r.CREDIT_INSTITUTIONS=2]="CREDIT_INSTITUTIONS",r[r.MONEY_MARKET_FUNDS=3]="MONEY_MARKET_FUNDS",r[r.OTHER_DEPOSIT_TAKING_CORPORATIONS=4]="OTHER_DEPOSIT_TAKING_CORPORATIONS",r[r.CENTRAL_GOVERNMENTS=5]="CENTRAL_GOVERNMENTS",r[r.STATE_GOVERNMENTS=6]="STATE_GOVERNMENTS",r[r.LOCAL_GOVERNMENTS=7]="LOCAL_GOVERNMENTS",r[r.SOCIAL_SECURITY_FUNDS=8]="SOCIAL_SECURITY_FUNDS",r[r.CAPTIVE_FINANCIAL_INSTITUTIONS=9]="CAPTIVE_FINANCIAL_INSTITUTIONS",r[r.NON_MMF_FUNDS=10]="NON_MMF_FUNDS",r[r.SECURITIZATION_VEHICLE=11]="SECURITIZATION_VEHICLE",r[r.CENTRAL_COUNTER_PARTIES=12]="CENTRAL_COUNTER_PARTIES",r[r.OTHER_FINANCIAL_INTERMEDIARIES=13]="OTHER_FINANCIAL_INTERMEDIARIES",r[r.FINANCIAL_AUXILIARIES=14]="FINANCIAL_AUXILIARIES",r[r.INSURANCE_CORPORATIONS=15]="INSURANCE_CORPORATIONS",r[r.PENSION_FUNDS=16]="PENSION_FUNDS",r[r.NON_FINANCIAL_CORPORATIONS=17]="NON_FINANCIAL_CORPORATIONS",r[r.HOUSEHOLDS_SOLE=18]="HOUSEHOLDS_SOLE",r[r.HOUSEHOLDS_PHYSICAL=19]="HOUSEHOLDS_PHYSICAL",r[r.NON_PROFIT_INSTITUTIONS_HOUSEHOLDS=20]="NON_PROFIT_INSTITUTIONS_HOUSEHOLDS",r[r.NO_BREAKDOWN=21]="NO_BREAKDOWN",(o=e.BclSector||(e.BclSector={})).getName=a.EnumUtils.createNameFn("object:BclSector",o),o.widget=i.EnumWidgetUtils.createDropList("DomosBclSector",o,!0,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),function(){define("views/data/edit/edit.corporate",["jquery","i18n","ui","core/util/ObservableUtils","object/ui/ObjectTypeUI","object/data/ObjectCategories","views/data/model/legal.model","views/data/edit/common/documents","views/data/edit/common/national.code.grid","views/data/edit/common/reference.grid","common/grids/BusinessRecipientGrid","common/date/HistoryDatePicker","object/views/address/ObjectAddressEditor","object/views/blockedPeriod/BlockedPeriodGrid","object/views/compliance/ComplianceEntityView","compliance/views/aml/TrackedEntitiesView","views/common/contacts.grid","object/views/related_object/views/RelatedObjectGrid","text!templates/data/edit/corporate.html","core/api/AIFMReportingCode","core/api/AIFMReportingObligation","core/api/AIFMReportingObligationFrequency","core/api/AIFMDInvestorGroup","core/api/BclSector","basic/ui/CountryUI"],function(i,t,e,n,a,r,o,d,l,s,u,c,p,m,f,b,v,y,h){var g,T,I,C,w,k,E,D,S,N;return n.ObservableUtils,E=a.ObjectTypeUI,e.grid.transports,I=r.ObjectCategories.corporates,T=u.BusinessRecipientGrid,w=c.HistoryDatePicker,k=p.ObjectAddressEditor,g=m.BlockedPeriodGrid,C=f.ComplianceEntityView,S=b.TrackedEntitiesView,D=y.RelatedObjectGrid,N=function(t,e){return e?e.find(t):i(t)},{getTemplates:function(){return{view:h}},createRawModel:function(){var t;return t={},o.updateRawModel(t),t},updateModel:function(t,e){return o.updateModel(t,e)},init:function(t,e){var n;return E.widget(N("#type",e),I),v.init(t),l.setupGrid(t.model,e),s.setupGrid(I,t.model,e),T.init(N("#recipientsGrid",e),t),w.history(N("#historyDate",e),t.model),d.init(t),k.initEntity(N("#addresses",e),t.model),g.init(N("#blockedPeriods",e),t.model),n=t.object.id,C.init(N("#compliance",e),n),S.display(N("#amlKyc",e),n),D.setup(i("#relatedObjectGrid"),n),null},viewShow:function(t){return d.refresh(t),null}}})}.call(this),define("text!templates/data/edit/investment.company.html",[],function(){return'<div id="editRoot">\n\t<h1 data-i18n="object:investmentCompanies.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="object:investmentCompanies.edit" data-bind="invisible: isNew"></h1>\n\n\t<h2 data-bind="text: name"></h2>\n\n\t<div id="editActions"></div>\n\n\t<p></p>\n\n\t<div data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li class="k-state-active">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.advanced"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.references"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.tags"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.histories"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.documents"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.compliance"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.amlKyc"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="name" data-i18n="data:fields.name"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name"\n\t\t\t\t\t\t\trequired="required" data-i18n="[validationMessage]data:validation.nameRequired" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="created" data-i18n="data:fields.creationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="created" name="created" class="k-textbox" type="text" data-bind="display: created"\n\t\t\t\t\t\t\tdata-format="g" readonly="readonly" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="shortName" data-i18n="data:fields.shortName"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="shortName" name="shortName" class="k-textbox" type="text"\n\t\t\t\t\t\t\tdata-bind="value: shortName" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="type" data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="type" name="type" data-bind="value: type" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="country" data-i18n="data:fields.country" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="country" name="country" data-role="domoscountry" data-bind="value: country" data-option-label="--"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="needsCertification" data-i18n="data:fields.needsCertification"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="needsCertification" name="needsCertification" type="checkbox" data-bind="checked: needsCertification"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="inceptionDate" data-i18n="data:fields.inceptionDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="inceptionDate" name="inceptionDate" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: inceptionDate" required="required"\n\t\t\t\t\t\t\tdata-i18n="[validationMessage]data:validation.dateRequired" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<button class="k-button" data-i18n="object:entities.actions.portfolio" data-bind="click: portfolioClick"></button>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="liquidationDate" data-i18n="data:fields.liquidationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="liquidationDate" name="liquidationDate" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: liquidationDate" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="internal" data-i18n="data:fields.internal"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="internal" name="internal" type="checkbox" data-bind="checked: internal" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="phone" data-i18n="data:fields.phone"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="phone" name="phone" class="k-textbox" type="text" data-bind="value: phone" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="mail" data-i18n="data:fields.mail"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="mail" name="mail" class="k-textbox" type="email" data-bind="value: mail"\n\t\t\t\t\t\t\tdata-i18n="[validationMessage]data:validation.mailIncorrect" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="webSite" data-i18n="data:fields.webSite"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="webSite" name="webSite" class="k-textbox" type="url" data-bind="value: webSite"\n\t\t\t\t\t\t\tdata-i18n="[validationMessage]data:validation.urlIncorrect" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label data-i18n="data:fields.reportingCurrency"></label>\t\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input data-role="domoscurrency" data-bind="value: reportingCurrency" data-option-label="--"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="investorType" data-i18n="data:fields.investorType" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="investorType" name="investorType" data-role="domosinvestortype"\n\t\t\t\t\t\t\tdata-bind="value: investorType" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.addresses"></h2>\n\n\t\t\t<div id="addresses"></div>\n\t\t\t<h2 data-i18n="data:sections.roles"></h2>\n\n\t\t\t<div id="roles" data-role="domosrolemultiselect" data-bind="value: roles"></div>\n\n\t\t</div>\n\n\t\t\x3c!-- Advanced --\x3e\n\t\t<div>\n\t\t\t<h2 data-i18n="data:sections.contacts"></h2>\n\n\t\t\t<div id="contactGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.recipients"></h2>\n\t\t\t<div id="recipientsGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.blockedPeriods"></h2>\n\t\t\t<div id="blockedPeriods" class="floatingGrid_1600_px"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.AIFMD"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="investorGroup" data-i18n="data:fields.AIFMDInvestorGroup"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="investorGroup" name="investorGroup" data-role="domosaifmdinvestorgroup"\n\t\t\t\t\t\t\tdata-bind="value: AIFMD.investorGroup" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMReportingCode" data-i18n="data:fields.AIFMReportingCode"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMReportingCode" class="formLarge" name="AIFMReportingCode"\n\t\t\t\t\t\t\tdata-role="domosaifmreportingcode" data-bind="value: AIFMD.AIFMReportingCode" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMReportingObligation" data-i18n="data:fields.AIFMReportingObligation"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMReportingObligation" class="formLarge" name="AIFMReportingObligation"\n\t\t\t\t\t\t\tdata-role="domosaifmreportingobligation" data-bind="value: AIFMD.AIFMReportingObligation" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMReportingObligationFrequency"\n\t\t\t\t\t\t\tdata-i18n="data:fields.AIFMReportingObligationFrequency" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMReportingObligationFrequency" name="AIFMReportingObligation"\n\t\t\t\t\t\t\tdata-role="domosaifmreportingobligationfrequency"\n\t\t\t\t\t\t\tdata-bind="value: AIFMD.AIFMReportingObligationFrequency" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.TPT"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="bclSector" data-i18n="data:fields.bclSector"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="bclSector" data-role="domosbclsector" data-bind="value: bclSector" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\t\t\x3c!-- References --\x3e\n\t\t<div>\n\n\t\t\t<h2 data-i18n="data:sections.regulation"></h2>\n\n\t\t\t<div id="nationalCodeGrid" class="floatingGrid_900_px"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.references"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="BIC" data-i18n="data:fields.BIC"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="BIC" name="BIC" class="k-textbox" type="text" data-bind="value: BIC" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="CUSIP" data-i18n="data:fields.CUSIP"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="CUSIP" name="CUSIP" class="k-textbox" type="text" data-bind="value: CUSIP" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="ECB" data-i18n="data:fields.ECB"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="ECB" name="ECB" class="k-textbox" type="text" data-bind="value: ECB" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="ISIN" data-i18n="data:fields.ISIN"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="ISIN" name="ISIN" class="k-textbox" type="text" data-bind="value: ISIN" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="LEI" data-i18n="data:fields.LEI"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="LEI" name="LEI" class="k-textbox" type="text" data-bind="value: LEI" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="IEI" data-i18n="data:fields.IEI"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="IEI" name="IEI" class="k-textbox" type="text" data-bind="value: IEI" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="RIC" data-i18n="data:fields.RIC"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="RIC" name="RIC" class="k-textbox" type="text" data-bind="value: RIC" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="SEDOL" data-i18n="data:fields.SEDOL"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="SEDOL" name="SEDOL" class="k-textbox" type="text" data-bind="value: SEDOL" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="TICKER" data-i18n="data:fields.TICKER"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="TICKER" name="TICKER" class="k-textbox" type="text" data-bind="value: TICKER" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="GIIN" data-i18n="data:fields.GIIN"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="GIIN" name="GIIN" data-role="maskedtextbox" data-mask="AAAAAA\\.AAAAA\\.LL\\.000"\n\t\t\t\t\t\t\tdata-bind="value: GIIN" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="TIN" data-i18n="data:fields.TIN"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="TIN" name="TIN" class="k-textbox" type="text" data-bind="value: TIN" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="INE" data-i18n="data:fields.IDENTIFICATION_NUMBER_EXTENSION"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="INE" name="INE" data-role="maskedtextbox" data-mask="L00000000"\n\t\t\t\t\t\t\tdata-bind="value: IDENTIFICATION_NUMBER_EXTENSION" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.customReferences"></h2>\n\n\t\t\t<div id="customReferenceGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t</div>\n\n\t\t\x3c!-- Tags --\x3e\n\t\t<div>\n\t\t\t<div id="editTags"></div>\n\t\t</div>\n\n\t\t\x3c!-- Histories --\x3e\n\t\t<div>\n\t\t\t<label for="historyDate" data-i18n="history:fields.historyDate"></label>\n\t\t\t<input id="historyDate" name="historyDate" data-bind="value: historyDate" />\n\t\t\t<p></p>\n\t\t\t<p></p>\n\t\t\t<div id="editHistory"></div>\n\t\t</div>\n\n\t\t\x3c!-- Documents --\x3e\n\t\t<div>\n\t\t\t<div id="objectDocument"></div>\n\t\t</div>\n\n\t\t\x3c!-- compliance --\x3e\n\t\t<div>\n\t\t\t<div id="compliance"></div>\n\t\t</div>\n\n\t\t\x3c!-- aml/kyc --\x3e\n\t\t<div>\n\t\t\t<div id="amlKyc"></div>\n\t\t</div>\n\n\t\t\x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n\t</div>\n</div>'}),function(){define("views/data/edit/edit.investment.company",["jquery","i18n","ui","core/util/ObservableUtils","object/ui/ObjectTypeUI","object/data/ObjectCategories","views/data/model/legal.model","views/data/edit/common/documents","views/data/edit/common/national.code.grid","views/data/edit/common/reference.grid","common/grids/BusinessRecipientGrid","common/date/HistoryDatePicker","object/views/address/ObjectAddressEditor","object/views/blockedPeriod/BlockedPeriodGrid","object/views/compliance/ComplianceEntityView","compliance/views/aml/TrackedEntitiesView","views/common/contacts.grid","object/views/related_object/views/RelatedObjectGrid","text!templates/data/edit/investment.company.html","core/api/AIFMReportingCode","core/api/AIFMReportingObligation","core/api/AIFMReportingObligationFrequency","core/api/AIFMDInvestorGroup","core/api/BclSector","basic/ui/CountryUI"],function(n,t,e,i,a,r,o,d,l,s,u,c,p,m,f,b,v,y,h){var g,T,I,C,w,k,E,D,S;return i.ObservableUtils,E=a.ObjectTypeUI,e.grid.transports,I=r.ObjectCategories.investmentCompanies,T=u.BusinessRecipientGrid,w=c.HistoryDatePicker,k=p.ObjectAddressEditor,g=m.BlockedPeriodGrid,C=f.ComplianceEntityView,S=b.TrackedEntitiesView,D=y.RelatedObjectGrid,{getTemplates:function(){return{view:h}},createRawModel:function(){var t;return t={},o.updateRawModel(t),t},updateModel:function(t,e){return o.updateModel(t,e)},init:function(t){var e;return E.widget(n("#type"),I),v.init(t),T.init(n("#recipientsGrid"),t),l.setupGrid(t.model),s.setupGrid(I,t.model),d.init(t),w.history(n("#historyDate"),t.model),k.initEntity(n("#addresses"),t.model),g.init(n("#blockedPeriods"),t.model),e=t.object.id,C.init(n("#compliance"),e),S.display(n("#amlKyc"),e),D.setup(n("#relatedObjectGrid"),e),null},viewShow:function(t){return d.refresh(t),null}}})}.call(this),define("core/ui/PercentEmptyUI",["require","exports","lodash","kendo","./PercentUI"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PercentEmptyUI=void 0;var r=function(){function t(){}return t.column=function(t,e){return(t=a.PercentUI.column(t,e)).template=function(t){var e=t.weight;return 0===e||n.isNil(e)?"":"<span>"+i.format("{0:p}",e)+"</span>"},t},t}();e.PercentEmptyUI=r}),define("core/ui/NumberEmptyUI",["require","exports","lodash","kendo","./NumberUI"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NumberEmptyUI=void 0;var r=function(){function t(){}return t.column=function(t,e){return(t=a.NumberUI.column(t,e)).template=function(t){var e=t.issuedCount;return 0===e||n.isNil(e)?"":"<span>"+i.format("{0:n}",e)+"</span>"},t},t}();e.NumberEmptyUI=r}),define("text!templates/data/edit/share.create.window.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="name" data-i18n="object:shareClass.name"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="name" class="k-textbox" type="text" data-bind="value: name" />\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n\t<div class="formWindowButtons">\n\t\t<button id="okClickId" class="k-primary" data-role="button" data-icon="check" data-bind="click: okClick, enabled: isValid">OK</button>\n\t\t<button data-role="button" data-icon="cancel" data-bind="click: cancelClick">Cancel</button>\n\t</div>\n</div>'}),define("object/views/share/ShareCreateWindow",["require","exports","i18n","text!templates/data/edit/share.create.window.html","core/data/DObservableBuilder"],function(t,e,s,u,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShareCreateWindow=void 0;var n=function(){function t(){}return t.open=function(t,d){var l={id:null,name:null,category:t};return new Promise(function(t,e){var n=kendo.template(u)({}),i=$("<div>").addClass("formWindow").appendTo($(document.body));i.html(n);i.kendoWindow({modal:!0,width:400,minWidth:300,visible:!1});var a,r=i.data("kendoWindow");r.bind("close",function(){return kendo.destroy(i),i.remove(),t(a),!0});var o=c.DObservableBuilder.of(l).add("okClick",function(t){a=t.toJson(),r.close()}).add("isValid",function(t){return t.get("name")}).add("cancelClick",function(t){a=void 0,r.close()}).build();s.I18N.localize(i),o.bind(i),r.title(d).open().center()})},t}();e.ShareCreateWindow=n}),define("text!templates/data/edit/investment.vehicle.html",[],function(){return'<div id="editRoot">\n\t<h1 data-i18n="object:investmentVehicles.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="object:investmentVehicles.edit" data-bind="invisible: isNew"></h1>\n\n\t<h2 data-bind="text: name"></h2>\n\n\t<div id="editActions"></div>\n\n\t<p></p>\n\n\t<div data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li class="k-state-active">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.advanced"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.references"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.tags"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.histories"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.metrics"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.documents"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.compliance"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.amlKyc"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="name" data-i18n="data:fields.name"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name"\n\t\t\t\t\t\t\trequired="required" data-i18n="[validationMessage]data:validation.nameRequired" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="created" data-i18n="data:fields.creationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="created" name="created" class="k-textbox" type="text" data-bind="display: created"\n\t\t\t\t\t\t\tdata-format="g" readonly="readonly" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="shortName" data-i18n="data:fields.shortName"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="shortName" name="shortName" class="k-textbox" type="text"\n\t\t\t\t\t\t\tdata-bind="value: shortName" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="type" data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="type" name="type" data-bind="value: type" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="country" data-i18n="data:fields.country" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="country" name="country" data-role="domoscountry" data-bind="value: country" data-option-label="--"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="needsCertification" data-i18n="data:fields.needsCertification"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="needsCertification" name="needsCertification" type="checkbox" data-bind="checked: needsCertification"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="currency" data-i18n="data:fields.currency"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="currency" name="currency" data-role="domoscurrency" data-bind="value: currency" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="masterFeeder" data-i18n="data:fields.masterFeeder" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="masterFeeder" name="masterFeeder" data-role="domosmasterfeeder"\n\t\t\t\t\t\t\tdata-bind="value: masterFeeder" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="company" >\n\t\t\t\t\t\t\t<a data-i18n="data:fields.company" data-bind="attr: {href: companyUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="company" name="company" data-role="domoslegalperson" data-bind="value: company" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td data-bind="visible: hasMaster">\n\t\t\t\t\t\t<label for="master">\n\t\t\t\t\t\t\t<a data-i18n="data:fields.master" data-bind="attr: {href: masterUrl}"\n\t\t\t\t\t\t\tclass="aifmRequired"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td data-bind="visible: hasMaster">\n\t\t\t\t\t\t<input id="master" name="master" data-role="domosvehiclemaster"\n\t\t\t\t\t\t\tdata-bind="value: master" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="inceptionDate" data-i18n="data:fields.inceptionDate" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="inceptionDate" name="inceptionDate" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: inceptionDate" required="required"\n\t\t\t\t\t\t\tdata-i18n="[validationMessage]data:validation.dateRequired" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="launchDate" data-i18n="data:fields.launchDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="launchDate" name="launchDate" data-role="datepicker" data-bind="value: launchDate"\n\t\t\t\t\t\t\trequired />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="liquidationDate" data-i18n="data:fields.liquidationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="liquidationDate" name="liquidationDate" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: liquidationDate" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="closingReason" data-i18n="data:fields.closingReason"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="closingReason" name="closingReason" data-role="domosuciclosingreason"\n\t\t\t\t\t\t\tdata-option-label="--" data-bind="value: closingReason" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="description" data-i18n="data:fields.description"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<button class="k-button" data-i18n="object:entities.actions.portfolio" data-bind="click: portfolioClick"></button>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td colspan="2">\n\t\t\t\t\t\t<h2 data-i18n="data:fields.closingDates"></h2>\n\n\t\t\t\t\t\t<div id="ClosingDatesGrid" class="floatingGrid"></div>\n\t\t\t\t\t\t<div class="clearer"></div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="internal" data-i18n="data:fields.internal"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="internal" name="internal" type="checkbox" data-bind="checked: internal" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="withdrawal" data-i18n="data:fields.withdrawal" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="withdrawal" name="withdrawal" type="checkbox" data-bind="checked: withdrawal" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="manager" >\n\t\t\t\t\t\t\t<a data-i18n="data:fields.manager" data-bind="attr: {href: managerUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="manager" name="manager" data-role="domosindividual" data-bind="value: manager" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="amountSought" data-i18n="data:fields.amountSought"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="amountSought" name="amountSought" data-role="numerictextbox"\n\t\t\t\t\t\t\tdata-bind="value: amountSought" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="expectedReturn" data-i18n="data:fields.expectedReturn" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="expectedReturn" name="expectedReturn" data-role="domospercent"\n\t\t\t\t\t\t\tdata-bind="value: expectedReturn" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="phone" data-i18n="data:fields.phone"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="phone" name="phone" class="k-textbox" type="text" data-bind="value: phone" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="mail" data-i18n="data:fields.mail"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="mail" name="mail" class="k-textbox" type="email" data-bind="value: mail"\n\t\t\t\t\t\t\tdata-i18n="[validationMessage]data:validation.mailIncorrect" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="webSite" data-i18n="data:fields.webSite"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="webSite" name="webSite" class="k-textbox" type="url" data-bind="value: webSite"\n\t\t\t\t\t\t\tdata-i18n="[validationMessage]data:validation.urlIncorrect" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label data-i18n="data:fields.reportingCurrency"></label>\t\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input data-role="domoscurrency" data-bind="value: reportingCurrency" data-option-label="--"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="investorType" data-i18n="data:fields.investorType" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="investorType" name="investorType" data-role="domosinvestortype"\n\t\t\t\t\t\t\tdata-bind="value: investorType" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="navFrequency" data-i18n="data:fields.navFrequency"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="navFrequency" name="navFrequency" data-role="domosnavfrequency"\n\t\t\t\t\t\t\tdata-bind="value: navFrequency" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="navFrequencyComments" data-i18n="data:fields.navFrequencyComments" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="navFrequencyComments" class="k-textbox" type="text"\n\t\t\t\t\t\t\tdata-bind="value: navFrequencyComments" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="firstNavDate" data-i18n="data:fields.firstNavDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="firstNavDate" data-role="datepicker" data-bind="value: firstNavDate" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="portalPublicationDate" data-i18n="data:fields.portalPublicationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="portalPublicationDate" data-role="datepicker" data-bind="value: portalPublicationDate" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="centralBank" data-i18n="data:fields.centralBank"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="centralBank" data-role="domoscentralbank" data-bind="value: bank" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="investmentPeriodInYears" data-i18n="data:fields.investmentPeriodInYears"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="investmentPeriodInYears" data-role="numerictextbox" data-format="" data-decimals="0"\n\t\t\t\t\t\t\tdata-min="0" data-bind="value: investmentPeriodInYears" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="investmentPeriodEndDate" data-i18n="data:fields.investmentPeriodEndDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="investmentPeriodEndDate" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: investmentPeriodEndDate" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="subscriptionPeriodEndDate"\n\t\t\t\t\t\t\tdata-i18n="data:fields.subscriptionPeriodEndDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="subscriptionPeriodEndDate" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: subscriptionPeriodEndDate" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="maturityDate" data-i18n="data:fields.maturityDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="maturityDate" data-role="datepicker" data-bind="value: maturityDate" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="maturityExtensionInYears" data-i18n="data:fields.maturityExtensionInYears"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="maturityExtensionInYears" data-role="numerictextbox" data-role="numerictextbox"\n\t\t\t\t\t\t\tdata-format="" data-min="0" data-bind="value: maturityExtensionInYears" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="faceValue" data-i18n="data:fields.faceValue"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="faceValue" data-role="numerictextbox" data-bind="value: faceValue" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="feesDayCountBasis" data-i18n="data:fields.feesDayCountBasis"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="feesDayCountBasis" data-role="domosdaycountbasis"\n\t\t\t\t\t\t\tdata-bind="value: feesDayCountBasis" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="hurdleDayCountBasis" data-i18n="data:fields.hurdleDayCountBasis"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="hurdleDayCountBasis" data-role="domosdaycountbasis"\n\t\t\t\t\t\t\tdata-bind="value: hurdleDayCountBasis" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="hurdlePeriodicity" data-i18n="data:fields.hurdlePeriodicity"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="hurdlePeriodicity" data-role="domosperiodicity"\n\t\t\t\t\t\t\tdata-bind="value: hurdlePeriodicity" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="managementInvestmentMinimumPercent"\n\t\t\t\t\t\t\tdata-i18n="data:fields.managementInvestmentMinimumPercent"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="managementInvestmentMinimumPercent" data-role="domospercent"\n\t\t\t\t\t\t\tdata-bind="value: managementInvestmentMinimumPercent" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="carriedInvestmentMinimumPercent"\n\t\t\t\t\t\t\tdata-i18n="data:fields.carriedInvestmentMinimumPercent"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="carriedInvestmentMinimumPercent" data-role="domospercent"\n\t\t\t\t\t\t\tdata-bind="value: carriedInvestmentMinimumPercent" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="premiumInterestRate" data-i18n="data:fields.premiumInterestRate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="premiumInterestRate" data-role="domospercent"\n\t\t\t\t\t\t\tdata-bind="value: premiumInterestRate" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="premiumDayCountBasis" data-i18n="data:fields.premiumDayCountBasis"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="premiumDayCountBasis" data-role="domosdaycountbasis"\n\t\t\t\t\t\t\tdata-bind="value: premiumDayCountBasis" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="premiumCapitalizationFrequency"\n\t\t\t\t\t\t\tdata-i18n="data:fields.premiumCapitalizationFrequency"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="premiumCapitalizationFrequency" data-role="domosperiodicity"\n\t\t\t\t\t\t\tdata-bind="value: premiumCapitalizationFrequency" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="firstCallCommitmentPercent"\n\t\t\t\t\t\t\tdata-i18n="data:fields.firstCallCommitmentPercent"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="firstCallCommitmentPercent" name="firstCallCommitmentPercent"\n\t\t\t\t\t\t\tdata-role="domospercent" data-bind="value: firstCallCommitmentPercent" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="feesFrequency" data-i18n="data:fields.feesFrequency"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="feesFrequency" name="feesFrequency" data-role="domosperiodicity"\n\t\t\t\t\t\t\tdata-bind="value: feesFrequency" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="formationFeesCapPercent" data-i18n="data:fields.formationFeesCapPercent"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="formationFeesCapPercent" name="formationFeesCapPercent" data-role="domospercent"\n\t\t\t\t\t\t\tdata-bind="value: formationFeesCapPercent" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="otherFeesCapPercent" data-i18n="data:fields.otherFeesCapPercent"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="otherFeesCapPercent" name="otherFeesCapPercent" data-role="domospercent"\n\t\t\t\t\t\t\tdata-bind="value: otherFeesCapPercent" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="latePaymentFloatingRateId"\n\t\t\t\t\t\t\tdata-i18n="data:fields.latePaymentFloatingRateId"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="latePaymentFloatingRateId" data-role="domosinterestrate"\n\t\t\t\t\t\t\tdata-bind="value: latePaymentFloatingRateId" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="latePaymentMarginPercent" data-i18n="data:fields.latePaymentMarginPercent"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="latePaymentMarginPercent" name="latePaymentMarginPercent" data-role="domospercent"\n\t\t\t\t\t\t\tdata-bind="value: latePaymentMarginPercent" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="latePaymentFrequency" data-i18n="data:fields.latePaymentFrequency"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="latePaymentFrequency" data-role="domosperiodicity"\n\t\t\t\t\t\t\tdata-bind="value: latePaymentFrequency" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="shareIssuing" data-i18n="data:fields.shareIssuingType">\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="shareIssuing" name="shareIssuing" data-role="domosshareissuingtype"\n\t\t\t\t\t\t\tdata-bind="value: shareIssuing" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="clawBackPercent" data-i18n="data:fields.clawBackPercent">\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="clawBackPercent" name="clawBackPercent" data-role="domospercent"\n\t\t\t\t\t\t\tdata-bind="value: clawBackPercent" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="transparencyType" data-i18n="data:fields.transparencyType">\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="transparencyType" name="transparencyType" data-role="domostransparencytype"\n\t\t\t\t\t\t\tdata-bind="value: transparencyType" required/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="benchmarkIndex" data-i18n="data:fields.benchmarkIndex">\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="benchmarkIndex" name="benchmarkIndex" data-role="domosindex"\n\t\t\t\t\t\t\tdata-bind="value: benchmarkIndex"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="firstDayCalculation" data-i18n="data:fields.firstDayCalculation">\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="firstDayCalculation" name="firstDayCalculation" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: firstDayCalculation"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="firstCutOff" data-i18n="data:fields.firstCutOff">\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="firstCutOff" name="firstCutOff" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: firstCutOff"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="endFirstPeriod" data-i18n="data:fields.endFirstPeriod">\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="endFirstPeriod" name="endFirstPeriod" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: endFirstPeriod"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="cutOffPeriod" data-i18n="data:fields.cutOffPeriod">\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="cutOffPeriod" class="k-textbox" type="text" name="cutOffPeriod"\n\t\t\t\t\t\t\tdata-bind="value: cutOffPeriod"\t/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="paymentPeriod" data-i18n="data:fields.paymentPeriod">\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="paymentPeriod" class="k-textbox" type="text"  name="paymentPeriod"\n\t\t\t\t\t\t\tdata-bind="value: paymentPeriod" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.addresses"></h2>\n\n\t\t\t<div id="addresses"></div>\n\n\t\t\t<h2 data-i18n="data:sections.roles"></h2>\n\n\t\t\t<div id="roles" data-role="domosrolemultiselect" data-bind="value: roles"></div>\n\t\t</div>\n\n\t\t\x3c!-- Advanced --\x3e\n\t\t<div>\n\t\t\t<h2 data-i18n="data:sections.fundShares"></h2>\n\n\t\t\t<div id="fundSharesGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t\t<h2 data-i18n="data:fields.fundSize"></h2>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="fundSize" data-i18n="data:fields.fundSize"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="fundSize" data-role="numerictextbox" data-role="numerictextbox"\n\t\t\t\t\t\t data-bind="value: fundSize" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<h2 data-i18n="data:sections.recipients"></h2>\n\t\t\t<div id="recipientsGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.contacts"></h2>\n\n\t\t\t<div id="contactGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.blockedPeriods"></h2>\n\t\t\t<div id="blockedPeriods" class="floatingGrid_1600_px"></div>\n\t\t\t<div class="clearer"></div>\n\n\n\t\t\t<h2 data-i18n="data:sections.AIFMD"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFType" data-i18n="data:fields.AIFType" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFType" name="AIFType" data-role="domosaiftype" data-bind="value: AIFMD.AIFType" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: AIFMD.isHedgeFund">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFStrategyHedgeFund" data-i18n="data:fields.AIFStrategies.hedgeFund"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFStrategyHedgeFund" name="AIFStrategyHedgeFund"\n\t\t\t\t\t\t\tdata-role="domosaifstrategyhedgefund" data-bind="value: AIFMD.hedgeFundStrategy" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: AIFMD.isHedgeFundOther">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFStrategyHedgeFundDescription"\n\t\t\t\t\t\t\tdata-i18n="data:fields.AIFStrategies.hedgeFundDescription" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFStrategyHedgeFundDescription" name="AIFStrategyHedgeFundDescription" type="text"\n\t\t\t\t\t\t\tclass="k-textbox" data-bind="value: AIFMD.hedgeFundDescription" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: AIFMD.isPrivateEquityFund">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFStrategyPrivateEquity" data-i18n="data:fields.AIFStrategies.privateEquityFund"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFStrategyPrivateEquity" name="AIFStrategyPrivateEquity"\n\t\t\t\t\t\t\tdata-role="domosaifstrategyprivateequity" data-bind="value: AIFMD.privateEquityStrategy" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: AIFMD.isPrivateEquityFundOther">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFStrategyPrivateEquityDescription"\n\t\t\t\t\t\t\tdata-i18n="data:fields.AIFStrategies.privateEquityFundDescription"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFStrategyPrivateEquityDescription" name="AIFStrategyPrivateEquityDescription"\n\t\t\t\t\t\t\ttype="text" class="k-textbox" data-bind="value: AIFMD.privateEquityDescription" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: AIFMD.isRealEstateFund">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFStrategyRealEstate" data-i18n="data:fields.AIFStrategies.realEstateFund"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFStrategyRealEstate" name="AIFStrategyRealEstate"\n\t\t\t\t\t\t\tdata-role="domosaifstrategyrealestate" data-bind="value: AIFMD.realEstateStrategy" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: AIFMD.isRealEstateFundOther">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFStrategyRealEstateDescription"\n\t\t\t\t\t\t\tdata-i18n="data:fields.AIFStrategies.realEstateFundDescription"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFStrategyRealEstateDescription" name="AIFStrategyRealEstateDescription" type="text"\n\t\t\t\t\t\t\tclass="k-textbox" data-bind="value: AIFMD.realEstateDescription" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: AIFMD.isFundOfFunds">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFStrategyFundOfFunds" data-i18n="data:fields.AIFStrategies.fundOfFunds"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFStrategyFundOfFunds" name="AIFStrategyFundOfFunds"\n\t\t\t\t\t\t\tdata-role="domosaifstrategyfundoffunds" data-bind="value: AIFMD.fundOfFundsStrategy" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: AIFMD.isFundOfFundsOther">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFStrategyFundOfFundsDescription"\n\t\t\t\t\t\t\tdata-i18n="data:fields.AIFStrategies.fundOfFundsDescription" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFStrategyFundOfFundsDescription" name="AIFStrategyFundOfFundsDescription"\n\t\t\t\t\t\t\ttype="text" class="k-textbox" data-bind="value: AIFMD.fundOfFundsDescription" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: AIFMD.isOtherFund">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFStrategyOther" data-i18n="data:fields.AIFStrategies.otherFund"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFStrategyOther" name="AIFStrategyOther" data-role="domosaifstrategyother"\n\t\t\t\t\t\t\tdata-bind="value: AIFMD.otherFundStrategy" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: AIFMD.isOtherFundOther">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFStrategyOtherDescription"\n\t\t\t\t\t\t\tdata-i18n="data:fields.AIFStrategies.otherFundDescription" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFStrategyOtherDescription" name="AIFStrategyOtherDescription" type="text"\n\t\t\t\t\t\t\tclass="k-textbox" data-bind="value: AIFMD.otherFundDescription" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="investorGroup" data-i18n="data:fields.AIFMDInvestorGroup"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="investorGroup" name="investorGroup" data-role="domosaifmdinvestorgroup"\n\t\t\t\t\t\t\tdata-bind="value: AIFMD.investorGroup" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFReportingCode" data-i18n="data:fields.AIFReportingCode"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t\x3c!-- Careful: AIF not AIFM --\x3e\n\t\t\t\t\t\t<input id="AIFReportingCode" class="formLarge" name="AIFMReportingCode"\n\t\t\t\t\t\t\tdata-role="domosaifreportingcode" data-bind="value: AIFMD.AIFReportingCode" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFReportingObligation" data-i18n="data:fields.AIFReportingObligation"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t\x3c!-- Careful: AIF not AIFM --\x3e\n\t\t\t\t\t\t<input id="AIFReportingObligation" class="formLarge" name="AIFReportingObligation"\n\t\t\t\t\t\t\tdata-role="domosaifreportingobligation" data-bind="value: AIFMD.AIFReportingObligation" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMReportingObligationFrequency"\n\t\t\t\t\t\t\tdata-i18n="data:fields.AIFMReportingObligationFrequency" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMReportingObligationFrequency" name="AIFMReportingObligation"\n\t\t\t\t\t\t\tdata-role="domosaifmreportingobligationfrequency"\n\t\t\t\t\t\t\tdata-bind="value: AIFMD.AIFMReportingObligationFrequency" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="useTransparency" data-i18n="data:fields.useTransparency"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="useTransparency" type="checkbox" data-bind="checked: AIFMD.transparency" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="launchAtNavDate" data-i18n="data:fields.launchAtNavDate"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="launchAtNavDate" type="checkbox" data-bind="checked: launchAtNavDate" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.TPT"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="bclSector" data-i18n="data:fields.bclSector"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="bclSector" data-role="domosbclsector" data-bind="value: bclSector" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\t\t\x3c!-- References --\x3e\n\t\t<div>\n\n\n\t\t\t<h2 data-i18n="data:sections.regulation"></h2>\n\n\t\t\t<div id="nationalCodeGrid" class="floatingGrid_900_px"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.references"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="BIC" data-i18n="data:fields.BIC"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="BIC" name="BIC" class="k-textbox" type="text" data-bind="value: BIC" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="CUSIP" data-i18n="data:fields.CUSIP"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="CUSIP" name="CUSIP" class="k-textbox" type="text" data-bind="value: CUSIP" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="ECB" data-i18n="data:fields.ECB"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="ECB" name="ECB" class="k-textbox" type="text" data-bind="value: ECB" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="ISIN" data-i18n="data:fields.ISIN"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="ISIN" name="ISIN" class="k-textbox" type="text" data-bind="value: ISIN" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="LEI" data-i18n="data:fields.LEI"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="LEI" name="LEI" class="k-textbox" type="text" data-bind="value: LEI" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="IEI" data-i18n="data:fields.IEI"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="IEI" name="IEI" class="k-textbox" type="text" data-bind="value: IEI" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="RIC" data-i18n="data:fields.RIC"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="RIC" name="RIC" class="k-textbox" type="text" data-bind="value: RIC" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="SEDOL" data-i18n="data:fields.SEDOL"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="SEDOL" name="SEDOL" class="k-textbox" type="text" data-bind="value: SEDOL" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="TICKER" data-i18n="data:fields.TICKER"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="TICKER" name="TICKER" class="k-textbox" type="text" data-bind="value: TICKER" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="GIIN" data-i18n="data:fields.GIIN"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="GIIN" name="GIIN" data-role="maskedtextbox" data-mask="AAAAAA\\.AAAAA\\.LL\\.000"\n\t\t\t\t\t\t\tdata-bind="value: GIIN" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="TIN" data-i18n="data:fields.TIN"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="TIN" name="TIN" class="k-textbox" type="text" data-bind="value: TIN" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="INE" data-i18n="data:fields.IDENTIFICATION_NUMBER_EXTENSION"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="INE" name="INE" data-role="maskedtextbox" data-mask="L00000000"\n\t\t\t\t\t\t\tdata-bind="value: IDENTIFICATION_NUMBER_EXTENSION" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\n\t\t\t<h2 data-i18n="data:sections.customReferences"></h2>\n\n\t\t\t<div id="customReferenceGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t</div>\n\n\t\t\x3c!-- Tags --\x3e\n\t\t<div>\n\t\t\t<div id="editTags"></div>\n\t\t</div>\n\n\t\t\x3c!-- Histories --\x3e\n\t\t<div>\n\t\t\t<label for="historyDate" data-i18n="history:fields.historyDate"></label>\n\t\t\t<input id="historyDate" data-bind="value:historyDate"/>\n\t\t\t<p></p>\n\t\t\t<p></p>\n\t\t\t<div id="editHistory"></div>\n\t\t</div>\n\n\t\t\x3c!-- Metrics --\x3e\n\t\t<div>\n\t\t\t\t<label for="metricDate" data-i18n="metric:fields.metricDate"></label>\n\t\t\t\t<input id="metricDate"  data-bind="value:metricDate"/>\n\t\t\t\t<p></p>\n\t\t\t\t<p></p>\n\t\t\t<div id="editMetric"></div>\n\t\t</div>\n\n\t\t\x3c!-- Documents --\x3e\n\t\t<div>\n\t\t\t<div id="objectDocument"></div>\n\t\t</div>\n\n\t\t\x3c!-- compliance --\x3e\n\t\t<div>\n\t\t\t<div id="compliance"></div>\n\t\t</div>\n\n\t\t\x3c!-- aml/kyc --\x3e\n\t\t<div>\n\t\t\t<div id="amlKyc"></div>\n\t\t</div>\n\n\t\t\x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n\t</div>\n</div>'}),define("core/api/UciClosingReason",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UciClosingReason=void 0;var r,o;(r=e.UciClosingReason||(e.UciClosingReason={}))[r.LIQUIDATION=1]="LIQUIDATION",r[r.MERGER=2]="MERGER",r[r.STATUS_CHANGED=3]="STATUS_CHANGED",r[r.TEMPORARILY_CLOSED=4]="TEMPORARILY_CLOSED",r[r.CLOSED=5]="CLOSED",(o=e.UciClosingReason||(e.UciClosingReason={})).getName=a.EnumUtils.createNameFn("object:uciClosingReasons",o),o.widget=i.EnumWidgetUtils.createDropList("DomosUciClosingReason",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/NavFrequency",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NavFrequency=void 0;var r,o;(r=e.NavFrequency||(e.NavFrequency={}))[r.DAILY=1]="DAILY",r[r.DAILY_MONTH_END=2]="DAILY_MONTH_END",r[r.SEMI_WEEKLY=3]="SEMI_WEEKLY",r[r.SEMI_WEEKLY_MONTH_END=4]="SEMI_WEEKLY_MONTH_END",r[r.WEEKLY=5]="WEEKLY",r[r.WEEKLY_MONTH_END=6]="WEEKLY_MONTH_END",r[r.WEEKLY_MONTH_START=7]="WEEKLY_MONTH_START",r[r.WEEKLY_SUBSCRIPTION=8]="WEEKLY_SUBSCRIPTION",r[r.SEMI_MONTHLY=9]="SEMI_MONTHLY",r[r.SEMI_MONTHLY_MONTH_END=10]="SEMI_MONTHLY_MONTH_END",r[r.SEMI_MONTHLY_QUARTER_END=11]="SEMI_MONTHLY_QUARTER_END",r[r.SEMI_MONTHLY_SUBSCRIPTION=12]="SEMI_MONTHLY_SUBSCRIPTION",r[r.MONTHLY=13]="MONTHLY",r[r.MONTHLY_SUBSCRIPTION=14]="MONTHLY_SUBSCRIPTION",r[r.QUARTERLY=15]="QUARTERLY",r[r.QUARTERLY_SUBSCRIPTION=16]="QUARTERLY_SUBSCRIPTION",r[r.SEMI_ANNUALLY=17]="SEMI_ANNUALLY",r[r.SEMI_ANNUALLY_SUBSCRIPTION=18]="SEMI_ANNUALLY_SUBSCRIPTION",r[r.ANNUALLY=19]="ANNUALLY",r[r.ANNUALLY_SUBSCRIPTION=20]="ANNUALLY_SUBSCRIPTION",(o=e.NavFrequency||(e.NavFrequency={})).getName=a.EnumUtils.createNameFn("object:navFrequencies",o),o.widget=i.EnumWidgetUtils.createDropList("DomosNavFrequency",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/AIFReportingCode",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AIFReportingCode=void 0;var r,o;(r=e.AIFReportingCode||(e.AIFReportingCode={}))[r.AIF=1]="AIF",r[r.LEVERAGED_EU_AIF_OPT_IN=2]="LEVERAGED_EU_AIF_OPT_IN",r[r.LEVERAGED_NON_EU_AIF_OPT_IN_MARKETED=3]="LEVERAGED_NON_EU_AIF_OPT_IN_MARKETED",r[r.LEVERAGED_NON_EU_AIF_OPT_IN_NOT_MARKETED=4]="LEVERAGED_NON_EU_AIF_OPT_IN_NOT_MARKETED",r[r.UNLEVERAGED_EU_AIF_OPT_IN=5]="UNLEVERAGED_EU_AIF_OPT_IN",r[r.UNLEVERAGED_NON_EU_AIF_OPT_IN_MARKETED=6]="UNLEVERAGED_NON_EU_AIF_OPT_IN_MARKETED",r[r.UNLEVERAGED_NON_EU_AIF_OPT_IN_NOT_MARKETED=7]="UNLEVERAGED_NON_EU_AIF_OPT_IN_NOT_MARKETED",r[r.UNLEVERAGED_EU_AIF_ONLY=8]="UNLEVERAGED_EU_AIF_ONLY",r[r.UNLEVERAGED_NON_EU_AIF_ONLY_MARKETED=9]="UNLEVERAGED_NON_EU_AIF_ONLY_MARKETED",r[r.UNLEVERAGED_NON_EU_AIF_ONLY_NOT_MARKETED=10]="UNLEVERAGED_NON_EU_AIF_ONLY_NOT_MARKETED",r[r.UNDER_500M_LEVERAGED_EU_AIF=11]="UNDER_500M_LEVERAGED_EU_AIF",r[r.UNDER_500M_LEVERAGED_NON_EU_AIF_MARKETED=12]="UNDER_500M_LEVERAGED_NON_EU_AIF_MARKETED",r[r.UNDER_500M_LEVERAGED_NON_EU_AIF_NOT_MARKETED=13]="UNDER_500M_LEVERAGED_NON_EU_AIF_NOT_MARKETED",r[r.UNDER_500M_UNLEVERAGED_EU_AIF=14]="UNDER_500M_UNLEVERAGED_EU_AIF",r[r.UNDER_500M_UNLEVERAGED_NON_EU_AIF_MARKETED=15]="UNDER_500M_UNLEVERAGED_NON_EU_AIF_MARKETED",r[r.UNDER_500M_UNLEVERAGED_NON_EU_AIF_NOT_MARKETED=16]="UNDER_500M_UNLEVERAGED_NON_EU_AIF_NOT_MARKETED",r[r.UNLEVERAGE_EU_AIF_NON_LISTED_HY=17]="UNLEVERAGE_EU_AIF_NON_LISTED_HY",r[r.UNLEVERAGE_NON_EU_AIF_NON_LISTED_HY_MARKETED=18]="UNLEVERAGE_NON_EU_AIF_NON_LISTED_HY_MARKETED",r[r.UNLEVERAGE_NON_EU_AIF_NON_LISTED_HY_NOT_MARKETED=19]="UNLEVERAGE_NON_EU_AIF_NON_LISTED_HY_NOT_MARKETED",r[r.OVER_500M_LEVERAGED_EU_AIF=20]="OVER_500M_LEVERAGED_EU_AIF",r[r.OVER_500M_LEVERAGED_NON_EU_AIF_MARKETED=21]="OVER_500M_LEVERAGED_NON_EU_AIF_MARKETED",r[r.OVER_500M_LEVERAGED_NON_EU_AIF_NOT_MARKETED=22]="OVER_500M_LEVERAGED_NON_EU_AIF_NOT_MARKETED",r[r.OVER_500M_UNLEVERAGED_EU_AIF=23]="OVER_500M_UNLEVERAGED_EU_AIF",r[r.OVER_500M_UNLEVERAGED_NON_EU_AIF_MARKETED=24]="OVER_500M_UNLEVERAGED_NON_EU_AIF_MARKETED",r[r.OVER_500M_UNLEVERAGED_NON_EU_AIF_NOT_MARKETED=25]="OVER_500M_UNLEVERAGED_NON_EU_AIF_NOT_MARKETED",r[r.UNLEVERAGE_EU_AIF_NON_LISTED_Q=26]="UNLEVERAGE_EU_AIF_NON_LISTED_Q",r[r.UNLEVERAGE_NON_EU_AIF_NON_LISTED_Q_MARKETED=27]="UNLEVERAGE_NON_EU_AIF_NON_LISTED_Q_MARKETED",r[r.UNLEVERAGE_NON_EU_AIF_NON_LISTED_Q_NOT_MARKETED=28]="UNLEVERAGE_NON_EU_AIF_NON_LISTED_Q_NOT_MARKETED",r[r.LEVERAGED_EU_AIF_Q=29]="LEVERAGED_EU_AIF_Q",r[r.LEVERAGED_NON_EU_AIF_Q_MARKETED=30]="LEVERAGED_NON_EU_AIF_Q_MARKETED",r[r.LEVERAGED_NON_EU_AIF_Q_NOT_MARKETED=31]="LEVERAGED_NON_EU_AIF_Q_NOT_MARKETED",r[r.UNLEVERAGED_EU_AIF_Q=32]="UNLEVERAGED_EU_AIF_Q",r[r.UNLEVERAGED_NON_EU_AIF_Q_MARKETED=33]="UNLEVERAGED_NON_EU_AIF_Q_MARKETED",r[r.UNLEVERAGED_NON_EU_AIF_Q_NOT_MARKETED=34]="UNLEVERAGED_NON_EU_AIF_Q_NOT_MARKETED",r[r.LEVERAGED_AIF_PPR_MARKETED=35]="LEVERAGED_AIF_PPR_MARKETED",r[r.UNLEVERAGED_AIF_PPR_MARKETED=36]="UNLEVERAGED_AIF_PPR_MARKETED",r[r.UNLEVERAGED_AIF_PPR_UNLEVERAGED_ONLY_MARKETED=37]="UNLEVERAGED_AIF_PPR_UNLEVERAGED_ONLY_MARKETED",r[r.UNDER_500M_LEVERAGED_AIF_PPR_HY_MARKETED=38]="UNDER_500M_LEVERAGED_AIF_PPR_HY_MARKETED",r[r.UNDER_500M_UNLEVERAGED_AIF_PPR_HY_MARKETED=39]="UNDER_500M_UNLEVERAGED_AIF_PPR_HY_MARKETED",r[r.UNLEVERAGED_AIF_NON_LISTED_PPR_HY_MARKETED=40]="UNLEVERAGED_AIF_NON_LISTED_PPR_HY_MARKETED",r[r.OVER_500M_LEVERAGED_AIF_PPR_HY_MARKETED=41]="OVER_500M_LEVERAGED_AIF_PPR_HY_MARKETED",r[r.OVER_500M_UNLEVERAGED_AIF_PPR_HY_MARKETED=42]="OVER_500M_UNLEVERAGED_AIF_PPR_HY_MARKETED",r[r.UNLEVERAGED_AIF_NON_LISTED_PPR_Q_MARKETED=43]="UNLEVERAGED_AIF_NON_LISTED_PPR_Q_MARKETED",r[r.LEVERAGED_AIF_PPR_Q_MARKETED=44]="LEVERAGED_AIF_PPR_Q_MARKETED",r[r.UNLEVERAGED_AIF_PPR_Q_MARKETED=45]="UNLEVERAGED_AIF_PPR_Q_MARKETED",(o=e.AIFReportingCode||(e.AIFReportingCode={})).getName=a.EnumUtils.createNameFn("object:AIFReportingCode",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAIFReportingCode",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/AIFReportingObligation",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AIFReportingObligation=void 0;var r,o;(r=e.AIFReportingObligation||(e.AIFReportingObligation={}))[r.NONE=0]="NONE",r[r.ARTICLE_24_1=1]="ARTICLE_24_1",r[r.ARTICLE_24_1_AND_24_2=2]="ARTICLE_24_1_AND_24_2",r[r.ARTICLE_3_3_D=3]="ARTICLE_3_3_D",r[r.ARTICLE_24_1_AND_24_2_AND_24_4=4]="ARTICLE_24_1_AND_24_2_AND_24_4",r[r.ARTICLE_24_1_AND_24_4=5]="ARTICLE_24_1_AND_24_4",(o=e.AIFReportingObligation||(e.AIFReportingObligation={})).getName=a.EnumUtils.createNameFn("object:AIFReportingObligation",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAIFReportingObligation",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/TransparencyType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransparencyType=void 0;var r,o;(r=e.TransparencyType||(e.TransparencyType={}))[r.NONE=1]="NONE",r[r.SIMPLE=2]="SIMPLE",r[r.ADJUSTED=3]="ADJUSTED",(o=e.TransparencyType||(e.TransparencyType={})).getName=n.EnumUtils.createNameFn("object:TransparencyType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosTransparencyType",o,!1),o.column=a.EnumColumnUtils.createFactory(o,o.widget)}),function(){var Z,tt,et=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};Z="#commitmentButtonId",tt="createShare",define("views/data/edit/edit.investment.vehicle",["jquery","i18n","ui","lodash","object/ui/AssetUI","object/ui/EntityUI","core/util/ObservableUtils","object/ui/ObjectTypeUI","object/data/ObjectCategories","views/data/model/vehicle.model","views/data/edit/common/documents","views/data/edit/common/national.code.grid","views/data/edit/common/reference.grid","core/ui/DateUI","core/ui/PercentEmptyUI","core/ui/NumberEmptyUI","common/grids/BusinessRecipientGrid","core/api/ShareIssuingType","common/date/HistoryDatePicker","object/data/ObjectTypes","object/views/share/ShareCreateWindow","object/views/address/ObjectAddressEditor","object/views/blockedPeriod/BlockedPeriodGrid","object/views/compliance/ComplianceEntityView","compliance/views/aml/TrackedEntitiesView","views/common/contacts.grid","object/views/related_object/views/RelatedObjectGrid","text!templates/data/edit/investment.vehicle.html","basic/ui/CurrencyUI","core/api/UciClosingReason","core/api/NavFrequency","core/api/CentralBank","core/api/AIFReportingCode","core/api/AIFReportingObligation","core/api/AIFMReportingObligationFrequency","core/api/AIFStrategyFundOfFunds","core/api/AIFStrategyHedgeFund","core/api/AIFStrategyOther","core/api/AIFStrategyPrivateEquity","core/api/AIFStrategyRealEstate","core/api/AIFType","core/api/AIFMDInvestorGroup","core/api/MasterFeeder","core/api/BclSector","core/api/Periodicity","basic/ui/CountryUI","core/api/TransparencyType","data/ui/IndexUI"],function(a,r,t,o,e,n,i,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S){var N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q,z,X;return M=b.NumberEmptyUI,W=f.PercentEmptyUI,U=m.DateUI,V=i.ObservableUtils,A=n.EntityUI,N=e.AssetUI,A.Legal,q=d.ObjectTypeUI,G=l.ObjectCategories,L=t.grid,P=L.transports,_=G.investmentVehicles,R=v.BusinessRecipientGrid,J=y.ShareIssuingType,F=h.HistoryDatePicker,B=g.ObjectTypes,Y=T.ShareCreateWindow,j=I.ObjectAddressEditor,x=C.BlockedPeriodGrid,O=w.ComplianceEntityView,K=k.TrackedEntitiesView,H=D.RelatedObjectGrid,$=function(n,t){return Y.open(B.fundShare.id,r.t("object:shareClass.createShare",B)).then(function(t){var e;if(t)return e={fundShare:t,id:null,issuedCount:null,weight:null},n.get("fundShares").push(e)}),null},z=function(t){var e,n,i;return i={name:"fund"},e=t.model,n={dataSource:{transport:P.createLocal({data:e.get("fundShares")}),schema:{model:{id:"id",fields:{fundShare:{nullable:!0,validation:{required:!0}},issuedCount:{type:"number"},weight:{type:"number"}},fundShareName:function(){return V.get(this,"fundShare.name")}}}},columns:[{command:["edit","destroy"],title:" ",width:"150px"},N.FundShare.column({field:"fundShare",title:r.t("data:fields.fundShare")}),M.column({field:"issuedCount",title:r.t("data:fields.issuedCount")}),W.column({field:"weight",title:r.t("data:fields.weight")})],toolbar:[{name:"create"},{name:tt,text:r.t("object:shareClass.createShare",i)}],pageable:L.defaultPageable(),scrollable:!1},L.withDefaults(n),a("#fundSharesGrid").kendoGrid(n),a(".k-grid-createShare").click(function(){return $(e)})},function(t){var e,n;return e=t.model,n={dataSource:{transport:P.createLocal({data:e.get("contacts")}),schema:{model:{id:"id",fields:{entity:{nullable:!0,validation:{required:!0}},description:{type:"string"},role:{type:"number",defaultValue:EntityRole.U11},mailOrganisation:{validation:{email:!0}}},entityName:function(){return V.get(this,"entity.name")},getPhone:function(){return V.get(this,"entity.phone")},getMail:function(){return V.get(this,"entity.mail")}}}},columns:[{command:["edit","destroy"],title:" "},A.Extended.column({field:"entity",title:r.t("data:fields.contact")}),EntityRole.column({field:"role",title:r.t("data:fields.role")}),{field:"description",title:r.t("data:fields.description")},{field:"getPhone()",title:r.t("data:fields.phone"),editable:!1},{field:"getMail()",title:r.t("data:fields.mail"),editable:!1},{field:"mailOrganisation",title:r.t("data:fields.mailOrganisation"),editable:!1}],toolbar:["create"],pageable:L.defaultPageable(),scrollable:!1},L.withDefaults(n),a(CONTACT_GRID).kendoGrid(n)},Q=function(t){var e,n;return e=t.model,n={dataSource:{transport:P.createLocal({data:e.get("closingDates")}),schema:{model:{id:"closingDateId",fields:{closingDate:{type:"date"}}}}},columns:[{command:["edit","destroy"],title:" ",width:"150px"},U.column({field:"closingDate",title:r.t("data:fields.closingDate"),width:"350px"})],toolbar:["create"],pageable:L.defaultPageable(),scrollable:!1},L.withDefaults(n),a("#ClosingDatesGrid").kendoGrid(n)},X=function(t){var e;return e=t.model,J.withOneOrWithoutCapitalCall(e.shareIssuing)?a(Z).text(r.t("history:subscriptions.title")):a(Z).text(r.t("history:subscriptions.commitment"))},function(t,e,n){var i,a,r;return i=t.model,"shareIssuing"===n.field&&X(t),a=n.field,0<=et.call(listFieldToValidate,a)&&(r=i.get(n.field),o.isEmpty(r)&&i.set(n.field,null),e.validate()),null},{getTemplates:function(){return{view:S}},createRawModel:function(){var t;return t={},s.updateRawModel(t),t},updateModel:function(t,e){return s.updateModel(t,e)},init:function(t){var e,n;return q.widget(a("#type"),_),z(t),E.init(t),Q(t),R.init(a("#recipientsGrid"),t),n=t.model,c.setupGrid(t.model),p.setupGrid(_,t.model),u.init(t),F.history(a("#historyDate"),n),F.metric(a("#metricDate"),n),j.initEntity(a("#addresses"),t.model),x.init(a("#blockedPeriods"),n),e=t.object.id,O.init(a("#compliance"),e),K.display(a("#amlKyc"),e),H.setup(a("#relatedObjectGrid"),e),null},viewShow:function(t){return u.refresh(t),X(t),null}}})}.call(this),define("text!templates/data/edit/sell.side.html",[],function(){return'<div id="editRoot">\n\t<h1 data-i18n="object:sellSides.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="object:sellSides.edit" data-bind="invisible: isNew"></h1>\n\n\t<h2 data-bind="text: name"></h2>\n\n\t<div id="editActions"></div>\n\n\t<p></p>\n\n\t<div data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li class="k-state-active">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.advanced"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.references"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.tags"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.histories"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.documents"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.compliance"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.amlKyc"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="name" data-i18n="data:fields.name"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name"\n\t\t\t\t\t\t\trequired="required" data-i18n="[validationMessage]data:validation.nameRequired" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="created" data-i18n="data:fields.creationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="created" name="created" class="k-textbox" type="text" data-bind="display: created"\n\t\t\t\t\t\t\tdata-format="g" readonly="readonly" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="shortName" data-i18n="data:fields.shortName"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="shortName" name="shortName" class="k-textbox" type="text"\n\t\t\t\t\t\t\tdata-bind="value: shortName" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="type" data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="type" name="type" data-bind="value: type" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="country" data-i18n="data:fields.country" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="country" name="country" data-role="domoscountry" data-bind="value: country" data-option-label="--"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="needsCertification" data-i18n="data:fields.needsCertification"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="needsCertification" name="needsCertification" type="checkbox" data-bind="checked: needsCertification"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="inceptionDate" data-i18n="data:fields.inceptionDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="inceptionDate" name="inceptionDate" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: inceptionDate" required="required"\n\t\t\t\t\t\t\tdata-i18n="[validationMessage]data:validation.dateRequired" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<button class="k-button" data-i18n="object:entities.actions.portfolio" data-bind="click: portfolioClick"></button>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="liquidationDate" data-i18n="data:fields.liquidationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="liquidationDate" name="liquidationDate" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: liquidationDate" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="internal" data-i18n="data:fields.internal"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="internal" name="internal" type="checkbox" data-bind="checked: internal" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="phone" data-i18n="data:fields.phone"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="phone" name="phone" class="k-textbox" type="text" data-bind="value: phone" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="mail" data-i18n="data:fields.mail"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="mail" name="mail" class="k-textbox" type="email" data-bind="value: mail"\n\t\t\t\t\t\t\tdata-i18n="[validationMessage]data:validation.mailIncorrect" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="webSite" data-i18n="data:fields.webSite"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="webSite" name="webSite" class="k-textbox" type="url" data-bind="value: webSite"\n\t\t\t\t\t\t\tdata-i18n="[validationMessage]data:validation.urlIncorrect" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label data-i18n="data:fields.reportingCurrency"></label>\t\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input data-role="domoscurrency" data-bind="value: reportingCurrency" data-option-label="--"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="investorType" data-i18n="data:fields.investorType" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="investorType" name="investorType" data-role="domosinvestortype"\n\t\t\t\t\t\t\tdata-bind="value: investorType" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.addresses"></h2>\n\n\t\t\t<div id="addresses"></div>\n\t\t\t<h2 data-i18n="data:sections.roles"></h2>\n\n\t\t\t<div id="roles" data-role="domosrolemultiselect" data-bind="value: roles"></div>\n\n\t\t</div>\n\n\t\t\x3c!-- Advanced --\x3e\n\t\t<div>\n\t\t\t<h2 data-i18n="data:sections.contacts"></h2>\n\n\t\t\t<div id="contactGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.recipients"></h2>\n\t\t\t<div id="recipientsGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.blockedPeriods"></h2>\n\t\t\t<div id="blockedPeriods" class="floatingGrid_1600_px"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.AIFMD"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="investorGroup" data-i18n="data:fields.AIFMDInvestorGroup"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="investorGroup" name="investorGroup" data-role="domosaifmdinvestorgroup"\n\t\t\t\t\t\t\tdata-bind="value: AIFMD.investorGroup" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMReportingCode" data-i18n="data:fields.AIFMReportingCode"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMReportingCode" class="formLarge" name="AIFMReportingCode"\n\t\t\t\t\t\t\tdata-role="domosaifmreportingcode" data-bind="value: AIFMD.AIFMReportingCode" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMReportingObligation" data-i18n="data:fields.AIFMReportingObligation"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMReportingObligation" class="formLarge" name="AIFMReportingObligation"\n\t\t\t\t\t\t\tdata-role="domosaifmreportingobligation" data-bind="value: AIFMD.AIFMReportingObligation" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMReportingObligationFrequency"\n\t\t\t\t\t\t\tdata-i18n="data:fields.AIFMReportingObligationFrequency" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMReportingObligationFrequency" name="AIFMReportingObligation"\n\t\t\t\t\t\t\tdata-role="domosaifmreportingobligationfrequency"\n\t\t\t\t\t\t\tdata-bind="value: AIFMD.AIFMReportingObligationFrequency" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.TPT"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="bclSector" data-i18n="data:fields.bclSector"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="bclSector" data-role="domosbclsector" data-bind="value: bclSector" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\t\t\x3c!-- References --\x3e\n\t\t<div>\n\n\t\t\t<h2 data-i18n="data:sections.regulation"></h2>\n\n\t\t\t<div id="nationalCodeGrid" class="floatingGrid_900_px"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.references"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="BIC" data-i18n="data:fields.BIC"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="BIC" name="BIC" class="k-textbox" type="text" data-bind="value: BIC" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="CUSIP" data-i18n="data:fields.CUSIP"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="CUSIP" name="CUSIP" class="k-textbox" type="text" data-bind="value: CUSIP" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="ECB" data-i18n="data:fields.ECB"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="ECB" name="ECB" class="k-textbox" type="text" data-bind="value: ECB" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="ISIN" data-i18n="data:fields.ISIN"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="ISIN" name="ISIN" class="k-textbox" type="text" data-bind="value: ISIN" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="LEI" data-i18n="data:fields.LEI"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="LEI" name="LEI" class="k-textbox" type="text" data-bind="value: LEI" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="IEI" data-i18n="data:fields.IEI"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="IEI" name="IEI" class="k-textbox" type="text" data-bind="value: IEI" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="RIC" data-i18n="data:fields.RIC"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="RIC" name="RIC" class="k-textbox" type="text" data-bind="value: RIC" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="SEDOL" data-i18n="data:fields.SEDOL"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="SEDOL" name="SEDOL" class="k-textbox" type="text" data-bind="value: SEDOL" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="TICKER" data-i18n="data:fields.TICKER"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="TICKER" name="TICKER" class="k-textbox" type="text" data-bind="value: TICKER" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="GIIN" data-i18n="data:fields.GIIN"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="GIIN" name="GIIN" data-role="maskedtextbox" data-mask="AAAAAA\\.AAAAA\\.LL\\.000"\n\t\t\t\t\t\t\tdata-bind="value: GIIN" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="TIN" data-i18n="data:fields.TIN"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="TIN" name="TIN" class="k-textbox" type="text" data-bind="value: TIN" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="INE" data-i18n="data:fields.IDENTIFICATION_NUMBER_EXTENSION"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="INE" name="INE" data-role="maskedtextbox" data-mask="L00000000"\n\t\t\t\t\t\t\tdata-bind="value: IDENTIFICATION_NUMBER_EXTENSION" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.customReferences"></h2>\n\n\t\t\t<div id="customReferenceGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t</div>\n\n\t\t\x3c!-- Tags --\x3e\n\t\t<div>\n\t\t\t<div id="editTags"></div>\n\t\t</div>\n\n\t\t\x3c!-- Histories --\x3e\n\t\t<div>\n\t\t\t<label for="historyDate" data-i18n="history:fields.historyDate"></label>\n\t\t\t<input id="historyDate" name="historyDate" data-bind="value: historyDate" />\n\t\t\t<p></p>\n\t\t\t<p></p>\n\t\t\t<div id="editHistory"></div>\n\t\t</div>\n\n\t\t\x3c!-- Documents --\x3e\n\t\t<div>\n\t\t\t<div id="objectDocument"></div>\n\t\t</div>\n\n\t\t\x3c!-- compliance --\x3e\n\t\t<div>\n\t\t\t<div id="compliance"></div>\n\t\t</div>\n\n\t\t\x3c!-- aml/kyc --\x3e\n\t\t<div>\n\t\t\t<div id="amlKyc"></div>\n\t\t</div>\n\n\t\t\x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n\t</div>\n\n</div>'}),function(){define("views/data/edit/edit.sell.side",["jquery","i18n","ui","core/util/ObservableUtils","object/ui/ObjectTypeUI","object/data/ObjectCategories","views/data/model/legal.model","views/data/edit/common/documents","views/data/edit/common/national.code.grid","views/data/edit/common/reference.grid","common/grids/BusinessRecipientGrid","common/date/HistoryDatePicker","object/views/address/ObjectAddressEditor","object/views/blockedPeriod/BlockedPeriodGrid","object/views/compliance/ComplianceEntityView","compliance/views/aml/TrackedEntitiesView","views/common/contacts.grid","object/views/related_object/views/RelatedObjectGrid","text!templates/data/edit/sell.side.html","core/api/AIFMReportingCode","core/api/AIFMReportingObligation","core/api/AIFMReportingObligationFrequency","core/api/AIFMDInvestorGroup","core/api/BclSector","basic/ui/CountryUI"],function(n,t,e,i,a,r,o,d,l,s,u,c,p,m,f,b,v,y,h){var g,T,I,C,w,k,E,D,S;return i.ObservableUtils,E=a.ObjectTypeUI,e.grid.transports,I=r.ObjectCategories.sellSides,T=u.BusinessRecipientGrid,w=c.HistoryDatePicker,k=p.ObjectAddressEditor,g=m.BlockedPeriodGrid,C=f.ComplianceEntityView,S=b.TrackedEntitiesView,D=y.RelatedObjectGrid,{getTemplates:function(){return{view:h}},createRawModel:function(){var t;return t={},o.updateRawModel(t),t},updateModel:function(t,e){return o.updateModel(t,e)},init:function(t){var e;return E.widget(n("#type"),I),v.init(t),T.init(n("#recipientsGrid"),t),l.setupGrid(t.model),s.setupGrid(I,t.model),d.init(t),w.history(n("#historyDate"),t.model),k.initEntity(n("#addresses"),t.model),g.init(n("#blockedPeriods"),t.model),e=t.object.id,C.init(n("#compliance"),e),S.display(n("#amlKyc"),e),D.setup(n("#relatedObjectGrid"),e),null},viewShow:function(t){return d.refresh(t),null}}})}.call(this),define("text!templates/data/edit/legal.other.html",[],function(){return'<div id="editRoot">\n\t<h1 data-i18n="object:legalOthers.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="object:legalOthers.edit" data-bind="invisible: isNew"></h1>\n\n\t<h2 data-bind="text: name"></h2>\n\n\t<div id="editActions"></div>\n\n\t<p></p>\n\n\t<div data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li class="k-state-active">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.advanced"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.references"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.tags"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.histories"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.documents"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.compliance"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.amlKyc"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="name" data-i18n="data:fields.name"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name"\n\t\t\t\t\t\t\trequired="required" data-i18n="[validationMessage]data:validation.nameRequired" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="created" data-i18n="data:fields.creationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="created" name="created" class="k-textbox" type="text" data-bind="display: created"\n\t\t\t\t\t\t\tdata-format="g" readonly="readonly" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="shortName" data-i18n="data:fields.shortName"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="shortName" name="shortName" class="k-textbox" type="text"\n\t\t\t\t\t\t\tdata-bind="value: shortName" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="type" data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="type" name="type" data-bind="value: type" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="country" data-i18n="data:fields.country" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="country" name="country" data-role="domoscountry" data-bind="value: country" data-option-label="--"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="needsCertification" data-i18n="data:fields.needsCertification"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="needsCertification" name="needsCertification" type="checkbox" data-bind="checked: needsCertification"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="inceptionDate" data-i18n="data:fields.inceptionDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="inceptionDate" name="inceptionDate" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: inceptionDate" required="required"\n\t\t\t\t\t\t\tdata-i18n="[validationMessage]data:validation.dateRequired" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<button class="k-button" data-i18n="object:entities.actions.portfolio" data-bind="click: portfolioClick"></button>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="liquidationDate" data-i18n="data:fields.liquidationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="liquidationDate" name="liquidationDate" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: liquidationDate" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="internal" data-i18n="data:fields.internal"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="internal" name="internal" type="checkbox" data-bind="checked: internal" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="phone" data-i18n="data:fields.phone"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="phone" name="phone" class="k-textbox" type="text" data-bind="value: phone" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="mail" data-i18n="data:fields.mail"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="mail" name="mail" class="k-textbox" type="email" data-bind="value: mail"\n\t\t\t\t\t\t\tdata-i18n="[validationMessage]data:validation.mailIncorrect" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="webSite" data-i18n="data:fields.webSite"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="webSite" name="webSite" class="k-textbox" type="url" data-bind="value: webSite"\n\t\t\t\t\t\t\tdata-i18n="[validationMessage]data:validation.urlIncorrect" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label data-i18n="data:fields.reportingCurrency"></label>\t\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input data-role="domoscurrency" data-bind="value: reportingCurrency" data-option-label="--"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="investorType" data-i18n="data:fields.investorType" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="investorType" name="investorType" data-role="domosinvestortype"\n\t\t\t\t\t\t\tdata-bind="value: investorType" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.addresses"></h2>\n\n\t\t\t<div id="addresses"></div>\n\t\t\t<h2 data-i18n="data:sections.roles"></h2>\n\n\t\t\t<div id="roles" data-role="domosrolemultiselect" data-bind="value: roles"></div>\n\n\t\t</div>\n\n\t\t\x3c!-- Advanced --\x3e\n\t\t<div>\n\t\t\t<h2 data-i18n="data:sections.recipients"></h2>\n\t\t\t<div id="recipientsGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t\t<h2 data-i18n="data:sections.contacts"></h2>\n\n\t\t\t<div id="contactGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.blockedPeriods"></h2>\n\t\t\t<div id="blockedPeriods" class="floatingGrid_1600_px"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.AIFMD"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="investorGroup" data-i18n="data:fields.AIFMDInvestorGroup"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="investorGroup" name="investorGroup" data-role="domosaifmdinvestorgroup"\n\t\t\t\t\t\t\tdata-bind="value: AIFMD.investorGroup" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMReportingCode" data-i18n="data:fields.AIFMReportingCode"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMReportingCode" class="formLarge" name="AIFMReportingCode"\n\t\t\t\t\t\t\tdata-role="domosaifmreportingcode" data-bind="value: AIFMD.AIFMReportingCode" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMReportingObligation" data-i18n="data:fields.AIFMReportingObligation"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMReportingObligation" class="formLarge" name="AIFMReportingObligation"\n\t\t\t\t\t\t\tdata-role="domosaifmreportingobligation" data-bind="value: AIFMD.AIFMReportingObligation" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMReportingObligationFrequency"\n\t\t\t\t\t\t\tdata-i18n="data:fields.AIFMReportingObligationFrequency" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMReportingObligationFrequency" name="AIFMReportingObligation"\n\t\t\t\t\t\t\tdata-role="domosaifmreportingobligationfrequency"\n\t\t\t\t\t\t\tdata-bind="value: AIFMD.AIFMReportingObligationFrequency" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.TPT"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="bclSector" data-i18n="data:fields.bclSector"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="bclSector" data-role="domosbclsector" data-bind="value: bclSector" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\t\t\x3c!-- References --\x3e\n\t\t<div>\n\n\t\t\t<h2 data-i18n="data:sections.regulation"></h2>\n\n\t\t\t<div id="nationalCodeGrid" class="floatingGrid_900_px"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.references"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="BIC" data-i18n="data:fields.BIC"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="BIC" name="BIC" class="k-textbox" type="text" data-bind="value: BIC" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="CUSIP" data-i18n="data:fields.CUSIP"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="CUSIP" name="CUSIP" class="k-textbox" type="text" data-bind="value: CUSIP" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="ECB" data-i18n="data:fields.ECB"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="ECB" name="ECB" class="k-textbox" type="text" data-bind="value: ECB" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="ISIN" data-i18n="data:fields.ISIN"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="ISIN" name="ISIN" class="k-textbox" type="text" data-bind="value: ISIN" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="LEI" data-i18n="data:fields.LEI"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="LEI" name="LEI" class="k-textbox" type="text" data-bind="value: LEI" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="IEI" data-i18n="data:fields.IEI"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="IEI" name="IEI" class="k-textbox" type="text" data-bind="value: IEI" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="RIC" data-i18n="data:fields.RIC"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="RIC" name="RIC" class="k-textbox" type="text" data-bind="value: RIC" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="SEDOL" data-i18n="data:fields.SEDOL"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="SEDOL" name="SEDOL" class="k-textbox" type="text" data-bind="value: SEDOL" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="TICKER" data-i18n="data:fields.TICKER"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="TICKER" name="TICKER" class="k-textbox" type="text" data-bind="value: TICKER" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="GIIN" data-i18n="data:fields.GIIN"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="GIIN" name="GIIN" data-role="maskedtextbox" data-mask="AAAAAA\\.AAAAA\\.LL\\.000"\n\t\t\t\t\t\t\tdata-bind="value: GIIN" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="TIN" data-i18n="data:fields.TIN"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="TIN" name="TIN" class="k-textbox" type="text" data-bind="value: TIN" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="INE" data-i18n="data:fields.IDENTIFICATION_NUMBER_EXTENSION"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="INE" name="INE" data-role="maskedtextbox" data-mask="L00000000"\n\t\t\t\t\t\t\tdata-bind="value: IDENTIFICATION_NUMBER_EXTENSION" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.customReferences"></h2>\n\n\t\t\t<div id="customReferenceGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t</div>\n\n\n\t\t\x3c!-- Tags --\x3e\n\t\t<div>\n\t\t\t<div id="editTags"></div>\n\t\t</div>\n\n\t\t\x3c!-- Histories --\x3e\n\t\t<div>\n\t\t\t<label for="historyDate" data-i18n="history:fields.historyDate"></label>\n\t\t\t<input id="historyDate" name="historyDate" data-bind="value: historyDate" />\n\t\t\t<p></p>\n\t\t\t<p></p>\n\t\t\t<div id="editHistory"></div>\n\t\t</div>\n\n\t\t\x3c!-- Documents --\x3e\n\t\t<div>\n\t\t\t<div id="objectDocument"></div>\n\t\t</div>\n\n\t\t\x3c!-- compliance --\x3e\n\t\t<div>\n\t\t\t<div id="compliance"></div>\n\t\t</div>\n\n\t\t\x3c!-- aml/kyc --\x3e\n\t\t<div>\n\t\t\t<div id="amlKyc"></div>\n\t\t</div>\n\n\t\t\x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n\t</div>\n\n</div>'}),function(){define("views/data/edit/edit.legal.other",["jquery","i18n","ui","core/util/ObservableUtils","object/ui/ObjectTypeUI","object/data/ObjectCategories","views/data/model/legal.model","views/data/edit/common/documents","views/data/edit/common/national.code.grid","views/data/edit/common/reference.grid","common/grids/BusinessRecipientGrid","common/date/HistoryDatePicker","object/views/address/ObjectAddressEditor","object/views/blockedPeriod/BlockedPeriodGrid","object/views/compliance/ComplianceEntityView","compliance/views/aml/TrackedEntitiesView","views/common/contacts.grid","object/views/related_object/views/RelatedObjectGrid","text!templates/data/edit/legal.other.html","core/api/AIFMReportingCode","core/api/AIFMReportingObligation","core/api/AIFMReportingObligationFrequency","core/api/AIFMDInvestorGroup","core/api/BclSector","basic/ui/CountryUI"],function(n,t,e,i,a,r,o,d,l,s,u,c,p,m,f,b,v,y,h){var g,T,I,C,w,k,E,D,S;return i.ObservableUtils,E=a.ObjectTypeUI,e.grid.transports,I=r.ObjectCategories.legalOthers,T=u.BusinessRecipientGrid,w=c.HistoryDatePicker,k=p.ObjectAddressEditor,g=m.BlockedPeriodGrid,C=f.ComplianceEntityView,S=b.TrackedEntitiesView,D=y.RelatedObjectGrid,{getTemplates:function(){return{view:h}},createRawModel:function(){var t;return t={},o.updateRawModel(t),t},updateModel:function(t,e){return o.updateModel(t,e)},init:function(t){var e;return E.widget(n("#type"),I),v.init(t),l.setupGrid(t.model),s.setupGrid(I,t.model),T.init(n("#recipientsGrid"),t),d.init(t),w.history(n("#historyDate"),t.model),k.initEntity(n("#addresses"),t.model),g.init(n("#blockedPeriods"),t.model),e=t.object.id,C.init(n("#compliance"),e),S.display(n("#amlKyc"),e),D.setup(n("#relatedObjectGrid"),e),null},viewShow:function(t){return d.refresh(t),null}}})}.call(this),define("text!templates/data/edit/cash.html",[],function(){return'<div id="editRoot">\n\t<h1 data-i18n="object:cash.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="object:cash.edit" data-bind="invisible: isNew"></h1>\n\n\t<h2 data-bind="text: name"></h2>\n\n\t<div id="editActions"></div>\n\n\t<p></p>\n\n\t<div data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li class="k-state-active">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.references"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.tags"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.histories"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.documents"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="name" data-i18n="data:fields.name"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]data:validation.nameRequired"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="created" data-i18n="data:fields.creationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="created" name="created" class="k-textbox" type="text" data-bind="display: created" data-format="g" readonly="readonly"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="shortName" data-i18n="data:fields.shortName"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="shortName" name="shortName" class="k-textbox" type="text" data-bind="value: shortName"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="type" data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="type" name="type" data-bind="value: type"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="currency" data-i18n="data:fields.currency"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="currency" name="currency" data-role="domoscurrency" data-bind="value: currency"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="needsDocumentValidation" data-i18n="data:fields.needsDocumentValidation"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="needsDocumentValidation" type="checkbox" data-bind="checked: needsDocumentValidation"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="value" data-i18n="data:fields.value"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="value" name="value" data-role="numerictextbox" data-bind="value: value" required="required"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="market" data-i18n="data:fields.market"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="market" name="market" data-role="domosmarket" data-bind="value: market"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="assetTarget">\n\t\t\t\t\t\t\t<a data-i18n="data:fields.asset" data-bind="attr: {href: assetTargetUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="assetTarget" name="assetTarget" data-role="domosassettarget" data-bind="value: assetTargetId" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="pledged" data-i18n="data:fields.pledged"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="pledged" name="pledged" type="checkbox" data-bind="checked: pledged"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="blocked" data-i18n="data:fields.blocked"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="blocked" name="blocked" type="checkbox" data-bind="checked: blocked"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="subsidiaries" data-i18n="data:fields.subsidiaries"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="subsidiaries" name="subsidiaries" type="checkbox" data-bind="checked: subsidiaries"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\n\t\t\t<h2><a id="AIFMDSection" data-i18n="data:sections.AIFMD"></a></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFSubAssetType" data-i18n="data:fields.AIFSubAssetType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFSubAssetType" name="AIFSubAssetType" data-role="domosaifsubassettype" data-bind="value: AIFMD.subAssetType"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMDGeographicalFocus" data-i18n="data:fields.AIFMDGeographicalFocus"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMDGeographicalFocus" name="AIFMDGeographicalFocus" data-role="domosaifmdgeographicalfocus" data-bind="value: AIFMD.geographicalFocus"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMDLiquidationPeriod" data-i18n="data:fields.AIFMDLiquidationPeriod"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMDLiquidationPeriod" name="AIFMDLiquidationPeriod" data-role="domosaifmdliquidationperiod" data-bind="value: AIFMD.liquidationPeriod"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\n\t\t\x3c!-- References --\x3e\n\t\t<div>\n\t\t\t<h2 data-i18n="data:sections.customReferences"></h2>\n\n\t\t\t<div id="customReferenceGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t</div>\n\n\t\t\x3c!-- Tags --\x3e\n\t\t<div>\n\t\t\t<div id="editTags"></div>\n\t\t</div>\n\n\t\t\x3c!-- Histories --\x3e\n\t\t<div>\n\t\t\t\t<label for="historyDate" data-i18n="history:fields.historyDate"></label>\n\t\t\t\t<input id="historyDate" name="historyDate" data-bind="value: historyDate" />\n\t\t\t\t<p></p>\n\t\t\t\t<p></p>\n\t\t\t<div id="editHistory"></div>\n\t\t</div>\n\n\t\t\x3c!-- Documents --\x3e\n\t\t<div>\n\t\t\t<div id="objectDocument"></div>\n\t\t</div>\n\n\t\t\x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n\t</div>\n\n</div>\n\n\n\n'}),function(){define("views/data/edit/edit.cash",["jquery","i18n","ui","object/ui/ObjectTypeUI","object/data/ObjectCategories","views/data/model/cash.model","views/data/edit/common/documents","views/data/edit/common/reference.grid","common/date/HistoryDatePicker","object/views/related_object/views/RelatedObjectGrid","text!templates/data/edit/cash.html","basic/ui/CurrencyUI","core/api/AIFMDGeographicalFocus","core/api/AIFMDLiquidationPeriod","core/api/AIFSubAssetType","basic/ui/MarketUI"],function(e,t,n,i,a,r,o,d,l,s,u){var c,p,m,f;return m=i.ObjectTypeUI,c=a.ObjectCategories.cash,p=l.HistoryDatePicker,f=s.RelatedObjectGrid,{getTemplates:function(){return{view:u}},createRawModel:function(){var t;return t={},r.updateRawModel(t),t},updateModel:function(t,e){return r.updateModel(t,e)},init:function(t){return m.widget(e("#type"),c),o.init(t),d.setupGrid(c,t.model),p.history(e("#historyDate"),t.model),f.setup(e("#relatedObjectGrid"),t.object.id),null},viewShow:function(t){return o.refresh(t),null}}})}.call(this),define("text!templates/data/edit/mandate.html",[],function(){return'<div id="editRoot">\n\t<h1 data-i18n="object:mandates.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="object:mandates.edit" data-bind="invisible: isNew"></h1>\n\n\t<h2 data-bind="text: name"></h2>\n\n\t<div id="editActions"></div>\n\n\t<p></p>\n\n\t<div data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li class="k-state-active">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.advanced"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.references"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.tags"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.histories"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.documents"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="name" data-i18n="data:fields.name"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]data:validation.nameRequired"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="created" data-i18n="data:fields.creationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="created" name="created" class="k-textbox" type="text" data-bind="display: created" data-format="g" readonly="readonly"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="shortName" data-i18n="data:fields.shortName"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="shortName" name="shortName" class="k-textbox" type="text" data-bind="value: shortName"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="type" data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="type" name="type" data-bind="value: type"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="currency" data-i18n="data:fields.currency"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="currency" name="currency" data-role="domoscurrency" data-bind="value: currency"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="market" data-i18n="data:fields.market"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="market" name="market" data-role="domosmarket" data-bind="value: market"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="vehicle">\n\t\t\t\t\t\t\t<a data-i18n="data:fields.vehicle" data-bind="attr: {href: vehicleUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="vehicle" name="vehicle" data-role="domosvehicle" data-bind="value: vehicle" required="required"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="startDate" data-i18n="data:fields.startDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="startDate" name="startDate" data-role="datepicker" data-bind="value: startDate"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="endDate" data-i18n="data:fields.endDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="endDate" name="endDate" data-role="datepicker" data-bind="value: endDate"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\n\t\t\x3c!-- Advanced --\x3e\n\t\t<div>\n\t\t\t<h2 data-i18n="data:sections.AIFMD"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFSubAssetType" data-i18n="data:fields.AIFSubAssetType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFSubAssetType" name="AIFSubAssetType" data-role="domosaifsubassettype" data-bind="value: AIFMD.subAssetType"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMDGeographicalFocus" data-i18n="data:fields.AIFMDGeographicalFocus"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMDGeographicalFocus" name="AIFMDGeographicalFocus" data-role="domosaifmdgeographicalfocus" data-bind="value: AIFMD.geographicalFocus"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMDLiquidationPeriod" data-i18n="data:fields.AIFMDLiquidationPeriod"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMDLiquidationPeriod" name="AIFMDLiquidationPeriod" data-role="domosaifmdliquidationperiod" data-bind="value: AIFMD.liquidationPeriod"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\n\t\t\x3c!-- References --\x3e\n\t\t<div>\n\t\t\t<h2 data-i18n="data:sections.customReferences"></h2>\n\n\t\t\t<div id="customReferenceGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t</div>\n\n\t\t\x3c!-- Tags --\x3e\n\t\t<div>\n\t\t\t<div id="editTags"></div>\n\t\t</div>\n\n\t\t\x3c!-- Histories --\x3e\n\t\t<div>\n\t\t\t\t<label for="historyDate" data-i18n="history:fields.historyDate"></label>\n\t\t\t\t<input id="historyDate" name="historyDate" data-bind="value: historyDate" />\n\t\t\t\t<p></p>\n\t\t\t\t<p></p>\n\t\t\t<div id="editHistory"></div>\n\t\t</div>\n\n\t\t\x3c!-- Documents --\x3e\n\t\t<div>\n\t\t\t<div id="objectDocument"></div>\n\t\t</div>\n\n\t\t\x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n\t</div>\n\n</div>\n\n\n\n'}),function(){define("views/data/edit/edit.mandate",["jquery","i18n","ui","object/ui/ObjectTypeUI","object/data/ObjectCategories","views/data/model/mandate.model","views/data/edit/common/documents","views/data/edit/common/reference.grid","common/date/HistoryDatePicker","object/views/related_object/views/RelatedObjectGrid","text!templates/data/edit/mandate.html","core/api/AIFMDGeographicalFocus","core/api/AIFMDLiquidationPeriod","core/api/AIFSubAssetType","basic/ui/MarketUI","object/ui/VehicleUI"],function(e,t,n,i,a,r,o,d,l,s,u){var c,p,m,f;return m=i.ObjectTypeUI,c=a.ObjectCategories.mandates,p=l.HistoryDatePicker,f=s.RelatedObjectGrid,{getTemplates:function(){return{view:u}},createRawModel:function(){var t;return t={},r.updateRawModel(t),t},updateModel:function(t,e){return r.updateModel(t,e)},init:function(t){return m.widget(e("#type"),c),o.init(t),d.setupGrid(c,t.model),p.history(e("#historyDate"),t.model),f.setup(e("#relatedObjectGrid"),t.object.id),null},viewShow:function(t){return o.refresh(t),null}}})}.call(this),define("core/ui/NumericMagnitudeUI",["require","exports","tslib","lodash","kendo","./widget/Plugin","./grid/column/ColumnUtils","./grid/column/ColumnStyle"],function(t,e,i,a,r,n,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NumericMagnitudeUI=void 0;var l,s,u="DomosNumericMagnitudeTextBox";function c(t){return t&&t.magnitude?t.magnitude:1}function p(t){return a.isString(t)?r.parseFloat(t):t}function m(t,e){return t["kendo"+u](e)}function f(t,e,n){if(a.isNil(n))return"";var i=p(n)/e;return r.format(t,i)}function b(n,e){var i=n.field;if(!i)return n;o.ColumnUtils.addFormat(n,"{0:n}",d.ColumnStyle.RIGHT_ALIGNED);var a=n.format||"{0:n}",r=c(e);return n.template=function(t){var e=t[i];return f(a,r,e)},n.groupHeaderTemplate=function(t){var e=t.value;return(n.title||"?")+": "+f(a,r,e)},o.ColumnUtils.addEditor(n,function(t){return m(t,e)})}function v(t){return"n"+(a.isNil(t)?"":""+t)}function y(i,a){return{widget:function(t,e){return m(t,{magnitude:a,format:v(e)})},column:function(t,e){var n;return t.format=(n=i,"{0:"+v(e)+"}"+n),b(t,{magnitude:a,format:v(e)})}}}l={name:u,magnitude:1},s=function(n){function t(t,e){return n.call(this,t,e)||this}return i.__extends(t,n),t.prototype.value=function(t){if(a.isUndefined(t)){var e=n.prototype.value.call(this);return a.isNil(e)?e:e*this.magnitude()}a.isNull(t)||(t=p(t)/this.magnitude()),n.prototype.value.call(this,t)},t.prototype.magnitude=function(){return c(this.options)},t}(r.ui.NumericTextBox),n.Plugin.plugin(s,r.ui.NumericTextBox,l);var h=function(){function t(){}return t.widget=function(t,e){return m(t,e)},t.column=function(t,e){return b(t,e)},t.Mega=y("M",1e6),t}();e.NumericMagnitudeUI=h}),define("history/data/FeeCalculationType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeeCalculationType=void 0;var r,o;(r=e.FeeCalculationType||(e.FeeCalculationType={}))[r.COMMITMENT=1]="COMMITMENT",r[r.COMMITMENT_L2=2]="COMMITMENT_L2",r[r.NAV=3]="NAV",r[r.NAV_L2=4]="NAV_L2",r[r.NAV_L2_PLUS_UNFUNDED_COMMITMENT=5]="NAV_L2_PLUS_UNFUNDED_COMMITMENT",(o=e.FeeCalculationType||(e.FeeCalculationType={})).getName=n.EnumUtils.createNameFn("data:FeeCalculationType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosFeeCalculationType",o,!1),o.column=a.EnumColumnUtils.createFactory(o)}),define("history/data/FeePeriodType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeePeriodType=void 0;var r,o;(r=e.FeePeriodType||(e.FeePeriodType={}))[r.DURING_INVESTMENT=1]="DURING_INVESTMENT",r[r.AFTER_INVESTMENT=2]="AFTER_INVESTMENT",r[r.OTHER=3]="OTHER",(o=e.FeePeriodType||(e.FeePeriodType={})).getName=n.EnumUtils.createNameFn("data:FeePeriodType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosFeePeriodType",o,!1),o.column=a.EnumColumnUtils.createFactory(o)}),define("text!templates/data/edit/management.fee.edit.window.html",[],function(){return'<div class="idxStandardContent">\n\t<div>\n\t\t<table class="formTable">\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="name" data-i18n="data:fields.managementFee.name"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="name" class="k-textbox" type="text" data-bind="value: name"\n\t\t\t\t\t\trequired="required" data-i18n="[validationMessage]data:validation.nameRequired" />\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="minimumPerYear" data-i18n="data:fields.managementFee.minimumPerYear"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="minimumPerYear"  data-role="numerictextbox" data-bind="value: minimumPerYear" required="required"/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="calculationType" data-i18n="data:fields.managementFee.calculationType"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="calculationType" data-role="domosfeecalculationtype" data-bind="value: calculationType"/>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="startDate" data-i18n="data:fields.managementFee.startDate"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="startDate" data-role="datepicker" data-bind="value: startDate"/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="feePeriodType" data-i18n="data:fields.managementFee.feePeriodType"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="feePeriodType"  data-role="domosfeeperiodtype" data-bind="value: feePeriodType"/>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="endDate" data-i18n="data:fields.managementFee.endDate"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="endDate"  data-role="datepicker" data-bind="value: endDate"/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n\t<h4 data-i18n="data:fields.managementFee.feeTranches"></h4>\n\t<div id="feeTrancheGrid" class="floatingGrid"></div>\n\t<div class="clearer"></div>\n\t\n\t<div class="formWindowButtons">\n\t\t<button id="okClickId" class="k-primary" data-role="button" data-icon="check" data-bind="click: okClick, enabled: isValid">OK</button>\n\t\t<button data-role="button" data-icon="cancel" data-bind="click: cancelClick">Cancel</button>\n\t</div>\n</div>'}),define("object/views/managementFee/FeeTrancheGrid",["require","exports","core/ui/grid/GridUtils","i18n","core/ui/PercentUI","core/ui/NumericMagnitudeUI"],function(t,e,i,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeeTrancheGrid=void 0;var n=function(){function t(){}return t.init=function(t,e){var n={dataSource:{data:e.get("feeTranches"),schema:{model:{id:"id",fields:{percentage:{type:"number",defaultValue:.025},upto:{type:"number"}}}}},columns:[{command:["edit","destroy"],title:" "},r.PercentUI.column({field:"percentage",title:a.I18N.t("data:fields.percentage")}),o.NumericMagnitudeUI.Mega.column({field:"upTo",title:a.I18N.t("data:fields.upTo")},0)],height:500,toolbar:[{name:"create"}],pageable:i.GridUtils.defaultPageable()};i.GridUtils.withDefaults(n),t.kendoGrid(n)},t}();e.FeeTrancheGrid=n}),define("object/views/managementFee/ManagementFeeEditWindow",["require","exports","i18n","text!templates/data/edit/management.fee.edit.window.html","core/data/DObservableBuilder","history/data/FeePeriodType","history/data/FeeCalculationType","./FeeTrancheGrid"],function(t,e,l,s,u,n,i,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ManagementFeeEditWindow=void 0;var a=function(){function t(){}return t.open=function(t){return t||(t={id:0,name:"",minimumPerYear:0,calculationType:i.FeeCalculationType.COMMITMENT,feePeriodType:n.FeePeriodType.DURING_INVESTMENT,startDate:null,endDate:null,feeTranches:[]}),d=t,new Promise(function(t,e){var n=kendo.template(s)({}),i=$("<div>").addClass("formWindow").appendTo($(document.body));i.html(n),i.kendoWindow({modal:!0,width:1e3,minWidth:300,visible:!1});var a,r=i.data("kendoWindow");r.bind("close",function(){return kendo.destroy(i),i.remove(),t(a),!0});var o=u.DObservableBuilder.of(d).add("isValid",function(t){return!!t.get("name")&&!!t.get("calculationType")&&!!t.get("feePeriodType")}).add("okClick",function(t){a=t.toJson(),r.close()}).add("cancelClick",function(t){a=void 0,r.close()}).build();c.FeeTrancheGrid.init(i.find("#feeTrancheGrid"),o.kendo()),l.I18N.localize(i),o.bind(i),r.title(l.I18N.t("data:managementFees.editWindow.title")).open().center()});var d},t}();e.ManagementFeeEditWindow=a}),define("object/views/managementFee/ManagementFeeGrid",["require","exports","core/ui/grid/GridUtils","core/ui/DateUI","i18n","core/ui/NumberUI","history/data/FeeCalculationType","history/data/FeePeriodType","core/ui/grid/GridToolbar","core/util/ObservableUtils","core/ui/Confirmation","core/util/Logger","./ManagementFeeEditWindow"],function(t,e,r,o,d,l,s,u,c,p,m,f,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ManagementFeeGrid=void 0;var b="ui:grid.actionsClick",v=kendo.guid(),y=kendo.guid(),i=kendo.guid();function h(t){var e=[t.element.find("#"+v),t.element.find("#"+y),t.element.find("#"+i)];r.GridUtils.onRowSelectChange(t,e)}function g(t){return n.ManagementFeeEditWindow.open(t)}var a=function(){function t(){}return t.init=function(t,e){var n=e.get("managementFees"),i=(new c.GridToolbar).addClick(d.I18N.t(b+".add.text"),c.GridToolbar.ICON_ADD,function(){var e;(e=t.data("kendoGrid"))&&g().then(function(t){t&&e.dataSource.data().push(t)}).catch(function(t){f.Logger.error(t)})}).addClick(d.I18N.t(b+".edit.text"),c.GridToolbar.ICON_EDIT,function(){return function(t){var e=t.data("kendoGrid");if(e){var n=e.select();if(1===n.length){var i=e.dataItem(n[0]);g(i.toJSON()).then(function(t){t&&p.ObservableUtils.update(i,t)}).catch(function(t){f.Logger.error(t)})}}}(t)},v).addClick(d.I18N.t(b+".delete.text"),c.GridToolbar.ICON_DELETE,function(){return function(t){var e=t.data("kendoGrid"),n=e.select();if(1===n.length){var i=e.dataItem(n[0]);if(!i)return;m.Confirmation.confirmDelete(d.I18N.t(b+".delete.confirmation")).then(function(t){t&&e.dataSource.remove(i)}).catch(function(t){return f.Logger.error(t)})}}(t)},y),a={dataSource:{data:n,schema:{model:{id:"id",fields:{name:{type:"string"},minimumPerYear:{type:"number"},calculationType:{type:"number",defaultValue:1},feePeriodType:{type:"number",defaultValue:1},startDate:{type:"date",defaultValue:null},endDate:{type:"date",defaultValue:null},feeTranches:{defaultValue:[]}}}},sort:{field:"name",dir:"asc"}},columns:[{field:"name",title:d.I18N.t("data:fields.managementFee.name"),width:250},l.NumberUI.column({field:"minimumPerYear",title:d.I18N.t("data:fields.managementFee.minimumPerYear"),width:250}),s.FeeCalculationType.column({field:"calculationType",title:d.I18N.t("data:fields.managementFee.calculationType"),width:250}),u.FeePeriodType.column({field:"feePeriodType",title:d.I18N.t("data:fields.managementFee.feePeriodType"),width:250}),o.DateUI.column({field:"startDate",title:d.I18N.t("data:fields.managementFee.startDate"),width:250}),o.DateUI.column({field:"endDate",title:d.I18N.t("data:fields.managementFee.endDate"),width:250})],height:500,toolbar:[{name:"create"}],pageable:r.GridUtils.defaultPageable(),change:function(t){h(t.sender)},dataBound:function(t){h(t.sender)}};a.toolbar=i.template(),r.GridUtils.withDefaults(a),t.kendoGrid(a),i.bind(t)},t}();e.ManagementFeeGrid=a}),define("text!templates/data/edit/fund.share.html",[],function(){return'<div id="editRoot">\n\t<h1 data-i18n="object:fundShares.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="object:fundShares.edit" data-bind="invisible: isNew"></h1>\n\n\t<h2 data-bind="text: name"></h2>\n\n\t<div id="editActions"></div>\n\n\t<p></p>\n\n\t<div data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li class="k-state-active">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.advanced"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.references"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.tags"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.histories"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.documents"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="name" data-i18n="data:fields.name" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name"\n\t\t\t\t\t\t\trequired="required" data-i18n="[validationMessage]data:validation.nameRequired" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="created" data-i18n="data:fields.creationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="created" name="created" class="k-textbox" type="text" data-bind="display: created"\n\t\t\t\t\t\t\tdata-format="g" readonly="readonly" />\n\t\t\t\t\t</td>\n\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="shortName" data-i18n="data:fields.shortName"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="shortName" name="shortName" class="k-textbox" type="text"\n\t\t\t\t\t\t\tdata-bind="value: shortName" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="type" data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="type" name="type" data-bind="value: type" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="currency" data-i18n="data:fields.currency"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="currency" name="currency" data-role="domoscurrency" data-bind="value: currency" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="fundId">\n\t\t\t\t\t\t\t<a data-i18n="data:fields.fund" data-bind="attr: {href: fundUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="fundId" name="fundId" data-role="domosvehicle" data-bind="value: fundId" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="market" data-i18n="data:fields.market"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="market" name="market" data-role="domosmarket" data-bind="value: market" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="needsDocumentValidation" data-i18n="data:fields.needsDocumentValidation"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="needsDocumentValidation" type="checkbox" data-bind="checked: needsDocumentValidation"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="benchmark">\n\t\t\t\t\t\t\t<a data-i18n="data:fields.benchmark" data-bind="attr: {href: benchmarkUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="benchmark" name="benchmark" data-role="domosasset" data-bind="value: benchmark" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="issueDate" data-i18n="data:fields.issueDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="issueDate" name="issueDate" data-role="datepicker" data-bind="value: issueDate" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="launchDate" data-i18n="data:fields.launchDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="launchDate" name="launchDate" data-role="datepicker" data-bind="value: launchDate"\n\t\t\t\t\t\t\trequired />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="closingDate" data-i18n="data:fields.closingDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="closingDate" name="closingDate" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: closingDate" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="closingReason" data-i18n="data:fields.closingReason"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="closingReason" name="closingReason" data-role="domosshareclassclosingreason"\n\t\t\t\t\t\t\tdata-option-label="--" data-bind="value: closingReason" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="lockDownDate" data-i18n="data:fields.lockDownDate" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="lockDownDate" name="lockDownDate" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: lockDownDate" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="openEnded" data-i18n="data:fields.openEnded" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="openEnded" name="openEnded" type="checkbox" data-bind="checked: openEnded" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="navPerShareDecimals" data-i18n="data:fields.navPerShareDecimals"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="navPerShareDecimals" name="decimals" data-role="numerictextbox" data-format="n0"\n\t\t\t\t\t\t\tdata-bind="value: navPerShareDecimals" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="fxHedge" data-i18n="data:fields.fxHedge"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="fxHedge" name="fxHedge" data-role="domospercent" data-bind="value: fxHedge" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="redeemable" data-i18n="data:fields.redeemable"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="redeemable" name="redeemable" type="checkbox" data-bind="checked: redeemable" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="sidePocket" data-i18n="data:fields.sidePocket"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="sidePocket" name="sidePocket" type="checkbox" data-bind="checked: sidePocket" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="dealingSuspension" data-i18n="data:fields.dealingSuspension"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="dealingSuspension" name="dealingSuspension" type="checkbox"\n\t\t\t\t\t\t\tdata-bind="checked: dealingSuspension" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="gatePercent" data-i18n="data:fields.gatePercent"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="gatePercent" name="gatePercent" data-role="domospercent"\n\t\t\t\t\t\t\tdata-bind="value: gatePercent" required />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="gateDate" data-i18n="data:fields.gateDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="gateDate" name="gateDate" data-role="datepicker" data-bind="value: gateDate" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="illiquid" data-i18n="data:fields.illiquid"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="illiquid" name="illiquid" type="checkbox" data-bind="checked: illiquid" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="treasury" data-i18n="data:fields.treasury"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="treasury" name="treasury" type="checkbox" data-bind="checked: treasury" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="splitRatio" data-i18n="data:fields.splitRatio"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="splitRatio" name="splitRatio" data-role="domospercent" data-bind="value: splitRatio"\n\t\t\t\t\t\t\trequired />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="splitDate" data-i18n="data:fields.splitDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="splitDate" name="splitDate" data-role="datepicker" data-bind="value: splitDate" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="description" data-i18n="data:fields.description"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td colspan="3">\n\t\t\t\t\t\t<textarea id="description" name="description" class="k-textbox" type="text"\n\t\t\t\t\t\t\tdata-bind="value: description" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="classType" data-i18n="data:fields.classType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="classType"  data-role="domosshareclasstype" data-bind="value: classType" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="cashManagement" data-i18n="data:fields.cashManagement"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="cashManagement" type="checkbox" data-bind="checked: cashManagement" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="invisible: isClassTypeStandard">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="minimumAmountInReserve" data-i18n="data:fields.minimumAmountInReserve" ></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="minimumAmountInReserve" data-role="domospercent"  data-bind="value: minimumAmountInReserve"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="invisible: isClassTypeStandard">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="notionalPaidAfterLP" data-i18n="data:fields.notionalPaidAfterLP" ></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="notionalPaidAfterLP" type="checkbox" data-bind="checked: notionalPaidAfterLP"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<div data-bind="visible: isClassTypeStandard">\n\t\t\t\t<h2 data-i18n="data:fields.carriedInterests"></h2>\n\t\t\t\t<div id="carriedInterestGrid" class="floatingGrid"></div>\n\t\t\t\t<div class="clearer"></div>\n\t\t\t</div>\n\t\n\t\t\n\t\t\t<h2 data-i18n="data:sections.specificInstruments"></h2>\n\t\t\t\n\t\t\t\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="specificForex" data-i18n="data:fields.specificForex"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="specificForex" name="specificForex" type="checkbox" data-bind="checked: specificForex"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="specificRate" data-i18n="data:fields.specificRate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="specificRate" name="specificRate" type="checkbox" data-bind="checked: specificRate"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="specificOther" data-i18n="data:fields.specificOther"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="specificOther" name="specificOther" type="checkbox" data-bind="checked: specificOther"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\n\t\t\x3c!-- Advanced --\x3e\n\t\t<div>\n\t\t\t<h2 data-i18n="data:sections.redemption"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="redemptionFrequency" data-i18n="data:fields.redemptionFrequency" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="redemptionFrequency" name="redemptionFrequency" data-role="domosredemptionfrequency" data-bind="value: redemptionFrequency"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="redemptionNoticePeriod" data-i18n="data:fields.redemptionNoticePeriod" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="redemptionNoticePeriod" name="redemptionNoticePeriod" data-role="numerictextbox" data-format="n0" data-bind="value: redemptionNoticePeriod"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="redemptionLockUpPeriod" data-i18n="data:fields.redemptionLockUpPeriod" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="redemptionLockUpPeriod" name="redemptionLockUpPeriod" data-role="numerictextbox" data-format="n0" data-bind="value: redemptionLockUpPeriod"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.AIFMD"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="AIFSubAssetType" data-i18n="data:fields.AIFSubAssetType" class="aifmRequired"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="AIFSubAssetType" name="AIFSubAssetType" data-role="domosaifsubassettype" data-bind="value: AIFMD.subAssetType"/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="AIFMDGeographicalFocus" data-i18n="data:fields.AIFMDGeographicalFocus" class="aifmRequired"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="AIFMDGeographicalFocus" name="AIFMDGeographicalFocus" data-role="domosaifmdgeographicalfocus" data-bind="value: AIFMD.geographicalFocus"/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="AIFMDLiquidationPeriod" data-i18n="data:fields.AIFMDLiquidationPeriod" class="aifmRequired"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="AIFMDLiquidationPeriod" name="AIFMDLiquidationPeriod" data-role="domosaifmdliquidationperiod" data-bind="value: AIFMD.liquidationPeriod"/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="AIFTransactionType" data-i18n="data:fields.AIFTransactionType" class="aifmRequired"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="AIFTransactionType" name="AIFTransactionType" data-role="domosaiftransactiontype" data-bind="value: transactionType"/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr data-bind="visible: isAIFOtherTransaction">\n\t\t\t\t<td>\n\t\t\t\t\t<label for="AIFOtherTransactionDescription" data-i18n="data:fields.AIFOtherTransactionDescription" class="aifmRequired"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="AIFOtherTransactionDescription" name="AIFOtherTransactionDescription" class="k-textbox" type="text" data-bind="value: otherTransactionTypeDescription"/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="AIFVotingPercent" data-i18n="data:fields.votingPercent" class="aifmRequired"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="AIFVotingPercent" name="AIFVotingPercent" data-role="domospercent" data-bind="value: votingPercent"/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\n\t\t</table>\n\n\t\t<h2 data-i18n="data:sections.TPT"></h2>\n\n\t\t<table class="formTable">\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="equityType" data-i18n="data:fields.equityType"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="equityType" data-role="domosesaequitytype" data-option-label="--" data-bind="value: equityType" />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="quotationType" data-i18n="data:fields.quotationType"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="quotationType" data-role="domosquotationtype" data-bind="value: quotationType"/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n\t\t<h2 data-i18n="data:managementFees.title"></h2>\n\t\t\t<div id="managementFeeGrid" class="floatingGrid_1200_px"></div>\n\t\t\t<div class="clearer"></div>\n\n\t</div>\n\n\t\t\x3c!-- References --\x3e\n\t\t<div>\n\n\t\t\t<h2 data-i18n="data:sections.regulation"></h2>\n\n\t\t\t<div id="nationalCodeGrid" class="floatingGrid_900_px"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.references"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="CUSIP" data-i18n="data:fields.CUSIP"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="CUSIP" name="CUSIP" class="k-textbox" type="text" data-bind="value: CUSIP"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="ISIN" data-i18n="data:fields.ISIN" class="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="ISIN" name="ISIN" class="k-textbox" type="text" data-bind="value: ISIN"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="RIC" data-i18n="data:fields.RIC"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="RIC" name="RIC" class="k-textbox" type="text" data-bind="value: RIC"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="SEDOL" data-i18n="data:fields.SEDOL"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="SEDOL" name="SEDOL" class="k-textbox" type="text" data-bind="value: SEDOL"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="TICKER" data-i18n="data:fields.TICKER"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="TICKER" name="TICKER" class="k-textbox" type="text" data-bind="value: TICKER"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.customReferences"></h2>\n\n\t\t\t<div id="customReferenceGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t</div>\n\n\n\t\t\x3c!-- Tags --\x3e\n\t\t<div>\n\t\t\t<div id="editTags"></div>\n\t\t</div>\n\n\t\t\x3c!-- Histories --\x3e\n\t\t<div>\n\t\t\t\t<label for="historyDate" data-i18n="history:fields.historyDate"></label>\n\t\t\t\t<input id="historyDate" name="historyDate" data-bind="value: historyDate" />\n\t\t\t\t<p></p>\n\t\t\t\t<p></p>\n\t\t\t<div id="editHistory"></div>\n\t\t</div>\n\n\t\t\x3c!-- Documents --\x3e\n\t\t<div>\n\t\t\t<div id="objectDocument"></div>\n\t\t</div>\n\n\t\t\x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n\n\t</div>\n\n</div>'}),define("core/api/ShareClassClosingReason",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShareClassClosingReason=void 0;var r,o;(r=e.ShareClassClosingReason||(e.ShareClassClosingReason={}))[r.LIQUIDATION=1]="LIQUIDATION",r[r.MERGER=2]="MERGER",r[r.STATUS_CHANGED=3]="STATUS_CHANGED",r[r.TEMPORARILY_CLOSED=4]="TEMPORARILY_CLOSED",(o=e.ShareClassClosingReason||(e.ShareClassClosingReason={})).getName=a.EnumUtils.createNameFn("object:shareClassClosingReasons",o),o.widget=i.EnumWidgetUtils.createDropList("DomosShareClassClosingReason",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/RedemptionFrequency",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RedemptionFrequency=void 0;var r,o;(r=e.RedemptionFrequency||(e.RedemptionFrequency={}))[r.DAILY=1]="DAILY",r[r.WEEKLY=2]="WEEKLY",r[r.FORTNIGHTLY=3]="FORTNIGHTLY",r[r.MONTHLY=4]="MONTHLY",r[r.QUARTERLY=5]="QUARTERLY",r[r.HALF_YEARLY=6]="HALF_YEARLY",r[r.YEARLY=7]="YEARLY",r[r.OTHER=8]="OTHER",r[r.NONE=9]="NONE",(o=e.RedemptionFrequency||(e.RedemptionFrequency={})).getName=a.EnumUtils.createNameFn("object:RedemptionFrequency",o),o.widget=i.EnumWidgetUtils.createDropList("DomosRedemptionFrequency",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),function(){define("views/data/edit/edit.fund.share",["jquery","i18n","kendo","ui","object/ui/ObjectTypeUI","object/data/ObjectCategories","views/data/model/fund.share.model","views/data/edit/common/documents","views/data/edit/common/national.code.grid","views/data/edit/common/reference.grid","core/ui/NumericMagnitudeUI","core/ui/DateUI","core/ui/PercentUI","core/ui/NumberUI","common/date/HistoryDatePicker","object/views/managementFee/ManagementFeeGrid","object/views/related_object/views/RelatedObjectGrid","text!templates/data/edit/fund.share.html","basic/ui/CurrencyUI","core/api/ShareClassClosingReason","core/api/AIFTransactionType","core/api/AIFMDGeographicalFocus","core/api/AIFMDLiquidationPeriod","core/api/AIFSubAssetType","core/api/RedemptionFrequency","core/api/HoldSecurityType","core/api/QuotationType","basic/ui/MarketUI","object/ui/AssetUI","object/data/ShareClassType"],function(i,a,t,e,n,r,o,d,l,s,u,c,p,m,f,b,v,y){var h,g,T,I,C,w,k,E,D;return m.NumberUI,k=p.PercentUI,c.DateUI,w=n.ObjectTypeUI,u.NumericMagnitudeUI,T=e.grid,I=T.transports,h=r.ObjectCategories.fundShares,g=f.HistoryDatePicker,C=b.ManagementFeeGrid,E=v.RelatedObjectGrid,D=function(t){var e,n;return e=t.model,n={dataSource:{transport:I.createLocal({data:e.get("carriedInterests")}),schema:{model:{id:"id",fields:{carriedPercentage:{type:"number",defaultValue:.2},hurdleYield:{type:"number",defaultValue:.02},hurdleMultiple:{type:"number",defaultValue:1,validation:{required:!0,min:.01}},catchUp:{type:"number",defaultValue:1},catchUpPercentage:{type:"number",defaultValue:1}}}}},columns:[{command:["edit","destroy"],title:" ",width:"150px"},k.column({field:"carriedPercentage",title:a.t("data:fields.carriedPercentage"),width:"150px"}),k.column({field:"hurdleYield",title:a.t("data:fields.hurdleYield"),width:"150px"}),k.column({field:"hurdleMultiple",title:a.t("data:fields.hurdleMultiple"),width:"150px",validation:{required:!0,min:.01}}),k.column({field:"catchUp",title:a.t("data:fields.catchUp"),width:"150px"}),k.column({field:"catchUpPercentage",title:a.t("data:fields.catchUpPercentage"),width:"150px"})],toolbar:["create"],pageable:T.defaultPageable(),scrollable:!1},T.withDefaults(n),i("#carriedInterestGrid").kendoGrid(n)},{getTemplates:function(){return{view:y}},createRawModel:function(){var t;return t={},o.updateRawModel(t),t},updateModel:function(t,e){return o.updateModel(t,e)},init:function(t){var e;return w.widget(i("#type"),h),e=t.model,D(t),C.init(i("#managementFeeGrid"),e),l.setupGrid(t.model),s.setupGrid(h,t.model),d.init(t),g.history(i("#historyDate"),e),E.setup(i("#relatedObjectGrid"),t.object.id),null},viewShow:function(t){return d.refresh(t),null}}})}.call(this),define("basic/repository/ForexRepository",["require","exports","tslib","core/web/WebHttp","core/util/DateUtils"],function(t,e,o,d,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForexRepository=void 0;var l={},i=function(){function r(){}return r.fetchQuote=function(a,r){return o.__awaiter(this,void 0,void 0,function(){var e,n,i;return o.__generator(this,function(t){switch(t.label){case 0:return a&&r?a===r?[2,1]:(e=l[a])&&(n=e[r])?[2,n]:[4,d.WebHttp.getJson("forex.json",{from:a,to:r})]:[2,void 0];case 1:return(i=t.sent()).forex?((l[a]=l[a]||{})[r]=i.forex,[2,i.forex]):[2,void 0]}})})},r.fetchCompute=function(n,i,a){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(t){switch(t.label){case 0:return n?[4,r.fetchQuote(i,a)]:[2,n];case 1:return(e=t.sent())?[2,n*e]:[2,void 0]}})})},r.fetchHistory=function(t){var e={bank:t.bank,from:t.baseCurrency,to:t.otherCurrency,start:n.DateUtils.toJson(t.startDate),end:n.DateUtils.toJson(t.endDate)};return d.WebHttp.getJson("forex/history.json",e)},r}();e.ForexRepository=i}),function(){define("views/data/propertyFlow/flow.grid",["jquery","lodash","kendo","i18n","core/ui/NumberUI"],function(t,g,T,I,e){var C,w,n;return C=e.NumberUI,w=function(t,e){var n,i,a,r;for(i=0,a=(r=t.data("kendoGrid").dataSource.view()).length;i<a;i++)(n=r[i]).bold&&t.find("tr[data-uid='"+n.uid+"']").css("font-weight","bold");return!0},n=function(t,e,n){var i,a,r,o,d,l,s,u,c,p,m,f,b,v,y,h;if(T.destroy(t),t.empty(),e){for(d={},a=[],i=[{field:"name",title:I.t("data:propertyFlows.period"),locked:!0,lockable:!1,width:"200px"}],r={name:{type:"string"}},l=0,p=n.length;l<p;l++)d[(v=n[l]).name]={name:I.t("data:propertyFlows."+v.name),bold:v.bold||!1},a.push(d[v.name]);for(u=s=0,m=(h=g.sortBy(e,"period")).length;u<m;u++)for(o=h[u],r[y="period"+ ++s]={type:"number"},i.push(C.column({field:y,title:T.toString(o.period,"#0.##"),width:"150px"})),c=0,f=n.length;c<f;c++)d[(v=n[c]).name][y]=o[v.name];return b={dataSource:{data:a,schema:{model:{fields:r}}},columns:i,editable:!1,dataBound:w.bind(null,t)},t.kendoGrid(b),null}},{displayDCF:function(t,e){return n(t,e,[{name:"annualGrossRentalIncome"},{name:"vacancyLosses"},{name:"effectiveRental",bold:!0},{name:"operationalExpenses"},{name:"netOperatingIncome",bold:!0},{name:"capitalExpenses"},{name:"exitValue"},{name:"cashFlowBeforeTax",bold:!0},{name:"taxes"},{name:"netCashFlow",bold:!0}])},displayCoreTopSlice:function(t,e){return n(t,e,[{name:"cashFlow"},{name:"discounted"}])}}})}.call(this),function(){var l;l="#assetSpreadsheetError",define("views/data/edit/asset/asset.spreadsheet.error",["jquery","lodash","i18n","kendo"],function(r,t,n,e){var i,a,o,d;return i=function(t){var e,n,i,a;if(t&&(i=t.sheet)&&(a=r("#assetSpreadsheet").data("kendoSpreadsheet"))&&(n=a.sheetByName(i))&&(a.activeSheet(n),e=t.cell))return n.range(e).select(),null},a=function(){var t,e,n;return t=null,(e=r(l).data("kendoGrid"))&&0<(n=e.select()).length&&(t=e.dataItem(n[0])),i(t),null},d=function(t){var e;return o(),t.error=n.t("errors:"+t.error),e={dataSource:{data:[t]},columns:[{field:"error",title:n.t("object:spreadsheet.error")},{field:"sheet",title:n.t("object:spreadsheet.sheet")},{field:"cell",title:n.t("object:spreadsheet.cell")},{field:"information",title:n.t("object:spreadsheet.information")}],editable:!1,scrollable:!1,selectable:!0,change:a},r(l).kendoGrid(e),null},{clean:o=function(){var t;return t=r(l),e.destroy(t),t.empty(),null},display:d}})}.call(this),function(){var A,F,L,P,M,j,G;M="#assetSpreadsheet",j="#assetSpreadSheetToolbar",L="sheetCreate",P="sheetDestroy",G="sheetUpdate",F="sheetCalibrate",A={},define("views/data/edit/asset/asset.spreadsheet",["jquery","lodash","i18n","kendo","core/ui/Confirmation","views/data/edit/asset/asset.spreadsheet.error"],function(o,n,a,r,t,d){var e,i,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U;return e=t.Confirmation,l=function(t){var e;return e=o(M),r.destroy(e),e.empty()},_=function(t,e){return null==e&&(e=A),l(),o(M).kendoSpreadsheet(e),null},v=function(t,e){var n;return(n=t.sheet).canCreate=!1,n.canSave=!0,n.canDestroy=!1,n.canUpdate=!0,n.canCalibrate=!0,U(t),_(0,e),null},y=function(t){return t.sheet.canCreate=!0,U(t),null},s=function(t){var e,n,i;if(i=t.sheet,n=t.model.get("id"))return i.canCreate=!1,U(t),e={id:n},o.getJSON("asset/spreadsheet/create.json",e).done(v.bind(null,t)).fail(y.bind(null,t)),null},b=function(t){if(t.sheet.canCreate)return s(t),null},w=function(t){var e;return(e=t.sheet).canCreate=!1,e.canSave=!0,e.canDestroy=!0,e.canUpdate=!0,e.canCalibrate=!0,U(t),null},k=function(t){return null},R=function(t){var e,n,i,a,r;if(t.sheet,r=t.model.get("id"))return a=new FormData,i={id:r,spreadsheet:o(M).data("kendoSpreadsheet").toJSON()},o(M).data("kendoSpreadsheet").toJSON(),n=new File([JSON.stringify(i)],"fileName.json"),a.append("SpreadSheetFile",n),e={type:"POST",url:"asset/spreadsheet.json",dataType:"json",enctype:"multipart/form-data",processData:!1,contentType:!1,cache:!1,data:i=a},o.ajax(e).done(w.bind(null,t)).fail(k.bind(null,t)),null},C=function(t){if(t.sheet.canSave)return R(t),null},g=function(t){var e;return(e=t.sheet).canCreate=!0,e.canSave=!1,e.canDestroy=!1,e.canUpdate=!1,e.canCalibrate=!1,U(t),l(),null},T=function(t){return t.sheet.canDestroy=!0,U(t),null},N=function(t,e){var n,i,a,r;if(!0===e)return r=t.sheet,a=t.model.get("id"),r.canDestroy=!1,U(t),i={id:a},n={type:"DELETE",url:"asset/spreadsheet.json?"+o.param(i)},o.ajax(n).done(g.bind(null,t)).fail(T.bind(null,t)),null},u=function(t){if(t.sheet,t.model.get("id"))return e.confirmDelete(a.t("object:spreadsheet.confirmDestroy")).then(N.bind(null,t)).catch(function(){}),null},h=function(t){if(t.sheet.canDestroy)return u(t),null},D=function(t,e){return t.sheet.canUpdate=!0,U(t),n.has(e,"error")?d.display(e):_(0,e),null},S=function(t){return t.sheet.canUpdate=!0,U(t),null},O=function(t){var e,n,i,a;if(a=t.sheet,i=t.model.get("id"))return a.canUpdate=!1,U(t),d.clean(),n={id:i,spreadsheet:o(M).data("kendoSpreadsheet").toJSON()},e={type:"POST",url:"asset/spreadsheet/update.json",dataType:"json",data:{data:JSON.stringify(n)}},o.ajax(e).done(D.bind(null,t)).fail(S.bind(null,t)),null},E=function(t){if(t.sheet.canUpdate)return O(t),null},m=function(t,e){return t.sheet.canCalibrate=!0,U(t),n.has(e,"error")?d.display(e):_(0,e),null},f=function(t){return t.sheet.canCalibrate=!0,U(t),null},i=function(t){var e,n,i,a;if(a=t.sheet,i=t.model.get("id"))return a.canCalibrate=!1,U(t),d.clean(),n={id:i,spreadsheet:o(M).data("kendoSpreadsheet").toJSON()},e={type:"POST",url:"asset/spreadsheet/calibrate.json",dataType:"json",data:{data:JSON.stringify(n)}},o.ajax(e).done(m.bind(null,t)).fail(f.bind(null,t)),null},p=function(t){if(t.sheet.canCalibrate)return i(t),null},function(t,e){var n,i,a;return i=t.sheet,(n=!!(a=e.spreadsheet))&&_(0,a),i.canCreate=!n,i.canSave=n,i.canDestroy=n,i.canUpdate=n,i.canCalibrate=n,U(t),null},I=function(t,e){var n,i,a;return i=t.sheet,(n=!!(a=e.spreadsheet))&&_(0,a),i.canCreate=!n,i.canSave=n,i.canDestroy=n,i.canUpdate=n,i.canCalibrate=n,U(t),null},x=function(t){var e,n,i;if((i=t.sheet).canCreate=!1,i.canSave=!1,i.canDestroy=!1,i.canUpdate=!1,i.canCalibrate=!1,U(t),l(),n=t.model.get("id"))return e={id:n},o.getJSON("asset/spreadsheet.json",e).done(I.bind(null,t)),null},U=function(t){var e,n;if(n=o(j).data("kendoToolBar"))return e=t.sheet,n.enable("#sheetSave",e.canSave),n.enable("#"+L,e.canCreate),n.enable("#"+P,e.canDestroy),n.enable("#"+G,e.canUpdate),n.enable("#"+F,e.canCalibrate),null},c=function(t){var e,n,i;return e=o(j),r.destroy(e),e.empty(),i=t.sheet,n={items:[{id:"sheetSave",type:"button",text:a.t("object:spreadsheet.save"),enable:i.canSave,click:C.bind(null,t)},{id:L,type:"button",text:a.t("object:spreadsheet.create"),enable:i.canCreate,click:b.bind(null,t)},{id:P,type:"button",text:a.t("object:spreadsheet.destroy"),enable:i.canDestroy,click:h.bind(null,t)},{id:G,type:"button",text:a.t("object:spreadsheet.update"),enable:i.canUpdate,click:E.bind(null,t)},{id:F,type:"button",text:a.t("object:spreadsheet.calibrate"),enable:i.canCalibrate,click:p.bind(null,t)}]},e.kendoToolBar(n),null},{refresh:x,init:function(t){return t.sheet={canCreate:!1,canSave:!1,canDestroy:!1,canUpdate:!1,canCalibrate:!1},c(t),null}}})}.call(this),define("core/api/AreaUnit",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AreaUnit=void 0;var r,o;(r=e.AreaUnit||(e.AreaUnit={}))[r.SQUARE_METER=1]="SQUARE_METER",r[r.SQUARE_FEET=2]="SQUARE_FEET",r[r.ACRE=3]="ACRE",r[r.HECTARE=4]="HECTARE",(o=e.AreaUnit||(e.AreaUnit={})).getName=a.EnumUtils.createNameFn("object:AreaUnit",o),o.widget=i.EnumWidgetUtils.createDropList("DomosAreaUnit",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/PropertyStatus",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropertyStatus=void 0;var r,o;(r=e.PropertyStatus||(e.PropertyStatus={}))[r.LET=1]="LET",r[r.VACANT=2]="VACANT",r[r.DISPOSED=3]="DISPOSED",(o=e.PropertyStatus||(e.PropertyStatus={})).getName=a.EnumUtils.createNameFn("object:PropertyStatus",o),o.widget=i.EnumWidgetUtils.createDropList("DomosPropertyStatus",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("text!templates/data/edit/property.html",[],function(){return'<div id="editRoot">\n\t<h1 data-i18n="object:properties.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="object:properties.edit" data-bind="invisible: isNew"></h1>\n\n\t<h2 data-bind="text: name"></h2>\n\n\t<div id="editActions"></div>\n\n\t<p></p>\n\n\t<div id="tabstripId" data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li id="overviewId">\n\t\t\t\t<span data-i18n="data:sections.overview"></span>\n\t\t\t</li>\n\t\t\t<li id="descriptionId">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.advanced"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.references"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.tags"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.histories"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.debts"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.documents"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.spreadsheet"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Overview --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label data-i18n="data:fields.name"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input class="k-textbox" type="text" data-bind="value: name" readonly />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="overviewType" data-bind="value: type" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label data-i18n="data:fields.country"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input data-role="domoscountry" data-bind="value: country" data-enabled="false" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label data-i18n="data:fields.propertyValue"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input type="text" class="k-textbox" data-bind="value: propertyValue" readonly="readonly" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label data-i18n="data:fields.estimatedNOI"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input type="text" class="k-textbox" data-bind="value: estimatedNOI" readonly="readonly" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label data-i18n="data:fields.capRate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input type="text" class="k-textbox" data-bind="value: capRate" readonly="readonly" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<p></p>\n\n\t\t\t<div id="propertyImageRoot"></div>\n\t\t</div>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="name" data-i18n="data:fields.name"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name"\n\t\t\t\t\t\t\trequired="required" data-i18n="[validationMessage]data:validation.nameRequired" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="created" data-i18n="data:fields.creationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="created" name="created" class="k-textbox" type="text" data-bind="display: created"\n\t\t\t\t\t\t\tdata-format="g" readonly="readonly" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="shortName" data-i18n="data:fields.shortName"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="shortName" name="shortName" class="k-textbox" type="text"\n\t\t\t\t\t\t\tdata-bind="value: shortName" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="type" data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="type" name="type" data-bind="value: type" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="currency" data-i18n="data:fields.currency"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="currency" name="currency" data-role="domoscurrency" data-bind="value: currency" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="needsDocumentValidation" data-i18n="data:fields.needsDocumentValidation"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="needsDocumentValidation" type="checkbox" data-bind="checked: needsDocumentValidation"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="market" data-i18n="data:fields.market"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="market" name="market" data-role="domosmarket" data-bind="value: market" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="description" data-i18n="data:fields.description"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td colspan="3">\n\t\t\t\t\t\t<textarea id="description" name="description" class="k-textbox"\n\t\t\t\t\t\t\tdata-bind="value: description"></textarea>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="constructionYear" data-i18n="data:fields.constructionYear"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="constructionYear" name="constructionYear" data-role="domosyear"\n\t\t\t\t\t\t\tdata-bind="value: constructionYear" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="restructuringYear" data-i18n="data:fields.restructuringYear"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="restructuringYear" name="restructuringYear" data-role="domosyear"\n\t\t\t\t\t\t\tdata-bind="value: restructuringYear" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="address" data-i18n="data:fields.address"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<textarea id="address" name="address" class="k-textbox" data-bind="value: address"></textarea>\n\t\t\t\t\t</td>\n\t\t\t\t\t\x3c!-- <td colspan="2" rowspan="7">\n\t\t\t\t\t\t<a id="mapLink">\n\t\t\t\t\t\t\t<img id="mapImg" data-i18n="[alt]data:errors.noMapAvailable" />\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</td> --\x3e\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="postalCode" data-i18n="data:fields.postalCode"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="postalCode" name="postalCode" type="text" class="k-textbox"\n\t\t\t\t\t\t\tdata-bind="value: postalCode" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="city" data-i18n="data:fields.city"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="city" name="city" type="text" class="k-textbox" data-bind="value: city" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="state" data-i18n="data:fields.state"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="state" name="state" type="text" class="k-textbox" data-bind="value: state" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="country" data-i18n="data:fields.country"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="country" name="country" data-role="domoscountry" data-bind="value: country" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t\x3c!-- <tr>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<button class="k-button" data-i18n="data:actions.viewMap"\n\t\t\t\t\t\t\tdata-bind="click: viewMapClick"></button>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr> --\x3e\n\t\t\t\t<tr></tr>\n\t\t\t</table>\n\t\t</div>\n\n\t\t\x3c!-- Advanced --\x3e\n\t\t<div>\n\t\t\t<h2><a id="AIFMDSection" data-i18n="data:sections.AIFMD"></a></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFSubAssetType" data-i18n="data:fields.AIFSubAssetType"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFSubAssetType" name="AIFSubAssetType" data-role="domosaifsubassettype"\n\t\t\t\t\t\t\tdata-bind="value: AIFMD.subAssetType" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMDGeographicalFocus" data-i18n="data:fields.AIFMDGeographicalFocus"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMDGeographicalFocus" name="AIFMDGeographicalFocus"\n\t\t\t\t\t\t\tdata-role="domosaifmdgeographicalfocus" data-bind="value: AIFMD.geographicalFocus" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMDLiquidationPeriod" data-i18n="data:fields.AIFMDLiquidationPeriod"\n\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMDLiquidationPeriod" name="AIFMDLiquidationPeriod"\n\t\t\t\t\t\t\tdata-role="domosaifmdliquidationperiod" data-bind="value: AIFMD.liquidationPeriod" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\n\t\t\t<h2><a id="valuationsSection" data-i18n="data:sections.valuations"></a></h2>\n\n\t\t\t<div id="valuationGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2><a id="measurementsSection" data-i18n="data:sections.measurements"></a></h2>\n\n\t\t\t<div id="measurementGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2><a id="unitsSection" data-i18n="data:sections.units"></a></h2>\n\n\t\t\t<div id="unitGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2><a id="contactsSection" data-i18n="data:sections.contacts"></a></h2>\n\n\t\t\t<div id="contactGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t</div>\n\n\t\t\x3c!-- References --\x3e\n\t\t<div>\n\t\t\t<h2 data-i18n="data:sections.customReferences"></h2>\n\n\t\t\t<div id="customReferenceGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t</div>\n\n\t\t\x3c!-- Tags --\x3e\n\t\t<div>\n\t\t\t<div id="editTags"></div>\n\t\t</div>\n\n\t\t\x3c!-- Histories --\x3e\n\t\t<div>\n\t\t\t<label for="historyDate" data-i18n="history:fields.historyDate"></label>\n\t\t\t<input id="historyDate" name="historyDate" data-bind="value: historyDate" />\n\t\t\t<p></p>\n\t\t\t<p></p>\n\t\t\t<div id="editHistory"></div>\n\t\t</div>\n\n\t\t\x3c!-- Debts --\x3e\n\t\t<div>\n\t\t\t<div id="debtGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t</div>\n\n\t\t\x3c!-- Documents --\x3e\n\t\t<div>\n\t\t\t<div id="objectDocument"></div>\n\t\t</div>\n\n\t\t\x3c!-- Excel --\x3e\n\t\t<div>\n\t\t\t<div id="assetSpreadSheetToolbar"></div>\n\t\t\t<div id="assetSpreadsheet" class="spreadsheet"></div>\n\t\t\t<p></p>\n\t\t\t<div id="assetSpreadsheetError" class="floatingGrid"></div>\n\t\t\t<div class="clearer" />\n\t\t</div>\n\t\t\x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n\n\t</div>\n\n</div>'}),function(){var wt;wt="#propertyImageRoot",define("views/data/edit/edit.property",["jquery","lodash","i18n","kendo","ui","object/ui/EntityUI","basic/repository/ForexRepository","core/util/ObservableUtils","rate/ui/InterestRateUI","object/ui/ObjectTypeUI","object/data/ObjectCategories","basic/data/Currencies","basic/ui/CurrencyUI","basic/data/Countries","views/data/model/property.model","views/data/propertyFlow/flow.grid","views/data/edit/asset/asset.spreadsheet","views/data/edit/common/documents","views/data/edit/common/reference.grid","core/api/EntityRole","core/api/DebtDirection","core/api/DebtSeniority","core/api/AreaUnit","core/api/PropertyStatus","core/ui/DateUI","core/ui/IntegerUI","core/ui/NumberUI","common/date/HistoryDatePicker","object/views/related_object/views/RelatedObjectGrid","text!templates/data/edit/property.html","core/api/AIFMDGeographicalFocus","core/api/AIFMDLiquidationPeriod","core/api/AIFSubAssetType","basic/ui/CountryUI","basic/ui/MarketUI","core/ui/YearUI"],function(o,l,r,a,t,e,n,i,d,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x){var R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q,z,X,Z,tt,et,nt,it,at,rt,ot,dt,lt,st,ut,ct,pt,mt,ft,bt,vt,yt,ht,gt,Tt,It,Ct;return J=D.NumberUI,F=k.DateUI,V=E.IntegerUI,G=n.ForexRepository,U=c.Currencies,A=p.CurrencyUI,O=m.Countries,Q=i.ObservableUtils,W=d.InterestRateUI,$=s.ObjectTypeUI,j=e.EntityUI,L=T.DebtDirection,P=I.DebtSeniority,M=g.EntityRole,R=C.AreaUnit,z=w.PropertyStatus,K=u.ObjectCategories,a.data.ObservableArray,q=t.gmap,H=t.grid,Y=H.transports,_=K.properties,B=S.HistoryDatePicker,X=N.RelatedObjectGrid,at=function(t){var e,n,i,a,r,o,d;return r=[],(e=t.get("address"))&&r.push(e),(o=t.get("postalCode"))&&r.push(o),(n=t.get("city"))&&r.push(n),(d=t.get("state"))&&r.push(d),i=t.get("country"),(a=O.getName(i))&&r.push(a),r.join(" ")},It=function(t){var e,n,i;return e=at(t),i=o("#mapLink"),n=o("#mapImg"),e?(i.show().attr("href",q.getURL(e)),n.show().attr("src",q.getStaticURL(e))):(i.hide(),n.hide()),null},ot=function(t){var e;return t&&t.value?t.currency?(e={currency:U.getName(t.currency),value:a.toString(t.value,"n")},r.t("site:currencyFormat",e)):a.toString(t.value,"n"):r.t("site:notAvailable")},rt=function(t){return t?a.toString(100*t,"#.## \\%"):r.t("site:notAvailable")},nt=function(t){var e,n,i,a,r,o,d;for(o=a=null,n=0,i=(d=t.get("valuations").toJSON()).length;n<i;n++)(r=d[n]).excluded||(e=r.date,l.isDate(e)||(e=new Date(e)),(!a||a<e)&&(a=e,o=r));return o},et=function(t){return t.get("history.NOI")},gt=function(t,e){return t.set("capRate",rt(e))},ft=function(t,e,n,i){var a;return i?(a=i*n.value/e.value,gt(t,a)):gt(t,null)},bt=function(t){return gt(t,null)},tt=function(t,e,n){return G.fetchQuote(n.currency,e.currency).then(ft.bind(null,t,e,n)).catch(bt.bind(null,t))},Z=function(t,e,n){var i;return e&&n&&e.value?e.currency!==n.currency?tt(t,e,n):(i=n.value/e.value,gt(t,i)):null},Tt=function(t){var e,n;return n=nt(t),e=et(t),t.set("propertyValue",ot(n)),t.set("estimatedNOI",ot(e)),Z(t,n,e),null},dt=function(t){var e;return(e=t.model).get("valuations").bind("change",Tt.bind(null,e)),Tt(e)},lt=function(t){var e,n;return e=t.model,n={dataSource:{transport:Y.createLocal({data:e.get("contacts")}),schema:{model:{id:"id",fields:{entity:{nullable:!0,validation:{required:!0}},description:{type:"string"},role:{type:"number",defaultValue:M.PROPERTY_MANAGER}},entityName:function(){return Q.get(this,"entity.name")},getPhone:function(){return Q.get(this,"entity.phone")},getMail:function(){return Q.get(this,"entity.mail")}}}},columns:[{command:["edit","destroy"],title:" "},j.Extended.column({field:"entity",title:r.t("data:fields.contact")}),M.column({field:"role",title:r.t("data:fields.role")}),{field:"description",title:r.t("data:fields.description")},{field:"getPhone()",title:r.t("data:fields.phone"),editable:!1},{field:"getMail()",title:r.t("data:fields.mail"),editable:!1}],toolbar:["create"],pageable:H.defaultPageable(),scrollable:!1},H.withDefaults(n),o("#contactGrid").kendoGrid(n)},ct=function(t){var e,n;return e=t.model,n={dataSource:{transport:Y.createLocal({data:e.get("units")}),schema:{model:{id:"id",fields:{description:{type:"string"},vacancyDate:{type:"date",nullable:!0},floor:{type:"number",nullable:!0},building:{type:"string"},stair:{type:"string"},comments:{type:"string"},lettable:{type:"boolean"},startDate:{type:"date",nullable:!0},endDate:{type:"date",nullable:!0},status:{type:"number",nullable:!0}}}}},columns:[{command:["edit","destroy"],title:" ",width:"150px"},{field:"description",title:r.t("data:fields.description"),width:"300px"},{field:"comments",title:r.t("data:fields.comments"),width:"150px"},{field:"lettable",title:r.t("data:fields.lettable"),width:"100px"},z.column({field:"status",title:r.t("data:fields.status")}),F.column({field:"vacancyDate",title:r.t("data:fields.vacancyDate")}),F.column({field:"startDate",title:r.t("data:fields.startDate")}),F.column({field:"endDate",title:r.t("data:fields.endDate")}),V.column({field:"floor",title:r.t("data:fields.floor")}),{field:"building",title:r.t("data:fields.building"),width:"150px"},{field:"stair",title:r.t("data:fields.stair"),width:"150px"}],toolbar:["create"],pageable:H.defaultPageable(),scrollable:!1},H.withDefaults(n),o("#unitGrid").kendoGrid(n)},st=function(t){var e,n;return e=t.model,n={dataSource:{transport:Y.createLocal({data:e.get("measurements")}),schema:{model:{id:"id",fields:{value:{type:"number",validation:{required:!0}},unit:{type:"number"},type:{type:"string"},date:{type:"date"},geometer:{type:"boolean"}}}}},columns:[{command:["edit","destroy"],title:" ",width:"150px"},J.column({field:"value",title:r.t("data:fields.value")}),R.column({field:"unit",title:r.t("data:fields.unit")}),{field:"type",title:r.t("data:fields.type"),width:"150px"},F.column({field:"date",title:r.t("data:fields.date")}),{field:"geometer",title:r.t("data:fields.geometer"),width:"100px"}],toolbar:["create"],pageable:H.defaultPageable(),scrollable:!1},H.withDefaults(n),o("#measurementGrid").kendoGrid(n)},ht=function(t,e,n){var i,a;return i=t.model,a={dataSource:{transport:Y.createLocal({data:i.get("expertise")}),schema:{model:{id:"id",fields:{valuation:{type:"number",defaultValue:e},expert:{nullable:!0,validation:{required:!0}},signatoryName:{type:"string"},writerName:{type:"string"},reserves:{type:"string"}},expertName:function(){return Q.get(this,"expert.name")}}},filter:{field:"valuation",operator:"eq",value:e}},columns:[{command:["edit","destroy"],title:" ",width:"150px"},j.column({field:"expert",title:r.t("data:fields.expert")}),{field:"signatoryName",title:r.t("data:fields.signatoryName"),width:"150px"},{field:"writerName",title:r.t("data:fields.writerName"),width:"150px"},{field:"reserves",title:r.t("data:fields.reserves"),width:"200px"}],toolbar:["create"],pageable:H.defaultPageable(),scrollable:!1},H.withDefaults(a),n.kendoGrid(a)},Ct=function(t,e){var n,i;return(i=e.data.id)?(n=o("<div>").addClass("floatingGrid").appendTo(e.detailCell),o("<div>").addClass("clearer").appendTo(e.detailCell),ht(t,i,n)):o("<span>").text("Please save the valuation").appendTo(e.detailCell),!0},pt=function(t){var e,n;return e=t.model,n={dataSource:{transport:Y.createLocal({data:e.get("valuations")}),schema:{model:{id:"id",fields:{date:{type:"date",validation:{required:!0}},value:{type:"number",validation:{required:!0}},currency:{type:"number",defaultValue:978},insuredValue:{type:"number",nullable:!0},reconstructionValue:{type:"number",nullable:!0},excluded:{type:"boolean"},description:{type:"string"}}}}},columns:[{command:["edit","destroy"],title:" ",width:"150px"},F.column({field:"date",title:r.t("data:fields.date")}),J.column({field:"value",title:r.t("data:fields.value")}),A.column({field:"currency",title:r.t("data:fields.currency")}),J.column({field:"insuredValue",title:r.t("data:fields.insuredValue")}),J.column({field:"reconstructionValue",title:r.t("data:fields.reconstructionValue")}),{field:"excluded",title:r.t("data:fields.excluded"),width:"80px"},{field:"description",title:r.t("data:fields.description"),width:"300px"}],toolbar:["create"],detailInit:Ct.bind(null,t),pageable:H.defaultPageable(),scrollable:!1},H.withDefaults(n),o("#valuationGrid").kendoGrid(n)},ut=function(t){var e,n,i;if(e=o("#debtGrid"),a.destroy(e),e.empty(),0!==(n=t.model.get("id")))return i={dataSource:{transport:{read:{url:"asset/debt/list.json",dataType:"json",data:{id:n}}},schema:{model:{id:"id",fields:{name:{type:"string"},currency:{type:"number"},direction:{type:"number"},value:{type:"number"},maturityDate:{type:"date"},interestRate:{nullable:!0},rate:{type:"number"},seniority:{type:"number"}}}}},columns:[{field:"name",title:r.t("data:fields.name")},L.column({field:"direction",title:r.t("data:fields.direction")}),A.column({field:"currency",title:r.t("data:fields.currency")}),J.column({field:"value",title:r.t("data:fields.value")}),F.column({field:"maturityDate",title:r.t("data:fields.maturityDate")}),J.column({field:"rate",title:r.t("data:fields.rate")}),W.column({field:"interestRate",title:r.t("data:fields.interestRate")}),P.column({field:"seniority",title:r.t("data:fields.seniority")})],pageable:H.defaultPageable(),scrollable:!1,editable:!1},H.withDefaults(i),o("#debtGrid").kendoGrid(i)},yt=function(t){var e,n,i,a,r;for(e=o(wt),n=0,i=t.length;n<i;n++)r={id:t[n]},a="document/download/inline?"+o.param(r),o("<img>").attr("src",a).appendTo(e);return null},vt=function(){},mt=function(t){var e;return e={id:t},o.getJSON("object/document/image/list.json",e).done(yt).fail(vt)},it=function(t){var e;if(o(wt).empty(),e=t.model.get("id"))return mt(e)},{getTemplates:function(){return{view:x}},createRawModel:function(){var t;return t={},f.updateRawModel(t),t.viewMapClick=function(){return It(this)},t.propertyValue="",t},updateModel:function(t,e){return f.updateModel(t,e),setTimeout(function(){return It(t)})},init:function(t){var e;return e=t.model,$.widget(o("#type"),_),$.widget(o("#overviewType"),_,{enabled:!1}),lt(t),ct(t),st(t),pt(t),dt(t),v.init(t),y.init(t),h.setupGrid(_,e),B.history(o("#historyDate"),e),X.setup(o("#relatedObjectGrid"),t.object.id),null},viewShow:function(t){var e;return it(t),ut(t),e=t.model.isNew()?o("#descriptionId"):o("#overviewId"),o("#tabstripId").data("kendoTabStrip").activateTab(e),v.refresh(t),y.refresh(t),null}}})}.call(this),define("text!templates/data/edit/other.asset.html",[],function(){return'<div id="editRoot">\n\t<h1 data-i18n="object:otherAssets.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="object:otherAssets.edit" data-bind="invisible: isNew"></h1>\n\n\t<h2 data-bind="text: name"></h2>\n\n\t<div id="editActions"></div>\n\n\t<p></p>\n\n\t<div data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li class="k-state-active">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.advanced"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.references"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.tags"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.histories"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.documents"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="name" data-i18n="data:fields.name"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]data:validation.nameRequired"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="created" data-i18n="data:fields.creationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="created" name="created" class="k-textbox" type="text" data-bind="display: created" data-format="g" readonly="readonly"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="shortName" data-i18n="data:fields.shortName"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="shortName" name="shortName" class="k-textbox" type="text" data-bind="value: shortName"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="type" data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="type" name="type" data-bind="value: type"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="currency" data-i18n="data:fields.currency"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="currency" name="currency" data-role="domoscurrency" data-bind="value: currency"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="needsDocumentValidation" data-i18n="data:fields.needsDocumentValidation"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="needsDocumentValidation" type="checkbox" data-bind="checked: needsDocumentValidation"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="market" data-i18n="data:fields.market"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="market" name="market" data-role="domosmarket" data-bind="value: market"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="hedging" data-i18n="data:fields.hedging"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="hedging" name="hedging" type="checkbox" data-bind="checked: hedging"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="nominal" data-i18n="data:fields.nominal"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="nominal" name="nominal" data-role="numerictextbox" data-bind="value: nominal" required/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="description" data-i18n="data:fields.description"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td colspan="3">\n\t\t\t\t\t\t<textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\n\t\t\x3c!-- Advanced --\x3e\n\t\t<div>\n\t\t\t<h2 data-i18n="data:sections.AIFMD"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFSubAssetType" data-i18n="data:fields.AIFSubAssetType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFSubAssetType" name="AIFSubAssetType" data-role="domosaifsubassettype" data-bind="value: AIFMD.subAssetType"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMDGeographicalFocus" data-i18n="data:fields.AIFMDGeographicalFocus"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMDGeographicalFocus" name="AIFMDGeographicalFocus" data-role="domosaifmdgeographicalfocus" data-bind="value: AIFMD.geographicalFocus"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMDLiquidationPeriod" data-i18n="data:fields.AIFMDLiquidationPeriod"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMDLiquidationPeriod" name="AIFMDLiquidationPeriod" data-role="domosaifmdliquidationperiod" data-bind="value: AIFMD.liquidationPeriod"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\n\n\t\t\x3c!-- References --\x3e\n\t\t<div>\n\n\t\t\t<h2 data-i18n="data:sections.regulation"></h2>\n\n\t\t\t<div id="nationalCodeGrid" class="floatingGrid_900_px"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.references"></h2>\n\t\t\t\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="CUSIP" data-i18n="data:fields.CUSIP"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="CUSIP" name="CUSIP" class="k-textbox" type="text" data-bind="value: CUSIP"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="ISIN" data-i18n="data:fields.ISIN"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="ISIN" name="ISIN" class="k-textbox" type="text" data-bind="value: ISIN"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="RIC" data-i18n="data:fields.RIC"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="RIC" name="RIC" class="k-textbox" type="text" data-bind="value: RIC"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="SEDOL" data-i18n="data:fields.SEDOL"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="SEDOL" name="SEDOL" class="k-textbox" type="text" data-bind="value: SEDOL"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="TICKER" data-i18n="data:fields.TICKER"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="TICKER" name="TICKER" class="k-textbox" type="text" data-bind="value: TICKER"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\n\t\t\t<h2 data-i18n="data:sections.customReferences"></h2>\n\n\t\t\t<div id="customReferenceGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t</div>\n\n\t\t\x3c!-- Tags --\x3e\n\t\t<div>\n\t\t\t<div id="editTags"></div>\n\t\t</div>\n\n\t\t\x3c!-- Histories --\x3e\n\t\t<div>\n\t\t\t\t<label for="historyDate" data-i18n="history:fields.historyDate"></label>\n\t\t\t\t<input id="historyDate" name="historyDate" data-bind="value: historyDate" />\n\t\t\t\t<p></p>\n\t\t\t\t<p></p>\n\t\t\t<div id="editHistory"></div>\n\t\t</div>\n\n\t\t\x3c!-- Documents --\x3e\n\t\t<div>\n\t\t\t<div id="objectDocument"></div>\n\t\t</div>\n\n\t\t\x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n\t</div>\n\n</div>\n\n\n\n'}),function(){define("views/data/edit/edit.other.asset",["jquery","i18n","ui","object/ui/ObjectTypeUI","object/data/ObjectCategories","views/data/model/other.asset.model","views/data/edit/common/documents","views/data/edit/common/national.code.grid","views/data/edit/common/reference.grid","common/date/HistoryDatePicker","object/views/related_object/views/RelatedObjectGrid","text!templates/data/edit/other.asset.html","basic/ui/CurrencyUI","core/api/AIFMDGeographicalFocus","core/api/AIFMDLiquidationPeriod","core/api/AIFSubAssetType","basic/ui/MarketUI"],function(e,t,n,i,a,r,o,d,l,s,u,c){var p,m,f,b;return f=i.ObjectTypeUI,p=a.ObjectCategories.otherAssets,m=s.HistoryDatePicker,b=u.RelatedObjectGrid,{getTemplates:function(){return{view:c}},createRawModel:function(){var t;return t={},r.updateRawModel(t),t},updateModel:function(t,e){return r.updateModel(t,e)},init:function(t){return f.widget(e("#type"),p),d.setupGrid(t.model),l.setupGrid(p,t.model),o.init(t),m.history(e("#historyDate"),t.model),b.setup(e("#relatedObjectGrid"),t.object.id),null},viewShow:function(t){return o.refresh(t),null}}})}.call(this),define("core/ui/IntegerEmptyUI",["require","exports","lodash","kendo","./IntegerUI"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IntegerEmptyUI=void 0;var r=function(){function t(){}return t.column=function(t){return(t=a.IntegerUI.column(t)).template=function(t){var e=t.issuedCount;return 0===e||n.isNil(e)?"":"<span>"+i.format("{0:n0}",e)+"</span>"},t},t}();e.IntegerEmptyUI=r}),define("object/repository/ObjectKpiRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectKpiRepository=void 0;var i=function(){function t(){}return t.list=function(t,e){return n.WebHttp.getJson("object/kpi/list.json",{objectId:t},e)},t}();e.ObjectKpiRepository=i}),define("core/data/DFrequency",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DFrequency=void 0;var r,o;(r=e.DFrequency||(e.DFrequency={}))[r.MONTHLY=1]="MONTHLY",r[r.QUARTERLY=2]="QUARTERLY",r[r.HALF_YEARLY=3]="HALF_YEARLY",r[r.YEARLY=4]="YEARLY",(o=e.DFrequency||(e.DFrequency={})).getName=a.EnumUtils.createNameFn("site:DFrequency",o),o.widget=i.EnumWidgetUtils.createDropList("DomosFrequency",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/data/DPeriod",["require","exports","tslib","lodash","core/util/EnumUtils","core/ui/grid/column/EnumColumnUtils","./DFrequency","core/ui/widget/Plugin"],function(t,e,o,d,l,s,u,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DPeriod=void 0;var n,i,p="DomosPeriod";(i=n=e.DPeriod||(e.DPeriod={}))[i.JANUARY=1]="JANUARY",i[i.FEBRUARY=2]="FEBRUARY",i[i.MARCH=3]="MARCH",i[i.APRIL=4]="APRIL",i[i.MAY=5]="MAY",i[i.JUNE=6]="JUNE",i[i.JULY=7]="JULY",i[i.AUGUST=8]="AUGUST",i[i.SEPTEMBER=9]="SEPTEMBER",i[i.OCTOBER=10]="OCTOBER",i[i.NOVEMBER=11]="NOVEMBER",i[i.DECEMBER=12]="DECEMBER",i[i.Q1=13]="Q1",i[i.Q2=14]="Q2",i[i.Q3=15]="Q3",i[i.Q4=16]="Q4",i[i.H1=17]="H1",i[i.H2=18]="H2",i[i.YEAR=19]="YEAR";var m=[n.JANUARY,n.FEBRUARY,n.MARCH,n.Q1,n.APRIL,n.MAY,n.JUNE,n.Q2,n.H1,n.JULY,n.AUGUST,n.SEPTEMBER,n.Q3,n.OCTOBER,n.NOVEMBER,n.DECEMBER,n.Q4,n.H2,n.YEAR];!function(i){function e(t){switch(t){case i.YEAR:return u.DFrequency.YEARLY;case i.H1:case i.H2:return u.DFrequency.HALF_YEARLY;case i.Q1:case i.Q2:case i.Q3:case i.Q4:return u.DFrequency.QUARTERLY;default:return u.DFrequency.MONTHLY}}var t,n;function a(t,e){return t["kendo"+p](e)}i.getName=l.EnumUtils.createNameFn("site:DPeriod",i),i.getFrequency=e,i.getId=function(t){return i[t]},i.getFromDate=function(t,e){var n=t.getUTCMonth()+1;switch(e){case u.DFrequency.MONTHLY:return n;case u.DFrequency.QUARTERLY:return n<=3?i.Q1:n<=6?i.Q2:n<=9?i.Q3:i.Q4;case u.DFrequency.HALF_YEARLY:return n<=6?i.H1:i.H2;default:return i.YEAR}},t={autoWidth:!0,dataSource:{transport:{read:function(t){t.success(d.map(l.EnumUtils.list(i),function(t){return{id:t,name:i.getName(t)||"",frequency:e(t)}}))}},sort:{field:"id",dir:"asc"}},dataTextField:"name",dataValueField:"id",valuePrimitive:!0,name:p},n=function(n){function t(t,e){return n.call(this,t,e)||this}return o.__extends(t,n),t}(kendo.ui.DropDownList),c.Plugin.plugin(n,kendo.ui.DropDownList,t),i.widget=a,i.filterWidget=function(t,e){var n=t.data("kendo"+p);return n&&(e?n.dataSource.filter({operator:"eq",field:"frequency",value:e}):n.dataSource.filter({})),t};var r=s.EnumColumnUtils.createFactory(i,a);i.column=function(t){var e=r(t);return e.sortable={compare:function(t,e){return m.indexOf(t)-m.indexOf(e)}},e}}(n=e.DPeriod||(e.DPeriod={}))}),define("object/views/kpi/ObjectKpiTable",["require","exports","lodash","object/web/ObjectMap","i18n","core/data/DPeriod"],function(t,e,l,s,u,c){"use strict";var p,n;Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectKpiTable=void 0,(n=p||(p={})).UNIT="unit",n.ROW_HEADER="rowHeader",n.VALUE="value";var i=function(){function t(){}return t.setup=function(t,i){var e,n,a=(e=i.fund,n=e?e.name:"",'<div><a class="d-link" href="'+s.ObjectMap.objectEdit(e?e.id:null)+'">'+kendo.htmlEncode(n)+"</a>\n\t</div>");$(a).addClass("object-kpi-fund").appendTo(t);var r=i.columns,o=$("<table>").width(150*(r.length+1)).addClass("object-kpi-table").appendTo(t),d=$("<tr>").appendTo(o);$("<th>").addClass(p.UNIT).text(""+i.unit).appendTo(d),l.forEach(r,function(t){var e=t.year.toString(),n=e.substr(2,e.length),i=c.DPeriod.getId(t.period),a={year:n,kpiType:t.kpiType},r=u.I18N.t("site:objectKpiPeriod."+i,{object:a});$("<th>").text(""+r).appendTo(d)}),l.forEach(i.rows,function(t){var n=$("<tr>").appendTo(o);$("<td>").width(150).addClass(p.ROW_HEADER).appendTo(n).html(""+kendo.htmlEncode(t.kpi.name)),l.forEach(t.values,function(t){var e=i.decimal;$("<td>").addClass(p.VALUE).width(150).appendTo(n).text(null!==t?kendo.format("{0:n"+e+"}",t):"")})})},t}();e.ObjectKpiTable=i}),define("object/views/kpi/ObjectKpi",["require","exports","object/repository/ObjectKpiRepository","lodash","i18n","./ObjectKpiTable"],function(t,e,i,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectKpi=void 0;var n=function(){function t(){}return t.displayGrids=function(e,t){if(t){var n=[];i.ObjectKpiRepository.list(t).then(function(t){n=a.sortBy(t,function(t){return t.fund}),a.isEmpty(n)||$("<h2>").appendTo(e).text(r.I18N.t("object:objectKpi.title")),a.forEach(n,function(t){o.ObjectKpiTable.setup(e,t),$("<p></p>").appendTo(e)})})}},t}();e.ObjectKpi=n}),define("core/api/CompanyDirectorType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompanyDirectorType=void 0;var r,o;(r=e.CompanyDirectorType||(e.CompanyDirectorType={}))[r.SENIOR_MANAGER_DIRECTOR=1]="SENIOR_MANAGER_DIRECTOR",r[r.NON_EXECUTIVE_DIRECTOR=2]="NON_EXECUTIVE_DIRECTOR",r[r.CONTROLLING_HOLDING=3]="CONTROLLING_HOLDING",r[r.SETTLOR=4]="SETTLOR",r[r.TRUSTEE=5]="TRUSTEE",r[r.PROTECTOR=6]="PROTECTOR",r[r.ENTITIES=7]="ENTITIES",r[r.OTHER_EQUIVALENT=8]="OTHER_EQUIVALENT",r[r.OWNERSHIP_OTHER_MEANS=9]="OWNERSHIP_OTHER_MEANS",(o=e.CompanyDirectorType||(e.CompanyDirectorType={})).getName=n.EnumUtils.createNameFn("data:CompanyDirectorType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosCompanyDirectorType",o,!1),o.column=a.EnumColumnUtils.createFactory(o,o.widget)}),define("text!templates/data/edit/company.html",[],function(){return'<div id="editRoot">\n\t<h1 data-i18n="object:companies.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="object:companies.edit" data-bind="invisible: isNew"></h1>\n\n\t<h2 data-bind="text: name"></h2>\n\n\t<div id="editActions"></div>\n\n\t<p></p>\n\n\t<div id="tabstripId" data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li id="overviewId">\n\t\t\t\t<span data-i18n="data:sections.overview"></span>\n\t\t\t</li>\n\t\t\t<li id="descriptionId">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.advanced"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.references"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.tags"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.histories"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.shareholders"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.debts"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.documents"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.spreadsheet"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.compliance"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.amlKyc"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.register"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Overview --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label data-i18n="data:fields.name"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input class="k-textbox" type="text" data-bind="value: name" readonly/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="overviewType" data-bind="value: type"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label data-i18n="data:fields.country"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input data-role="domoscountry" data-bind="value: country" data-enabled="false"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<button class="k-button" data-i18n="object:companies.actions.balanceSheet" data-bind="click: balanceSheetClick, enabled: isHolding"></button>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label data-i18n="data:fields.size"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input data-role="domoscompanysize" data-bind="value: size" data-enabled="false"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<p></p>\n\t\t\t<div id="companyKpiGrids"></div>\n\t\t\t<p></p>\n\n\t\t\t<div id="companyImageRoot"></div>\n\t\t</div>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="name" data-i18n="data:fields.name"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]data:validation.nameRequired"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="created" data-i18n="data:fields.creationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="created" name="created" class="k-textbox" type="text" data-bind="display: created" data-format="g" readonly="readonly"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="shortName" data-i18n="data:fields.shortName"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="shortName" name="shortName" class="k-textbox" type="text" data-bind="value: shortName"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="type" data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="type" name="type" data-bind="value: type"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="country" data-i18n="data:fields.country"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="country" name="country" data-role="domoscountry" data-bind="value: country" data-option-label="--"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="needsCertification" data-i18n="data:fields.needsCertification"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="needsCertification" name="needsCertification" type="checkbox" data-bind="checked: needsCertification"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="currency" data-i18n="data:fields.currency"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="currency" name="currency" data-role="domoscurrency" data-bind="value: currency"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="description" data-i18n="data:fields.description"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td colspan="3">\n\t\t\t\t\t\t<textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label data-i18n="data:fields.reportingCurrency"></label>\t\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input data-role="domoscurrency" data-bind="value: reportingCurrency" data-option-label="--"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="assetTarget">\n\t\t\t\t\t\t\t\t<a data-i18n="data:fields.asset" data-bind="attr: {href: assetTargetUrl}"></a>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="assetTarget" name="assetTarget" data-role="domosassettarget" data-bind="value: assetTargetId" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.addresses"></h2>\n\n\t\t\t<div id="addresses"></div>\n\n\t\t\t<h2 data-i18n="data:sections.roles"></h2>\n\n\t\t\t<div id="roles" data-role="domosrolemultiselect" data-bind="value: roles"></div>\n\t\t</div>\n\n\t\t\x3c!-- Advanced --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="size" data-i18n="data:fields.size"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="size" data-role="domoscompanysize" data-bind="value: size"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="sector" data-i18n="data:fields.sector"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="sector" data-role="domoscompanysector" data-bind="value: sector"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="fiscal" data-i18n="data:fields.fiscalYear"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="fiscal" data-role="datepicker" data-bind="value: fiscalYear"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.companyShareLinks"></h2>\n\n\t\t\t<div id="shareLinkGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t\n\t\t\t<h2 data-i18n="data:sections.recipients"></h2>\n\t\t\t<div id="recipientsGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\n\n\t\t\t<h2 data-i18n="data:sections.organization"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="totalEmployeeCount" data-i18n="data:fields.totalEmployeeCount"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="totalEmployeeCount" name="totalEmployeeCount" data-role="numerictextbox" data-format="n0" data-bind="value: totalEmployeeCount"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="headOfficeEmployeeCount" data-i18n="data:fields.headOfficeEmployeeCount"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="headOfficeEmployeeCount" name="headOfficeEmployeeCount" data-role="numerictextbox" data-format="n0" data-bind="value: headOfficeEmployeeCount"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.contacts"></h2>\n\n\t\t\t<div id="contactGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:fields.directors"></h2>\n\n\t\t\t<div id="directorGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\n\n\t\t\t<h2 data-i18n="data:sections.blockedPeriods"></h2>\n\t\t\t<div id="blockedPeriods" class="floatingGrid_900_px"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.TPT"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="bclSector" data-i18n="data:fields.bclSector"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="bclSector" data-role="domosbclsector" data-bind="value: bclSector"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t</div>\n\n\t\t\x3c!-- References --\x3e\n\t\t<div>\n\n\t\t\t<h2 data-i18n="data:sections.regulation"></h2>\n\n\t\t\t<div id="nationalCodeGrid" class="floatingGrid_900_px"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.references"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="BIC" data-i18n="data:fields.BIC"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="BIC" name="BIC" class="k-textbox" type="text" data-bind="value: BIC"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="CUSIP" data-i18n="data:fields.CUSIP"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="CUSIP" name="CUSIP" class="k-textbox" type="text" data-bind="value: CUSIP"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="ECB" data-i18n="data:fields.ECB"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="ECB" name="ECB" class="k-textbox" type="text" data-bind="value: ECB"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="ISIN" data-i18n="data:fields.ISIN"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="ISIN" name="ISIN" class="k-textbox" type="text" data-bind="value: ISIN"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="LEI" data-i18n="data:fields.LEI"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="LEI" name="LEI" class="k-textbox" type="text" data-bind="value: LEI"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="IEI" data-i18n="data:fields.IEI"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="IEI" name="IEI" class="k-textbox" type="text" data-bind="value: IEI"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="RIC" data-i18n="data:fields.RIC"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="RIC" name="RIC" class="k-textbox" type="text" data-bind="value: RIC"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="SEDOL" data-i18n="data:fields.SEDOL"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="SEDOL" name="SEDOL" class="k-textbox" type="text" data-bind="value: SEDOL"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="TICKER" data-i18n="data:fields.TICKER"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="TICKER" name="TICKER" class="k-textbox" type="text" data-bind="value: TICKER"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="GIIN" data-i18n="data:fields.GIIN"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="GIIN" name="GIIN" data-role="maskedtextbox" data-mask="AAAAAA\\.AAAAA\\.LL\\.000" data-bind="value: GIIN"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="TIN" data-i18n="data:fields.TIN"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="TIN" name="TIN" class="k-textbox" type="text" data-bind="value: TIN"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="INE" data-i18n="data:fields.IDENTIFICATION_NUMBER_EXTENSION"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="INE" name="INE" data-role="maskedtextbox" data-mask="L00000000" data-bind="value: IDENTIFICATION_NUMBER_EXTENSION"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.customReferences"></h2>\n\n\t\t\t<div id="customReferenceGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t\t\n\t\t</div>\n\n\t\t\x3c!-- Tags --\x3e\n\t\t<div>\n\t\t\t<div id="editTags"></div>\n\t\t</div>\n\n\t\t\x3c!-- Histories --\x3e\n\t\t<div>\n\t\t\t\t<label for="historyDate" data-i18n="history:fields.historyDate"></label>\n\t\t\t\t<input id="historyDate" name="historyDate" data-bind="value: historyDate" />\n\t\t\t\t<p></p>\n\t\t\t\t<p></p>\n\t\t\t<div id="editHistory"></div>\n\t\t</div>\n\n\t\t\x3c!-- Shareholders --\x3e\n\t\t<div>\n\t\t\t<div id="shareholderGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t</div>\n\n\t\t\x3c!-- Debts --\x3e\n\t\t<div>\n\t\t\t<div id="debtGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t</div>\n\n\t\t\x3c!-- Documents --\x3e\n\t\t<div>\n\t\t\t<div id="objectDocument"></div>\n\t\t</div>\n\n\t\t\x3c!-- Excel --\x3e\n\t\t<div>\n\t\t\t<div id="assetSpreadSheetToolbar"></div>\n\t\t\t<div id="assetSpreadsheet" class="spreadsheet"></div>\n\t\t\t<p></p>\n\t\t\t<div id="assetSpreadsheetError" class="floatingGrid"></div>\n\t\t\t<div class="clearer"/>\n\t\t</div>\n\t\t\n\t\t\x3c!-- compliance --\x3e\n\t\t<div>\n\t\t\t<div id="compliance"></div>\n\t\t</div>\n\n\t\t\x3c!-- aml/kyc --\x3e\n\t\t<div>\n\t\t\t<div id="amlKyc"></div>\n\t\t</div>\n\n\t\t\x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n\n\t\t\x3c!-- Register --\x3e\n\t\t<div id="registerRoot">\n\t\t\t<div id="registerGrid"></div>\n\t\t</div>\n\t</div>\n\n</div>\n\n\n\n'}),define("core/api/CompanySector",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompanySector=void 0;var r,o;(r=e.CompanySector||(e.CompanySector={}))[r.TRAVEL_TRANSPORTATION=1]="TRAVEL_TRANSPORTATION",r[r.TECHNOLOGY=2]="TECHNOLOGY",r[r.PROFESSIONAL_BUSINESS_SERVICES=3]="PROFESSIONAL_BUSINESS_SERVICES",r[r.MEDIA_ENTERTAINMENT=4]="MEDIA_ENTERTAINMENT",r[r.INDUSTRIAL=5]="INDUSTRIAL",r[r.HEALTHCARE=6]="HEALTHCARE",r[r.FOOD_BEVERAGES=7]="FOOD_BEVERAGES",r[r.FINANCIAL_SERVICES=8]="FINANCIAL_SERVICES",r[r.ENERGY=9]="ENERGY",r[r.CONSUMER_GOODS=10]="CONSUMER_GOODS",r[r.EDUCATION_REFERENCE=11]="EDUCATION_REFERENCE",r[r.RETAIL=12]="RETAIL",r[r.SERVICES=13]="SERVICES",(o=e.CompanySector||(e.CompanySector={})).getName=a.EnumUtils.createNameFn("object:CompanySector",o),o.widget=i.EnumWidgetUtils.createDropList("DomosCompanySector",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/CompanySize",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompanySize=void 0;var r,o;(r=e.CompanySize||(e.CompanySize={}))[r.MEGA_CAP=1]="MEGA_CAP",r[r.LARGE_CAP=2]="LARGE_CAP",r[r.MID_CAP=3]="MID_CAP",r[r.SMALL_CAP=4]="SMALL_CAP",r[r.MICRO_CAP=5]="MICRO_CAP",(o=e.CompanySize||(e.CompanySize={})).getName=a.EnumUtils.createNameFn("object:CompanySize",o),o.widget=i.EnumWidgetUtils.createDropList("DomosCompanySize",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),function(){var Dt,St,Nt;Nt="#shareholderGrid",St="#companyImageRoot",Dt="createShare",define("views/data/edit/edit.company",["jquery","lodash","i18n","kendo","ui","object/ui/AssetUI","object/ui/EntityUI","core/util/ObservableUtils","rate/ui/InterestRateUI","object/ui/ObjectTypeUI","object/data/ObjectCategories","basic/ui/CurrencyUI","views/data/model/company.model","views/data/edit/common/documents","views/data/edit/common/national.code.grid","views/data/edit/common/reference.grid","views/data/edit/asset/asset.spreadsheet","core/api/DebtDirection","core/api/DebtSeniority","core/ui/IntegerUI","core/ui/DateUI","core/ui/PercentUI","core/ui/NumberUI","core/ui/PercentEmptyUI","core/ui/IntegerEmptyUI","common/grids/BusinessRecipientGrid","common/date/HistoryDatePicker","object/views/address/ObjectAddressEditor","object/data/ObjectTypes","core/web/WebLocation","object/views/share/ShareCreateWindow","object/views/kpi/ObjectKpi","object/views/blockedPeriod/BlockedPeriodGrid","object/views/compliance/ComplianceEntityView","compliance/views/aml/TrackedEntitiesView","core/api/CompanyDirectorType","views/common/contacts.grid","object/views/related_object/views/RelatedObjectGrid","object/views/register/RegisterModule","text!templates/data/edit/company.html","core/api/AIFMDGeographicalFocus","core/api/AIFMDLiquidationPeriod","core/api/AIFSubAssetType","core/api/CompanySector","core/api/CompanySize","core/api/BclSector","core/api/HoldSecurityType","core/api/QuotationType","basic/ui/CountryUI","basic/ui/MarketUI"],function(o,t,a,r,e,n,i,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j){var G,q,B,V,W,H,Y,J,K,$,Q,z,X,Z,tt,et,nt,it,at,rt,ot,dt,lt,st,ut,ct,pt,mt,ft,bt,vt,yt,ht,gt,Tt,It,Ct,wt,kt,Et;return nt=C.NumberUI,ut=I.PercentUI,X=k.IntegerEmptyUI,st=w.PercentEmptyUI,J=T.DateUI,g.IntegerUI,Y=c.CurrencyUI,lt=d.ObservableUtils,Z=l.InterestRateUI,K=y.DebtDirection,$=h.DebtSeniority,Q=i.EntityUI,G=n.AssetUI,at=u.ObjectCategories,ot=s.ObjectTypeUI,rt=_.ObjectKpi,H=U.ComplianceEntityView,ft=A.TrackedEntitiesView,r.data.ObservableArray,tt=e.grid,et=tt.transports,V=at.companies,dt=N.ObjectTypes,B=E.BusinessRecipientGrid,z=D.HistoryDatePicker,it=S.ObjectAddressEditor,bt=x.WebLocation,mt=R.ShareCreateWindow,q=O.BlockedPeriodGrid,W=F.CompanyDirectorType,pt=P.RelatedObjectGrid,ct=M.RegisterModule,gt=function(t){var e,n;return e=t.model,n={dataSource:{transport:et.createLocal({data:e.get("directors")}),schema:{model:{id:"id",fields:{entity:{nullable:!0,validation:{required:!0}},description:{type:"string"},directorType:{type:"number",defaultValue:W.SENIOR_MANAGER_DIRECTOR}},entityName:function(){return lt.get(this,"entity.name")},getPhone:function(){return lt.get(this,"entity.phone")},getMail:function(){return lt.get(this,"entity.mail")}}}},columns:[{command:["edit","destroy"],title:" "},Q.Extended.column({field:"entity",title:a.t("data:fields.director")}),{field:"description",title:a.t("data:fields.description")},{field:"getPhone()",title:a.t("data:fields.phone"),editable:!1},{field:"getMail()",title:a.t("data:fields.mail"),editable:!1},W.column({field:"directorType",title:a.t("data:fields.directorType")})],toolbar:["create"],pageable:tt.defaultPageable(),scrollable:!1},tt.withDefaults(n),o("#directorGrid").kendoGrid(n)},ht=function(t){var e;return e=t.model.get("id"),rt.displayGrids(o("#companyKpiGrids"),e)},Tt=function(t){var e,n,i;if(e=o("#debtGrid"),r.destroy(e),e.empty(),0!==(n=t.model.get("id")))return i={dataSource:{transport:{read:{url:"asset/debt/list.json",dataType:"json",data:{id:n}}},schema:{model:{id:"id",fields:{name:{type:"string"},currency:{type:"number"},direction:{type:"number"},value:{type:"number"},maturityDate:{type:"date"},interestRate:{nullable:!0},rate:{type:"number"},seniority:{type:"number"}},interestRateName:function(){return lt.get(this,"interestRate.name")}}}},columns:[{field:"name",title:a.t("data:fields.name"),template:function(t){return"<a class='d-link' href='"+bt.resolveKendo("/object/edit/"+t.id)+"'>"+t.name+"</a>"}},K.column({field:"direction",title:a.t("data:fields.direction")}),Y.column({field:"currency",title:a.t("data:fields.currency")}),nt.column({field:"value",title:a.t("data:fields.value")}),J.column({field:"maturityDate",title:a.t("data:fields.maturityDate")}),nt.column({field:"rate",title:a.t("data:fields.rate")}),Z.column({field:"interestRate",title:a.t("data:fields.interestRate")}),$.column({field:"seniority",title:a.t("data:fields.seniority")})],pageable:tt.defaultPageable(),scrollable:!1},tt.withDefaults(i),o("#debtGrid").kendoGrid(i)},It=function(t){var e,n,i;if(e=o(Nt),r.destroy(e),e.empty(),0!==(n=t.model.get("id")))return i={dataSource:{transport:{read:{url:"object/shareholder/list.json",dataType:"json",data:{id:n}}},schema:{model:{id:"investorId",fields:{investorId:{type:"number"},investorName:{type:"string"},ownership:{type:"number"},fullyDiluted:{type:"number"},votingRight:{type:"number"}}}}},columns:[{field:"investorName",title:a.t("data:fields.investor")},ut.column({field:"ownership",title:a.t("data:fields.ownership")}),ut.column({field:"fullyDiluted",title:a.t("data:fields.fullyDiluted")}),ut.column({field:"votingRight",title:a.t("data:fields.votingRight")})],pageable:tt.defaultPageable(),scrollable:!1,editable:!1},tt.withDefaults(i),o(Nt).kendoGrid(i)},Et=function(t){var e,n,i,a,r;for(e=o(St),n=0,i=t.length;n<i;n++)r={id:t[n]},a="document/download/inline?"+o.param(r),o("<img>").attr("src",a).appendTo(e);return null},kt=function(){},wt=function(t){var e;return e={id:t},o.getJSON("object/document/image/list.json",e).done(Et).fail(kt)},yt=function(t){var e;if(o(St).empty(),e=t.model.get("id"))return wt(e)},vt=function(n,t){return mt.open(dt.companyShare.id,a.t("object:shareClass.createShare",t)).then(function(t){var e;if(t)return e={companyShare:t,id:null,issuedCount:null,weight:null},n.get("shareLinks").push(e)}),null},Ct=function(t){var e,n,i;return i={name:"company"},e=t.model,n={dataSource:{transport:et.createLocal({data:e.get("shareLinks")}),schema:{model:{id:"id",fields:{companyShare:{nullable:!0,validation:{required:!0}},issuedCount:{type:"number"},weight:{type:"number"}},companyShareName:function(){return lt.get(this,"companyShare.name")}}}},columns:[{command:["edit","destroy"],title:" ",width:"150px"},G.CompanyShare.column({field:"companyShare",title:a.t("data:fields.companyShare")}),X.column({field:"issuedCount",title:a.t("data:fields.issuedCount")}),st.column({field:"weight",title:a.t("data:fields.weight")})],toolbar:[{name:"create"},{name:Dt,text:a.t("object:shareClass.createShare",i)}],pageable:tt.defaultPageable(),scrollable:!1},tt.withDefaults(n),o("#shareLinkGrid").kendoGrid(n),o(".k-grid-createShare").click(function(){return vt(e,i)}),null},{getTemplates:function(){return{view:j}},createRawModel:function(t){var e;return e={},p.updateRawModel(e),e},updateModel:function(t,e){return p.updateModel(t,e)},init:function(t){var e;return ot.widget(o("#type"),V),ot.widget(o("#overviewType"),V,{enabled:!1}),L.init(t),gt(t),Ct(t),B.init(o("#recipientsGrid"),t),q.init(o("#blockedPeriods"),t.model),f.setupGrid(t.model),b.setupGrid(V,t.model),v.init(t),m.init(t),it.initEntity(o("#addresses"),t.model),z.history(o("#historyDate"),t.model),e=t.object.id,H.init(o("#compliance"),e),ft.display(o("#amlKyc"),e),pt.setup(o("#relatedObjectGrid"),e),ct.display(o("#registerRoot"),e,null),null},viewShow:function(t){var e;return yt(t),Tt(t),ht(t),It(t),e=t.model.isNew()?o("#descriptionId"):o("#overviewId"),o("#tabstripId").data("kendoTabStrip").activateTab(e),v.refresh(t),m.refresh(t),null}}})}.call(this),define("text!templates/data/edit/company.share.html",[],function(){return'<div id="editRoot">\n\t<h1 data-i18n="object:companyShares.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="object:companyShares.edit" data-bind="invisible: isNew"></h1>\n\n\t<h2 data-bind="text: name"></h2>\n\n\t<div id="editActions"></div>\n\n\t<p></p>\n\n\t<div data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li class="k-state-active">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.advanced"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.references"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.tags"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.histories"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.documents"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="name" data-i18n="data:fields.name"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name"\n\t\t\t\t\t\t\trequired="required" data-i18n="[validationMessage]data:validation.nameRequired" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="created" data-i18n="data:fields.creationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="created" name="created" class="k-textbox" type="text" data-bind="display: created"\n\t\t\t\t\t\t\tdata-format="g" readonly="readonly" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="shortName" data-i18n="data:fields.shortName"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="shortName" name="shortName" class="k-textbox" type="text"\n\t\t\t\t\t\t\tdata-bind="value: shortName" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="type" data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="type" name="type" data-bind="value: type" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="shareType" data-i18n="data:fields.shareType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="shareType" name="shareType" data-role="domoscompanysharetype"\n\t\t\t\t\t\t\tdata-bind="value: shareType" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="needsDocumentValidation" data-i18n="data:fields.needsDocumentValidation"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="needsDocumentValidation" type="checkbox" data-bind="checked: needsDocumentValidation"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="ratio" data-i18n="data:fields.ratio"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="ratio" name="Ratio" data-role="numerictextbox" data-bind="value: ratio" required />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="votingRight" data-i18n="data:fields.votingRight"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="votingRight" data-role="numerictextbox" data-bind="value: votingRight" required />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="fullyDiluted" data-i18n="data:fields.fullyDiluted"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="fullyDiluted" data-role="numerictextbox" data-bind="value: fullyDiluted" required />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="currency" data-i18n="data:fields.currency"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="currency" name="currency" data-role="domoscurrency" data-bind="value: currency" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="companyId">\n\t\t\t\t\t\t\t<a data-i18n="data:fields.company" data-bind="attr: {href: companyUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="companyId" name="companyId" data-role="domoscompany" data-bind="value: companyId" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="market" data-i18n="data:fields.market"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="market" name="market" data-role="domosmarket" data-bind="value: market" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\n\t\t\x3c!-- Advanced --\x3e\n\t\t<div>\n\t\t\t<h2 data-i18n="data:sections.AIFMD"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFSubAssetType" data-i18n="data:fields.AIFSubAssetType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFSubAssetType" name="AIFSubAssetType" data-role="domosaifsubassettype"\n\t\t\t\t\t\t\tdata-bind="value: AIFMD.subAssetType" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMDGeographicalFocus" data-i18n="data:fields.AIFMDGeographicalFocus"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMDGeographicalFocus" name="AIFMDGeographicalFocus"\n\t\t\t\t\t\t\tdata-role="domosaifmdgeographicalfocus" data-bind="value: AIFMD.geographicalFocus" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMDLiquidationPeriod" data-i18n="data:fields.AIFMDLiquidationPeriod"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMDLiquidationPeriod" name="AIFMDLiquidationPeriod"\n\t\t\t\t\t\t\tdata-role="domosaifmdliquidationperiod" data-bind="value: AIFMD.liquidationPeriod" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.TPT"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="equityType" data-i18n="data:fields.equityType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="equityType" data-role="domosesaequitytype" data-bind="value: equityType" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="quotationType" data-i18n="data:fields.quotationType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="quotationType" data-role="domosquotationtype" data-bind="value: quotationType" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="capitalNotional" data-i18n="data:fields.capitalNotional"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="capitalNotional" data-role="numerictextbox" data-bind="value: capitalNotional"\n\t\t\t\t\t\t\trequired />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\n\t\t\x3c!-- References --\x3e\n\t\t<div>\n\t\t\t<h2 data-i18n="data:sections.regulation"></h2>\n\n\t\t\t<div id="nationalCodeGrid" class="floatingGrid_900_px"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.references"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="CUSIP" data-i18n="data:fields.CUSIP"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="CUSIP" name="CUSIP" class="k-textbox" type="text" data-bind="value: CUSIP" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="ISIN" data-i18n="data:fields.ISIN"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="ISIN" name="ISIN" class="k-textbox" type="text" data-bind="value: ISIN" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="RIC" data-i18n="data:fields.RIC"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="RIC" name="RIC" class="k-textbox" type="text" data-bind="value: RIC" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="SEDOL" data-i18n="data:fields.SEDOL"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="SEDOL" name="SEDOL" class="k-textbox" type="text" data-bind="value: SEDOL" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="TICKER" data-i18n="data:fields.TICKER"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="TICKER" name="TICKER" class="k-textbox" type="text" data-bind="value: TICKER" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2 data-i18n="data:sections.customReferences"></h2>\n\n\t\t\t<div id="customReferenceGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t</div>\n\n\t\t\x3c!-- Tags --\x3e\n\t\t<div>\n\t\t\t<div id="editTags"></div>\n\t\t</div>\n\n\t\t\x3c!-- Histories --\x3e\n\t\t<div>\n\t\t\t<label for="historyDate" data-i18n="history:fields.historyDate"></label>\n\t\t\t<input id="historyDate" name="historyDate" data-bind="value: historyDate" />\n\t\t\t<p></p>\n\t\t\t<p></p>\n\t\t\t<div id="editHistory"></div>\n\t\t</div>\n\n\t\t\x3c!-- Documents --\x3e\n\t\t<div>\n\t\t\t<div id="objectDocument"></div>\n\t\t</div>\n\n\t\t\x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n\t</div>\n</div>'}),define("core/api/CompanyShareType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompanyShareType=void 0;var r,o;(r=e.CompanyShareType||(e.CompanyShareType={}))[r.SHARE=1]="SHARE",r[r.SHAREHOLDER_LOAN=2]="SHAREHOLDER_LOAN",r[r.CONVERTIBLE_BOND=3]="CONVERTIBLE_BOND",r[r.STOCK_OPTION=4]="STOCK_OPTION",r[r.EQUITY_WARRANT=5]="EQUITY_WARRANT",r[r.CONVERTIBLE_PREFERRED_SHARE=6]="CONVERTIBLE_PREFERRED_SHARE",(o=e.CompanyShareType||(e.CompanyShareType={})).getName=a.EnumUtils.createNameFn("object:CompanyShareType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosCompanyShareType",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/EsaEquityType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EsaEquityType=void 0;var r,o;(r=e.EsaEquityType||(e.EsaEquityType={}))[r.UNQUOTED_SHARES=1]="UNQUOTED_SHARES",r[r.QUOTED_SHARES=2]="QUOTED_SHARES",r[r.OTHER_EQUITY=3]="OTHER_EQUITY",r[r.FUND_SHARES=4]="FUND_SHARES",r[r.OTHER_THAN_EQUITY=5]="OTHER_THAN_EQUITY",(o=e.EsaEquityType||(e.EsaEquityType={})).getName=a.EnumUtils.createNameFn("object:EsaEquityType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosEsaEquityType",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),function(){define("views/data/edit/edit.company.share",["jquery","i18n","kendo","ui","object/ui/ObjectTypeUI","object/data/ObjectCategories","views/data/model/company.share.model","views/data/edit/common/documents","views/data/edit/common/national.code.grid","views/data/edit/common/reference.grid","common/date/HistoryDatePicker","object/views/related_object/views/RelatedObjectGrid","text!templates/data/edit/company.share.html","basic/ui/CurrencyUI","core/api/AIFMDGeographicalFocus","core/api/AIFMDLiquidationPeriod","core/api/AIFSubAssetType","core/api/CompanyShareType","core/api/HoldSecurityType","core/api/QuotationType","core/api/EsaEquityType","basic/ui/MarketUI"],function(e,t,n,i,a,r,o,d,l,s,u,c,p){var m,f,b,v;return b=a.ObjectTypeUI,m=r.ObjectCategories.companyShares,f=u.HistoryDatePicker,v=c.RelatedObjectGrid,{getTemplates:function(){return{view:p}},createRawModel:function(){var t;return t={},o.updateRawModel(t),t},updateModel:function(t,e){return o.updateModel(t,e)},init:function(t){return b.widget(e("#type"),m),l.setupGrid(t.model),s.setupGrid(m,t.model),d.init(t),f.history(e("#historyDate"),t.model),v.setup(e("#relatedObjectGrid"),t.object.id),null},viewShow:function(t){return d.refresh(t),null}}})}.call(this),define("text!templates/data/edit/portfolio.html",[],function(){return'<div id="editRoot">\n\t<h1 data-i18n="object:portfolios.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="object:portfolios.edit" data-bind="invisible: isNew"></h1>\n\n\t<h2 data-bind="text: name"></h2>\n\n\t<div id="editActions"></div>\n\n\t<p></p>\n\n\t<div data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li class="k-state-active">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.tags"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.histories"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.metrics"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="name" data-i18n="data:fields.name"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name"\n\t\t\t\t\t\t\trequired="required" data-i18n="[validationMessage]data:validation.nameRequired" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="created" data-i18n="data:fields.creationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="created" name="created" class="k-textbox" type="text" data-bind="display: created"\n\t\t\t\t\t\t\tdata-format="g" readonly="readonly" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="shortName" data-i18n="data:fields.shortName"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="shortName" name="shortName" class="k-textbox" type="text"\n\t\t\t\t\t\t\tdata-bind="value: shortName" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="type" data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="type" name="type" data-bind="value: type" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="currency" data-i18n="data:fields.currency"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="currency" name="currency" data-role="domoscurrency" data-bind="value: currency" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="portfolio" data-i18n="data:fields.portfolio"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="portfolio" name="portfolio" class="k-textbox" type="text"\n\t\t\t\t\t\t\tdata-bind="value: parentPortfolioName" readonly="readonly" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="investor">\n\t\t\t\t\t\t\t<a data-i18n="data:fields.investor" data-bind="attr: {href: investorUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="investor" name="investor" data-role="domosentity" data-bind="value: investor" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="composite" data-i18n="data:fields.composite"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="composite" name="composite" type="checkbox" data-bind="checked: composite" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="benchmark" data-i18n="data:fields.benchmark"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="benchmark" name="benchmark" type="checkbox" data-bind="checked: benchmark" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="investment" data-i18n="data:fields.investment"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="investment" name="investment" type="checkbox" data-bind="checked: investment" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\n\t\t\x3c!-- Tags --\x3e\n\t\t<div>\n\t\t\t<div id="editTags"></div>\n\t\t</div>\n\n\t\t\x3c!-- Histories --\x3e\n\t\t<div>\n\t\t\t<label for="historyDate" data-i18n="history:fields.historyDate"></label>\n\t\t\t<input id="historyDate" name="historyDate" data-bind="value: historyDate" />\n\t\t\t<p></p>\n\t\t\t<p></p>\n\t\t\t<div id="editHistory"></div>\n\t\t</div>\n\n\t\t\x3c!-- Metrics --\x3e\n\t\t<div>\n\t\t\t<label for="metricDate" data-i18n="metric:fields.metricDate"></label>\n\t\t\t<input id="metricDate" data-bind="value:metricDate" />\n\t\t\t<p></p>\n\t\t\t<p></p>\n\t\t\t<div id="editMetric"></div>\n\t\t</div>\n\n\t\t\x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n\t</div>\n\n</div>'}),function(){define("views/data/edit/edit.portfolio",["jquery","i18n","ui","object/ui/ObjectTypeUI","object/data/ObjectCategories","views/data/model/portfolio.model","common/date/HistoryDatePicker","object/views/related_object/views/RelatedObjectGrid","text!templates/data/edit/portfolio.html","basic/ui/CurrencyUI","object/ui/EntityUI"],function(n,t,e,i,a,r,o,d,l){var s,u,c,p;return c=i.ObjectTypeUI,s=a.ObjectCategories.portfolios,u=o.HistoryDatePicker,p=d.RelatedObjectGrid,{getTemplates:function(){return{view:l}},createRawModel:function(){var t;return t={},r.updateRawModel(t),t},updateModel:function(t,e){return r.updateModel(t,e)},init:function(t){var e;return c.widget(n("#type"),s),e=t.model,u.history(n("#historyDate"),t.model),u.metric(n("#metricDate"),e),p.setup(n("#relatedObjectGrid"),t.object.id),null}}})}.call(this),define("text!templates/data/edit/position.html",[],function(){return'<div id="editRoot">\n\t<h1 data-i18n="object:positions.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="object:positions.edit" data-bind="invisible: isNew"></h1>\n\n\t<h2 data-bind="text: title"></h2>\n\n\t<div id="editActions"></div>\n\n\t<p></p>\n\n\t<div data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li class="k-state-active">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.advanced"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.tags"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.histories"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="asset" >\n\t\t\t\t\t\t\t<a data-i18n="data:fields.asset" data-bind="attr:{href: assetUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="asset" name="asset" data-role="domosasset" data-bind="value: asset" required="required" data-i18n="[validationMessage]data:validation.assetRequired"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="created" data-i18n="data:fields.creationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="created" name="created" class="k-textbox" type="text" data-bind="display: created" data-format="g" readonly="readonly"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="portfolio" data-i18n="data:fields.portfolio"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="portfolio" name="portfolio" class="k-textbox" type="text" data-bind="value: portfolioName" readonly="readonly"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="type" data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="type" name="type" data-bind="value: type"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="depositary" >\n\t\t\t\t\t\t\t<a data-i18n="data:fields.depositary" data-bind="attr:{href: depositaryUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="depositary" name="depositary" data-role="domosentity" data-bind="value: depositary"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="ownership" data-i18n="data:fields.ownership"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="ownership" name="ownership" data-role="domospositionownership" data-option-label="--" data-bind="value: ownership"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="controlling" data-i18n="data:fields.controlling"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="controlling" name="controlling" data-role="domoscounterpartcontrolling" data-bind="value: controlling"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="counterParty">\n\t\t\t\t\t\t\t<a data-i18n="data:fields.counterParty" data-bind="attr:{href: counterPartyUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="counterParty" name="counterParty" data-role="domosentity" data-bind="value: counterParty"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="origin">\n\t\t\t\t\t\t\t<a data-i18n="data:fields.origin" data-bind="attr:{href: originUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="origin" data-role="domosasset" data-bind="value: origin"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="balanceSheet" data-i18n="data:fields.BalanceSheet"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="balanceSheet" data-role="domosbalancesheet" data-bind="value: balanceSheet"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="holdSecurityType" data-i18n="data:fields.holdSecurityType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="holdSecurityType" data-role="domosholdsecuritytype" data-bind="value: holdSecurityType"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\n\t\t\x3c!-- Advanced --\x3e\n\t\t<div>\n\t\t\t<h2 data-i18n="data:sections.AIFMD"></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr data-bind="visible: AIFMD.hasAIFType">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFType" data-i18n="data:fields.AIFType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFType" name="AIFType" data-role="domosaiftype" data-bind="value: AIFMD.AIFType"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: AIFMD.hasHedgeFund">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFStrategyHedgeFund" data-i18n="data:fields.AIFStrategies.hedgeFund"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFStrategyHedgeFund" name="AIFStrategyHedgeFund" data-role="domosaifstrategyhedgefund" data-option-label="--" data-bind="value: AIFMD.hedgeFundStrategy"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: AIFMD.hasHedgeFundOther">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFStrategyHedgeFundDescription" data-i18n="data:fields.AIFStrategies.hedgeFundDescription"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFStrategyHedgeFundDescription" name="AIFStrategyHedgeFundDescription" type="text" class="k-textbox" data-bind="value: AIFMD.hedgeFundDescription"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: AIFMD.hasPrivateEquityFund">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFStrategyPrivateEquity" data-i18n="data:fields.AIFStrategies.privateEquityFund"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFStrategyPrivateEquity" name="AIFStrategyPrivateEquity" data-role="domosaifstrategyprivateequity" data-option-label="--" data-bind="value: AIFMD.privateEquityStrategy"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: AIFMD.hasPrivateEquityFundOther">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFStrategyPrivateEquityDescription" data-i18n="data:fields.AIFStrategies.privateEquityFundDescription"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFStrategyPrivateEquityDescription" name="AIFStrategyPrivateEquityDescription" type="text" class="k-textbox" data-bind="value: AIFMD.privateEquityDescription"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: AIFMD.hasRealEstateFund">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFStrategyRealEstate" data-i18n="data:fields.AIFStrategies.realEstateFund"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFStrategyRealEstate" name="AIFStrategyRealEstate" data-role="domosaifstrategyrealestate" data-option-label="--" data-bind="value: AIFMD.realEstateStrategy"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: AIFMD.hasRealEstateFundOther">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFStrategyRealEstateDescription" data-i18n="data:fields.AIFStrategies.realEstateFundDescription"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFStrategyRealEstateDescription" name="AIFStrategyRealEstateDescription" type="text" class="k-textbox" data-bind="value: AIFMD.realEstateDescription"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: AIFMD.hasFundOfFunds">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFStrategyFundOfFunds" data-i18n="data:fields.AIFStrategies.fundOfFunds"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFStrategyFundOfFunds" name="AIFStrategyFundOfFunds" data-role="domosaifstrategyfundoffunds" data-option-label="--" data-bind="value: AIFMD.fundOfFundsStrategy"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: AIFMD.hasFundOfFundsOther">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFStrategyFundOfFundsDescription" data-i18n="data:fields.AIFStrategies.fundOfFundsDescription"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFStrategyFundOfFundsDescription" name="AIFStrategyFundOfFundsDescription" type="text" class="k-textbox" data-bind="value: AIFMD.fundOfFundsDescription"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: AIFMD.hasOtherFund">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFStrategyOther" data-i18n="data:fields.AIFStrategies.otherFund"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFStrategyOther" name="AIFStrategyOther" data-role="domosaifstrategyother" data-option-label="--" data-bind="value: AIFMD.otherFundStrategy"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: AIFMD.hasOtherFundOther">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFStrategyOtherDescription" data-i18n="data:fields.AIFStrategies.otherFundDescription"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFStrategyOtherDescription" name="AIFStrategyOtherDescription" type="text" class="k-textbox" data-bind="value: AIFMD.otherFundDescription"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\n\t\t\x3c!-- Tags --\x3e\n\t\t<div>\n\t\t\t<div id="editTags"></div>\n\t\t</div>\n\n\t\t\x3c!-- Histories --\x3e\n\t\t<div>\n\t\t\t\t<label for="historyDate" data-i18n="history:fields.historyDate"></label>\n\t\t\t\t<input id="historyDate" name="historyDate" data-bind="value: historyDate" />\n\t\t\t\t<p></p>\n\t\t\t\t<p></p>\n\t\t\t<div id="editHistory"></div>\n\t\t</div>\n\t\t\x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n\t</div>\n\n</div>\n\n\n\n'}),function(){define("views/data/edit/edit.position",["jquery","i18n","ui","core/util/ObservableUtils","object/ui/ObjectTypeUI","object/data/ObjectCategories","views/data/model/position.model","common/date/HistoryDatePicker","object/views/related_object/views/RelatedObjectGrid","text!templates/data/edit/position.html","core/api/AIFStrategyFundOfFunds","core/api/AIFStrategyHedgeFund","core/api/AIFStrategyOther","core/api/AIFStrategyPrivateEquity","core/api/AIFStrategyRealEstate","core/api/AIFType","core/api/PositionOwnership","object/ui/EntityUI","object/ui/AssetUI","core/api/CounterpartControlling"],function(e,n,t,i,a,r,o,d,l,s){var u,c,p,m,f,b;return m=i.ObservableUtils,p=a.ObjectTypeUI,u=r.ObjectCategories.positions,c=d.HistoryDatePicker,f=l.RelatedObjectGrid,b=function(t){var e;return(e=m.get(t,"asset.name"))?n.t("object:positions.withAsset",{asset:e,interpolation:{escapeValue:!1}}):""},{getTemplates:function(){return{view:s}},createRawModel:function(){var t;return t={},o.updateRawModel(t),t.title=function(){return b(this)},t},updateModel:function(t,e){return o.updateModel(t,e)},init:function(t){return p.widget(e("#type"),u),c.history(e("#historyDate"),t.model),f.setup(e("#relatedObjectGrid"),t.object.id),null}}})}.call(this),define("text!templates/data/edit/real.estate.deal.flow.html",[],function(){return'<div id="editRoot">\n\t<h1 data-i18n="object:realEstateDealFlows.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="object:realEstateDealFlows.edit" data-bind="invisible: isNew"></h1>\n\n\t<h2 data-bind="text: name"></h2>\n\n\t<div id="editActions"></div>\n\n\t<p></p>\n\n\t<div data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li class="k-state-active">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.advanced"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.tags"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.histories"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.documents"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr data-bind="visible: isNew">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="workflow" data-i18n="data:fields.workflow"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="workflow" name="workflow" data-role="domosworkflowdealflow" data-bind="value: workflowDefinition"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="name" data-i18n="data:fields.name"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]data:validation.nameRequired"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="created" data-i18n="data:fields.creationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="created" name="created" class="k-textbox" type="text" data-bind="display: created" data-format="g" readonly="readonly"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="asset">\n\t\t\t\t\t\t\t<a data-i18n="data:fields.asset" data-bind="attr: {href: objectUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="asset" name="asset" data-role="domosdealflowasset" data-bind="value: object"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="type" data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="type" name="type" data-bind="value: type"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="documentList" data-i18n="data:fields.documentList"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="documentList" name="documentList" data-role="domosdocumentlist" data-bind="value: documentList"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="riskProfile">\n\t\t\t\t\t\t\t<a data-i18n="data:fields.riskProfile" data-bind="attr: {href: riskProfileUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="riskProfile" data-role="domosriskprofile" data-bind="value: riskProfile"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\n\t\t\x3c!-- Advanced --\x3e\n\t\t<div>\n\t\t\t<h2 data-i18n="data:sections.allocations"></h2>\n\n\t\t\t<div id="allocationGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.managers"></h2>\n\n\t\t\t<div id="managerGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<h2 data-i18n="data:sections.events"></h2>\n\n\t\t\t<div id="eventGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t</div>\n\n\t\t\x3c!-- Tags --\x3e\n\t\t<div>\n\t\t\t<div id="editTags"></div>\n\t\t</div>\n\n\t\t\x3c!-- Histories --\x3e\n\t\t<div>\n\t\t\t<div id="editHistory"></div>\n\t\t</div>\n\t\t\n\t\t\x3c!-- Documents --\x3e\n\t\t<div>\n\t\t\t<div id="objectDocument"></div>\n\t\t</div>\n\n\t\t\x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n\t</div>\n\n</div>\n\n\n\n'}),define("document/repository/DocumentListRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DocumentListRepository=void 0;var i=function(){function t(){}return t.fetchIdentifiables=function(){return n.WebHttp.getJson("document/list/id/list.json")},t}();e.DocumentListRepository=i}),define("document/ui/DocumentListUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","document/repository/DocumentListRepository"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DocumentListUI=void 0;var r=function(){function t(){}return t.widget=n.IdWidgetUtils.createDropList("DomosDocumentList",a.DocumentListRepository,!0),t.column=i.IdentifiableColumnUtils.createFactory(t.widget),t}();e.DocumentListUI=r}),function(){define("views/data/edit/edit.real.estate.deal.flow",["jquery","i18n","ui","core/util/ObservableUtils","core/ui/DateUI","object/ui/EntityUI","object/ui/ObjectTypeUI","object/data/ObjectCategories","views/data/model/real.estate.deal.flow.model","views/data/edit/common/documents","core/ui/NumberUI","object/views/related_object/views/RelatedObjectGrid","text!templates/data/edit/real.estate.deal.flow.html","document/ui/DocumentListUI","workflow/ui/WorkflowUI","object/ui/AssetUI"],function(i,a,t,e,n,r,o,d,l,s,u,c,p){var m,f,b,v,y,h,g,T,I,C,w,k;return h=u.NumberUI,f=n.DateUI,T=e.ObservableUtils,b=r.EntityUI,g=o.ObjectTypeUI,v=t.grid,y=v.transports,m=d.ObjectCategories.realEstateDealFlows,I=c.RelatedObjectGrid,C=function(t){var e,n;return e=t.model,n={dataSource:{transport:y.createLocal({data:e.get("allocations")}),schema:{model:{id:"id",fields:{investor:{nullable:!0,validation:{required:!0}},quantity:{type:"number"}},investorName:function(){return T.get(this,"investor.name")}}}},columns:[{command:["edit","destroy"],width:"150px"},b.column({field:"investor",title:a.t("data:fields.investor")}),h.column({field:"quantity",title:a.t("data:fields.quantity")})],toolbar:["create"],pageable:v.defaultPageable(),scrollable:!1},v.withDefaults(n),i("#allocationGrid").kendoGrid(n)},k=function(t){var e,n;return e=t.model,n={dataSource:{transport:y.createLocal({data:e.get("managers")}),schema:{model:{id:"id",fields:{manager:{nullable:!0,validation:{required:!0}}},managerName:function(){return T.get(this,"manager.name")}}}},columns:[{command:["edit","destroy"],width:"150px"},b.column({field:"manager",title:a.t("data:fields.manager")})],toolbar:["create"],pageable:v.defaultPageable(),scrollable:!1},v.withDefaults(n),i("#managerGrid").kendoGrid(n)},w=function(t){var e,n;return e=t.model,n={dataSource:{transport:y.createLocal({data:e.get("events")}),schema:{model:{id:"id",fields:{date:{type:"date"},subject:{type:"string"},notes:{type:"string"}}}}},columns:[{command:["edit","destroy"]},f.column({field:"date",title:a.t("data:fields.date")}),{field:"subject",title:a.t("data:fields.subject")},{field:"notes",title:a.t("data:fields.notes")}],toolbar:["create"],pageable:v.defaultPageable(),scrollable:!1},v.withDefaults(n),i("#eventGrid").kendoGrid(n)},{getTemplates:function(){return{view:p}},createRawModel:function(){var t;return t={},l.updateRawModel(t),t},updateModel:function(t,e){return l.updateModel(t,e)},init:function(t){return g.widget(i("#type"),m),s.init(t),C(t),k(t),w(t),t.model,I.setup(i("#relatedObjectGrid"),t.object.id),null},viewShow:function(t){return s.refresh(t),null}}})}.call(this),define("text!templates/data/edit/fund.flow.html",[],function(){return'<div id="editRoot">\n\t<h1 data-i18n="object:fundFlows.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="object:fundFlows.edit" data-bind="invisible: isNew"></h1>\n\n\t<h2 data-bind="text: name"></h2>\n\n\t<div id="editActions"></div>\n\n\t<p></p>\n\n\t<div data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li class="k-state-active">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.advanced"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.tags"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.histories"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.documents"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr data-bind="visible: isNew">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="workflow" data-i18n="data:fields.workflow"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="workflow" name="workflow" data-role="domosworkflowfundflow"\n\t\t\t\t\t\t\tdata-bind="value: workflowDefinition" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="name" data-i18n="data:fields.name"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name"\n\t\t\t\t\t\t\trequired="required" data-i18n="[validationMessage]data:validation.nameRequired" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="created" data-i18n="data:fields.creationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="created" name="created" class="k-textbox" type="text" data-bind="display: created"\n\t\t\t\t\t\t\tdata-format="g" readonly="readonly" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="fund">\n\t\t\t\t\t\t\t<a data-i18n="data:fields.fund" data-bind="attr: {href: objectUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="fund" name="fund" data-role="domosvehicle" data-bind="value: object" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="type" data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="type" name="type" data-bind="value: type" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="documentList" data-i18n="data:fields.documentList"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="documentList" name="documentList" data-role="domosdocumentlist"\n\t\t\t\t\t\t\tdata-bind="value: documentList" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="riskProfile">\n\t\t\t\t\t\t\t<a data-i18n="data:fields.riskProfile" data-bind="attr: {href: riskProfileUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="riskProfile" data-role="domosriskprofile" data-bind="value: riskProfile" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\n\t\t\x3c!-- Tags --\x3e\n\t\t<div>\n\t\t\t<div id="editTags"></div>\n\t\t</div>\n\n\t\t\x3c!-- Histories --\x3e\n\t\t<div>\n\t\t\t<label for="historyDate" data-i18n="history:fields.historyDate"></label>\n\t\t\t<input id="historyDate" data-bind="value:historyDate" />\n\t\t\t<p></p>\n\t\t\t<p></p>\n\t\t\t<div id="editHistory"></div>\n\t\t</div>\n\n\t\t\x3c!-- Documents --\x3e\n\t\t<div>\n\t\t\t<div id="objectDocument"></div>\n\t\t</div>\n\n\n\t\t\x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n\t</div>\n\n</div>'}),function(){define("views/data/edit/edit.fund.flow",["jquery","i18n","ui","object/ui/ObjectTypeUI","object/data/ObjectCategories","views/data/model/fund.flow.model","views/data/edit/common/documents","common/date/HistoryDatePicker","object/views/related_object/views/RelatedObjectGrid","text!templates/data/edit/fund.flow.html","document/ui/DocumentListUI","workflow/ui/WorkflowUI","object/ui/VehicleUI"],function(e,t,n,i,a,r,o,d,l,s){var u,c,p,m;return p=i.ObjectTypeUI,n.grid.transports,u=a.ObjectCategories.fundFlows,c=d.HistoryDatePicker,m=l.RelatedObjectGrid,{getTemplates:function(){return{view:s}},createRawModel:function(){var t;return t={},r.updateRawModel(t),t},updateModel:function(t,e){return r.updateModel(t,e)},init:function(t){return p.widget(e("#type"),u),o.init(t),c.history(e("#historyDate"),t.model),m.setup(e("#relatedObjectGrid"),t.object.id),null},viewShow:function(t){return o.refresh(t),null}}})}.call(this),define("object/ui/PortfolioUI",["require","exports","object/repository/ObjectRepository","./ObjectUtilsUI"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PortfolioUI=void 0,e.PortfolioUI=i.ObjectUtilsUI.create("DomosPortfolio",n.ObjectRepository.fetchPortfolioIdentifiables)}),define("tag/query/TagQueryBuilderFilterFactory",["require","exports","lodash","i18n","core/query/QueryBuilderFilterFactory","core/api/TagType","tag/data/TagDefinitions"],function(t,e,a,r,o,d,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagQueryBuilderFilterFactory=void 0;function l(t){return{id:t.id,label:r.I18N.t(t.label),priority:t.priority}}var n=function(){function n(){}return n.createFilter=function(t){var e=t.stringId,n="[Tag] "+r.I18N.t(t.label);switch(t.type){case d.TagType.BOOLEAN:return o.QueryBuilderFilterFactory.createBooleanFilter(e,n);case d.TagType.STRING:return o.QueryBuilderFilterFactory.createTextFilter(e,n);case d.TagType.DOUBLE:return o.QueryBuilderFilterFactory.createNumberFilter(e,n);case d.TagType.INTEGER:return o.QueryBuilderFilterFactory.createIntegerFilter(e,n);case d.TagType.DATE:return o.QueryBuilderFilterFactory.createDateFilter(e,n);case d.TagType.SELECT:case d.TagType.MULTIPLE:var i=function(t){if(!a.has(t,"entries"))return[];var e=t,n=e.sort?"label":"priority";return a.chain(e.entries).map(l).sortBy(n).value()}(t);if(i.length<=0)return;return o.QueryBuilderFilterFactory.createMultipleIntegerFilter(e,n,i);default:return}},n.createFilters=function(t){return a.chain(t).map(function(t){return n.createFilter(t)}).compact().value()},n.createFiltersByCategory=function(t){var e=i.TagDefinitions.fullListByObjectCategory(t);return n.createFilters(e)},n}();e.TagQueryBuilderFilterFactory=n}),define("object/query/ObjectCategoryQueryBuilderFactory",["require","exports","lodash","core/query/QueryBuilderFilterFactory"],function(t,e,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectCategoryQueryBuilderFactory=void 0;var n=function(){function t(){}return t.create=function(t,e,n){var i=a.chain(t.finals()).sortBy("name").map(function(t){return{id:t.id,label:t.name}}).value();return r.QueryBuilderFilterFactory.createSelectIntegerFilter(e,n,i)},t}();e.ObjectCategoryQueryBuilderFactory=n}),define("object/query/AdvancedAssetQueryBuilder",["require","exports","tslib","core/query/QueryBuilder","i18n","object/data/ObjectCategories","core/query/QueryBuilderFilterFactory","tag/query/TagQueryBuilderFilterFactory","./ObjectCategoryQueryBuilderFactory","basic/query/CountryQueryBuilderFilterFactory","core/api/BalanceSheet"],function(t,e,n,i,a,r,o,d,l,s,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AdvancedAssetQueryBuilder=void 0;var c="dms_rule_category",p="dms_rule_country",m="dms_rule_workflow",f="dms_rule_balance_sheet";var b=function(i){function e(t){return i.call(this,t,(e=r.ObjectCategories.assets,(n=d.TagQueryBuilderFilterFactory.createFiltersByCategory(e)).push(l.ObjectCategoryQueryBuilderFactory.create(e,c,a.I18N.t("data:predicate.category"))),n.push(s.CountryQueryBuilderFilterFactory.create(p,a.I18N.t("data:predicate.country"))),n.push(o.QueryBuilderFilterFactory.createTextFilter(m,a.I18N.t("data:predicate.workflowStatus"))),n.push(o.QueryBuilderFilterFactory.createEnumSelect(f,a.I18N.t("data:predicate.balanceSheet"),u.BalanceSheet)),n))||this;var e,n}return n.__extends(e,i),e.init=function(t){return new e(t)},e}(i.QueryBuilder);e.AdvancedAssetQueryBuilder=b}),define("text!templates/data/edit/virtual.portfolio.html",[],function(){return'<div id="editRoot">\n    <h1 data-i18n="object:virtualPortfolios.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="object:virtualPortfolios.edit" data-bind="invisible: isNew"></h1>\n\n    <h2 data-bind="text: name"></h2>\n\n    <div id="editActions"></div>\n\n    <p></p>\n\n    <div data-role="tabstrip">\n        <ul>\n            <li class="k-state-active">\n                <span data-i18n="data:sections.description"></span>\n            </li>\n            <li>\n                <span data-i18n="data:sections.tags"></span>\n            </li>\n            <li>\n                <span data-i18n="data:sections.histories"></span>\n            </li>\n            <li>\n                <span data-i18n="data:sections.metrics"></span>\n            </li>\n            <li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n        </ul>\n\n        \x3c!-- Description --\x3e\n        <div>\n            <table class="formTable">\n                <tr>\n                    <td>\n                        <label for="name" data-i18n="data:fields.name"></label>\n                    </td>\n                    <td>\n                        <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name"\n                            required="required" data-i18n="[validationMessage]data:validation.nameRequired" />\n                    </td>\n                    <td>\n                        <label for="created" data-i18n="data:fields.creationDate"></label>\n                    </td>\n                    <td>\n                        <input id="created" name="created" class="k-textbox" type="text" data-bind="display: created"\n                            data-format="g" readonly="readonly" />\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <label for="currency" data-i18n="data:fields.currency"></label>\n                    </td>\n                    <td>\n                        <input id="currency" name="currency" data-role="domoscurrency" data-bind="value: currency" />\n                    </td>\n                    <td>\n                        <label for="type" data-i18n="data:fields.type"></label>\n                    </td>\n                    <td>\n                        <input id="type" name="type" data-bind="value: type" />\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <label for="stressProfile" data-i18n="data:fields.stressProfile"></label>\n                    </td>\n                    <td>\n                        <input id="stressProfile" data-role="domosstressprofile" data-bind="value: stressProfile" />\n                    </td>\n                    <td></td>\n                    <td></td>\n                </tr>\n                <tr>\n                    <td>\n                        <label for="pipeManager" data-i18n="data:fields.pipeManager"></label>\n                    </td>\n                    <td>\n                        <input id="pipeManager" data-role="domosflowpipemanager" data-bind="value: pipeManager" />\n                    </td>\n                    <td></td>\n                    <td></td>\n                </tr>\n            </table>\n\n            <h3 data-i18n="data:fields.sources"></h3>\n\n            <div id="sourceGrid" class="floatingGrid"></div>\n            <div class="clearer"></div>\n\n            <h3 data-i18n="data:fields.predicate"></h3>\n\n            <div id="predicateBuilder"></div>\n        </div>\n\n        \x3c!-- Tags --\x3e\n        <div>\n            <div id="editTags"></div>\n        </div>\n\n        \x3c!-- Histories --\x3e\n        <div>\n            <label for="historyDate" data-i18n="history:fields.historyDate"></label>\n            <input id="historyDate" name="historyDate" data-bind="value: historyDate" />\n            <p></p>\n            <p></p>\n            <div id="editHistory"></div>\n        </div>\n\n        \x3c!-- Metrics --\x3e\n        <div>\n            <label for="metricDate" data-i18n="metric:fields.metricDate"></label>\n            <input id="metricDate" data-bind="value:metricDate" />\n            <p></p>\n            <p></p>\n            <div id="editMetric"></div>\n        </div>\n\n        \x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n    </div>\n\n</div>'}),function(){define("views/data/edit/edit.virtual.portfolio",["jquery","lodash","i18n","ui","tag/data/TagDefinitions","core/util/ObservableUtils","object/ui/PortfolioUI","core/api/TagType","object/ui/ObjectTypeUI","object/data/ObjectCategories","basic/data/Countries","views/data/model/virtual.portfolio.model","object/query/AdvancedAssetQueryBuilder","common/date/HistoryDatePicker","object/views/related_object/views/RelatedObjectGrid","text!templates/data/edit/virtual.portfolio.html","basic/ui/CurrencyUI","stress/ui/StressProfileUI","flow/ui/FlowPipeManagerUI"],function(i,t,a,e,n,r,o,d,l,s,u,c,p,m,f,b){var v,y,h,g,T,I,C,w,k,E,D,S,N,x,R;return w=r.ObservableUtils,k=o.PortfolioUI,C=l.ObjectTypeUI,d.TagType,u.Countries,g=e.grid,T=g.transports,I=s.ObjectCategories,n.TagDefinitions,y=I.virtualPortfolios,v=p.AdvancedAssetQueryBuilder,h=m.HistoryDatePicker,E=f.RelatedObjectGrid,S=function(t){var e,n;return e=t.model,n={dataSource:{transport:T.createLocal({data:e.get("portfolios")}),schema:{model:{id:"id",fields:{portfolio:{nullable:!0,validation:{required:!0}}},portfolioName:function(){return w.get(this,"portfolio.name")}}}},columns:[{command:["edit","destroy"],title:" "},k.column({field:"portfolio",title:a.t("data:fields.portfolio")})],toolbar:["create"],pageable:g.defaultPageable(),scrollable:!1},g.withDefaults(n),i("#sourceGrid").kendoGrid(n),null},N=function(t){var e;return t.predicateLocked||(e=t.predicate.getRules(),R(t.model,e)),null},D=function(t){var e;return t.model,e=i("#predicateBuilder"),t.predicate=v.init(e),t.predicate.event.register(N.bind(null,t)),null},R=function(t,e){return e?t.set("predicate",JSON.stringify(e)):t.set("predicate","")},x=function(t){var e;e=t.get("predicate");try{return JSON.parse(e)}catch(t){return t,null}},{getTemplates:function(){return{view:b}},createRawModel:function(){var t;return t={},c.updateRawModel(t),t},updateModel:function(t,e){return c.updateModel(t,e)},init:function(t){var e;return t.predicateLocked=!1,C.widget(i("#type"),y),S(t),D(t),e=t.model,h.history(i("#historyDate"),e),h.metric(i("#metricDate"),e),E.setup(i("#relatedObjectGrid"),t.object.id),null},viewShow:function(t){var e;return t.predicateLocked=!0,e=x(t.model),t.predicate.setRules(e),t.predicateLocked=!1}}})}.call(this),define("text!templates/data/edit/investment.html",[],function(){return'<div id="editRoot">\n\t<h1 data-i18n="object:investments.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="object:investments.edit" data-bind="invisible: isNew"></h1>\n\n\t<h2 data-bind="text: name"></h2>\n\n\t<div id="editActions"></div>\n\n\t<p></p>\n\n\t<div data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li class="k-state-active">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.tags"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.histories"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.documents"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="name" data-i18n="data:fields.name"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name"\n\t\t\t\t\t\t\trequired="required" data-i18n="[validationMessage]data:validation.nameRequired" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="created" data-i18n="data:fields.creationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="created" name="created" class="k-textbox" type="text" data-bind="display: created"\n\t\t\t\t\t\t\tdata-format="g" readonly="readonly" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="currency" data-i18n="data:fields.currency"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="currency" name="currency" data-role="domoscurrency" data-bind="value: currency" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="type" data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="type" name="type" data-bind="value: type" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="investAsset" data-i18n="data:fields.asset" data-bind="visible: isNewAndNotCreateAsset"></label>\n\t\t\t\t\t\t<label data-i18n="data:fields.asset" data-bind="invisible: isNew"></label>\n\t\t\t\t\t\t<label for="assetName" data-i18n="data:fields.assetName" data-bind="visible: isNewAndCreateAsset"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<a href="javascript:void(0)" data-bind="invisible: isNew, click: assetLinkClick"><span data-bind="text: assetName"></span></a>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<input id="investAsset" name="Asset" data-bind="value: investmentObject, visible: isNewAndNotCreateAsset"/>\n\t\t\t\t\t\t\t<input id="assetName" name="Asset" class="k-textbox" type="text" \n\t\t\t\t\t\t\t\tdata-bind="visible: isNewAndCreateAsset, value: creationAssetName" />\n\n\t\t\t\t\t\t\t<label data-bind="visible: isNewAndCreateAsset" >&nbsp;</label>\n\t\t\t\t\t\t\t<label for="assetCategory" data-i18n="data:fields.assetCategory" data-bind="visible: isNewAndCreateAsset">Asset category</label>\n\t\t\t\t\t\t\t<label data-bind="visible: isNewAndCreateAsset" >&nbsp;</label>\n\t\t\t\t\t\t\t<input id="assetCategory" data-bind="visible: isNewAndCreateAsset, value: creationAssetCategory" required />\n\n\t\t\t\t\t\t\t<label data-bind="visible: isNew" >&nbsp;</label>\n\t\t\t\t\t\t\t<label for="createNew" data-i18n="investment:edit.createNewAsset" data-bind="visible: isNew" ></label>\n\t\t\t\t\t\t\t<label data-bind="visible: isNew" >&nbsp;</label>\n\t\t\t\t\t\t\t<input id="createNew" type="checkbox" class="investment-k-checkbox" data-bind="visible: isNew, checked: createAsset" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="investAssetValue" data-i18n="data:fields.enterpriseValue" data-bind="visible: isAssetCompany"></label>\n\t\t\t\t\t\t<label for="investAssetValue" data-i18n="data:fields.propertyValue" data-bind="visible: isAssetProperty"></label>\n\t\t\t\t\t\t<label for="investAssetValue" data-i18n="data:fields.fundValue" data-bind="visible: isInvestmentVehicle"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="investAssetValue" name="Value" data-role="numerictextbox" data-min="0" data-bind="value: assetValue" required/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="investAmount" data-i18n="data:fields.investmentAmount"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="investAmount" name="Value" data-role="numerictextbox" data-min="0" data-bind="value: investmentAmount" required/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="coInvestAmount" data-i18n="data:fields.coInvestmentAmount"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="coInvestAmount" name="Value" data-role="numerictextbox" data-min="0" data-bind="value: coInvestmentAmount" required/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="leverage" data-i18n="data:fields.leverage"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="leverage" name="Value" data-role="numerictextbox" data-min="0" data-bind="value: leverage" required/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="status" data-i18n="data:fields.investmentStatus"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="status" data-role="domosinvestmentstatus" data-bind="value: status"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t\x3c!--tr data-bind="visible: isNew">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="assetName">Asset name</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="assetName" name="Asset" class="k-textbox" type="text"\n\t\t\t\t\t\t\tdata-bind="value: creationAssetName" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="assetCategory">Asset category</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="assetCategory" data-bind="value: creationAssetCategory" required />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: isNew">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="assetValue">Asset value</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="assetValue" name="Asset value" data-role="numerictextbox"\n\t\t\t\t\t\t\tdata-bind="value: creationAssetValue" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr--\x3e\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="description" data-i18n="data:fields.description"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td colspan="3">\n\t\t\t\t\t\t<textarea id="description" name="description" class="k-textbox"\n\t\t\t\t\t\t\tdata-bind="value: description"></textarea>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<h2>Investors</h2>\n\n\t\t\t<div id="investorGrid" class="floatingGrid_900_px"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t</div>\n\n\t\t\x3c!-- Tags --\x3e\n\t\t<div>\n\t\t\t<div id="editTags"></div>\n\t\t</div>\n\n\t\t\x3c!-- Histories --\x3e\n\t\t<div>\n\t\t\t<label for="historyDate" data-i18n="history:fields.historyDate"></label>\n\t\t\t<input id="historyDate" name="historyDate" data-bind="value: historyDate" />\n\t\t\t<p></p>\n\t\t\t<p></p>\n\t\t\t<div id="editHistory"></div>\n\t\t</div>\n\n\t\t\x3c!-- Documents --\x3e\n\t\t<div>\n\t\t\t<div id="objectDocument"></div>\n\t\t</div>\n\n\t\t\x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n\t</div>\n\n</div>'}),function(){var O,U;O="#investorGrid",U=".k-grid-remove",define("views/data/edit/edit.investment",["jquery","i18n","ui","core/util/ObservableUtils","object/ui/EntityUI","object/ui/ObjectTypeUI","object/data/ObjectCategories","views/data/model/investment.model","views/data/edit/common/documents","core/ui/NumberUI","common/date/HistoryDatePicker","object/ui/ObjectUI","core/ui/Confirmation","object/views/related_object/views/RelatedObjectGrid","text!templates/data/edit/investment.html","basic/ui/CurrencyUI"],function(i,a,t,e,n,r,o,d,l,s,u,c,p,m,f){var b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_;return I=s.NumberUI,k=e.ObservableUtils,y=n.EntityUI,D=c.UI,w=r.ObjectTypeUI,C=o.ObjectCategories,b=C.investments,g=t.grid,T=g.transports,h=u.HistoryDatePicker,v=p.Confirmation,E=m.RelatedObjectGrid,N=function(t,e){var n;return n=t.get("amount"),0!==e?n/e:null},S=function(t,e){return t.get("weight")*e},_=function(t){var e,n;if(n=t.sender)return e=n.element.find(U),g.onRowSelectChange(n,[e])},R=function(t,e){var n,i,a;if(n=e.model,a=t.get("investmentAmount")+t.get("coInvestmentAmount"),i=!1,"save"===e.type&&(!0!==n.dirtyFields.weight||i||(n.set("weightInAmount",!1),n.set("amount",S(n,a)),i=!0),!0!==n.dirtyFields.amount||i||(n.set("weightInAmount",!1),n.set("weight",N(n,a)),i=!0),n.dirty))return e.sender.saveChanges(),!1},x=function(t){var e,n;return e=t.model,n={dataSource:{transport:T.createLocal({data:e.get("investors")}),schema:{model:{id:"id",fields:{investor:{nullable:!0},weight:{type:"number",defaultValue:0},amount:{type:"number",defaultValue:0},weightInAmount:{type:"boolean",defaultValue:!1,editable:!1}},investorName:function(){return k.get(this,"investor.name")}}}},columns:[y.column({field:"investor",title:a.t("data:fields.investor"),width:200}),I.column({field:"weight",title:a.t("data:fields.weight"),width:150}),I.column({field:"amount",title:a.t("data:fields.amount"),width:150})],editable:"incell",toolbar:[{name:"create"},{name:"remove",text:a.t("ui:grid.actionsClick.delete.text"),iconClass:"k-icon k-i-close"}],pageable:g.defaultPageable(),scrollable:!0,cellClose:R.bind(null,e),height:500,change:_,dataBound:_},g.withDefaults(n),i(O).kendoGrid(n),i(U).click(function(){var e,n,t;if(n=i(O).data("kendoGrid"))return 1===(t=n.select()).length?(e=n.dataItem(t),v.confirmDelete(a.t("ui:grid.actionsClick.delete.confirmation")).then(function(t){if(t)return n.dataSource.remove(e),n.dataSource.sync()}).catch(function(){})):void 0}),null},{getTemplates:function(){return{view:f}},createRawModel:function(){var t;return t={},d.updateRawModel(t),t},updateModel:function(t,e){return d.updateModel(t,e)},init:function(t){return w.widget(i("#type"),b),i("#assetCategory").kendoDropDownList({autoWidth:!0,dataSource:{data:[{id:C.properties.id,name:C.properties.name},{id:C.companies.id,name:C.companies.name},{id:C.investmentVehicles.id,name:C.investmentVehicles.name}]},dataTextField:"name",dataValueField:"id",valuePrimitive:!0}),x(t),h.history(i("#historyDate"),t.model),D.InvestmentObject.widget(i("#investAsset")),E.setup(i("#relatedObjectGrid"),t.object.id),l.init(t),null},viewShow:function(t){return t.model.id&&l.refresh(t),null}}})}.call(this),define("text!templates/data/edit/equity.derivative.html",[],function(){return'<div id="editRoot">\n\t<h1 data-i18n="object:equityDerivatives.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="object:equityDerivatives.edit" data-bind="invisible: isNew"></h1>\n\n\t<h2 data-bind="text: name"></h2>\n\n\t<div id="editActions"></div>\n\n\t<p></p>\n\n\t<div data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li class="k-state-active">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.references"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.tags"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.histories"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.documents"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.register"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="name" data-i18n="data:fields.name"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]data:validation.nameRequired"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="created" data-i18n="data:fields.creationDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="created" name="created" class="k-textbox" type="text" data-bind="display: created" data-format="g" readonly="readonly"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="shortName" data-i18n="data:fields.shortName"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="shortName" name="shortName" class="k-textbox" type="text" data-bind="value: shortName"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="type" data-i18n="data:fields.type"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="type" name="type" data-bind="value: type"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="currency" data-i18n="data:fields.currency"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="currency" name="currency" data-role="domoscurrency" data-bind="value: currency"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="needsDocumentValidation" data-i18n="data:fields.needsDocumentValidation"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="needsDocumentValidation" type="checkbox" data-bind="checked: needsDocumentValidation"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="description" data-i18n="data:fields.description"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td colspan="3">\n\t\t\t\t\t\t<textarea id="description" name="description" class="k-textbox"\n\t\t\t\t\t\t\tdata-bind="value: description"></textarea>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="market" data-i18n="data:fields.market"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="market" name="market" data-role="domosmarket" data-bind="value: market"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="clearing" data-i18n="data:fields.clearingMethod"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="clearing" name="clearing" data-role="domosderivativeclearingmethod" data-bind="value: clearingMethod" required/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="issuer" data-i18n="data:fields.issuer"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="issuer" name="issuer" data-role="domosentity" data-bind="value: issuer" required/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="holder" data-i18n="data:fields.holder"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="holder" name="holder" data-role="domosentity" data-bind="value: holder"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="expiryDate" data-i18n="data:fields.expiryDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="expiryDate" name="expiryDate" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: expiryDate" required="required"\n\t\t\t\t\t\t\tdata-i18n="[validationMessage]data:validation.dateRequired" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="issueDate" data-i18n="data:fields.issueDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="issueDate" name="issueDate" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: issueDate" required="required"\n\t\t\t\t\t\t\tdata-i18n="[validationMessage]data:validation.dateRequired" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="issueCount" data-i18n="data:fields.issueCount"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="issueCount" data-role="numerictextbox" data-format="n0" data-bind="value: issueCount"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="hedging" data-i18n="data:fields.hedging"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="hedging" name="hedging" type="checkbox" data-bind="checked: hedging"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="issuePrice" data-i18n="data:fields.issuePrice"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="issuePrice" data-role="numerictextbox" data-bind="value: issuePrice" required/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="strikePerShare" data-i18n="data:fields.strikePerShare"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="strikePerShare" data-role="numerictextbox" data-bind="value: strikePerShare" required/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="strikeCurrency" data-i18n="data:fields.strikeCurrency"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="strikeCurrency" name="strikeCurrency" data-role="domoscurrency" data-bind="value: strikeCurrency"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="conversionRatio" data-i18n="data:fields.conversionRatioDerivative"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="conversionRatio" data-role="numerictextbox" data-bind="value: conversionRatio" required/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="proportion" data-i18n="data:fields.proportion"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="proportion" data-role="numerictextbox" data-bind="value: proportion" required/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="exerciseStartDate" data-i18n="data:fields.exerciseStartDate"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="exerciseStartDate" name="exerciseStartDate" data-role="datepicker"\n\t\t\t\t\t\t\tdata-bind="value: exerciseStartDate" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="shareUnderlying" data-i18n="data:fields.shareUnderlying"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="shareUnderlying" name="shareUnderlying" data-role="domoscompanyshare" data-bind="value: shareUnderlying"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\n\t\t\t<h2><a id="AIFMDSection" data-i18n="data:sections.AIFMD"></a></h2>\n\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFSubAssetType" data-i18n="data:fields.AIFSubAssetType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFSubAssetType" name="AIFSubAssetType" data-role="domosaifsubassettype" data-bind="value: AIFMD.subAssetType"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMDGeographicalFocus" data-i18n="data:fields.AIFMDGeographicalFocus"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMDGeographicalFocus" name="AIFMDGeographicalFocus" data-role="domosaifmdgeographicalfocus" data-bind="value: AIFMD.geographicalFocus"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="AIFMDLiquidationPeriod" data-i18n="data:fields.AIFMDLiquidationPeriod"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="AIFMDLiquidationPeriod" name="AIFMDLiquidationPeriod" data-role="domosaifmdliquidationperiod" data-bind="value: AIFMD.liquidationPeriod"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\n\t\t\x3c!-- References --\x3e\n\t\t<div>\n\t\t\t<h2 data-i18n="data:sections.customReferences"></h2>\n\n\t\t\t<div id="customReferenceGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t</div>\n\n\t\t\x3c!-- Tags --\x3e\n\t\t<div>\n\t\t\t<div id="editTags"></div>\n\t\t</div>\n\n\t\t\x3c!-- Histories --\x3e\n\t\t<div>\n\t\t\t\t<label for="historyDate" data-i18n="history:fields.historyDate"></label>\n\t\t\t\t<input id="historyDate" name="historyDate" data-bind="value: historyDate" />\n\t\t\t\t<p></p>\n\t\t\t\t<p></p>\n\t\t\t<div id="editHistory"></div>\n\t\t</div>\n\n\t\t\x3c!-- Documents --\x3e\n\t\t<div>\n\t\t\t<div id="objectDocument"></div>\n\t\t</div>\n\n\t\t\x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n\n\t\t\x3c!-- Register --\x3e\n\t\t<div id="registerRoot">\n\t\t\t<div id="registerGrid"></div>\n\t\t</div>\n\t</div>\n\n</div>\n\n\n\n'}),function(){define("views/data/edit/edit.equity.derivative",["jquery","i18n","ui","object/ui/ObjectTypeUI","object/data/ObjectCategories","views/data/model/equity.derivative.model","views/data/edit/common/documents","views/data/edit/common/reference.grid","common/date/HistoryDatePicker","object/views/related_object/views/RelatedObjectGrid","object/views/register/RegisterModule","text!templates/data/edit/equity.derivative.html","basic/ui/CurrencyUI","core/api/DerivativeClearingMethod","core/api/AIFMDGeographicalFocus","core/api/AIFMDLiquidationPeriod","core/api/AIFSubAssetType","basic/ui/MarketUI","object/ui/EntityUI","object/ui/AssetUI"],function(n,t,e,i,a,r,o,d,l,s,u,c){var p,m,f,b,v;return f=i.ObjectTypeUI,p=a.ObjectCategories.equityDerivatives,m=l.HistoryDatePicker,v=s.RelatedObjectGrid,b=u.RegisterModule,{getTemplates:function(){return{view:c}},createRawModel:function(){var t;return t={},r.updateRawModel(t),t},updateModel:function(t,e){return r.updateModel(t,e)},init:function(t){var e;return f.widget(n("#type"),p),o.init(t),d.setupGrid(p,t.model),m.history(n("#historyDate"),t.model),e=t.object.id,v.setup(n("#relatedObjectGrid"),e),b.display(n("#registerRoot"),e,null),null},viewShow:function(t){return o.refresh(t),null}}})}.call(this),define("text!templates/data/edit/bank.account.html",[],function(){return'<div id="editRoot">\n\t\t<h1 data-i18n="object:bankAccounts.new" data-bind="visible: isNew"></h1>\n\t\t<h1 data-i18n="object:bankAccounts.edit" data-bind="invisible: isNew"></h1>\n\t\t<h2 data-bind="text: name"></h2>\n\n\t\t<div id="editActions"></div>\n\t\t<p></p>\n\t<div data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li class="k-state-active">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t\t<span data-i18n="data:sections.advanced"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.references"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.tags"></span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<span data-i18n="data:sections.histories"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.documents"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.relatedObject"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<table class="bankAccountFormTable">\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<label for="owner">\n\t\t\t\t\t\t\t\t\t<a data-i18n="data:account.fields.owner" data-bind="attr: {href: ownerUrl}"></a>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input id="owner" data-role="domosentity" data-bind="value: owner"\n\t\t\t\t\t\t\t\t\tdata-enabled="false" />\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<label for="created" data-i18n="data:fields.creationDate"></label>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input id="created" name="created" class="k-textbox" type="text" data-bind="display: created"\n\t\t\t\t\t\t\t\t\t\tdata-format="g" readonly="readonly" />\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<label for="bankName" data-i18n="data:account.fields.bankName"></label>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input id="bankName"  class="k-textbox" type="text" data-bind="value: bankName" \n\t\t\t\t\t\t\t\trequired data-i18n="[validationMessage]data:account.validation.message.bankName"/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<label for="type" data-i18n="data:fields.type"></label>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input id="type" name="type" data-bind="value: type" />\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="sellSide">\n\t\t\t\t\t\t\t\t<a data-i18n="data:account.fields.bank" data-bind="attr: {href: sellSideUrl}"></a>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="sellSide" data-role="domossellside" data-bind="value: sellSide" />\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="paymentReference" data-i18n="data:account.fields.paymentReference"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="paymentReference" class="k-textbox" type="text" data-bind="value: paymentReference" />\n\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="currency" data-i18n="data:account.fields.currency"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="currency" data-role="domoscurrency" data-bind="value: currency" />\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="investorIban" data-i18n="data:account.fields.investorIban"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="investorIban" name="investorIban" class="k-textbox" type="text" data-bind="value: investorIban"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="bankSwift" data-i18n="data:account.fields.bankSwift"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="bankSwift" name="bankSwift" class="k-textbox" type="text" data-bind="value: bankSwift"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="intermediaryBankName" data-i18n="data:account.fields.intermediaryBankName"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="intermediaryBankName" class="k-textbox" type="text" data-bind="value: intermediaryBankName" />\n\t\t\t\t\t\t</td>\t\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="intermediaryBankSwift"  data-i18n="data:account.fields.intermediaryBankSwift"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="intermediaryBankSwift" name="intermediaryBankSwift" \n\t\t\t\t\t\t\t\tclass="k-textbox" type="text" data-bind="value: intermediaryBankSwift"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="intermediaryBankIban" name="bankSwift" data-i18n="data:account.fields.intermediaryBankIban"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="intermediaryBankIban" name="intermediaryBankIban" class="k-textbox" type="text" data-bind="value: intermediaryBankIban"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="beneficiaryBankSwift"  data-i18n="data:account.fields.beneficiaryBankSwift"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="beneficiaryBankSwift" name="beneficiaryBankSwift" \n\t\t\t\t\t\t\t\tclass="k-textbox" type="text" data-bind="value: beneficiaryBankSwift"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<label for="beneficiaryBankName" data-i18n="data:account.fields.beneficiaryBankName"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input id="beneficiaryBankName" class="k-textbox" type="text" data-bind="value: beneficiaryBankName" />\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="specialPayment" data-i18n="data:account.fields.specialPayment"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="specialPayment" type="checkbox" class="k-checkbox" data-bind="checked: specialPayment"/>\n\t\t\t\t\t\t\t<label for="specialPayment" class="k-checkbox-label">&nbsp;</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="beneficiaryBankIban" data-i18n="data:account.fields.beneficiaryBankIban"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="beneficiaryBankIban" name="beneficiaryBankIban" \n\t\t\t\t\t\t\t\tclass="k-textbox" type="text" data-bind="value: beneficiaryBankIban"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="beneficiaryBankAccount" data-i18n="data:account.fields.beneficiaryBankAccount"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="beneficiaryBankAccount" name="beneficiaryBankAccount" class="k-textbox" type="text" data-bind="value: beneficiaryBankAccount"/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</table>\n\t\t</div>\n\t\t\x3c!-- Advanced --\x3e\n\t\t<div>\n\t\t\t\t<h2><a id="AIFMDSection" data-i18n="data:sections.AIFMD"></a></h2>\n\t\n\t\t\t\t<table class="formTable">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="AIFSubAssetType" data-i18n="data:fields.AIFSubAssetType"\n\t\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="AIFSubAssetType" name="AIFSubAssetType" data-role="domosaifsubassettype"\n\t\t\t\t\t\t\t\tdata-bind="value: AIFMD.subAssetType" />\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="AIFMDGeographicalFocus" data-i18n="data:fields.AIFMDGeographicalFocus"\n\t\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="AIFMDGeographicalFocus" name="AIFMDGeographicalFocus"\n\t\t\t\t\t\t\t\tdata-role="domosaifmdgeographicalfocus" data-bind="value: AIFMD.geographicalFocus" />\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="AIFMDLiquidationPeriod" data-i18n="data:fields.AIFMDLiquidationPeriod"\n\t\t\t\t\t\t\t\tclass="aifmRequired"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="AIFMDLiquidationPeriod" name="AIFMDLiquidationPeriod"\n\t\t\t\t\t\t\t\tdata-role="domosaifmdliquidationperiod" data-bind="value: AIFMD.liquidationPeriod" />\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\t\x3c!-- References --\x3e\n\t\t<div>\n\n\t\t<h2 data-i18n="data:sections.references"></h2>\n\n\t\t<table class="formTable">\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="CUSIP" data-i18n="data:fields.CUSIP"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="CUSIP" name="CUSIP" class="k-textbox" type="text" data-bind="value: CUSIP"/>\n\t\t\t\t</td>\n\t\t\t\t<td></td>\n\t\t\t\t<td></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="ISIN" data-i18n="data:fields.ISIN" class="aifmRequired"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="ISIN" name="ISIN" class="k-textbox" type="text" data-bind="value: ISIN"/>\n\t\t\t\t</td>\n\t\t\t\t<td></td>\n\t\t\t\t<td></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="RIC" data-i18n="data:fields.RIC"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="RIC" name="RIC" class="k-textbox" type="text" data-bind="value: RIC"/>\n\t\t\t\t</td>\n\t\t\t\t<td></td>\n\t\t\t\t<td></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="SEDOL" data-i18n="data:fields.SEDOL"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="SEDOL" name="SEDOL" class="k-textbox" type="text" data-bind="value: SEDOL"/>\n\t\t\t\t</td>\n\t\t\t\t<td></td>\n\t\t\t\t<td></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="TICKER" data-i18n="data:fields.TICKER"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="TICKER" name="TICKER" class="k-textbox" type="text" data-bind="value: TICKER"/>\n\t\t\t\t</td>\n\t\t\t\t<td></td>\n\t\t\t\t<td></td>\n\t\t\t</tr>\n\t\t</table>\n\n\t\t<h2 data-i18n="data:sections.customReferences"></h2>\n\n\t\t<div id="customReferenceGrid" class="floatingGrid"></div>\n\t\t<div class="clearer"></div>\n\t</div>\n\t\t\x3c!-- Tags --\x3e\n\t\t<div>\n\t\t\t<div id="editTags"></div>\n\t\t</div>\n\n\t\t\x3c!-- Histories --\x3e\n\t\t<div>\n\t\t\t\t<label for="historyDate" data-i18n="history:fields.historyDate"></label>\n\t\t\t\t<input id="historyDate" name="historyDate" data-bind="value: historyDate" />\n\t\t\t\t<p></p>\n\t\t\t\t<p></p>\n\t\t\t<div id="editHistory"></div>\n\t\t</div>\n\n\t\t\x3c!-- Documents --\x3e\n\t\t<div>\n\t\t\t<div id="objectDocument" class="documentsContent"></div>\n\t\t</div>\n\n\t\t\x3c!-- relatedObject --\x3e\n\t\t<div>\n\t\t\t<div id="relatedObjectGrid" class="floatingGrid_1600_px"></div>\n\t\t</div>\n\n\t</div>\n\n</div>'}),function(){var h;h=["beneficiaryBankIban","intermediaryBankSwift","beneficiaryBankSwift","intermediaryBankIban","investorIban","bankSwift"],define("views/data/edit/edit.bank.account",["jquery","i18n","kendo","object/ui/ObjectTypeUI","object/data/ObjectCategories","views/data/model/bank.account.model","views/data/edit/common/reference.grid","views/data/edit/common/documents","core/ui/DateUI","common/date/HistoryDatePicker","object/views/related_object/views/RelatedObjectGrid","text!templates/data/edit/bank.account.html","basic/ui/CurrencyUI"],function(n,t,e,i,a,r,o,d,l,s,u,c){var p,m,f,b,v,y;return l.DateUI,f=i.ObjectTypeUI,p=a.ObjectCategories.bankAccounts,m=s.HistoryDatePicker,b=u.RelatedObjectGrid,function(){return[{field:"beneficiaryBankIban",inputId:"#beneficiaryBankIban"},{field:"intermediaryBankIban",inputId:"#intermediaryBankIban"},{field:"investorIban",inputId:"#investorIban"}]},y=function(t,i){return[{field:"beneficiaryBankIban",inputId:"#beneficiaryBankIban"},{field:"intermediaryBankIban",inputId:"#intermediaryBankIban"},{field:"investorIban",inputId:"#investorIban"}].forEach(function(n){return t.find(n.inputId).kendoMaskedTextBox({mask:"~~00 $$$$ 0000 000$ $$$$ $$$$ $$$$ $$$$",rules:{"~":/[A-Z]/,$:/[a-zA-Z0-9]/},change:function(t){var e;if(e=i.model)return e.set(n.field,t.sender.raw())},unmaskOnPost:!0})})},v=function(t,e){var n,i;return n=e.field,_.includes(h,e.field)&&(i=t.get(e.field),_.isEmpty(i)&&t.set(n,null)),null},{getTemplates:function(){return{view:c}},createRawModel:function(t){var e;return e={},r.updateRawModel(e),e},updateModel:function(t,e){return r.updateModel(t,e)},init:function(t){var e;return e=t.model,f.widget(n("#type"),p),o.setupGrid(p,e),d.init(t),m.history(n("#historyDate"),e),y(n("#editRoot"),t),b.setup(n("#relatedObjectGrid"),t.object.id),e.bind("change",v.bind(null,e)),null},viewShow:function(t){return d.refresh(t),null}}})}.call(this),function(){var Wt,Ht,Yt,Jt,Kt,$t,Qt;Yt="editObject",Kt="editRoot",Wt="editActions",Ht=["beneficiaryBankIban","intermediaryBankIban","investorIban"],$t=["bankSwift","beneficiaryBankSwift","intermediaryBankSwift"],Jt=["cutOffPeriod","paymentPeriod"],Qt=/^[A-Z]{6}[0-9A-Z]{2}([0-9A-Z]{3})?$/,define("views/data/edit/edit.object",["lodash","i18n","site","iban","core/web/WebLocation","core/util/EnumUtils","reference/data/Reference","reference/data/ReferenceValidation","metric/data/Metrics","object/data/ObjectCategories","object/data/ObjectTypes","views/data/tag/tags","views/data/history/histories","views/data/metric/metrics","performance/web/KeyPerformanceMap","object/web/ObjectMap","bankAccount/web/BankMap","views/edit/edit","object/views/strategy/web/StrategyMap","object/web/ValuationHistoryMap","core/data/SiteCategories","history/web/FundPaymentCapitalCallMap","object/validators/PeriodValidator","history/web/FeesObjectMap","history/web/NetAssetValueMap","history/web/ReserveTransferMap","views/data/edit/edit.individual","views/data/edit/edit.corporate","views/data/edit/edit.investment.company","views/data/edit/edit.investment.vehicle","views/data/edit/edit.sell.side","views/data/edit/edit.legal.other","views/data/edit/edit.cash","views/data/edit/edit.debt","views/data/edit/edit.mandate","views/data/edit/edit.fund.share","views/data/edit/edit.property","views/data/edit/edit.other.asset","views/data/edit/edit.company","views/data/edit/edit.company.share","views/data/edit/edit.portfolio","views/data/edit/edit.position","views/data/edit/edit.real.estate.deal.flow","views/data/edit/edit.fund.flow","views/data/edit/edit.virtual.portfolio","views/data/edit/edit.investment","views/data/edit/edit.equity.derivative","views/data/edit/edit.bank.account"],function(a,o,t,r,e,n,i,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J){var K,Q,z,X,Z,tt,et,nt,it,at,rt,ot,dt,lt,st,ut,ct,pt,mt,ft,bt,vt,yt,ht,gt,Tt,It,Ct,wt,kt,Et,Dt,St,Nt,xt,Rt,_t,Ot,Ut,At,Ft,Lt,Pt,Mt,jt,Gt,qt,Bt,Vt;return rt=b.ObjectMap,Z=f.KeyPerformanceMap,yt=e.WebLocation,Q=n.EnumUtils,st=i.Reference,ut=d.ReferenceValidation,nt=l.Metrics,at=s.ObjectCategories,ot=u.ObjectTypes,ct=E.ReserveTransferMap,lt=t.router,tt=t.map,K=v.BankMap,mt=h.StrategyMap,vt=g.ValuationHistoryMap,pt=T.SiteCategories,X=I.FundPaymentCapitalCallMap,dt=C.PeriodValidator,z=w.FeesObjectMap,it=k.NetAssetValueMap,(ft={})[at.individuals.id]=D,ft[at.corporates.id]=S,ft[at.investmentCompanies.id]=N,ft[at.investmentVehicles.id]=x,ft[at.sellSides.id]=R,ft[at.legalOthers.id]=_,ft[at.cash.id]=O,ft[at.debts.id]=U,ft[at.mandates.id]=A,ft[at.fundShares.id]=F,ft[at.properties.id]=L,ft[at.otherAssets.id]=P,ft[at.companies.id]=M,ft[at.companyShares.id]=j,ft[at.portfolios.id]=G,ft[at.positions.id]=q,ft[at.realEstateDealFlows.id]=B,ft[at.fundFlows.id]=V,ft[at.virtualPortfolios.id]=W,ft[at.investments.id]=H,ft[at.equityDerivatives.id]=Y,ft[at.bankAccounts.id]=J,et={REFERENCE:o.t("data:validation.referenceIncorrect"),PERIOD:o.t("data:validation.message.invalidPeriod"),IBAN:o.t("data:account.validation.message.IBAN"),SWIFT:o.t("data:account.validation.message.SWIFT")},bt={REFERENCE:1,PERIOD:2,IBAN:3,SWIFT:4},Vt=function(t,e,n){var i;if(n.is("[name="+e+"]")){if(!(i=n.val()))return!0;switch(t){case bt.REFERENCE:return ut.isValid(e,i);case bt.PERIOD:return dt.isValid(i);case bt.IBAN:return r.isValid(i);case bt.SWIFT:return Qt.test(i);default:return!0}}return!0},ht=function(t,e,n,i){return null==t.messages&&(t.messages={}),t.messages[i]=e,null==t.rules&&(t.rules={}),t.rules[i]=n},xt=function(){var t,e,n,i,a,r,o,d,l,s,u,c,p,m;for(s={},t=0,r=(c=Q.listNames(st)).length;t<r;t++)p=c[t],ht(s,et.REFERENCE,Vt.bind(null,bt.REFERENCE,p),p);for(n=0,o=Jt.length;n<o;n++)ht(s,et.PERIOD,Vt.bind(null,bt.PERIOD,u=Jt[n]),u);for(i=0,d=Ht.length;i<d;i++)ht(s,et.IBAN,Vt.bind(null,bt.IBAN,e=Ht[i]),e);for(a=0,l=$t.length;a<l;a++)ht(s,et.SWIFT,Vt.bind(null,bt.SWIFT,m=$t[a]),m);return s},wt=function(t){return{id:t}},Nt=function(t,e){var n,i;return n=t,(a.isNumber(t)||a.isString(t))&&(n=at.get(t)),i={category:n.id},e&&(i.portfolio=e),i},Ft=function(t,e,n){var i,a;return e&&(i=e.id,a=ft[i])?t.create(a,n):null},At=function(t,e,n){var i,a;return i=null!=(a=ot.get(null!=e?e.type:void 0))?a.category:void 0,Ft(t,i,n)},Lt=function(t){var e,n;return n=ot.get(t.get("type")),(e=nt.listByObjectType(n))&&0<e.length},jt=function(t,e){var n;if((n=t.module)&&n.viewShow&&n.viewShow(t),null==t.tagContext&&(t.tagContext=c.create("editTags")),t.tagContext.display(t.model,e),null==t.histoContext&&(t.histoContext=p.create("editHistory")),t.histoContext.display(t.model),Lt(t.model))return null==t.metricContext&&(t.metricContext=m.create("editMetric")),t.metricContext.display(t.model)},Pt=function(t){var e;return e=t.model.get("id"),lt.navigate(tt.getObjectHistory(e))},Mt=function(t){var e;return e=t.model.get("id"),lt.navigate(tt.getObjectMetric(e))},Ot=function(t){var e;return e=t.model.get("id"),lt.navigate(tt.getDealFlowDocumentEdit(e))},Bt=function(t){var e;return e=t.model.get("id"),lt.navigate(tt.getObjectSubscription(e))},Gt=function(t){var e;return e=t.model.get("id"),lt.navigate(tt.getObjectRedemption(e))},Tt=function(t){var e;return e=t.model.get("id"),lt.navigate(tt.getObjectCompanySubscription(e))},_t=function(t){var e;return e=t.model.get("id"),lt.navigate(tt.getObjectDerivativeSubscription(e))},Rt=function(t){var e;return e=t.model.get("id"),lt.navigate(tt.getObjectDebtSubscription(e))},qt=function(t,e){var n,i,a,r;return n=(i=t.model).get("id"),r=ot.get(i.get("type")),0!==n&&(e.push({type:"separator"}),e.push({type:"button",text:o.t("data:actions.histories"),click:Pt.bind(null,t)}),r&&(r.isOf(at.investmentVehicles)||r.isOf(at.fundShares))&&e.push({type:"button",text:o.t("data:actions.valuationHistory"),url:vt.objectValuationss(n)}),e.push({type:"button",text:o.t("data:actions.kpi"),url:Z.objectIndicators(n)}),Lt(i)&&e.push({type:"button",text:o.t("data:actions.metrics"),click:Mt.bind(null,t)}),r&&(r.isOf(at.entities)||r.isOf(at.assets))&&e.push({type:"button",text:o.t("data:actions.notes"),url:rt.notes(n)}),r&&r.isOf(at.dealIntentions)&&(e.push({type:"separator"}),e.push({type:"button",text:o.t("flow:documents.documents"),click:Ot.bind(null,t)})),r&&r.isOf(at.investmentVehicles)&&(e.push({type:"separator"}),e.push({type:"button",text:o.t("history:fees.fund.title"),url:z.getFundFees(n)}),e.push({type:"button",text:o.t("data:actions.reserveTransfer"),url:ct.reserveTransfer(n)}),e.push({id:"commitmentButtonId",type:"button",click:Bt.bind(null,t)}),e.push({type:"button",text:o.t("history:redemptions.title"),click:Gt.bind(null,t)}),e.push({type:"button",text:o.t("history:paymentCapitalCall.title"),url:X.fundPaymentCapitalCalls(n)})),r&&r.isOf(at.derivatives)&&(e.push({type:"separator"}),e.push({type:"button",text:o.t("history:derivativeSubscriptions.title"),click:_t.bind(null,t)})),r&&r.isOf(at.companies)&&(e.push({type:"separator"}),e.push({type:"button",text:o.t("history:companySubscriptions.title"),click:Tt.bind(null,t)}),e.push({type:"separator"}),e.push({type:"button",text:o.t("history:fees.company.title"),url:z.getCompanyFees(n)})),r&&r.isOf(at.debts)&&(e.push({type:"separator"}),e.push({id:"lendersButtonId",type:"button",text:o.t("history:debtSubscriptions.title"),click:Rt.bind(null,t)}),e.push({type:"separator"}),e.push({type:"button",text:o.t("history:fees.debt.title"),url:z.getDebtFees(n)})),r&&r.isOf(at.companies)&&(e.push({type:"separator"}),e.push({type:"button",text:o.t("data:actions.downloadXml"),attributes:{download:"company.xml"},url:yt.resolve("company/input.xml?"+$.param({company:n}))})),r&&r.isOf(at.entities)&&(a=t.model.get("id"),e.push({type:"separator"}),e.push({type:"button",text:o.t("data:fields.bankAccount"),url:K.summary(a)}),e.push({type:"separator"}),e.push({type:"button",text:o.t("data:fields.netAssetValue"),url:it.listFirst(n)})),r&&r.isOf(at.assets)&&!r.isOf(at.bankAccounts)&&(e.push({type:"separator"}),e.push({type:"button",text:o.t("data:fields.netAssetValue"),url:it.listSecond(n)})),r&&r.isOf(at.bankAccounts)&&e.push({type:"button",text:o.t("data:account.actions.statement"),url:K.statement(n)}),e.push({type:"button",text:o.t("data:actions.strategy"),url:mt.objectStrategy(n)})),null},gt=function(t){var e;return(e=ot.get(t.type))?o.t("object:"+e.category.key+".confirmDelete"):null},Et=function(){return{siteCategory:pt.data,key:Yt,rootId:Kt,actionsId:Wt,url:"object.json",askDestroy:gt,createValidatorOptions:xt,viewShow:jt,setupToolbar:qt,getView:At}},Dt=function(t,e){return{siteCategory:pt.data,key:Yt,rootId:Kt,actionsId:Wt,createValidatorOptions:xt,viewShow:jt,save:t,submit:e,getView:At}},St=function(t){return{siteCategory:pt.data,key:Yt,rootId:Kt,actionsId:Wt,createValidatorOptions:xt,viewShow:jt,close:t,getView:At}},kt=function(){var t;return(t=Et()).createGetParameters=Nt,y.create(t)},function(){var t;return(t=Et()).createGetParameters=Nt,y.createContext(t)},Ct=function(){var t;return(t=Et()).createGetParameters=wt,y.create(t)},It=function(t,e){return kt().display(t,e)},Ut=function(t){return Ct().display(t)},{init:function(){return lt.addRoute(tt.objectEdit,Ut),lt.addRoute(tt.objectCreate,It)},createNewContextForTaskForm:function(t,e){var n;return(n=Dt(t,e)).createGetParameters=Nt,y.createContext(n)},createNewContextForWorkflowOverlay:function(t){var e;return(e=St(t)).createGetParameters=Nt,y.createContext(e)}}})}.call(this),function(){var k,E,D,S;S="object",D="history",E="format",k="#historyGrid",define("views/data/history/edit.history.number",["jquery","lodash","i18n","kendo","ui","core/ui/DateUI","core/util/DateUtils","core/ui/PercentUI","core/ui/NumberUI"],function(u,d,c,p,t,e,n,i,a){var m,l,f,r,b,v,o,y,h,g,s,T,I,C,w;return b=i.PercentUI,m=e.DateUI,l=n.DateUtils,r=a.NumberUI,f=t.grid,s=function(t,e){var n,i,a,r,o,d;for(n=e.date,r=0,o=(d=t.data()).length;r<o;r++)if(a=(i=d[r]).get("date"),l.equals(a,n))return i;return null},v=function(t){var e,n,i,a;if(e=null!=(a=u(k).data("kendoGrid"))?a.dataSource:void 0)return i=t.toJSON(),(n=s(e,i))?n.set("value",i.value):(n={date:i.date,value:i.value},e.add(n)),e.sync(),!0},C=function(t){var e,n,i,a,r,o,d,l,s;return e=u("#historyInput"),p.destroy(e),e.empty(),o={date:new Date,value:0},a=p.observable(o),d=u("<table>").addClass("formTable").appendTo(e),s=u("<tr>").appendTo(d),l=u("<td>").appendTo(s),u("<label>").attr("for","historyDate").text(c.t("history:fields.date")).appendTo(l),l=u("<td>").appendTo(s),(i=u("<input>").attr("id","historyDate").attr("data-bind","value: date").appendTo(l)).kendoDatePicker(),s=u("<tr>").appendTo(d),l=u("<td>").appendTo(s),u("<label>").attr("for","historyValue").text(c.t("history:fields.value")).appendTo(l),l=u("<td>").appendTo(s),n=t[E],i=u("<input>").attr("id","historyValue").attr("data-bind","value: value").appendTo(l),"p"===n?(r={min:t.min,max:t.max},b.widget(i,r)):(r={format:t[E],min:t.min,max:t.max,decimals:t.decimals},i.kendoNumericTextBox(r)),s=u("<tr>").appendTo(d),l=u("<td>").appendTo(s),l=u("<td>").appendTo(s),u("<button>").addClass("k-button").text(c.t("history:actions.addOrUpdate")).click(v.bind(null,a)).appendTo(l),p.bind(e,a)},o=function(t,e){var n,i,a,r,o,d;for(d=[],r=0,o=e.length;r<o;r++)i=e[r],n=l.toDate(i.date),a={id:l.toJson(n),date:n,value:i.value},d.push(a);return t(d)},T=function(t,e){var n,i;return n={object:null!=(i=t[S])?i.id:void 0,history:t[D]},u.getJSON("history.json",n).done(o.bind(null,e.success)).fail(e.error),null},w=y=function(t,e){var n,i,a;return(i=e.data).date=l.toJson(i.date),n={type:"POST",url:"history.json",dataType:"json",data:{object:null!=(a=t[S])?a.id:void 0,history:t[D],data:p.stringify(i)}},u.ajax(n).done(e.success).fail(e.error)},g=function(t,e){var n,i,a,r;return t.model,(i=e.data).date=l.toJson(i.date),r={object:null!=(a=t[S])?a.id:void 0,history:t[D],data:p.stringify(i)},n={type:"DELETE",url:"history.json?"+u.param(r),dataType:"json"},u.ajax(n).done(e.success).fail(e.error)},h=function(t,e){var n,i;return i=t[E],n=t.decimals||null,"p"===i?b.column({field:e,title:c.t("history:fields."+e)}):r.column({field:e,title:c.t("history:fields."+e),decimals:n})},I=function(t){var e,n,i,a,r,o,d,l,s;return a=u(k),p.destroy(a),a.empty(),(e={command:["edit","destroy"],title:" ",width:"200px"}).hidden=t.locked,n=m.column({field:"date",title:c.t("history:fields.date")}),i=h(t,"value"),s={type:"number",nullable:!1},o=t.min,r=t.max,(l=null)!=o&&(null==l&&(l={}),l.min=o),null!=r&&(null==l&&(l={}),l.max=r),l&&(s.validation=l),d={dataSource:{transport:{read:T.bind(null,t),create:y.bind(null,t),update:w.bind(null,t),destroy:g.bind(null,t)},schema:{model:{id:"id",fields:{date:{type:"date",nullable:!1,editable:!1},value:s}}},sort:{field:"date",dir:"desc"}},columns:[e,n,i],pageable:f.defaultPageable(),scrollable:!1},f.withDefaults(d),a.kendoGrid(d)},{display:function(t){return C(t),I(t),null},lock:function(t){var e,n,i,a,r,o;if(i=u(k).data("kendoGrid")){for(e=null,a=0,r=(o=i.columns).length;a<r;a++)if(n=o[a],d.has(n,"command")){e=n;break}if(e)return t?i.hideColumn(e):i.showColumn(e),!0}}}})}.call(this),function(){var k,E,D;D="object",E="history",k="#historyGrid",define("views/data/history/edit.history.price",["jquery","lodash","i18n","kendo","site","ui","core/ui/DateUI","basic/ui/CurrencyUI","core/util/DateUtils","core/ui/NumberUI"],function(s,d,u,c,t,e,n,i,a,r){var l,p,m,f,b,v,o,y,h,g,T,I,C,w;return b=r.NumberUI,p=n.DateUI,m=a.DateUtils,l=i.CurrencyUI,f=e.grid,g=function(t,e){var n,i,a,r,o,d;for(n=e.date,r=0,o=(d=t.data()).length;r<o;r++)if(a=(i=d[r]).get("date"),m.equals(a,n))return i;return null},v=function(t){var e,n,i,a;if(e=null!=(a=s(k).data("kendoGrid"))?a.dataSource:void 0)return i=t.toJSON(),(n=g(e,i))?(n.set("value",i.value),n.set("currency",i.currency)):(n={date:i.date,value:i.value,currency:i.currency},e.add(n)),e.sync(),!0},C=function(t){var e,n,i,a,r,o,d,l;return e=s("#historyInput"),c.destroy(e),e.empty(),r={date:new Date,value:0,currency:978},i=c.observable(r),o=s("<table>").addClass("formTable").appendTo(e),l=s("<tr>").appendTo(o),d=s("<td>").appendTo(l),s("<label>").attr("for","historyDate").text(u.t("history:fields.date")).appendTo(d),d=s("<td>").appendTo(l),(n=s("<input>").attr("id","historyDate").attr("data-bind","value: date").appendTo(d)).kendoDatePicker(),l=s("<tr>").appendTo(o),d=s("<td>").appendTo(l),s("<label>").attr("for","historyValue").text(u.t("history:fields.value")).appendTo(d),d=s("<td>").appendTo(l),n=s("<input>").attr("id","historyValue").attr("data-bind","value: value").appendTo(d),a={format:t.format,min:t.min,max:t.max,decimals:t.decimals},n.kendoNumericTextBox(a),l=s("<tr>").appendTo(o),d=s("<td>").appendTo(l),s("<label>").attr("for","historyCurrency").text(u.t("history:fields.currency")).appendTo(d),d=s("<td>").appendTo(l),(n=s("<input>").attr("id","historyCurrency").attr("data-bind","value: currency").appendTo(d)).kendoDomosCurrency(),l=s("<tr>").appendTo(o),d=s("<td>").appendTo(l),d=s("<td>").appendTo(l),s("<button>").addClass("k-button").text(u.t("history:actions.addOrUpdate")).click(v.bind(null,i)).appendTo(d),c.bind(e,i)},o=function(t,e){var n,i,a,r,o,d;for(d=[],r=0,o=e.length;r<o;r++)i=e[r],n=m.toDate(i.date),a={id:m.toJson(n),date:n,value:i.value,currency:i.currency},d.push(a);return t(d)},T=function(t,e){var n,i;return n={object:null!=(i=t[D])?i.id:void 0,history:t[E]},s.getJSON("history.json",n).done(o.bind(null,e.success)).fail(e.error),null},w=y=function(t,e){var n,i,a;return(i=e.data).date=m.toJson(i.date),n={type:"POST",url:"history.json",dataType:"json",data:{object:null!=(a=t[D])?a.id:void 0,history:t[E],data:c.stringify(i)}},s.ajax(n).done(e.success).fail(e.error)},h=function(t,e){var n,i,a,r;return t.model,(i=e.data).date=m.toJson(i.date),r={object:null!=(a=t[D])?a.id:void 0,history:t[E],data:c.stringify(i)},n={type:"DELETE",url:"history.json?"+s.param(r),dataType:"json"},s.ajax(n).done(e.success).fail(e.error)},I=function(t){var e,n,i,a,r,o;return e=s(k),c.destroy(e),e.empty(),o={type:"number",nullable:!1},i=t.min,n=t.max,(r=null)!=i&&(null==r&&(r={}),r.min=i),null!=n&&(null==r&&(r={}),r.max=n),r&&(o.validation=r),a={dataSource:{transport:{read:T.bind(null,t),create:y.bind(null,t),update:w.bind(null,t),destroy:h.bind(null,t)},schema:{model:{id:"id",fields:{date:{type:"date",nullable:!1,editable:!1},value:o,currency:{type:"number",nullable:!1}}}},sort:{field:"date",dir:"desc"}},columns:[{command:["edit","destroy"],title:" ",width:"200px",hidden:t.locked},p.column({field:"date",title:u.t("history:fields.date")}),b.column({field:"value",title:u.t("history:fields.value"),decimals:t.decimals}),l.column({field:"currency",title:u.t("history:fields.currency")})],pageable:f.defaultPageable(),scrollable:!1},f.withDefaults(a),e.kendoGrid(a)},{display:function(t){return C(t),I(t),null},lock:function(t){var e,n,i,a,r,o;if(i=s(k).data("kendoGrid")){for(e=null,a=0,r=(o=i.columns).length;a<r;a++)if(n=o[a],d.has(n,"command")){e=n;break}if(e)return t?i.hideColumn(e):i.showColumn(e),!0}}}})}.call(this),function(){var C,w,k;k="object",w="history",C="#historyGrid",define("views/data/history/edit.history.select",["jquery","lodash","i18n","kendo","site","ui","core/ui/DateUI","tag/ui/TagDefinitionUI","core/util/DateUtils"],function(l,d,s,u,t,e,n,i,a){var o,c,p,m,f,r,b,v,y,h,g,T,I;return o=n.DateUI,c=a.DateUtils,m=i.TagDefinitionUI,p=e.grid,y=function(t,e){var n,i,a,r,o,d;for(n=e.date,r=0,o=(d=t.data()).length;r<o;r++)if(a=(i=d[r]).get("date"),c.equals(a,n))return i;return null},f=function(t){var e,n,i,a;if(e=null!=(a=l(C).data("kendoGrid"))?a.dataSource:void 0)return i=t.toJSON(),(n=y(e,i))?n.set("value",i.value):(n={date:i.date,value:i.value},e.add(n)),e.sync(),!0},function(t){return{id:t.id,name:s.t(t.label),priority:t.priority}},T=function(t){var e,n,i,a,r,o,d;return e=l("#historyInput"),u.destroy(e),e.empty(),a={date:new Date,value:null},i=u.observable(a),r=l("<table>").addClass("formTable").appendTo(e),d=l("<tr>").appendTo(r),o=l("<td>").appendTo(d),l("<label>").attr("for","historyDate").text(s.t("history:fields.date")).appendTo(o),o=l("<td>").appendTo(d),(n=l("<input>").attr("id","historyDate").attr("data-bind","value: date").appendTo(o)).kendoDatePicker(),d=l("<tr>").appendTo(r),o=l("<td>").appendTo(d),l("<label>").attr("for","historyValue").text(s.t("history:fields.value")).appendTo(o),o=l("<td>").appendTo(d),n=l("<input>").attr("id","historyValue").attr("data-bind","value: value").appendTo(o),m.select(t.definitionId).widget(n),d=l("<tr>").appendTo(r),o=l("<td>").appendTo(d),o=l("<td>").appendTo(d),l("<button>").addClass("k-button").text(s.t("history:actions.addOrUpdate")).click(f.bind(null,i)).appendTo(o),u.bind(e,i)},r=function(t,e){var n,i,a,r,o,d;for(d=[],r=0,o=e.length;r<o;r++)i=e[r],n=c.toDate(i.date),a={id:c.toJson(n),date:n,value:i.value},d.push(a);return t(d)},h=function(t,e){var n,i;return n={object:null!=(i=t[k])?i.id:void 0,history:t[w]},l.getJSON("history.json",n).done(r.bind(null,e.success)).fail(e.error),null},I=b=function(t,e){var n,i,a;return(i=e.data).date=c.toJson(i.date),n={type:"POST",url:"history.json",dataType:"json",data:{object:null!=(a=t[k])?a.id:void 0,history:t[w],data:u.stringify(i)}},l.ajax(n).done(e.success).fail(e.error)},v=function(t,e){var n,i,a,r;return t.model,(i=e.data).date=c.toJson(i.date),r={object:null!=(a=t[k])?a.id:void 0,history:t[w],data:u.stringify(i)},n={type:"DELETE",url:"history.json?"+l.param(r),dataType:"json"},l.ajax(n).done(e.success).fail(e.error)},g=function(t){var e,n,i,a,r;return a=l(C),u.destroy(a),a.empty(),(e={command:["edit","destroy"],title:" ",width:"200px"}).hidden=t.locked,n=o.column({field:"date",title:s.t("history:fields.date")}),i=m.select(t.definitionId).column({field:"value",title:s.t("history:fields.value")}),r={dataSource:{transport:{read:h.bind(null,t),create:b.bind(null,t),update:I.bind(null,t),destroy:v.bind(null,t)},schema:{model:{id:"id",fields:{date:{type:"date",nullable:!1,editable:!1},value:{type:"number",nullable:!1}}}},sort:{field:"date",dir:"desc"}},columns:[e,n,i],pageable:p.defaultPageable(),scrollable:!1},p.withDefaults(r),a.kendoGrid(r)},{display:function(t){return T(t),g(t),null},lock:function(t){var e,n,i,a,r,o;if(i=l(C).data("kendoGrid")){for(e=null,a=0,r=(o=i.columns).length;a<r;a++)if(n=o[a],d.has(n,"command")){e=n;break}if(e)return t?i.hideColumn(e):i.showColumn(e),!0}}}})}.call(this),function(){var g,T,I;I="object",T="history",g="#historyGrid",define("views/data/history/edit.history.bool",["jquery","lodash","i18n","kendo","ui","core/ui/DateUI","core/util/DateUtils"],function(d,l,s,u,t,e,n){var a,c,r,p,o,m,f,b,v,i,y,h;return a=e.DateUI,c=n.DateUtils,r=t.grid,b=function(t,e){var n,i,a,r,o,d;for(n=e.date,r=0,o=(d=t.data()).length;r<o;r++)if(a=(i=d[r]).get("date"),c.equals(a,n))return i;return null},p=function(t){var e,n,i,a;if(e=null!=(a=d(g).data("kendoGrid"))?a.dataSource:void 0)return i=t.toJSON(),(n=b(e,i))?n.set("value",i.value):(n={date:i.date,value:i.value},e.add(n)),e.sync(),!0},y=function(t){var e,n,i,a,r,o;return e=d("#historyInput"),u.destroy(e),e.empty(),i={date:new Date,value:!1},n=u.observable(i),a=d("<table>").addClass("formTable").appendTo(e),o=d("<tr>").appendTo(a),r=d("<td>").appendTo(o),d("<label>").attr("for","historyDate").text(s.t("history:fields.date")).appendTo(r),r=d("<td>").appendTo(o),d("<input>").attr("id","historyDate").attr("data-bind","value: date").appendTo(r).kendoDatePicker(),o=d("<tr>").appendTo(a),r=d("<td>").appendTo(o),d("<label>").attr("for","historyValue").text(s.t("history:fields.value")).appendTo(r),r=d("<td>").appendTo(o),d("<input>").attr("type","checkbox").attr("id","historyValue").attr("data-bind","checked: value").appendTo(r),o=d("<tr>").appendTo(a),r=d("<td>").appendTo(o),r=d("<td>").appendTo(o),d("<button>").addClass("k-button").text(s.t("history:actions.addOrUpdate")).click(p.bind(null,n)).appendTo(r),u.bind(e,n)},o=function(t,e){var n,i,a,r,o,d;for(d=[],r=0,o=e.length;r<o;r++)i=e[r],n=c.toDate(i.date),a={id:c.toJson(n),date:n,value:i.value},d.push(a);return t(d)},v=function(t,e){var n,i;return n={object:null!=(i=t[I])?i.id:void 0,history:t[T]},d.getJSON("history.json",n).done(o.bind(null,e.success)).fail(e.error),null},h=m=function(t,e){var n,i,a;return(i=e.data).date=c.toJson(i.date),n={type:"POST",url:"history.json",dataType:"json",data:{object:null!=(a=t[I])?a.id:void 0,history:t[T],data:u.stringify(i)}},d.ajax(n).done(e.success).fail(e.error)},f=function(t,e){var n,i,a,r;return t.model,(i=e.data).date=c.toJson(i.date),r={object:null!=(a=t[I])?a.id:void 0,history:t[T],data:u.stringify(i)},n={type:"DELETE",url:"history.json?"+d.param(r),dataType:"json"},d.ajax(n).done(e.success).fail(e.error)},i=function(t){var e,n,i;return e=d(g),u.destroy(e),e.empty(),i={type:"boolean",nullable:!1},n={dataSource:{transport:{read:v.bind(null,t),create:m.bind(null,t),update:h.bind(null,t),destroy:f.bind(null,t)},schema:{model:{id:"id",fields:{date:{type:"date",nullable:!1,editable:!1},value:i}}},sort:{field:"date",dir:"desc"}},columns:[{command:["edit","destroy"],title:" ",width:"200px",hidden:t.locked},a.column({field:"date",title:s.t("history:fields.date")}),{field:"value",title:s.t("history:fields.value")}],pageable:r.defaultPageable(),scrollable:!1},r.withDefaults(n),e.kendoGrid(n)},{display:function(t){return y(),i(t),null},lock:function(t){var e,n,i,a,r,o;if(i=d(g).data("kendoGrid")){for(e=null,a=0,r=(o=i.columns).length;a<r;a++)if(n=o[a],l.has(n,"command")){e=n;break}if(e)return t?i.hideColumn(e):i.showColumn(e),!0}}}})}.call(this),define("text!templates/data/history/history.html",[],function(){return'<div id="historyRoot">\n    <h1 data-i18n="history:histories"></h1>\n    <h2 data-bind="text: title"></h2>\n    <p></p>\n\n    <div id="historyToolbar"></div>\n\n    <h3 data-i18n="history:noHistories" data-bind="invisible: hasHistory"></h3>\n    <div id="historyDetails" data-bind="visible: hasHistory">\n\n        <div data-bind="invisible: locked" class="k-content d-content">\n            <div id="historyInput" class="floatThird"></div>\n            <div class="clearer"></div>\n        </div>\n\n        <div id="historyGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n</div>'}),function(){var mt,ft;ft="#historyToolbar",mt="editHistory",define("views/data/history/edit.history",["jquery","lodash","i18n","kendo","site","ui","core/web/WebLocation","tag/data/TagDefinitions","history/data/Histories","core/api/HistoryCategory","core/api/HistoryType","core/api/TagTarget","core/api/TagType","object/data/ObjectCategories","object/data/ObjectTypes","views/layout","views/not.found","views/loading","views/data/history/edit.history.number","views/data/history/edit.history.price","views/data/history/edit.history.select","views/data/history/edit.history.bool","text!templates/data/history/history.html"],function(s,u,a,c,t,e,n,i,r,o,d,l,p,m,f,b,v,y,h,g,T,I,C){var w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q,z,X,Z,tt,et,nt,it,at,rt,ot,dt,lt,st,ut,ct,pt;return w=r.Histories,k=o.HistoryCategory,E=d.HistoryType,_=l.TagTarget,O=p.TagType,U=n.WebLocation,R=i.TagDefinitions,x=t.router,D=t.map,S=m.ObjectCategories,N=f.ObjectTypes,e.grid,z=function(){return v.display(mt,!1)},function(){return{view:null,query:null,toolbar:null}},J=function(t){var e,n;return u.has(t,"name")?t.name:(n=N.get(t.type))&&n.isOf(S.positions)?a.t("object:positions.withAsset",{asset:(null!=(e=t.asset)?e.name:void 0)||"",interpolation:{escapeValue:!1}}):n.name},function(t){var e;return null!=(e=w.get(t))?e.type:void 0},function(t){return{title:"",id:0,type:0,history:null,locked:!0,hasHistory:function(){return!!this.get("history")}}},ut=function(t,e,n){return t.set("title",J(n)),t.set("id",n.id),t.set("type",n.type),t.set("history",e),t.set("locked",!0)},et=function(t,e){return"history"===e.field?nt(t):"locked"===e.field&&st(t),null},F=function(t){return t.model.bind("change",et.bind(null,t))},q=function(t,e,n){var i;return(i={name:n.name,locked:t,object:e,history:n.key,format:n.format,decimals:n.decimals,min:n.min,max:n.max,step:n.step,category:k.getName(n.historyCategory),aifmRequired:n.aifmRequired}).display=h.display.bind(null,i),i.lock=h.lock,i},B=function(t,e,n){var i;return(i={name:n.name,locked:t,object:e,history:n.key,format:n.format,decimals:n.decimals,min:n.min,max:n.max,step:n.step,category:k.getName(n.historyCategory),aifmRequired:n.aifmRequired}).display=g.display.bind(null,i),i.lock=g.lock,i},lt=function(t){return"tag"+t.id},M=function(t,e,n){var i;return i={name:a.t(n.label),locked:t,object:e,history:lt(n),format:"n",category:a.t(n.category.name),aifmRequired:!1},n.decimals&&(i.decimals=n.decimals,i.format="n"+n.decimals),n.percent&&(i.format="p"),i.display=h.display.bind(null,i),i.lock=h.lock,i},G=function(t,e,n){var i;return(i={name:a.t(n.label),locked:t,object:e,history:lt(n),format:"n0",category:a.t(n.category.name),aifmRequired:!1}).display=h.display.bind(null,i),i.lock=h.lock,i},P=function(t,e,n){var i;return(i={name:a.t(n.label),locked:t,object:e,history:lt(n),category:a.t(n.category.name),aifmRequired:!1}).display=I.display.bind(null,i),i.lock=I.lock,i},V=function(t,e,n){var i;return(i={name:a.t(n.label),locked:t,object:e,history:lt(n),definitionId:n.id,category:a.t(n.category.name),aifmRequired:!1}).display=T.display.bind(null,i),i.lock=T.lock,i},j=function(t,e){var n,i,a,r,o,d,l,s,u,c,p;for(p=e.type,i={},o=0,l=(c=R.listByObjectType(p,_.HISTORY)).length;o<l;o++)u=null,(n=c[o]).type===O.DOUBLE?u=M(t,e,n):n.type===O.INTEGER?u=G(t,e,n):n.type===O.SELECT?u=V(t,e,n):n.type===O.BOOLEAN&&(u=P(t,e,n)),u&&(i[u.history]=u);for(d=0,s=(r=w.listByObjectType(p)).length;d<s;d++)u=null,(a=r[d]).type===E.NUMBER?u=q(t,e,a):a.type===E.PRICE&&(u=B(t,e,a)),u&&(i[u.history]=u);return i},L=function(t){var e;return null!=(e=t.toolbar)&&e.destroy(),t.toolbar=null,s(ft).empty(),null},ot=function(t){var e,n,i,a,r,o,d,l;for(e=[],a=0,r=(l=u.values(t.displayInfo)).length;a<r;a++)o={name:(n=l[a]).name,history:n.history,category:n.category,aifmRequired:n.aifmRequired},e.push(o);return d={autoWidth:!0,optionLabel:{name:"--",aifmRequired:!1},dataTextField:"name",dataValueField:"history",dataSource:{data:e,group:{field:"category"},sort:{field:"name",dir:"asc"}},valuePrimitive:!0,valueTemplate:"<span#if(aifmRequired){# class='aifmRequired'#}#>#:name#</span>",template:"<span#if(aifmRequired){# class='aifmRequired'#}#>#:name#</span>"},(i=s("#toolbarHistory")).kendoDropDownList(d),c.bind(i,t.model),null},ct=function(t,e){return t.model.set("locked",!0)},pt=function(t,e){return t.model.set("locked",!1)},rt=function(t){var e,n,i;return L(t),n=t.model.get("locked"),i={items:[{template:"<label>"+a.t("history:history")+"</label>"},{template:"<input id='toolbarHistory' style='width: 150px;' data-bind='value: history'/>",overflow:"never"},{type:"separator"},{type:"buttonGroup",buttons:[{text:a.t("history:actions.lock"),icon:"lock",togglable:!0,selected:n,group:"lock",primary:!0,toggle:ct.bind(null,t)},{text:a.t("history:actions.unlock"),icon:"unlock",togglable:!0,selected:!n,group:"lock",primary:!0,toggle:pt.bind(null,t)}]}]},(e=s(ft)).kendoToolBar(i),t.toolbar=e.data("kendoToolBar"),ot(t)},st=function(t){var e,n;return n=t.model.get("history"),(e=t.displayInfo[n])&&e.lock(t.model.get("locked")),null},it=function(t){var e;return e=s("#historyInput"),c.destroy(e),e.empty(),e=s("#historyGrid"),c.destroy(e),e.empty(),null},nt=function(t){var e,n;return n=t.model.get("history"),(e=t.displayInfo[n])?(e.locked=t.model.get("locked"),e.display()):it(),null},at=function(t){return rt(t),nt(t)},dt=function(t){return at(t)},$=function(t){return s("#historyRoot").localize(),F(t),null},W=function(t){var e,n,i;return e=t.model,i=c.template(C)({}),n={model:e,init:$.bind(null,t),show:dt.bind(null,t)},new c.View(i,n)},K=function(t){return null==t.view&&(t.view=W(t)),t.view},Y=function(t,e,n){var i,a,r;if(n){if(ut(t.model,e,n),t.object=n,a=t.model.get("locked"),i=j(a,n),t.displayInfo=i,!e||u.has(i,e))return r=K(t),b.display(mt,r);z()}else z()},A=function(t){var e;return null!=(e=t.query)&&e.abort(),t.query=null},tt=function(t,e,n){return U.setPageTitle("KI "+n.name),Y(t,e,n)},Z=function(t){return z()},X=function(t){return t.query=null},Q=function(t,e,n){var i;return A(t),i={id:e},t.query=s.getJSON("object.json",i).done(tt.bind(null,t,n)).fail(Z.bind(null,t)).always(X.bind(null,t)),null},H=function(t,e,n){return y.display(mt,!1),Q(t,e,n)},{init:function(){var t,e,n;return t={view:null,query:null,toolbar:null},n={title:"",id:0,type:0,history:null,locked:!0,hasHistory:function(){return!!this.get("history")}},e=c.observable(n),t.model=e,x.addRoute(D.objectHistory,H.bind(null,t))}}})}.call(this),function(){var D,S,N,x;x="object",N="metric",S="format",D="#metricGrid",define("views/data/metric/edit.metric.bucket",["jquery","lodash","i18n","kendo","site","ui","core/ui/DateUI","core/util/DateUtils","core/ui/PercentUI","core/ui/NumberUI"],function(m,d,f,b,t,e,n,i,a,r){var v,l,y,o,s,u,c,h,g,p,T,I,C,w,k,E;return s=a.PercentUI,v=n.DateUI,l=i.DateUtils,o=r.NumberUI,y=e.grid,I=function(t,e){var n,i,a,r,o,d;for(n=e.date,r=0,o=(d=t.data()).length;r<o;r++)if(a=(i=d[r]).get("date"),l.equals(a,n))return i;return null},u=function(t){var e,n,i,a;if(e=null!=(a=m(D).data("kendoGrid"))?a.dataSource:void 0)return i=t.toJSON(),(n=I(e,i))?(n.set("less5",i.less5),n.set("fifteen",i.fifteen),n.set("more15",i.more15),n.set("description",i.description)):(n={date:i.date,less5:i.less5,fifteen:i.fifteen,more15:i.more15,description:i.description},e.add(n)),e.sync(),!0},p=function(t,e,n,i){var a,r;return"p"===t[S]?(a=m("<input>").attr("id",n).attr("data-bind","value: "+i).appendTo(e),r={min:t.min,max:t.max},s.widget(a,r)):(a=m("<input>").attr("id",n).attr("data-bind","value: "+i).appendTo(e),r={format:t[S],min:t.min,max:t.max},a.kendoNumericTextBox(r))},k=function(t){var e,n,i,a,r,o;return e=m("#metricInput"),b.destroy(e),e.empty(),i={date:new Date,less5:0,fifteen:0,more15:0,description:""},n=b.observable(i),a=m("<table>").addClass("formTable").appendTo(e),o=m("<tr>").appendTo(a),r=m("<td>").appendTo(o),m("<label>").attr("for","metricDate").text(f.t("metric:fields.date")).appendTo(r),r=m("<td>").appendTo(o),m("<input>").attr("id","metricDate").attr("data-bind","value: date").appendTo(r).kendoDatePicker(),o=m("<tr>").appendTo(a),r=m("<td>").appendTo(o),m("<label>").attr("for","metricLess5").text(f.t("metric:fields.less5")).appendTo(r),r=m("<td>").appendTo(o),p(t,r,"metricLess5","less5"),o=m("<tr>").appendTo(a),r=m("<td>").appendTo(o),m("<label>").attr("for","metricFifteen").text(f.t("metric:fields.fifteen")).appendTo(r),r=m("<td>").appendTo(o),p(t,r,"metricFifteen","fifteen"),o=m("<tr>").appendTo(a),r=m("<td>").appendTo(o),m("<label>").attr("for","metricMore15").text(f.t("metric:fields.more15")).appendTo(r),r=m("<td>").appendTo(o),p(t,r,"metricMore15","more15"),o=m("<tr>").appendTo(a),r=m("<td>").appendTo(o),m("<label>").attr("for","metricDescription").text(f.t("metric:fields.description")).appendTo(r),r=m("<td>").appendTo(o),m("<textarea>").attr("id","metricDescription").addClass("k-textbox").attr("data-bind","value: description").appendTo(r),o=m("<tr>").appendTo(a),r=m("<td>").appendTo(o),r=m("<td>").appendTo(o),m("<button>").addClass("k-button").text(f.t("metric:actions.addOrUpdate")).click(u.bind(null,n)).appendTo(r),b.bind(e,n)},c=function(t,e){var n,i,a,r,o,d;for(d=[],a=0,r=e.length;a<r;a++)o=e[a],n=l.toDate(o.date),i={id:l.toJson(n),date:n,less5:o.less5,fifteen:o.fifteen,more15:o.more15,description:o.description},d.push(i);return t(d)},C=function(t,e){var n,i;return n={object:null!=(i=t[x])?i.id:void 0,metric:t[N]},m.getJSON("metric.json",n).done(c.bind(null,e.success)).fail(e.error),null},E=h=function(t,e){var n,i,a;return(i=e.data).date=l.toJson(i.date),n={type:"POST",url:"metric.json",dataType:"json",data:{object:null!=(a=t[x])?a.id:void 0,metric:t[N],data:b.stringify(i)}},m.ajax(n).done(e.success).fail(e.error)},T=function(t,e){var n,i,a,r;return t.model,(i=e.data).date=l.toJson(i.date),r={object:null!=(a=t[x])?a.id:void 0,metric:t[N],data:b.stringify(i)},n={type:"DELETE",url:"metric.json?"+m.param(r),dataType:"json"},m.ajax(n).done(e.success).fail(e.error)},g=function(t,e){var n;return"p"===(n=t[S])?s.column({field:e,title:f.t("metric:fields."+e)}):o.column({field:e,title:f.t("metric:fields."+e),format:"{0:"+n+"}"})},w=function(t){var e,n,i,a,r,o,d,l,s,u,c,p;return d=m(D),b.destroy(d),d.empty(),(e={command:["edit","destroy"],title:" ",width:"200px"}).hidden=t.locked,n=v.column({field:"date",title:f.t("metric:fields.date")}),r=g(t,"less5"),a=g(t,"fifteen"),o=g(t,"more15"),i={field:"description",title:f.t("metric:fields.description")},p={type:"number",nullable:!0},s=t.min,l=t.max,(c=null)!=s&&(null==c&&(c={}),c.min=s),null!=l&&(null==c&&(c={}),c.max=l),c&&(p.validation=c),u={dataSource:{transport:{read:C.bind(null,t),create:h.bind(null,t),update:E.bind(null,t),destroy:T.bind(null,t)},schema:{model:{id:"id",fields:{date:{type:"date",nullable:!1,editable:!1},less5:p,fifteen:p,more15:p,description:{type:"string"}}}},sort:{field:"date",dir:"desc"}},columns:[e,n,r,a,o,i],pageable:y.defaultPageable(),scrollable:!1},y.withDefaults(u),d.kendoGrid(u)},{display:function(t){return k(t),w(t),null},lock:function(t){var e,n,i,a,r,o;if(i=m(D).data("kendoGrid")){for(e=null,a=0,r=(o=i.columns).length;a<r;a++)if(n=o[a],d.has(n,"command")){e=n;break}if(e)return t?i.hideColumn(e):i.showColumn(e),!0}}}})}.call(this),function(){var E,D,S,N;N="object",S="metric",D="format",E="#metricGrid",define("views/data/metric/edit.metric.market",["jquery","lodash","i18n","kendo","ui","core/util/DateUtils","core/ui/DateUI","core/ui/PercentUI","core/ui/NumberUI"],function(m,d,f,b,t,e,n,i,a){var v,l,y,r,o,s,u,h,g,c,T,p,I,C,w,k;return r=a.NumberUI,o=i.PercentUI,v=n.DateUI,l=e.DateUtils,y=t.grid,p=function(t,e){var n,i,a,r,o,d;for(n=e.date,r=0,o=(d=t.data()).length;r<o;r++)if(a=(i=d[r]).get("date"),l.equals(a,n))return i;return null},s=function(t){var e,n,i,a;if(e=null!=(a=m(E).data("kendoGrid"))?a.dataSource:void 0)return i=t.toJSON(),(n=p(e,i))?(n.set("lower",i.lower),n.set("current",i.current),n.set("higher",i.higher),n.set("description",i.description)):(n={date:i.date,lower:i.lower,current:i.current,higher:i.higher,description:i.description},e.add(n)),e.sync(),!0},c=function(t,e,n,i){var a,r;return"p"===t[D]?(a=m("<input>").attr("id",n).attr("data-bind","value: "+i).appendTo(e),r={min:t.min,max:t.max},o.widget(a,r)):(a=m("<input>").attr("id",n).attr("data-bind","value: "+i).appendTo(e),r={format:t[D],min:t.min,max:t.max},a.kendoNumericTextBox(r))},w=function(t){var e,n,i,a,r,o;return e=m("#metricInput"),b.destroy(e),e.empty(),i={date:new Date,lower:0,current:0,higher:0,description:""},n=b.observable(i),a=m("<table>").addClass("formTable").appendTo(e),o=m("<tr>").appendTo(a),r=m("<td>").appendTo(o),m("<label>").attr("for","metricDate").text(f.t("metric:fields.date")).appendTo(r),r=m("<td>").appendTo(o),m("<input>").attr("id","metricDate").attr("data-bind","value: date").appendTo(r).kendoDatePicker(),o=m("<tr>").appendTo(a),r=m("<td>").appendTo(o),m("<label>").attr("for","metricLower").text(f.t("metric:fields.lower")).appendTo(r),r=m("<td>").appendTo(o),c(t,r,"metricLower","lower"),o=m("<tr>").appendTo(a),r=m("<td>").appendTo(o),m("<label>").attr("for","metricCurrent").text(f.t("metric:fields.current")).appendTo(r),r=m("<td>").appendTo(o),c(t,r,"metricCurrent","current"),o=m("<tr>").appendTo(a),r=m("<td>").appendTo(o),m("<label>").attr("for","metricHigher").text(f.t("metric:fields.higher")).appendTo(r),r=m("<td>").appendTo(o),c(t,r,"metricHigher","higher"),o=m("<tr>").appendTo(a),r=m("<td>").appendTo(o),m("<label>").attr("for","metricDescription").text(f.t("metric:fields.description")).appendTo(r),r=m("<td>").appendTo(o),m("<textarea>").attr("id","metricDescription").addClass("k-textbox").attr("data-bind","value: description").appendTo(r),o=m("<tr>").appendTo(a),r=m("<td>").appendTo(o),r=m("<td>").appendTo(o),m("<button>").addClass("k-button").text(f.t("metric:actions.addOrUpdate")).click(s.bind(null,n)).appendTo(r),b.bind(e,n)},u=function(t,e){var n,i,a,r,o,d;for(d=[],a=0,r=e.length;a<r;a++)o=e[a],n=l.toDate(o.date),i={id:l.toJson(n),date:n,lower:o.lower,current:o.current,higher:o.higher,description:o.description},d.push(i);return t(d)},I=function(t,e){var n,i;return n={object:null!=(i=t[N])?i.id:void 0,metric:t[S]},m.getJSON("metric.json",n).done(u.bind(null,e.success)).fail(e.error),null},k=h=function(t,e){var n,i,a;return(i=e.data).date=l.toJson(i.date),n={type:"POST",url:"metric.json",dataType:"json",data:{object:null!=(a=t[N])?a.id:void 0,metric:t[S],data:b.stringify(i)}},m.ajax(n).done(e.success).fail(e.error)},T=function(t,e){var n,i,a,r;return t.model,(i=e.data).date=l.toJson(i.date),r={object:null!=(a=t[N])?a.id:void 0,metric:t[S],data:b.stringify(i)},n={type:"DELETE",url:"metric.json?"+m.param(r),dataType:"json"},m.ajax(n).done(e.success).fail(e.error)},g=function(t,e){var n;return"p"===(n=t[D])?o.column({field:e,title:f.t("metric:fields."+e)}):r.column({field:e,title:f.t("metric:fields."+e),format:"{0:"+n+"}"})},C=function(t){var e,n,i,a,r,o,d,l,s,u,c,p;return d=m(E),b.destroy(d),d.empty(),(e={command:["edit","destroy"],title:" ",width:"200px"}).hidden=t.locked,i=v.column({field:"date",title:f.t("metric:fields.date")}),o=g(t,"lower"),n=g(t,"current"),r=g(t,"higher"),p={type:"number",nullable:!(a={field:"description",title:f.t("metric:fields.description")})},s=t.min,l=t.max,(c=null)!=s&&(null==c&&(c={}),c.min=s),null!=l&&(null==c&&(c={}),c.max=l),c&&(p.validation=c),u={dataSource:{transport:{read:I.bind(null,t),create:h.bind(null,t),update:k.bind(null,t),destroy:T.bind(null,t)},schema:{model:{id:"id",fields:{date:{type:"date",nullable:!1,editable:!1},lower:p,current:p,higher:p,description:{type:"string"}}}},sort:{field:"date",dir:"desc"}},columns:[e,i,o,n,r,a],pageable:y.defaultPageable(),scrollable:!1},y.withDefaults(u),d.kendoGrid(u)},{display:function(t){return w(t),C(t),null},lock:function(t){var e,n,i,a,r,o;if(i=m(E).data("kendoGrid")){for(e=null,a=0,r=(o=i.columns).length;a<r;a++)if(n=o[a],d.has(n,"command")){e=n;break}if(e)return t?i.hideColumn(e):i.showColumn(e),!0}}}})}.call(this),function(){var D,S,N,x;x="object",N="metric",S="format",D="#metricGrid",define("views/data/metric/edit.metric.number",["jquery","lodash","i18n","kendo","site","ui","core/util/DateUtils","core/ui/DateUI","core/ui/PercentUI","core/ui/NumberUI"],function(c,d,p,m,t,e,n,i,a,r){var f,l,b,o,s,u,v,y,h,g,T,I,C,w,k,E;return s=a.PercentUI,f=i.DateUI,l=n.DateUtils,o=r.NumberUI,b=e.grid,I=function(t,e){var n,i,a,r,o,d;for(n=e.date,r=0,o=(d=t.data()).length;r<o;r++)if(a=(i=d[r]).get("date"),l.equals(a,n))return i;return null},u=function(t){var e,n,i,a;if(e=null!=(a=c(D).data("kendoGrid"))?a.dataSource:void 0)return i=t.toJSON(),(n=I(e,i))?(n.set("value",i.value),n.set("description",i.description)):(n={date:i.date,value:i.value,description:i.description},e.add(n)),e.sync(),!0},g=function(t,e,n,i){var a,r;return"p"===t[S]?(a=c("<input>").attr("id",n).attr("data-bind","value: "+i).appendTo(e),r={min:t.min,max:t.max},s.widget(a,r)):(a=c("<input>").attr("id",n).attr("data-bind","value: "+i).appendTo(e),r={format:t[S],min:t.min,max:t.max,decimals:t.decimals},a.kendoNumericTextBox(r))},k=function(t){var e,n,i,a,r,o;return e=c("#metricInput"),m.destroy(e),e.empty(),i={date:new Date,value:0,description:""},n=m.observable(i),a=c("<table>").addClass("formTable").appendTo(e),o=c("<tr>").appendTo(a),r=c("<td>").appendTo(o),c("<label>").attr("for","metricDate").text(p.t("metric:fields.date")).appendTo(r),r=c("<td>").appendTo(o),c("<input>").attr("id","metricDate").attr("data-bind","value: date").appendTo(r).kendoDatePicker(),o=c("<tr>").appendTo(a),r=c("<td>").appendTo(o),c("<label>").attr("for","metricValue").text(p.t("metric:fields.value")).appendTo(r),r=c("<td>").appendTo(o),g(t,r,"metricValue","value"),o=c("<tr>").appendTo(a),r=c("<td>").appendTo(o),c("<label>").attr("for","metricDescription").text(p.t("metric:fields.description")).appendTo(r),r=c("<td>").appendTo(o),c("<textarea>").attr("id","metricDescription").addClass("k-textbox").attr("data-bind","value: description").appendTo(r),o=c("<tr>").appendTo(a),r=c("<td>").appendTo(o),r=c("<td>").appendTo(o),c("<button>").addClass("k-button").text(p.t("metric:actions.addOrUpdate")).click(u.bind(null,n)).appendTo(r),m.bind(e,n)},v=function(t,e){var n,i,a,r,o,d;for(d=[],a=0,r=e.length;a<r;a++)o=e[a],n=l.toDate(o.date),i={id:l.toJson(n),date:n,value:o.value,description:o.description},d.push(i);return t(d)},C=function(t,e){var n,i;return n={object:null!=(i=t[x])?i.id:void 0,metric:t[N]},c.getJSON("metric.json",n).done(v.bind(null,e.success)).fail(e.error),null},E=y=function(t,e){var n,i,a;return(i=e.data).date=l.toJson(i.date),n={type:"POST",url:"metric.json",dataType:"json",data:{object:null!=(a=t[x])?a.id:void 0,metric:t[N],data:m.stringify(i)}},c.ajax(n).done(e.success).fail(e.error)},T=function(t,e){var n,i,a,r;return t.model,(i=e.data).date=l.toJson(i.date),r={object:null!=(a=t[x])?a.id:void 0,metric:t[N],data:m.stringify(i)},n={type:"DELETE",url:"metric.json?"+c.param(r),dataType:"json"},c.ajax(n).done(e.success).fail(e.error)},h=function(t,e){var n,i;return i=t[S],n=t.decimals||null,"p"===i?s.column({field:e,title:p.t("metric:fields."+e)}):o.column({field:e,title:p.t("metric:fields."+e),format:"{0:"+i+"}",decimals:n})},w=function(t){var e,n,i,a,r,o,d,l,s,u;return r=c(D),m.destroy(r),r.empty(),(e={command:["edit","destroy"],title:" ",width:"200px"}).hidden=t.locked,n=f.column({field:"date",title:p.t("metric:fields.date")}),a=h(t,"value"),u={type:"number",nullable:!(i={field:"description",title:p.t("metric:fields.description")})},d=t.min,o=t.max,(s=null)!=d&&(null==s&&(s={}),s.min=d),null!=o&&(null==s&&(s={}),s.max=o),s&&(u.validation=s),l={dataSource:{transport:{read:C.bind(null,t),create:y.bind(null,t),update:E.bind(null,t),destroy:T.bind(null,t)},schema:{model:{id:"id",fields:{date:{type:"date",nullable:!1,editable:!1},value:u,description:{type:"string"}}}},sort:{field:"date",dir:"desc"}},columns:[e,n,a,i],pageable:b.defaultPageable(),scrollable:!1},b.withDefaults(l),r.kendoGrid(l)},{display:function(t){return k(t),w(t),null},lock:function(t){var e,n,i,a,r,o;if(i=c(D).data("kendoGrid")){for(e=null,a=0,r=(o=i.columns).length;a<r;a++)if(n=o[a],d.has(n,"command")){e=n;break}if(e)return t?i.hideColumn(e):i.showColumn(e),!0}}}})}.call(this),function(){var T,I,C;C="object",I="metric",T="#metricGrid",define("views/data/metric/edit.metric.simple",["jquery","lodash","i18n","kendo","site","ui","core/util/DateUtils","core/ui/DateUI"],function(d,l,s,u,t,e,n,i){var o,c,p,m,a,f,b,r,v,y,h,g;return o=i.DateUI,c=n.DateUtils,p=e.grid,r=function(t,e){var n,i,a,r,o,d;for(n=e.date,r=0,o=(d=t.data()).length;r<o;r++)if(a=(i=d[r]).get("date"),c.equals(a,n))return i;return null},m=function(t){var e,n,i,a;if(e=null!=(a=d(T).data("kendoGrid"))?a.dataSource:void 0)return i=t.toJSON(),(n=r(e,i))?n.set("description",i.description):(n={date:i.date,description:i.description},e.add(n)),e.sync(),!0},h=function(t){var e,n,i,a,r,o;return e=d("#metricInput"),u.destroy(e),e.empty(),i={date:new Date,description:""},n=u.observable(i),a=d("<table>").addClass("formTable").appendTo(e),o=d("<tr>").appendTo(a),r=d("<td>").appendTo(o),d("<label>").attr("for","metricDate").text(s.t("metric:fields.date")).appendTo(r),r=d("<td>").appendTo(o),d("<input>").attr("id","metricDate").attr("data-bind","value: date").appendTo(r).kendoDatePicker(),o=d("<tr>").appendTo(a),r=d("<td>").appendTo(o),d("<label>").attr("for","metricDescription").text(s.t("metric:fields.description")).appendTo(r),r=d("<td>").appendTo(o),d("<textarea>").attr("id","metricDescription").addClass("k-textbox").attr("data-bind","value: description").appendTo(r),o=d("<tr>").appendTo(a),r=d("<td>").appendTo(o),r=d("<td>").appendTo(o),d("<button>").addClass("k-button").text(s.t("metric:actions.addOrUpdate")).click(m.bind(null,n)).appendTo(r),u.bind(e,n)},a=function(t,e){var n,i,a,r,o,d;for(d=[],a=0,r=e.length;a<r;a++)o=e[a],n=c.toDate(o.date),i={id:c.toJson(n),date:n,description:o.description},d.push(i);return t(d)},v=function(t,e){var n,i;return n={object:null!=(i=t[C])?i.id:void 0,metric:t[I]},d.getJSON("metric.json",n).done(a.bind(null,e.success)).fail(e.error),null},g=f=function(t,e){var n,i,a;return(i=e.data).date=c.toJson(i.date),n={type:"POST",url:"metric.json",dataType:"json",data:{object:null!=(a=t[C])?a.id:void 0,metric:t[I],data:u.stringify(i)}},d.ajax(n).done(e.success).fail(e.error)},b=function(t,e){var n,i,a,r;return t.model,(i=e.data).date=c.toJson(i.date),r={object:null!=(a=t[C])?a.id:void 0,metric:t[I],data:u.stringify(i)},n={type:"DELETE",url:"metric.json?"+d.param(r),dataType:"json"},d.ajax(n).done(e.success).fail(e.error)},y=function(t){var e,n,i,a,r;return a=d(T),u.destroy(a),a.empty(),(e={command:["edit","destroy"],title:" ",width:"200px"}).hidden=t.locked,n=o.column({field:"date",title:s.t("metric:fields.date")}),i={field:"description",title:s.t("metric:fields.description")},r={dataSource:{transport:{read:v.bind(null,t),create:f.bind(null,t),update:g.bind(null,t),destroy:b.bind(null,t)},schema:{model:{id:"id",fields:{date:{type:"date",nullable:!1,editable:!1},description:{type:"string"}}}},sort:{field:"date",dir:"desc"}},columns:[e,n,i],pageable:p.defaultPageable(),scrollable:!1},p.withDefaults(r),a.kendoGrid(r)},{display:function(t){return h(),y(t),null},lock:function(t){var e,n,i,a,r,o;if(i=d(T).data("kendoGrid")){for(e=null,a=0,r=(o=i.columns).length;a<r;a++)if(n=o[a],l.has(n,"command")){e=n;break}if(e)return t?i.hideColumn(e):i.showColumn(e),!0}}}})}.call(this),function(){var S,N,x,R;R="object",x="metric",N="format",S="#metricGrid",define("views/data/metric/edit.metric.var",["jquery","lodash","i18n","kendo","ui","core/api/VarMethod","core/util/DateUtils","core/ui/DateUI","core/ui/PercentUI","core/ui/NumberUI"],function(l,d,s,u,t,e,n,i,a,r){var c,p,m,o,f,b,v,y,h,g,T,I,C,w,k,E,D;return o=r.NumberUI,f=a.PercentUI,c=i.DateUI,b=e.VarMethod,p=n.DateUtils,m=t.grid,C=function(t,e){var n,i,a,r,o,d;for(n=e.date,r=0,o=(d=t.data()).length;r<o;r++)if(a=(i=d[r]).get("date"),p.equals(a,n))return i;return null},v=function(t){var e,n,i,a;if(e=null!=(a=l(S).data("kendoGrid"))?a.dataSource:void 0)return i=t.toJSON(),(n=C(e,i))?(n.set("value",i.value),n.set("method",i.method),n.set("description",i.description)):(n={date:i.date,value:i.value,method:i.method,description:i.description},e.add(n)),e.sync(),!0},T=function(t,e,n,i){var a,r;return"p"===t[N]?(a=l("<input>").attr("id",n).attr("data-bind","value: "+i).appendTo(e),r={min:t.min,max:t.max},f.widget(a,r)):(a=l("<input>").attr("id",n).attr("data-bind","value: "+i).appendTo(e),r={format:t[N],min:t.min,max:t.max},a.kendoNumericTextBox(r))},E=function(t){var e,n,i,a,r,o,d;return e=l("#metricInput"),u.destroy(e),e.empty(),a={date:new Date,value:0,method:1,description:""},i=u.observable(a),r=l("<table>").addClass("formTable").appendTo(e),d=l("<tr>").appendTo(r),o=l("<td>").appendTo(d),l("<label>").attr("for","metricDate").text(s.t("metric:fields.date")).appendTo(o),o=l("<td>").appendTo(d),(n=l("<input>").attr("id","metricDate").attr("data-bind","value: date").appendTo(o)).kendoDatePicker(),d=l("<tr>").appendTo(r),o=l("<td>").appendTo(d),l("<label>").attr("for","metricValue").text(s.t("metric:fields.value")).appendTo(o),o=l("<td>").appendTo(d),T(t,o,"metricValue","value"),d=l("<tr>").appendTo(r),o=l("<td>").appendTo(d),l("<label>").attr("for","metricMethod").text(s.t("metric:fields.method")).appendTo(o),o=l("<td>").appendTo(d),n=l("<input>").attr("id","metricMethod").attr("data-bind","value: method").appendTo(o),b.widget(n),d=l("<tr>").appendTo(r),o=l("<td>").appendTo(d),l("<label>").attr("for","metricDescription").text(s.t("metric:fields.description")).appendTo(o),o=l("<td>").appendTo(d),l("<textarea>").attr("id","metricDescription").addClass("k-textbox").attr("data-bind","value: description").appendTo(o),d=l("<tr>").appendTo(r),o=l("<td>").appendTo(d),o=l("<td>").appendTo(d),l("<button>").addClass("k-button").text(s.t("metric:actions.addOrUpdate")).click(v.bind(null,i)).appendTo(o),u.bind(e,i)},y=function(t,e){var n,i,a,r,o,d;for(d=[],a=0,r=e.length;a<r;a++)o=e[a],n=p.toDate(o.date),i={id:p.toJson(n),date:n,value:o.value,method:o.method,description:o.description},d.push(i);return t(d)},w=function(t,e){var n,i;return n={object:null!=(i=t[R])?i.id:void 0,metric:t[x]},l.getJSON("metric.json",n).done(y.bind(null,e.success)).fail(e.error),null},D=h=function(t,e){var n,i,a;return(i=e.data).date=p.toJson(i.date),n={type:"POST",url:"metric.json",dataType:"json",data:{object:null!=(a=t[R])?a.id:void 0,metric:t[x],data:u.stringify(i)}},l.ajax(n).done(e.success).fail(e.error)},I=function(t,e){var n,i,a,r;return t.model,(i=e.data).date=p.toJson(i.date),r={object:null!=(a=t[R])?a.id:void 0,metric:t[x],data:u.stringify(i)},n={type:"DELETE",url:"metric.json?"+l.param(r),dataType:"json"},l.ajax(n).done(e.success).fail(e.error)},g=function(t,e){var n;return"p"===(n=t[N])?f.column({field:e,title:s.t("metric:fields."+e)}):o.column({field:e,title:s.t("metric:fields."+e),format:"{0:"+n+"}"})},k=function(t){var e,n,i,a,r,o;return e=l(S),u.destroy(e),e.empty(),o={type:"number",nullable:!1},i=t.min,n=t.max,(r=null)!=i&&(null==r&&(r={}),r.min=i),null!=n&&(null==r&&(r={}),r.max=n),r&&(o.validation=r),a={dataSource:{transport:{read:w.bind(null,t),create:h.bind(null,t),update:D.bind(null,t),destroy:I.bind(null,t)},schema:{model:{id:"id",fields:{date:{type:"date",nullable:!1,editable:!1},value:o,method:{type:"number"},description:{type:"string"}}}},sort:{field:"date",dir:"desc"}},columns:[{command:["edit","destroy"],title:" ",width:"200px",hidden:t.locked},c.column({field:"date",title:s.t("metric:fields.date")}),g(t,"value",b.column({field:"method",title:s.t("metric:fields.method")},{field:"description",title:s.t("metric:fields.description")}))],pageable:m.defaultPageable(),scrollable:!1},m.withDefaults(a),e.kendoGrid(a)},{display:function(t){return E(t),k(t),null},lock:function(t){var e,n,i,a,r,o;if(i=l(S).data("kendoGrid")){for(e=null,a=0,r=(o=i.columns).length;a<r;a++)if(n=o[a],d.has(n,"command")){e=n;break}if(e)return t?i.hideColumn(e):i.showColumn(e),!0}}}})}.call(this),function(){var N,x,R,_;_="object",R="metric",x="format",N="#metricGrid",define("views/data/metric/edit.metric.enum",["jquery","lodash","i18n","kendo","ui","core/util/EnumUtils","core/util/DateUtils","core/ui/DateUI","core/ui/PercentUI","core/ui/NumberUI"],function(b,v,y,h,t,e,n,i,a,r){var f,l,g,T,o,s,I,d,C,w,k,u,E,c,D,p,m,S;return o=r.NumberUI,s=a.PercentUI,f=i.DateUI,l=n.DateUtils,T=t.grid,g=e.EnumUtils,c=function(t,e){var n,i,a,r,o,d;for(n=e.date,i=0,o=(d=t.data()).length;i<o;i++)if(r=(a=d[i]).get("date"),l.equals(r,n))return a;return null},I=function(t,e){var n,i,a,r,o,d,l,s,u;if(n=null!=(s=b(N).data("kendoGrid"))?s.dataSource:void 0){if(l=e.toJSON(),r=c(n,l)){if(r.set("description",l.description),v.has(t,"enumObject"))for(i=t.enumObject,a=0,d=(u=g.list(i)).length;a<d;a++)o=i[u[a]],r.set(o,l[o])}else n.add(l);return n.sync(),!0}},u=function(t,e,n,i){var a,r,o,d;return a=t[x],o=n[i],"p"===a?(r=b("<input>").attr("id",o).attr("data-bind","value: "+o).appendTo(e),d={min:t.min,max:t.max},s.widget(r,d)):(r=b("<input>").attr("id",o).attr("data-bind","value: "+o).appendTo(e),d={format:t[x],min:t.min,max:t.max},r.kendoNumericTextBox(d))},C=function(t,e,n,i){var a,r,o,d;return d=b("<tr>").appendTo(e),o=b("<td>").appendTo(d),a=n[i],r=n.getName(i)||"",b("<label>").attr("for",a).text(r).appendTo(o),o=b("<td>").appendTo(d),u(t,o,n,i),null},m=function(t){var e,n,i,a,r,o,d,l,s,u,c,p,m,f;if(e=b("#metricInput"),h.destroy(e),e.empty(),s={date:new Date,description:""},v.has(t,"enumObject"))for(n=t.enumObject,a=0,o=(u=g.list(n)).length;a<o;a++)s[n[i=u[a]]]=null;if(l=h.observable(s),p=b("<table>").addClass("formTable").appendTo(e),f=b("<tr>").appendTo(p),m=b("<td>").appendTo(f),b("<label>").attr("for","metricDate").text(y.t("metric:fields.date")).appendTo(m),m=b("<td>").appendTo(f),b("<input>").attr("id","metricDate").attr("data-bind","value: date").appendTo(m).kendoDatePicker(),v.has(t,"enumObject"))for(n=t.enumObject,r=0,d=(c=g.list(n)).length;r<d;r++)i=c[r],C(t,p,n,i);return f=b("<tr>").appendTo(p),m=b("<td>").appendTo(f),b("<label>").attr("for","metricDescription").text(y.t("metric:fields.description")).appendTo(m),m=b("<td>").appendTo(f),b("<textarea>").attr("id","metricDescription").addClass("k-textbox").attr("data-bind","value: description").appendTo(m),f=b("<tr>").appendTo(p),m=b("<td>").appendTo(f),m=b("<td>").appendTo(f),b("<button>").addClass("k-button").text(y.t("metric:actions.addOrUpdate")).click(I.bind(null,t,l)).appendTo(m),h.bind(e,l)},d=function(t,e){var n,i,a,r,o,d;for(d=[],i=0,r=e.length;i<r;i++)o=e[i],n=l.toDate(o.date),a=l.toJson(n),o.date=n,o.id=a,d.push(o);return t(d)},D=function(t,e){var n,i;return n={object:null!=(i=t[_])?i.id:void 0,metric:t[R]},b.getJSON("metric.json",n).done(d.bind(null,e.success)).fail(e.error),null},S=w=function(t,e){var n,i,a;return(i=e.data).date=l.toJson(i.date),n={type:"POST",url:"metric.json",dataType:"json",data:{object:null!=(a=t[_])?a.id:void 0,metric:t[R],data:h.stringify(i)}},b.ajax(n).done(e.success).fail(e.error)},E=function(t,e){var n,i,a,r;return t.model,(i=e.data).date=l.toJson(i.date),r={object:null!=(a=t[_])?a.id:void 0,metric:t[R],data:h.stringify(i)},n={type:"DELETE",url:"metric.json?"+b.param(r),dataType:"json"},b.ajax(n).done(e.success).fail(e.error)},k=function(t,e,n){var i,a,r;return i=t[x],a=e[n],r=e.getName(n)||"","p"===i?s.column({field:a,title:r}):o.column({field:a,title:r,format:"{0:"+i+"}"})},p=function(t){var e,n,i,a,r,o,d,l,s,u,c,p,m;if(n=b(N),h.destroy(n),n.empty(),m={type:"number",nullable:!0},s=t.min,l=t.max,(p=null)!=s&&(null==p&&(p={}),p.min=s),null!=l&&(null==p&&(p={}),p.max=l),p&&(m.validation=p),r={date:{type:"date",nullable:!1,editable:!1},description:{type:"string"}},e=[{command:["edit","destroy"],title:" ",width:"200px",hidden:t.locked},f.column({field:"date",title:y.t("metric:fields.date")})],v.has(t,"enumObject"))for(i=t.enumObject,o=0,d=(c=g.list(i)).length;o<d;o++)a=c[o],e.push(k(t,i,a)),r[i[a]]=m;return e.push({field:"description",title:y.t("metric:fields.description")}),u={dataSource:{transport:{read:D.bind(null,t),create:w.bind(null,t),update:S.bind(null,t),destroy:E.bind(null,t)},schema:{model:{id:"id",fields:r}},sort:{field:"date",dir:"desc"}},columns:e,pageable:T.defaultPageable(),scrollable:!1},T.withDefaults(u),n.kendoGrid(u)},{display:function(t){return m(t),p(t),null},lock:function(t){var e,n,i,a,r,o;if(i=b(N).data("kendoGrid")){for(e=null,a=0,r=(o=i.columns).length;a<r;a++)if(n=o[a],v.has(n,"command")){e=n;break}if(e)return t?i.hideColumn(e):i.showColumn(e),!0}}}})}.call(this),define("text!templates/data/metric/metric.html",[],function(){return'<div id="metricRoot">\n    <h1 data-i18n="metric:metrics"></h1>\n    <h2 data-bind="text: title"></h2>\n    <p></p>\n\n    <div id="metricToolbar"></div>\n\n    <h3 data-i18n="metric:noMetrics" data-bind="invisible: hasMetric"></h3>\n    <div id="metricDetails" data-bind="visible: hasMetric">\n\n        <div data-bind="invisible: locked" class="k-content d-content">\n            <div id="metricInput" class="floatHalf"></div>\n            <div class="clearer"></div>\n        </div>\n\n        <div id="metricGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n</div>'}),function(){var ot,dt;dt="#metricToolbar",ot="editMetric",define("views/data/metric/edit.metric",["jquery","lodash","i18n","kendo","site","ui","core/web/WebLocation","metric/data/Metrics","core/api/MetricType","object/data/ObjectCategories","object/data/ObjectTypes","views/layout","views/not.found","views/loading","views/data/metric/edit.metric.bucket","views/data/metric/edit.metric.market","views/data/metric/edit.metric.number","views/data/metric/edit.metric.simple","views/data/metric/edit.metric.var","views/data/metric/edit.metric.enum","text!templates/data/metric/metric.html"],function(a,o,r,d,t,e,n,i,l,s,u,c,p,m,f,b,v,y,h,g,T){var I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q,z,X,Z,tt,et,nt,it,at,rt;return w=i.Metrics,C=l.MetricType,S=n.WebLocation,D=t.router,I=t.map,k=s.ObjectCategories,E=u.ObjectTypes,e.grid,H=function(){return p.display(ot,!1)},function(){return{view:null,query:null,toolbar:null}},q=function(t){var e,n;return o.has(t,"name")?t.name:(n=E.get(t.type))&&n.isOf(k.positions)?r.t("object:positions.withAsset",{asset:(null!=(e=t.asset)?e.name:void 0)||"",interpolation:{escapeValue:!1}}):n.name},function(t){var e;return null!=(e=w.get(t))?e.type:void 0},function(t){return{title:"",id:0,type:0,metric:null,locked:!0,hasMetric:function(){return!!this.get("metric")}}},it=function(t,e,n){return t.set("title",q(n)),t.set("id",n.id),t.set("type",n.type),t.set("metric",e),t.set("locked",!0)},$=function(t,e){return"metric"===e.field?Q(t):"locked"===e.field&&nt(t),null},x=function(t){return t.model.bind("change",$.bind(null,t))},L=function(t,e,n){var i;return(i={name:n.name,locked:t,object:e,metric:n.key,aifmRequired:n.aifmRequired,enumObject:n.enumObject}).display=y.display.bind(null,i),i.lock=y.lock,i},F=function(t,e,n,i){var a;return null==i&&(i=v),(a={name:n.name,locked:t,object:e,metric:n.key,format:n.format,min:n.min,max:n.max,step:n.step,aifmRequired:n.aifmRequired,enumObject:n.enumObject}).display=i.display.bind(null,a),a.lock=i.lock,a},_=function(t,e,n){return F(t,e,n,f)},A=function(t,e,n){return F(t,e,n,b)},P=function(t,e,n){return F(t,e,n,h)},O=function(t,e,n){return F(t,e,n,g)},U=function(t,e){var n,i,a,r,o,d,l;for(l=e.type,n={},i=0,a=(o=w.listByObjectType(l)).length;i<a;i++)d=null,(r=o[i]).type===C.SIMPLE?d=L(t,e,r):r.type===C.NUMBER?d=F(t,e,r):r.type===C.BUCKET?d=_(t,e,r):r.type===C.MARKET?d=A(t,e,r):r.type===C.VAR?d=P(t,e,r):r.type===C.ENUM&&(d=O(t,e,r)),d&&(n[d.metric]=d);return n},R=function(t){var e;return null!=(e=t.toolbar)&&e.destroy(),t.toolbar=null,a(dt).empty(),null},tt=function(t){var e,n;return n={autoWidth:!0,optionLabel:{name:"--",aifmRequired:!1},dataTextField:"name",dataValueField:"metric",dataSource:{data:o.values(t.displayInfo),sort:{field:"name",dir:"asc"}},valuePrimitive:!0,valueTemplate:"<span#if(aifmRequired){# class='aifmRequired'#}#>#:name#</span>",template:"<span#if(aifmRequired){# class='aifmRequired'#}#>#:name#</span>"},(e=a("#toolbarMetric")).kendoDropDownList(n),d.bind(e,t.model),null},at=function(t,e){return t.model.set("locked",!0)},rt=function(t,e){return t.model.set("locked",!1)},Z=function(t){var e,n,i;return R(t),n=t.model.get("locked"),i={items:[{template:"<label>"+r.t("metric:metric")+"</label>"},{template:"<input id='toolbarMetric' style='width: 150px;' data-bind='value: metric'/>",overflow:"never"},{type:"separator"},{type:"buttonGroup",buttons:[{text:r.t("metric:actions.lock"),icon:"lock",togglable:!0,selected:n,group:"lock",primary:!0,toggle:at.bind(null,t)},{text:r.t("metric:actions.unlock"),icon:"unlock",togglable:!0,selected:!n,group:"lock",primary:!0,toggle:rt.bind(null,t)}]}]},(e=a(dt)).kendoToolBar(i),t.toolbar=e.data("kendoToolBar"),tt(t)},nt=function(t){var e,n;return n=t.model.get("metric"),(e=t.displayInfo[n])&&e.lock(t.model.get("locked")),null},z=function(t){var e;return e=a("#metricInput"),d.destroy(e),e.empty(),e=a("#metricGrid"),d.destroy(e),e.empty(),null},Q=function(t){var e,n;return n=t.model.get("metric"),(e=t.displayInfo[n])?(e.locked=t.model.get("locked"),e.display()):z(),null},X=function(t){return Z(t),Q(t)},et=function(t){return X(t)},V=function(t){return a("#metricRoot").localize(),x(t),null},M=function(t){var e,n,i;return e=t.model,i=d.template(T)({}),n={model:e,init:V.bind(null,t),show:et.bind(null,t)},new d.View(i,n)},B=function(t){return null==t.view&&(t.view=M(t)),t.view},G=function(t,e,n){var i,a,r;if(n){if(it(t.model,e,n),t.object=n,a=t.model.get("locked"),i=U(a,n),t.displayInfo=i,!e||o.has(i,e))return r=B(t),c.display(ot,r);H()}else H()},N=function(t){var e;return null!=(e=t.query)&&e.abort(),t.query=null},K=function(t,e,n){return S.setPageTitle("Metrics "+n.name),G(t,e,n)},J=function(t){return H()},Y=function(t){return t.query=null},W=function(t,e,n){var i;return N(t),i={id:e},t.query=a.getJSON("object.json",i).done(K.bind(null,t,n)).fail(J.bind(null,t)).always(Y.bind(null,t)),null},j=function(t,e,n){return m.display(ot,!1),W(t,e,n)},{init:function(){var t,e,n;return t={view:null,query:null,toolbar:null},n={title:"",id:0,type:0,metric:null,locked:!0,hasMetric:function(){return!!this.get("metric")}},e=d.observable(n),t.model=e,D.addRoute(I.objectMetric,j.bind(null,t))}}})}.call(this),define("text!templates/data/history/subscription.edit.window.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="date" data-i18n="history:subscriptions.date"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="date" data-role="datepicker" data-bind="value: date" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="fundShare" data-i18n="history:subscriptions.fundShare"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="fundShare" data-bind="value: fundShare" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="agent" data-i18n="history:subscriptions.agent"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="agent" data-role="domossellside" data-bind="value: agent" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="quantity" data-i18n="history:subscriptions.quantity"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="quantity" data-role="numerictextbox" data-bind="value: quantity" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="amount" >#:commitmentLabel#</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="amount" data-role="numerictextbox" data-bind="value: amount" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="fee" data-i18n="history:subscriptions.fee"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="fee"  data-role="numerictextbox" data-bind="value: fee" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="currency" data-i18n="history:subscriptions.currency"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="currency" data-role="domoscurrency" data-bind="value: currency" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="investorEntity" data-i18n="history:subscriptions.investor"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="investorEntity" data-bind="value: investorEntity" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="closingDate" data-i18n="history:subscriptions.closing"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input\tid="closingDate"\n\t\t\t\t\t\tdata-role="dropdownlist"\n\t\t\t\t\t\tdata-bind="value: closingDate, source: closingDates"\n\t\t\t\t\t\tdata-value-field="id"\n\t\t\t\t\t\tdata-text-field="name"\n\t\t\t\t\t\tdata-value-primitive="true"\n\t\t\t\t\t\tdata-option-label="--"\n\t\t\t\t\t\tdata-auto-width="true"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="comments" data-i18n="history:subscriptions.comments"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="comments" class="k-textbox" type="text" data-bind="value: comments" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="unavailabilityInYears" data-i18n="history:subscriptions.unavailabilityInYears"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="unavailabilityInYears" data-role="numerictextbox" data-bind="value: unavailabilityInYears" />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t</table>\n\n\t<div class="formWindowButtons">\n\t\t<button id="okClickId" class="k-primary" data-role="button" data-icon="check" data-bind="click: okClick, enabled: isValid">OK</button>\n\t\t<button data-role="button" data-icon="cancel" data-bind="click: cancelClick">Cancel</button>\n\t</div>\n</div>'}),define("history/view/VehicleSubscriptionEditWindow",["require","exports","i18n","lodash","text!templates/data/history/subscription.edit.window.html","core/data/DObservableBuilder","object/ui/VehicleUI","object/ui/EntityInvestorUI"],function(t,e,y,h,g,T,I,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VehicleSubscriptionEditWindow=void 0;var a="#investorEntity",C="#fundShare";function r(c,p,m,f){var b=!0,v=!0;return new Promise(function(t,e){var n,i,a=p?y.I18N.t("history:subscriptions.commitment"):y.I18N.t("history:subscriptions.amount"),r=kendo.template(g)({commitmentLabel:a}),d=$("<div>").addClass("formWindow").appendTo($(document.body));d.html(r),n=c,i=d.find(C),I.VehicleUI.with(n).fundShares.widget(i),w(d,f.fundShare);d.kendoWindow({modal:!0,width:400,minWidth:300,visible:!1});var o,l=d.data("kendoWindow");l.bind("close",function(){return kendo.destroy(d),d.remove(),t(o),!0});var s=T.DObservableBuilder.of(f).add("isValid",function(t){var e=!1,n=t.get("date"),i=t.get("fundShare"),a=t.get("quantity");e=!!n&&!!i&&!!a;var r=t.get("investorEntity");return 0===t.get("id")&&(e=e&&!!r),!!e}).add("closingDates",function(){return h.chain(m).map(function(t){return{id:t.closingDate,name:kendo.toString(t.closingDate,"d")}}).value()}).add("okClick",function(t){o=t.toJson(),l.close()}).add("cancelClick",function(t){o=void 0,l.close()}).build();s.bindChange(function(t,e){if("fundShare"===e){var n=t.get("fundShare");w(d,n)}var i,a;if("quantity"===e&&b&&p&&null!==(a=(i=t.get("fundShare"))?i.quotity:null)){var r=t.get("quantity");v=!1,t.set("amount",a*r)}if("amount"===e&&v&&p&&(a=(i=t.get("fundShare"))?i.quotity:null)){var o=t.get("amount");v=!0,t.set("quantity",o/a)}v=b=!0}),y.I18N.localize(d),s.bind(d),l.title("Edit").open().center();var u=$("#closingDate").data("kendoDropDownList");f.closingDate&&u.text(kendo.toString(f.closingDate,"d"))})}function w(t,e){var n=t.find(a);e?i.EntityInvestorUI.with(e.id).entityInvestorIds.widget(n):i.EntityInvestorUI.without().widget(n)}var n=function(){function t(){}return t.open=function(t,e,n,i,a){return i||(i={id:0,vehicle:0,date:new Date,amount:0,name:null,currency:a,quantity:0,fee:0,comments:"",update:0,commitment:null,closingDate:null,reference:null,investorEntity:null,unavailabilityInYears:0,fundShare:null,agent:null}),r(t,e,n,i)},t}();e.VehicleSubscriptionEditWindow=n}),define("history/repository/SubscriptionRepository",["require","exports","lodash","core/web/WebHttp"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SubscriptionRepository=void 0;var a=function(){function t(){}return t.list=function(t,e){return i.WebHttp.getJson("history/subscription/list.json",{object:t},e)},t.save=function(t,e){var n=JSON.stringify(t);return i.WebHttp.postJson("history/subscription.json",{data:n},e)},t.destroy=function(t,e){return t=n.isNumber(t)?t:t.id,i.WebHttp.destroyJson("history/subscription.json",{id:t},e)},t}();e.SubscriptionRepository=a}),define("audit/utils/AuditTrailUtils",["require","exports","audit/web/AuditTrailMap","i18n"],function(t,e,o,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AuditTrailUtils=void 0;var i=function(){function t(){}return t.auditTrailClick=function(t,e){var n=t.select();if(0<n.length){var i=t.dataItem(n);window.location.href=o.AuditTrailMap.auditTrail(i.id,i.name,e)}},t.kpiObjectAuditTrailClick=function(t,e){var n=t.select();if(0<n.length&&e.selectedKpi){var i=t.dataItem(n);window.location.href=o.AuditTrailMap.auditTrailKpiObject(e.objectId,e.selectedKpi.id,i.year,i.period,e.objectTitle)}},t.auditBusinessObjectTrailClick=function(t,e,n,i){var a=t.select();if(0<a.length){var r=t.dataItem(a);window.location.href=o.AuditTrailMap.auditTrail(r.id,e,i,n)}},t.getToolbarCaption=function(){return n.I18N.t("ui:grid.toolbar.auditTrail")},t.AUDIT_TRAIL_ICON="k-icon k-i-track-changes",t}();e.AuditTrailUtils=i}),define("object/ui/SellSideUI",["require","exports","object/repository/ObjectRepository","./ObjectUtilsUI"],function(t,e,n,i){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.SellSideUI=void 0,e.SellSideUI={widget:(a=i.ObjectUtilsUI.create("DomosSellSide",n.ObjectRepository.fetchSellSideIdentifiables)).widget,column:a.column}}),define("history/view/VehicleSubscriptionGrid",["require","exports","core/ui/grid/GridToolbar","./VehicleSubscriptionEditWindow","core/util/Logger","core/util/ObservableUtils","core/ui/Confirmation","lodash","i18n","core/ui/DateUI","object/ui/VehicleUI","core/ui/NumberUI","basic/ui/CurrencyUI","object/ui/EntityInvestorUI","core/ui/IntegerUI","core/ui/grid/GridUtils","core/ui/grid/column/ColumnUtils","core/api/ShareIssuingType","history/repository/SubscriptionRepository","audit/utils/AuditTrailUtils","audit/data/StandardAuditTrailTable","object/ui/SellSideUI"],function(t,e,p,r,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VehicleSubscriptionGrid=void 0;var _=kendo.guid(),O="ui:grid.actionsClick",U=kendo.guid(),A=kendo.guid();function F(t,e,n,i,a){return r.VehicleSubscriptionEditWindow.open(t,e,n,i,a)}function L(t,e){var n,i,a,r,o=null,d=e?e.select():null;0<d.length&&(o=e.dataItem(d).toJSON()),i=o,(n=t).shareIssuing===D.ShareIssuingType.WITHOUT_CAPITAL_CALL?n.set("noSelected",!1):i&&i.id?(n.set("hasSubscription",!0),n.set("noSelected",!1),n.set("currentSubscriptionId",i.id),n.set("investorEntity",i.investorEntity)):(n.set("hasSubscription",!1),n.set("noSelected",!0),n.set("currentSubscriptionId",null)),a=t,(r=o)&&r.id?(a.set("showPurchaseDistribution",!0),a.set("currentSubscriptionId",r.id)):a.set("showPurchaseDistribution",!1)}var n=function(){function t(){}return t.createSubsriptionGrid=function(r,n){var t,o=n.get("objectId"),d=n.get("objectCurrency"),l=n.get("closings"),e=n.get("shareIssuing"),s=!D.ShareIssuingType.withOneOrWithoutCapitalCall(e);t=s?y.I18N.t("history:subscriptions.commitment"):y.I18N.t("history:subscriptions.amount"),kendo.destroy(r),r.empty();var i=kendo.data.Model.define({id:"id",fields:{id:{type:"number"},vehicle:{type:"number",editable:!1,defaultValue:o},fundShare:{nullable:!0},date:{type:"date",validation:{required:!0}},quantity:{type:"number",validation:{required:!0}},amount:{type:"number",validation:{required:!0}},currency:{type:"number",defaultValue:d,validation:{required:!0}},investorEntity:{nullable:!0},agent:{nullable:!0},fee:{type:"number"},comments:{type:"string",nullable:!0},closingDate:{type:"date",defaultValue:null},unavailabilityInYears:{type:"number",defaultValue:0,validation:{required:!0,min:0}},reference:{type:"string",nullable:!0,editable:!1}},investorEntityName:function(){return f.ObservableUtils.get(this,"investorEntity.name")||""},fundShareName:function(){return f.ObservableUtils.get(this,"fundShare.name")||""},agentName:function(){return f.ObservableUtils.get(this,"agent.name")||""}}),a=(new p.GridToolbar).addClick(y.I18N.t(O+".add.text"),p.GridToolbar.ICON_ADD,function(){return e=o,t=s,n=l,i=d,void((a=r.data("kendoGrid"))&&F(e,t,n,null,i).then(function(t){t&&(delete t.id,e&&(t.vehicle=e),a.dataSource.add(t),a.dataSource.sync())}).catch(function(t){return m.Logger.error(t)}));var e,t,n,i,a}).addClick(y.I18N.t(O+".edit.text"),p.GridToolbar.ICON_EDIT,function(){return function(t,e,n,i){var a=t.data("kendoGrid");if(a){var r=a.select();if(0<r.length){var o=a.dataItem(r);F(e,n,i,o.toJSON()).then(function(t){t&&(f.ObservableUtils.update(o,t),a.dataSource.sync())}).catch(function(t){return m.Logger.error(t)})}}}(r,o,s,l)},U).addClick(y.I18N.t(O+".delete.text"),p.GridToolbar.ICON_DELETE,function(){return function(t){var e=t.data("kendoGrid"),n=e.select();if(0<n.length){var i=e.dataItem(n);if(!i)return;b.Confirmation.confirmDelete(y.I18N.t(O+".delete.confirmation")).then(function(t){t&&(e.dataSource.remove(i),e.dataSource.sync())}).catch(function(t){return m.Logger.error(t)})}}(r)},A).addClick(N.AuditTrailUtils.getToolbarCaption(),N.AuditTrailUtils.AUDIT_TRAIL_ICON,function(){var t=r.data("kendoGrid");N.AuditTrailUtils.auditBusinessObjectTrailClick(t,n.get("objectName"),n.get("objectId"),x.StandardAuditTrailTable.SUBSCRIPTION)},_),u=function(e){var t=f.ObservableUtils.unpack(e.data);S.SubscriptionRepository.save(t).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})},c={dataSource:{transport:{create:u,read:function(e){S.SubscriptionRepository.list(o).then(function(t){return v.map(t,function(t){return new i(t)})}).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})},update:u,destroy:function(e){var t=f.ObservableUtils.unpack(e.data);S.SubscriptionRepository.destroy(t).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})}},schema:{model:i},sort:{field:"date",dir:"desc"}},columns:[h.DateUI.column({field:"date",title:y.I18N.t("history:subscriptions.date")}),g.VehicleUI.with(o).fundShares.column({field:"fundShare",title:y.I18N.t("history:subscriptions.fundShare")}),T.NumberUI.column({field:"quantity",title:y.I18N.t("history:subscriptions.quantity")}),T.NumberUI.column({field:"amount",title:t}),T.NumberUI.column({field:"fee",title:y.I18N.t("history:subscriptions.fee")}),I.CurrencyUI.column({field:"currency",title:y.I18N.t("history:subscriptions.currency")}),C.EntityInvestorUI.column({field:"investorEntity",title:y.I18N.t("history:subscriptions.investor")}),R.SellSideUI.column({field:"agent",title:y.I18N.t("history:subscriptions.agent")}),h.DateUI.column({field:"closingDate",title:y.I18N.t("history:subscriptions.closing")}),w.IntegerUI.column({field:"unavailabilityInYears",title:y.I18N.t("history:subscriptions.unavailabilityInYears")}),{field:"comments",title:y.I18N.t("history:subscriptions.comments")},{field:"reference",title:y.I18N.t("history:subscriptions.reference")}],columnMenuInit:function(t){E.ColumnUtils.columnMenuInit(t)},columnMenuOpen:function(t){var e=t.container;if(e){var n=e.children().data("kendoMenu");n.open(n.element.children()[3])}},scrollable:!0,pageable:k.GridUtils.defaultPageable(),height:500,editable:!1,change:function(t){var e=t.sender.element.find("#"+_);k.GridUtils.onRowSelectChange(t.sender,[$("#"+A),$("#"+U),e]),L(n,t.sender)},dataBound:function(t){var e=t.sender.element.find("#"+_);k.GridUtils.onRowSelectChange(t.sender,[$("#"+A),$("#"+U),e]),L(n,t.sender)}};c.toolbar=a.template(),k.GridUtils.withDefaults(c),r.kendoGrid(c),a.bind(r),k.GridUtils.resetSort(r,"date")},t}();e.VehicleSubscriptionGrid=n}),define("text!templates/data/history/distributionSplit.window.html",[],function(){return'<div>\n\t<div id="splitGrid" class="floatingGrid_1600_px"></div>\n</div>'}),define("history/repository/DistributionSplitRepository",["require","exports","core/web/WebHttp","lodash"],function(t,e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DistributionSplitRepository=void 0;var a=function(){function t(){}return t.listByDistribution=function(t,e){return i.WebHttp.getJson("history/distributionSplit/list.json",{distributionId:t},e)},t.listByVehicle=function(t,e){return i.WebHttp.getJson("/history/distributionSplit/list.json",{vehicleId:t},e)},t.save=function(t,e){var n=JSON.stringify(t);return i.WebHttp.postJson("history/distributionSplit.json",{data:n},e)},t.destroy=function(t,e){return t=n.isNumber(t)?t:t.id,i.WebHttp.destroyJson("history/distributionSplit.json",{id:t},e)},t}();e.DistributionSplitRepository=a}),define("object/ui/FundOperationUI",["require","exports","./ObjectUtilsUI","object/repository/ObjectRepository"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FundOperationUI=void 0,e.FundOperationUI=n.ObjectUtilsUI.create("DomosFundOperation",i.ObjectRepository.fetchFundOperationIdentifiables)}),define("history/view/DistributionSplitGrid",["require","exports","core/util/ObservableUtils","i18n","core/ui/grid/GridUtils","core/api/FeeType","basic/ui/CurrencyUI","lodash","history/data/DistributionSplitType","history/repository/DistributionSplitRepository","audit/utils/AuditTrailUtils","audit/data/StandardAuditTrailTable","core/ui/grid/column/ColumnUtils","core/ui/grid/column/ColumnStyle","core/ui/grid/GridFooter","core/ui/NumberUI","object/ui/FundOperationUI"],function(t,e,o,d,l,s,u,c,p,m,f,b,v,y,h,g,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DistributionSplitGrid=void 0;var I=kendo.guid(),C=".k-grid-"+I;var n=function(){function t(){}return t.setup=function(e,t){var n,i,a,r={dataSource:(n=t,i=kendo.data.Model.define({id:"id",fields:{id:{type:"number"},vehicle:{type:"number",editable:!1,defaultValue:n.vehicle},distributionId:{type:"number",editable:!1,defaultValue:n.id},amount:{type:"number"},currency:{type:"number",defaultValue:n.currency,editable:!1},type:{type:"number",defaultValue:p.DistributionSplitType.CAPITAL_RETURN,validation:{required:!0}},comment:{type:"string",nullable:!0},reference:{type:"string",nullable:!0},feeType:{type:"number",nullable:!0},disinvestment:{nullable:!0}},disinvestmentName:function(){return o.ObservableUtils.get(this,"disinvestment.name")||""}}),a=function(e){var t=o.ObservableUtils.unpack(e.data);m.DistributionSplitRepository.save(t).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})},{transport:{create:a,read:function(e){m.DistributionSplitRepository.listByDistribution(n.id).then(function(t){return c.map(t,function(t){return new i(t)})}).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})},update:a,destroy:function(e){var t=o.ObservableUtils.unpack(e.data);m.DistributionSplitRepository.destroy(t).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})}},schema:{model:i},aggregate:[{field:"amount",aggregate:"sum"}],sort:{field:"date",dir:"desc"}}),columns:[v.ColumnUtils.addStyle({command:["edit","destroy"],width:180,footerTemplate:d.I18N.t("history:distributionSplit.footerTemplate.totalAmount")},y.ColumnStyle.CENTER_ALIGNED),g.NumberUI.column({field:"amount",title:d.I18N.t("history:distributionSplit.amount"),width:200,footerTemplate:h.GridFooter.footer("amount","sum","{0:n2}")}),u.CurrencyUI.column({field:"currency",title:d.I18N.t("history:distributionSplit.currency"),width:100}),p.DistributionSplitType.column({field:"type",title:d.I18N.t("history:distributionSplit.type"),width:200}),{field:"reference",title:d.I18N.t("history:distributionSplit.reference"),width:140},s.FeeType.column({field:"feeType",title:d.I18N.t("history:distributionSplit.feeType"),width:120}),T.FundOperationUI.column({field:"disinvestment",title:d.I18N.t("history:distributionSplit.disinvestment"),width:140}),{field:"comment",title:d.I18N.t("history:distributionSplit.comment"),width:300}],pageable:l.GridUtils.defaultPageable(),height:500,toolbar:[{name:"create"},{name:I,text:d.I18N.t("data:audit.title"),iconClass:"k-icon k-i-track-changes"},{name:"excel"}],change:function(t){var e=t.sender.element.find(C);l.GridUtils.onRowSelectChange(t.sender,[e])},dataBound:function(t){var e=t.sender.element.find(C);l.GridUtils.onRowSelectChange(t.sender,[e])}};return l.GridUtils.withDefaults(r),e.kendoGrid(r),e.find(C).click(function(){var t=e.data("kendoGrid");f.AuditTrailUtils.auditTrailClick(t,b.StandardAuditTrailTable.DISTRIBUTION_SPLIT)}),e.data("kendoGrid")},t}();e.DistributionSplitGrid=n}),define("history/repository/CapitalCallSplitRepository",["require","exports","core/web/WebHttp","lodash"],function(t,e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CapitalCallSplitRepository=void 0;var a=function(){function t(){}return t.listByCapitalCall=function(t,e){return i.WebHttp.getJson("history/capitalCallSplit/list.json",{capitalCallId:t},e)},t.listByVehicle=function(t,e){return i.WebHttp.getJson("history/capitalCallSplit/list.json",{vehicleId:t},e)},t.save=function(t,e){var n=JSON.stringify(t);return i.WebHttp.postJson("history/capitalCallSplit.json",{data:n},e)},t.destroy=function(t,e){return t=n.isNumber(t)?t:t.id,i.WebHttp.destroyJson("history/capitalCallSplit.json",{id:t},e)},t}();e.CapitalCallSplitRepository=a}),define("history/view/CapitalCallSplitGrid",["require","exports","core/util/ObservableUtils","i18n","history/repository/CapitalCallSplitRepository","core/ui/grid/GridUtils","history/data/CapitalCallSplitType","core/api/FeeType","basic/ui/CurrencyUI","lodash","audit/utils/AuditTrailUtils","audit/data/StandardAuditTrailTable","core/ui/grid/column/ColumnUtils","core/ui/grid/column/ColumnStyle","core/ui/grid/GridFooter","core/ui/NumberUI","object/ui/FundOperationUI"],function(t,e,o,d,l,s,u,c,p,m,f,b,v,y,h,g,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CapitalCallSplitGrid=void 0;var I=kendo.guid(),C=".k-grid-"+I;var n=function(){function t(){}return t.setup=function(e,t){var n,i,a,r={dataSource:(n=t,i=kendo.data.Model.define({id:"id",fields:{id:{type:"number"},vehicle:{type:"number",editable:!1,defaultValue:n.vehicle},capitalCallId:{type:"number",editable:!1,defaultValue:n.id},amount:{type:"number"},currency:{type:"number",defaultValue:n.currency,editable:!1},type:{type:"number",defaultValue:u.CapitalCallSplitType.INVESTMENT,validation:{required:!0}},comment:{type:"string",nullable:!0},reference:{type:"string",nullable:!0},feeType:{type:"number",nullable:!0},investment:{nullable:!0}},investmentName:function(){return o.ObservableUtils.get(this,"investment.name")||""}}),a=function(e){var t=o.ObservableUtils.unpack(e.data);l.CapitalCallSplitRepository.save(t).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})},{transport:{create:a,read:function(e){l.CapitalCallSplitRepository.listByCapitalCall(n.id).then(function(t){return m.map(t,function(t){return new i(t)})}).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})},update:a,destroy:function(e){var t=o.ObservableUtils.unpack(e.data);l.CapitalCallSplitRepository.destroy(t).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})}},schema:{model:i},aggregate:[{field:"amount",aggregate:"sum"}],sort:{field:"date",dir:"desc"}}),columns:[v.ColumnUtils.addStyle({command:["edit","destroy"],width:180,footerTemplate:d.I18N.t("history:capitalCallSplit.footerTemplate.totalAmount")},y.ColumnStyle.CENTER_ALIGNED),g.NumberUI.column({field:"amount",title:d.I18N.t("history:capitalCallSplit.amount"),width:200,footerTemplate:h.GridFooter.footer("amount","sum","{0:n2}")}),p.CurrencyUI.column({field:"currency",title:d.I18N.t("history:capitalCallSplit.currency"),width:100}),u.CapitalCallSplitType.column({field:"type",title:d.I18N.t("history:capitalCallSplit.type"),width:200}),{field:"reference",title:d.I18N.t("history:capitalCallSplit.reference"),width:140},c.FeeType.column({field:"feeType",title:d.I18N.t("history:capitalCallSplit.feeType"),width:120}),T.FundOperationUI.column({field:"investment",title:d.I18N.t("history:capitalCallSplit.investment"),width:140}),{field:"comment",title:d.I18N.t("history:capitalCallSplit.comment"),width:300}],pageable:s.GridUtils.defaultPageable(),height:500,toolbar:[{name:"create"},{name:I,text:d.I18N.t("data:audit.title"),iconClass:"k-icon k-i-track-changes"},{name:"excel"}],change:function(t){var e=t.sender.element.find(C);s.GridUtils.onRowSelectChange(t.sender,[e])},dataBound:function(t){var e=t.sender.element.find(C);s.GridUtils.onRowSelectChange(t.sender,[e])}};return s.GridUtils.withDefaults(r),e.kendoGrid(r),e.find(C).click(function(){var t=e.data("kendoGrid");f.AuditTrailUtils.auditTrailClick(t,b.StandardAuditTrailTable.CAPITAL_CALL_SPLIT)}),e.data("kendoGrid")},t}();e.CapitalCallSplitGrid=n}),define("history/data/SplitType",["require","exports"],function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.SplitType=void 0,(n=e.SplitType||(e.SplitType={}))[n.CAPITAL_CALL=1]="CAPITAL_CALL",n[n.DISTRIBUTION=2]="DISTRIBUTION"}),define("history/view/SplitWindow",["require","exports","i18n","text!templates/data/history/distributionSplit.window.html","./DistributionSplitGrid","./CapitalCallSplitGrid","history/data/SplitType"],function(t,e,r,o,d,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SplitWindow=void 0;var n=function(){function t(){}return t.open=function(t,e){var n=kendo.template(o)({}),i=$("<div>").addClass("formWindow").appendTo($(document.body));i.html(n);i.kendoWindow({modal:!0,width:1700,minWidth:300,visible:!1});var a=i.data("kendoWindow");switch(e){case s.SplitType.CAPITAL_CALL:l.CapitalCallSplitGrid.setup(a.element.find("#splitGrid"),t),a.title(r.I18N.t("history:capitalCallSplit.window.title"));break;case s.SplitType.DISTRIBUTION:d.DistributionSplitGrid.setup(a.element.find("#splitGrid"),t),a.title(r.I18N.t("history:distributionSplit.window.title"))}a.bind("close",function(){return kendo.destroy(i),i.remove(),!0}),r.I18N.localize(i),a.open().center()},t}();e.SplitWindow=n}),function(){var Z;Z="#capitalCallGrid",define("views/data/history/subscription/capital.call",["jquery","lodash","i18n","kendo","ui","core/util/ObservableUtils","object/ui/EntityInvestorUI","basic/ui/CurrencyUI","core/api/CapitalCallReason","core/ui/DateUI","core/ui/NumberUI","core/ui/grid/GridUtils","object/repository/ObjectRepository","core/ui/grid/column/ColumnUtils","core/ui/grid/column/ColumnStyle","history/view/SplitWindow","history/data/SplitType","audit/data/StandardAuditTrailTable","audit/web/AuditTrailMap","audit/utils/AuditTrailUtils","lp/data/CapitalCallType"],function(a,t,r,i,e,n,o,d,l,s,u,c,p,m,f,b,v,y,h,g,T){var I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q,z,X;return L=u.NumberUI,O=s.DateUI,M=n.ObservableUtils,U=o.EntityInvestorUI,_=d.CurrencyUI,F=e.grid,S=l.CapitalCallReason,A=c.GridUtils,P=p.ObjectRepository,R=m.ColumnUtils,x=f.ColumnStyle,G=b.SplitWindow,j=v.SplitType,D=i.guid(),E=".k-grid-"+D,q=y.StandardAuditTrailTable,w=h.AuditTrailMap,k=g.AuditTrailUtils,C=i.guid(),I=".k-grid-"+C,N=T.CapitalCallType,Q=function(t,e){var n;return n={subscription:t},a.getJSON("history/capital/list.json",n).done(e.success).fail(e.error)},X=B=function(t,e){var n;return n={type:"POST",url:"history/capital.json",dataType:"json",data:{data:i.stringify(e.data)}},a.ajax(n).done(e.success).fail(e.error),null},H=function(t,e){var n,i;return i={id:e.data.id},n={type:"DELETE",url:"history/capital.json?"+a.param(i),dataType:"json"},a.ajax(n).done(e.success).fail(e.error)},K=function(){var t;return null!=(t=a(Z).data("kendoGrid"))&&t.cancelChanges(),!0},z=function(t){var e,n,i;if(n=t.data("kendoGrid"))return 0<n.select().length&&(i=n.select(),e=n.dataItem(i),G.open(e,j.CAPITAL_CALL)),null},J=function(t,e){var n,i,a,r,o,d,l;return i=(o=(r=e.sender).element).find(E),n=o.find(I),l="javascript:void(0)",F.onRowSelectChange(r,[i,n]),0<r.select().length&&(d=r.select(),a=r.dataItem(d),l=w.auditTrail(a.id,t.get("objectName"),q.CAPITAL_CALL,t.get("objectId"))),n.attr("href",l),null},V=function(t,e){var n;return e?(n={transport:{read:Q.bind(null,e),create:B.bind(null,e),update:X.bind(null,e),destroy:H.bind(null,e)},schema:{model:{id:"id",fields:{id:{type:"number"},vehicle:{type:"number",defaultValue:t.get("objectId"),editable:!1},lp:{type:"number",defaultValue:N.COMMITMENT,editable:!1},subscription:{type:"number",defaultValue:e,editable:!1},date:{type:"date",validation:{required:!0}},quantity:{type:"number",validation:{required:!0}},amount:{type:"number",validation:{required:!0}},currency:{type:"number",defaultValue:t.get("objectCurrency")||978,validation:{required:!0}},comments:{type:"string"},closingDate:{type:"date"},reason:{type:"number",defaultValue:S.OTHER},partnerEntity:{nullable:!0},premium:{type:"number",defaultValue:0},fees:{type:"number",defaultValue:0},fromReserve:{type:"number",defaultValue:0},capitalCallMethodology:{type:"number",defaultValue:1},paidInKind:{type:"boolean",defaultValue:!1},ownershipDate:{type:"date",nullable:!0},reference:{type:"string",editable:!1}},partnerEntityName:function(){return M.get(this,"partnerEntity.name")}}},sort:{field:"date",dir:"desc"},error:K},new i.data.DataSource(n)):new i.data.DataSource({data:[]})},W=function(i,t){var e,n;return kendo.destroy(a(Z)),a(Z).empty(),n={dataSource:V(i,t),columns:[{command:["edit","destroy"],title:" ",width:"230px"},O.column({field:"date",title:r.t("history:capitalCalls.date"),width:"100px"}),U.withCommitment(t).column({field:"partnerEntity",title:r.t("history:capitalCalls.partner"),width:"200px"}),_.column({field:"currency",title:r.t("history:capitalCalls.currency"),width:"100px"}),L.column({field:"amount",title:r.t("history:capitalCalls.amount"),width:"100px"}),L.column({field:"quantity",title:r.t("history:capitalCalls.quantity"),width:"100px"}),L.column({field:"premium",title:r.t("history:capitalCalls.premium"),width:"100px"}),L.column({field:"fees",title:r.t("history:capitalCalls.fees"),width:"100px"}),L.column({field:"fromReserve",title:r.t("history:capitalCalls.fromReserve"),width:"100px"}),S.column({field:"reason",title:r.t("history:capitalCalls.reason"),width:"100px"}),O.column({field:"closingDate",title:r.t("history:capitalCalls.closingDate"),width:"100px"}),{field:"comments",title:r.t("history:capitalCalls.comments"),width:"100px"},R.addStyle({field:"paidInKind",title:r.t("history:capitalCalls.paidInKind"),template:"<input type='checkbox' class='k-checkbox' #= (paidInKind == true) ? checked ='checked' : '' # disabled/><label class='k-checkbox-label'>&nbsp;</label>",width:"100px"},x.CENTER_ALIGNED),O.column({field:"ownershipDate",title:r.t("history:capitalCalls.ownershipDate"),width:"100px"}),{field:"reference",title:r.t("history:capitalCalls.reference"),width:"100px"}],toolbar:[{name:"create"},{name:D,text:r.t("history:capitalCalls.action.split"),iconClass:"k-icon k-i-zoom"},{name:C,text:k.getToolbarCaption(),iconClass:k.AUDIT_TRAIL_ICON}],pageable:A.defaultPageable(),scrollable:!0,height:400,change:function(t){return J(i,t)},dataBound:function(t){return J(i,t)},edit:function(e){var n;return(n=i.get("investorEntity"))&&P.fetchInvestorByCommitmentIdentifiables(t).then(function(t){if(1===t.length&&t[0].id===n.id)return e.model.set("partnerEntity",n)}),null}},F.withDefaults(n),(e=a(Z)).kendoGrid(n),a(E).click(function(){return z(e)}),F.resetSort(e,"date"),null},Y=function(t,e){return W(t,e),null},$=function(t,e){var n;return"currentSubscriptionId"===e.field&&(n=t.get("currentSubscriptionId"),Y(t,n)),!0},{init:function(t){return t.bind("change",$.bind(null,t))}}})}.call(this),function(){var L;L="#purchaseGrid",define("views/data/history/subscription/purchase",["jquery","lodash","i18n","kendo","ui","basic/ui/CurrencyUI","core/util/ObservableUtils","object/ui/EntityInvestorUI","core/ui/DateUI","core/ui/NumberUI","core/ui/grid/GridUtils","audit/data/StandardAuditTrailTable","audit/web/AuditTrailMap","audit/utils/AuditTrailUtils"],function(a,t,r,i,e,n,o,d,l,s,u,c,p,m){var f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F;return w=s.NumberUI,g=l.DateUI,k=o.ObservableUtils,T=d.EntityInvestorUI,h=n.CurrencyUI,C=e.grid,I=u.GridUtils,E=c.StandardAuditTrailTable,v=p.AuditTrailMap,y=m.AuditTrailUtils,b=i.guid(),f=".k-grid-"+b,A=function(t,e){var n;return n={subscription:t},a.getJSON("history/purchase/list.json",n).done(e.success).fail(e.error)},F=D=function(t,e){var n;return n={type:"POST",url:"history/purchase.json",dataType:"json",data:{data:i.stringify(e.data)}},a.ajax(n).done(e.success).fail(e.error),null},x=function(t,e){var n,i;return i={id:e.data.id},n={type:"DELETE",url:"history/purchase.json?"+a.param(i),dataType:"json"},a.ajax(n).done(e.success).fail(e.error)},O=function(){var t;return null!=(t=a(L).data("kendoGrid"))&&t.cancelChanges(),!0},S=function(t,e){var n;return e?(n={transport:{read:A.bind(null,e),create:D.bind(null,e),update:F.bind(null,e),destroy:x.bind(null,e)},schema:{model:{id:"id",fields:{id:{type:"number"},subscription:{type:"number",defaultValue:e,editable:!1},date:{type:"date",validation:{required:!0}},quantity:{type:"number",validation:{required:!0}},purchaserVehicle:{nullable:!0,validation:{required:!0}},sellerVehicle:{nullable:!0,validation:{required:!0}},amount:{type:"number"},currency:{type:"number",defaultValue:t.get("objectCurrency")||978},comments:{type:"string"},ownershipDate:{type:"date",nullable:!0},reference:{type:"string",editable:!1}},purchaserVehicleName:function(){return k.get(this,"purchaserVehicle.name")},sellerVehicleName:function(){return k.get(this,"sellerVehicle.name")}}},sort:{field:"date",dir:"desc"},error:O},new i.data.DataSource(n)):new i.data.DataSource({data:[]})},_=function(t,e){var n,i,a,r,o;return n=e.sender.element.find(f),o="javascript:void(0)",0===(a=e.sender).select().length?(n.removeClass("k-state-default"),n.addClass("k-state-disabled")):(r=a.select(),n.removeClass("k-state-disabled"),n.addClass("k-state-default"),i=a.dataItem(r),o=v.auditTrail(i.id,t.get("objectName"),E.PURCHASE,t.get("objectId"))),n.attr("href",o),null},N=function(e,t){var n,i;return i={dataSource:S(e,t),columns:[{command:["edit","destroy"],title:" ",width:"230px"},g.column({field:"date",title:r.t("history:purchases.date"),width:"100px"}),w.column({field:"quantity",title:r.t("history:purchases.quantity"),width:"100px"}),T.column({field:"purchaserVehicle",title:r.t("history:purchases.purchaser"),width:"200px"}),T.column({field:"sellerVehicle",title:r.t("history:purchases.seller"),width:"200px"}),w.column({field:"amount",title:r.t("history:purchases.amount"),width:"100px"}),h.column({field:"currency",title:r.t("history:purchases.currency"),width:"100px"}),{field:"comments",title:r.t("history:purchases.comments"),width:"200px"},g.column({field:"ownershipDate",title:r.t("history:purchases.ownershipDate"),width:"150px"}),{field:"reference",title:r.t("history:purchases.reference"),width:"100px"}],toolbar:[{name:"create"},{name:b,text:y.getToolbarCaption(),iconClass:y.AUDIT_TRAIL_ICON}],pageable:I.defaultPageable(),scrollable:!0,height:400,change:function(t){return _(e,t)},dataBound:function(t){return _(e,t)}},C.withDefaults(i),(n=a(L)).kendoGrid(i),C.resetSort(n,"date"),null},R=function(t,e){var n;return(n=a(L).data("kendoGrid"))?n.setDataSource(S(t,e)):N(t,e),null},U=function(t,e){var n;return"currentSubscriptionId"===e.field&&(n=t.get("currentSubscriptionId"),R(t,n)),!0},{init:function(t){return t.bind("change",U.bind(null,t))}}})}.call(this),function(){var J;J="#distributionGrid",define("views/data/history/subscription/distribution",["jquery","lodash","i18n","kendo","ui","core/util/ObservableUtils","object/ui/EntityInvestorUI","basic/ui/CurrencyUI","core/ui/DateUI","core/ui/NumberUI","object/repository/ObjectRepository","core/ui/grid/column/ColumnUtils","core/ui/grid/column/ColumnStyle","history/view/SplitWindow","history/data/SplitType","audit/data/StandardAuditTrailTable","audit/web/AuditTrailMap","audit/utils/AuditTrailUtils"],function(a,t,r,i,e,n,o,d,l,s,u,c,p,m,f,b,v,y){var h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y;return R=s.NumberUI,S=l.DateUI,O=n.ObservableUtils,N=o.EntityInvestorUI,k=d.CurrencyUI,x=e.grid,_=u.ObjectRepository,w=c.ColumnUtils,C=p.ColumnStyle,F=b.StandardAuditTrailTable,T=v.AuditTrailMap,I=y.AuditTrailUtils,g=i.guid(),h=".k-grid-"+g,A=m.SplitWindow,U=f.SplitType,D=i.guid(),E=".k-grid-"+D,W=function(t,e){var n;return n={subscription:t},a.getJSON("history/distribution/list.json",n).done(e.success).fail(e.error)},Y=L=function(t,e){var n;return n={type:"POST",url:"history/distribution.json",dataType:"json",data:{data:i.stringify(e.data)}},a.ajax(n).done(e.success).fail(e.error),null},j=function(t,e){var n,i;return i={id:e.data.id},n={type:"DELETE",url:"history/distribution.json?"+a.param(i),dataType:"json"},a.ajax(n).done(e.success).fail(e.error)},B=function(){var t;return null!=(t=a(J).data("kendoGrid"))&&t.cancelChanges(),!0},H=function(t){var e,n,i;if(n=t.data("kendoGrid"))return 0<n.select().length&&(i=n.select(),e=n.dataItem(i),A.open(e,U.DISTRIBUTION)),null},q=function(t,e){var n,i,a,r,o,d;return a=(r=e.sender).element.find(E),n=e.sender.element.find(h),d="javascript:void(0)",x.onRowSelectChange(r,[a,n]),0<r.select().length&&(o=r.select(),i=r.dataItem(o),d=T.auditTrail(i.id,t.get("objectName"),F.DISTRIBUTION,t.get("objectId"))),n.attr("href",d),null},P=function(t,e){var n;return e?(n={transport:{read:W.bind(null,e),create:L.bind(null,e),update:Y.bind(null,e),destroy:j.bind(null,e)},schema:{model:{id:"id",fields:{id:{type:"number"},vehicle:{type:"number",defaultValue:t.get("objectId"),editable:!1},type:{type:"number",defaultValue:1,editable:!1},subscription:{type:"number",defaultValue:e,editable:!1},date:{type:"date",validation:{required:!0}},quantity:{type:"number",validation:{required:!0}},amount:{type:"number",validation:{required:!0}},currency:{type:"number",defaultValue:t.get("objectCurrency")||978,validation:{required:!0}},comments:{type:"string"},calculationDate:{type:"date",defaultValue:null},partnerEntity:{nullable:!0},recallable:{type:"number",defaultValue:0},pledged:{type:"number",defaultValue:0},reserve:{type:"number",defaultValue:0},paidInKind:{type:"boolean",defaultValue:!1},ownershipDate:{type:"date",nullable:!0},reference:{type:"string",editable:!1}},partnerEntityName:function(){return O.get(this,"partnerEntity.name")}}},sort:{field:"date",dir:"desc"},error:B},new i.data.DataSource(n)):new i.data.DataSource({data:[]})},M=function(i,t){var e,n;return kendo.destroy(a(J)),a(J).empty(),n={dataSource:P(i,t),columns:[{command:["edit","destroy"],title:" ",width:"230px"},S.column({field:"date",title:r.t("history:distributions.date"),width:"100px"}),S.column({field:"calculationDate",title:r.t("history:distributions.calculationDate"),width:"100px"}),N.withCommitment(t).column({field:"partnerEntity",title:r.t("history:distributions.partner"),width:"200px"}),R.column({field:"quantity",title:r.t("history:distributions.quantity"),width:"100px"}),R.column({field:"amount",title:r.t("history:distributions.amount"),width:"100px"}),k.column({field:"currency",title:r.t("history:distributions.currency"),width:"100px"}),R.column({field:"recallable",title:r.t("history:distributions.recallable"),width:"100px"}),R.column({field:"pledged",title:r.t("history:distributions.pledged"),width:"100px"}),R.column({field:"reserve",title:r.t("history:distributions.reserve"),width:"100px"}),{field:"comments",title:r.t("history:distributions.comments"),width:"100px"},w.addStyle({field:"paidInKind",title:r.t("history:distributions.paidInKind"),template:"<input type='checkbox' class='k-checkbox' #= (paidInKind == true) ? checked ='checked' : '' # disabled/><label class='k-checkbox-label'>&nbsp;</label",width:"100px"},C.CENTER_ALIGNED),S.column({field:"ownershipDate",title:r.t("history:distributions.ownershipDate"),width:"100px"}),{field:"reference",title:r.t("history:distributions.reference"),width:"100px"}],toolbar:[{name:"create"},{name:D,text:r.t("history:distributions.action.split"),iconClass:"k-icon k-i-zoom"},{name:g,text:I.getToolbarCaption(),iconClass:I.AUDIT_TRAIL_ICON}],pageable:x.defaultPageable(),scrollable:!0,height:400,change:function(t){return q(i,t)},dataBound:function(t){return q(i,t)},edit:function(e){var n;return(n=i.get("investorEntity"))&&_.fetchInvestorByCommitmentIdentifiables(t).then(function(t){if(1===t.length&&t[0].id===n.id)return e.model.set("partnerEntity",n)}),null}},x.withDefaults(n),(e=a(J)).kendoGrid(n),a(E).click(function(){return H(e)}),x.resetSort(e,"date"),null},G=function(t,e){return M(t,e),null},V=function(t,e){var n;return"currentSubscriptionId"===e.field&&(n=t.get("currentSubscriptionId"),G(t,n)),!0},{init:function(t){return t.bind("change",V.bind(null,t))}}})}.call(this),define("text!templates/data/history/subscription.html",[],function(){return'<div id="subscriptionRoot">\n    <h1 data-i18n="history:subscriptions.title"></h1>\n    <h2 data-bind="text: objectName"></h2>\n\n    <div id="subscriptionGrid" class="floatingGrid"></div>\n    <div class="clearer"></div>\n\n    <div data-bind="visible: noSelected">\n        <h2 data-i18n="history:subscriptions.noneSelected"></h2>\n    </div>\n    <div data-bind="visible: hasSubscription">\n        <h2 data-i18n="history:capitalCalls.title"></h2>\n        <div id="capitalCallGrid" class="floatingGrid"></div>\n        <div class="clearer"></div>\n        <p></p>\n    </div>\n    <div data-bind="visible: showPurchaseDistribution">\n        <h2 data-i18n="history:purchases.title"></h2>\n        <div id="purchaseGrid" class="floatingGrid_1600_px"></div>\n        <div class="clearer"></div>\n        <p></p>\n    </div>\n    <div data-bind="visible: showPurchaseDistribution">\n    <h2 data-i18n="history:distributions.title"></h2>\n    <div id="distributionGrid" class="floatingGrid"></div>\n    <div class="clearer"></div>\n    <p></p>\n</div>\n</div>\n\n'}),function(){var F;F="objectSubscription",define("views/data/history/subscription/subscriptions",["jquery","lodash","i18n","kendo","site","ui","history/view/VehicleSubscriptionGrid","core/web/WebLocation","core/ui/DateUI","object/ui/VehicleUI","core/util/ObservableUtils","object/ui/EntityInvestorUI","basic/ui/CurrencyUI","views/layout","views/not.found","views/loading","views/data/history/subscription/capital.call","views/data/history/subscription/purchase","views/data/history/subscription/distribution","core/ui/NumberUI","core/ui/IntegerUI","core/api/ShareIssuingType","text!templates/data/history/subscription.html"],function(e,t,n,i,a,r,o,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C){var w,k,E,D,S,N,x,R,_,O,U,A;return g.NumberUI,T.IntegerUI,l.DateUI,u.ObservableUtils,s.VehicleUI,c.EntityInvestorUI,S=d.WebLocation,p.CurrencyUI,k=a.router,w=a.map,r.grid,D=o.VehicleSubscriptionGrid,E=I.ShareIssuingType,O=function(){return f.display(F,!1)},R=function(t){return e("#subscriptionRoot").localize(),D.createSubsriptionGrid(e("#subscriptionGrid"),t),null},N=function(t){var e,n;return e=i.template(C)({}),n={model:t,init:R.bind(null,t)},new i.View(e,n)},A=function(t){var e,n;if(t)return n={objectId:t.id,objectName:t.name,shareIssuing:t.shareIssuing,objectCurrency:t.currency||978,hasSubscription:!1,noSelected:!0,currentSubscriptionId:null,showPurchase:!1,closings:t.closingDates},e=i.observable(n),S.setPageTitle("Subscription "+t.name),e.shareIssuing===E.WITHOUT_CAPITAL_CALL?e.set("noSelected",!0):e.set("noSelected",!1),v.init(e),y.init(e),h.init(e),m.display(F,N(e));O()},U=function(){return O()},_=function(t){return e.getJSON("object.json",{id:t}).done(A).fail(U),null},x=function(t){return b.display(F,!1),_(t)},{init:function(){return k.addRoute(w.objectSubscription,x)}}})}.call(this),define("history/data/RedemptionType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RedemptionType=void 0;var r,o;(r=e.RedemptionType||(e.RedemptionType={}))[r.REPURCHASE=1]="REPURCHASE",r[r.COMMITMENT_REDUCTION=2]="COMMITMENT_REDUCTION",(o=e.RedemptionType||(e.RedemptionType={})).getName=n.EnumUtils.createNameFn("history:RedemptionType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosRedemptionType",o,!1),o.column=a.EnumColumnUtils.createFactory(o)}),define("text!templates/data/history/redemption.html",[],function(){return'<div id="redemptionRoot">\n    <h1 data-i18n="history:redemptions.title"></h1>\n    <h2 data-bind="text: objectName"></h2>\n\n    <div id="redemptionGrid" class="floatingGrid_100"></div>\n    <div class="clearer"></div>\n\n</div>'}),function(){var et,nt;nt="objectRedemption",et="#redemptionGrid",define("views/data/history/redemption/redemptions",["jquery","lodash","i18n","kendo","site","ui","core/web/WebLocation","core/ui/DateUI","object/ui/VehicleUI","core/util/ObservableUtils","basic/ui/CurrencyUI","views/layout","views/not.found","views/loading","core/ui/NumberUI","object/ui/EntityInvestorUI","core/ui/grid/column/ColumnUtils","core/ui/grid/column/ColumnStyle","audit/data/StandardAuditTrailTable","audit/web/AuditTrailMap","audit/utils/AuditTrailUtils","history/data/RedemptionType","text!templates/data/history/redemption.html"],function(a,t,r,o,e,n,i,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C){var w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q,z,X,Z,tt;return R=d.DateUI,F=s.ObservableUtils,x=u.CurrencyUI,j=l.VehicleUI,A=f.NumberUI,G=i.WebLocation,L=e.router,O=e.map,U=n.grid,_=b.EntityInvestorUI,N=v.ColumnUtils,S=y.ColumnStyle,M=h.StandardAuditTrailTable,E=g.AuditTrailMap,D=T.AuditTrailUtils,k=o.guid(),w=".k-grid-"+k,P=I.RedemptionType,K=function(){return p.display(nt,!1)},Z=function(t,e){var n;return n={object:t.get("objectId")},a.getJSON("history/redemption/list.json",n).done(e.success).fail(e.error)},tt=q=function(t,e){var n;return n={type:"POST",url:"history/redemption.json",dataType:"json",data:{data:o.stringify(e.data)}},a.ajax(n).done(e.success).fail(e.error),null},W=function(t,e){var n,i;return i={id:e.data.id},n={type:"DELETE",url:"history/redemption.json?"+a.param(i),dataType:"json"},a.ajax(n).done(e.success).fail(e.error)},X=function(){var t;return null!=(t=a(et).data("kendoGrid"))&&t.cancelChanges(),!0},$=function(t,e){var n,i,a,r,o;return n=e.sender.element.find(w),o="javascript:void(0)",0===(a=e.sender).select().length?(n.removeClass("k-state-default"),n.addClass("k-state-disabled")):(r=a.select(),n.removeClass("k-state-disabled"),n.addClass("k-state-default"),i=a.dataItem(r),o=E.auditTrail(i.id,t.get("objectName"),M.REDEMPTION,t.get("objectId"))),n.attr("href",o),null},B=function(e){var t,n,i;return t=a(et),o.destroy(t),t.empty(),i=e.get("objectId"),n={dataSource:{transport:{read:Z.bind(null,e),create:q.bind(null,e),update:tt.bind(null,e),destroy:W.bind(null,e)},schema:{model:{id:"id",fields:{id:{type:"number"},vehicle:{type:"number",editable:"false",defaultValue:i},fundShare:{nullable:!0,validation:{required:!0}},date:{type:"date",validation:{required:!0}},quantity:{type:"number",validation:{required:!0}},amount:{type:"number",validation:{required:!0}},currency:{type:"number",defaultValue:978,validation:{required:!0}},comments:{type:"string"},investorEntity:{nullable:!0},paidInKind:{type:"boolean",defaultValue:!1},ownershipDate:{type:"date",nullable:!0},type:{type:"number",defaultValue:1},reference:{type:"string",editable:!1},carried:{type:"number",nullable:!1}},fundShareName:function(){return F.get(this,"fundShare.name")},investorEntityName:function(){return F.get(this,"investorEntity.name")}}},sort:{field:"date",dir:"desc"},error:X},columns:[{command:["edit","destroy"],title:" ",width:230},R.column({field:"date",title:r.t("history:redemptions.date"),width:100}),j.with(i).fundShares.column({field:"fundShare",title:r.t("history:redemptions.fundShare"),width:200}),A.column({field:"quantity",title:r.t("history:redemptions.quantity"),width:100}),A.column({field:"amount",title:r.t("history:redemptions.amount"),width:200}),x.column({field:"currency",title:r.t("history:redemptions.currency"),width:100}),A.column({field:"carried",title:r.t("history:redemptions.carried"),width:200}),{field:"comments",title:r.t("history:redemptions.comments"),width:300},_.column({field:"investorEntity",title:r.t("history:redemptions.investor"),width:200}),N.addStyle({field:"paidInKind",title:r.t("history:redemptions.paidInKind"),template:"<input type='checkbox' class='k-checkbox' #= (paidInKind == true) ? checked ='checked' : '' # disabled/><label class='k-checkbox-label'>&nbsp;</label>",width:"100px"},S.CENTER_ALIGNED),R.column({field:"ownershipDate",title:r.t("history:redemptions.ownershipDate"),width:150}),P.column({field:"type",title:r.t("history:redemptions.type"),width:200}),{field:"reference",title:r.t("history:redemptions.reference"),width:300}],toolbar:[{name:"create"},{name:k,text:D.getToolbarCaption(),iconClass:D.AUDIT_TRAIL_ICON}],pageable:U.defaultPageable(),scrollable:!0,height:400,change:function(t){return $(e,t)},dataBound:function(t){return $(e,t)}},U.withDefaults(n),t.kendoGrid(n),null},Y=function(t){return a("#redemptionRoot").localize(),B(t),null},V=function(t){var e,n;return e=o.template(C)({}),n={model:t,init:Y.bind(null,t)},new o.View(e,n)},z=function(t){var e,n;if(t)return n={objectId:t.id,objectName:t.name},e=o.observable(n),G.setPageTitle("Redemption "+t.name),c.display(nt,V(e));K()},Q=function(){return K()},J=function(t){return a.getJSON("object.json",{id:t}).done(z).fail(Q),null},H=function(t){return m.display(nt,!1),J(t)},{init:function(){return L.addRoute(O.objectRedemption,H)}}})}.call(this),define("text!templates/data/history/company.subscription.edit.window.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="date" data-i18n="history:subscriptions.date"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="date" data-role="datepicker" data-bind="value: date" required="required" data-i18n="[validationMessage]data:validation.dateRequired" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="transactionType" data-i18n="history:subscriptions.transactionType"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="transactionType" data-role="domostransactiontype" data-bind="value: transactionType" required/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="companyShare" data-i18n="history:subscriptions.companyShare"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="companyShare" data-bind="value: companyShare" required="required" data-i18n="[validationMessage]data:validation.companyShareRequired" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="quantity" data-i18n="history:subscriptions.quantity"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="quantity" data-role="numerictextbox" data-bind="value: quantity" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="amount" data-i18n="history:subscriptions.amount"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="amount" data-role="numerictextbox" data-bind="value: amount" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="currency" data-i18n="history:subscriptions.currency"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="currency" data-role="domoscurrency" data-bind="value: currency" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="investorEntity" data-i18n="history:subscriptions.investor"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="investorEntity" data-bind="value: investorEntity" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="seller" data-i18n="history:subscriptions.seller"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="seller"  data-bind="value: seller" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="investment" data-i18n="history:subscriptions.investment"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="investment" data-role="domosinvestment" data-bind="value: investment" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="paymentDate" data-i18n="history:subscriptions.paymentDate"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="paymentDate" data-role="datepicker" data-bind="value: paymentDate"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="paidInKind" data-i18n="history:subscriptions.paidInKind"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="paidInKind" type="checkbox" data-bind="checked: paidInKind"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="reference" data-i18n="history:subscriptions.reference"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="reference" class="k-textbox" type="text" data-bind="value: reference" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="comment" data-i18n="history:subscriptions.comments"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="comments" class="k-textbox" type="text" data-bind="value: comments" required="required" data-i18n="[validationMessage]data:validation.companyShareRequired" />\n\t\t\t</td>\n\t\t</tr>\n\n\t</table>\n\n\t<div class="formWindowButtons">\n\t\t<button id="okClickId" class="k-primary" data-role="button" data-icon="check" data-bind="click: okClick, enabled: isValid">OK</button>\n\t\t<button data-role="button" data-icon="cancel" data-bind="click: cancelClick">Cancel</button>\n\t</div>\n</div>'}),define("history/data/TransactionType",["require","exports","core/util/EnumUtils","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransactionType=void 0;var r,o;(r=e.TransactionType||(e.TransactionType={}))[r.ISSUE=1]="ISSUE",r[r.EXERCISE=2]="EXERCISE",r[r.TRANSFER=3]="TRANSFER",r[r.ASSIGNMENT=4]="ASSIGNMENT",r[r.WAIVER=5]="WAIVER",r[r.FREE_ATTRIBUTION=6]="FREE_ATTRIBUTION",r[r.CAPITAL_REDUCTION=7]="CAPITAL_REDUCTION",r[r.CONTRIBUTION=8]="CONTRIBUTION",r[r.EXERCISE_BY_ISSUE=9]="EXERCISE_BY_ISSUE",r[r.MERGE=10]="MERGE",(o=e.TransactionType||(e.TransactionType={})).getName=n.EnumUtils.createNameFn("history:TransactionType",o),o.widget=a.EnumWidgetUtils.createDropList("DomosTransactionType",o,!0),o.column=i.EnumColumnUtils.createFactory(o)}),define("object/ui/InvestmentUI",["require","exports","./ObjectUtilsUI","../repository/ObjectRepository"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InvestmentUI=void 0,e.InvestmentUI=n.ObjectUtilsUI.create("DomosInvestment",i.ObjectRepository.fetchInvestmentIdentifiables)}),define("history/view/CompanySubscriptionEditWindow",["require","exports","i18n","text!templates/data/history/company.subscription.edit.window.html","core/data/DObservableBuilder","object/ui/CompanyUI","history/data/TransactionType","object/ui/InvestmentUI"],function(t,e,s,u,c,p,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompanySubscriptionEditWindow=void 0;var m="#investorEntity";var n=function(){function t(){}return t.open=function(t,e,n){return e||(e={id:0,date:new Date,company:0,companyShare:null,quantity:0,amount:0,currency:n,investorEntity:null,seller:null,comments:"",transactionType:i.TransactionType.ISSUE,linkDealId:null,paidInKind:!1,paymentDate:null,reference:null}),d=t,l=e,new Promise(function(t,e){var n=kendo.template(u)({}),i=$("<div>").addClass("formWindow").appendTo($(document.body));i.html(n),p.CompanyUIUtils.setupShareDropDown(i.find("#companyShare"),d),p.CompanyUIUtils.setupEntityInvestorIdDropDown(i.find(m),l.companyShare),p.CompanyUIUtils.setupEntitySellerIdDropDown(i.find("#seller"),l.companyShare),i.kendoWindow({modal:!0,width:400,minWidth:300,visible:!1});var a,r=i.data("kendoWindow");r.bind("close",function(){return kendo.destroy(i),i.remove(),t(a),!0});var o=c.DObservableBuilder.of(l).add("isValid",function(t){var e=t.get("date"),n=t.get("companyShare"),i=t.get("quantity"),a=t.get("investorEntity");return!!e&&!!n&&!!a&&0<=i}).add("okClick",function(t){a=t.toJson(),r.close()}).add("cancelClick",function(t){a=void 0,r.close()}).build();o.bindChange(function(t,e){if("companyShare"===e){var n=t.get("companyShare");p.CompanyUIUtils.setupEntityInvestorIdDropDown(i.find(m),n),p.CompanyUIUtils.setupEntitySellerIdDropDown(i.find("#seller"),n)}}),s.I18N.localize(i),o.bind(i),r.title("Edit").open().center()});var d,l},t}();e.CompanySubscriptionEditWindow=n}),define("history/view/CompanySubscriptionGrid",["require","exports","core/ui/grid/GridToolbar","core/ui/Confirmation","core/util/Logger","core/util/ObservableUtils","core/ui/grid/GridUtils","core/ui/DateUI","i18n","object/ui/CompanyUI","core/ui/NumberUI","basic/ui/CurrencyUI","./CompanySubscriptionEditWindow","object/ui/EntityInvestorUI","object/ui/InvestmentUI","history/data/TransactionType"],function(t,e,i,l,s,u,c,p,m,f,b,v,a,y,h,g){"use strict";function T(t,e,n){return a.CompanySubscriptionEditWindow.open(t,e,n)}function n(t){var e={type:"POST",url:"history/company/subscription.json",dataType:"json",data:{data:kendo.stringify(t.data)}};$.ajax(e).done(t.success).fail(t.error)}function r(t){n(t)}function o(t){var e={id:t.data.id},n={type:"DELETE",url:"history/company/subscription.json?"+$.param(e),dataType:"json"};$.ajax(n).done(t.success).fail(t.error)}function I(t){return{transport:{read:function(t,e){var n={object:t.get("objectId")};$.getJSON("history/company/subscription/list.json",n).done(e.success).fail(e.error)}.bind(null,t),create:n,update:r,destroy:o},schema:{model:{id:"id",fields:{id:{type:"number"},type:{type:"number"},company:{type:"number",editable:"false",defaultValue:t.objectId},companyShare:{nullable:!0},date:{type:"date",validation:{required:!0}},quantity:{type:"number",validation:{required:!0}},amount:{type:"number",validation:{required:!0}},currency:{type:"number",defaultValue:t.objectCurrency,validation:{required:!0}},investorEntity:{nullable:!0},seller:{nullable:!0},investment:{nullable:!0},comments:{type:"string",nullable:!0},paymentDate:{type:"date",nullable:!0},paidInKind:{type:"boolean"},reference:{type:"string"}},investorEntityName:function(){return u.ObservableUtils.get(this,"investorEntity.name")||""},sellerName:function(){return u.ObservableUtils.get(this,"seller.name")||""},companyShareName:function(){return u.ObservableUtils.get(this,"companyShare.name")||""},investmentName:function(){return u.ObservableUtils.get(this,"investment.name")||""}}},sort:{field:"date",dir:"desc"}}}function C(t,e){t.select().length<1?e.forEach(function(t){t.removeClass("k-state-default"),t.addClass("k-state-disabled")}):e.forEach(function(t){t.removeClass("k-state-disabled"),t.addClass("k-state-default")})}Object.defineProperty(e,"__esModule",{value:!0}),e.CompanySubscriptionGrid=void 0;var d=function(){function t(){}return t.createSubsriptionGrid=function(a,t){var r=t.get("objectId"),o=t.get("objectCurrency"),d=t.get("needsCreation");kendo.destroy(a),a.empty();var e=(new i.GridToolbar).addClick("Add new record","k-icon k-i-plus",function(){return e=r,t=d,n=o,void((i=a.data("kendoGrid"))&&!t&&T(e,null,n).then(function(t){t&&(delete t.id,e&&(t.company=e),i.dataSource.add(t),i.dataSource.sync())}).catch(function(t){return s.Logger.error(t)}));var e,t,n,i},"addRowId").addClick("Edit","k-icon k-i-edit",function(){return function(t,e){var n=t.data("kendoGrid");if(n){var i=n.select();if(0<i.length){var a=n.dataItem(i);T(e,a.toJSON()).then(function(t){t&&(u.ObservableUtils.update(a,t),n.dataSource.sync())}).catch(function(t){return s.Logger.error(t)})}}}(a,r)},"editRowId").addClick("Delete","k-icon k-i-close",function(){return function(t){var e=t.data("kendoGrid"),n=e.select();if(0<n.length){var i=e.dataItem(n);if(!i)return;l.Confirmation.confirmDelete("Are you sure you want to delete this entry?").then(function(t){t&&(e.dataSource.remove(i),e.dataSource.sync())}).catch(function(t){return s.Logger.error(t)})}}(a)},"removeRowId").addExcel(),n={dataSource:I(t),columns:[p.DateUI.column({field:"date",title:m.I18N.t("history:subscriptions.date"),width:150}),g.TransactionType.column({field:"transactionType",title:m.I18N.t("history:subscriptions.transactionType"),width:150}),f.CompanyUI.with(r).companyShares.column({field:"companyShare",title:m.I18N.t("history:subscriptions.companyShare"),width:250}),b.NumberUI.column({field:"quantity",title:m.I18N.t("history:subscriptions.quantity"),width:150}),b.NumberUI.column({field:"amount",title:m.I18N.t("history:subscriptions.amount"),width:150}),v.CurrencyUI.column({field:"currency",title:m.I18N.t("history:subscriptions.currency"),width:150}),y.EntityInvestorUI.column({field:"investorEntity",title:m.I18N.t("history:subscriptions.investor"),width:200}),y.EntityInvestorUI.column({field:"seller",title:m.I18N.t("history:subscriptions.seller"),width:200}),p.DateUI.column({field:"paymentDate",title:m.I18N.t("history:subscriptions.paymentDate"),width:150}),h.InvestmentUI.column({field:"investment",title:m.I18N.t("history:subscriptions.investment"),width:200}),{field:"paidInKind",title:m.I18N.t("history:subscriptions.paidInKind"),width:150},{field:"comments",title:m.I18N.t("history:subscriptions.comments"),width:250},{field:"reference",title:m.I18N.t("history:subscriptions.reference"),width:250}],pageable:c.GridUtils.defaultPageable(),height:400,scrollable:!0,editable:!1,change:function(t){d||C(t.sender,[$("#removeRowId"),$("#editRowId")])},dataBound:function(t){d||C(t.sender,[$("#removeRowId"),$("#editRowId")])}};n.toolbar=e.template(),c.GridUtils.withDefaults(n),a.kendoGrid(n),e.bind(a),d&&[$("#addRowId"),$("#editRowId"),$("#removeRowId")].forEach(function(t){t.removeClass("k-state-default"),t.addClass("k-state-disabled")})},t}();e.CompanySubscriptionGrid=d}),define("text!templates/data/history/company.subscription.html",[],function(){return'<div id="subscriptionRoot">\n    <h1 data-i18n="history:companySubscriptions.title"></h1>\n    <h2 data-bind="text: objectName"></h2>\n\n    <div id="subscriptionGrid"></div>\n\n</div>'}),function(){var T;T="objectCompanySubscription",define("views/data/history/subscription/company.subscriptions",["jquery","lodash","i18n","kendo","site","views/layout","views/not.found","views/loading","history/view/CompanySubscriptionGrid","text!templates/data/history/company.subscription.html"],function(e,t,n,i,a,r,o,d,l,s){var u,c,p,m,f,b,v,y,h,g;return p=a.router,c=a.map,u=l.CompanySubscriptionGrid,y=function(){return o.display(T,!1)},b=function(t){return e("#subscriptionRoot").localize(),u.createSubsriptionGrid(e("#subscriptionGrid"),t),null},m=function(t){var e,n;return e=i.template(s)({}),n={model:t,init:b.bind(null,t)},new i.View(e,n)},g=function(t){var e,n;if(t)return n={objectId:t.id,objectName:t.name,objectCurrency:t.currency,needsCreation:t.needsCreation},e=i.observable(n),r.display(T,m(e));y()},h=function(){return y()},v=function(t){return e.getJSON("object.json",{id:t}).done(g).fail(h),null},f=function(t){return d.display(T,!1),v(t)},{init:function(){return p.addRoute(c.objectCompanySubscription,f)}}})}.call(this),define("text!templates/data/history/derivative.subscription.edit.window.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="date" data-i18n="history:subscriptions.date"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="date" data-role="datepicker" data-bind="value: date" required="required" data-i18n="[validationMessage]data:validation.dateRequired" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="transactionType" data-i18n="history:subscriptions.transactionType"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="transactionType" data-role="domostransactiontype" data-bind="value: transactionType" required/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="quantity" data-i18n="history:subscriptions.quantity"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="quantity" data-role="numerictextbox" data-bind="value: quantity" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="amount" data-i18n="history:subscriptions.amount"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="amount" data-role="numerictextbox" data-bind="value: amount" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="currency" data-i18n="history:subscriptions.currency"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="currency" data-role="domoscurrency" data-bind="value: currency" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="investorEntity" data-i18n="history:subscriptions.investor"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="investorEntity" data-role="domosentity" data-bind="value: investorEntity" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="seller" data-i18n="history:subscriptions.seller"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="seller" data-role="domosentity" data-bind="value: seller" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="paymentDate" data-i18n="history:subscriptions.paymentDate"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="paymentDate" data-role="datepicker" data-bind="value: paymentDate"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="paidInKind" data-i18n="history:subscriptions.paidInKind"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="paidInKind" type="checkbox" data-bind="checked: paidInKind"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="comment" data-i18n="history:subscriptions.comments"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="comments" class="k-textbox" type="text" data-bind="value: comments" required="required" data-i18n="[validationMessage]data:validation.companyShareRequired" />\n\t\t\t</td>\n\t\t</tr>\n\n\t</table>\n\n\t<div class="formWindowButtons">\n\t\t<button id="okClickId" class="k-primary" data-role="button" data-icon="check" data-bind="click: okClick, enabled: isValid">OK</button>\n\t\t<button data-role="button" data-icon="cancel" data-bind="click: cancelClick">Cancel</button>\n\t</div>\n</div>'}),define("history/view/DerivativeSubscriptionEditWindow",["require","exports","i18n","text!templates/data/history/derivative.subscription.edit.window.html","core/data/DObservableBuilder","history/data/TransactionType"],function(t,e,s,u,c,n){"use strict";function i(l){return new Promise(function(t,e){var n=kendo.template(u)({}),i=$("<div>").addClass("formWindow").appendTo($(document.body));i.html(n);i.kendoWindow({modal:!0,width:400,minWidth:300,visible:!1});var a,r=i.data("kendoWindow");r.bind("close",function(){return kendo.destroy(i),i.remove(),t(a),!0});var o=c.DObservableBuilder.of(l).add("isValid",function(t){var e=t.get("date"),n=t.get("quantity"),i=t.get("investorEntity");return!!!!(e&&i&&n)}).add("okClick",function(t){a=t.toJson(),r.close()}).add("cancelClick",function(t){a=void 0,r.close()}).build();s.I18N.localize(i),o.bind(i);var d=l.id?s.I18N.t("history:derivativeSubscriptions.actions.edit"):s.I18N.t("history:derivativeSubscriptions.actions.create");r.title(d).open().center()})}Object.defineProperty(e,"__esModule",{value:!0}),e.DerivativeSubscriptionEditWindow=void 0;var a=function(){function t(){}return t.create=function(t,e){return i({id:0,date:new Date,derivative:t,quantity:0,amount:0,currency:e,investorEntity:null,seller:null,comments:"",investment:null,transactionType:n.TransactionType.ISSUE,linkDealId:null,paidInKind:!1,paymentDate:null})},t.open=function(t){return i(t)},t}();e.DerivativeSubscriptionEditWindow=a}),define("history/repository/DerivativeSubscriptionRepository",["require","exports","lodash","core/web/WebHttp"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DerivativeSubscriptionRepository=void 0;var a=function(){function t(){}return t.list=function(t,e){return i.WebHttp.getJson("history/derivative/subscription/list.json",{object:t},e)},t.save=function(t,e){var n=JSON.stringify(t);return i.WebHttp.postJson("history/derivative/subscription.json",{data:n},e)},t.destroy=function(t,e){return t=n.isNumber(t)?t:t.id,i.WebHttp.destroyJson("history/derivative/subscription.json",{id:t},e)},t}();e.DerivativeSubscriptionRepository=a});define("history/view/DerivativeSubscriptionGrid",["require","exports","core/ui/grid/GridToolbar","core/ui/Confirmation","core/util/Logger","core/util/ObservableUtils","core/ui/grid/GridUtils","core/ui/DateUI","i18n","core/ui/NumberUI","basic/ui/CurrencyUI","./DerivativeSubscriptionEditWindow","object/ui/EntityInvestorUI","object/ui/InvestmentUI","history/data/TransactionType","core/data/DObservable","history/repository/DerivativeSubscriptionRepository"],function(t,e,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w){"use strict";function k(t,e){t.select().length<1?e.forEach(function(t){t.removeClass("k-state-default"),t.addClass("k-state-disabled")}):e.forEach(function(t){t.removeClass("k-state-disabled"),t.addClass("k-state-default")})}Object.defineProperty(e,"__esModule",{value:!0}),e.DerivativeSubscriptionGrid=void 0;var n=function(){function t(){}return t.create=function(i,t){var e=C.DObservable.wrap(t),a=e.get("objectId"),r=e.get("objectCurrency");kendo.destroy(i),i.empty();var n,o,d=(new s.GridToolbar).addClick(b.I18N.t("history:derivativeSubscriptions.actions.create"),"k-icon k-i-plus",function(){return e=a,t=r,void((n=i.data("kendoGrid"))&&h.DerivativeSubscriptionEditWindow.create(e,t).then(function(t){t&&(delete t.id,e&&(t.derivative=e),n.dataSource.add(t),n.dataSource.sync())}).catch(function(t){return c.Logger.error(t)}));var e,t,n},"addRowId").addClick(b.I18N.t("history:derivativeSubscriptions.actions.edit"),"k-icon k-i-edit",function(){return function(t){var e=t.data("kendoGrid");if(e){var n=e.select();if(0<n.length){var i=e.dataItem(n);h.DerivativeSubscriptionEditWindow.open(i.toJSON()).then(function(t){t&&(p.ObservableUtils.update(i,t),e.dataSource.sync())}).catch(function(t){return c.Logger.error(t)})}}}(i)},"editRowId").addClick(b.I18N.t("history:derivativeSubscriptions.actions.delete"),"k-icon k-i-close",function(){return function(t){var e=t.data("kendoGrid"),n=e.select();if(0<n.length){var i=e.dataItem(n);if(!i)return;u.Confirmation.confirmDelete(b.I18N.t("history:derivativeSubscriptions.actions.deleteConfirm")).then(function(t){t&&(e.dataSource.remove(i),e.dataSource.sync())}).catch(function(t){return c.Logger.error(t)})}}(i)},"removeRowId").addExcel(),l={dataSource:(n=a,o=r,{transport:{read:function(e){w.DerivativeSubscriptionRepository.list(n).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})},create:function(e){w.DerivativeSubscriptionRepository.save(e.data).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})},update:function(e){w.DerivativeSubscriptionRepository.save(e.data).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})},destroy:function(e){w.DerivativeSubscriptionRepository.destroy(e.data).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})}},schema:{model:{id:"id",fields:{id:{type:"number"},type:{type:"number"},derivative:{type:"number",editable:"false",defaultValue:n},date:{type:"date",validation:{required:!0}},quantity:{type:"number",validation:{required:!0}},amount:{type:"number",validation:{required:!0}},currency:{type:"number",defaultValue:o,validation:{required:!0}},investorEntity:{nullable:!0},seller:{nullable:!0},investment:{nullable:!0},comments:{type:"string",nullable:!0},paymentDate:{type:"date",nullable:!0},paidInKind:{type:"boolean"}},investorEntityName:function(){return p.ObservableUtils.get(this,"investorEntity.name")||""},sellerName:function(){return p.ObservableUtils.get(this,"seller.name")||""}}},sort:{field:"date",dir:"desc"}}),columns:[f.DateUI.column({field:"date",title:b.I18N.t("history:subscriptions.date"),width:150}),I.TransactionType.column({field:"transactionType",title:b.I18N.t("history:subscriptions.transactionType"),width:150}),v.NumberUI.column({field:"quantity",title:b.I18N.t("history:subscriptions.quantity"),width:150}),v.NumberUI.column({field:"amount",title:b.I18N.t("history:subscriptions.amount"),width:150}),y.CurrencyUI.column({field:"currency",title:b.I18N.t("history:subscriptions.currency"),width:150}),g.EntityInvestorUI.column({field:"investorEntity",title:b.I18N.t("history:subscriptions.investor"),width:200}),g.EntityInvestorUI.column({field:"seller",title:b.I18N.t("history:subscriptions.seller"),width:200}),f.DateUI.column({field:"paymentDate",title:b.I18N.t("history:subscriptions.paymentDate"),width:150}),T.InvestmentUI.column({field:"investment",title:b.I18N.t("history:subscriptions.investment"),width:200}),{field:"paidInKind",title:b.I18N.t("history:subscriptions.paidInKind"),width:150},{field:"comments",title:b.I18N.t("history:subscriptions.comments"),width:250}],pageable:m.GridUtils.defaultPageable(),height:400,scrollable:!0,editable:!1,change:function(t){k(t.sender,[$("#removeRowId"),$("#editRowId")])},dataBound:function(t){k(t.sender,[$("#removeRowId"),$(" #editRowId")])}};l.toolbar=d.template(),m.GridUtils.withDefaults(l),i.kendoGrid(l),d.bind(i)},t}();e.DerivativeSubscriptionGrid=n}),define("text!templates/data/history/derivative.subscription.html",[],function(){return'<div id="subscriptionRoot">\n    <h1 data-i18n="history:derivativeSubscriptions.title"></h1>\n    <h2 data-bind="text: objectName"></h2>\n\n    <div id="subscriptionGrid"></div>\n\n</div>'}),function(){var T;T="objectDerivativeSubscription",define("views/data/history/subscription/derivative.subscriptions",["jquery","lodash","i18n","kendo","site","views/layout","views/not.found","views/loading","history/view/DerivativeSubscriptionGrid","text!templates/data/history/derivative.subscription.html"],function(e,t,n,i,a,r,o,d,l,s){var u,c,p,m,f,b,v,y,h,g;return p=a.router,c=a.map,u=l.DerivativeSubscriptionGrid,y=function(){return o.display(T,!1)},b=function(t){return e("#subscriptionRoot").localize(),u.create(e("#subscriptionGrid"),t),null},m=function(t){var e,n;return e=i.template(s)({}),n={model:t,init:b.bind(null,t)},new i.View(e,n)},g=function(t){var e,n;if(t)return n={objectId:t.id,objectName:t.name,objectCurrency:t.currency},e=i.observable(n),r.display(T,m(e));y()},h=function(){return y()},v=function(t){return e.getJSON("object.json",{id:t}).done(g).fail(h),null},f=function(t){return d.display(T,!1),v(t)},{init:function(){return p.addRoute(c.objectDerivativeSubscription,f)}}})}.call(this),define("core/api/QuantityTransferType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QuantityTransferType=void 0;var r,o;(r=e.QuantityTransferType||(e.QuantityTransferType={}))[r.IN_QUANTITY=1]="IN_QUANTITY",r[r.IN_CURRENT_NOMINAL=2]="IN_CURRENT_NOMINAL",r[r.IN_ORIGINAL_NOMINAL=3]="IN_ORIGINAL_NOMINAL",(o=e.QuantityTransferType||(e.QuantityTransferType={})).getName=n.EnumUtils.createNameFn("object:QuantityTransferType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosQuantityTransferType",o,!0),o.column=a.EnumColumnUtils.createFactory(o,o.widget)}),define("history/view/DebtSubscriptionGrid",["require","exports","core/util/ObservableUtils","core/ui/grid/GridUtils","core/ui/DateUI","i18n","core/ui/NumberUI","basic/ui/CurrencyUI","object/ui/LegalUI","core/api/QuantityTransferType"],function(t,e,n,i,a,r,o,d,l,s){"use strict";function u(t){var e={type:"POST",url:"history/debt/subscription.json",dataType:"json",data:{data:kendo.stringify(t.data)}};$.ajax(e).done(t.success).fail(t.error)}function c(t){u(t)}function p(t){var e={id:t.data.id},n={type:"DELETE",url:"history/debt/subscription.json?"+$.param(e),dataType:"json"};$.ajax(n).done(t.success).fail(t.error)}function m(t){return{transport:{read:function(t,e){var n={object:t.get("objectId")};$.getJSON("history/debt/subscription/list.json",n).done(e.success).fail(e.error)}.bind(null,t),create:u,update:c,destroy:p},schema:{model:{id:"id",fields:{id:{type:"number"},debt:{type:"any",editable:"false",defaultValue:t.debt},date:{type:"date",validation:{required:!0}},nominal:{type:"number",validation:{required:!0}},accrued:{type:"number",validation:{required:!0}},amount:{type:"number",validation:{required:!0}},currency:{type:"number",defaultValue:t.objectCurrency,validation:{required:!0}},investorEntity:{nullable:!0},seller:{nullable:!0},closing:{type:"boolean"},quantityType:{type:"number",defaultValue:s.QuantityTransferType.IN_CURRENT_NOMINAL},reference:{type:"string",nullable:!0},comments:{type:"string",nullable:!0}},investorEntityName:function(){return n.ObservableUtils.get(this,"investorEntity.name")||""},sellerName:function(){return n.ObservableUtils.get(this,"seller.name")||""}}},sort:{field:"date",dir:"desc"}}}function f(t,e){t.select().length<1?e.forEach(function(t){t.removeClass("k-state-default"),t.addClass("k-state-disabled")}):e.forEach(function(t){t.removeClass("k-state-disabled"),t.addClass("k-state-default")})}Object.defineProperty(e,"__esModule",{value:!0}),e.DebtSubscriptionGrid=void 0;var b=function(){function t(){}return t.createSubsriptionGrid=function(t,e){kendo.destroy(t),t.empty();var n={dataSource:m(e),columns:[{command:["edit","destroy"],title:" ",width:230},a.DateUI.column({field:"date",title:r.I18N.t("history:subscriptions.date"),width:200}),o.NumberUI.column({field:"nominal",title:r.I18N.t("history:subscriptions.nominal"),width:200}),o.NumberUI.column({field:"accrued",title:r.I18N.t("history:subscriptions.accrued"),width:200}),o.NumberUI.column({field:"amount",title:r.I18N.t("history:subscriptions.amount"),width:200}),d.CurrencyUI.column({field:"currency",title:r.I18N.t("history:subscriptions.currency"),width:100}),l.LegalUI.column({field:"investorEntity",title:r.I18N.t("history:subscriptions.investor"),width:200}),l.LegalUI.column({field:"seller",title:r.I18N.t("history:subscriptions.seller"),width:200}),s.QuantityTransferType.column({field:"quantityType",title:r.I18N.t("history:debtSubscriptions.quantityType"),width:300}),{field:"reference",title:r.I18N.t("history:subscriptions.reference"),width:200},{field:"comments",title:r.I18N.t("history:subscriptions.comments"),width:350}],toolbar:[{name:"create"},{name:"excel"}],pageable:i.GridUtils.defaultPageable(),height:400,scrollable:!0,change:function(t){f(t.sender,[$("#removeRowId"),$("#editRowId")])},dataBound:function(t){f(t.sender,[$("#removeRowId"),$("#editRowId")])}};i.GridUtils.withDefaults(n),t.kendoGrid(n)},t}();e.DebtSubscriptionGrid=b}),define("text!templates/data/history/debt.subscription.html",[],function(){return'<div id="subscriptionRoot">\n    <h1 data-i18n="history:debtSubscriptions.title"></h1>\n    <h2 data-bind="text: objectName"></h2>\n\n    <div id="subscriptionGrid" class="floatingGrid_100"></div>\n    <div class="clearer"></div>\n\n</div>'}),function(){var x;x="objectDebtSubscription",define("views/data/history/subscription/debt.subscriptions",["jquery","lodash","i18n","kendo","site","history/view/DebtSubscriptionGrid","ui","core/ui/DateUI","basic/ui/CurrencyUI","core/ui/NumberUI","object/ui/LegalUI","views/layout","views/loading","views/not.found","text!templates/data/history/debt.subscription.html"],function(n,t,e,i,a,r,o,d,l,s,u,c,p,m,f){var b,v,y,h,g,T,I,C,w,k,E,D,S,N;return d.DateUI,l.CurrencyUI,s.NumberUI,u.LegalUI,b=r.DebtSubscriptionGrid,h=a.router,v=a.map,(y=o.grid).columns,y.editors,function(){return m.display(x,!1)},function(){return{objectId:0,objectName:"",debt:null}},E=function(){return m.display(x,!1)},C=function(t){var e;return e=n("#subscriptionGrid"),b.createSubsriptionGrid(e,t),null},N=function(t){return C(t)},w=function(t){return n("#subscriptionRoot").localize(),null},T=function(t){var e,n;return e=i.template(f)({}),n={model:t,init:w.bind(null,t),show:N.bind(null,t)},new i.View(e,n)},g=null,function(t){return null==g&&(g=T(t)),g},S=function(t){var e,n;if(t)return n={objectId:t.id,objectName:t.name,objectCurrency:t.currency,debt:{id:t.id,name:t.name,category:t.category}},e=i.observable(n),c.display(x,T(e));E()},D=function(){return E()},k=function(t){return n.getJSON("object.json",{id:t}).done(S).fail(D),null},I=function(t,e){return p.display(x,!1),k(e)},{init:function(){var t,e;return e={objectId:0,objectName:"",debt:null},t=i.observable(e),h.addRoute(v.objectDebtSubscription,I.bind(null,t))}}})}.call(this),function(){define("views/portfolios/common/viewer.showAsset",["core/web/WebLocation"],function(t){var n;return n=t.WebLocation,{showAsset:function(t,e){return"<a class='d-link' href='"+n.resolveKendo("/object/edit/"+t)+"'>"+e+"</a>"}}})}.call(this),function(){var i,e=function(t,e){return function(){return t.apply(e,arguments)}};i="http://www.w3.org/1999/xlink",define("ui/svg/core/svg.id",[],function(){var t,n;return n=function(t){return"svg-"+kendo.guid()},t=function(){function t(){this.attr=e(this.attr,this),this.href=e(this.href,this),this.id=e(this.id,this),this.clean=e(this.clean,this),this._id=0}return t.prototype.clean=function(){return this._id=0},t.prototype.id=function(t){var e;return t?((e=t.getAttribute("id"))||(e=n(),t.setAttribute("id",e)),e):null},t.prototype.href=function(t,e){return t&&e&&t.setAttributeNS(i,"href","#"+this.id(e)),this},t.prototype.attr=function(t,e,n){return t&&e&&n&&t.setAttribute(e,"url(#"+this.id(n)+")"),this},t}(),{create:function(){return new t},ns:function(){return"http://www.w3.org/2000/svg"},xlinkns:function(){return i}}})}.call(this),function(){var a=function(t,e){return function(){return t.apply(e,arguments)}};define("ui/svg/core/svg.color.builder",[],function(){var e,n,i;return e=function(){function t(t){this._color=null!=t?t:"black",this.applyFill=a(this.applyFill,this),this.applyStroke=a(this.applyStroke,this),this.apply=a(this.apply,this)}return t.prototype.apply=function(t,e){return t&&e&&t.setAttribute(e,this._color),this},t.prototype.applyStroke=function(t){return this.apply(t,"stroke")},t.prototype.applyFill=function(t){return this.apply(t,"fill")},t}(),i=function(){function t(t,e){this._SVG=t,this._colors=e,this._createDomGradient=a(this._createDomGradient,this),this._getDomGradient=a(this._getDomGradient,this),this.applyFill=a(this.applyFill,this),this.applyStroke=a(this.applyStroke,this),this.apply=a(this.apply,this),this._domGradient=null}return t.prototype.apply=function(t,e){return t&&e&&this._SVG.attr(t,e,this._getDomGradient()),this},t.prototype.applyStroke=function(t){return this.apply(t,"stroke")},t.prototype.applyFill=function(t){return this.apply(t,"fill")},t.prototype._getDomGradient=function(){return null==this._domGradient&&(this._domGradient=this._createDomGradient()),this._domGradient},t.prototype._createDomGradient=function(){var t,e,n,i,a,r,o,d;for((e=this._SVG.createDefs("linearGradient")).setAttribute("x1","0%"),e.setAttribute("x2","0%"),e.setAttribute("y1","100%"),e.setAttribute("y2","0%"),d=100/(this._colors.length-1),i=r=0,a=(o=this._colors).length;i<a;i++)t=o[i],(n=this._SVG.create("stop",e)).setAttribute("offset",r+"%"),n.setAttribute("stop-color",t),r+=d;return e},t}(),n=function(){function t(t){this.create=a(this.create,this),this._SVG=t.svg()}return t.prototype.create=function(t){return _.isArray(t)?1<t.length?new i(this._SVG,t):1===t.length?new e(t[0]):new e:new e(t)},t}(),{create:function(t){return new n(t)}}})}.call(this),function(){var l=function(t,e){return function(){return t.apply(e,arguments)}};define("ui/svg/core/svg",["ui/svg/core/svg.id","ui/svg/core/svg.color.builder"],function(e,n){var i,a,r,o,d;return i=e.ns(),e.xlinkns(),r=function(t){return document.createElementNS(i,t)},d=function(t){return t._jElement[0]},o=function(t){var e;return(e=r("svg")).setAttribute("xmlns",this._ns),e.setAttributeNS(this._ns,"xlink",this._xlinkns),e.setAttribute("version","1.1"),e.setAttribute("width","100%"),e.setAttribute("height","100%"),d(t).appendChild(e),e},a=function(){function t(t){this._jElement=t,this.addTooltip=l(this.addTooltip,this),this.defs=l(this.defs,this),this.domRoot=l(this.domRoot,this),this.domSVG=l(this.domSVG,this),this.createDefs=l(this.createDefs,this),this.create=l(this.create,this),this.appendText=l(this.appendText,this),this.setColor=l(this.setColor,this),this.svg=l(this.svg,this),this.createColor=l(this.createColor,this),this.attr=l(this.attr,this),this.href=l(this.href,this),this.id=l(this.id,this),this.clean=l(this.clean,this),this._ID=e.create(),this._colorBuilder=n.create(this),this._domSVG=null,this._domDefs=null,this._tooltip=null}return t.prototype.clean=function(){return this._ID.clean(),this._domSVG=null,this._domDefs=null,d(this).innerHTML="",this},t.prototype.id=function(t){return this._ID.id(t)},t.prototype.href=function(t,e){return this._ID.href(t,e)},t.prototype.attr=function(t,e,n){return this._ID.attr(t,e,n)},t.prototype.createColor=function(t){return this._colorBuilder.create(t)},t.prototype.svg=function(){return this},t.prototype.setColor=function(t,e,n){return t&&e&&n&&(_.isString(n)?t.setAttribute(e,n):n.apply(t,e)),this},t.prototype.appendText=function(t,e){return t.appendChild(document.createTextNode(e)),this},t.prototype.create=function(t,e){var n;return null==e&&(e=this.domRoot()),n=r(t),e.appendChild(n),n},t.prototype.createDefs=function(t){return this.create(t,this.defs())},t.prototype.domSVG=function(){return null==this._domSVG&&(this._domSVG=o(this)),this._domSVG},t.prototype.domRoot=function(){return this.domSVG()},t.prototype.defs=function(){return null==this._domDefs&&(this._domDefs=this.create("defs",this.domSVG())),this._domDefs},t.prototype.addTooltip=function(t,e){var n;return t&&e&&""!==e&&(n=this.create("title",t),this.appendText(n,e)),this},t}(),{create:function(t){return new a(t)}}})}.call(this),function(){define("ui/svg/core/svg.text.length",["ui/svg/core/svg"],function(n){var i;return i=function(){function t(){var t,e;this.clean=(t=this.clean,e=this,function(){return t.apply(e,arguments)}),this._body=$("body"),this._root=$("<div>").attr("style","position:absolute;top:-1000px;width:1000px;").appendTo(this._body),this._svg=n.create(this._root)}return t.prototype.getLength=function(t){var e;return t&&""!==t?(e=this._svg.create("text"),this._svg.appendText(e,t),e.getComputedTextLength()):0},t.prototype.clean=function(){return this._root.remove(),this},t}(),{getLength:function(t){var e;if(!t||""===t)return 0;e=new i;try{return e.getLength(t)}finally{e.clean()}},create:function(){return new i}}})}.call(this),function(){var a,r=function(t,e){return function(){return t.apply(e,arguments)}};a={color:"black",head:{width:12,height:8}},define("views/portfolios/diagram/svg/svg.arrow",[],function(){var n;return n=function(){function t(t,e){var n,i;null==e&&(e={}),this._computePoints=r(this._computePoints,this),this._createArrowHead=r(this._createArrowHead,this),this._getDomHead=r(this._getDomHead,this),this.add=r(this.add,this),this._SVG=t.svg(),this._color=e.color||a.color,this._headWidth=(null!=(n=e.head)?n.width:void 0)||a.head.width,this._headHeight=(null!=(i=e.head)?i.height:void 0)||a.head.height,this._domHead=null,this._domHeadReverse=null}return t.prototype.add=function(t,e,n,i,a){var r,o,d,l,s,u,c,p,m;return m=n<t,t=(p=this._computePoints(t,e,n,i)).fromX,e=p.fromY,n=p.toX,i=p.toY,c=m?"M "+n+" "+i+" L "+t+" "+e:"M "+t+" "+e+" L "+n+" "+i,(o=this._SVG.createDefs("path")).setAttribute("d",c),(r=this._SVG.create("use")).setAttribute("stroke","black"),u=m?"marker-start":"marker-end",this._SVG.attr(r,u,this._getDomHead(m)),this._SVG.href(r,o),a&&(l=this._SVG.create("text"),(s=this._SVG.create("textPath",l)).setAttribute("startOffset","50%"),this._SVG.href(s,o),(d=this._SVG.create("tspan",s)).setAttribute("dy",-5),d.setAttribute("fill",this._color),d.setAttribute("text-anchor","middle"),this._SVG.appendText(d,a)),this},t.prototype._getDomHead=function(t){return null==t&&(t=!1),t?(null==this._domHeadReverse&&(this._domHeadReverse=this._createArrowHead(!0)),this._domHeadReverse):(null==this._domHead&&(this._domHead=this._createArrowHead(!1)),this._domHead)},t.prototype._createArrowHead=function(t){var e,n;return null==t&&(t=!1),(e=this._SVG.createDefs("marker")).setAttribute("viewBox","0 0 10 10"),e.setAttribute("markerUnits","strokeWidth"),e.setAttribute("markerWidth",this._headWidth),e.setAttribute("markerHeight",this._headHeight),e.setAttribute("orient","auto"),e.setAttribute("fill",this._color),n=this._SVG.create("path",e),t?(e.setAttribute("refX",10),e.setAttribute("refY",5),n.setAttribute("d","M 0 5 L 10 0 L 10 10 z")):(e.setAttribute("refX",0),e.setAttribute("refY",5),n.setAttribute("d","M 0 0 L 10 5 L 0 10 z")),e},t.prototype._computePoints=function(t,e,n,i){var a,r,o,d,l,s;return l={fromX:t,fromY:e},s=(r=n-t)*r+(o=i-e)*o,a=((d=Math.sqrt(s))-10)/d,l.toX=t+a*r,l.toY=e+a*o,l},t}(),{create:function(t,e){return new n(t,e)}}})}.call(this),function(){var r,o=function(t,e){return function(){return t.apply(e,arguments)}};r={width:120,height:40,text:{color:"black",margin:5},border:{color:"black"}},define("views/portfolios/diagram/svg/svg.box",[],function(){var n;return n=function(){function t(t,e){var n,i,a;null==e&&(e={}),this._createDomBox=o(this._createDomBox,this),this._getBox=o(this._getBox,this),this.add=o(this.add,this),this._SVG=t.svg(),this._width=e.width||r.width,this._height=e.height||r.height,this._textColor=(null!=(n=e.text)?n.color:void 0)||r.text.color,this._textMargin=(null!=(i=e.text)?i.margin:void 0)||r.text.margin,this._borderColor=(null!=(a=e.border)?a.color:void 0)||r.border.color,this._domBox=null}return t.prototype.add=function(t,e,n,i){var a,r,o,d,l,s,u;return a=this._SVG.create("use"),this._SVG.href(a,this._getBox()),s=t-this._width/2,u=e-this._height/2,a.setAttribute("x",s),a.setAttribute("y",u),d={box:a},n&&((o=this._SVG.create("text")).setAttribute("x",t),o.setAttribute("y",e),o.setAttribute("fill",this._textColor),o.setAttribute("text-anchor","middle"),o.setAttribute("style","dominant-baseline: central"),this._SVG.appendText(o,n),d.text=o,l=this._width-2*this._textMargin,i&&i.getLength(n)>l&&(o.setAttribute("textLength",l),o.setAttribute("lengthAdjust","spacingAndGlyphs"))),r=this._SVG.create("use"),this._SVG.href(r,this._getBox()),r.setAttribute("x",s),r.setAttribute("y",u),r.setAttribute("opacity",0),d.event=r,d},t.prototype._getBox=function(){return null==this._domBox&&(this._domBox=this._createDomBox()),this._domBox},t.prototype._createDomBox=function(){var t;return(t=this._SVG.createDefs("rect")).setAttribute("width",this._width),t.setAttribute("height",this._height),t.setAttribute("rx",5),t.setAttribute("ry",5),t.setAttribute("stroke",this._borderColor),t},t}(),{create:function(t,e){return new n(t,e)}}})}.call(this),function(){var i,r=function(t,e){return function(){return t.apply(e,arguments)}};i={color:["lightYellow","white"],linkColor:["lightYellow","white"],propertyColor:["lightYellow","white"],companyColor:["lightYellow","white"]},define("views/portfolios/diagram/svg/svg.click",["core/web/WebLocation"],function(t){var n,a;return a=t.WebLocation,n=function(){function t(t,e){null==e&&(e={}),this._unselect=r(this._unselect,this),this._select=r(this._select,this),this._onClick=r(this._onClick,this),this.addClick=r(this.addClick,this),this.add=r(this.add,this),this._SVG=t.svg(),this._color=this._SVG.createColor(e.color||i.color),this._linkColor=this._SVG.createColor(e.linkColor||i.color),this._domElements={},this._idToKeys={},this._selectedKey=null}return t.prototype.add=function(t,e,n,i){var a,r;return null==i&&(i=!1),n&&n.box&&n.event&&(null==(a=this._domElements)[e]&&(a[e]=[]),r={dom:n.box,color:n.box.getAttribute("fill"),link:i},this._domElements[e].push(r),this._idToKeys[this._SVG.id(n.event)]=e,n.event.addEventListener("click",this._onClick.bind(null,t))),this},t.prototype.addClick=function(t,e){if(e)return this},t.prototype._onClick=function(t,e){var n,i;return n=this._SVG.id(e.currentTarget),(i=this._idToKeys[n])===this._selectedKey?(this._unselect(i),this._selectedKey=null):(this._unselect(this._selectedKey),this._selectedKey=i,this._select(this._selectedKey)),window.location.href=a.resolveKendo("/object/edit/"+t),null},t.prototype._select=function(t){var e,n,i,a;if(t&&(n=this._domElements[t]))for(i=0,a=n.length;i<a;i++)(e=n[i]).link?this._linkColor.applyFill(e.dom):this._color.applyFill(e.dom);return this},t.prototype._unselect=function(t){var e,n,i,a;if(t&&(n=this._domElements[t]))for(i=0,a=n.length;i<a;i++)(e=n[i]).dom.setAttribute("fill",e.color);return this},t}(),{create:function(t,e){return new n(t,e)}}})}.call(this),function(){var i=function(t,e){return function(){return t.apply(e,arguments)}};define("views/portfolios/diagram/svg/svg.tooltip",["i18n","kendo","object/data/ObjectTypes","basic/data/Countries"],function(o,d,t,e){var l,s,n;return s=t.ObjectTypes,l=e.Countries,n=function(){function t(t){this.add=i(this.add,this),this.clean=i(this.clean,this),this._SVG=t.svg()}return t.prototype.clean=function(){},t.prototype.add=function(t,e){var n,i,a,r;if(t&&e&&e.event)return i=this._SVG.create("title",e.event),a={type:s.getName(t.type),country:l.getName(t.country),interpolation:{escapeValue:!1}},(r=[t.name]).push(o.t("portfolio:diagram.type",a)),r.push(o.t("portfolio:diagram.country",a)),t.inceptionDate&&(a.start=d.toString(new Date(t.inceptionDate),"d")),t.liquidationDate&&(a.end=d.toString(new Date(t.liquidationDate),"d")),n="noValidityDates",a.start?n=a.end?"validFromUntil":"validFrom":a.end&&(n="validUntil"),r.push(o.t("portfolio:diagram."+n,a)),this._SVG.appendText(i,r.join("\r\n")),null},t}(),{create:function(t){return new n(t)}}})}.call(this),function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};define("views/portfolios/diagram/data.tree",["lodash"],function(m){var i,t,s;return s=function(t,e){var n,i,a,r,o,d,l,s,u,c,p;if(o={id:t,name:"?"},(d=null!=e&&null!=(l=e.objects)?l[t]:void 0)&&(o.name=d.name,o.type=d.type,o.country=d.country,o.inceptionDate=d.inceptionDate,o.liquidationDate=d.liquidationDate),a=null!=(s=e.investors)?s[t]:void 0){for(r in i=[],a)p=a[r],n={name:(null!=e&&null!=(u=e.objects)&&null!=(c=u[r])?c.name:void 0)||"?",value:p},i.push(n);0<i.length&&(o.investors=m.sortBy(i,function(t){return-t.value}))}return o},i=function(){function l(t,e){this._node=t,this._data=e,this.build=n(this.build,this)}return l.prototype.build=function(t,e){var n,i,a,r,o,d;if(this.count=0,!this._node.link&&(n=null!=(o=this._data.investments)?o[this._node.id]:void 0)){for(i in r=[],n)d=n[i],(a=s(i,this._data)).value=d,r.push(a),t[i]?a.link=!0:e.push(new l(a,this._data)),t[i]=!0;return this.count=r.length,this._node.nodes=r,null}},l}(),t=function(){function t(){this._buildSubTree=n(this._buildSubTree,this),this.build=n(this.build,this),this.depth=n(this.depth,this)}return t.prototype.depth=function(){var t,e,n;for(t in e=0,n=this._countPerDepth)0<n[t]&&e<t&&(e=t);return e},t.prototype.build=function(t){var e,n;return this._memory={},this._countPerDepth={},n=t.root,this._memory[n]=!0,e=s(n,t),this._countPerDepth[0]=1,this._buildSubTree(1,[new i(e,t)]),e},t.prototype._buildSubTree=function(t,e){var n,i,a,r,o;for(o=[],null==(n=this._countPerDepth)[t]&&(n[t]=0),a=0,r=e.length;a<r;a++)(i=e[a]).build(this._memory,o),this._countPerDepth[t]+=i.count;if(0<o.length)return this._buildSubTree(t+1,o)},t}(),{create:function(){return new t}}})}.call(this),function(){var n,i=function(t,e){return function(){return t.apply(e,arguments)}};n={width:120,height:40,margin:10,arrowMargin:120,investorWidth:130,investorArrowMargin:30},define("views/portfolios/diagram/graphical.tree",["views/portfolios/diagram/data.tree"],function(r){var e,o,d;return d=function(){function t(t){this._calculateNodePositionFromChildren=i(this._calculateNodePositionFromChildren,this),this.calculatePositions=i(this.calculatePositions,this),this._width=t.width||n.width,this._height=t.height||n.height,this._margin=t.margin||n.margin,this._arrowMargin=t.arrowMargin||n.arrowMargin,this._investorWidth=t.investorWidth||n.investorWidth,this._investorArrowMargin=t.investorArrowMargin||n.investorArrowMargin}return t.prototype.calculatePositions=function(t){var e,n,i,a,r,o,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I;if(t){for(o=t.depth(),I=this._margin+this._height/2+o*(this._height+this._arrowMargin),d=0,c=(h=t.nodes()).length;d<c;d++)(y=h[d]).y=I;if(t.next())for(this.calculatePositions(t.next()),l=0,p=h.length;l<p;l++)!(e=(y=h[l]).children)||e.length<1?alert("ERROR"):this._calculateNodePositionFromChildren(y);else{for(T=-this._width/2,n=this._margin,r=this._width+this._margin,i=[],a=null,s=0,m=h.length;s<m;s++){if((y=h[s]).parent!==a){if(a){if(this._calculateNodePositionFromChildren(a),a.minX<n)for(g=n-a.minX,u=0,f=i.length;u<f;u++)i[u].x+=g,T+=g;i.length<1&&alert("ERROR"),n=i[i.length-1].x+this._width/2+this._margin}a=y.parent,i=[]}T+=r,y.hasInvestors&&(T+=this._investorWidth+this._investorArrowMargin),y.x=T,i.push(y)}if(a&&(this._calculateNodePositionFromChildren(a),a.minX<n))for(g=n-a.minX,v=0,b=i.length;v<b;v++)i[v].x+=g}return null}},t.prototype._calculateNodePositionFromChildren=function(t){var e,n,i,a,r,o,d;if(!(n=t.children)||n.length<1)return alert("ERROR");for(d=(i=n[0]).x,o=i.x,a=0,r=n.length;a<r;a++)(e=n[a]).x<d&&(d=e.x),e.x>o&&(o=e.x);return t.x=(o+d)/2,t.minX=t.x-this._width/2,t.hasInvestors?t.minX-=this._investorWidth+this._investorArrowMargin:void 0},t}(),o=function(){function n(t,e){this._depth=t,this.add=i(this.add,this),this.nodes=i(this.nodes,this),this.depth=i(this.depth,this),this.next=i(this.next,this),this._uiNodes=[],this._nextLayer=this._depth<e?new n(this._depth+1,e):null}return n.prototype.next=function(){return this._nextLayer},n.prototype.depth=function(){return this._depth},n.prototype.nodes=function(){return this._uiNodes},n.prototype.add=function(t,e){var n,i,a,r,o,d;if(d={data:t,parent:e,hasInvestors:!1},e&&(null==e.children&&(e.children=[]),e.children.push(d)),this._uiNodes.push(d),this._nextLayer)if(!(n=null!=t?t.nodes:void 0)||n.length<=0)this._nextLayer.add(null,d);else for(i=0,a=n.length;i<a;i++)r=n[i],this._nextLayer.add(r,d);else 0<(null!=t&&null!=(o=t.nodes)?o.length:void 0)&&alert("ERROR TODO");return null},n}(),e=function(){function t(t){this._options=null!=t?t:{},this.build=i(this.build,this),this.viewBox=i(this.viewBox,this),_.defaults(this._options,n),this._viewBox=null}return t.prototype.viewBox=function(){return this._viewBox},t.prototype.build=function(t){var e,n,i,a;return(i=(a=r.create()).build(t))?(e=a.depth(),(n=new o(0,e)).add(i),new d(this._options).calculatePositions(n),this._viewBox=this._computeViewBox(n),n.nodes()):null},t.prototype._computeViewBox=function(t){var e,n,i,a,r,o,d,l,s;if(i=t.next())return this._computeViewBox(i);for(e=s=d=0,n=(r=t.nodes()).length;e<n;e++)s<(l=(a=r[e]).y+this._options.height/2+this._options.margin)&&(s=l),d<(o=a.x+this._options.width/2+this._options.margin)&&(d=o);return{x0:0,y0:0,x1:d,y1:s}},t}(),{create:function(t){return new e(t)}}})}.call(this),function(){var I,s=function(t,e){return function(){return t.apply(e,arguments)}};I={box:{width:120,height:40,color:["lightBlue","white"],text:{color:"black",margin:5},border:{color:"black"},highlight:{color:["lightYellow","white"]},link:{color:["lightGreen","white"],highlight:{color:["lightYellow","white"]}},property:{color:["coral","white"],highlight:{color:["lightYellow","white"]}},company:{color:["orange","white"],highlight:{color:["lightYellow","white"]}},investors:{width:130,margin:30}},arrow:{color:"black",head:{width:12,height:8},height:120},margin:10},define("views/portfolios/diagram/diagram",["object/data/ObjectCategories","object/data/ObjectTypes","ui/svg/core/svg","ui/svg/core/svg.text.length","views/portfolios/diagram/svg/svg.arrow","views/portfolios/diagram/svg/svg.box","views/portfolios/diagram/svg/svg.click","views/portfolios/diagram/svg/svg.tooltip","views/portfolios/diagram/graphical.tree"],function(t,e,n,T,r,o,m,i,d){var v,a,y,h,l;return a=t.ObjectCategories,y=e.ObjectTypes,h=a.properties,v=a.companies,l=function(){function t(t){this._jElement=t,this._createClickHandler=s(this._createClickHandler,this),this._createGraphicalTree=s(this._createGraphicalTree,this),this._createLinkBoxColor=s(this._createLinkBoxColor,this),this._createCompanyBoxColor=s(this._createCompanyBoxColor,this),this._createPropertyBoxColor=s(this._createPropertyBoxColor,this),this._createBoxColor=s(this._createBoxColor,this),this._createBoxDrawer=s(this._createBoxDrawer,this),this._createArrowDrawer=s(this._createArrowDrawer,this),this._drawInvestors=s(this._drawInvestors,this),this._drawArrow=s(this._drawArrow,this),this._drawNode=s(this._drawNode,this),this.setup=s(this.setup,this),this.clean=s(this.clean,this),this._SVG=n.create(this._jElement),this._tooltipHandler=i.create(this._SVG),this._arrow=null,this._box=null,this._boxColor=null,this._boxPropertyColor=null,this._boxCompanyColor=null,this._boxLinkColor=null,this._clickHandler=null}return t.prototype.clean=function(){return this._clickHandler=null,this._boxLinkColor=null,this._boxPropertyColor=null,this._boxCompanyColor=null,this._boxColor=null,this._box=null,this._arrow=null,this._tooltipHandler.clean(),this._SVG.clean()},t.prototype.setup=function(t,e){var n,i,a,r,o,d,l,s,u,c,p,m,f,b,v,y,h,g;if(null==t&&(t={}),null==e&&(e={}),this.clean(),this._boxWidth=(null!=(s=e.box)?s.width:void 0)||I.box.width,this._boxHeight=(null!=(u=e.box)?u.height:void 0)||I.box.height,this._boxMargin=(null!=(c=e.box)&&null!=(p=c.text)?p.margin:void 0)||I.box.text.margin,this._investorWidth=(null!=(m=e.box)&&null!=(f=m.investors)?f.width:void 0)||I.box.investors.width,this._investorArrowMargin=(null!=(b=e.box)&&null!=(v=b.investors)?v.margin:void 0)||I.box.investors.margin,this._arrow=this._createArrowDrawer(e),this._box=this._createBoxDrawer(e),this._boxColor=this._createBoxColor(e),this._boxPropertyColor=this._createPropertyBoxColor(e),this._boxCompanyColor=this._createCompanyBoxColor(e),this._boxLinkColor=this._createLinkBoxColor(e),this._clickHandler=this._createClickHandler(e),l=(y=this._createGraphicalTree(e)).build(t),(h=y.viewBox())&&(g=h.x1-h.x0,i=h.y1-h.y0,(n=this._SVG.domSVG()).setAttribute("width",g+"px"),n.setAttribute("height",i+"px"),n.setAttribute("viewBox",h.x0+" "+h.y0+" "+h.x1+" "+h.y1)),l){o=T.create();try{for(a=0,r=l.length;a<r;a++)d=l[a],this._drawNode(d,o)}finally{null!=o&&o.clean()}}return null},t.prototype._drawNode=function(t,e){var n,i,a,r,o,d,l,s,u,c,p,m,f,b;if(t&&t.data){if(f=t.data.link,c=null!=(b=y.get(t.data.type))?b.isOf(h):void 0,u=null!=b?b.isOf(v):void 0,l=(s=this._box.add(t.x,t.y,t.data.name,e)).box,a=this._boxColor,f?a=this._boxLinkColor:c?a=this._boxPropertyColor:u&&(a=this._boxCompanyColor),a.applyFill(l),this._clickHandler.add(t.data.id,t.data.name,s,f),this._tooltipHandler.add(t.data,s),i=t.children)for(r=i.length,d=(this._boxWidth-2*this._boxMargin)/(r+1),o=t.x-this._boxWidth/2+this._boxMargin,p=0,m=i.length;p<m;p++)n=i[p],o+=d,this._drawArrow(t,n,o-t.x),this._drawNode(n,e);return this._drawInvestors(t)}},t.prototype._drawArrow=function(t,e,n){var i,a,r,o,d,l;if(t&&e&&e.data)return d=e.data.value,l=kendo.toString(d,"p2"),i=t.x+n,a=t.y+this._boxHeight/2,r=e.x,o=e.y-this._boxHeight/2,this._arrow.add(i,a,r,o,l)},t.prototype._drawInvestors=function(t){var e,n,i,a,r,o,d,l,s,u,c,p,m;if(t&&t.hasInvestors&&t.data&&t.data.investors&&0<(a=t.data.investors).length){for(m=t.y-this._boxHeight/2,p=t.x-this._investorWidth-this._boxWidth/2-this._investorArrowMargin,10,l=this._boxHeight/10,s=0,e=a.length>l,c=this._investorWidth,r=n=0,o=a.length;r<o;r++)i=a[r],++n,!e||n<l?(m+=10,(u=this._SVG.create("text")).setAttribute("font-size",8),u.setAttribute("x",p),u.setAttribute("y",m),this._SVG.appendText(u,kendo.toString(i.value,"p2")+": "+i.name),u.getComputedTextLength()>c&&(u.setAttribute("textLength",c),u.setAttribute("lengthAdjust","spacingAndGlyphs"))):s+=i.value;return e&&(m+=10,(u=this._SVG.create("text")).setAttribute("font-size",8),u.setAttribute("x",p),u.setAttribute("y",m),this._SVG.appendText(u,kendo.toString(s,"p2")+": Others"),u.getComputedTextLength()>c&&(u.setAttribute("textLength",c),u.setAttribute("lengthAdjust","spacingAndGlyphs"))),(d=this._SVG.create("line")).setAttribute("stroke","black"),d.setAttribute("stroke-width","1"),d.setAttribute("x1",t.x-this._boxWidth/2-this._investorArrowMargin+5),d.setAttribute("x2",t.x-this._boxWidth/2-this._investorArrowMargin+5),d.setAttribute("y1",t.y-this._boxHeight/2+5),d.setAttribute("y2",t.y+this._boxHeight/2-5),this._arrow.add(t.x-this._boxWidth/2-this._investorArrowMargin+5,t.y,t.x-this._boxWidth/2,t.y)}},t.prototype._createArrowDrawer=function(t){var e,n,i,a;return null==t&&(t={}),n={color:(null!=(e=t.arrow)?e.color:void 0)||I.arrow.color,head:{width:(null!=e&&null!=(i=e.head)?i.width:void 0)||I.arrow.head.width,height:(null!=e&&null!=(a=e.head)?a.height:void 0)||I.arrow.head.height}},r.create(this._SVG,n)},t.prototype._createBoxDrawer=function(t){var e,n,i,a,r;return null==t&&(t={}),n={color:(null!=(e=t.box)?e.color:void 0)||I.box.color,width:(null!=e?e.width:void 0)||I.box.width,height:(null!=e?e.height:void 0)||I.box.height,text:{color:(null!=e&&null!=(i=e.text)?i.color:void 0)||I.box.text.color,margin:(null!=e&&null!=(a=e.text)?a.margin:void 0)||I.box.text.margin},border:{color:(null!=e&&null!=(r=e.border)?r.color:void 0)||I.box.border.color}},o.create(this._SVG,n)},t.prototype._createBoxColor=function(t){var e,n;return null==t&&(t={}),e=(null!=t&&null!=(n=t.box)?n.color:void 0)||I.box.color,this._SVG.createColor(e)},t.prototype._createPropertyBoxColor=function(t){var e,n,i;return null==t&&(t={}),e=(null!=t&&null!=(n=t.box)&&null!=(i=n.property)?i.color:void 0)||I.box.property.color,this._SVG.createColor(e)},t.prototype._createCompanyBoxColor=function(t){var e,n,i;return null==t&&(t={}),e=(null!=t&&null!=(n=t.box)&&null!=(i=n.company)?i.color:void 0)||I.box.company.color,this._SVG.createColor(e)},t.prototype._createLinkBoxColor=function(t){var e,n,i;return null==t&&(t={}),e=(null!=t&&null!=(n=t.box)&&null!=(i=n.link)?i.color:void 0)||I.box.link.color,this._SVG.createColor(e)},t.prototype._createGraphicalTree=function(t){var e,n,i,a,r;return null==t&&(t={}),n={width:(null!=(e=t.box)?e.width:void 0)||I.box.width,height:(null!=e?e.height:void 0)||I.box.height,margin:t.margin||I.margin,arrowMargin:(null!=t&&null!=(i=t.arrow)?i.height:void 0)||I.arrow.height,investorWidth:(null!=e&&null!=(a=e.investors)?a.width:void 0)||I.box.investors.width,investorArrowMargin:(null!=e&&null!=(r=e.investors)?r.margin:void 0)||I.box.investors.margin},d.create(n)},t.prototype._createClickHandler=function(t){var e,n,i,a,r,o,d,l,s,u,c,p;return null==t&&(t={}),e={color:(null!=(n=t.box)&&null!=(i=n.highlight)?i.color:void 0)||I.box.highlight.color,linkColor:(null!=(r=t.box)&&null!=(o=r.link)&&null!=(d=o.highlight)?d.color:void 0)||I.box.link.highlight.color,propertyColor:(null!=(l=t.box)&&null!=(s=l.property)&&null!=(u=s.highlight)?u.color:void 0)||I.box.property.highlight.color,companyColor:(null!=(c=t.box)&&null!=(p=c.company)&&null!=(a=p.highlight)?a.color:void 0)||I.box.company.highlight.color},m.create(this._SVG,e)},t}(),{create:function(t){return new l(t)}}})}.call(this),function(){var C,w;w="#folioDiagramToolbar",C="currentFolio",define("views/portfolios/portfolios.diagram",["lodash","jquery","i18n","kendo","views/portfolios/diagram/diagram","core/util/DateUtils","core/web/WebLocation"],function(n,d,l,t,s,e,i){var u,r,a,o,c,p,m,f,b,v,y,h,g,T,I;return r=i.WebLocation,u=e.DateUtils,c=function(){return d("#folioDiagram")},function(t){var e;return null!=(e=t.query)&&e.abort(),t.query=null},b=function(t,e){if(e&&n.has(e,"root"))return t.diagram.setup(e),null;c().append(d("<h3>").text(l.t("portfolio:diagram.noDiagram")))},f=function(t){return null},m=function(t){return t.query=null},p=function(t,e,n){var i,a;if(!t.query)return i={object:e},n&&(i.date=u.toJson(n)),a=r.resolve("computation/investment.json"),t.query=d.getJSON(a,i).done(b.bind(null,t)).fail(f.bind(null,t)).always(m.bind(null,t)),null},g=function(t){var e;return null!=(e=t.diagram)&&e.clean(),c().empty()},T=function(t){var e,n,i,a,r,o;return n=c(),null==(e=t.diagramContext).diagram&&(e.diagram=s.create(n)),g(e),r=null!=(i=(a=t.model).get(C))?i.id:void 0,o=u.toDate(a.get("viewerDate")),r?p(e,r,o):n.append(d("<h3>").text(l.t("portfolio:diagram.noDiagram")))},o=function(t){var e,n;return null!=(n=(e=t.diagramContext).toolbar)&&n.destroy(),e.toolbar=null,d(w).empty()},y=function(t){return I(t)},h=function(t){var e,n,i;return e=t.diagramContext,o(t),i={items:[{type:"button",text:l.t("portfolio:actions.refreshDiagram"),icon:"refresh",click:y.bind(null,t)}]},(n=d(w)).kendoToolBar(i),e.toolbar=n.data("kendoToolBar")},v=function(t,e){if(e.field===C)return I(t)},a=function(t){return t.model.bind("change",v.bind(null,t))},{updateRawModel:function(t,e){return null},init:function(t){var e;return e={toolbar:null},t.diagramContext=e,h(t),a(t),null},setupDiagram:I=function(t){return T(t)}}})}.call(this),define("core/api/WindowType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WindowType=void 0;var r,o;(r=e.WindowType||(e.WindowType={}))[r.PORTFOLIO=1]="PORTFOLIO",r[r.COMPANY=2]="COMPANY",(o=e.WindowType||(e.WindowType={})).getName=n.EnumUtils.createNameFn("site:WindowType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosWindowType",o,!0),o.column=a.EnumColumnUtils.createFactory(o,o.widget)}),define("preferences/repository/PreferenceRepository",["require","exports","core/web/WebHttp"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreferenceRepository=void 0;var n=function(){function t(){}return t.savePreference=function(t){return i.WebHttp.postJson("preference/save/save.json",{data:JSON.stringify(t)})},t.fetchPreferenceIdentifiables=function(t){return i.WebHttp.getJson("preference/load/list.json",{windowType:t})},t.deletePreference=function(t){return i.WebHttp.destroyJson("preference/load/delete.json",{id:t})},t.deletePreferences=function(t,e){var n={ids:t,windowType:e};return i.WebHttp.destroyJson("preference/delete/selections.json",{data:JSON.stringify(n)})},t}();e.PreferenceRepository=n}),define("text!templates/preferences/preference.save.columns.window.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="name" data-i18n="portfolio:actions.name"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="name" class="k-textbox" type="text" data-bind="value: name" />\n\t\t\t</td>\n\t\t</tr>\n\t\t\n\t</table>\n\n\t<div class="formWindowButtons">\n\t\t<button id="okClickId" class="k-primary" data-role="button" data-icon="check" data-bind="click: okClick, enabled: isValid">#= $.t("preference:actions.ok")#</button>\n\t\t<button data-role="button" data-icon="cancel" data-bind="click: cancelClick">#= $.t("preference:actions.cancel")#</button>\n\t</div>\n</div>'}),define("preferences/views/PreferenceSaveColumnsWindow",["require","exports","text!templates/preferences/preference.save.columns.window.html","core/data/DObservableBuilder","i18n"],function(t,e,s,u,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreferenceSaveColumnsWindow=void 0;var n=function(){function t(){}return t.open=function(t,e){return d=t,l=e,new Promise(function(t,e){var n=kendo.template(s)({}),i=$("<div>").addClass("formWindow").appendTo($(document.body));i.html(n),i.kendoWindow({modal:!0,width:400,minWidth:300,visible:!1});var a,r=i.data("kendoWindow");r.bind("close",function(){return kendo.destroy(i),i.remove(),t(a),!0});var o=u.DObservableBuilder.of(d).add("isValid",function(t){return!!t.get("name")}).add("okClick",function(t){a=t.toJson(),r.close()}).add("cancelClick",function(t){a=void 0,r.close()}).build();c.I18N.localize(i),o.bind(i),r.title(l).open().center()});var d,l},t}();e.PreferenceSaveColumnsWindow=n}),define("text!templates/portfolios/portfolio.column.edit.window.html",[],function(){return'<div id="portfolioColumnEditWindowDiv">\n\t<div id="columnToolbar"></div>\n\t<p></p>\n\t<p></p>\n\t<p></p>\n\t<p></p>\n\t<label for=\'preference\' data-i18n="preference:title"></label>\n\t<input id=\'preference\' data-role="dropdownlist"\n\t\tdata-bind=\'value:preference, source:preferenceSource, events:{change:preferenceChange}\' data-value-field="id"\n\t\tdata-text-field="name" data-option-label="--" data-auto-width="true" />\n\t<p></p>\n\t<div class="portfolio-edit-column-section">\n\n\t\t<label for="portfolioColumnType" id="columnTypeLabel" data-i18n="preference:listBox.columnsType"></label>\n\t\t<label for="portfolioListColumns" id="columnSourceLabel" data-i18n="preference:listBox.sourceList"></label>\n\t\t<label for="portfolioSelectedColumns" data-i18n="preference:listBox.targetList"></label>\n\t\t<br />\n\t\t<select id="portfolioColumnType" data-bind="source:mainSource,events: {\n\t\t\tchange: mainChange,}"></select>\n\t\t<select id="portfolioSourceColumns" data-bind="source:sourceColumns"></select>\n\t\t<select id="portfolioTargetColumns"></select>\n\t</div>\n</div>'}),define("colonnage/events/TargetEvents",["require","exports","lodash","colonnage/ui/ColonnageUI"],function(t,e,a,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TargetEvents=void 0;var n=function(){function t(){}return t.setEventsBinding=function(l,s,u){s.getListBox(l).bind("add",function(t){var e=t.dataItems;s.getPreference.content.forEach(function(t){(a.includes(e.map(function(t){return t.field}),t.field)||a.includes(e.map(function(t){return t.name}),t.name))&&(t.hidden=!1,t.width=i.ColonnageUI.DEFAULT_COLUMN_WIDTH)});var n=t.sender.select();0<n.length&&1===t.dataItems.length&&u.set("targetAddEvent",{data:t.dataItems[0],index:n.index()+1}),u.set("targetChangeEvent",!0)}),s.getListBox(l).bind("remove",function(t){var e=t.dataItems,n=s.getPreference;n.content.forEach(function(t){(a.includes(e.map(function(t){return t.field}),t.field)||a.includes(e.map(function(t){return t.name}),t.name))&&(t.hidden=!0)}),s.setPreference=n;var i=s.initSourceList(s.getSourceType);i.read().then(function(){var t=s.getDataFromListBox(l);u.set("sourceColumns",s.dataSourceArray(s.filterData(i.data().toJSON(),t)))}),u.set("targetChangeEvent",!0)}),s.getListBox(l).bind("reorder",function(t){t.preventDefault();var e=t.sender.dataSource,n=t.dataItems[0],i=t.offset||0,a=e.indexOf(n)+i;e.remove(n),e.insert(a,n);var r=s.getListBox(l);r.select(r.items()[a]);var o=s.getPreference.content.filter(function(t){return t.hidden}),d=e.data().toJSON().concat(o);s.getPreference.content=d,u.set("targetChangeEvent",!0)})},t}();e.TargetEvents=n}),define("colonnage/events/SourceEvents",["require","exports","../ui/ColonnageImpUI"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SourceEvents=void 0;var n=function(){function t(){}return t.setEventsBinding=function(t,e,n){i.porfolioColonnageUI.getListBox(t).bind("dragend",function(t){n.getListBox(e).select(-1)}),i.porfolioColonnageUI.getListBox(t).bind("drag",function(t){n.getListBox(e).select(-1)}),i.porfolioColonnageUI.getListBox(t).bind("dragstart",function(t){n.getListBox(e).select(-1)})},t}();e.SourceEvents=n}),define("portfolios/repository/PortfolioRepository",["require","exports","core/web/WebHttp","core/web/AsyncWebHttp"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PortfolioRepository=void 0;var a=function(){function t(){}return t.getPortfolio=function(t){return i.AsyncWebHttp.getJson("portfolio/viewer",t)},t.getPortfolioByInvestor=function(t){return n.WebHttp.getJson("investor/portfolio.json?"+$.param({investorId:t}))},t.getKriColumns=function(){return n.WebHttp.getJson("list/kri/portfolio/column.json")},t}();e.PortfolioRepository=a}),define("colonnage/views/ColonnageEditColumnWindow",["require","exports","text!templates/portfolios/portfolio.column.edit.window.html","i18n","lodash","dashboard/component/portfolio/ui/PortfolioComponentColumnType","colonnage/events/TargetEvents","colonnage/events/SourceEvents","core/ui/Confirmation","core/util/Logger","portfolios/repository/PortfolioRepository","colonnage/ui/ColonnageUI"],function(t,e,b,v,a,r,y,h,g,T,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColonnageEditColumnWindow=void 0;var I="#portfolioSourceColumns",C="#portfolioTargetColumns",w="#portfolioColumnType";function k(n){var i=n.getPreference;o.PortfolioRepository.getKriColumns().then(function(t){var e=n.generateDefaultColumns(t).filter(function(t){return!(a.includes(i.content.map(function(t){return t.field}),t.field)||a.includes(i.content.map(function(t){return t.name}),t.title))});0<e.length&&e.forEach(function(t){var e={id:i.content.length+1,width:a.isNumber(t.width)&&!a.isNil(t.width)?t.width:d.ColonnageUI.DEFAULT_COLUMN_WIDTH,hidden:!!t.hidden&&t.hidden,field:t.field,name:t.title};i.content.push(e)})})}function E(t){t.removeClass("k-state-default"),t.addClass("k-state-disabled")}var n=function(){function t(){}return t.open=function(l,s,t){var u=!1;s.sourcePreference.read(),s.getPreference||(s.setPreference=s.getCurrentModel());var d,c,p,m,f=kendo.observable({targetAddEvent:{},targetChangeEvent:!1,preference:s.getPreference,preferenceSource:function(){return s.sourcePreference},mainSource:s.dataSourceMain(r.PortfolioComponentColumnType),sourceColumns:function(){var t=s.initSourceList(2),e=s.getDataFromListBox($(C));return s.dataSourceArray(s.filterData(t.data().toJSON(),e))},preferenceChange:function(t){var e=f.get("preference"),n=[];e?(s.setPreference=e,n=s.getCurrentDataListBox().filter(function(t){return!t.hidden}),s.loadColumns(l)):(s.resetColumns(l),n=s.getCurrentModel().content.filter(function(t){return!t.hidden})),s.setDataToListBox($(C),n);var i=s.getListBox($(w));i.select(i.items().first()),k(s),E($("#saveColumns"))},mainChange:function(t){var e,n=t.sender.select(),i=t.sender.dataItem(n);i?(s.setSourceType=i.id,e=s.initSourceList(i.id)):e=s.initSourceList(r.PortfolioComponentColumnType.FINANCIAL);var a=s.getDataFromListBox($(C));e.read().then(function(){f.set("sourceColumns",s.dataSourceArray(s.filterData(e.data().toJSON(),a)))})}});return f.bind("change",function(t){if("targetAddEvent"===t.field){var e=f.get("targetAddEvent"),n=s.getListBox($(C)),i=n.dataSource;setTimeout(function(){i.remove(e.data),i.insert(e.index,e.data),n.select(n.items()[e.index])},50)}if("preference"===t.field){var a=f.get("preference"),r=[];a?(s.setPreference=a,r=s.getCurrentDataListBox().filter(function(t){return!t.hidden}),s.loadColumns(l)):(s.resetColumns(l),r=s.getCurrentModel().content.filter(function(t){return!t.hidden})),s.setDataToListBox($(C),r);var o=s.getListBox($(w));o.select(o.items().first())}var d;"targetChangeEvent"===t.field&&(u?u=!1:(u=!0,f.get("targetChangeEvent")&&((d=$("#saveColumns")).removeClass("k-state-disabled"),d.addClass("k-state-default"),f.set("targetChangeEvent",!1))))}),d=l,c=f,p=s,m=t,new Promise(function(t,e){k(p);var n=kendo.template(b)({}),i=$("<div>").addClass("formWindow").appendTo($(document.body));i.html(n),i.kendoWindow({modal:!0,width:750,height:650});var a,r=i.data("kendoWindow");r.bind("close",function(){return kendo.destroy(i),i.remove(),t(a),!0}),v.I18N.localize(i),r.title(m||v.I18N.t("preference:actions.load")).open().center(),p.initToolBar($("#columnToolbar")).add({type:"buttonGroup",text:"Actions",buttons:[{id:"saveColumns",text:v.I18N.t("ui:grid.savePreference"),icon:"save",click:function(){p.saveColonnage(d,c),E($("#saveColumns"))}},{id:"saveAsColumns",text:v.I18N.t("ui:grid.saveAsPreference"),icon:"save",click:function(){return p.saveAsColonnage(c)}},{id:"resetColumns",text:v.I18N.t("ui:grid.resetPreference"),icon:"reload",click:function(){var t=[],e=p.loadDefaultPreference();e?(p.setPreference=e,t=p.getCurrentDataListBox().filter(function(t){return!t.hidden}),p.loadColumns(d),c.set("preference",e)):(p.resetColumns(d),t=p.getCurrentModel().content.filter(function(t){return!t.hidden})),p.setDataToListBox($(C),t);var n=$(w).data("kendoListBox");n.select(n.items().first())}},{id:"closeWindow",text:v.I18N.t("ui:grid.close"),icon:"close",click:function(){if($("#saveColumns").hasClass("k-state-disabled"))a=p.getPreference,r.close();else{var t=p.getPreference.name?"Save preferences to "+p.getPreference.name+" before closing?":"Save preferences before closing?";g.Confirmation.confirm("Save change",t).then(function(t){t&&p.saveColonnage(d,c),a=p.getPreference,r.close()}).catch(function(t){T.Logger.error(t)})}}}]}),E($("#saveColumns")),p.initListBox($(w),$(I),$(C),"portfolioSourceColumns","portfolioTargetColumns",p.getCurrentDataListBox()),kendo.bind(i,c);var o=$(w).data("kendoListBox");o.select(o.items().first()),h.SourceEvents.setEventsBinding($(I),$(C),p),y.TargetEvents.setEventsBinding($(C),p,c)})},t}();e.ColonnageEditColumnWindow=n}),define("text!templates/portfolios/portfolios.viewer.toolbar.html",[],function(){return'<ul id="folioViewerToolbarMenu" class="gridToolbarMenu d-sprite-wrapper" data-role="menu">\n    <li>\n        <span class="k-sprite d-grid"></span>\n        <span data-i18n="ui:grid.columns"></span>\n        <ul>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="editPreference" data-i18n="ui:grid.editPreference"></a>\n            </li>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="loadPreference" data-i18n="ui:grid.loadPreference"></a>\n            </li>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="savePreference" data-i18n="ui:grid.savePreference"></a>\n            </li>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="deletePreference" data-i18n="ui:grid.deletePreference"></a>\n            </li>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="deleteAllPreferences" data-i18n="ui:grid.deleteAllPreferences"></a>\n            </li>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="resetPreference" data-i18n="ui:grid.resetPreference"></a>\n            </li>\n        </ul>\n    </li>\n    <li id="forwardForexId">\n            <span  class=\'k-sprite d-new\'></span>\n            <span data-i18n=\'portfolio:actions.forwardForex\'></span>\n    </li>\n    <li data-key="excel">\n        <span  class=\'k-icon k-i-excel\'></span>\n        <span data-i18n=\'portfolio:actions.saveAsExcel\'></span>\n</li>\n    \n</ul>'}),define("text!templates/preferences/preference.delete.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="preferenceList" data-i18n="preference:preferences"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="preferenceListBox" data-bind="value: preferences"/>\n\t\t\t</td>\n\t\t</tr>\n\n\t</table>\n\n\t<div class="formWindowButtons">\n\t\t<button id="okClickId" class="k-primary" data-role="button" data-icon="check"\n\t\t\tdata-bind="click: okClick, enabled: isValid">#= $.t("preference:actions.ok")#</button>\n\t\t<button data-role="button" data-icon="cancel" data-bind="click: cancelClick">#=\n\t\t\t$.t("preference:actions.cancel")#</button>\n\t</div>\n</div>'}),define("preferences/ui/PreferenceColumnNameUI",["require","exports","../repository/PreferenceRepository"],function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreferenceColumnNameUI=void 0;var n=function(){function t(){}return t.columnsWidget=function(e){var n={read:function(t){a.PreferenceRepository.fetchPreferenceIdentifiables(e).then(function(t){return t.map(function(t){return{id:t.id,windowType:t.windowType,name:t.name,content:t.content}})}).then(t.success).catch(t.error)}},i={model:{id:"id",fields:{portfolioId:{type:"number"},name:{type:"string"},content:{nullable:!0}}}};return{widget:function(t){var e={autoWidth:!0,dataSource:{transport:n,schema:i},dataTextField:"name",dataValueField:"id",optionLabel:"--"};return t.kendoDropDownList(e)},widgetListBox:function(t){var e={dataSource:{transport:n,schema:i},dataTextField:"name",dataValueField:"id",selectable:"multiple"};return t.kendoListBox(e)},widgetMultiSelect:function(t){var e={dataSource:{transport:n,schema:i},dataTextField:"name",dataValueField:"id",placeholder:"Select attendees..."};return t.kendoMultiSelect(e)}}},t}();e.PreferenceColumnNameUI=n}),define("preferences/views/PreferenceDeleteWindow",["require","exports","text!templates/preferences/preference.delete.html","core/data/DObservableBuilder","i18n","../ui/PreferenceColumnNameUI"],function(t,e,s,u,c,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreferenceDeleteWindow=void 0;var n=function(){function t(){}return t.open=function(t,e){return d=t,l=e,new Promise(function(t,e){var n=kendo.template(s)({}),i=$("<div>").addClass("formWindow").appendTo($(document.body));i.html(n),p.PreferenceColumnNameUI.columnsWidget(d).widget(i.find("#preferenceList")),p.PreferenceColumnNameUI.columnsWidget(d).widgetMultiSelect(i.find("#preferenceListBox")),i.kendoWindow({modal:!0,width:400,minWidth:300,visible:!1});var a,r=i.data("kendoWindow");r.bind("close",function(){return kendo.destroy(i),i.remove(),t(a),!0});var o=u.DObservableBuilder.of({}).add("okClick",function(t){a=t.get("preferences"),r.close()}).add("isValid",function(t){return!!t.get("preferences")}).add("cancelClick",function(){a=void 0,r.close()}).build();c.I18N.localize(i),o.bind(i),r.title(l||c.I18N.t("preference:actions.delete")).open().center()});var d,l},t}();e.PreferenceDeleteWindow=n}),define("text!templates/preferences/preference.load.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="preferenceId" data-i18n="preference:title"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="preferenceId" data-bind="value: preference"/>\n\t\t\t</td>\n\t\t</tr>\n\n\t</table>\n\n\t<div class="formWindowButtons">\n\t\t<button id="okClickId" class="k-primary" data-role="button" data-icon="check"\n\t\t\tdata-bind="click: okClick, enabled: isValid">#= $.t("preference:actions.ok")#</button>\n\t\t<button data-role="button" data-icon="cancel" data-bind="click: cancelClick">#=\n\t\t\t$.t("preference:actions.cancel")#</button>\n\t</div>\n</div>'}),define("preferences/views/PreferenceLoadWindow",["require","exports","text!templates/preferences/preference.load.html","core/data/DObservableBuilder","i18n","../ui/PreferenceColumnNameUI"],function(t,e,s,u,c,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreferenceLoadWindow=void 0;var n=function(){function t(){}return t.open=function(t,e){return d=t,l=e,new Promise(function(t,e){var n=kendo.template(s)({}),i=$("<div>").addClass("formWindow").appendTo($(document.body));i.html(n),p.PreferenceColumnNameUI.columnsWidget(d).widget(i.find("#preferenceId")),i.kendoWindow({modal:!0,width:400,minWidth:300,visible:!1});var a,r=i.data("kendoWindow");r.bind("close",function(){return kendo.destroy(i),i.remove(),t(a),!0});var o=u.DObservableBuilder.of({}).add("okClick",function(t){a=t.get("preference"),r.close()}).add("isValid",function(t){return!!t.get("preference")}).add("cancelClick",function(){a=void 0,r.close()}).build();c.I18N.localize(i),o.bind(i),r.title(l||c.I18N.t("preference:actions.load")).open().center()});var d,l},t}();e.PreferenceLoadWindow=n}),define("history/web/ForwardForexMap",["require","exports","core/web/UrlBuilder"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForwardForexMap=void 0;var i=function(){function t(){}return t.forwardForexEdit=function(t){return n.UrlBuilder.from("forward/forex/object/edit").add("id",t).build()},t}();e.ForwardForexMap=i}),define("colonnage/ui/ColonnageImpUI",["require","exports","ui/grid/tag.columns","ui/grid/state.persistence","site","views/portfolios/portfolios.diagram","tslib","dashboard/component/portfolio/ui/PortfolioComponentColumnType","core/api/PortfolioViewerColumn","lodash","risk/repository/RiskIndicatorRepository","tag/repository/TagDefinitionRepository","./ColonnageUI","core/util/EnumUtils","finance/data/FinancialValueCategory","core/ui/NumberUI","core/api/WindowType","preferences/repository/PreferenceRepository","i18n","preferences/views/PreferenceSaveColumnsWindow","core/util/Logger","../views/ColonnageEditColumnWindow","core/ui/Confirmation","portfolios/repository/PortfolioRepository","core/util/DateUtils","core/web/WebLocation","text!templates/portfolios/portfolios.viewer.toolbar.html","core/ui/grid/GridUtils","core/ui/grid/column/ColumnUtils","preferences/views/PreferenceDeleteWindow","preferences/views/PreferenceLoadWindow","portfolio/views/viewer/PortfolioViewerColumnFactory","history/web/ForwardForexMap","core/ui/PercentUI","core/ui/grid/GridDetailCommand","portfolio/views/viewer/DetailOwnerWindow","core/util/ObservableUtils"],function(t,e,i,n,a,r,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StressColonnageUI=e.PorfolioInvestorColonnageUI=e.CompanyColonnageUI=e.porfolioColonnageUI=e.ColonnageImpUI=void 0;var M="#folioViewerGrid",j=$("<a href='#'class='k-pager-refresh k-link' title='Refresh' aria-label='Refresh'><span class='k-icon k-i-reload'></span></a>");var o=function(e){function o(t){var n=e.call(this)||this;return n.windowType=y.WindowType.PORTFOLIO,n.preferences=[],n.kriColumns=[],n.gridElement=$(M),n.grid=null,n.preference=n.initPreference(),n.dataSourceRiskIndicator=n.dataSourceRisk(),n.dataSourceTagDefinition=n.dataSourceTag(),n.portfolioAssetTypes=new Map,n.sourceType=l.PortfolioComponentColumnType.FINANCIAL,n.portfolioAssetTypes.set("assetName",s.PortfolioViewerColumn.ASSET),n.portfolioAssetTypes.set("assetType",s.PortfolioViewerColumn.TYPE),n.portfolioAssetTypes.set("occupancy",s.PortfolioViewerColumn.OCCUPANCY),n.portfolioAssetTypes.set("weight",s.PortfolioViewerColumn.WEIGHT),n.portfolioAssetTypes.set("ownership",s.PortfolioViewerColumn.OWNERSHIP),n.portfolioAssetTypes.set("securitiesOwnership",s.PortfolioViewerColumn.SECURITIES_OWNERSHIP),n.portfolioAssetTypes.set("owner",s.PortfolioViewerColumn.OWNER),n.portfolioAssetTypes.set("financing",s.PortfolioViewerColumn.FINANCING),n.portfolioAssetTypes.set("marketValue",s.PortfolioViewerColumn.MARKET_VALUE),n.portfolioAssetTypes.set("currency",s.PortfolioViewerColumn.CURRENCY),n.portfolioAssetTypes.set("country",s.PortfolioViewerColumn.COUNTRY),n.portfolioAssetTypes.set("positionCount",s.PortfolioViewerColumn.POSITION_COUNT),n.portfolioAssetTypes.set("quantity",s.PortfolioViewerColumn.QUANTITY),n.portfolioAssetTypes.set("subAssetType",s.PortfolioViewerColumn.SUB_ASSET_TYPE),n.portfolioAssetTypes.set("issuerName",s.PortfolioViewerColumn.ISSUER),n.portfolioAssetTypes.set("city",s.PortfolioViewerColumn.CITY),n.portfolioAssetTypes.set("rate",s.PortfolioViewerColumn.RATE),n.portfolioAssetTypes.set("maturityDate",s.PortfolioViewerColumn.MATURITY_DATE),n.portfolioAssetTypes.set("actualNotional",s.PortfolioViewerColumn.ACTUAL_NOTIONAL),n.portfolioAssetTypes.set("debtInstallment",s.PortfolioViewerColumn.DEBT_INSTALLMENT),n.portfolioAssetTypes.set("nextNotionalPaymentDate",s.PortfolioViewerColumn.NEXT_NOTIONAL_PAYMENT_DATE),n.portfolioAssetTypes.set("marketValueInFundCurrency",s.PortfolioViewerColumn.MARKET_VALUE_IN_FUND_CURRENCY),n.portfolioAssetTypes.set("geographicalFocus",s.PortfolioViewerColumn.GEOGRAPHICAL_FOCUS),n.portfolioAssetTypes.set("liquidationPeriod",s.PortfolioViewerColumn.LIQUIDATION_PERIOD),n.portfolioAssetTypes.set("market",s.PortfolioViewerColumn.MARKET),n.portfolioAssetTypes.set("balanceSheet",s.PortfolioViewerColumn.BALANCE_SHEET),n.portfolioAssetTypes.set("ytm",s.PortfolioViewerColumn.YTM),n.portfolioAssetTypes.set("creditSpread",s.PortfolioViewerColumn.CREDIT_SPREAD),n.portfolioAssetTypes.set("weightedAverageLife",s.PortfolioViewerColumn.WEIGHTED_AVERAGE_LIFE),n.portfolioAssetTypes.set("duration",s.PortfolioViewerColumn.DURATION),n.portfolioAssetTypes.set("effectiveDuration",s.PortfolioViewerColumn.EFFECTIVE_DURATION),n.portfolioAssetTypes.set("investmentName()",s.PortfolioViewerColumn.INVESTMENT),n.portfolioAssetFields=new Map,n.portfolioAssetTypes.forEach(function(t,e){n.portfolioAssetFields.set(t,e)}),n.windowType=t||y.WindowType.PORTFOLIO,n.loadListPreferences(),n.loadKriColumns(),n}return d.__extends(o,e),Object.defineProperty(o.prototype,"sourceRisk",{get:function(){return this.dataSourceRiskIndicator},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"sourceTag",{get:function(){return this.dataSourceTagDefinition},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"portfolioAssetColumnTypes",{get:function(){return this.portfolioAssetTypes},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"portfolioAssetColumnFields",{get:function(){return this.portfolioAssetFields},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"sourcePreference",{get:function(){return this.preferenceDataSource(this.windowType)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"getSourceType",{get:function(){return this.sourceType},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"setSourceType",{set:function(t){this.sourceType=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"getGridElement",{get:function(){return this.gridElement},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"getWindowType",{get:function(){return this.windowType},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"setWindowType",{set:function(t){this.windowType=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"getPreference",{get:function(){return this.preference},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"setPreference",{set:function(t){this.preference=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"getGrid",{get:function(){return this.grid},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"setGrid",{set:function(t){this.grid=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"getPreferences",{get:function(){return this.preferences},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"setPreferences",{set:function(t){this.preferences=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"getKriColumns",{get:function(){return this.kriColumns},enumerable:!1,configurable:!0}),o.prototype.loadListPreferences=function(){var e=this;h.PreferenceRepository.fetchPreferenceIdentifiables(this.getWindowType).then(function(t){e.preferences=t})},o.prototype.loadKriColumns=function(){var e=this;k.PortfolioRepository.getKriColumns().then(function(t){e.kriColumns=t})},o.prototype.loadDefaultPreference=function(){var t=u.first(u.filter(this.getPreferences,function(t){return(t.name||"").toLowerCase()===m.ColonnageUI.DEFAULT_PREFERENCE_NAME}));return t||null},o.prototype.edit=function(t){var e=$(M).data("kendoGrid");this.setGrid=e,this.setPreference=this.getCurrentModel(),C.ColonnageEditColumnWindow.open(t,this,"Edit preference")},o.prototype.resetColumns=function(t){this.loadKriColumns();var e=this.kriColumns;this.setupGrid(t,this.generateDefaultColumns(e)),this.display(t),this.loadMenu(t),this.setPreference=this.initPreference();var n=this.getGrid;n&&this.initFilter(n,"quantity")},o.prototype.savePreference=function(t){var e=$(M).data("kendoGrid");this.setGrid=e,this.setPreference=this.getCurrentModel(),this.saveColonnage(t,kendo.observable({preference:this.getPreference})),e&&(e.options.scrollable=!0)},o.prototype.deletePreferences=function(a){var r=this;R.PreferenceDeleteWindow.open(this.getWindowType,g.I18N.t("preference:actions.delete")).then(function(i){i&&w.Confirmation.confirmDelete("Are you sure you want to delete selections").then(function(t){if(t){var e=u.chain(i).map(function(t){return t.name}).value(),n=u.chain(i).map(function(t){return t.id}).value();u.includes(e,r.getPreference.name)&&r.resetColumns(a),h.PreferenceRepository.deletePreferences(n,r.getWindowType).then(function(){r.loadListPreferences()})}})}).catch(function(t){return I.Logger.error(t)})},o.prototype.deleteAllPreferences=function(n){var i=this;w.Confirmation.confirmDelete("Are you sure you want to delete all").then(function(t){if(t){var e=u.chain(i.getPreferences).map(function(t){return t.id}).value();h.PreferenceRepository.deletePreferences(e,i.getWindowType).then(function(){i.resetColumns(n),i.loadListPreferences()})}})},o.prototype.cleanToolbarMenu=function(t){var e=t.viewerContext;e.menu&&e.menu.destroy(),e.menu=null},o.prototype.cleanGrid=function(t){var e=t.viewerContext;this.cleanToolbarMenu(t),e.gridState=null,this.setGrid=null,$(M).empty()},o.prototype.getRequestParameter=function(t,e){var n={portfolio:e.get("id")},i=E.DateUtils.toDate(t.get("viewerDate"));i&&(n.date=E.DateUtils.toJson(i));var a=t.get("viewerTransparency");a&&(n.transparency=a);var r=t.get("viewerPipe");r&&(n.pipe=r);var o=t.get("viewerConsolidation");o&&(n.consolidation=o.toJSON());var d=t.get("viewerStress");return d&&(n.stressId=d),n},o.prototype.loadMenu=function(t){var e=$(M).find("#folioViewerToolbarMenu");kendo.bind(e,{}),g.I18N.localize(e),e.data("kendoMenu").bind("select",function(t,e,n){var i=n.item;if("excel"===$(i).data("key")){var a=e.getGrid;return void(a&&a.saveAsExcel())}if("forwardForexId"===i.id){var r=t.model,o=r.get("currentFolio");return void(window.location.href=U.ForwardForexMap.forwardForexEdit(o.id))}var d=$(i).children(".k-link").data("key");if("editPreference"===d)e.edit(t);else if("loadPreference"===d)e.loadPreference(t);else if("resetPreference"===d){var l=e.loadDefaultPreference();l?(e.setPreference=l,e.loadColumns(t)):e.resetColumns(t)}else"savePreference"===d?e.savePreference(t):"deletePreference"===d?e.deletePreferences(t):"deleteAllPreferences"===d&&e.deleteAllPreferences(t)}.bind(null,t,this))},o.prototype.display=function(t){var e=this,n=this.getGrid;if(!n)return null;var i=t.model,a=i.get(o.P_CURRENT_FOLIO);if(!a)return null;var r=this.getRequestParameter(i,a);if(!r)return null;k.PortfolioRepository.getPortfolio(r).then(function(t){n.dataSource.data(t),e.setGrid=n}).catch(function(t){return I.Logger.error(t)}),this.setupDiagram(t)},o.prototype.setupGrid=function(n,t){var i=this;this.cleanGrid(n);var e=kendo.template(S),a={dataSource:this.createGridDataSourceOptions(),pageable:N.GridUtils.defaultPageableFolio(),height:600,scrollable:!0,columns:t,columnMenu:!0,filter:function(t){var e={filters:[]};e=t.filter?t.filter.filters:i.removeItemFromFilter(t.field),i.saveCurrentFilter(e)},dataBound:function(t){var e=t.sender.wrapper.find(".k-pager-wrap.k-grid-pager");e.find(".k-pager-refresh.k-link").length||(j.bind("click",function(){i.display(n)}),e.prepend(j))},columnHide:function(t){var e=i.removeItemFromFilter(t.column.field);t.sender.dataSource.filter(e),i.saveCurrentFilter(e)},toolbar:function(){return e({})}};N.GridUtils.withDefaults(a);var r=$(M);kendo.destroy(r),r.off("click"),r.empty(),r.kendoGrid(a);F.GridDetailCommand.click(r,O.PortfolioViewerColumnFactory.OWNER_FIELD,O.PortfolioViewerColumnFactory.OWNER_CLASS_NAME,function(t){return L.DetailOwnerWindow.displayDetailOwner(t)});var o=r.data("kendoGrid");return o.options.columnMenu=!0,o.bind("columnMenuInit",x.ColumnUtils.columnMenuInit),o.options.scrollable=!0,this.setGrid=o},o.prototype.loadColumns=function(t,e){var n=this;void 0===e&&(e=!0);var i=[],a=this.getPreference;if(a){var r=a;if(r){r.content.forEach(function(t){if(t.field){var e=null;t.field.startsWith("fn")&&(e=n.loadFinancial(t.field,t.width,t.hidden)),n.getColumnType(t.field)in s.PortfolioViewerColumn&&(e=O.PortfolioViewerColumnFactory.create(n.getColumnType(t.field),t.hidden,t.width)),t.field.startsWith("tags.tag")&&(e=n.loadDefinitions(t.field,t.width,t.hidden)),t.field.startsWith("kri")&&(e=n.loadAndtransformKriColumns(t.field,t.width,t.hidden)),e&&(u.includes(u.map(i,"field"),e.field)||i.push(e))}}),0<i.length&&(u.each(i,function(t,e){"assetName"===t.field&&(i[e]={title:t.title,field:"assetName",width:t.width,hidden:t.hidden,template:function(t){return e=t.asset,n=t.assetName,"<a class='d-link' href='"+D.WebLocation.resolveKendo("/object/edit/"+e)+"'>"+n+"</a>";var e,n}})}),e&&(this.setupGrid(t,i),this.display(t),this.loadMenu(t))),this.setPreference=r;var o=this.getCurrentFilter();if(o){var d=this.getGrid;d&&d.dataSource.filter(o)}}}return i},o.prototype.getDefaultGridContent=function(){var t=this.getGrid;if(!t)return[];var e=t.columns,n=[],i=0;return e.forEach(function(t){var e={id:i++,width:u.isNumber(t.width)&&!u.isNil(t.width)?t.width:m.ColonnageUI.DEFAULT_COLUMN_WIDTH,hidden:!!t.hidden&&t.hidden,field:t.field};n.push(e)}),n},o.prototype.getCurrentModel=function(){var t=this.toDataListBox(this.getDefaultGridContent()),e=this.getPreference,n=this.getGrid;if(n){var i=n.dataSource.filter();e?(e.content=t,e.filter=i):e={id:0,windowType:this.getWindowType,name:null,content:t,filter:i}}return e},o.prototype.initPreference=function(){var t=this.toDataListBox(this.getDefaultGridContent());return{id:0,windowType:this.getWindowType,name:null,content:t,filter:null}},o.prototype.loadFinancial=function(t,e,n){var i=parseInt(t.substring(2,t.length),10);return isNaN(i)?null:O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.FINANCIAL,n,e,void 0,void 0,i)},o.prototype.loadDefinitions=function(t,e,n){var i=parseInt(t.substring(8,t.length),10);return isNaN(i)?null:O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.TAG,n,e,i)},o.prototype.loadAndtransformKriColumns=function(e,t,n){this.loadKriColumns();var i=this.kriColumns;if(!i)return null;var a=u.first(u.filter(i,function(t){return"kri"+t.id+".showValue"===e||"kri"+t.id+".value"===e}));if(a){var r={field:e,width:t,hidden:n,title:a.name};return a.percent?A.PercentUI.column(r):v.NumberUI.column(r)}return null},o.prototype.getColumnType=function(t){var e;return t&&(e=this.portfolioAssetColumnTypes.get(t)),e},o.prototype.dataSourceMain=function(n){var t={transport:{read:function(t){t.success(f.EnumUtils.map(n,function(t,e){return{id:t,name:n.getName(e)||""}}))}},schema:{model:{fields:{id:{type:"number"},name:{type:"string"}},id:"id"}},sort:{field:"name",dir:"asc"}};return new kendo.data.DataSource(t)},o.prototype.dataSourceEnums=function(n,i){var a=this,t={transport:{read:function(t){t.success(f.EnumUtils.map(n,function(t,e){return{id:t,field:i===l.PortfolioComponentColumnType.FINANCIAL?"fn"+t:a.portfolioAssetFields.get(t),name:n.getName(e)||"",type:i,hidden:!1}}))}},schema:{model:{fields:{id:{type:"number"},name:{type:"string"}},id:"id"}},sort:{field:"name",dir:"asc"}};return new kendo.data.DataSource(t)},o.prototype.dataSourceRisk=function(){var t={transport:{read:function(t){c.RiskIndicatorRepository.fetchPorfolioColumnIdentifiables().then(function(t){return t.map(function(t){var e="kri"+t.id+".value"||"";return{id:t.id,name:t.name,type:l.PortfolioComponentColumnType.RISK_INDICATOR,field:e}})}).then(t.success).catch(t.error)}},schema:{model:{id:"id",fields:{name:{type:"string"},type:{type:"number"}}}},sort:{field:"name",dir:"asc"}};return new kendo.data.DataSource(t)},o.prototype.dataSourceTag=function(){var t={transport:{read:function(t){p.TagDefinitionRepository.fetchIdentifiables().then(function(t){return t.map(function(t){var e="tags.tag"+t.id||"";return{id:t.id,name:t.name,type:l.PortfolioComponentColumnType.TAG_DEFINITION,field:e}})}).then(t.success).catch(t.error)}},schema:{model:{id:"id",fields:{name:{type:"string"},type:{type:"number"}}}},sort:{field:"name",dir:"asc"}};return new kendo.data.DataSource(t)},o.prototype.preferenceDataSource=function(e){var t={transport:{read:function(t){h.PreferenceRepository.fetchPreferenceIdentifiables(e).then(function(t){return t.map(function(t){return{id:t.id,windowType:e,name:t.name,content:t.content}})}).then(t.success).catch(t.error)}},schema:{model:{id:"id",fields:{id:{type:"number"},name:{type:"string"},windowType:{type:"number"},content:{nullable:!0}}}}};return new kendo.data.DataSource(t)},o.prototype.initToolBar=function(t){kendo.destroy(t),t.empty();return t.kendoToolBar({}),t.data("kendoToolBar")},o.prototype.saveColonnage=function(n,i){var a=this,t=this.getPreference;t.name?h.PreferenceRepository.savePreference(t).then(function(t){a.sourcePreference.read().then(function(){a.setPreference=t,i.set("preference",t),a.loadColumns(n),a.loadListPreferences()})}):T.PreferenceSaveColumnsWindow.open(t,g.I18N.t("preference:actions.save")).then(function(e){e&&((e.name||"").toLowerCase()===m.ColonnageUI.DEFAULT_PREFERENCE_NAME&&e.name&&(e.name=e.name.toLowerCase()),h.PreferenceRepository.savePreference(e).then(function(t){a.sourcePreference.read().then(function(){a.setPreference=e,i.set("preference",t),a.loadColumns(n),a.loadListPreferences()})}))}).catch(function(t){return I.Logger.error(t)})},o.prototype.saveAsColonnage=function(e){var n=this;T.PreferenceSaveColumnsWindow.open(this.getPreference,g.I18N.t("preference:actions.saveAs")).then(function(t){t&&((t.name||"").toLowerCase()===m.ColonnageUI.DEFAULT_PREFERENCE_NAME&&t.name&&(t.name=t.name.toLowerCase()),h.PreferenceRepository.savePreference(t).then(function(t){t&&n.sourcePreference.read().then(function(){e.set("preference",t),n.loadListPreferences()})}))}).catch(function(t){return I.Logger.error(t)})},o.prototype.loadPreference=function(e){var n=this;_.PreferenceLoadWindow.open(this.windowType).then(function(t){t&&(n.setPreference=t,n.loadColumns(e))}).catch(function(t){return I.Logger.error(t)})},o.prototype.getCurrentDataListBox=function(){return this.toDataListBox(this.getPreference.content)},o.prototype.initSourceList=function(t){switch(t){case l.PortfolioComponentColumnType.FINANCIAL:return this.dataSourceEnums(b.FinancialValueCategory,t);case l.PortfolioComponentColumnType.PORTFOLIO:return this.dataSourceEnums(s.PortfolioViewerColumn,t);case l.PortfolioComponentColumnType.RISK_INDICATOR:return this.sourceRisk;case l.PortfolioComponentColumnType.TAG_DEFINITION:return this.sourceTag}return new kendo.data.DataSource},o.prototype.initListBox=function(t,e,n,i,a,r){this.createSourceListBoxColumns(e,a),this.createTargetListBoxColumns(n,i),this.createMainListBoxOptions(t),this.setDataToListBox(n,r.filter(function(t){return!t.hidden}))},o.prototype.initFilter=function(t,e){var n={filters:[{field:e,operator:"neq",value:0}],logic:"and"};t.dataSource.filter(n),this.saveCurrentFilter(n)},o.prototype.removeItemFromFilter=function(e){var t=this.getCurrentFilter();return t?{filters:u.filter(t.filters,function(t){return t.field!==e})}:{filters:[]}},o.prototype.createGridDataSourceOptions=function(){var t={schema:{model:{fields:{quantity:{type:"number"},financing:{type:"number"},marketValue:{type:"number"},actualNotional:{type:"number"},positionCount:{type:"number"},fn1:{type:"number"},fn2:{type:"number"},fn9:{type:"number"},fn11:{type:"number"},fn13:{type:"number"},fn14:{type:"number"},fn16:{type:"number"},fn17:{type:"number"},fn19:{type:"number"},fn29:{type:"number"}},investmentName:function(){return P.ObservableUtils.get(this,"investment.name")||""}}},group:{field:"balanceSheet",aggregates:[{field:"balanceSheet",aggregate:"count"}]}};return new kendo.data.DataSource(t)},o.prototype.generateDefaultColumns=function(t){var n=[];return n=[O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.ASSET,!1),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.INVESTMENT,!1),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.WEIGHT,!1),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.MARKET_VALUE,!1),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.CURRENCY,!1,120),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.TYPE,!1),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.QUANTITY,!1),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.FINANCING,!1),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.COUNTRY,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.OCCUPANCY,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.POSITION_COUNT,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.MARKET_VALUE_IN_FUND_CURRENCY,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.SUB_ASSET_TYPE,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.GEOGRAPHICAL_FOCUS,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.MARKET,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.LIQUIDATION_PERIOD,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.ISSUER,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.CITY,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.RATE,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.MATURITY_DATE,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.ACTUAL_NOTIONAL,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.DEBT_INSTALLMENT,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.NEXT_NOTIONAL_PAYMENT_DATE,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.BALANCE_SHEET,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.OWNER,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.YTM,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.CREDIT_SPREAD,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.DURATION,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.EFFECTIVE_DURATION,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.WEIGHTED_AVERAGE_LIFE,!0),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.OWNERSHIP,!1),O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.SECURITIES_OWNERSHIP,!1)],f.EnumUtils.forEach(b.FinancialValueCategory,function(t){var e=O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.FINANCIAL,!0,m.ColonnageUI.DEFAULT_COLUMN_WIDTH,void 0,void 0,t,void 0);n.push(e)}),i.listDefinitions().forEach(function(t){var e=O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.TAG,!0,m.ColonnageUI.DEFAULT_COLUMN_WIDTH,t,void 0,void 0,void 0);n.push(e)}),t&&t.forEach(function(t){var e=O.PortfolioViewerColumnFactory.create(s.PortfolioViewerColumn.RISK_INDICATOR,!0,m.ColonnageUI.DEFAULT_COLUMN_WIDTH,void 0,t,void 0,void 0);n.push(e)}),u.compact(n)},o.prototype.toDataListBox=function(t){var i=this,a=[];return t.forEach(function(t){if(t.field){var e=i.getColumnType(t.field);e in s.PortfolioViewerColumn&&(u.includes(u.map(a,"name"),s.PortfolioViewerColumn.getName(e))||a.push({id:t.id,field:t.field,hidden:t.hidden,width:t.width,name:s.PortfolioViewerColumn.getName(e)||""}));var n=null;t.field.startsWith("fn")&&(n=i.loadFinancial(t.field,t.width,t.hidden)),t.field.startsWith("kri")&&(n=i.loadAndtransformKriColumns(t.field,t.width,t.hidden)),t.field.startsWith("tags")&&(n=i.loadDefinitions(t.field,t.width,t.hidden)),n&&(u.includes(u.map(a,"name"),n.title)||a.push({id:t.id,field:t.field,hidden:t.hidden,width:t.width,name:n.title||""}))}}),a},o.prototype.setupDiagram=function(t){r.init(t),r.setupDiagram(t)},o.P_CURRENT_FOLIO="currentFolio",o}(m.ColonnageUI);e.ColonnageImpUI=o,e.porfolioColonnageUI=new o,e.CompanyColonnageUI=new o,e.PorfolioInvestorColonnageUI=new o,e.StressColonnageUI=new o}),define("portfolios/PortfoliosColumnsUtil",["require","exports","ui/grid/tag.columns","ui/grid/state.persistence","site","../colonnage/ui/ColonnageImpUI","core/api/WindowType","./repository/PortfolioRepository"],function(t,e,n,a,i,r,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PortfoliosColumnsUtil=void 0;var l="currentFolio",s=function(){function t(){}return t.initGrid=function(t){r.porfolioColonnageUI.resetFilter();var e=t.viewerContext;r.porfolioColonnageUI.setWindowType=o.WindowType.PORTFOLIO,r.porfolioColonnageUI.setupGrid(t,[]),t.model.bind("change",this.onModelChange.bind(null,t)),r.porfolioColonnageUI.setPreference=r.porfolioColonnageUI.initPreference();var n=r.porfolioColonnageUI.getGrid,i={initialLoad:!0,key:"folio_gs_viewer",grid:n};i.toolbar={setup:r.porfolioColonnageUI.loadMenu.bind(null,t),clean:r.porfolioColonnageUI.cleanToolbarMenu.bind(null,t)},e.gridState=a.createState(i),n&&r.porfolioColonnageUI.initFilter(n,"quantity")},t.onModelChange=function(i,t){if(r.porfolioColonnageUI.setWindowType=o.WindowType.PORTFOLIO,t.field===l){r.porfolioColonnageUI.getPreference.name?r.porfolioColonnageUI.loadColumns(i):d.PortfolioRepository.getKriColumns().then(function(t){if(i.model.get(l)){var e=[],n=r.porfolioColonnageUI.loadDefaultPreference();n?(r.porfolioColonnageUI.setPreference=n,e=r.porfolioColonnageUI.loadColumns(i)):e=r.porfolioColonnageUI.generateDefaultColumns(t),r.porfolioColonnageUI.setupGrid(i,e),r.porfolioColonnageUI.display(i),r.porfolioColonnageUI.loadMenu(i)}});var e=r.porfolioColonnageUI.getGrid,n=r.porfolioColonnageUI.getCurrentFilter();n&&e&&e.dataSource.filter(n)}},t}();e.PortfoliosColumnsUtil=s}),define("balanceSheet/ui/BalanceSheetColumnsUtil",["require","exports","ui/grid/state.persistence","../../colonnage/ui/ColonnageImpUI","core/api/WindowType","portfolios/repository/PortfolioRepository"],function(t,e,l,s,u,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BalanceSheetColumnsUtil=void 0;var i=function(){function t(){}return t.initGrid=function(r){s.CompanyColonnageUI.resetFilter();var o=r.viewerContext,d=r.model.get("currentFolio");n.PortfolioRepository.getKriColumns().then(function(t){if(d){s.CompanyColonnageUI.setWindowType=u.WindowType.PORTFOLIO;var e=[],n=s.CompanyColonnageUI.loadDefaultPreference();n?(s.CompanyColonnageUI.setPreference=n,e=s.CompanyColonnageUI.loadColumns(r)):(s.CompanyColonnageUI.setPreference=s.CompanyColonnageUI.initPreference(),e=s.CompanyColonnageUI.generateDefaultColumns(t)),s.CompanyColonnageUI.setupGrid(r,e),s.CompanyColonnageUI.display(r),s.CompanyColonnageUI.loadMenu(r)}var i=s.CompanyColonnageUI.getGrid,a={initialLoad:!0,key:"folio_gs_viewer",grid:i};a.toolbar={setup:s.CompanyColonnageUI.loadMenu.bind(null,r),clean:s.CompanyColonnageUI.cleanToolbarMenu.bind(null,r)},o.gridState=l.createState(a),i&&s.CompanyColonnageUI.initFilter(i,"quantity")})},t}();e.BalanceSheetColumnsUtil=i}),define("portfolios/portfolioInvestor/PortfolioInvestorColumnsUtil",["require","exports","ui/grid/state.persistence","site","core/api/WindowType","colonnage/ui/ColonnageImpUI"],function(t,e,o,n,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PortfolioInvestorColumnsUtil=void 0;var i=function(){function t(){}return t.initGrid=function(t){l.porfolioColonnageUI.resetFilter();var e=t.viewerContext,n=[];if(t.model.get("currentFolio")){l.porfolioColonnageUI.setWindowType=d.WindowType.PORTFOLIO;var i=l.porfolioColonnageUI.loadDefaultPreference();i?(l.porfolioColonnageUI.setPreference=i,n=l.porfolioColonnageUI.loadColumns(t,!1)):(l.porfolioColonnageUI.setPreference=l.porfolioColonnageUI.initPreference(),n=l.porfolioColonnageUI.generateDefaultColumns(l.porfolioColonnageUI.getKriColumns)),l.porfolioColonnageUI.setupGrid(t,n),l.porfolioColonnageUI.display(t),l.porfolioColonnageUI.loadMenu(t)}var a=l.porfolioColonnageUI.getGrid,r={initialLoad:!0,key:"folio_gs_viewer",grid:a};r.toolbar={setup:l.porfolioColonnageUI.loadMenu.bind(null,t),clean:l.porfolioColonnageUI.cleanToolbarMenu.bind(null,t)},e.gridState=o.createState(r),a&&l.porfolioColonnageUI.initFilter(a,"quantity")},t}();e.PortfolioInvestorColumnsUtil=i}),function(){define("views/portfolios/portfolios.viewer",["jquery","i18n","kendo","site","ui","ui/grid/tag.columns","core/api/PortfolioViewerColumn","views/portfolios/common/viewer.showAsset","core/util/DateUtils","portfolios/PortfoliosColumnsUtil","balanceSheet/ui/BalanceSheetColumnsUtil","portfolios/portfolioInvestor/PortfolioInvestorColumnsUtil","colonnage/ui/ColonnageImpUI","portfolio/data/PortfolioTransparency"],function(t,e,n,i,a,r,o,d,l,s,u,c,p,m){var f,b,v,y,h,g,T;return a.grid.statePersistence,l.DateUtils,"savePreference","saveAsPreference","loadPreference","resetPreference","deletePreference",o.PortfolioViewerColumn,g=s.PortfoliosColumnsUtil,f=u.BalanceSheetColumnsUtil,y=c.PortfolioInvestorColumnsUtil,b=p.CompanyColonnageUI,v=p.porfolioColonnageUI,h=m.PortfolioTransparency,function(){return{grid:null,gridState:null,menu:null}},T=function(t){return v.display(t)},{updateRawModel:function(t,e){return e.viewerDate=new Date,e.viewerPipe=null,e.viewerTransparency=h.NO_TRANSPARENCY,e.viewerConsolidation=[],e.viewerDisplayClick=T.bind(null,t),null},init:function(t,e,n){var i;return i={grid:null,gridState:null,menu:null},t.viewerContext=i,e?f.initGrid(t):n?y.initGrid(t):g.initGrid(t),null},refreshGrid:function(t){return b.display(t),null}}})}.call(this),function(){var d,l,s,u,c,p,m,f,b,v;p=(c={id:2,elementId:"#folioPositionLi"}).id,l=(d={id:3,elementId:"#folioDiagramLi"}).id,u=[b={id:1,elementId:"#folioViewerLi"},c,d],s=v=b.id,m="currentMenuSelection",f="k-state-active",define("views/portfolios/portfolios.menu",["jquery"],function(i){var e,n,a,r,o;return o=function(t,e){var n;return n=i(t.elementId),t.id===e?n.addClass(f):n.removeClass(f),null},n=function(t,e){var n,i,a,r;if(r=t.model,i=e.id,r.get(m)!==i){for(n=0,a=u.length;n<a;n++)o(u[n],i);r.set(m,i)}return e===c&&t.positionContext.grid.refresh(),null},r=function(t){var e,n,i,a;for(a=t.model,n=b.id,e=0,i=u.length;e<i;e++)o(u[e],n);return a.set(m,n),null},a=function(t,e){if("currentIsVirtual"===e.field)return r(t)},e=function(t){return t.model.bind("change",a.bind(null,t))},{updateRawModel:function(t,e){return e[m]=s,e.isViewerActive=function(){return this.get(m)===v},e.isPositionActive=function(){return this.get(m)===p},e.isDiagramActive=function(){return this.get(m)===l},e.viewerMenuClick=n.bind(null,t,b),e.positionMenuClick=n.bind(null,t,c),e.diagramMenuClick=n.bind(null,t,d),null},init:function(t){return e(t)}}})}.call(this),define("text!templates/portfolios/portfolios.position.toolbar.html",[],function(){return'<ul id="folioPositionToolbarMenu" class="gridToolbarMenu d-sprite-wrapper" data-role="menu">\n    <li>\n        <a href="javascript:void(0)" class="k-link" data-key="create">\n            <span class="k-sprite d-new"></span>\n            <span data-i18n="portfolio:actions.create"></span>\n        </a>\n    </li>\n    <li>\n        <span class="k-sprite d-grid"></span>\n        <span data-i18n="ui:grid.columns"></span>\n        <ul>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="saveColumns" data-i18n="ui:grid.saveColumns"></a>\n            </li>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="loadColumns" data-i18n="ui:grid.loadColumns"></a>\n            </li>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="resetColumns" data-i18n="ui:grid.resetColumns"></a>\n            </li>\n        </ul>\n    </li>\n</ul>\n'}),function(){var j,G,q;G="#folioPositionGrid",j="domosws:object",q="currentFolio",define("views/portfolios/portfolios.position",["jquery","i18n","kendo","site","ui","object/data/ObjectCategories","object/data/ObjectTypes","views/data/model/models","views/portfolios/common/viewer.showAsset","core/web/WebLocation","text!templates/portfolios/portfolios.position.toolbar.html"],function(u,c,p,i,t,e,n,a,m,r,f){var o,b,v,y,d,l,s,h,g,T,I,C,w,k,E,D,S,N,x,R,O,U,A,F,L,P,M;return d=e.ObjectCategories,l=n.ObjectTypes,o=d.positions,b=a[o.id],v=t.grid,y=v.statePersistence,s=r.WebLocation,"create","saveColumns","loadColumns","resetColumns",h=function(t){var e;return(e=t.positionContext).handler&&u("body").on(j,e.handler),!0},k=function(t){var e;return(e=t.positionContext).handler&&u("body").off(j,e.handler),!0},F=function(t){var e;return null!=(e=t.positionContext.gridState)&&e.save(),!0},D=function(t){var e;return null!=(e=t.positionContext.gridState)&&e.load(),!0},A=function(t){var e;return null!=(e=t.positionContext.gridState)&&e.reset(),!0},w=function(t){var e,n;return(n=null!=(e=t.model.get(q))?e.get("id"):void 0)&&i.router.navigate(i.map.getObjectCreate(o.id,n)),null},P=function(t,e){var n;return"saveColumns"===(n=u(e.item).children(".k-link").data("key"))?F(t):"loadColumns"===n?D(t):"resetColumns"===n?A(t):"create"===n&&w(t),null},L=function(t){var e,n,i;return i=t.positionContext,e=u(G).find("#folioPositionToolbarMenu"),p.bind(e,{}),e.localize(),null!=(n=e.data("kendoMenu"))&&n.bind("select",P.bind(null,t)),i.menu=n,null},T=function(t){var e,n;return null!=(n=(e=t.positionContext).menu)&&n.destroy(),e.menu=null},R=function(t,e,n){var i,a,r;if(n&&n.data)return i=n.data,(a=null!=(r=l.get(i.type))?r.category:void 0)&&a.isOf(o.id)&&i.portfolio===t&&("create"===n.type?e.pushCreate(i):"update"===n.type?e.pushUpdate(i):"destroy"===n.type&&e.pushDestroy(i)),null},O=function(t,e,n,i){if(i)return _.isArray(i)?_.each(i,R.bind(null,t,e)):R(t,e,i),null},N=function(t,e,n){return k(t),t.positionContext.handler=O.bind(null,e,n),h(t)},M=function(t){var e,n;return e=t.positionContext,k(t),e.handler=null,T(t),(e.gridState=null)!=(n=e.grid)&&n.destroy(),e.grid=null,u(G).empty(),null},E=function(t){var e;return(e=null!=t?t.id:void 0)?i.router.navigate(i.map.getObjectEdit(e)):i.router.navigate(i.map.notfound),!0},C=function(t){var e,n,i,a;return(n=t.model).get("currentIsVirtual")?null:(i=n.get(q))&&(a=i.get("id"))?((e=b.createDataSourceSkeleton()).transport={read:{url:s.resolve("portfolio/positions.json"),dataType:"json",data:{portfolio:a}},push:N.bind(null,t,a)},e):null},I=function(t){var e,n,i,a,r,o,d,l,s;return o=t.positionContext,M(t),e=[{command:[v.customCommand(c.t("portfolio:actions.viewPosition"),E)],title:" ",width:"100px",priority:-100}],b.addColumns(e),r=_.findIndex(e,{priority:1}),e.splice(r,1,{field:"asset.name",title:c.t("data:fields.name"),template:function(t){return m.showAsset(t.asset.id,t.asset.name)},priority:1,width:"200px"}),n={editable:!1,columns:_.sortBy(e,"priority"),pageable:v.defaultPageable(),height:800,scrollable:!0},l=p.template(f),s={},n.toolbar=function(){return l(s)},v.withDefaults(n),(i=u(G)).kendoGrid(n),a=i.data("kendoGrid"),(d={initialLoad:!0,key:"folio_gs_position",grid:o.grid=a}).toolbar={setup:L.bind(null,t),clean:T.bind(null,t)},o.gridState=y.createState(d),null},S=function(t,e){return U(t),null},x=function(t,e){if(e.field===q)return S(t)},g=function(t){return t.model.bind("change",x.bind(null,t))},{updateRawModel:function(t,e){return null},init:function(t){var e;return e={},t.positionContext=e,I(t),g(t),null},refreshGrid:U=function(t){var e,n,i;return(i=t.positionContext.grid)&&(null==(n=C(t))&&(n={data:[]}),e=new p.data.DataSource(n),i.setDataSource(e)),null}}})}.call(this),define("text!templates/portfolios/portfolios.html",[],function(){return'<div id="folioRoot">\n    <div data-bind="visible: hasCurrentFolio">\n        <ul data-role="menu">\n            <li id="folioViewerLi" class="k-state-active">\n                <a href="javascript:void(0)" data-bind="click: viewerMenuClick" data-i18n="portfolio:menu.viewer"></a>\n            </li>\n            <li id="folioPositionLi" data-bind="invisible: currentIsVirtual">\n                <a href="javascript:void(0)" data-bind="click: positionMenuClick" data-i18n="portfolio:menu.position"></a>\n            </li>\n            <li id="folioDiagramLi" data-bind="invisible: currentIsVirtual">\n                <a href="javascript:void(0)" data-bind="click: diagramMenuClick" data-i18n="portfolio:menu.diagram"></a>\n            </li>\n        </ul>\n\n        <h2 id="polioFundLinkId"></h2>\n\n        <div data-bind="visible: isViewerActive">\n            <div id="folioViewerConfiguration" class="k-content d-content">\n                <div class="floatThird">\n                    <table class="formTable">\n                        <tr>\n                            <td>\n                                <label for="folioViewerDate" data-i18n="portfolio:configuration.date"></label>\n                            </td>\n                            <td>\n                                 <input id="folioViewerDate" name="folioViewerDate" data-role="datepicker" data-bind="value: viewerDate"/>\n                            </td>\n                            <td>\n                                <label for="folioViewerTransparency" data-i18n="portfolio:configuration.transparency"></label>\n                            </td>\n                            <td>\n                                <input id="folioViewerTransparency" name="folioViewerTransparency" data-role="domosportfoliotransparency" data-bind="value: viewerTransparency"/>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                <label for="folioViewerPipe" data-i18n="portfolio:configuration.pipeManager"></label>\n                            </td>\n                            <td>\n                                 <input id="folioViewerPipe" name="folioViewerPipe" data-role="domosflowpipemanager" data-value-primitive="true" data-bind="value: viewerPipe"/>\n                            </td>\n                            <td>\n                                    <label for="folioViewerCurrency" data-i18n="portfolio:configuration.folioViewerCurrency"></label>\n                                </td>\n                                <td>\n                                    <input id="folioViewerCurrency"data-role="domoscurrency" data-bind="value: currentFolio.currency" data-enabled="false"/>\n                                </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                <label for="folioViewerConsolidation" data-i18n="portfolio:configuration.consolidation"></label>\n                            </td>\n                            <td colspan="3">\n                                <input id="folioViewerConsolidation" name="folioViewerConsolidation" data-role="domoscomputationdatacriterionmultiselect" data-bind="value: viewerConsolidation"/>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td></td>\n                            <td>\n                                <button class="k-button" data-i18n="portfolio:actions.displayViewer" data-bind="click: viewerDisplayClick"></button>\n                            </td>\n                        </tr>\n                    </table>\n                </div>\n                <div class="clearer"></div>\n            </div>\n            <div id="folioViewerGrid"></div>\n        </div>\n        <div data-bind="visible: isPositionActive">\n            <div id="folioPositionGrid"></div>\n        </div>\n        <div data-bind="visible: isDiagramActive">\n            <div id="folioDiagramToolbar"></div>\n            <div id="folioDiagram"></div>\n        </div>\n    </div>\n\n    <div data-bind="invisible: hasCurrentFolio">\n        <h2 data-i18n="portfolio:noPortfolios"></h2>\n\n    </div>\n\n</div>'}),function(){define("views/portfolios/portfolios.main",["jquery","i18n","kendo","core/web/WebLocation","views/portfolios/portfolios.menu","views/portfolios/portfolios.viewer","views/portfolios/portfolios.position","views/portfolios/portfolios.diagram","text!templates/portfolios/portfolios.html","flow/ui/FlowPipeManagerUI","core/api/DataCriteria"],function(i,t,a,e,n,r,o,d,l){var s,u,c,p,m;return s=[n,r,o,d],u=e.WebLocation,p=function(){return u.setPageTitle(t.t("portfolio:title")),null},m=function(t){return p(),null},c=function(t){var e,n;for(i("#folioRoot").localize(),e=0,n=s.length;e<n;e++)s[e].init(t);return null},{updateRawModel:function(t,e){var n,i;for(n=0,i=s.length;n<i;n++)s[n].updateRawModel(t,e);return null},createView:function(t){var e,n,i;return e=t.model,i=a.template(l)({}),n={model:e,show:m.bind(null,t),init:c.bind(null,t)},new a.View(i,n)}}})}.call(this),define("text!templates/data/edit/portfolio.company.html",[],function(){return'<div id="portfolioCompanyRoot">\n\t<div>\n\t\t<ul data-role="menu">\n\t\t\t<li id="folioViewerLi" class="k-state-active">\n\t\t\t\t<a href="javascript:void(0)" data-bind="click: viewerMenuClick" data-i18n="portfolio:menu.viewer"></a>\n\t\t\t</li>\n\t\t\t<li id="folioPositionLi" data-bind="invisible: currentIsVirtual">\n\t\t\t\t<a href="javascript:void(0)" data-bind="click: positionMenuClick" data-i18n="portfolio:menu.position"></a>\n\t\t\t</li>\n\t\t\t<li id="folioDiagramLi" data-bind="invisible: currentIsVirtual">\n\t\t\t\t<a href="javascript:void(0)" data-bind="click: diagramMenuClick" data-i18n="portfolio:menu.diagram"></a>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t<h2><a href="#=url#">#= name#</a></h2>\n\t\t<div data-bind="visible: isViewerActive">\n\t\t\t<div id="folioViewerConfiguration" class="k-content d-content">\n\t\t\t\t<div class="floatThird">\n\t\t\t\t\t<table class="formTable">\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<label for="folioViewerDate" data-i18n="portfolio:configuration.date"></label>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input id="folioViewerDate" name="folioViewerDate" data-role="datepicker" data-bind="value: viewerDate" />\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<label for="folioViewerTransparency" data-i18n="portfolio:configuration.transparency"></label>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input id="folioViewerTransparency" name="folioViewerTransparency" data-role="domosportfoliotransparency" data-bind="value: viewerTransparency" />\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<label for="folioViewerPipe" data-i18n="portfolio:configuration.pipeManager"></label>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input id="folioViewerPipe" name="folioViewerPipe" data-role="domosflowpipemanager" data-value-primitive="true"\n\t\t\t\t\t\t\t\t data-bind="value: viewerPipe" />\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<label for="folioViewerCurrency" data-i18n="portfolio:configuration.folioViewerCurrency"></label>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input id="folioViewerCurrency"data-role="domoscurrency" data-bind="value: currentFolio.currency" data-enabled="false"/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<label for="folioViewerConsolidation" data-i18n="portfolio:configuration.consolidation"></label>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td colspan="3">\n\t\t\t\t\t\t\t\t<input id="folioViewerConsolidation" name="folioViewerConsolidation" data-role="domoscomputationdatacriterionmultiselect"\n\t\t\t\t\t\t\t\t data-bind="value: viewerConsolidation" />\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<button class="k-button" data-i18n="portfolio:actions.displayViewer" data-bind="click: viewerDisplayClick"></button>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t\t<div class="clearer"></div>\n\t\t\t</div>\n\t\t\t<div id="folioViewerGrid"></div>\n\t\t</div>\n\t\t<div data-bind="visible: isPositionActive">\n\t\t\t<div id="folioPositionGrid"></div>\n\t\t</div>\n\t\t<div data-bind="visible: isDiagramActive">\n\t\t\t<div id="folioDiagramToolbar"></div>\n\t\t\t<div id="folioDiagram"></div>\n\t\t</div>\n\t</div>\n</div>'}),define("balanceSheet/BalanceSheetCompany",["require","exports","views/layout","views/loading","site","views/portfolios/portfolios.viewer","views/portfolios/portfolios.main","views/portfolios/portfolios.position","views/portfolios/portfolios.diagram","i18n","text!templates/data/edit/portfolio.company.html","core/web/WebLocation","object/ui/ObjectUtilsUI","core/data/DObservableBuilder","colonnage/ui/ColonnageImpUI","core/data/SiteCategories"],function(t,e,n,i,a,l,r,s,o,u,c,p,m,f,b,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BalanceSheetCompany=void 0;var v="portfolioCompany",y="#portfolioCompanyRoot",h=a.router,g=a.map,T={id:1,elementId:"#folioViewerLi"},I=T.id,C={id:2,elementId:"#folioPositionLi"},w=C.id,k={id:3,elementId:"#folioDiagramLi"},E=k.id,D=[T,C,k],S=I,N="currentMenuSelection",x="k-state-active";function R(t,e){var a=e.id;t.get(N)!==a&&(D.forEach(function(t){var e,n,i;e=t,n=a,i=$(e.elementId),e.id===n?i.addClass(x):i.removeClass(x)}),t.set(N,a))}function _(t,e){i.display(v,!1),n.display(v,function(e,t){var n=e.model,i={id:(t=JSON.parse(decodeURIComponent(t))).id,name:t.name,currency:t.currency};e.model.set("currentFolio",i);var a=u.I18N.t("object:companies.actions.balanceSheet")+" "+i.name,r=i.id?m.ObjectUtilsUI.getUrl(i.id):"#",o=kendo.template(c)({name:a,url:r}),d={model:e.model,init:function(){u.I18N.localize($(y)),n.set(N,S),f.DObservableBuilder.of(n).add("viewerMenuClick",function(t){R(t,T)}).add("positionMenuClick",function(t){R(t,C)}).add("diagramMenuClick",function(t){R(t,k)}).add("isViewerActive",function(t){return t.get(N)===I}).add("isPositionActive",function(t){return t.get(N)===w}).add("isDiagramActive",function(t){return t.get(N)===E}).add("viewerDisplayClick",function(t){b.CompanyColonnageUI.display(e)}).build().bind($(y)),l.init(e,!0),s.init(e),l.refreshGrid(e),s.refreshGrid(e)},show:function(){p.WebLocation.setPageTitle(a)}};return new kendo.View(o,d)}(t,e),null,d.SiteCategories.portfolios)}var O=function(){function t(){}return t.init=function(){var t={},e={currentMenuSelection:S,currentFolio:null,currentIsVirtual:!1,hasCurrentFolio:function(){return this.get("currentFolio")}};t.model=kendo.observable(e),h.addRoute(g.portfolioCompany,_.bind(null,t))},t}();e.BalanceSheetCompany=O}),define("text!templates/portfolios/portfolio.investor.html",[],function(){return'<div id="portfolioInvestorRoot">\n\t\t<div>\n\t\t\t<ul data-role="menu">\n\t\t\t\t<li id="folioViewerLi" class="k-state-active">\n\t\t\t\t\t<a href="javascript:void(0)" data-bind="click: viewerMenuClick" data-i18n="portfolio:menu.viewer"></a>\n\t\t\t\t</li>\n\t\t\t\t<li id="folioPositionLi" data-bind="visible: isFund">\n\t\t\t\t\t<a href="javascript:void(0)" data-bind="click: positionMenuClick" data-i18n="portfolio:menu.position"></a>\n\t\t\t\t</li>\n\t\t\t\t<li id="folioDiagramLi" data-bind="invisible: currentIsVirtual">\n\t\t\t\t\t<a href="javascript:void(0)" data-bind="click: diagramMenuClick" data-i18n="portfolio:menu.diagram"></a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t\n\t\t\t<h2><a href="#=url#">#= name#</a></h2>\n\t\t\t<div data-bind="visible: isViewerActive">\n\t\t\t\t<div id="folioViewerConfiguration" class="k-content d-content">\n\t\t\t\t\t<div class="floatThird">\n\t\t\t\t\t\t<table class="formTable">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<label for="folioViewerDate" data-i18n="portfolio:configuration.date"></label>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input id="folioViewerDate" name="folioViewerDate" data-role="datepicker" data-bind="value: viewerDate" />\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<label for="folioViewerTransparency" data-i18n="portfolio:configuration.transparency"></label>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input id="folioViewerTransparency" name="folioViewerTransparency" data-role="domosportfoliotransparency" data-bind="value: viewerTransparency" />\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<label for="folioViewerPipe" data-i18n="portfolio:configuration.pipeManager"></label>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input id="folioViewerPipe" name="folioViewerPipe" data-role="domosflowpipemanager" data-value-primitive="true"\n\t\t\t\t\t\t\t\t\t data-bind="value: viewerPipe" />\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<label for="folioViewerCurrency" data-i18n="portfolio:configuration.folioViewerCurrency"></label>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input id="folioViewerCurrency"data-role="domoscurrency" data-bind="value: currentFolio.currency" data-enabled="false"/>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<label for="folioViewerConsolidation" data-i18n="portfolio:configuration.consolidation"></label>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td colspan="3">\n\t\t\t\t\t\t\t\t\t<input id="folioViewerConsolidation" name="folioViewerConsolidation" data-role="domoscomputationdatacriterionmultiselect"\n\t\t\t\t\t\t\t\t\t data-bind="value: viewerConsolidation" />\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<button class="k-button" data-i18n="portfolio:actions.displayViewer" data-bind="click: viewerDisplayClick"></button>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="clearer"></div>\n\t\t\t\t</div>\n\t\t\t\t<div id="folioViewerGrid"></div>\n\t\t\t</div>\n\t\t\t<div data-bind="visible: isPositionActive">\n\t\t\t\t<div id="folioPositionGrid"></div>\n\t\t\t</div>\n\t\t\t<div data-bind="visible: isDiagramActive">\n\t\t\t\t<div id="folioDiagramToolbar"></div>\n\t\t\t\t<div id="folioDiagram"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>'}),define("portfolios/portfolioInvestor/PortfolioInvestor",["require","exports","views/layout","views/loading","site","views/portfolios/portfolios.viewer","views/portfolios/portfolios.main","views/portfolios/portfolios.diagram","views/portfolios/portfolios.position","i18n","text!templates/portfolios/portfolio.investor.html","core/web/WebLocation","core/data/DObservableBuilder","colonnage/ui/ColonnageImpUI","object/web/ObjectMap","object/data/ObjectCategories","object/data/ObjectTypes","core/data/SiteCategories"],function(t,e,n,i,a,d,r,o,l,s,u,c,p,m,f,b,v,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PortfolioInvestor=void 0;var h="portfolioInvestor",g="#portfolioInvestorRoot",T=a.router,I=a.map,C={id:1,elementId:"#folioViewerLi"},w=C.id,k={id:2,elementId:"#folioPositionLi"},E=k.id,D={id:3,elementId:"#folioDiagramLi"},S=D.id,N=[C,k,D],x=w,R="currentMenuSelection",_="k-state-active";function O(t,e){var a=e.id;t.get(R)!==a&&(N.forEach(function(t){var e,n,i;e=t,n=a,i=$(e.elementId),e.id===n?i.addClass(_):i.removeClass(_)}),t.set(R,a))}function U(t,e){i.display(h,!1),n.display(h,function(e,t){var n=e.model;t=JSON.parse(decodeURIComponent(t)),e.model.set("currentFolio",t),e.model.set("type",t.type);var i=""+t.name,a=f.ObjectMap.objectEdit(t.id),r=kendo.template(u)({name:i,url:a}),o={model:e.model,init:function(){s.I18N.localize($(g)),n.set(R,x),p.DObservableBuilder.of(n).add("viewerMenuClick",function(t){O(t,C)}).add("diagramMenuClick",function(t){O(t,D)}).add("positionMenuClick",function(t){O(t,k)}).add("isViewerActive",function(t){return t.get(R)===w}).add("isPositionActive",function(t){return t.get(R)===E}).add("isDiagramActive",function(t){return t.get(R)===S}).add("viewerDisplayClick",function(t){m.porfolioColonnageUI.display(e)}).add("isFund",function(t){var e=v.ObjectTypes.get(t.get("type"));return!!e&&e.category.id===b.ObjectCategories.investmentVehicles.id}).build().bind($(g)),d.init(e,null,!0),d.refreshGrid(e),n.isFund()&&(l.init(e),l.refreshGrid(e))},show:function(){c.WebLocation.setPageTitle(i)}};return new kendo.View(r,o)}(t,e),null,y.SiteCategories.portfolios)}var A=function(){function t(){}return t.init=function(){var t={},e={currentMenuSelection:x,currentFolio:null,currentIsVirtual:!1,type:null};t.model=kendo.observable(e),T.addRoute(I.portfolioInvestor,U.bind(null,t))},t}();e.PortfolioInvestor=A}),function(){define("views/data/module",["views/data/data","views/data/edit/edit.object","views/data/history/edit.history","views/data/metric/edit.metric","views/data/history/subscription/subscriptions","views/data/history/redemption/redemptions","views/data/history/subscription/company.subscriptions","views/data/history/subscription/derivative.subscriptions","views/data/history/subscription/debt.subscriptions","balanceSheet/BalanceSheetCompany","portfolios/portfolioInvestor/PortfolioInvestor"],function(t,e,n,i,a,r,o,d,l,s,u){return{init:function(){return t.init(),e.init(),n.init(),i.init(),a.init(),r.init(),o.init(),d.init(),l.init(),s.BalanceSheetCompany.init(),u.PortfolioInvestor.init(),null}}})}.call(this),function(){var l,i,a,r,s,u,c,p,m,f,b,v;v=(b={id:2,elementId:"#flowWorkflowsLi"}).id,i=(l={id:3,elementId:"#flowDocumentListsLi"}).id,p=(c={id:4,elementId:"#flowPipeManagementLi"}).id,u=[a={id:1,elementId:"#flowFlowsLi"},b,c],s=r=a.id,m="currentMenuSelection",f="k-state-active",define("views/flow/flow.menu",["jquery"],function(o){var n,d;return d=function(t,e){var n;return n=o(t.elementId),t.id===e?n.addClass(f):n.removeClass(f),null},n=function(t,e){var n,i,a,r;if(r=t.model,i=e.id,r.get(m)!==i){for(n=0,a=u.length;n<a;n++)d(u[n],i);r.set(m,i)}return e===b&&t.workflowContext.grid.refresh(),e===l&&o("#documentListGrid").data("kendoGrid").refresh(),e===c&&o("#flowPipeManagementGrid").data("kendoGrid").refresh(),null},{updateRawModel:function(t,e){return e[m]=s,e.isMenuVisible=!t.restricted,e.isFlowsActive=function(){return this.get(m)===r},e.isWorkflowsActive=function(){return this.get(m)===v},e.isDocumentListsActive=function(){return this.get(m)===i},e.isPipeManagementActive=function(){return this.get(m)===p},e.flowsMenuClick=n.bind(null,t,a),e.workflowsMenuClick=n.bind(null,t,b),e.documentListsMenuClick=n.bind(null,t,l),e.pipeManagementMenuClick=n.bind(null,t,c),null},init:function(t){}}})}.call(this),function(){var p,m,f;p="flowOverviewLi",f="flowWorkflowLi",m="flowTaskLi",define("views/flow/flows/flows.tab.strip",["jquery","lodash","i18n","kendo"],function(d,t,e,n){var i,a,l,r,o,s,u,c;return l=function(){return d("#flowTab").data("kendoTabStrip")},s=function(t,e,n,i,a){var r,o;if(o=l())return e||n||i?(a?(r=!1,(e||a!==p)&&(n||a!==f)&&(i||a!==m)||(r=!0),r&&s(t,e,n,i,null)):e?o.select(d("#flowOverviewLi")):n?o.select(d("#flowWorkflowLi")):i&&o.select(d("#flowTaskLi")),t.set("hasTab",!0),null):(t.set("hasTab",!1),void o.select(d()))},a=function(t){var e,n,i,a,r,o,d;return e=(a=t.model).get("hasOverview"),i=a.get("hasWorkflow"),n=a.get("hasTask"),d=null!=(r=l())&&null!=(o=r.select())?o.attr("id"):void 0,s(a,e,i,n,d)},u=function(t,e){return t.model.set("hasTask",!!e),a(t)},c=function(t,e){var n;return n=!!e&&!t.restricted,t.model.set("hasWorkflow",n),a(t)},o=function(t,e){var n;return n=t.data.context,u(n,e)},r=function(t,e){var n;return n=t.data.context,c(n,e)},i=function(t){var e;return e={context:t},d("body").on("domos:flow:selected",e,r),d("body").on("domos:flow:task:selected",e,o),null},{updateRawModel:function(t,e){return e.hasTab=!t.restricted,e.hasOverview=!t.restricted,e.hasWorkflow=!1,e.hasTask=!1,null},init:function(t){return i(t),null}}})}.call(this),function(){var M,T,I;I="#flowOverviewToolbar",T="#flowOverviewGauge",M="#flowOverviewChart",define("views/flow/flows/flows.overview",["jquery","lodash","i18n","kendo","ui","basic/data/Currencies","basic/data/Countries"],function(_,O,i,t,e,n,a){var U,A,F,L,r,o,P,d,l,s,u,c,p,m,f,b,v,y,h,g;return A=n.Currencies,U=a.Countries,F=e.formats,function(){return{toolbar:null,data:null,query:null,gauge:null,chart:null,chartView:1}},o=function(t){var e,n;return null!=(n=(e=t.overviewContext).toolbar)&&n.destroy(),e.toolbar=null,_(I).empty()},p=function(t){return d(t)},l=function(t){return t.overviewContext.chartView=1,b(t)},m=function(t){return t.overviewContext.chartView=2,b(t)},g=function(t){var e,n;return n={items:[{type:"button",text:i.t("flow:overview.refresh"),icon:"refresh",primary:!0,click:p.bind(null,t)},{type:"buttonGroup",buttons:[{text:i.t("flow:overview.byCountry"),togglable:!0,selected:!0,group:"byGroup",toggle:l.bind(null,t)},{text:i.t("flow:overview.byStatus"),togglable:!0,selected:!1,group:"byGroup",toggle:m.bind(null,t)}]}]},o(t),(e=_(I)).kendoToolBar(n),t.overviewContext.toolbar=e.data("kendoToolBar"),null},r=function(t){var e,n;return null!=(n=(e=t.overviewContext).gauge)&&n.destroy(),e.gauge=null,_(T).empty(),null},h=function(t){var e,n,i,a,r,o,d;if(d=0,(r=t.overviewContext).data)for(n=0,i=(o=r.data.results).length;n<i;n++)d+=o[n].value;return r.gauge?r.gauge.value(d):(a={pointer:{value:d},scale:{minorUnits:1e8,startAngle:0,endAngle:180,max:1e9,labels:{position:"inside",template:"#= (value / 1000000)#M"},ranges:[{from:8e8,to:1e9,color:"green"}]}},(e=_(T)).kendoRadialGauge(a),r.gauge=e.data("kendoRadialGauge")),null},function(t){return r(t),h(t)},L=function(t){var e,n;return null!=(n=(e=t.overviewContext).chart)&&n.destroy(),e.chart=null,_(M).empty(),null},P=function(t){return O.map(t,"status").sort()},y=function(t){var e,n,i,a,r,o,d,l,s,u,c,p,m,f,b,v,y,h,g;if(L(t),(p=t.overviewContext).data){for(n=p.data,v=[],y=P(n.results),a=0,o=(m=n.results).length;a<o;a++){for(b={name:(u=m[a]).name,stack:"status"},g=[],r=0,d=y.length;r<d;r++)f=y[r],u.status===f?g.push(u.value):g.push(0);b.data=g,v.push(b)}return g=O.map(n.results,"value"),s=O.min(g),l=O.max(g),c={series:v,chartArea:{background:""},legend:{visible:!1},valueAxis:{line:{visible:!1},labels:{template:h=F.bestFitTemplate(s,l,"value")},title:{text:e=A.getName(n.currency)}},categoryAxis:{categories:y,majorGridLines:{visible:!1}},tooltip:{visible:!0,template:"#= series.name #: "+h+" "+e}},(i=_(M)).kendoChart(c),p.chart=i.data("kendoChart")}},v=function(t){var e,n,i,a,r,o,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R;if(L(t),(C=t.overviewContext).data){for(e={},a={},l=0,p=(w=(o=C.data).results).length;l<p;l++)null==e[g=(T=w[l]).status]&&(e[g]=[]),e[T.status].push(T),a[U.getName(T.country)]=!0;for(u in S=[],a)a[u],S.push(u);for(S.sort(),D=[],s=0,m=(k=P(o.results)).length;s<m;s++)if(r=e[N=k[s]])for(c=0,f=r.length;c<f;c++){for(E={name:(T=r[c]).name,stack:N},R=[],v=0,b=S.length;v<b;v++)n=S[v],U.getName(T.country)===n?R.push(T.value):R.push(0);E.data=R,D.push(E)}return i=A.getName(o.currency),R=O.map(o.results,"value"),h=O.min(R),y=O.max(R),I={series:D,chartArea:{background:""},legend:{visible:!1},valueAxis:{line:{visible:!1},labels:{template:x=F.bestFitTemplate(h,y,"value")},title:{text:i}},categoryAxis:{categories:S,majorGridLines:{visible:!1}},tooltip:{visible:!0,template:"#= series.name # (#= series.stack#): "+x+" "+i}},(d=_(M)).kendoChart(I),C.chart=d.data("kendoChart")}},b=function(t){return 2===t.overviewContext.chartView?y(t):v(t),null},function(t){return b(t)},f=function(t,e){return t.overviewContext.data=e,h(t),b(t)},u=function(t,e){return f(t,e)},c=function(t){},s=function(t){return t.overviewContext.query=null},d=function(t){var e;if(!(e=t.overviewContext).query)return e.query=_.getJSON("computation/deal.flow.opportunities.json").done(u.bind(null,t)).fail(c.bind(null,t)).always(s.bind(null,t)),null},{updateRawModel:function(t,e){},init:function(t){var e;if(e={toolbar:null,data:null,query:null,gauge:null,chart:null,chartView:1},t.overviewContext=e,!t.restricted)return g(t),d(t),null}}})}.call(this),function(){var u;u="#flowDealFlowGrid",define("views/flow/flows/flows.deal.flows",["jquery","i18n","object/data/ObjectCategories","views/data/data.grid"],function(a,t,e,r){var o,d,l,s,n;return o=e.ObjectCategories.dealIntentions,function(){return{gridContext:null}},d=function(t){var e,n;return null!=(n=(e=t.flowContext).gridContext)&&n.destroy(),e.gridContext=null,a(u).empty(),null},l=function(t,e){var n,i,a,r;return(i=(n=null)!=(a=t.flowContext.gridContext)?a.grid:void 0)&&0<(r=i.select()).length&&(n=i.dataItem(r[0])),s(n),null},n=function(t,e){var n,i;return n=t.flowContext,d(t),i={change:l.bind(null,t)},n.gridContext=r.createGrid(a(u),o,!1,null,i,t.restricted),null},s=function(t){return a("body").trigger("domos:flow:selected",t)},{updateRawModel:function(t,e){},init:function(t){var e;return e={gridContext:null},t.flowContext=e,n(t)}}})}.call(this),function(){var r=function(t,e){return function(){return t.apply(e,arguments)}};define("ui/svg/core/svg.arrow.marker",[],function(){var n,e;return e=function(t,e,n){var i,a,r,o,d;return null==e&&(e={}),d=e.width||10,o=e.height||7,i=e.color||"black",(a=t.createDefs("marker")).setAttribute("viewBox","0 0 "+d+" "+o),a.setAttribute("markerUnits","strokeWidth"),a.setAttribute("markerWidth",d),a.setAttribute("markerHeight",o),a.setAttribute("orient","auto"),t.setColor(a,"fill",i),r=t.create("path",a),a.setAttribute("refY",o/2),n?(a.setAttribute("refX",0),r.setAttribute("d","M0 0 L"+d+" "+o/2+" L0 "+o+" z")):(a.setAttribute("refX",d),r.setAttribute("d","M0 "+o/2+" L"+d+" 0 L"+d+" "+o+" z")),{marker:a,width:d,height:o}},n=function(){function t(t,e){var n,i,a;this._options=e,this.getEndMarker=r(this.getEndMarker,this),this.getStartMarker=r(this.getStartMarker,this),this._SVG=t.svg(),null==this._options&&(this._options={}),null==(n=this._options).width&&(n.width=10),null==(i=this._options).height&&(i.height=7),null==(a=this._options).color&&(a.color="black")}return t.prototype.getStartMarker=function(){return null==this._start&&(this._start=e(this._SVG,this._options,!1)),this._start},t.prototype.getEndMarker=function(){return null==this._end&&(this._end=e(this._SVG,this._options,!0)),this._end},t}(),{create:function(t,e){return new n(t,e)}}})}.call(this),function(){var r=function(t,e){return function(){return t.apply(e,arguments)}};define("ui/svg/workflow/util/svg.marker",["ui/svg/core/svg.arrow.marker"],function(t){var n,i,e,a;return e=function(t,e,n){var i,a,r,o,d;return null==e&&(e={}),d=e.width||12,o=e.height||8,i=e.color||"black",(a=t.createDefs("marker")).setAttribute("viewBox","0 0 "+d+" "+o),a.setAttribute("markerUnits","strokeWidth"),a.setAttribute("markerWidth",d),a.setAttribute("markerHeight",o),a.setAttribute("orient","auto"),r=t.create("path",a),a.setAttribute("refY",o/2),r.setAttribute("fill","transparent"),r.setAttribute("stroke",i),r.setAttribute("d","M0 "+o/2+" L"+d/2+" 0 L"+d+" "+o/2+" L"+d/2+" "+o+" z"),n?a.setAttribute("refX",0):a.setAttribute("refX",d),{marker:a,width:d,height:o}},n=function(){function t(t,e){var n,i,a;this._options=e,this.getEndMarker=r(this.getEndMarker,this),this.getStartMarker=r(this.getStartMarker,this),this._SVG=t.svg(),null==this._options&&(this._options={}),null==(n=this._options).width&&(n.width=12),null==(i=this._options).height&&(i.height=8),null==(a=this._options).color&&(a.color="black")}return t.prototype.getStartMarker=function(){return null==this._start&&(this._start=e(this._SVG,this._options,!1)),this._start},t.prototype.getEndMarker=function(){return null==this._end&&(this._end=e(this._SVG,this._options,!0)),this._end},t}(),a=function(t,e,n){var i,a,r,o,d;return null==e&&(e={}),d=e.width||12,o=e.height||12,i=e.color||"black",(a=t.createDefs("marker")).setAttribute("viewBox","0 0 "+d+" "+o),a.setAttribute("markerUnits","strokeWidth"),a.setAttribute("markerWidth",d),a.setAttribute("markerHeight",o),a.setAttribute("orient","auto"),r=t.create("path",a),a.setAttribute("refY",o/2),r.setAttribute("fill","transparent"),r.setAttribute("stroke",i),r.setAttribute("d","M"+d+" 0 L"+d/4+" "+o),n?a.setAttribute("refX",d):a.setAttribute("refX",0),{marker:a,width:0,height:o}},i=function(){function t(t,e){var n,i,a;this._options=e,this.getEndMarker=r(this.getEndMarker,this),this.getStartMarker=r(this.getStartMarker,this),this._SVG=t.svg(),null==this._options&&(this._options={}),null==(n=this._options).width&&(n.width=12),null==(i=this._options).height&&(i.height=12),null==(a=this._options).color&&(a.color="black")}return t.prototype.getStartMarker=function(){return null==this._start&&(this._start=a(this._SVG,this._options,!1)),this._start},t.prototype.getEndMarker=function(){return null==this._end&&(this._end=a(this._SVG,this._options,!0)),this._end},t}(),{createFlow:t.create,createConditional:function(t,e){return new n(t,e)},createDefault:function(t,e){return new i(t,e)}}})}.call(this),function(){define("ui/svg/workflow/util/svg.themes",["ui/svg/workflow/util/svg.marker"],function(l){var n,s,i,r;return r=function(t,e){return _.isString(e)?e:t.createColor(e)},s=function(t,e,n,i,a){return null==e&&(e="black"),null==n&&(n="transparent"),null==i&&(i=e),null==a&&(a=i),{stroke:r(t,e),fill:r(t,n),text:r(t,i),icon:r(t,a)}},n=function(t,e,n,i,a,r){var o,d;return null==e&&(e="black"),null==n&&(n="transparent"),null==i&&(i=e),null==a&&(a=i),null==r&&(r=e),o={color:r},(d=s(t,e,n,i,a)).markers=l.createFlow(t,o),d},i=function(t,e,n,i,a,r){var o,d;return null==e&&(e="black"),null==n&&(n="transparent"),null==i&&(i=e),null==a&&(a=i),null==r&&(r=e),o={color:r},(d=s(t,e,n,i,a)).markers={flow:l.createFlow(t,o),conditional:l.createConditional(t,o),default:l.createDefault(t,o)},d},{create:function(t){var e;return e=t.svg(),{activity:{normal:s(e,"black","lightBlue"),active:s(e,"red","lightBlue","black"),histo:s(e,"red","lightBlue","black")},subProcess:{normal:s(e,"black"),active:s(e,"red","transparent","black"),histo:s(e,"red","transparent","black")},annotation:{normal:s(e,"black")},association:{normal:n(e,"black")},eventDefault:{normal:s(e,"black"),active:s(e,"red","transparent","black"),histo:s(e,"red","transparent","black")},eventStart:{normal:s(e,"black","lightGreen"),active:s(e,"red","lightGreen","black"),histo:s(e,"red","lightGreen","black")},eventEnd:{normal:s(e,"black","lightGray"),active:s(e,"red","lightGray","black"),histo:s(e,"red","lightGray","black")},eventCatch:{normal:s(e,"black","orange"),active:s(e,"red","orange","black"),histo:s(e,"red","orange","black")},eventThrow:{normal:s(e,"black","lightsalmon"),active:s(e,"red","lightsalmon","black"),histo:s(e,"red","lightsalmon","black")},eventBoundary:{normal:s(e,"black","powderblue"),active:s(e,"red","powderblue","black"),histo:s(e,"red","powderblue","black")},flow:{normal:i(e,"black","transparent","blue","black"),histo:i(e,"red","transparent","blue","red")},gatewayDefault:{normal:s(e,"black"),active:s(e,"red"),histo:s(e,"red","transparent","black")},gatewayParallel:{normal:s(e,"black"),active:s(e,"red"),histo:s(e,"red","transparent","black")},gatewayExclusive:{normal:s(e,"black"),active:s(e,"red"),histo:s(e,"red","transparent","black")},gatewayInclusive:{normal:s(e,"black"),active:s(e,"red"),histo:s(e,"red","transparent","black")},gatewayEvent:{normal:s(e,"black"),active:s(e,"red"),histo:s(e,"red","transparent","black")},lane:{normal:s(e,"black")},pool:{normal:s(e,"black")}}}}})}.call(this),function(){define("ui/svg/workflow/util/svg.context",["ui/svg/core/svg","ui/svg/workflow/util/svg.themes"],function(n,i){return{create:function(t){var e;return(e=n.create(t)).themes=i.create(e),e}}})}.call(this),function(){define("ui/svg/workflow/util/svg.icon",[],function(){var t,e,o,n,i,a,r,d,l,s,u,c,p,m,f,b;return o=function(t,e,n,i,a,r,o){var d;return null==o&&(o="transparent"),(d=t.create("path")).setAttribute("d","M"+e+" "+(n+.86*a)+" L"+(e+.36*i)+" "+n+" L"+(e+.64*i)+" "+(n+.5*a)+" L"+(e+i)+" "+(n+.2*a)+" L"+(e+.66*i)+" "+(n+a)+" L"+(e+.4*i)+" "+(n+.53*a)+" Z"),t.setColor(d,"stroke",r),t.setColor(d,"fill",o),null},n=function(t,e,n,i,a,r){return o(t,e,n,i,a,"transparent",r)},m=function(t,e,n,i,a,r){var o,d,l,s,u;return o=e+i/2,d=n+a/2,u=i<a?i:a,u/=2,(s=t.create("circle")).setAttribute("cx",o),s.setAttribute("cy",d),s.setAttribute("r",u),t.setColor(s,"stroke",r),t.setColor(s,"fill","transparent"),(l=t.create("circle")).setAttribute("cx",o),l.setAttribute("cy",d),l.setAttribute("r",u/2),t.setColor(l,"stroke",r),t.setColor(l,"fill",r),null},p=function(t,e,n,i,a,r,o){var d;return null==o&&(o="transparent"),(d=t.create("polygon")).setAttribute("points",e+","+(n+a)+" "+(e+i/2)+","+n+" "+(e+i)+","+(n+a)),t.setColor(d,"stroke",r),t.setColor(d,"fill",o),null},i=function(t,e,n,i,a,r){return p(t,e,n,i,a,"transparent",r)},f=function(t,e,n,i,a,r){var o,d,l;return i<(l=2*a/3)&&(l=i),l/=2,(o=t.create("circle")).setAttribute("cx",e+i/2),o.setAttribute("cy",n+l),o.setAttribute("r",l-1),t.setColor(o,"stroke",r),t.setColor(o,"fill",r),(d=t.create("path")).setAttribute("d","M"+(e+i/2-l)+" "+(n+3*l)+" l"+2*l+" 0 l0 "+-l+" l"+-2*l+" 0 Z"),t.setColor(d,"stroke",r),t.setColor(d,"fill",r),null},s=function(t,e,n,i,a,r){var o,d,l,s,u,c,p,m;return i<(c=3*(u=a)/4)&&(u=2*(c=i)),m=n,d=3*c/4,o=u/4,l=(p=e+(i-c)/2)+c/8,(s=t.create("path")).setAttribute("d","M"+p+" "+m+" l"+c+" 0 l0 "+u+" l"+-c+" 0 l0 "+-u+" M"+l+" "+(m+o)+" l"+d+" 0 M"+l+" "+(m+o+o)+" l"+d+" 0 M"+l+" "+(m+o+o+o)+" l"+d+" 0"),t.setColor(s,"stroke",r),s.setAttribute("fill","transparent"),null},c=function(t,e,n,i,a,r){var o;return(o=t.create("ellipse")).setAttribute("cx",e+i/2),o.setAttribute("cy",n+a/2),o.setAttribute("rx",i/2),o.setAttribute("ry",a/2),t.setColor(o,"stroke",r),o.setAttribute("fill","transparent"),o.setAttribute("stroke-width",2),null},a=function(t,e,n,i,a,r){var o;return e+=i/8,a+=i/8,i=3*i/4,a=3*a/4,(o=t.create("path")).setAttribute("d","M"+e+" "+(n+a)+" l0 "+-a+" l"+i/2+" "+a/2+" l"+i/2+" "+-a/2+" l0 "+a),t.setColor(o,"stroke",r),o.setAttribute("fill","transparent"),o.setAttribute("stroke-width",2),null},l=r=function(t,e,n,i,a,r){var o,d,l,s,u,c;return o=a/8,u=3*a/4,d=a/2,l=(c=i)/2,(s=t.create("path")).setAttribute("d","M"+e+" "+(n+o)+" l"+c+" 0 l0 "+u+" l"+-c+" 0 l0 "+-u+" l"+l+" "+d+" l"+l+" "+-d),t.setColor(s,"stroke",r),t.setColor(s,"fill","transparent"),null},t=function(t,e,n,i,a,r){var o,d,l,s;return d=i/3,s=a/4,o=5*a/8,(l=t.create("path")).setAttribute("d","M"+e+" "+n+" l"+i+" 0 l0 "+a+" l"+-i+" 0 l0 "+-a+" M"+e+" "+(n+s)+" l"+i+" 0 M"+e+" "+(n+o)+" l"+i+" 0 M"+(e+d)+" "+(n+s)+" l0 "+(a-s)),t.setColor(l,"stroke",r),l.setAttribute("fill","transparent"),null},e=function(t,e,n,i,a,r){var o;return(o=t.create("path")).setAttribute("d","M"+e+" "+n+" l"+i+" 0 l0 "+a+" l"+-i+" 0 l0 "+-a+" l"+i+" "+a+" m"+-i+" 0 l"+i+" "+-a),t.setColor(o,"stroke",r),o.setAttribute("fill","transparent"),null},u=function(t,e,n,i,a,r){var o,d;return d=a/2,(o=t.create("path")).setAttribute("d","M"+e+" "+n+" l"+i+" 0 m0 "+d+" l"+-i+" 0 m0 "+d+" l"+i+" 0"),t.setColor(o,"stroke",r),o.setAttribute("fill","transparent"),o.setAttribute("stroke-width",2),null},d=function(t,e,n,i,a,r){var o,d;return d=i/2,(o=t.create("path")).setAttribute("d","M"+e+" "+n+" l0 "+a+" m"+d+" 0 l0 "+-a+" m"+d+" 0 l0 "+a),t.setColor(o,"stroke",r),o.setAttribute("fill","transparent"),o.setAttribute("stroke-width",2),null},{createTimer:(b=function(t,e,n){var i,a,r,o,d;return o=n.x,d=n.y,r=n.width,a=n.height,i=n.color||"black",t(e.svg(),o,d,r,a,i)}).bind(null,function(t,e,n,i,a,r){var o,d,l,s,u;return d=e+i/2,l=n+a/2,u=i<a?i:a,u/=2,(o=t.create("circle")).setAttribute("cx",d),o.setAttribute("cy",l),o.setAttribute("r",u),t.setColor(o,"stroke",r),t.setColor(o,"fill","transparent"),(s=t.create("path")).setAttribute("d","M"+d+" "+(l-u/2)+" l0 "+u/2+" l"+u/3*2+" 0"),t.setColor(s,"stroke",r),s.setAttribute("fill","transparent"),null}),createMessage:b.bind(null,r),createError:b.bind(null,o),createInvertedError:b.bind(null,n),createTerminate:b.bind(null,m),createSignal:b.bind(null,p),createInvertedSignal:b.bind(null,i),createUser:b.bind(null,f),createScript:b.bind(null,s),createService:b.bind(null,c),createManual:b.bind(null,a),createReceive:b.bind(null,l),createBusinessRule:b.bind(null,t),createCollapsed:b.bind(null,e),createSequential:b.bind(null,u),createParallel:b.bind(null,d)}})}.call(this),function(){define("ui/svg/core/svg.text.area",["ui/svg/core/svg.text.length"],function(C){var w,p;return w=function(t,e,n,i,a,r,o,d){var l;return r<(i+1)*d?null:((l=t.create("tspan",e)).setAttribute("dy",d),o?(l.setAttribute("x",n+a/2),l.setAttribute("text-anchor","middle")):l.setAttribute("x",n),l)},p=function(t,e,n,i,a,r,o,d,l,s){var u,c,p,m,f,b,v,y,h,g,T,I;if(e&&""!==e){(p=t.create("text")).setAttribute("x",n),p.setAttribute("y",i),p.setAttribute("font-size",l),t.setColor(p,"fill",d),u=C.create();try{for(I=e.split(/\s+/),g=[],y=[],m=0,b=I.length;m<b;m++)T=I[m],y.push(T),e=y.join(" "),a<u.getLength(e)&&(1<y.length?(y.pop(),g.push(y.join(" ")),y=[T]):(g.push(T),y=[]));for(0<y.length&&g.push(y.join(" ")),f=h=0,v=g.length;f<v&&(e=g[f],c=w(t,p,n,h,a,r,o,s));f++)t.appendText(c,e),u.getLength(e)>a&&(c.setAttribute("textLength",a),c.setAttribute("lengthAdjust","spacingAndGlyphs")),++h}finally{u.clean()}}return null},{create:function(t,e,n){var i,a,r,o,d,l,s,u,c;return u=n.x,c=n.y,s=n.width,d=n.height,a=n.center||!1,r=n.color||"black",o=n.fontSize||10,l=n.lineHeight||12,i=t.svg(),p(i,e,u,c,s,d,a,r,o,l)}}})}.call(this),define("core/api/WorkflowDiagramActivityType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/util/EnumUtils"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkflowDiagramActivityType=void 0;var a,r;(a=e.WorkflowDiagramActivityType||(e.WorkflowDiagramActivityType={}))[a.NONE=0]="NONE",a[a.USER_TASK=1]="USER_TASK",a[a.SCRIPT_TASK=2]="SCRIPT_TASK",a[a.SERVICE_TASK=3]="SERVICE_TASK",a[a.MANUAL_TASK=4]="MANUAL_TASK",a[a.RECEIVE_TASK=5]="RECEIVE_TASK",a[a.BUSINESS_RULE_TASK=6]="BUSINESS_RULE_TASK",a[a.CALL_ACTIVITY=7]="CALL_ACTIVITY",a[a.SUB_PROCESS=8]="SUB_PROCESS",a[a.EVENT_SUB_PROCESS=9]="EVENT_SUB_PROCESS",(r=e.WorkflowDiagramActivityType||(e.WorkflowDiagramActivityType={})).getName=i.EnumUtils.createNameFn("workflow:WorkflowDiagramActivityType",r),r.column=n.EnumColumnUtils.createFactory(r),r.isTask=function(t){return t>=r.USER_TASK&&t<=r.BUSINESS_RULE_TASK},r.isSubProcess=function(t){return t===r.SUB_PROCESS||t===r.EVENT_SUB_PROCESS}}),function(){define("ui/svg/workflow/svg.activity",["ui/svg/workflow/util/svg.icon","ui/svg/core/svg.text.area","core/api/WorkflowDiagramActivityType"],function(u,b,t){var f,c,s,p,m,v,d,y,l;return f=t.WorkflowDiagramActivityType,l=function(t){return f.getName(t.type)||""},p=function(t,e,n){var i,a,r,o;return a=e.documentation,(r=t.create("rect")).setAttribute("x",e.x),r.setAttribute("y",e.y),r.setAttribute("width",e.width),r.setAttribute("height",e.height),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),o=l(e),a&&""!==a&&(o+="\r\n"+a),n.getTooltip&&(i=n.getTooltip(e))&&""!==i&&(o+="\r\n\r\n"+i),t.addTooltip(r,o),n&&n.click&&r.addEventListener("click",n.click.bind(null,e)),null},m=function(t,e,n){var i,a;return a=e.type,i={x:e.x+3,y:e.y+3,width:10,height:10,color:n.icon},a===f.USER_TASK?u.createUser(t,i):a===f.SCRIPT_TASK?u.createScript(t,i):a===f.SERVICE_TASK?u.createService(t,i):a===f.MANUAL_TASK?u.createManual(t,i):a===f.RECEIVE_TASK?u.createReceive(t,i):a===f.BUSINESS_RULE_TASK&&u.createBusinessRule(t,i),null},v=function(t,e,n){var i,a,r,o,d,l,s;return l=e.x,s=e.y,d=e.width,i=e.height,r=e.collapsed,o=e.sequential||e.parallel,a={x:l+(d-10)/2,y:s+i-10-2,width:10,height:10,color:n.icon},r&&o?(a.x=l+d/2-2-10,u.createCollapsed(t,a),a.x+=14,e.sequential?u.createSequential(t,a):u.createParallel(t,a)):r?u.createCollapsed(t,a):e.sequential?u.createSequential(t,a):e.parallel&&u.createParallel(t,a),null},c=function(t,e,n,i,a,r){var o,d,l,s,u,c,p,m,f;return m=e.x,f=e.y,p=e.width,o=e.height,s=i?3:1,(l=t.create("rect")).setAttribute("x",m),l.setAttribute("y",f),l.setAttribute("width",p),l.setAttribute("height",o),l.setAttribute("stroke-width",s),t.setColor(l,"stroke",n.stroke),t.setColor(l,"fill",n.fill),(d=e.name)&&""!==d&&(u={x:m+(p-(c=p-6))/2,y:f+3,width:c,height:o-6,center:!0,color:n.text},a&&(u.height-=13,u.y+=13),r&&(u.height-=12),b.create(t,d,u)),null},d=function(t,e,n){var i,a,r,o,d,l,s,u,c,p,m;return p=e.x,m=e.y,c=e.width,a=e.height,r=e.type===f.EVENT_SUB_PROCESS,(l=t.create("rect")).setAttribute("x",p),l.setAttribute("y",m),l.setAttribute("width",c),l.setAttribute("height",a),t.setColor(l,"stroke",n.stroke),t.setColor(l,"fill",n.fill),r&&l.setAttribute("stroke-dasharray","5,5"),(o=e.name)&&""!==o&&((i=t.create("text")).setAttribute("font-size","10"),t.setColor(i,"fill",n.text),(d=t.createDefs("path")).setAttribute("d","M"+p+" "+(m+12)+" l"+c+" 0"),d.setAttribute("stroke","transparent"),(u=t.create("textPath",i)).setAttribute("startOffset","50%"),t.href(u,d),(s=t.create("tspan",u)).setAttribute("text-anchor","middle"),t.appendText(s,o)),null},y=function(t,e){var n,i,a,r,o;for(n=t.svg(),i=0,a=e.length;i<a;i++)r=e[i],o=t.themes.subProcess.normal,r.active?o=t.themes.subProcess.active:r.historic&&(o=t.themes.subProcess.histo),d(n,r,o);return null},s=function(t,e,n){var i,a,r,o,d,l,s,u;for(i=t.svg(),l=0,s=e.length;l<s;l++)a=e[l],u=t.themes.activity.normal,a.active?u=t.themes.activity.active:a.historic&&(u=t.themes.activity.histo),d=a.type===f.CALL_ACTIVITY||a.active,r=f.isTask(a.type),o=a.collapsed||a.sequential||a.parallel,c(i,a,u,d,r,o),r&&m(i,a,u),o&&v(i,a,u),p(i,a,n);return null},{create:function(t,e,n){var i,a,r,o,d,l;if(e&&e.activities){for(l=[],a=[],r=0,o=(d=e.activities).length;r<o;r++)i=d[r],f.isSubProcess(i.type)&&!i.collapsed?l.push(i):a.push(i);return y(t,l),s(t,a,n),null}}}})}.call(this),function(){define("ui/svg/workflow/svg.annotation",["ui/svg/core/svg.text.area"],function(p){var o;return o=function(t,e){var n,i,a,r,o,d,l,s,u,c;return n=t.svg(),u=e.x,c=e.y,s=e.width,a=e.height,o=e.text,l=t.themes.annotation.normal,i=s<18?s:18,(r=n.create("path")).setAttribute("d","M"+(u+i)+" "+c+" l"+-i+" 0 l0 "+a+" l"+i+" 0"),r.setAttribute("stroke-width",2),n.setColor(r,"stroke",l.stroke),n.setColor(r,"fill","transparent"),d={x:u+3,y:c+3,width:s-3,height:a-6,color:l.text},p.create(n,o,d),null},{create:function(t,e){var n,i,a,r;if(e&&e.annotations){for(i=0,a=(r=e.annotations).length;i<a;i++)n=r[i],o(t,n);return null}}}})}.call(this),function(){define("ui/svg/core/svg.curve.path",[],function(){var s,u,r,l,o,d;return r=function(t,e){var n,i;return n=t.x-e.x,i=t.y-e.y,Math.sqrt(n*n+i*i)},d=function(t,e,n){var i,a;return!(n<=0)&&(!((a=r(t,e))<=n)&&(i=(a-n)/a,e.x=t.x+i*(e.x-t.x),e.y=t.y+i*(e.y-t.y),!0))},l=function(t,e,n,i){var a,r;return r={x:e.x,y:e.y},a={x:e.x,y:e.y},d(t,r,i)&&d(n,a,i)?"L"+r.x+" "+r.y+" Q"+e.x+" "+e.y+" "+a.x+" "+a.y:"L"+e.x+" "+e.y},o=function(t,e){var n,i,a,r,o,d;for(a=n=d=null,o="",i=0;i<t.length;)d=n,n=t[i],d?(r=i+1)<t.length?(a=t[r],o+=" "+l(d,n,a,e)):o+=" L"+n.x+" "+n.y:o+="M"+n.x+" "+n.y,++i;return o},u=function(t,e,n,i){var a;return!t||t.length<=0?"":1===t.length?"M"+(a=t[0]).x+" "+a.y:(e&&d(t[1],t[0],e.width),n&&d(t[t.length-2],t[t.length-1],n.width),o(t,i))},s=function(t,e,n,i,a,r,o){var d,l;return(d=u(e,i,a,r))&&""!==d?((l=t.create("path")).setAttribute("d",d),l.setAttribute("fill","transparent"),t.setColor(l,"stroke",n),i&&t.attr(l,"marker-start",i.marker),a&&t.attr(l,"marker-end",a.marker),o&&l.setAttribute("stroke-dasharray",o),l):null},{create:function(t,e,n){var i,a,r,o,d,l;return null==n&&(n={}),a=n.color||"black",r=n.curveSize||5,o=n.dash,l=n.startMarker,d=n.endMarker,i=t.svg(),s(i,e,a,l,d,r,o)}}})}.call(this),function(){var l;l={none:0,one:1,both:2},define("ui/svg/workflow/svg.association",["ui/svg/core/svg.curve.path"],function(d){var o;return o=function(t,e){var n,i,a,r,o;if(n=t.svg(),(r=e.path)&&!(r.length<=1))return i=e.direction,a={dash:"5,5",color:(o=t.themes.association.normal).stroke},i===l.both&&(a.startMarker=o.markers.getStartMarker()),i!==l.one&&i!==l.both||(a.endMarker=o.markers.getEndMarker()),d.create(n,e.path,a),null},{create:function(t,e){var n,i,a,r;if(e&&e.associations){for(i=0,a=(r=e.associations).length;i<a;i++)n=r[i],o(t,n);return null}}}})}.call(this),function(){define("ui/svg/core/svg.pentagon",[],function(){return{create:function(t,e,n,i){var a,r,o,d,l;return a=.95*i,r=.59*i,d=n-.31*i,l=n+.81*i,(o=t.create("polygon")).setAttribute("points",e+","+(n-i)+" "+(e+a)+","+d+" "+(e+r)+","+l+" "+(e-r)+","+l+" "+(e-a)+","+d),o}}})}.call(this),function(){var S;S={parallel:1,exclusive:2,inclusive:3,event:4},define("ui/svg/workflow/svg.gateway",["ui/svg/core/svg.pentagon"],function(E){var D,o,r;return r=function(t){switch(t.type){case S.parallel:return"Parallel gateway";case S.exclusive:return"Exclusive gateway";case S.inclusive:return"Inclusive gateway";case S.event:return"Event gateway";default:return"Gateway"}},D=function(t,e){var n,i,a;return n=e.documentation,(i=t.create("rect")).setAttribute("x",e.x),i.setAttribute("y",e.y),i.setAttribute("width",e.width),i.setAttribute("height",e.height),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),a=r(e),n&&""!==n&&(a+="\r\n"+n),t.addTooltip(i,a),null},o=function(t,e){var n,i,a,r,o,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k;return n=t.svg(),w=e.x,k=e.y,C=e.width,l=e.height,I=e.type,i=e.active,s=e.historic,g=null,I===S.parallel?g=t.themes.gatewayParallel:I===S.exclusive?g=t.themes.gatewayExclusive:I===S.inclusive?g=t.themes.gatewayInclusive:I===S.event&&(g=t.themes.gatewayEvent),null==g&&(g=t.themes.gatewayDefault),h=g.normal,i?h=g.active:s&&(h=g.histo),d=C/2,o=l/2,(y=n.create("polygon")).setAttribute("points",w+d+","+k+" "+(w+C)+","+(k+o)+" "+(w+d)+","+(k+l)+" "+w+","+(k+o)),n.setColor(y,"stroke",h.stroke),n.setColor(y,"fill",h.fill),r=null,e.type===S.parallel?((r=n.create("path")).setAttribute("d","M"+(w+d)+" "+(k+10)+" L"+(w+d)+" "+(k+l-10)+" M"+(w+10)+" "+(k+o)+" L"+(w+C-10)+" "+(k+o)),r.setAttribute("fill","transparent"),r.setAttribute("stroke-width",3)):e.type===S.exclusive?(u=w+(p=C/4)+3,f=w+3*p-3,T=k+(c=l/4)+3,a=k+3*c-3,(r=n.create("path")).setAttribute("d","M"+u+" "+T+" L"+f+" "+a+" M"+u+" "+a+" L"+f+" "+T),r.setAttribute("fill","transparent"),r.setAttribute("stroke-width",3)):e.type===S.inclusive?(m=d<o?d:o,m/=2,(r=n.create("ellipse")).setAttribute("cx",w+d),r.setAttribute("cy",k+o),r.setAttribute("rx",m),r.setAttribute("ry",m),r.setAttribute("fill","transparent"),r.setAttribute("stroke-width",3)):e.type===S.event&&(m=(b=C/6)<(v=l/6)?b:v,(r=E.create(n,w+d,k+o,m)).setAttribute("fill","transparent")),r&&n.setColor(r,"stroke",h.icon),D(n,e),null},{create:function(t,e){var n,i,a,r;if(e&&e.gateways){for(i=0,a=(r=e.gateways).length;i<a;i++)n=r[i],o(t,n);return null}}}})}.call(this),function(){var g,T;T={start:1,end:2,catch:3,throw:4,boundary:5},g={timer:1,message:2,error:3,terminate:4,signal:5},define("ui/svg/workflow/svg.event",["ui/svg/workflow/util/svg.icon"],function(v){var y,o,h,e,n,r;return e=function(t){switch(t.type){case T.start:return"Start event";case T.end:return"End event";case T.catch:return"Catch event";case T.throw:return"Throw event";case T.boundary:return"Boundary event";default:return"Event"}},n=function(t){switch(t.type){case T.start:return"start event";case T.end:return"end event";case T.catch:return"catch event";case T.throw:return"throw event";case T.boundary:return"boundary event";default:return"event"}},r=function(t){switch(t.action){case g.timer:return"Timer "+n(t);case g.message:return"Message "+n(t);case g.error:return"Error "+n(t);case g.terminate:return"Terminate "+n(t);case g.signal:return"Signal "+n(t);default:return e(t)}},h=function(t,e){var n,i,a;return n=e.documentation,(i=t.create("rect")).setAttribute("x",e.x),i.setAttribute("y",e.y),i.setAttribute("width",e.width),i.setAttribute("height",e.height),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),a=r(e),n&&""!==n&&(a+="\r\n"+n),t.addTooltip(i,a),null},y=function(t,e,n,i,a,r){var o,d,l;return l=i/2,d=a/2,(o=t.create("ellipse")).setAttribute("cx",e+l),o.setAttribute("cy",n+d),o.setAttribute("rx",l),o.setAttribute("ry",d),t.setColor(o,"stroke",r.stroke),t.setColor(o,"fill",r.fill),o},o=function(t,e){var n,i,a,r,o,d,l,s,u,c,p,m,f,b;return n=t.svg(),f=e.x,b=e.y,m=e.width,d=e.height,p=e.type,i=e.action,r=e.cancel,a=e.active,l=e.historic,c=null,p===T.start?c=t.themes.eventStart:p===T.end?c=t.themes.eventEnd:p===T.catch?c=t.themes.eventCatch:p===T.throw?c=t.themes.eventThrow:p===T.boundary&&(c=t.themes.eventBoundary),null==c&&(c=t.themes.eventDefault),u=c.normal,a?u=c.active:l&&(u=c.histo),o=y(n,f,b,m,d,u),r&&o.setAttribute("stroke-dasharray","5 5"),p===T.end?o.setAttribute("stroke-width",3):p!==T.catch&&p!==T.throw&&p!==T.boundary||y(n,f+3,b+3,m-6,d-6,u),s={x:f+m/4,y:b+d/4,width:m/2,height:d/2,color:u.icon},i===g.timer?v.createTimer(t,s):i===g.message?v.createMessage(t,s):i===g.error?p===T.end||p===T.throw?v.createInvertedError(t,s):v.createError(t,s):i===g.terminate?v.createTerminate(t,s):i===g.signal&&(p===T.throw?v.createInvertedSignal(t,s):v.createSignal(t,s)),h(n,e),null},{create:function(t,e){var n,i,a,r;if(e&&e.events){for(i=0,a=(r=e.events).length;i<a;i++)n=r[i],o(t,n);return null}}}})}.call(this),function(){define("ui/svg/workflow/svg.flow",["ui/svg/core/svg.curve.path"],function(s){var o;return o=function(t,e){var n,i,a,r,o,d,l;if((o=e.path)&&!(o.length<=1))return l=t.themes.flow.normal,e.historic&&(l=t.themes.flow.histo),r={color:l.stroke,endMarker:l.markers.flow.getEndMarker()},e.default?r.startMarker=l.markers.default.getStartMarker():e.conditional&&(r.startMarker=l.markers.conditional.getStartMarker()),n=t.svg(),s.create(n,o,r),(a=e.label)&&(d=a.text)&&""!==d&&((i=n.create("text")).setAttribute("x",a.x),i.setAttribute("y",a.y+a.height),i.setAttribute("font-size","10"),n.setColor(i,"fill",l.text),n.appendText(i,d)),null},{create:function(t,e){var n,i,a,r;if(e&&e.flows){for(i=0,a=(r=e.flows).length;i<a;i++)n=r[i],o(t,n);return null}}}})}.call(this),function(){define("ui/svg/workflow/svg.pool",[],function(){var t,o;return t=function(t,e){var n,i,a,r;if(e&&e.pools){for(n=0,i=(r=e.pools).length;n<i;n++)a=r[n],o(t,a);return null}},{createSingle:o=function(t,e,n){var i,a,r,o,d,l,s,u,c,p,m,f;return i=t.svg(),m=e.x,f=e.y,p=e.width,a=e.height,r=e.name,null==n&&(n=t.themes.pool),c=n.normal,(d=i.create("rect")).setAttribute("x",m),d.setAttribute("y",f),d.setAttribute("width",p),d.setAttribute("height",a),i.setColor(d,"stroke",c.stroke),i.setColor(d,"fill",c.fill),r&&""!==r&&((s=i.create("text")).setAttribute("font-size","10"),i.setColor(s,"fill",c.text),(o=i.createDefs("path")).setAttribute("d","M"+(m+12)+" "+(f+a)+" L"+(m+12)+" "+f),o.setAttribute("stroke","transparent"),(u=i.create("textPath",s)).setAttribute("startOffset","50%"),i.href(u,o),(l=i.create("tspan",u)).setAttribute("text-anchor","middle"),i.appendText(l,r)),null},create:t}})}.call(this),function(){define("ui/svg/workflow/svg.lane",["ui/svg/workflow/svg.pool"],function(n){var d;return d=function(t,e){return n.createSingle(t,e,t.themes.lane)},{create:function(t,e){var n,i,a,r,o;if(e&&e.lanes){for(o=[],n=0,a=(r=e.lanes).length;n<a;n++)i=r[n],o.push(d(t,i));return o}}}})}.call(this),function(){define("ui/svg/workflow/svg.workflow",["ui/svg/workflow/util/svg.context","ui/svg/workflow/svg.activity","ui/svg/workflow/svg.annotation","ui/svg/workflow/svg.association","ui/svg/workflow/svg.gateway","ui/svg/workflow/svg.event","ui/svg/workflow/svg.flow","ui/svg/workflow/svg.lane","ui/svg/workflow/svg.pool"],function(r,o,d,l,s,u,c,p,m){return{create:function(t,e,n){var i,a;return null==n&&(n={}),t.empty(),(a=(i=r.create(t)).svg().domSVG()).setAttribute("height",e.height),a.setAttribute("viewBox","0,0,"+e.width+","+e.height),c.create(i,e),l.create(i,e),d.create(i,e),m.create(i,e),p.create(i,e),o.create(i,e,n),s.create(i,e),u.create(i,e),null}}})}.call(this),function(){define("views/workflow/task/task.actions",["jquery","lodash","i18n","kendo","core/util/DateUtils"],function(i,p,d,t,e){var l,s,u,n,a,o,m,c,f,r,b,v,y;return u=e.DateUtils,n=function(t,e,n,i){var a,r;return a=e.properties,t&&a&&p.has(a,t.id)?(r=a[t.id],p.isString(r)&&(r="true"===r.toLowerCase()),r?d.t(n):d.t(i)):null},f=function(t,e){var n;return n={items:e},i("<div>").appendTo(t).kendoToolBar(n),null},c=function(t,e,n){return t.model.set(e.id,n),t.complete()},(l={}).DMS_VALIDATION={getText:function(t,e){return n(t,e,"workflow:tasks.actions.accepted","workflow:tasks.actions.rejected")},updateFormRawModel:y=function(t,e){return t[e.id]=!1,null},setupForm:b=function(t,e,n,i,a){var r;return null==i&&(i=d.t("workflow:tasks.actions.accept")),null==a&&(a=d.t("workflow:tasks.actions.reject")),r=[{type:"button",text:i,icon:"check",primary:!0,click:c.bind(null,e,n,!0)},{type:"button",text:a,icon:"close",click:c.bind(null,e,n,!1)}],f(t,r)}},a=function(t,e){return n(t,e,"workflow:tasks.actions.submitted","workflow:tasks.actions.rejected")},v=y,r=function(t,e,n){return b(t,e,n,d.t("workflow:tasks.actions.submit"))},l.DMS_SUBMIT={getText:a,updateFormRawModel:v,setupForm:r},s={getText:function(){return d.t("workflow:tasks.actions.completed")},updateFormRawModel:function(){},setupForm:function(t,e,n){var i;return i=[{type:"button",text:d.t("workflow:tasks.actions.complete"),icon:"check",primary:!0,click:e.complete}],f(t,i)}},o=function(t,e,n){var i,a,r,o;return(a=u.toDate(n.endDateTime))&&(o=t.getText(e,n))?(r={context:"",date:a,action:o},(i=n.assignee)&&(r.context="assignee",r.assignee=i),d.t("workflow:tasks.actions.tooltip",r)):null},m=function(t){var e,n,i,a,r;if(t&&t.properties)for(n=0,i=(r=t.properties).length;n<i;n++)if(a=r[n],e=l[a.name])return o.bind(null,e,a);return o.bind(null,s,null)},{getDetailActionText:function(t,e){var n,i,a,r,o;if(t&&t.properties)for(i=0,a=(o=t.properties).length;i<a;i++)if(r=o[i],n=l[r.name])return n.getText(r,e);return s.getText(null,e)},isAction:function(t){return t&&null!=l[t.name]},getTooltip:function(t){var e,n,i,a,r,o,d,l,s,u,c;if(!t||!t.details)return null;for(c=m(t),u=[],n=[],i=0,r=(d=t.details).length;i<r;i++)null!=(e=d[i]).endDateTime&&n.push(e);for(a=0,o=(l=p.sortBy(n,"endDateTime")).length;a<o;a++)(s=c(l[a]))&&u.push(s);return 0<u.length?u.join("\r\n"):null},updateFormRawModel:function(t,e){var n,i,a,r,o;if(t&&e){if(e.properties)for(i=0,a=(o=e.properties).length;i<a;i++)if(r=o[i],n=l[r.name])return void n.updateFormRawModel(t,r);return s.updateFormRawModel(t,null),null}},setupForm:function(t,e,n){var i,a,r,o,d;if(t&&e&&n){if(n.properties)for(a=0,r=(d=n.properties).length;a<r;a++)if(o=d[a],i=l[o.name])return void i.setupForm(t,e,o);return s.setupForm(t,e,null),null}}}})}.call(this),define("compliance/ui/ComplianceExternalUserUI",["require","exports","compliance/repository/ComplianceWorkflowRepository"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceExternalUserUI=void 0;var n=function(){function t(){}return t.multiWidget=function(t,n){var e={autoWidth:!0,dataSource:{transport:{read:function(e){i.ComplianceWorkflowRepository.fetchExternalUserIdentifiables(n).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})}},sort:{field:"name",dir:"asc"}},dataTextField:"name",dataValueField:"id",valuePrimitive:!0};return t.kendoMultiSelect(e)},t}();e.ComplianceExternalUserUI=n}),function(){var Y;Y={bool:1,date:2,enum:3,int:4,string:5,double:6,excel:7,complianceuser:8},define("views/workflow/task/task.properties",["jquery","lodash","i18n","kendo","core/ui/DateUI","core/ui/IntegerUI","core/ui/NumberUI","views/workflow/task/task.actions","compliance/ui/ComplianceExternalUserUI"],function(u,s,t,e,n,i,a,c,r){var l,o,d,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H;return p=a.NumberUI,o=n.DateUI,d=i.IntegerUI,l=r.ComplianceExternalUserUI,k=function(t){return"task_"+t.id},I=function(t){return u("<label>").attr("for",k(t)).text(t.name)},(m={})[Y.bool]={setupHistoGrid:function(t,e,n){var i;return i=e.id,n.hasOwnProperty(i)?t[i]=n[i]:t[i]=!1},addHistoModel:function(t,e,n){return t[n.id]={type:"boolean"},e.push({field:n.id,title:n.name}),null},updateFormRawModel:function(t,e){return t[e.id]=!1,null},setupForm:function(t,e,n,i,a){var r,o;return o=u("<tr>").appendTo(n),r=u("<td>").appendTo(o),I(i).appendTo(r),r=u("<td>").appendTo(o),u("<input>").attr("id",k(i)).attr("type","checkbox").attr("data-bind","checked: "+i.id).appendTo(r),r=u("<td>").appendTo(o),r=u("<td>").appendTo(o),null}},N=function(t,e,n){var i;return i=e.id,n.hasOwnProperty(i)?t[i]=n[i]:t[i]=null},b=function(t,e,n){return t[n.id]={type:"date"},e.push(o.column({field:n.id,title:n.name})),null},G=function(t,e){return t[e.id]=null},S=function(t,e,n,i,a){var r,o;return o=u("<tr>").appendTo(n),r=u("<td>").appendTo(o),I(i).appendTo(r),r=u("<td>").appendTo(o),u("<input>").attr("id",k(i)).attr("data-bind","value: "+i.id).appendTo(r).kendoDatePicker(),r=u("<td>").appendTo(o),r=u("<td>").appendTo(o),null},m[Y.date]={setupHistoGrid:N,addHistoModel:b,updateFormRawModel:G,setupForm:S},O=function(t,e,n){var i,a,r,o,d,l;if(a=e.id,n.hasOwnProperty(a)&&(l=n[a],e.values))for(i=0,r=(o=e.values).length;i<r;i++)if((d=o[i]).id===l)return void(t[a]=d.name);return t[a]=""},y=function(t,e,n){return t[n.id]={type:"string"},e.push({field:n.id,title:n.name}),null},B=function(t,e){if(e.values&&!(e.values.length<=0))return t[e.id]=e.values[0].id,null},_=function(t,e,n,i,a){var r,o,d,l;return l=u("<tr>").appendTo(n),d=u("<td>").appendTo(l),I(i).appendTo(d),d=u("<td>").appendTo(l),r=u("<input>").attr("id",k(i)).attr("data-bind","value: "+i.id).appendTo(d),o=s.sortBy(i.values,"name"),r.kendoDropDownList({autoWidth:!0,dataTextField:"name",dataValueField:"id",dataSource:o}),d=u("<td>").appendTo(l),d=u("<td>").appendTo(l),null},m[Y.enum]={setupHistoGrid:O,addHistoModel:y,updateFormRawModel:B,setupForm:_},L=function(t,e,n){var i;return i=e.id,n.hasOwnProperty(i)?t[i]=n[i]:t[i]=0},g=function(t,e,n){return t[n.id]={type:"number"},e.push(d.column({field:n.id,title:n.name})),null},W=function(t,e){return t[e.id]=0,null},F=function(t,e,n,i,a){var r,o;return o=u("<tr>").appendTo(n),r=u("<td>").appendTo(o),I(i).appendTo(r),r=u("<td>").appendTo(o),u("<input>").attr("id",k(i)).attr("data-bind","value: "+i.id).appendTo(r).kendoNumericTextBox({format:"n0"}),r=u("<td>").appendTo(o),r=u("<td>").appendTo(o),null},m[Y.int]={setupHistoGrid:L,addHistoModel:g,updateFormRawModel:W,setupForm:F},M=function(t,e,n){var i;return i=e.id,n.hasOwnProperty(i)?t[i]=n[i]:t[i]=""},T=function(t,e,n){return t[n.id]={type:"string"},e.push({field:n.id,title:n.name}),null},H=function(t,e){return t[e.id]="",null},P=function(t,e,n,i,a){var r,o;return o=u("<tr>").appendTo(n),r=u("<td>").appendTo(o),I(i).appendTo(r),r=u("<td>").appendTo(o),u("<input>").attr("id",k(i)).addClass("k-textbox").attr("data-bind","value: "+i.id).appendTo(r),r=u("<td>").appendTo(o),r=u("<td>").appendTo(o),null},m[Y.string]={setupHistoGrid:M,addHistoModel:T,updateFormRawModel:H,setupForm:P},R=function(t,e,n){var i;return i=e.id,n.hasOwnProperty(i)?t[i]=n[i]:t[i]=0},v=function(t,e,n){return t[n.id]={type:"number"},e.push(p.column({field:n.id,title:n.name})),null},q=function(t,e){return t[e.id]=0,null},x=function(t,e,n,i,a){var r,o;return o=u("<tr>").appendTo(n),r=u("<td>").appendTo(o),I(i).appendTo(r),r=u("<td>").appendTo(o),u("<input>").attr("id",k(i)).attr("data-bind","value: "+i.id).appendTo(r).kendoNumericTextBox({format:"n"}),r=u("<td>").appendTo(o),r=u("<td>").appendTo(o),null},m[Y.double]={setupHistoGrid:R,addHistoModel:v,updateFormRawModel:q,setupForm:x},A=function(t,e,n){var i;return i=e.id,n.hasOwnProperty(i)?t[i]=n[i]:t[i]=""},h=function(t,e,n){return t[n.id]={type:"string"},null},V=function(t,e){return t[e.id]='{"sheets":[]}',null},w=function(t,e){var n,i;return e.value?e.value:e.variable&&(i=(null!=(n=t.diagram)?n.variables:void 0)||{},s.has(i,e.variable))?i[e.variable]:null},C=function(t,e,n){var i;if(i=e.data("kendoSpreadsheet"))return t.model.set(n.id,JSON.stringify(i.toJSON())),null},U=function(t,e,n,i,a){var r,o,d,l;if(l=w(t,i))return u("<h4>").text(i.name).appendTo(e),d=u("<div>").appendTo(e),(r=JSON.parse(l)).change=C.bind(null,t,d,i),d.kendoSpreadsheet(r),o=d.data("kendoSpreadsheet"),t.model.set(i.id,JSON.stringify(o.toJSON())),null},m[Y.excel]={setupHistoGrid:A,addHistoModel:h,updateFormRawModel:V,setupForm:U},D=function(t,e,n){var i;return i=e.id,n.hasOwnProperty(i)?t[i]=n[i]:t[i]=""},f=function(t,e,n){return t[n.id]={type:"string"},e.push({field:n.id,title:n.name}),null},j=function(t,e){return t[e.id]="",null},E=function(t,e,n,i,a){var r,o,d;return d=u("<tr>").appendTo(n),o=u("<td>").appendTo(d),I(i).appendTo(o),o=u("<td>").appendTo(d),r=u("<input>").attr("id",k(i)).attr("data-bind","value: "+i.id).appendTo(o),l.multiWidget(r,a),o=u("<td>").appendTo(d),o=u("<td>").appendTo(d),null},m[Y.complianceuser]={setupHistoGrid:D,addHistoModel:f,updateFormRawModel:j,setupForm:E},{addHistoModel:function(t,e,n){var i;return c.isAction(n)||null!=(i=m[n.type])&&i.addHistoModel(t,e,n),null},setupHistoGrid:function(t,e,n){var i;return c.isAction(e)||null!=(i=m[e.type])&&i.setupHistoGrid(t,e,n.properties),null},updateFormRawModel:function(t,e){var n,i,a,r,o;if(t&&e){if(e.properties)for(n=0,i=(r=e.properties).length;n<i;n++)a=r[n],c.isAction(a)||null!=(o=m[a.type])&&o.updateFormRawModel(t,a);return null}},setupForm:function(t,e,n,i){var a,r,o,d,l,s;if(t&&e&&n){if(n.properties)for(e.diagram,s=u("<table>").addClass("formTable").appendTo(t),a=0,r=(d=n.properties).length;a<r;a++)o=d[a],c.isAction(o)||null!=(l=m[o.type])&&l.setupForm(e,t,s,o,i);return null}}}})}.call(this),define("core/api/WorkflowActivityExecutionStatus",["require","exports","core/ui/grid/column/EnumColumnUtils","core/util/EnumUtils"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkflowActivityExecutionStatus=void 0;var a,r;(a=e.WorkflowActivityExecutionStatus||(e.WorkflowActivityExecutionStatus={}))[a.SUCCESS=1]="SUCCESS",a[a.ERROR=2]="ERROR",(r=e.WorkflowActivityExecutionStatus||(e.WorkflowActivityExecutionStatus={})).getName=i.EnumUtils.createNameFn("workflow:WorkflowActivityExecutionStatus",r),r.column=n.EnumColumnUtils.createFactory(r)}),function(){define("views/workflow/task/diagram.history.grid",["jquery","lodash","ui","i18n","kendo","settings/views/logs/LogsView","views/workflow/task/task.actions","views/workflow/task/task.properties","core/api/WorkflowDiagramActivityType","core/api/WorkflowActivityExecutionStatus","core/ui/DateTimeUI"],function(g,t,e,T,n,i,I,C,a,r,o){var w,d,k,l,v,s,E,D,S,y,N;return w=o.DateTimeUI,v=a.WorkflowDiagramActivityType,l=r.WorkflowActivityExecutionStatus,k=e.grid,d=i.LogsView,y=function(t){return d.display(t),!1},N=function(t){return d.display(void 0,t),t},s=function(t,e,n){var i,a,r,o,d,l,s,u,c,p,m,f,b;if(!e||!e.activities)return!1;for(null==n&&(n="export"),m={dataSource:{schema:{model:{id:"id",fields:{DMS_DATE:{type:"date"},DMS_NAME:{type:"string"},DMS_HIST_ACT_ID:{type:"string"},DMS_TYPE:{type:"number"},DMS_ACTION:{type:"string"},DMS_STATUS:{type:"number"},DMS_DETAILS:{type:"string"},DMS_ASSIGNEE:{type:"string"}}}},sort:{field:"DMS_DATE",dir:"desc"},filter:{logic:"or",filters:[{field:"DMS_TYPE",operator:"eq",value:v.USER_TASK},{field:"DMS_TYPE",operator:"eq",value:v.SERVICE_TASK}]}},groupable:!0,editable:!1,sortable:!0,resizable:!0,columnMenu:!0,columns:[w.column({field:"DMS_DATE",title:T.t("workflow:tasks.history.date")}),{field:"DMS_NAME",title:T.t("workflow:tasks.history.name")},{field:"DMS_HIST_ACT_ID",title:T.t("workflow:tasks.history.histId"),hidden:!0},v.column({field:"DMS_TYPE",title:T.t("workflow:tasks.history.type")}),{field:"DMS_ACTION",title:T.t("workflow:tasks.history.action")},{field:"DMS_STATUS",title:T.t("workflow:tasks.history.status"),template:S},{field:"DMS_DETAILS",title:T.t("workflow:tasks.history.details"),template:D},{field:"DMS_ASSIGNEE",title:T.t("workflow:tasks.history.assignee")}],toolbar:["excel","pdf"],excel:{allPages:!0,fileName:n+".xlsx"},pdf:{allPages:!0,fileName:n+".pdf"},scrollable:!1,pageable:k.defaultPageable(),filterable:!0},a=[],d=0,s=(f=e.activities).length;d<s;d++)if(null!=(i=f[d]).details)for(c=i.name,l=0,u=(b=i.details).length;l<u;l++)null!=(r=b[l]).endDateTime&&(p={DMS_DATE:r.endDateTime,DMS_NAME:c,DMS_HIST_ACT_ID:r.historicActivityId||"",DMS_TYPE:i.type,DMS_ASSIGNEE:r.assignee||"",DMS_ACTION:I.getDetailActionText(i,r),DMS_STATUS:r.result.status,DMS_DETAILS:E(r.result)}).DMS_ACTION&&a.push(p);return a.length,m.dataSource.data=a,e.hasLogs&&(g("<button>").addClass("k-button").text(T.t("workflow:tasks.history.logsButton")).click(y.bind(null,e.workflowInstanceId)).appendTo(t),g("<p>").appendTo(t)),o=g("<div>").addClass("floatingGrid").appendTo(t),g("<div>").addClass("clearer").appendTo(t),g("<p>").appendTo(t),o.kendoGrid(m),!0},E=function(t){var e,n,i,a,r,o;if(t.status!==l.ERROR||""!==t.details)return t.details;for(e="",o=[],i=0,a=(r=t.errorList).length;i<a;i++)n=r[i],o.push(e.concat(T.t(n.key,n.parameters)));return o},S=function(t){var e;return e=l.getName(t.DMS_STATUS),t.DMS_STATUS===l.ERROR?'<span class="error">'+e+"</span>":e},D=function(t){return t.DMS_STATUS===l.ERROR?'<span class="error">'+t.DMS_DETAILS+"</span>":t.DMS_DETAILS},{createGlobal:s,createTask:function(t,e,n){var i,a,r,o,d,l,s,u,c,p,m,f,b,v,y,h;if(null==n&&(n="export_"+e.name),b={dataSource:{schema:{model:{id:"id",fields:{DMS_DATE:{type:"date"},DMS_HIST_ACT_ID:{type:"string"},DMS_ACTION:{type:"string"},DMS_STATUS:{type:"number"},DMS_DETAILS:{type:"string"},DMS_ASSIGNEE:{type:"string"}}}},sort:{field:"DMS_DATE",dir:"desc"}},groupable:!0,editable:!1,sortable:!0,resizable:!0,columnMenu:!0,columns:[w.column({field:"DMS_DATE",title:T.t("workflow:tasks.history.date")}),{field:"DMS_HIST_ACT_ID",title:T.t("workflow:tasks.history.histId"),hidden:!0},{field:"DMS_ACTION",title:T.t("workflow:tasks.history.action")},{field:"DMS_STATUS",title:T.t("workflow:tasks.history.status"),template:S},{field:"DMS_DETAILS",title:T.t("workflow:tasks.history.details"),template:D},{field:"DMS_ASSIGNEE",title:T.t("workflow:tasks.history.assignee")}],toolbar:["excel","pdf"],excel:{allPages:!0,fileName:n+".xlsx"},pdf:{allPages:!0,fileName:n+".pdf"},scrollable:!1,pageable:k.defaultPageable()},r=[],e.properties)for(d=0,c=(y=e.properties).length;d<c;d++)v=y[d],I.isAction(v)||(r.push(v),C.addHistoModel(b.dataSource.schema.model.fields,b.columns,v));if(l=[],i=[],e.details)for(s=0,p=(h=e.details).length;s<p;s++)if((a=h[s]).endDateTime&&(a.result&&a.result.hasLogs&&a.historicActivityId&&l.push(a.historicActivityId),(f={DMS_DATE:a.endDateTime,DMS_HIST_ACT_ID:a.historicActivityId||"",DMS_ASSIGNEE:a.assignee||"",DMS_STATUS:a.result.status,DMS_DETAILS:E(a.result),DMS_ACTION:I.getDetailActionText(e,a)}).DMS_ACTION)){for(u=0,m=r.length;u<m;u++)v=r[u],C.setupHistoGrid(f,v,a);i.push(f)}return!(i.length<=0)&&(b.dataSource.data=i,0<l.length&&(g("<button>").addClass("k-button").text(T.t("workflow:tasks.history.logsButton")).click(N.bind(null,l)).appendTo(t),g("<p>").appendTo(t)),o=g("<div>").addClass("floatingGrid").appendTo(t),g("<div>").addClass("clearer").appendTo(t),g("<p>").appendTo(t),o.kendoGrid(b),!0)}}})}.call(this),define("taskForms/repository/TaskFormRepository",["require","exports","tslib","core/web/WebHttp","core/repository/RepositoryImpl","lodash","core/web/WebLocation"],function(t,e,n,i,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormRepository=e.TaskFormRepositoryImpl=void 0;var d=function(t){function e(){return t.call(this,"task/form")||this}return n.__extends(e,t),e.prototype.listByModule=function(t,e){return i.WebHttp.getJson(this.options.listUrl,{moduleCategory:t},e)},e.prototype.destroy=function(t,e){var n=t.id;return i.WebHttp.destroyJson("task/form.json",{id:n},e)},e.prototype.getByStringId=function(t,e,n){return i.WebHttp.getJson(this.options.singleUrl,{sid:t,moduleCategory:e},n)},e.prototype.uploadOptions=function(t){return r.defaults(t||{},this.defaultUploadOptions())},e.prototype.defaultUploadOptions=function(){return{async:{saveUrl:o.WebLocation.resolve("task/form/upload.json"),saveField:"file"}}},e}(a.RepositoryImpl);e.TaskFormRepositoryImpl=d,e.TaskFormRepository=new d}),define("taskForms/repository/CustomTaskFormRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CustomTaskFormRepository=void 0;var i=function(){function t(){}return t.getInputData=function(t,e){return n.WebHttp.getJson("custom/taskForm/inputData.json",{task:t},e)},t}();e.CustomTaskFormRepository=i}),define("taskForms/data/TaskFormAction",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormAction=void 0;var a,r;(a=e.TaskFormAction||(e.TaskFormAction={}))[a.SAVE=1]="SAVE",a[a.SUBMIT=2]="SUBMIT",a[a.CANCEL=3]="CANCEL",(r=e.TaskFormAction||(e.TaskFormAction={})).getName=n.EnumUtils.createNameFn("taskForm:TaskFormAction",r),r.widgetMulti=i.EnumWidgetUtils.createMultiSelect("DomosTaskFormActionMultiSelect",r),r.isSubmit=function(t){switch(t){case r.SUBMIT:return!0;default:return!1}}}),define("taskForms/TaskFormRenderOptions",["require","exports","./data/TaskFormAction"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.kTaskFormRenderReadonlyOptions=e.kTaskFormRenderAllOptions=void 0,e.kTaskFormRenderAllOptions={formEditable:!0,actions:[n.TaskFormAction.SAVE,n.TaskFormAction.SUBMIT]},e.kTaskFormRenderReadonlyOptions={formEditable:!1,actions:[n.TaskFormAction.CANCEL]}}),define("taskForms/render/TaskFormRenderExplanation",["require","exports","core/util/Logger","i18n"],function(t,e,n,a){"use strict";function r(t){return t||a.I18N.t("taskForm:forms.render.unspecifiedError")}function o(t){return t||a.I18N.t("taskForm:forms.render.unspecifiedWarning")}Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormRenderExplanation=void 0;var i=function(){function t(){this.warnings=[],this.errors=[]}return Object.defineProperty(t.prototype,"hasWarnings",{get:function(){return 0<this.warnings.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasErrors",{get:function(){return 0<this.errors.length},enumerable:!1,configurable:!0}),t.prototype.forElement=function(t){var e=t.id,n=function(t){return a.I18N.t("taskForm:forms.render.elementError",{id:e,message:t})},i=this;return{logWarning:function(t){i.logWarning(n(o(t)))},logError:function(t){i.logError(n(r(t)))},asQuery:function(){return{error:function(t){i.logError(a.I18N.t("taskForm:forms.render.elementQueryError",{id:e,message:r(t)}))}}}}},t.prototype.listErrors=function(){return this.errors},t.prototype.listWarnings=function(){return this.warnings},t.prototype.logError=function(t){this.errors.push(r(t)),n.Logger.error(t)},t.prototype.logWarning=function(t){this.warnings.push(o(t))},t}();e.TaskFormRenderExplanation=i}),define("taskForms/data/TaskFormDataType",["require","exports","lodash","core/util/ObservableUtils","core/util/DateUtils"],function(t,e,i,a,n){"use strict";var r,o;function d(t){return i.isNil(t)?"":i.isString(t)?t:i.isArray(t)?d(t[0]):i.isDate(t)?n.DateUtils.toISODateOnly(t):""+t}function l(t){if(i.isNil(t))return null;if(i.isNumber(t))return t;var e=i.isArray(t)?t[0]:t;if(!e)return null;var n=parseFloat(e);return isNaN(n)?null:n}function s(t){return i.isNil(t)?[]:i.isArray(t)?t:[""+t]}function u(t){return i.isNil(t)?"":JSON.stringify(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.toJson=e.TaskFormDataType=void 0,(r=e.TaskFormDataType||(e.TaskFormDataType={}))[r.NONE=1]="NONE",r[r.STRING=2]="STRING",r[r.NUMBER=3]="NUMBER",r[r.DATE=4]="DATE",r[r.STRING_ARRAY=5]="STRING_ARRAY",e.toJson=u,(o=e.TaskFormDataType||(e.TaskFormDataType={})).getValue=function(t,e){switch(e=a.ObservableUtils.unpack(e),t){case o.STRING:return d(e);case o.NUMBER:return l(e);case o.STRING_ARRAY:return s(e);case o.DATE:return n=e,i.isNil(n)?null:i.isDate(n)?n:null;case o.NONE:default:return null}var n},o.isEmpty=function(t,e){if(i.isNil(e))return!1;switch(t){case o.STRING:return!d(e);case o.NUMBER:return i.isNil(l(e));case o.STRING_ARRAY:return s(e).length<=0;case o.NONE:default:return!0}},o.getIdAsJson=function(t){if(t=a.ObservableUtils.unpack(t),i.isNil(t))return"";if(!t.id)throw new Error("id missing");var e={};return e.id=t.id,u(e)},o.getIdentFromJson=function(t){if(!t)return null;if(i.isString(t)){var e=JSON.parse(t);if(e&&e.id)return e}return null},o.getIdFromJson=function(t){if(!t)return null;if(i.isString(t)){var e=JSON.parse(t);if(e&&e.id)return e.id}return null}}),define("taskForms/data/TaskFormDomosElementType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormDomosElementType=void 0;var r,o;(r=e.TaskFormDomosElementType||(e.TaskFormDomosElementType={}))[r.COMMITMENT_SELECT=1]="COMMITMENT_SELECT",r[r.ENTITY_INVESTOR_SELECT=2]="ENTITY_INVESTOR_SELECT",r[r.CURRENCY=3]="CURRENCY",r[r.FUND_SELECT=4]="FUND_SELECT",r[r.FUND_INVESTOR_SELECT=5]="FUND_INVESTOR_SELECT",r[r.FUND_SHARE_SELECT=6]="FUND_SHARE_SELECT",r[r.COUNTRY_SELECT=7]="COUNTRY_SELECT",r[r.CONTACT_ROLE_SELECT=8]="CONTACT_ROLE_SELECT",(o=e.TaskFormDomosElementType||(e.TaskFormDomosElementType={})).getName=n.EnumUtils.createNameFn("taskForm:TaskFormDomosElementType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosTaskFormDomosElementType",o,!1),o.column=a.EnumColumnUtils.createFactory(o,o.widget),o.widgetMulti=i.EnumWidgetUtils.createMultiSelect("DomosTaskFormDomosElementTypeMultiSelect",o),o.columnMulti=a.EnumColumnUtils.createMultiFactory(o,o.widgetMulti)}),define("taskForms/data/TaskFormElementType",["require","exports","./TaskFormDataType","core/util/EnumUtils","./TaskFormDomosElementType","lodash"],function(t,e,n,i,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormElementType=void 0;var o,d;(o=e.TaskFormElementType||(e.TaskFormElementType={}))[o.TEXT=1]="TEXT",o[o.TEXTAREA=2]="TEXTAREA",o[o.RADIO=3]="RADIO",o[o.CHECKBOX=4]="CHECKBOX",o[o.NUMBER=5]="NUMBER",o[o.DATE=6]="DATE",o[o.HEADER=7]="HEADER",o[o.SELECT=8]="SELECT",o[o.MULTI_SELECT=9]="MULTI_SELECT",o[o.BLANK=10]="BLANK",o[o.PARAGRAPH=11]="PARAGRAPH",o[o.FORM=12]="FORM",o[o.DOMOS_SELECT=13]="DOMOS_SELECT",(d=e.TaskFormElementType||(e.TaskFormElementType={})).getName=i.EnumUtils.createNameFn("taskForm:TaskFormElementType",d),d.getStringId=function(t){return d[t].toLowerCase()||"unknown"},d.useLabel=function(t){switch(t){case d.HEADER:case d.PARAGRAPH:case d.BLANK:return!1;default:return!0}},d.useRadio=function(t){switch(t){case d.RADIO:case d.SELECT:return!0;default:return!1}},d.hasPlaceholder=function(t){switch(t){case d.TEXT:case d.TEXTAREA:case d.SELECT:case d.MULTI_SELECT:case d.NUMBER:case d.DATE:return!0;default:return!1}},d.hasOptions=function(t){switch(t){case d.RADIO:case d.CHECKBOX:case d.SELECT:case d.MULTI_SELECT:return!0;default:return!1}},d.getDataType=function(t){switch(t){case d.TEXT:case d.TEXTAREA:case d.RADIO:case d.SELECT:return n.TaskFormDataType.STRING;case d.CHECKBOX:case d.MULTI_SELECT:return n.TaskFormDataType.STRING_ARRAY;case d.NUMBER:return n.TaskFormDataType.NUMBER;case d.DATE:return n.TaskFormDataType.DATE;default:return n.TaskFormDataType.NONE}},d.getDomosDataType=function(t){return t.type===d.DOMOS_SELECT&&t?t.domosType:null},d.getValue=function(t,e){return n.TaskFormDataType.getValue(d.getDataType(t),e)},d.getDomosValue=function(t,e){switch(t){case a.TaskFormDomosElementType.COMMITMENT_SELECT:case a.TaskFormDomosElementType.ENTITY_INVESTOR_SELECT:case a.TaskFormDomosElementType.FUND_SELECT:case a.TaskFormDomosElementType.FUND_INVESTOR_SELECT:case a.TaskFormDomosElementType.FUND_SHARE_SELECT:return n.TaskFormDataType.getIdAsJson(e);case a.TaskFormDomosElementType.CURRENCY:case a.TaskFormDomosElementType.COUNTRY_SELECT:case a.TaskFormDomosElementType.CONTACT_ROLE_SELECT:return r.isNil(e)?null:n.TaskFormDataType.getIdAsJson({id:e});default:throw new Error("Unsuported element type"+t)}},d.isEmpty=function(t,e){return n.TaskFormDataType.isEmpty(d.getDataType(t),e)}}),define("taskForms/common/TaskFormUtils",["require","exports","tslib","lodash","core/query/QueryBuilderUtils","../data/TaskFormElementType","../repository/TaskFormRepository","taskForms/data/TaskFormDataType","taskForms/data/TaskFormDomosElementType"],function(t,e,o,n,d,l,s,u,c){"use strict";function p(t,e){return t+"_"+e}function m(t,e){if(d.QueryBuilderUtils.isGroup(e))for(var n=0,i=e.rules;n<i.length;n++){m(t,i[n])}else a=t,(r=e).id=p(a,r.id),r.field=p(a,r.field);var a,r}function f(t,e){if(t)for(var n=0,i=e;n<i.length;n++){var a=i[n];a.id=p(t,a.id);var r=a.activeQuery;if(r)for(var o=0,d=r.rules;o<d.length;o++){m(t,d[o])}}}Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormUtils=void 0;var i=function(){function r(){}return r.bindingId=function(t){return t.id},r.inactiveBindingId=function(t){return"$inactive__"+t.id},r.requiredError=function(t){return"$rqe__"+t.id},r.getBinding=function(t){return r.bindingId(t)},r.getJavascriptId=function(t){return t.javascriptId?t.javascriptId:r.bindingId(t)},r.fillModel=function(t,e,n){var i=r.getBinding(e);if(n){if(n.domosType)if(n.domosType===c.TaskFormDomosElementType.CURRENCY||n.domosType===c.TaskFormDomosElementType.CONTACT_ROLE_SELECT||n.domosType===c.TaskFormDomosElementType.COUNTRY_SELECT)(a=u.TaskFormDataType.getIdFromJson(n.value))&&(t[i]=a);else(a=u.TaskFormDataType.getIdentFromJson(n.value))&&(t[i]=a);else t[i]=l.TaskFormElementType.getValue(e.type,n.value)}else{var a=r.getDefaultValue(e);t[i]=l.TaskFormElementType.getValue(e.type,a)}},r.getOptions=function(t){return l.TaskFormElementType.hasOptions(t.type)?t.options:[]},r.copyFormElements=function(i,a,r){return o.__awaiter(this,void 0,void 0,function(){var e,n;return o.__generator(this,function(t){switch(t.label){case 0:return[4,s.TaskFormRepository.fetch(i,r)];case 1:return e=t.sent(),n=e.elements,f(a,n),[2,n]}})})},r.prefixElements=function(t,e){f(t,e)},r.getDefaultValue=function(t){switch(t.type){case l.TaskFormElementType.TEXT:case l.TaskFormElementType.TEXTAREA:case l.TaskFormElementType.NUMBER:return t.defaultValue;case l.TaskFormElementType.RADIO:case l.TaskFormElementType.SELECT:var e=n.find(r.getOptions(t),function(t){return t.selected});return e?e.id:null;case l.TaskFormElementType.CHECKBOX:case l.TaskFormElementType.MULTI_SELECT:return n.chain(r.getOptions(t)).filter(function(t){return t.selected}).map(function(t){return t.id}).value();default:return null}},r}();e.TaskFormUtils=i}),define("taskForms/render/TaskFormRenderModel",["require","exports","core/util/ObservableUtils","taskForms/common/TaskFormUtils","taskForms/data/TaskFormElementType","i18n"],function(t,e,p,m,f,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormRenderModel=void 0;var n=function(){function t(t){this.rElements=t;var e=this.createRawModel(t);e.isModified=!1,this.model=kendo.observable(e);var n=!1;this.model.bind("change",function(t){if(!n&&t&&t.sender&&"isModified"!==t.field){n=!0;try{t.sender.set("isModified",!0);p.ObservableUtils.update(t.sender,{})}finally{n=!1}}})}return t.prototype.createRawModel=function(t){for(var e={},n=0,i=t;n<i.length;n++){var a=i[n];m.TaskFormUtils.fillModel(e,a.element,a.initialValue)}return e},t.prototype.kendo=function(){return this.model},Object.defineProperty(t.prototype,"isModified",{get:function(){return!!this.model.get("isModified")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValid",{get:function(){for(var t=0,e=this.rElements;t<e.length;t++){var n=e[t],i=m.TaskFormUtils.requiredError(n.element);if(this.model[i])return!1}return!0},enumerable:!1,configurable:!0}),t.prototype.isInactive=function(t){var e=m.TaskFormUtils.inactiveBindingId(t);return this.model[e]},t.prototype.toElementValues=function(){for(var t=function(t,e){for(var n=0,i=e;n<i.length;n++){if(t===i[n])return!0}return!1},e=[],n=[],i=0,a=this.rElements;i<a.length;i++){var r=a[i].element,o=f.TaskFormElementType.getDataType(r.type),d=f.TaskFormElementType.getDomosDataType(r),l=m.TaskFormUtils.getBinding(r),s=m.TaskFormUtils.getJavascriptId(r);if(t(s,n))throw new Error(b.I18N.t("taskForm:validation.duplicateJsId",{javascriptId:r.javascriptId}));var u=p.ObservableUtils.getUnpacked(this.model,l),c={name:s,type:o,domosType:d,value:d?f.TaskFormElementType.getDomosValue(d,u):f.TaskFormElementType.getValue(r.type,u)};if(null!=c.value)e.push(c);else if(r.required)throw new Error(b.I18N.t("taskForm:validation.missingElement",{element:r.label}));n.push(s)}return e},t}();e.TaskFormRenderModel=n}),define("taskForms/render/TaskFormRenderActions",["require","exports","lodash","core/event/DEvent","taskForms/data/TaskFormAction"],function(t,e,n,i,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormRenderActions=void 0;var a=function(){function t(t,e){this.model=e,this.event=new i.DEvent(!1),this.actions=n.chain(t.actions).compact().sort().uniq().value()}return t.prototype.render=function(t){var e=this,n=$("<div>").appendTo(t);return this.setupToolbar(n),this.model.kendo().bind("change",function(){return e.setupToolbar(n)}),n},t.prototype.setupToolbar=function(t){var e=this;kendo.destroy(t),t.empty();for(var n=this.model.isModified,i=this.model.isValid,a=[],r=0,o=this.actions;r<o.length;r++){var d=o[r],l=this.isActionEnabled(d,n,i);a.push({type:"button",text:s.TaskFormAction.getName(d),attributes:{"data-action":d},enable:l})}t.kendoToolBar({items:a,click:function(t){return e.actionClick(t)}})},t.prototype.isActionEnabled=function(t,e,n){switch(t){case s.TaskFormAction.SAVE:return e;case s.TaskFormAction.SUBMIT:return n;case s.TaskFormAction.CANCEL:return!0;default:return!1}},t.prototype.actionClick=function(t){if(t.target){var e=t.target.attr("data-action")||"",n=parseInt(e,10);n&&this.isActionEnabled(n,!0,this.model.isValid)&&this.event.fire(n)}},t}();e.TaskFormRenderActions=a}),define("taskForms/render/TaskFormRenderHeaderError",["require","exports","i18n","taskForms/common/TaskFormUtils"],function(t,e,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormRenderHeaderError=void 0;var n=function(){function t(){}return t.prototype.render=function(t,e){var n=e.element,i=r.TaskFormUtils.requiredError(n);$("<div>").addClass("frmb-render-required-error").attr("data-bind","visible: "+i).appendTo(t).append($("<span>").addClass("k-icon k-i-close-circle")).append($("<span>").html("&nbsp;"+a.I18N.t("taskForm:forms.render.requiredError")))},t}();e.TaskFormRenderHeaderError=n}),define("taskForms/render/TaskFormRenderHeader",["require","exports","i18n","taskForms/data/TaskFormElementType","taskForms/common/TaskFormUtils","./TaskFormRenderHeaderError"],function(t,e,l,s,u,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormRenderHeader=void 0;var i=function(){function t(){this.error=new n.TaskFormRenderHeaderError}return t.prototype.render=function(t,e){var n=e.element;if(s.TaskFormElementType.useLabel(n.type)){var i=n.label||"",a=u.TaskFormUtils.inactiveBindingId(n),r=$("<div>").addClass("frmb-render-header").appendTo(t),o=$("<div>").appendTo(r),d=$("<span>").text(i).addClass("frmb-render-question").attr("data-bind","css:{k-state-disabled:"+a+"}").appendTo(o);n.required&&d.addClass("frmb-required").attr("title",l.I18N.t("compliance:forms.render.required")),this.error.render(r,e)}},t}();e.TaskFormRenderHeader=i}),define("taskForms/render/TaskFormRenderLayout",["require","exports","core/form/FormBuilderSize"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormRenderLayout=void 0;var i=function(){function t(t){this.$table=$("<table>").addClass("frmb-render-layout").appendTo(t),this.$tr=void 0}return t.prototype.destroy=function(){kendo.destroy(this.$table),this.$table.remove()},t.prototype.next=function(t){switch(t){case n.FormBuilderSize.HALF_WIDTH:return this.nextHalf();case n.FormBuilderSize.FULL:default:return this.nextFull()}},t.prototype.bind=function(t){kendo.bind(this.$table,t)},t.prototype.nextHalf=function(){if(this.$tr){var t=$("<td>").appendTo(this.$tr);return this.$tr=void 0,t}return this.$tr=$("<tr>").appendTo(this.$table),$("<td>").appendTo(this.$tr)},t.prototype.nextFull=function(){return this.$tr&&this.nextHalf(),$('<td colspan="2">').appendTo($("<tr>").appendTo(this.$table))},t}();e.TaskFormRenderLayout=i}),define("taskForms/controls/TaskFormControl",["require","exports","../data/TaskFormElementType","../common/TaskFormUtils"],function(t,e,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormControl=void 0;var n=function(){function t(t){this.type=t}return Object.defineProperty(t.prototype,"name",{get:function(){return o.TaskFormElementType.getName(this.type)||"Unknown"},enumerable:!1,configurable:!0}),t.prototype.preview=function(t,e){var n=o.TaskFormElementType.useLabel(this.type);if(!n&&!e.label)return!0;var i=e,a={};a[d.TaskFormUtils.inactiveBindingId(i)]=!1,d.TaskFormUtils.fillModel(a,i,null);var r=$("<div>").appendTo(t);return this.render({$element:r,element:i,preview:!0}),kendo.bind(r,kendo.observable(a)),n},t}();e.TaskFormControl=n}),define("taskForms/query/TaskFormQueryBuilder",["require","exports","core/query/QueryBuilder","i18n"],function(t,e,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormQueryBuilder=void 0;var u="activeQuery",n=function(){function t(t,e,n){this.$element=t,this.model=e,this.context=n,this.init()}return t.prototype.refresh=function(){this.init()},t.prototype.destroy=function(){this.builder&&this.builder.destroy(),kendo.destroy(this.$element),this.$element.empty()},t.prototype.init=function(){for(var t=this,e=this.model.get("id"),n=[],i=0,a=this.context.list();i<a.length;i++){var r=a[i];if(r.id!==e){var o=this.context.getControl(r);o&&n.push.apply(n,o.filterRule(r))}}if(this.builder&&this.builder.destroy(),n.length<=0)return this.destroy(),void this.$element.append($("<h4>").text(s.I18N.t("taskForm:builder.activeQueryAddMoreElements")));this.builder=l.QueryBuilder.init(this.$element,n);var d=this.model.get(u);this.builder.setRules(d?d.toJSON():void 0),this.builder.event.register(function(){t.builder&&t.model.set(u,t.builder.getRules())})},t}();e.TaskFormQueryBuilder=n}),define("taskForms/controls/TaskFormFilterControl",["require","exports","tslib","i18n","./TaskFormControl","../query/TaskFormQueryBuilder"],function(t,e,n,o,i,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormFilterControl=void 0;var a=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.prototype.destroyEdit=function(){this.builder&&this.builder.destroy(),this.builder=void 0},t.prototype.edit=function(t,n,i){var a=this,e=this.editHtml(),r={model:n,init:function(t){var e=t.sender.element;o.I18N.localize(e),a.initEdit(e,n),a.builder=new d.TaskFormQueryBuilder(e.find(".cp-frm-query"),n,i),e.find(".cp-frm-query-refresh").click(function(){a.builder&&a.builder.refresh()})}};new kendo.View(e,r).render(t)},t.prototype.initEdit=function(t,e){},t}(i.TaskFormControl);e.TaskFormFilterControl=a}),define("text!templates/taskForms/control/header.edit.html",[],function(){return'\n<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.label"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: label"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.type"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domostaskformheadertype" data-bind="value: subType"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.size"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domosformbuildersize" data-bind="value: size"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.activeQuery"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<a class="k-button cp-frm-query-refresh"><span class="k-icon k-i-refresh"></a>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan="2">\n\t\t\t\t<div class="cp-frm-query"></div>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>\n'}),define("taskForms/data/TaskFormHeaderType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormHeaderType=void 0;var a,r;(a=e.TaskFormHeaderType||(e.TaskFormHeaderType={}))[a.H1=1]="H1",a[a.H2=2]="H2",a[a.H3=3]="H3",a[a.H4=4]="H4",(r=e.TaskFormHeaderType||(e.TaskFormHeaderType={})).getName=n.EnumUtils.createNameFn("taskForm:TaskFormHeaderType",r),r.widget=i.EnumWidgetUtils.createDropList("DomosTaskFormHeaderType",r,!1,!1),r.toJQuery=function(t){var e=(r[t]||"h1").toLowerCase();return $("<"+e+">")}}),define("taskForms/controls/TaskFormHeaderControl",["require","exports","tslib","core/form/FormBuilderSize","./TaskFormFilterControl","text!templates/taskForms/control/header.edit.html","../data/TaskFormElementType","../data/TaskFormHeaderType","../common/TaskFormUtils","core/form/FormBuilderSize"],function(t,e,n,i,a,r,o,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormHeaderControl=void 0;var s=o.TaskFormElementType.HEADER,u=function(t){function e(){return t.call(this,s)||this}return n.__extends(e,t),e.prototype.filterRule=function(t){return[]},e.prototype.defaultConfiguration=function(){return{id:o.TaskFormElementType.getStringId(s),javascriptId:null,label:"",required:!1,size:i.FormBuilderSize.FULL,activeQuery:null,subType:d.TaskFormHeaderType.H1}},e.prototype.render=function(t){var e=t.element,n=l.TaskFormUtils.inactiveBindingId(e);d.TaskFormHeaderType.toJQuery(e.subType).text(e.label||"").attr("data-bind","css:{k-state-disabled:"+n+"}").appendTo(t.$element)},e.prototype.editHtml=function(){return kendo.template(r)({})},e}(a.TaskFormFilterControl);e.TaskFormHeaderControl=u}),define("text!templates/taskForms/control/blank.edit.html",[],function(){return'\n<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td colspan="2">\n\t\t\t\t<p data-i18n="taskForm:forms.builder.blankDescription"></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.size"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domosformbuildersize" data-bind="value: size"/>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>'}),define("taskForms/controls/TaskFormBlankControl",["require","exports","tslib","core/form/FormBuilderSize","i18n","text!templates/taskForms/control/blank.edit.html","taskForms/data/TaskFormElementType","./TaskFormControl","core/form/FormBuilderSize"],function(t,e,n,i,r,o,a,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormBlankControl=void 0;var l=a.TaskFormElementType.BLANK,s=function(t){function e(){return t.call(this,l)||this}return n.__extends(e,t),e.prototype.filterRule=function(t){return[]},e.prototype.defaultConfiguration=function(){return{id:a.TaskFormElementType.getStringId(l),javascriptId:null,label:"",required:!1,size:i.FormBuilderSize.HALF_WIDTH,activeQuery:null}},e.prototype.edit=function(t,e,n){var i=kendo.template(o)({}),a={model:e,init:function(t){r.I18N.localize(t.sender.element)}};new kendo.View(i,a).render(t)},e.prototype.render=function(t){},e}(d.TaskFormControl);e.TaskFormBlankControl=s}),define("text!templates/taskForms/control/number.edit.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.required"></label>\n\t\t\t</td>\n\t\t\t# var uid = kendo.guid(); #\n\t\t\t<td>\n\t\t\t\t<input id="#:uid#" type="checkbox" class="k-checkbox" data-bind="checked: required"/>\n\t\t\t\t<label for="#:uid#" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.id"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input name="ID" type="text" class="k-textbox" data-bind="value: id" readonly/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.javascriptId"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input name="javascriptId" type="text" class="k-textbox" data-bind="value: javascriptId"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.label"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: label"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.size"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domosformbuildersize" data-bind="value: size"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.placeholder"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: placeholder"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.defaultValue"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="numerictextbox" data-bind="value: defaultValue"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.preFill"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domoslegaldoublefield" data-value-primitive="true" data-bind="value: preFill"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.minimum"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="numerictextbox" data-bind="value: min"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.maximum"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="numerictextbox" data-bind="value: max"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.step"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="numerictextbox" data-bind="value: step"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.decimals"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="numerictextbox" data-min="0" data-decimals="0" data-format="n0" data-bind="value: decimals"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.activeQuery"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<a class="k-button cp-frm-query-refresh"><span class="k-icon k-i-refresh"></a>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan="2">\n\t\t\t\t<div class="cp-frm-query"></div>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>\n'}),define("taskForms/controls/TaskFormNumberControl",["require","exports","tslib","lodash","core/form/FormBuilderSize","core/query/QueryBuilderFilterFactory","text!templates/taskForms/control/number.edit.html","taskForms/data/TaskFormElementType","./TaskFormFilterControl","taskForms/common/TaskFormUtils","object/ui/LegalFieldUI"],function(t,e,n,l,i,a,r,o,d,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormNumberControl=void 0;var u=o.TaskFormElementType.NUMBER,c=function(t){function e(){return t.call(this,u)||this}return n.__extends(e,t),e.prototype.filterRule=function(t){return[a.QueryBuilderFilterFactory.createNumberFilter(s.TaskFormUtils.bindingId(t),t.label)]},e.prototype.defaultConfiguration=function(){return{id:o.TaskFormElementType.getStringId(u),javascriptId:null,label:"",required:!1,size:i.FormBuilderSize.FULL,activeQuery:null,placeholder:"",defaultValue:null,preFill:null,min:null,max:null,decimals:null,step:null}},e.prototype.render=function(t){var e=s.TaskFormUtils.inactiveBindingId(t.element),n=s.TaskFormUtils.bindingId(t.element),i=t.element,a={min:i.min||void 0,max:i.max||void 0,step:i.step||void 0,placeholder:i.placeholder||void 0},r=i.decimals;l.isNil(r)||(a.decimals=r,a.format="n"+r);var o=$("<input>").appendTo(t.$element).kendoNumericTextBox(a);if(t.readOnly){o.attr("data-bind","value:"+n);var d=o.data("kendoNumericTextBox");t.disabled?d.enable(!1):d.readonly(!0)}else o.attr("data-bind","value:"+n+", disabled:"+e)},e.prototype.editHtml=function(){return kendo.template(r)({})},e}(d.TaskFormFilterControl);e.TaskFormNumberControl=c}),define("text!templates/taskForms/control/text.edit.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.required"></label>\n\t\t\t</td>\n\t\t\t# var uid = kendo.guid(); #\n\t\t\t<td>\n\t\t\t\t<input id="#:uid#" type="checkbox" class="k-checkbox" data-bind="checked: required"/>\n\t\t\t\t<label for="#:uid#" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.id"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input name="ID" type="text" class="k-textbox" data-bind="value: id" readonly/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.javascriptId"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input name="javascriptId" type="text" class="k-textbox" data-bind="value: javascriptId"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.label"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: label"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.size"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domosformbuildersize" data-bind="value: size"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.placeholder"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: placeholder"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t#if (area) {#\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.defaultValue"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: defaultValue"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t#}else{#\n\t\t<tr>\n\t\t\t<td style="vertical-align:top">\n\t\t\t\t<label data-i18n="taskForm:forms.builder.defaultValue"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<textarea type="text" class="k-textbox" data-bind="value: defaultValue"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t#}#\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.preFill"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domoslegalstringfield" data-value-primitive="true" data-bind="value: preFill"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.maxLength"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="numerictextbox" data-min="1" data-max="255" data-format="n0" data-decimals="0" data-bind="value: maxLength"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t#if(area){#\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.rows"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="numerictextbox" data-min="1" data-max="20" data-format="n0" data-decimals="0" data-bind="value: rows"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t#}#\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.activeQuery"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<a class="k-button cp-frm-query-refresh"><span class="k-icon k-i-refresh"></a>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan="2">\n\t\t\t\t<div class="cp-frm-query"></div>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>'}),define("taskForms/controls/TaskFormTextControl",["require","exports","tslib","core/form/FormBuilderSize","core/query/QueryBuilderFilterFactory","text!templates/taskForms/control/text.edit.html","taskForms/data/TaskFormElementType","./TaskFormFilterControl","taskForms/common/TaskFormUtils","core/form/FormBuilderSize","object/ui/LegalFieldUI"],function(t,e,n,i,a,r,o,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormTextControl=void 0;var s=o.TaskFormElementType.TEXT,u=function(t){function e(){return t.call(this,s)||this}return n.__extends(e,t),e.prototype.filterRule=function(t){return[a.QueryBuilderFilterFactory.createTextFilter(l.TaskFormUtils.bindingId(t),t.label)]},e.prototype.defaultConfiguration=function(){return{id:o.TaskFormElementType.getStringId(s),javascriptId:null,label:"",required:!1,size:i.FormBuilderSize.FULL,activeQuery:null,placeholder:"",maxLength:null,defaultValue:"",preFill:null}},e.prototype.render=function(t){var e=l.TaskFormUtils.bindingId(t.element),n=t.element,i=$('<input type="text" class="k-textbox">').appendTo(t.$element);if(n.maxLength&&i.attr("maxlength",n.maxLength),n.placeholder&&i.attr("placeholder",n.placeholder),t.readOnly)i.attr("data-bind","value:"+e),t.disabled?i.prop("disabled",!0).addClass("k-state-disabled"):i.prop("readonly",!0);else{var a=l.TaskFormUtils.inactiveBindingId(t.element);i.attr("data-bind","value:"+e+",disabled:"+a+",css:{k-state-disabled:"+a+"}")}},e.prototype.editHtml=function(){return kendo.template(r)({area:!1})},e}(d.TaskFormFilterControl);e.TaskFormTextControl=u}),define("text!templates/taskForms/control/options.edit.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.required"></label>\n\t\t\t</td>\n\t\t\t# var uid = kendo.guid(); #\n\t\t\t<td>\n\t\t\t\t<input id="#:uid#" type="checkbox" class="k-checkbox" data-bind="checked: required"/>\n\t\t\t\t<label for="#:uid#" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.id"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input name="ID" type="text" class="k-textbox" data-bind="value: id" readonly/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.javascriptId"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input name="javascriptId" type="text" class="k-textbox" data-bind="value: javascriptId"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.label"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: label"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.size"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domosformbuildersize" data-bind="value: size"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t# if (placeholder) {#\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.placeholder"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: placeholder"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t#}#\n\t\t<tr>\n\t\t\t<td style="vertical-align:top">\n\t\t\t\t<label data-i18n="taskForm:forms.builder.options"></label>\n\t\t\t</td>\n\t\t\t<td class="frmb-option-list-query">\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.activeQuery"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<a class="k-button cp-frm-query-refresh"><span class="k-icon k-i-refresh"></a>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan="2">\n\t\t\t\t<div class="cp-frm-query"></div>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>'}),define("text!templates/taskForms/control/option.item.html",[],function(){return'\n<table class="cp-frm-item-table">\n\t<colgroup>\n\t\t<col width="5%"/>\n\t\t<col width="15%"/>\n\t\t<col width="54%"/>\n\t\t<col width="20%"/>\n\t\t<col width="3%"/>\n\t\t<col width="3%"/>\n\t</colgroup>\n\t<tr>\n\t\t<td>\n\t\t\t#if (useRadio) {#\n\t\t\t<input id="#:gpId#" type="radio" name="#:gpId#" data-bind="checked: selected" value="true" data-type="boolean" class="k-radio"/>\n\t\t\t<label for="#:gpId#" class="k-radio-label">&thinsp;</label>\n\t\t\t#} else {#\n\t\t\t<input id="#:gpId#" type="checkbox" data-bind="checked: selected" class="k-checkbox"/>\n\t\t\t<label for=#:gpId# class="k-checkbox-label">&thinsp;</label>\n\t\t\t#}#\n\t\t</td>\n\t\t<td><input type="text" class="k-textbox" data-i18n="[placeholder]taskForm:forms.builder.id" data-bind="value: id" readonly/></td>\n\t\t<td><input type="text" class="k-textbox" data-i18n="[placeholder]taskForm:forms.builder.label" data-bind="value: label"/></td>\n\t\t<td><input data-role="domoscomplianceformrating" data-bind="value: defaultRating"/></td>\n\t\t<td><a class="cp-frm-prefill-button" data-i18n="[title]taskForm:forms.builder.preFill"><span class="k-icon k-i-filter"></span><a></td>\n\t\t<td><a class="cp-frm-item-destroy" data-i18n="[title]taskForm:forms.builder.removeOption"><span class="k-icon k-i-close"></span></a></td>\n\t</tr>\n</table>\n<div class="cp-frm-option-filter">\n\t<p data-i18n="taskForm:forms.builder.optionPreFillDescription"></p>\n</div>'}),define("taskForms/controls/TaskFormItemList",["require","exports","tslib","lodash","core/form/internal/FormBuilderUtils"],function(t,e,u,c,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormItemList=void 0;var m="cp-frm-item-list",f="cp-frm-item-actions",b="frmb-stage-deleting-hover";function v(t,e){var n=$("<button>").addClass("k-button").appendTo(t);if(e.click){var i=e.click;n.click(function(t){t.preventDefault(),i()})}e.className&&n.addClass(e.className);var a=e.label;e.kendoIcon&&(a='<span class="k-icon '+e.kendoIcon+'"></span>&nbsp;'+a),n.html(a)}var n=function(){function t(){}return t.init=function(n){var t=n.$element,o=n.data;t.html('\n<ul class="cp-frm-item-list"></ul>\n<div class="cp-frm-item-actions"></div>\n');var r=t.find("."+m),e=t.find("."+f);function i(t){var e=$("<li>").addClass("frmb-edit-list-option").attr("data-uid",t.uid).appendTo(r);n.itemView(e,t)}for(var a=0;a<o.length;++a)i(o[a]);if(n.sortable){var d={};r.sortable(u.__assign(u.__assign({},p.FormBuilderUtils.sortableOptions()),{cancel:"input,textarea,button,select,option,k-radio,k-radio-label,k-widget",start:function(t,e){e.item.show().addClass("frmb-hint"),d.oldIndex=e.item.index()},stop:function(t,e){e.item.removeClass("frmb-hint");var n=d.oldIndex;c.isNil(n)&&r.sortable("cancel");var i=e.item.index();if(!c.isNil(n)&&!c.isNil(i)&&n!==i){var a=o[n];o.splice(n,1),o.splice(i,0,a)}}}))}if(r.on("click",".cp-frm-item-destroy",function(t){t.preventDefault();var e=$(t.target).closest("li"),n=e.attr("data-uid");if(n)for(var i=o.length,a=0;a<i;++a){var r=o[a];if(r.uid===n)return o.remove(r),void e.remove()}}),r.on("mouseover",".cp-frm-item-destroy",function(t){$(t.target).closest("li").addClass(b)}),r.on("mouseout",".cp-frm-item-destroy",function(t){$(t.target).closest("li").removeClass(b)}),n.actions)for(var l=0,s=n.actions.reverse();l<s.length;l++){v(e,s[l])}e.on("click",".cp-frm-item-add",function(t){t.preventDefault();var e=n.newItem();o.push(e),i(o[o.length-1])})},t}();e.TaskFormItemList=n}),define("taskForms/controls/TaskFormMultipleControl",["require","exports","tslib","lodash","core/form/FormBuilderSize","core/query/QueryBuilderFilterFactory","core/util/ObservableUtils","text!templates/taskForms/control/options.edit.html","text!templates/taskForms/control/option.item.html","i18n","object/query/LegalQueryBuilder","./TaskFormFilterControl","taskForms/data/TaskFormElementType","./TaskFormItemList"],function(t,e,i,a,r,o,l,d,s,u,c,n,p,m){"use strict";function f(t){return"option"+t}function b(t,e){for(var n=f(e),i=t.length,a=0;a<i;++a){var r=t[a];if(r&&r.get("id")===n)return!0}return!1}function v(t){var e,n=a.isNumber(t)?t:function(t){for(var e=1;;++e)if(!b(t,e))return e}(t);return{id:f(n),label:(e=n,"Option #"+e),selected:!1,preFillQuery:null}}Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormMultipleControl=void 0;var y=function(n){function t(t){var e=n.call(this,t)||this;return e.useRadio=p.TaskFormElementType.useRadio(t),e.hasPlaceholder=p.TaskFormElementType.hasPlaceholder(t),e}return i.__extends(t,n),t.prototype.filterRule=function(t){var e=t;return[o.QueryBuilderFilterFactory.createMultipleStringFilter(e.id,e.label,e.options)]},t.prototype.defaultConfiguration=function(){var t=[v(1)];return this.useRadio&&t.push(v(2)),{id:p.TaskFormElementType.getStringId(this.type),javascriptId:null,label:"",required:!1,size:r.FormBuilderSize.FULL,activeQuery:null,placeholder:"",options:t}},t.prototype.editHtml=function(){return kendo.template(d)({placeholder:this.hasPlaceholder})},t.prototype.initEdit=function(t,e){var n=this,i=t.find(".frmb-option-list-query"),a=e.get("options");if(m.TaskFormItemList.init({$element:i,data:a,sortable:!0,newItem:function(){return v(a)},itemView:function(t,e){return n.optionView(t,e)},actions:[{label:u.I18N.t("taskForm:forms.builder.deselect"),className:"frmb-edit-option-unselect",kendoIcon:"k-i-tri-state-null",click:function(){return a.forEach(function(t){return t.set("selected",!1)})}},{label:u.I18N.t("taskForm:forms.builder.addOption"),className:"cp-frm-item-add",kendoIcon:"k-i-add"}]}),this.useRadio){var r=!1;a.bind("change",function(t){if(!r&&"itemchange"===t.action&&"selected"===t.field&&t.items){var e=t.items[0];if(e&&e.get("selected")){var i=e.uid;setTimeout(function(){r=!0;try{for(var t=a.length,e=0;e<t;++e){var n=a[e];n.uid!==i&&n.set("selected",!1)}}finally{r=!1}},0)}}})}},t.prototype.optionView=function(t,d){var e=kendo.template(s)({gpId:d.uid,useRadio:this.useRadio}),n={model:d,init:function(t){var e=t.sender.element;u.I18N.localize(e);var n,i=e.find(".cp-frm-prefill-button"),a=e.find(".cp-frm-option-filter"),r="preFillQuery",o=function(){l.ObservableUtils.getUnpacked(d,r)?i.attr("data-badge",1):i.removeAttr("data-badge")};o(),d.bind("change",function(t){t.field===r&&o()});i.click(function(){!function(){if(!n){var t=$("<div>").appendTo(a);(n=c.LegalQueryBuilder.init(t)).setRules(l.ObservableUtils.getUnpacked(d,r)),n.event.register(function(){n&&d.set(r,n.getRules())})}}(),a.slideToggle()})}};new kendo.View(e,n).render(t)},t}(n.TaskFormFilterControl);e.TaskFormMultipleControl=y}),define("taskForms/controls/TaskFormSelectControl",["require","exports","tslib","taskForms/data/TaskFormElementType","taskForms/common/TaskFormUtils","./TaskFormMultipleControl"],function(t,e,n,i,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormSelectControl=void 0;var r=i.TaskFormElementType.SELECT,d=function(t){function e(){return t.call(this,r)||this}return n.__extends(e,t),e.prototype.render=function(t){var e=t.element,n=o.TaskFormUtils.bindingId(e),i=$("<input>").appendTo(t.$element);if(i.addClass("elementPrimitiveTypeSelect"),i.kendoDropDownList({dataSource:{data:e.options},optionLabel:e.placeholder||"--",dataTextField:"label",dataValueField:"id",valuePrimitive:!0}),t.readOnly){i.attr("data-bind","value:"+n);var a=i.data("kendoDropDownList");t.disabled?a.enable(!1):a.readonly(!0)}else{var r=o.TaskFormUtils.inactiveBindingId(e);i.attr("data-bind","value:"+n+",disabled:"+r)}},e}(a.TaskFormMultipleControl);e.TaskFormSelectControl=d}),define("text!templates/taskForms/control/date.edit.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.required"></label>\n\t\t\t</td>\n\t\t\t# var uid = kendo.guid(); #\n\t\t\t<td>\n\t\t\t\t<input id="#:uid#" type="checkbox" class="k-checkbox" data-bind="checked: required"/>\n\t\t\t\t<label for="#:uid#" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.id"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input name="ID" type="text" class="k-textbox" data-bind="value: id" readonly/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.javascriptId"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input name="javascriptId" type="text" class="k-textbox" data-bind="value: javascriptId"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.label"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: label"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.size"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domosformbuildersize" data-bind="value: size"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.activeQuery"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<a class="k-button cp-frm-query-refresh"><span class="k-icon k-i-refresh"></a>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan="2">\n\t\t\t\t<div class="cp-frm-query"></div>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>\n'}),define("taskForms/controls/TaskFormDateControl",["require","exports","tslib","core/form/FormBuilderSize","core/query/QueryBuilderFilterFactory","text!templates/taskForms/control/date.edit.html","taskForms/data/TaskFormElementType","./TaskFormFilterControl","taskForms/common/TaskFormUtils","object/ui/LegalFieldUI"],function(t,e,n,i,a,r,o,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormDateControl=void 0;var s=o.TaskFormElementType.DATE,u=function(t){function e(){return t.call(this,s)||this}return n.__extends(e,t),e.prototype.filterRule=function(t){return[a.QueryBuilderFilterFactory.createNumberFilter(l.TaskFormUtils.bindingId(t),t.label)]},e.prototype.defaultConfiguration=function(){return{id:o.TaskFormElementType.getStringId(s),javascriptId:null,label:"",required:!1,size:i.FormBuilderSize.FULL,activeQuery:null}},e.prototype.render=function(t){var e=l.TaskFormUtils.inactiveBindingId(t.element),n=l.TaskFormUtils.bindingId(t.element),i=$("<input>").appendTo(t.$element).kendoDatePicker({start:"month",depth:"year",format:"{0:d}"});if(t.readOnly){i.attr("data-bind","value:"+n);var a=i.data("kendoDatePicker");t.disabled?a.enable(!1):a.readonly(!0)}else i.attr("data-bind","value:"+n+", disabled:"+e)},e.prototype.editHtml=function(){return kendo.template(r)({})},e}(d.TaskFormFilterControl);e.TaskFormDateControl=u}),define("text!templates/taskForms/control/domos.select.edit.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.required"></label>\n\t\t\t</td>\n\t\t\t# var uid = kendo.guid(); #\n\t\t\t<td>\n\t\t\t\t<input id="#:uid#" type="checkbox" class="k-checkbox" data-bind="checked: required"/>\n\t\t\t\t<label for="#:uid#" class="k-checkbox-label">&nbsp;</label>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.id"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input name="ID" type="text" class="k-textbox" data-bind="value: id" readonly/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.javascriptId"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input name="javascriptId" type="text" class="k-textbox" data-bind="value: javascriptId"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.label"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: label"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.domosElementType"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<div id="domosType" data-role="domostaskformdomoselementtype" data-bind="value: domosType"></div>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.size"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input data-role="domosformbuildersize" data-bind="value: size"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label data-i18n="taskForm:forms.builder.activeQuery"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<a class="k-button cp-frm-query-refresh"><span class="k-icon k-i-refresh"></a>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan="2">\n\t\t\t\t<div class="cp-frm-query"></div>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>'}),define("taskForms/controls/TaskFormDomosSelectControl",["require","exports","tslib","taskForms/data/TaskFormElementType","taskForms/common/TaskFormUtils","object/ui/EntityInvestorUI","taskForms/data/TaskFormDomosElementType","object/ui/VehicleUI","./TaskFormFilterControl","text!templates/taskForms/control/domos.select.edit.html","core/query/QueryBuilderFilterFactory","core/form/FormBuilderSize","basic/ui/CurrencyUI","basic/ui/CountryUI","core/api/EntityRole"],function(t,e,n,i,o,d,l,s,a,r,u,c,p,m,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormDomosSelectControl=void 0;var b=i.TaskFormElementType.DOMOS_SELECT,v=function(t){function e(){return t.call(this,b)||this}return n.__extends(e,t),e.prototype.filterRule=function(t){return[u.QueryBuilderFilterFactory.createTextFilter(o.TaskFormUtils.bindingId(t),t.label)]},e.prototype.defaultConfiguration=function(){return{id:i.TaskFormElementType.getStringId(b),javascriptId:null,domosType:l.TaskFormDomosElementType.CURRENCY,label:"",required:!1,size:c.FormBuilderSize.FULL,activeQuery:null}},e.prototype.render=function(t){var e=t.element,n=o.TaskFormUtils.bindingId(e),i=$("<input>").appendTo(t.$element);switch(e.domosType){case l.TaskFormDomosElementType.COMMITMENT_SELECT:i.addClass("domosElementTypeHistorySelect"),t.inputData&&t.inputData.vehicleId&&s.VehicleUI.withInvestor(t.inputData.vehicleId).commitments.widget(i);break;case l.TaskFormDomosElementType.ENTITY_INVESTOR_SELECT:i.addClass("domosElementTypeObjectSelect"),d.EntityInvestorUI.widget(i);break;case l.TaskFormDomosElementType.CURRENCY:p.CurrencyUI.widget(i);break;case l.TaskFormDomosElementType.FUND_SELECT:i.addClass("domosElementTypeObjectSelect"),s.VehicleUI.widget(i);break;case l.TaskFormDomosElementType.FUND_SHARE_SELECT:i.addClass("domosElementTypeObjectSelect"),t.inputData&&t.inputData.vehicleId&&s.VehicleUI.with(t.inputData.vehicleId).fundShares.widget(i);break;case l.TaskFormDomosElementType.FUND_INVESTOR_SELECT:i.addClass("domosElementTypeObjectSelect"),t.inputData&&t.inputData.vehicleId&&d.EntityInvestorUI.byFund(t.inputData.vehicleId).widget(i);break;case l.TaskFormDomosElementType.COUNTRY_SELECT:i.addClass("domosElementTypeFixedSelect"),m.CountryUI.widget(i);break;case l.TaskFormDomosElementType.CONTACT_ROLE_SELECT:i.addClass("domosElementTypeFixedSelect"),f.EntityRole.widget(i)}if(t.readOnly){i.attr("data-bind","value:"+n);var a=i.data("kendoDropDownList");a&&(t.disabled?a.enable(!1):a.readonly(!0))}else{var r=o.TaskFormUtils.inactiveBindingId(e);i.attr("data-bind","value:"+n+",disabled:"+r)}},e.prototype.editHtml=function(){return kendo.template(r)({})},e}(a.TaskFormFilterControl);e.TaskFormDomosSelectControl=v}),define("taskForms/controls/TaskFormControls",["require","exports","lodash","taskForms/controls/TaskFormHeaderControl","./TaskFormBlankControl","./TaskFormNumberControl","./TaskFormTextControl","./TaskFormSelectControl","./TaskFormDateControl","./TaskFormDomosSelectControl"],function(t,e,n,i,a,r,o,d,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormControls=void 0;var u=[new i.TaskFormHeaderControl,new o.TaskFormTextControl,new d.TaskFormSelectControl,new s.TaskFormDomosSelectControl,new r.TaskFormNumberControl,new l.TaskFormDateControl,new a.TaskFormBlankControl],c=n.keyBy(u,"type"),p=function(){function t(){}return t.get=function(t){if(!n.isNil(t))return c[t]},t.list=function(){return u},t}();e.TaskFormControls=p}),define("taskForms/render/TaskFormRenderController",["require","exports","tslib","lodash","core/event/DEvent","i18n","core/util/PromiseUtils","core/util/CancelToken","./TaskFormRenderExplanation","taskForms/data/TaskFormElementType","./TaskFormRenderModel","./TaskFormRenderActions","./TaskFormRenderHeader","./TaskFormRenderLayout","taskForms/controls/TaskFormControls","taskForms/common/TaskFormUtils"],function(t,e,o,d,s,b,l,u,c,p,m,v,y,h,f,g){"use strict";function T(t,s,u){var c={};return d.chain(t.elements).map(function(t){var e=u.forElement(t),n=t.id;n?(c[n]&&e.logError(b.I18N.t("taskForm:forms.render.duplicateId")),c[n]=!0):e.logError(b.I18N.t("taskForm:forms.render.missingId"));var i=t.type;i===p.TaskFormElementType.FORM&&e.logError(b.I18N.t("taskForm:forms.render.formElementsFlattened"));var a,r,o,d,l=f.TaskFormControls.get(i);if(l)return{element:t,control:l,explanation:e,initialValue:(a=t,r=s,o=g.TaskFormUtils.getJavascriptId(a),d=r.elementValues.find(function(t){return o===t.name}),d||null)};e.logError(b.I18N.t("taskForm:forms.render.unknownControl",{id:p.TaskFormElementType.getStringId(t.type)}))}).compact().value()}Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormRenderController=void 0;var n=function(){function t(t,e,n,i){var a,r,o,d;this.cancelSource=u.CancelToken.source(),this.$forDestroying=[],this.event=new s.DEvent(!1),this.options=e,this.$container=$("<div>").addClass("frmb-render-cont").css({width:100*(o=n,d=o.form.width,d=Math.min(d,1),d=Math.max(d,.1))+"%","font-size":100*(a=n,r=a.form.fontSize,r=Math.min(r,5),r=Math.max(r,.1))+"%","background-color":n.form.backgroundColor}).appendTo(t),i=i||new c.TaskFormRenderExplanation;var l=T(n.form,n.inputData,i);this.model=new m.TaskFormRenderModel(l),this.render(l,i,n.inputData.globalInputData)}return t.prototype.getData=function(){return this.model.toElementValues()},t.prototype.destroy=function(){this.cancelSource.cancel(),this.event.clear(),this.$container.hide(),l.PromiseUtils.consume(this.destroyAsync())},t.prototype.destroyAsync=function(){return o.__awaiter(this,void 0,void 0,function(){var e,n,i,a,r;return o.__generator(this,function(t){switch(t.label){case 0:e=d.compact(this.$forDestroying),n=function(e){return o.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,l.PromiseUtils.asPromise(function(){return kendo.destroy(e)})];case 1:return t.sent(),[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}})},i=0,a=e,t.label=1;case 1:return i<a.length?(r=a[i],[5,n(r)]):[3,4];case 2:t.sent(),t.label=3;case 3:return i++,[3,1];case 4:return this.$container.remove(),[2]}})})},t.prototype.render=function(t,e,n){this.renderForm(t,e,n)},t.prototype.renderForm=function(t,e,n){var i=this;if(t.length<=0)e.logError(b.I18N.t("taskForm:forms.render.formEmptyError"));else{var a=!this.options.formEditable,r=new v.TaskFormRenderActions(this.options,this.model),o=new y.TaskFormRenderHeader,d=new h.TaskFormRenderLayout(this.$container);this.$forDestroying.push(r.render(this.$container));for(var l=0,s=t;l<s.length;l++){var u=s[l],c=u.element,p=d.next(c.size);this.$forDestroying.push(p),o.render(p,u);var m=a&&this.model.isInactive(c),f={$element:$("<div>").appendTo(p),element:c,readOnly:a,disabled:m,inputData:n};u.control.render(f)}d.bind(this.model.kendo()),r.event.register(function(t){return i.event.fire(t)})}},t}();e.TaskFormRenderController=n}),define("taskForms/TaskFormRender",["require","exports","tslib","core/event/DEvent","./TaskFormRenderOptions","./render/TaskFormRenderController"],function(t,e,r,n,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormRender=void 0;var i=function(){function t(t){this.event=new n.DEvent(!1),this.$element=t}return t.prototype.render=function(t,e,n){var i=this;this.controller&&(this.controller.destroy(),this.controller=void 0);var a=r.__assign(r.__assign({},o.kTaskFormRenderAllOptions),t);this.controller=new d.TaskFormRenderController(this.$element,a,e,n),this.controller.event.register(function(t){return i.event.fire(t)})},t.prototype.destroy=function(){this.event.clear(),this.controller&&this.controller.destroy(),this.controller=void 0},t.prototype.getData=function(){return this.controller?this.controller.getData():[]},t}();e.TaskFormRender=i}),define("taskForms/TaskFormOverlay",["require","exports","tslib","core/util/PromiseUtils","./TaskFormRender","./TaskFormRenderOptions"],function(t,e,o,d,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskFormOverlay=void 0;var u="frmb-overlay-body",c="frmb-overlay-hidden",n=function(){function t(){}return t.display=function(t){var e=this;if(t){var n=$(document.body);n.addClass(u);var i=$("<div>").addClass("frmb-overlay").addClass(c).appendTo(n),a=$("<div>").addClass("frmb-overlay-content").appendTo(i);t.form.backgroundColor="white";var r=new l.TaskFormRender(a);r.render(s.kTaskFormRenderReadonlyOptions,t);r.event.register(function(){return d.PromiseUtils.consume(o.__awaiter(e,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return i.addClass(c),[4,d.PromiseUtils.wait(400)];case 1:return t.sent(),r.destroy(),i.remove(),n.removeClass(u),[2]}})}))}),i.removeClass(c)}},t}();e.TaskFormOverlay=n}),define("taskForms/workflow/CustomTaskForm",["require","exports","taskForms/repository/CustomTaskFormRepository","core/util/Logger","i18n","taskForms/TaskFormRender","taskForms/TaskFormRenderOptions","taskForms/data/TaskFormAction","core/ui/Information","taskForms/TaskFormOverlay"],function(t,e,a,r,o,d,l,s,u,i){"use strict";var c;Object.defineProperty(e,"__esModule",{value:!0}),e.CustomTaskForm=void 0;var n=function(){function t(){}return t.prototype.loadInputDataAndDisplay=function(e,t,n,i){kendo.destroy(e),e.empty(),a.CustomTaskFormRepository.getInputData(t).then(function(t){!function(t,e,n,i){c&&c.destroy();var a=new d.TaskFormRender(t);a.event.register(function(t){var e={};e.submitTask=s.TaskFormAction.isSubmit(t);try{e.elementValues=a.getData(),i(e)}catch(t){u.Information.error(t)}}),a.render(n,e),c=a}(e,{form:n,inputData:t},l.kTaskFormRenderAllOptions,i)}).catch(function(t){$("<h4>").text(o.I18N.t("taskForm:loading.noInputData",{form:n.stringId})).appendTo(e),r.Logger.error(t)})},t.prototype.displayInWorkflow=function(t,n){$("<h4>").text(n.activityName).appendTo(t),$("<button>").addClass("k-button").text(o.I18N.t("taskForm:production.openForm")).click(function(t){var e;e=n.taskFormData,i.TaskFormOverlay.display(e)}).appendTo(t),$("<p>").appendTo(t)},t}();e.CustomTaskForm=new n}),define("workflow/form/WorkflowTaskFormCustomKey",["require","exports","taskForms/repository/TaskFormRepository","core/util/Logger","taskForms/workflow/CustomTaskForm","i18n"],function(t,e,o,d,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkflowTaskFormCustomKey=void 0;var n=function(){function t(){}return t.loadAndDisplayForm=function(e,n,t,i,a){var r=$("<h4>").text(s.I18N.t("taskForm:loading.loadingForm",{form:t.formKey})).appendTo(e);o.TaskFormRepository.getByStringId(t.formKey,i).then(function(t){0<t.id?l.CustomTaskForm.loadInputDataAndDisplay(e,n,t,a):$("<h4>").text(s.I18N.t("taskForm:loading.formNotFound")).appendTo(r)}).catch(function(t){$("<h4>").text(s.I18N.t("taskForm:loading.formNotFound")).appendTo(r),d.Logger.error(t)})},t}();e.WorkflowTaskFormCustomKey=n}),define("workflow/form/WorkflowTaskFormKeys",["require","exports","./WorkflowTaskFormCustomKey"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkflowTaskFormKeys=void 0;var n=function(){function l(){}return l.display=function(t,e,n,i,a){if(!n.formKey)return!1;for(var r=0,o=l._forms;r<o.length;r++){var d=o[r];if(d.key===n.formKey)return d.display(t,e,a),!0}return i&&s.WorkflowTaskFormCustomKey.loadAndDisplayForm(t,e,n,i,a),!1},l.register=function(t){l._forms.push(t)},l._forms=[],l}();e.WorkflowTaskFormKeys=n}),function(){define("views/workflow/task/diagram.task",["jquery","lodash","i18n","kendo","views/workflow/task/task.actions","views/workflow/task/task.properties","views/workflow/task/diagram.history.grid","workflow/form/WorkflowTaskFormKeys","core/api/WorkflowDiagramActivityType"],function(l,t,e,s,u,c,p,n,i){var m,f,b,v,y;return f=n.WorkflowTaskFormKeys,m=i.WorkflowDiagramActivityType,v=function(t,e,n){return t.complete(n,e.toJSON())},y=function(t,e,n,i,a){var r,o,d,l;if(t&&i&&a&&(o=function(t){return n.complete(i,t)},!f.display(t,i,a,n.moduleCategory,o)))return l={},u.updateFormRawModel(l,a),c.updateFormRawModel(l,a),r={model:d=s.observable(l),complete:v.bind(null,n,d,i),diagram:e},u.setupForm(t,r,a),c.setupForm(t,r,a,i),s.bind(t,d)},b=function(t){var e;return e=l(t),s.destroy(e),e.empty(),null},{displayTask:function(t,e,n,i,a){var r,o,d;if(b(t),i)return r=i.type===m.USER_TASK?i.active:void 0,o=l(t),(p.createTask(o,i,a)||r)&&l("<h3>").text(i.name).prependTo(o),r&&(d=l("<div>").appendTo(o),y(d,e,n,r,i)),null},getTooltip:function(t){return u.getTooltip(t)},setupForm:function(t,e,n){return y(t,null,e,null!=n?n.id:void 0,n)}}})}.call(this),function(){define("views/workflow/diagram",["jquery","lodash","i18n","kendo","ui/svg/workflow/svg.workflow","views/workflow/task/diagram.task","views/workflow/task/diagram.history.grid","core/web/WebLocation"],function(o,i,t,d,l,s,u,e){var c,a,n,p,r,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O;return a=e.WebLocation,c={complete:function(t,e){var n;return n={task:t,properties:JSON.stringify(e)},o.post(a.resolve("workflow/task/complete.json"),n),null}},h=function(t,e){var n,i,a,r;return a=I(t),i=t._exportName||"",n=o(a),d.destroy(n),n.empty(),r=null!=e?e.id:void 0,e&&r!==t._taskDisplayId?(t._task=null!=e?e.active:void 0,t._taskDisplayId=r,s.displayTask(a,t._diagramData,c,e,i)):(t._task=null,t._taskDisplayId=null,u.createGlobal(n,t._diagramData,i)),null},p=function(t,e){return setTimeout(h.bind(null,t,e))},w=function(t,e){return s.getTooltip(e)},n=function(t){var e;return null!=(e=t._query)&&e.abort(),t._query=null},x=function(t,e){var n,i,a,r;return null!=(a=t._options)&&"function"==typeof a.loaded&&a.loaded(e),i={},t._diagramData=e,t._withTasks&&(i.click=p.bind(null,t),i.getTooltip=w.bind(null,t)),n=o(g(t)),l.create(n,e,i),r=o(I(t)),d.destroy(r),r.empty(),t._withTasks&&t._initialDisplay&&u.createGlobal(r,t._diagramData,t._exportName),null},N=function(t){},S=function(t){return!(t._query=null)},E=function(t){var e;return n(t),e={definition:t._definition,workflow:t._instance},t._query=o.getJSON(a.resolve("workflow/diagram.json"),e).done(x.bind(null,t)).fail(N.bind(null,t)).always(S.bind(null,t)),null},D=function(t){return setTimeout(E.bind(null,t),50)},_=function(t,e){var n,i;if(e&&e.data&&t._instance&&(i=(n=e.data).id,n.instance===t._instance))return"started"===e.type?D(t):"completed"===e.type&&(i===t._task&&h(t,null),D(t)),null},R=function(t,e){var n;if(n=t.data.context,e)return i.isArray(e)?i.each(e,_.bind(null,n)):_(n,e),null},r=function(t){var e;return e={context:t},o("body").on("domosws:workflow:tasks",e,R)},T=function(t){return o(t._jElement).attr("id")+"_diagram"},C=function(t){return o(t._jElement).attr("id")+"_task"},g=function(t){return"#"+T(t)},I=function(t){return"#"+C(t)},O=function(t){var e,n,i;return n=o(t._jElement),o("<div>").attr("id",T(t)).appendTo(n),(e=null!=(i=t._options)?i.additionalElementId:void 0)&&(o("<p>").appendTo(n),o("<div>").attr("id",e).appendTo(n)),o("<p>").appendTo(n),o("<div>").attr("id",C(t)).css("min-height","1000px").appendTo(n),o("<p>").appendTo(n),null},m=function(t){var e;return e=o(t._jElement),d.destroy(e),e.empty(),t._withTasks=!1,t._task=null,t._definition=null,t._instance=null,t._exportName="",t._taskDisplayId=null,t._diagramData=null,t._initialDisplay=!1,null},k=function(t){return i.isString(t)?t:null!=t?t.id:void 0},f=function(t,e,n,i){var a,r;if(m(t),r=k(n),a=k(i),r||a)return O(t),t._definition=a,t._instance=r,t._withTasks=!!e,t._exportName=e&&e.exportName?e.exportName:"",t._initialDisplay=(null!=e?e.initialDisplay:void 0)||null!=e,E(t),null},b=function(t,e){return f(t,null,null,e)},v=function(t,e){return f(t,{},e)},y=function(t,e,n){return f(t,e,n)},{create:function(t,e){var n;return(n={_jElement:t,_query:null,_task:null,_definition:null,_instance:null,_withTasks:!1,_exportName:"",_taskDisplayId:null,_diagramData:null,_options:e}).displayDefinition=b.bind(null,n),n.displayInstance=v.bind(null,n),n.displayInstanceWithTasks=y.bind(null,n),n.clean=m.bind(null,n),r(n),n}}})}.call(this),define("workflow/repository/WorkflowTaskFormRepository",["require","exports","lodash","core/web/WebHttp","core/web/WebLocation"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkflowTaskFormRepository=void 0;var r=function(){function e(){}return e.read=function(t){return i.WebHttp.getJson("workflow/task/form/data.json",{task:t})},e.uploadOptions=function(t){return n.defaults(t||{},e.defaultUploadOptions())},e.defaultUploadOptions=function(){return{async:{saveUrl:a.WebLocation.resolve("workflow/task/form/uploadFile.json"),saveField:"file"}}},e}();e.WorkflowTaskFormRepository=r}),define("text!templates/risk/risk.validation.task.form.html",[],function(){return'<div>\n\t<div id="riskValidationToolbar"></div>\n\t<p></p>\n\t<table class="riskValidationConfiguration k-content">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="riskValidationProfile">\n\t\t\t\t\t<a data-i18n="risk:validationTask.profile" data-bind="attr: {href: riskProfileUrl}"></a>\n\t\t\t\t</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="riskValidationProfile" data-role="domosriskprofile" data-bind="value: profile"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="riskValidationObject" data-i18n="risk:validationTask.object"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="riskValidationObject" type="text" class="k-textbox" data-bind="value: object" readonly/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td></td>\n\t\t\t<td>\n\t\t\t\t<a class="k-button" data-bind="attr:{href: riskUrl}" data-i18n="risk:validationTask.risk"></a>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n\t<p></p>\n\n\t<div id="riskValidationGrid" class="floatingGrid"></div>\n\t<div class="clearer"></div>\n\t<p></p>\n</div>'}),define("risk/data/RiskValidationStatus",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RiskValidationStatus=void 0;var r,o;(r=e.RiskValidationStatus||(e.RiskValidationStatus={}))[r.NONE=0]="NONE",r[r.LOW=1]="LOW",r[r.MEDIUM=2]="MEDIUM",r[r.HIGH=3]="HIGH",(o=e.RiskValidationStatus||(e.RiskValidationStatus={})).getName=n.EnumUtils.createNameFn("risk:RiskValidationStatus",o),o.widget=i.EnumWidgetUtils.createDropList("DomosRiskValidationStatus",o,!1),o.column=a.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/RiskInputLevel",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RiskInputLevel=void 0;var r,o;(r=e.RiskInputLevel||(e.RiskInputLevel={}))[r.FUND=1]="FUND",r[r.ASSET=3]="ASSET",r[r.VIRTUAL_PORTFOLIO=4]="VIRTUAL_PORTFOLIO",(o=e.RiskInputLevel||(e.RiskInputLevel={})).getName=a.EnumUtils.createNameFn("risk:RiskInputLevel",o),o.widget=i.EnumWidgetUtils.createDropList("DomosRiskInputLevel",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("workflow/repository/WorkflowTaskRepository",["require","exports","core/web/WebHttp"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkflowTaskRepository=void 0;var n=function(){function t(){}return t.complete=function(t,e){var n={task:t,properties:JSON.stringify(e)};return i.WebHttp.postJson("workflow/task/complete.json",n)},t.updateRiskProfile=function(t,e){var n={task:t,riskProfileId:e};return i.WebHttp.postJson("workflow/riskValidationTask/updateRiskProfile.json",n)},t}();e.WorkflowTaskRepository=n}),define("risk/workflow/RiskValidationTaskFormKey",["require","exports","kendo","workflow/repository/WorkflowTaskFormRepository","core/util/Logger","text!templates/risk/risk.validation.task.form.html","i18n","core/data/DObservableBuilder","core/ui/grid/LocalTransport","../data/RiskValidationStatus","core/ui/grid/GridUtils","object/data/ObjectTypes","object/data/ObjectCategories","core/api/RiskInputLevel","core/web/WebStorages","risk/ui/RiskProfileUI","workflow/repository/WorkflowTaskRepository","risk/web/RiskMap"],function(t,e,d,l,s,u,c,p,i,a,r,m,f,b,n,v,y,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RiskValidationTaskFormKey=void 0;var g="#riskValidationGrid",T="#riskValidationProfile",I="#riskValidationToolbar";function C(){return n.WebStorages.tenantLocalStorage()}function w(t){return"workflow_risk_"+t}function k(t){C().removeItem(w(t))}function E(i,t){var e,n,a,r,o,d=(e=i,C().getObject(w(e))),l=(n=t,(a=m.ObjectTypes.get(n.objectType))?a.isOf(f.ObjectCategories.assets)?b.RiskInputLevel.ASSET:a.isOf(f.ObjectCategories.entities)?b.RiskInputLevel.FUND:a.isOf(f.ObjectCategories.virtualPortfolios)?b.RiskInputLevel.VIRTUAL_PORTFOLIO:b.RiskInputLevel.FUND:b.RiskInputLevel.FUND),s={accepted:!1,profile:t.profile,object:t.object.name,indicators:(r=t.indicators,o=d,o&&r.forEach(function(t){var e=o[t.indicatorId];e&&(t.status=e.status,t.comments=e.comments)}),r)},u=t.object.id,c=p.DObservableBuilder.of(s).add("riskProfileUrl",function(t){var e=t.get("profile"),n=e?e.id:0;return h.RiskMap.profileEdit(n)}).add("riskUrl",function(t){var e=t.get("profile"),n=e?e.id:0;return h.RiskMap.riskEdit(n,l,u)}).build();return c.bindChange(function(t){return e=i,n=function(t){for(var e={},n=0,i=t.indicators;n<i.length;n++){var a=i[n];e[a.indicatorId]={status:a.status,comments:a.comments}}return e}(t.toJson()),void C().setObject(w(e),n);var e,n}),c}function D(t,e){d.destroy(t),t.empty();var n={dataSource:{transport:i.LocalTransport.bind(e.kendo().get("indicators")),schema:{model:{id:"id",fields:{id:{type:"number",editable:!1},indicatorId:{type:"number",editable:!1},name:{type:"string",editable:!1},rule:{type:"string",editable:!1},status:{type:"number"},comments:{type:"string"}}}},sort:[{field:"rule",dir:"asc"},{field:"name",dir:"asc"}],group:{field:"rule"}},columns:[{command:["edit"],title:" "},{field:"name",title:c.I18N.t("risk:workflow.indicator")},{field:"rule",title:c.I18N.t("risk:workflow.rule"),hidden:!0},a.RiskValidationStatus.column({field:"status",title:c.I18N.t("risk:workflow.status")}),{field:"comments",title:c.I18N.t("risk:workflow.comments")}],scrollable:!1};r.GridUtils.withDefaults(n),t.kendoGrid(n)}function S(t){d.destroy(t),t.empty(),$("<h2>").text("Unable to find data for the task").appendTo(t)}function N(t,n,i,a){var r=E(n,i),e=d.template(u)({}),o={model:r.kendo(),init:function(t){var e=t.sender.element;c.I18N.localize(e),function(t,e,n,i){d.destroy(t),t.empty();var a={items:[{id:"accept",type:"button",text:c.I18N.t("risk:validationTask.accept"),icon:"check",click:function(){n.set("accepted",!0),k(e),i(n.toJson())}},{id:"reject",type:"button",text:c.I18N.t("risk:validationTask.reject"),icon:"close",click:function(){n.set("accepted",!1),k(e),i(n.toJson())}}]};t.kendoToolBar(a)}(e.find(I),n,r,a),i.indicators&&D(e.find(g),r),v.RiskProfileUI.widget(e.find(T),{select:function(t){y.WorkflowTaskRepository.updateRiskProfile(n,t.dataItem.id).then(function(){k(n),l.WorkflowTaskFormRepository.read(n).then(function(t){t&&(r.set("indicators",t.indicators),D(e.find(g),r))})})}})}};new d.View(e,o).render(t)}var o=function(){function t(){this.key="DMS_RISK_VALIDATION_KEY"}return t.prototype.display=function(t,e,n){var i,a,r,o=$("<div>").appendTo(t);i=o,a=e,r=n,l.WorkflowTaskFormRepository.read(a).then(function(t){t?N(i,a,t,r):S(i)}).catch(function(t){s.Logger.error(t),S(i)})},t}();e.RiskValidationTaskFormKey=o}),define("text!templates/lp/company.subscription.task.form.html",[],function(){return'<div>\n\t<div id="companySubscriptionGrid" class="floatingGrid"></div>\n\t<div class="clearer"></div>\n\t<div class="formWindowButtons">\n\t\t<button class="k-button k-primary" data-bind="click: okClick, disabled: submitted" style="width: 100%">OK</button>\n\t</div>\n\n</div>'}),define("lp/workflow/LpCompanySubscriptionTaskFormKey",["require","exports","lodash","workflow/repository/WorkflowTaskFormRepository","core/util/Logger","i18n","text!templates/lp/company.subscription.task.form.html","core/ui/DateUI","core/ui/NumberUI","object/ui/EntityInvestorUI","object/ui/AssetUI","core/ui/grid/GridUtils","core/ui/Information"],function(t,e,d,l,s,u,c,p,m,f,b,v,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpCompanySubscriptionTaskFormKey=void 0;var h="#companySubscriptionGrid";function g(t){kendo.destroy(t),t.empty(),$("<h2>").text("Unable to find data for the task").appendTo(t)}var T={companySubsriptions:[],submitted:!1};function I(i,t,e){var a,n=kendo.template(c)({}),r=t.company||{};d.defaults(r,T),r.okClick=function(){var t=[];a&&(a.tbody.find("tr:last").length?(t=function(t){for(var e=t.items(),n=[],i=0;i<e.length;i++){var a=$(e[i]),r=t.dataItem(a).toJSON();r.date||n.push(u.I18N.t("lp:companySubscription.date")+" is mandatory in row "+(i+1)),r.amount||n.push(u.I18N.t("lp:companySubscription.amount")+" is mandatory in row "+(i+1)),r.quantity||n.push(u.I18N.t("lp:companySubscription.quantity")+" is mandatory in row "+(i+1)),r.companyShare||n.push(u.I18N.t("lp:companySubscription.companyShare")+" is mandatory in row "+(i+1)),r.investorEntity||n.push(u.I18N.t("lp:companySubscription.investorEntity")+" is mandatory in row "+(i+1))}return n}(a)).length?y.Information.error(d.chain(t).take(6).join(", ").value()):(e({transactions:a.dataSource.data()}),this.set("submitted",!0)):y.Information.error(u.I18N.t("ui:information.noData")))};var o={model:kendo.observable(r),init:function(){var t,e,n;u.I18N.localize(i),e=(t=i).find(h),n={dataSource:{data:[],schema:{model:{id:"id",fields:{date:{type:"date"},companyShare:{nullable:!0},quantity:{type:"number",defaults:0},amount:{type:"number",defaults:0},investorEntity:{nullable:!0},seller:{nullable:!0},comments:{type:"string"}}}}},columns:[{command:["edit","destroy"],title:" "},p.DateUI.column({field:"date",title:u.I18N.t("lp:companySubscription.date")}),b.AssetUI.CompanyShareCompany.column({field:"companyShare",title:u.I18N.t("lp:companySubscription.companyShare")}),m.NumberUI.column({field:"quantity",title:u.I18N.t("lp:companySubscription.quantity")}),m.NumberUI.column({field:"amount",title:u.I18N.t("lp:companySubscription.amount")}),f.EntityInvestorUI.column({field:"investorEntity",title:u.I18N.t("lp:companySubscription.investorEntity")}),f.EntityInvestorUI.column({field:"seller",title:u.I18N.t("lp:companySubscription.seller")}),{field:"comments",title:u.I18N.t("lp:companySubscription.comments")}],scrollable:!1,toolbar:[{name:"create"}]},v.GridUtils.withDefaults(n),t.find(h).kendoGrid(n),a=e.data("kendoGrid")}};new kendo.View(n,o).render(i)}var n=function(){function t(){}return Object.defineProperty(t.prototype,"key",{get:function(){return"DMS_COMPANY_SUBSCRIPTION_KEY"},enumerable:!1,configurable:!0}),t.prototype.display=function(t,e,n){var i,a,r,o=$("<div>").appendTo(t);i=o,a=e,r=n,l.WorkflowTaskFormRepository.read(a).then(function(t){t&&d.has(t,"workflow")?I(i,t,r):g(i)}).catch(function(t){s.Logger.error(t),g(i)})},t}();e.LpCompanySubscriptionTaskFormKey=n}),define("core/api/CapitalCallMethodology",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CapitalCallMethodology=void 0;var r,o;(r=e.CapitalCallMethodology||(e.CapitalCallMethodology={}))[r.IN_PERCENT=1]="IN_PERCENT",r[r.EQUALISATION_WITHOUT_DISTRIBUTION=2]="EQUALISATION_WITHOUT_DISTRIBUTION",r[r.EQUALISATION_WITH_DISTRIBUTION=3]="EQUALISATION_WITH_DISTRIBUTION",r[r.OTHER=4]="OTHER",r[r.UP_TO=5]="UP_TO",r[r.IN_AMOUNT=6]="IN_AMOUNT",(o=e.CapitalCallMethodology||(e.CapitalCallMethodology={})).getName=n.EnumUtils.createNameFn("history:capitalCallMethodology",o),o.widget=i.EnumWidgetUtils.createDropList("DomosCapitalCallMethodology",o,!1),o.column=a.EnumColumnUtils.createFactory(o,o.widget),o.isInPercent=function(t){return t===o.IN_PERCENT||t===o.UP_TO}}),define("lp/views/overview/summary/explanation/LpExplanationUtils",["require","exports","lodash","i18n"],function(t,e,m,n){"use strict";function f(t){return"value"+t}function s(t,e){return m.defaults(t,{columnKey:f(e)})}Object.defineProperty(e,"__esModule",{value:!0}),e.LpExplanationUtils=void 0;var i=function(){function p(){}return p.isGroup=function(t){return m.has(t,"data")},p.flattenShare=function(t){for(var e=[],n=-1,i=0,a=t.data;i<a.length;i++){var r=a[i];if(p.isGroup(r))for(var o=0,d=r.data;o<d.length;o++){var l=d[o];++n,e.push(s(l,n))}else++n,e.push(s(r,n))}return e},p.getName=function(t){return t.name||n.I18N.t("lp:explanation.shares.total")},p.getShare=function(t,e){return p.flattenShare(t)[e]},p.isTotal=function(t){return!p.isGroup(t)&&m.isNil(t.name)},p.columns=function(t,e,n){for(var i=-1,a=0,r=e.data;a<r.length;a++){var o=r[a];if(p.isGroup(o)){var d={title:o.name,columns:[]};t.push(d);for(var l=0,s=o.data;l<s.length;l++){var u=s[l],c={field:f(++i),title:p.getName(u)};d.columns.push(n(c,m.extend(u,{index:i})))}}else{d={field:f(++i),title:p.getName(o)};t.push(n(d,m.defaults(o,{index:i})))}}},p}();e.LpExplanationUtils=i}),define("lp/views/overview/summary/explanation/LpExplanationFeeDetailGrid",["require","exports","kendo","./LpExplanationUtils","i18n","core/ui/DateUI","core/ui/IntegerUI","core/ui/grid/GridUtils","core/ui/PercentUI"],function(t,e,d,l,s,u,c,p,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpExplanationFeeDetailGrid=void 0;var f="lpExplanationGridButton";var n=function(){function t(){}return t.display=function(t,e,n){var i=function(t,e){for(var n=e.fees,i=t.fees,a=n.length,r=[],o=0;o<a;++o){var d=i[o]||{},l=n[o],s={startDate:d.startDate,endDate:d.endDate,commitment:d.commitment,commitmentCarried:d.commitmentCarried,shareCommitment:l.commitment,shareCommitmentCarried:l.commitmentCarried,shareFees:l.fees,shareAverageFees:l.averageFees,shareCatchUp:l.catchUp};r.push(s)}return r}(e,n);if(!(i.length<=0)){d.destroy(t),t.empty();var a=l.LpExplanationUtils.getName(n),r=s.I18N.t("lp:explanation.fees.title",{share:a}),o={dataSource:{data:i,schema:{model:{fields:{startDate:{type:"date"},endDate:{type:"date"}}}},sort:[{field:"startDate",dir:"asc"},{field:"endDate",dir:"asc"}]},columns:[{headerTemplate:'<button class="k-button '+f+'">\n\t\t\t\t\t\t<span class="k-icon k-i-x"></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t&ensp;<strong>'+r+"</strong>",columns:[{title:s.I18N.t("lp:explanation.fees.global"),columns:[u.DateUI.column({field:"startDate",title:s.I18N.t("lp:explanation.fees.startDate")}),u.DateUI.column({field:"endDate",title:s.I18N.t("lp:explanation.fees.endDate")}),c.IntegerUI.column({field:"commitment",title:s.I18N.t("lp:explanation.fees.commitment")}),c.IntegerUI.column({field:"commitmentCarried",title:s.I18N.t("lp:explanation.fees.commitmentCarried")})]},{title:a,columns:[c.IntegerUI.column({field:"shareCommitment",title:s.I18N.t("lp:explanation.fees.commitment")}),c.IntegerUI.column({field:"shareCommitmentCarried",title:s.I18N.t("lp:explanation.fees.commitmentCarried")}),c.IntegerUI.column({field:"shareFees",title:s.I18N.t("lp:explanation.fees.fees")}),m.PercentUI.column({field:"shareAverageFees",title:s.I18N.t("lp:explanation.fees.averageFees"),format:"{0:p2}"}),c.IntegerUI.column({field:"shareCatchUp",title:s.I18N.t("lp:explanation.fees.catchUp")})]}]}],pageable:!1,scrollable:!1,groupable:!1,editable:!1};p.GridUtils.withDefaults(o),t.kendoGrid(o),t.find("."+f).on("click",function(){setTimeout(function(){d.destroy(t),t.empty()},0)})}},t}();e.LpExplanationFeeDetailGrid=n}),define("lp/views/overview/summary/explanation/LpExplanationAllocationGrid",["require","exports","lodash","kendo","./LpExplanationUtils","core/ui/grid/GridUtils","i18n","core/ui/NumberUI","./LpExplanationFeeDetailGrid"],function(t,e,s,u,c,p,m,n,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpExplanationAllocationGrid=void 0;function b(t,e){for(var n={key:e,name:m.I18N.t("lp:explanation.allocations."+e)},i=!0,a=0,r=t;a<r.length;a++){var o=r[a],d=o[e];n[o.columnKey]=d,s.isNil(d)||(i=!1)}return i?null:n}function o(t,e){return t.key===e}function v(t,a){var r=t.field;return r?(c.LpExplanationUtils.isTotal(a)?t.template=function(t){var e=t[r];return s.isNil(e)?"":o(t,"capitalCalled")?u.toString(e,"p"):u.toString(e,"n0")}:t.template=function(t){var e=t[r],n=s.isNil(e)?"":u.toString(e,"n0"),i="";return o(t,"managementFees")&&0<a.fees.length&&(i='<button \t\t\t\t\tclass="k-button lpExplanationGridButton" \t\t\t\t\tdata-share="'+a.index+'" \t\t\t\t\ttitle="Details"> \t\t\t\t\t\t<span class="k-icon k-i-search"></span> \t\t\t\t\t</button>'),n+i},n.NumberUI.column(t)):t}var i=function(){function t(){}return t.setup=function(t,i,a,e){u.destroy(t),t.empty();var n=c.LpExplanationUtils.flattenShare(a),r=[];r.push(b(n,"commitment")),r.push(b(n,"capitalCalled")),r.push(b(n,"includingNotCalled")),r.push(b(n,"equalizationCall")),r.push(b(n,"distribution")),r.push(b(n,"excludingRecallable")),r.push(b(n,"managementFees")),r.push(b(n,"otherFees")),r.push(b(n,"capitalAtWork")),r.push(b(n,"allocation"));var o=s.compact(r),d=[{field:"name",headerTemplate:"<strong>"+m.I18N.t("lp:explanation.allocations.title")+"</strong>"}];c.LpExplanationUtils.columns(d,a,v);var l={dataSource:{data:o},columns:d,pageable:!1,scrollable:!1,groupable:!1,editable:!1};p.GridUtils.withDefaults(l),e.register("Allocations",t,l),t.kendoGrid(l),t.on("click",function(t){var e=$(t.target).data("share");if(!s.isNil(e)){var n=c.LpExplanationUtils.getShare(a,e);n&&f.LpExplanationFeeDetailGrid.display(i,a,n)}})},t}();e.LpExplanationAllocationGrid=i}),define("lp/data/LpExplanationLabelType",["require","exports","core/util/EnumUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpExplanationLabelType=void 0;var a,r;(a=e.LpExplanationLabelType||(e.LpExplanationLabelType={}))[a.NOTIONAL=1]="NOTIONAL",a[a.PREFERRED_RETURN=2]="PREFERRED_RETURN",a[a.CATCH_UP=3]="CATCH_UP",a[a.LAST_PRIORITY=4]="LAST_PRIORITY",(r=e.LpExplanationLabelType||(e.LpExplanationLabelType={})).getName=n.EnumUtils.createNameFn("lp:LpExplanationLabelType",r),r.column=i.EnumColumnUtils.createFactory(r)}),define("lp/views/overview/summary/explanation/LpExplanationWaterfallDetailGrid",["require","exports","kendo","../../../../data/LpExplanationLabelType","core/ui/grid/GridUtils","./LpExplanationUtils","i18n","core/ui/DateUI","core/ui/NumberUI"],function(t,e,o,d,l,s,u,c,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpExplanationWaterfallDetailGrid=void 0;var m="lpExplanationGridButton";var n=function(){function t(){}return t.display=function(t,e,n,i){var a,r,o=(a=n,(r=i.waterfall.values[a])?r.flows:[]);this.displayWithData(t,e,s.LpExplanationUtils.getName(i),o)},t.displayWithData=function(t,e,n,i){if(o.destroy(t),t.empty(),!(i.length<=0)){var a=u.I18N.t("lp:explanation.waterfall.details.name",{type:d.LpExplanationLabelType.getName(e)||"",share:n}),r={dataSource:{data:i,schema:{model:{fields:{date:{type:"date"},cashFlow:{type:"number"},discountFactor:{type:"number"},compoundCashFlow:{type:"number"}}}},sort:{field:"date",dir:"asc"}},columns:[{headerTemplate:'<button class="k-button '+m+'">\n\t\t\t\t\t\t<span class="k-icon k-i-x"></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t&ensp;<strong>'+a+"</strong>",columns:[c.DateUI.column({field:"date",title:u.I18N.t("lp:explanation.waterfall.details.date")}),p.NumberUI.column({field:"cashFlow",title:u.I18N.t("lp:explanation.waterfall.details.cashFlow"),format:"{0:n0}"}),p.NumberUI.column({field:"discountFactor",title:u.I18N.t("lp:explanation.waterfall.details.discountFactor"),format:"{0:n4}"}),p.NumberUI.column({field:"compoundCashFlow",title:u.I18N.t("lp:explanation.waterfall.details.compoundCashFlow"),format:"{0:n0}"})]}],pageable:!1,scrollable:!1,groupable:!1,editable:!1};l.GridUtils.withDefaults(r),t.kendoGrid(r),t.find("."+m).on("click",function(){setTimeout(function(){o.destroy(t),t.empty()},0)})}},t}();e.LpExplanationWaterfallDetailGrid=n}),define("lp/views/overview/summary/explanation/LpExplanationWaterfallGrid",["require","exports","lodash","kendo","./LpExplanationUtils","../../../../data/LpExplanationLabelType","core/ui/grid/GridUtils","./LpExplanationWaterfallDetailGrid","i18n","core/ui/NumberUI","core/ui/grid/column/ColumnStyle"],function(t,e,l,u,c,p,r,m,f,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpExplanationWaterfallGrid=void 0;function b(t){return"has_"+t}function v(t,e){var n=t.waterfall.values;if(!n||n.length<=e)return{value:null,has:!1};var i=n[e];return{value:i.value,has:i.flows&&0<i.flows.length}}function y(r,o){r.template=function(t){var e=r.field;if(!e)return"";var n=t[e],i=l.isNil(n)?"":u.toString(n,"n0"),a="";return t[b(e)]&&(a='<button \t\t\t\tclass="k-button lpExplanationGridButton" \t\t\t\tdata-share="'+o.index+'" \t\t\t\tdata-type="'+t.type+'" \t\t\t\tdata-index="'+t.index+'" \t\t\t\ttitle="'+f.I18N.t("lp:explanation.waterfall.details.action")+'">\t\t\t\t\t<span class="k-icon k-i-search"></span> \t\t\t\t</button>'),i+a};var t=o.waterfall.total;return l.isNil(t)||(r.footerTemplate='<div style="'+i.ColumnStyle.toCss([i.ColumnStyle.BOLD,i.ColumnStyle.RIGHT_ALIGNED])+'">\n\t\t\t\t'+u.toString(t,"n0")+"\n\t\t\t</div>"),n.NumberUI.column(r)}var a=function(){function t(){}return t.setup=function(t,o,d,e){u.destroy(t),t.empty();var s=c.LpExplanationUtils.flattenShare(d),n=l.chain(d.waterfallLabels).sortBy("priority").map(function(t,e){for(var n={type:t.type,priority:t.priority,index:e,name:f.I18N.t("lp:explanation.waterfall.typeWithPriority",{type:p.LpExplanationLabelType.getName(t.type)||"",priority:t.priority})},i=0,a=s;i<a.length;i++){var r=a[i],o=v(r,e),d=o.value,l=o.has;n[r.columnKey]=d,n[b(r.columnKey)]=l}return n}).value(),i=[{field:"name",headerTemplate:"<strong>"+f.I18N.t("lp:explanation.waterfall.title")+"</strong>",footerTemplate:"<strong>"+f.I18N.t("lp:explanation.waterfall.total")+"</strong>"}];c.LpExplanationUtils.columns(i,d,y);var a={dataSource:{data:n,sort:{field:"name",dir:"asc"}},columns:i,pageable:!1,scrollable:!1,groupable:!1,editable:!1};r.GridUtils.withDefaults(a),e.register("Waterfall",t,a),t.kendoGrid(a),t.on("click",function(t){var e=$(t.target),n=e.data("share");if(!l.isNil(n)){var i=c.LpExplanationUtils.getShare(d,n);if(i){var a=e.data("type"),r=e.data("index");m.LpExplanationWaterfallDetailGrid.display(o,a,r,i)}}})},t}();e.LpExplanationWaterfallGrid=a}),define("lp/data/LpExplanationReserveType",["require","exports","core/util/EnumUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpExplanationReserveType=void 0;var a,r;(a=e.LpExplanationReserveType||(e.LpExplanationReserveType={}))[a.CAPITAL_GAIN=1]="CAPITAL_GAIN",a[a.CALLABLE_AMOUNT=2]="CALLABLE_AMOUNT",a[a.AMOUNT_RESERVE=3]="AMOUNT_RESERVE",a[a.FUND_RESERVE=4]="FUND_RESERVE",(r=e.LpExplanationReserveType||(e.LpExplanationReserveType={})).getName=n.EnumUtils.createNameFn("lp:LpExplanationReserveType",r),r.column=i.EnumColumnUtils.createFactory(r)}),define("lp/views/overview/summary/explanation/LpExplanationReserveGrid",["require","exports","kendo","core/ui/grid/GridUtils","../../../../data/LpExplanationReserveType","i18n","core/ui/NumberUI"],function(t,e,a,r,o,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpExplanationReserveGrid=void 0;var n=function(){function t(){}return t.setup=function(t,e,n){a.destroy(t),t.empty();var i={dataSource:{data:e.reserves},columns:[o.LpExplanationReserveType.column({field:"type",headerTemplate:"<strong>"+d.I18N.t("lp:explanation.reserves.title")+"</strong>"}),l.NumberUI.column({field:"value",title:d.I18N.t("lp:explanation.reserves.value"),format:"{0:n0}"})],pageable:!1,scrollable:!1,groupable:!1,editable:!1};r.GridUtils.withDefaults(i),n.register("Reserve",t,i),t.kendoGrid(i)},t}();e.LpExplanationReserveGrid=n}),define("lp/data/LpExplanationDistributionType",["require","exports","core/util/EnumUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpExplanationDistributionType=void 0;var a,r;(a=e.LpExplanationDistributionType||(e.LpExplanationDistributionType={}))[a.DISTRIBUTION=1]="DISTRIBUTION",a[a.IN_PCT_COMMITMENT=2]="IN_PCT_COMMITMENT",a[a.IN_PCT_CAPITAL_CALL=3]="IN_PCT_CAPITAL_CALL",a[a.RECALLABLE_AMOUNT=4]="RECALLABLE_AMOUNT",a[a.AMOUNT_RESERVE=5]="AMOUNT_RESERVE",a[a.IN_PCT_REDEEMED=6]="IN_PCT_REDEEMED",(r=e.LpExplanationDistributionType||(e.LpExplanationDistributionType={})).getName=n.EnumUtils.createNameFn("lp:LpExplanationDistributionType",r),r.column=i.EnumColumnUtils.createFactory(r),r.isPercent=function(t){return t===r.IN_PCT_COMMITMENT||t===r.IN_PCT_CAPITAL_CALL||t===r.IN_PCT_REDEEMED}}),define("lp/views/overview/summary/explanation/LpExplanationDistributionGrid",["require","exports","lodash","kendo","../../../../data/LpExplanationDistributionType","core/ui/grid/GridUtils","./LpExplanationUtils","i18n","core/ui/NumberUI"],function(t,e,w,k,E,D,S,N,i){"use strict";function x(t){var n=t.field;return n&&(t.template=function(t){var e=t[n];return w.isNil(e)?"":E.LpExplanationDistributionType.isPercent(t.distribution)?k.toString(e,"p"):k.toString(e,"n0")}),i.NumberUI.column(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.LpExplanationDistributionGrid=void 0;var n=function(){function C(){}return C.setup=function(t,e,n,d){k.destroy(t),t.empty();for(var i=w.sortBy(e.distributions),a=S.LpExplanationUtils.flattenShare(e),r={},o={},l={},s=[],u=0,c=i;u<c.length;u++){var p=c[u],m={};m.distribution=p;for(var f=0,b=a;f<b.length;f++){var v=b[f];m[v.columnKey]=null;for(var y=0,h=v.distributionDetails;y<h.length;y++){var g=h[y];g.type===p&&(m[v.columnKey]=g.value,r[v.columnKey]=0,v.name&&(o[v.columnKey]=v.name,l[v.name]=v.columnKey))}}s.push(m)}var T=[E.LpExplanationDistributionType.column({field:"distribution",headerTemplate:"<strong>"+N.I18N.t("lp:explanation.distributions.title")+"</strong>"})];S.LpExplanationUtils.columns(T,e,x);var I={dataSource:{data:s,schema:{model:{fields:r}}},columns:T,pageable:!1,scrollable:!1,groupable:!1,editable:!!d&&d.editable,cellClose:function(t){if("save"===t.type&&t.model&&d&&d.initialDistributions&&d.distribChanged)for(var e=0,n=d.initialDistributions;e<n.length;e++){var i=n[e],a=l[i.shareShortName];if(a){var r=t.model.get(a);if(r){var o=t.model.get("distribution");o===E.LpExplanationDistributionType.IN_PCT_COMMITMENT&&d.distribChanged({shareShortName:i.shareShortName,amount:r}),o===E.LpExplanationDistributionType.IN_PCT_REDEEMED&&d.distribChanged({shareShortName:i.shareShortName,quantity:r})}}}},edit:function(t){if(t.container){var e=t.container.find("select[data-role=dropdownlist]").data("kendoDropDownList");e&&e.enable(!1)}if(t.model){var n=t.model.get("distribution");if(n!==E.LpExplanationDistributionType.IN_PCT_COMMITMENT&&n!==E.LpExplanationDistributionType.IN_PCT_REDEEMED&&t.container){var i=t.container.find("input[data-role=numerictextbox]").data("kendoNumericTextBox");i&&i.enable(!1)}}}};D.GridUtils.withDefaults(I),n.register("Distributions",t,I),t.kendoGrid(I),d&&(d.initialDistributions&&C.createInitialValuesTooltips(t,s,o,d.initialDistributions),d.modifiedDistributions&&C.setModifiedValues(t,l,d.modifiedDistributions))},C.createInitialValuesTooltips=function(t,e,n,i){if(e&&0<e.length)for(var a=e[0],r=0,o=0,d=w.keys(a);o<d.length;o++){var l=d[o];r++;var s=C.getInitialDistribution(l,n,i);s&&C.createColumnTooltip(r,l,t,s)}},C.getInitialDistribution=function(e,n,t){var i=t.filter(function(t){return t.shareShortName===n[e]});return i.length<1?null:i[0]},C.createColumnTooltip=function(t,a,e,r){var o=e.data("kendoGrid");e.kendoTooltip({filter:"td:nth-child("+t+")",position:"right",content:function(t){var e=o.dataItem(t.target.closest("tr")),n=e.get(a);if(n||0===n){var i=e.get("distribution");return i===E.LpExplanationDistributionType.IN_PCT_COMMITMENT?k.toString(r.amount,"p"):i===E.LpExplanationDistributionType.IN_PCT_REDEEMED?k.toString(r.quantity,"p"):k.toString(n,"p")}return""}}).data("kendoTooltip")},C.setModifiedValues=function(t,e,n){for(var i=t.data("kendoGrid").dataSource.data(),a=0;a<i.length;a++){var r=i[a],o=r.get("distribution");if(o===E.LpExplanationDistributionType.IN_PCT_COMMITMENT)for(var d=0,l=n;d<l.length;d++){(p=e[(c=l[d]).shareShortName])&&r.set(p,c.amount)}if(o===E.LpExplanationDistributionType.IN_PCT_REDEEMED)for(var s=0,u=n;s<u.length;s++){var c,p;(p=e[(c=u[s]).shareShortName])&&r.set(p,c.quantity)}}},C}();e.LpExplanationDistributionGrid=n}),define("text!templates/lp/lp.explanation.html",[],function(){return'<div>\n\t<div id="lpExplanationToolbar"></div>\n\t<p></p>\n\t<div id="lpExplanationAllocations" class="lpExplanationResultFloatingGrid"></div>\n\t<div class="clearer"></div>\n\t<p></p>\n\t<div id="lpExplanationWaterfall" class="lpExplanationResultFloatingGrid"></div>\n\t<div class="clearer"></div>\n\t<div id="lpExplanationByLp"></div>\n\t<div id="lpExplanationReserves" class="lpExplanationResultFloatingGrid"></div>\n\t<div id="lpExplanationDetails" class="lpExplanationResultFloatingGrid"></div>\n\t<div class="clearer"></div>\n\t<p></p>\n\t<div id="lpExplanationDistribution" class="lpExplanationResultFloatingGrid"></div>\n\t<div class="clearer"></div>\n\t<p></p>\n</div>'}),define("core/ui/grid/MultiGridExcel",["require","exports","tslib","kendo","../../util/Logger"],function(t,e,r,o,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiGridExcel=void 0;var i=function(){function t(t){this.fileName=t,this.exportPromise=Promise.resolve(void 0),this.entries=[]}return t.prototype.export=function(){var t=this;this.exportPromise=this.exportPromise.then(function(){return t._export()}).catch(function(t){n.Logger.error(t)})},t.prototype.register=function(t,e,n){var i=this,a=this.entries.length;this.entries.push({name:t,element:e});var r=n.excelExport;n.excelExport=function(t){r&&r(t);var e=i.entries[a];if(e&&e.resolve)return t.preventDefault(),e.resolve(t.workbook),void(e.resolve=void 0)}},t.prototype._export=function(){return r.__awaiter(this,void 0,void 0,function(){var e,n,i,a=this;return r.__generator(this,function(t){switch(t.label){case 0:return e=this.entries.map(function(t){return a._save(t)}),[4,Promise.all(e)];case 1:return n=t.sent(),[4,new o.ooxml.Workbook({sheets:n}).toDataURLAsync()];case 2:return i=t.sent(),o.saveAs({dataURI:i,fileName:this.fileName}),[2]}})})},t.prototype._save=function(a){return r.__awaiter(this,void 0,void 0,function(){var e,n,i;return r.__generator(this,function(t){switch(t.label){case 0:return e=new Promise(function(t,e){a.resolve=t}),this._saveGrid(a),[4,e];case 1:return n=t.sent(),(i=n.sheets[0]).name=a.name,[2,i]}})})},t.prototype._saveGrid=function(t){var e=t.element,n=e.data("kendoGrid");if(n)n.saveAsExcel();else{var i=e.data("kendoTreeList");if(!i)throw new Error("Unable to find grid for "+t.name);i.saveAsExcel()}},t}();e.MultiGridExcel=i}),define("lp/views/overview/summary/explanation/CarriedByLpExplanationGrid",["require","exports","lodash","core/ui/DateUI","core/ui/grid/column/ColumnStyle","core/ui/grid/GridUtils","core/ui/NumberUI","i18n","object/ui/EntityUI","./LpExplanationWaterfallDetailGrid","lp/data/LpExplanationLabelType","core/util/ObservableUtils"],function(t,e,l,o,s,u,c,p,m,f,b,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CarriedByLpExplanationGrid=void 0;var y="lpExplanationGridButton";function h(t,e,n){var i=m.EntityUI.column({field:"investor",title:p.I18N.t("lp:explanation.waterfall.byLp.investor"),width:125});i.footerTemplate="<strong>"+p.I18N.t("lp:explanation.waterfall.total")+"</strong>";var r,d,a=[i,{field:"shareClass",title:p.I18N.t("lp:explanation.waterfall.byLp.shareClass"),hidden:!e.showClass},c.NumberUI.column({field:"commitment",title:p.I18N.t("lp:explanation.waterfall.byLp.commitment"),format:"{0:n0}",width:135}),o.DateUI.column({field:"date",title:p.I18N.t("lp:explanation.waterfall.byLp.date"),width:91}),c.NumberUI.column({field:"quantity",title:p.I18N.t("lp:explanation.waterfall.byLp.quantity"),format:"{0:n0}",footerTemplate:'<div style="'+s.ColumnStyle.toCss([s.ColumnStyle.BOLD,s.ColumnStyle.RIGHT_ALIGNED])+'">\n\t\t\t\t\t'+kendo.toString(t.totals.quantity,"n0")+"\n\t\t\t\t</div>",width:103}),c.NumberUI.column({field:"capitalCall",title:p.I18N.t("lp:explanation.waterfall.byLp.capitalCall"),format:"{0:n0}",footerTemplate:'<div style="'+s.ColumnStyle.toCss([s.ColumnStyle.BOLD,s.ColumnStyle.RIGHT_ALIGNED])+'">\n\t\t\t\t\t'+kendo.toString(t.totals.capitalCall,"n0")+"\n\t\t\t\t</div>",width:102}),c.NumberUI.column({field:"previousDistribution",title:p.I18N.t("lp:explanation.waterfall.byLp.previousDistribution"),format:"{0:n0}",footerTemplate:'<div style="'+s.ColumnStyle.toCss([s.ColumnStyle.BOLD,s.ColumnStyle.RIGHT_ALIGNED])+'">\n\t\t\t\t\t'+kendo.toString(t.totals.previousDistribution,"n0")+"\n\t\t\t\t</div>",width:142}),c.NumberUI.column({field:"previousCarried",title:p.I18N.t("lp:explanation.waterfall.byLp.previousCarried"),format:"{0:n0}",footerTemplate:'<div style="'+s.ColumnStyle.toCss([s.ColumnStyle.BOLD,s.ColumnStyle.RIGHT_ALIGNED])+'">\n\t\t\t\t\t'+kendo.toString(t.totals.previousCarried,"n0")+"\n\t\t\t\t</div>",width:120}),c.NumberUI.column({field:"grossDistribution",title:p.I18N.t("lp:explanation.waterfall.byLp.grossDistribution"),format:"{0:n0}",footerTemplate:'<div style="'+s.ColumnStyle.toCss([s.ColumnStyle.BOLD,s.ColumnStyle.RIGHT_ALIGNED])+'">\n\t\t\t\t\t'+kendo.toString(t.totals.grossDistribution,"n0")+"\n\t\t\t\t</div>",width:135}),c.NumberUI.column({field:"netDistributed",title:p.I18N.t("lp:explanation.waterfall.byLp.netDistributed"),format:"{0:n0}",footerTemplate:'<div style="'+s.ColumnStyle.toCss([s.ColumnStyle.BOLD,s.ColumnStyle.RIGHT_ALIGNED])+'">\n\t\t\t\t\t'+kendo.toString(t.totals.netDistributed,"n0")+"\n\t\t\t\t</div>",width:126}),c.NumberUI.column({field:"carried",title:p.I18N.t("lp:explanation.waterfall.byLp.carried"),format:"{0:n0}",footerTemplate:'<div style="'+s.ColumnStyle.toCss([s.ColumnStyle.BOLD,s.ColumnStyle.RIGHT_ALIGNED])+'">\n\t\t\t\t\t'+kendo.toString(t.totals.carried,"n0")+"\n\t\t\t\t</div>",width:94}),c.NumberUI.column({field:"total",title:p.I18N.t("lp:explanation.waterfall.byLp.total"),format:"{0:n0}",width:91}),c.NumberUI.column({field:"capital",title:p.I18N.t("lp:explanation.waterfall.byLp.capital"),format:"{0:n0}",width:91})];return r=a,d=0,n.forEach(function(t){var o,e,n,i,a={title:t.title,columns:[]};t.subcolumns.hurdle&&a.columns.push((o=T(d),e=p.I18N.t("lp:explanation.waterfall.byLp.hurdle"),i={field:o,title:e,template:function(t){var e=t[o],n=l.isNil(e)?"":kendo.toString(e,"n0"),i="",a=parseInt(o.charAt(o.length-1),10),r=t;return r&&0<r.tranches[a].flows.length&&(i='<button \t\t\t\tclass="k-button '+y+'" \t\t\t\tdata-commitmentid="'+r.id+'" \t\t\t\tdata-index="'+a+'" \t\t\t\ttitle="'+p.I18N.t("lp:explanation.waterfall.details.action")+'">\t\t\t\t\t<span class="k-icon k-i-search"></span> \t\t\t\t</button>'),n+i}},(n=127)&&(i.width=n),c.NumberUI.column(i))),t.subcolumns.preferredRevenue&&a.columns.push(c.NumberUI.column({field:I(d),title:p.I18N.t("lp:explanation.waterfall.byLp.preferredRevenue"),format:"{0:n0}",width:102})),t.subcolumns.carriedPreferredRevenue&&a.columns.push(g(C(d),p.I18N.t("lp:explanation.waterfall.byLp.carriedPreferredRevenue"))),t.subcolumns.catchUp&&a.columns.push(g(w(d),p.I18N.t("lp:explanation.waterfall.byLp.catchUp"),101)),r.push(a),d++}),e.remaining&&a.push(c.NumberUI.column({field:"remaining",title:p.I18N.t("lp:explanation.waterfall.byLp.remaining"),format:"{0:n0}",width:114})),e.remainingCarried&&a.push(c.NumberUI.column({field:"remainingCarried",title:p.I18N.t("lp:explanation.waterfall.byLp.remainingCarried"),format:"{0:n0}",width:140})),a}function g(n,t,e){var i={field:n,title:t,template:function(t){var e=t[n];return l.isNil(e)?"":kendo.toString(e,"n0")}};return e&&(i.width=e),c.NumberUI.column(i)}function T(t){return"hurdle"+t}function I(t){return"preferredRevenue"+t}function C(t){return"carriedPreferredRevenue"+t}function w(t){return"catchUp"+t}var n=function(){function t(){}return t.setup=function(t,r,o,e,n){kendo.destroy(t),t.empty();var i={remaining:!1,remainingCarried:!1,showClass:e},a=[],d={dataSource:{data:o.carriedCommitments.map(function(t){t.remaining&&(i.remaining=!0),t.remainingCarried&&(i.remainingCarried=!0);var e=t,n=0;return t.tranches.forEach(function(t){a[n]||(a[n]={title:p.I18N.t("lp:explanation.waterfall.byLp.trancheColumnGroup",{index:n+1}),subcolumns:{hurdle:!0,preferredRevenue:!0,carriedPreferredRevenue:!1,catchUp:!1}}),e[T(n)]=t.hurdle,e[I(n)]=t.preferredRevenue,e[C(n)]=t.carriedPreferredRevenue,e[w(n)]=t.catchUp,t.carriedPreferredRevenue&&(a[n].subcolumns.carriedPreferredRevenue=!0),t.catchUp&&(a[n].subcolumns.catchUp=!0),n++}),e}),schema:{model:{id:"id",fields:{date:{type:"date"}},investorName:function(){return v.ObservableUtils.get(this,"investor.name")||""}}},sort:{field:"id",dir:"asc"}},columns:h(o,i,a),pageable:u.GridUtils.defaultPageable(),scrollable:!0,sortable:{mode:"multiple",allowUnsort:!0,showIndexes:!0},groupable:!1,editable:!1};u.GridUtils.withDefaults(d),n.register("CarriedByLp",t,d),t.kendoGrid(d),t.on("click",function(t){var e=$(t.target),n=e.data("commitmentid");if(!l.isNil(n)){var i=e.data("index"),a=o.carriedCommitments.find(function(t){return t.id===n});a&&f.LpExplanationWaterfallDetailGrid.displayWithData(r,b.LpExplanationLabelType.NOTIONAL,a.investor.name,a.tranches[i].flows)}})},t}();e.CarriedByLpExplanationGrid=n}),define("lp/views/overview/summary/explanation/LpExplanationView",["require","exports","kendo","./LpExplanationAllocationGrid","./LpExplanationWaterfallGrid","./LpExplanationReserveGrid","./LpExplanationDistributionGrid","i18n","text!templates/lp/lp.explanation.html","core/ui/grid/MultiGridExcel","./CarriedByLpExplanationGrid"],function(t,e,i,p,m,f,b,v,a,y,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpExplanationView=void 0;var n=function(){function t(){}return t.display=function(d,t,l,s){if(i.destroy(d),d.empty(),t&&(t.explanation||t.carriedByLpExplanations)){var u=t.explanation,c=t.carriedByLpExplanations,e={init:function(t){var e=t.sender.element;v.I18N.localize(e);var n,i,a=e.find("#lpExplanationDetails"),r=new y.MultiGridExcel("explanation.xlsx");if(n=r,i={items:[{type:"button",text:"Export to Excel",icon:"excel",click:function(){return n.export()}}]},d.find("#lpExplanationToolbar").kendoToolBar(i),c){var o=d.find("#lpExplanationByLp");c.forEach(function(t){var e=$("<div>").addClass("lpExplanationCarriedByLpFloatingGrid").appendTo(o);$("<div>").addClass("clearer").appendTo(e),h.CarriedByLpExplanationGrid.setup(e,a,t,s,r)})}u&&(p.LpExplanationAllocationGrid.setup(e.find("#lpExplanationAllocations"),a,u,r),m.LpExplanationWaterfallGrid.setup(e.find("#lpExplanationWaterfall"),a,u,r),f.LpExplanationReserveGrid.setup(e.find("#lpExplanationReserves"),u,r),b.LpExplanationDistributionGrid.setup(e.find("#lpExplanationDistribution"),u,r,l))}},n=i.template(a)({});new i.View(n,e).render(d)}else $("<h3>").text("No explanation").appendTo(d)},t}();e.LpExplanationView=n}),define("lp/workflow/LpCapitalCallInvestorsSelectControl",["require","exports","i18n","object/repository/ObjectRepository","core/util/ObservableUtils","core/ui/grid/GridUtils","core/ui/PercentUI"],function(t,e,s,u,c,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LpCapitalCallInvestorsSelectControl=void 0;var m="k-i-grid-layout",n=function(){function l(){}return l.display=function(t,i,r){var e=t.find("#lpInvestorsMultiselect"),a=t.find("#lpInvestorsGrid");e.kendoMultiSelect({dataSource:{transport:{read:function(e){u.ObjectRepository.fetchInvestorsByFundIdentifiables(i).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})}},sort:{field:"name",dir:"asc"}},dataTextField:"name",dataValueField:"id",tagTemplate:function(t){return l.toMultiselectHtml(t.dataItems)},tagMode:"single",change:function(t){var e=t.sender.dataItems();l.setGridSelectedItems(a,e)}}),a.kendoGrid({dataSource:{transport:{read:function(n){u.ObjectRepository.fetchInvestorsByFundIdentifiables(i).then(function(t){n.success(t);var e=r.get("investors");l.setGridSelectedItems(a,e)}).catch(function(t){return n.error(t)})}},sort:{field:"name",dir:"asc"}},filterable:!0,height:700,scrollable:!0,resizable:!0,pageable:p.GridUtils.defaultPageable(),columns:[{selectable:!0},{field:"name",title:s.I18N.t("lp:capitalCall.investorName"),width:"90%"}],change:function(t){var i=t.sender,e=i.select(),a=[];e.each(function(t,e){var n=c.ObservableUtils.unpack(i.dataItem(e));a.push(n)}),r.set("investors",a)},dataBound:function(t){p.GridUtils.resizeGrid(t.sender)}});var n=a.data("kendoGrid"),o=t.find("#showFullList"),d=t.find("#showFullListContainer");d.attr("title",s.I18N.t("lp:capitalCall.tooltip.showInvestorsGrid")),o.click(function(t){r.get("seeFullInvestorsList")?(r.set("seeFullInvestorsList",!1),d.attr("title",s.I18N.t("lp:capitalCall.tooltip.showInvestorsGrid")),o.removeClass("k-i-close"),o.removeClass("k-i-x"),o.addClass(m)):(r.set("seeFullInvestorsList",!0),n.wrapper.height(700),n.resize(),d.attr("title",s.I18N.t("lp:capitalCall.tooltip.hideInvestorsGrid")),o.removeClass(m),o.addClass("k-i-close"),o.addClass("k-i-x")),t.preventDefault()})},l.toMultiselectHtml=function(t){for(var e='<ul unselectable="on" class="k-reset">',n=0,i=0,a=t;i<a.length;i++){if(n++,e=e+'<li class="k-button" unselectable="on"><span unselectable="on">'+a[i].name+"</span></li>",5<=n){e+='<li class="k-button" unselectable="on"><span unselectable="on">...</span></li>';break}}return e+="</ul>"},l.setGridSelectedItems=function(t,e){var n=t.data("kendoGrid"),i=n.dataSource.data(),a=[],r=n.element.find(".k-state-selected");e.forEach(function(t){var e=t.id;a.push(e)}),r.each(function(t,e){var n=$(e);n.removeClass("k-state-selected"),n.find("[data-role='checkbox']").prop("checked",!1)});for(var o=0;o<i.length;o++){var d=i[o],l=d.id;if(0<=a.indexOf(l)){var s=d.uid,u=n.element.find("[data-uid="+s+"]");$(u).addClass("k-state-selected"),$(u).find("[data-role='checkbox']").prop("checked",!0)}}},l}();e.LpCapitalCallInvestorsSelectControl=n}),define("lp/workflow/SplitGridForOperationForm",["require","exports","core/util/ObservableUtils","i18n","core/ui/grid/GridUtils","history/data/CapitalCallSplitType","core/api/FeeType","basic/ui/CurrencyUI","core/ui/grid/column/ColumnUtils","core/ui/grid/column/ColumnStyle","core/ui/grid/GridFooter","core/ui/NumberUI","object/ui/FundOperationUI","basic/data/Currencies","basic/repository/ForexRepository","history/data/DistributionSplitType"],function(t,e,y,h,g,T,I,C,w,k,E,D,S,i,N,x){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SplitGridForOperationForm=void 0;var R="#operationSplitGrid",a="k-i-zoom-in",r="k-i-zoom-out",_=kendo.guid(),O=".k-grid-"+_,U="amountInFundCurrency",A="amount";function F(t,e,n){n.get("seeSplit")?(n.set("seeSplit",!1),e.attr("title",h.I18N.t("lp:capitalCall.tooltip.showSplit")),t.removeClass(r),t.addClass(a)):(n.set("seeSplit",!0),e.attr("title",h.I18N.t("lp:capitalCall.tooltip.hideSplit")),t.removeClass(a),t.addClass(r))}var L=function(){function v(){}return v.getGridDataAsCapitalCallSplit=function(t){return t.find(R).data("kendoGrid").dataSource.data().toJSON()},v.getGridDataAsDistributionSplit=function(t){return t.find(R).data("kendoGrid").dataSource.data().toJSON()},v.validateSplitList=function(t){for(var e,n,i=[],a=0;a<t.length;a++){var r=t[a];r.amountInFundCurrency&&0!==r.amountInFundCurrency&&0!==r.amount||(e="history:capitalCallSplit.amount",n=a+1,i.push(""+h.I18N.t("history:capitalCallSplit.errors.notZeroFieldInRow",{field:h.I18N.t(e),row:n})))}return i},v.differentCurrenciesThanFund=function(t,e){return t.filter(function(t){return t.currency!==e}).length},v.getAmountInFundCurrencyColumnName=function(t){var e=h.I18N.t("history:capitalCallSplit.amount"),n=i.Currencies.get(t);return n&&(e=e+" ("+n.name+")"),e},v.setupCapitalCall=function(t,e,n,i,a){return v.setupCore(t,e,n,i,a,!0)},v.setupDistribution=function(t,e,n,i,a){return v.setupCore(t,e,n,i,a,!1)},v.setupCore=function(u,c,p,m,t,f){var e,n,i,a,r=0===this.differentCurrenciesThanFund(t,p),o={dataSource:function(t,e,n,i){var a={id:{type:"number"},vehicle:{type:"number",editable:!1,defaultValue:t},amountInFundCurrency:{type:"number"},amount:{type:"number"},currency:{type:"number",defaultValue:e},comment:{type:"string",nullable:!0},reference:{type:"string",nullable:!0},feeType:{type:"number",nullable:!0}};i?(a.capitalCallId={type:"number",editable:!1},a.type={type:"number",defaultValue:T.CapitalCallSplitType.INVESTMENT,validation:{required:!0}},a.investment={nullable:!0}):(a.distributionId={type:"number",editable:!1},a.type={type:"number",defaultValue:x.DistributionSplitType.DIVIDEND,validation:{required:!0}},a.disinvestment={nullable:!0});var r=null;return null==(r=i?{id:"id",fields:a,investmentName:function(){return y.ObservableUtils.get(this,"investment.name")||""}}:{id:"id",fields:a,disinvestmentName:function(){return y.ObservableUtils.get(this,"investment.name")||""}})?null:{data:n,schema:{model:kendo.data.Model.define(r)},aggregate:[{field:"amountInFundCurrency",aggregate:"sum"}],sort:{field:"date",dir:"desc"}}}(c,p,t,f),columns:(e=f,n=r,i=p,a=[w.ColumnUtils.addStyle({command:["destroy"],width:90,footerTemplate:h.I18N.t("history:capitalCallSplit.footerTemplate.totalAmount")},k.ColumnStyle.CENTER_ALIGNED),D.NumberUI.column({field:"amountInFundCurrency",title:L.getAmountInFundCurrencyColumnName(i),width:200,footerTemplate:E.GridFooter.footer("amountInFundCurrency","sum","{0:n2}")}),D.NumberUI.column({field:"amount",title:h.I18N.t("history:capitalCallSplit.amount"),width:200,hidden:n}),C.CurrencyUI.column({field:"currency",title:h.I18N.t("history:capitalCallSplit.currency"),width:100})],a=(a=e?a.concat([T.CapitalCallSplitType.column({field:"type",title:h.I18N.t("history:capitalCallSplit.type"),width:200})]):a.concat([x.DistributionSplitType.column({field:"type",title:h.I18N.t("history:capitalCallSplit.type"),width:200})])).concat([{field:"reference",title:h.I18N.t("history:capitalCallSplit.reference"),width:140},I.FeeType.column({field:"feeType",title:h.I18N.t("history:capitalCallSplit.feeType"),width:120})]),a=(a=e?a.concat([S.FundOperationUI.column({field:"investment",title:h.I18N.t("history:capitalCallSplit.investment"),width:140})]):a.concat([S.FundOperationUI.column({field:"disinvestment",title:h.I18N.t("history:capitalCallSplit.investment"),width:140})])).concat([{field:"comment",title:h.I18N.t("history:capitalCallSplit.comment"),width:300}])),pageable:{numeric:!1,previousNext:!1,messages:{display:""},refresh:!1},scrollable:!1,editable:!0,toolbar:[{name:"create"},{name:_,text:h.I18N.t("history:capitalCallSplit.complete"),iconClass:"k-icon k-i-plus-circle"},{name:"excel"}],save:function(e){if(e.model&&e.values){var t=e.model.get("currency");e.values.currency&&e.values.currency!==t&&(e.values.currency!==p?(N.ForexRepository.fetchCompute(e.model.get(U),p,e.values.currency).then(function(t){e.model&&t&&(e.model.set(A,t),e.sender.dataSource.sync())}),e.sender.showColumn("amount")):(v.differentCurrenciesThanFund(e.sender.dataSource.data().toJSON(),p)<=1?e.sender.hideColumn("amount"):e.sender.showColumn("amount"),e.model.set(A,e.model.get(U)))),e.values.amountInFundCurrency&&e.values.amountInFundCurrency!==e.model.get(U)&&N.ForexRepository.fetchCompute(e.values.amountInFundCurrency,p,t).then(function(t){e.model&&t&&(e.model.set(A,t),e.sender.dataSource.sync())}),e.values.amount&&e.values.amount!==e.model.get(A)&&N.ForexRepository.fetchCompute(e.values.amount,t,p).then(function(t){e.model&&t&&(e.model.set(U,t),e.sender.dataSource.sync())}),e.sender.dataSource.sync()}}};g.GridUtils.withDefaults(o);var d=u.find(R);kendo.destroy(d),d.empty(),d.kendoGrid(o);var b=d.data("kendoGrid");u.find(O).click(function(t){for(var e=u.find(R).data("kendoGrid"),n=e.items(),i=0,a=0;a<n.length;a++){var r=$(n[a]),o=e.dataItem(r).toJSON();i+=o.amountInFundCurrency?o.amountInFundCurrency:0}var d,l=m.get("amount"),s=b.dataSource;f?0<(d={id:0,vehicle:c,amount:l-i,amountInFundCurrency:l-i,currency:p,comment:null,reference:null,feeType:null,capitalCallId:0,type:T.CapitalCallSplitType.OTHER,investment:null}).amount&&s.add(d):0<(d={id:0,vehicle:c,amount:l-i,amountInFundCurrency:l-i,currency:p,comment:null,reference:null,feeType:null,distributionId:0,type:x.DistributionSplitType.OTHER,disinvestment:null}).amount&&s.add(d);t.preventDefault()});var l=u.find("#showSplit"),s=u.find("#showSplitContainer");return s.attr("title",h.I18N.t("lp:capitalCall.tooltip.showSplit")),m.get("seeSplit")&&(m.set("seeSplit",!1),F(l,s,m)),l.click(function(t){F(l,s,m),t.preventDefault()}),b},v}();e.SplitGridForOperationForm=L}),define("workflow/data/WorkflowFileTarget",["require","exports"],function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.WorkflowFileTarget=void 0,(n=e.WorkflowFileTarget||(e.WorkflowFileTarget={}))[n.INVESTMENT_REVALUATION=1]="INVESTMENT_REVALUATION",n[n.WORKFLOW_DATA=2]="WORKFLOW_DATA"}),define("workflow/web/WorkflowMap",["require","exports","core/web/WebLocation"],function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkflowMap=void 0;var n=function(){function t(){}return t.downloadByIdUrl=function(t){return a.WebLocation.resolve("workflow/download?"+$.param({workflowId:t.id}))},t.downloadLatestByKeysUrl=function(t,e){var n=new Set;t.forEach(function(t){n.add(t.key)});var i={workflowCategory:e,workflowKeys:Array.from(n)};return a.WebLocation.resolve("workflow/download?"+$.param(i))},t}();e.WorkflowMap=n}),define("workflow/utils/WorkflowUtils",["require","exports","core/ui/DateUI","i18n","object/ui/AssetUI","core/api/CapitalCallReason","core/api/CapitalCallMethodology","core/ui/grid/GridUtils","core/ui/NumberUI","object/ui/EntityInvestorUI","core/data/DObservableBuilder","workflow/repository/WorkflowRepository","core/ui/Notifications","core/ui/grid/column/ColumnUtils","core/ui/grid/column/ColumnStyle","core/ui/PercentUI","risk/data/RiskValidationStatus","lp/views/overview/summary/explanation/LpExplanationView","lp/workflow/LpCapitalCallInvestorsSelectControl","basic/ui/CurrencyUI","history/data/CapitalCallSplitType","core/api/FeeType","object/ui/FundOperationUI","lp/workflow/SplitGridForOperationForm","excel/web/ExcelMap","workflow/data/WorkflowFileTarget","workflow/web/WorkflowMap","history/data/DistributionSplitType","object/ui/SellSideUI"],function(t,e,d,l,s,u,c,p,o,a,r,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R){"use strict";function _(t){var e=t.amount;return c.CapitalCallMethodology.isInPercent(t.capitalCallMethodology)?kendo.format("{0:p}",e):kendo.format("{0:n}",e)}Object.defineProperty(e,"__esModule",{value:!0}),e.WorkflowUtils=void 0;var n=function(){function t(){}return t.createActiveColumn=function(){var t={field:"active",title:l.I18N.t("workflow:definitions.state.active"),template:function(t){return!0!==t.active?"<span class='k-icon k-i-close-circle' style='color:red'></span>":"<span class='k-icon k-i-check-circle' style='color:green'></span>"},width:100};return b.ColumnUtils.addStyle(t,v.ColumnStyle.CENTER_ALIGNED)},t.setupToolbarActions=function(t,e,n,i){return r.DObservableBuilder.of(e).add("isSelected",function(){return 1===t.length}).add("downloadEnabled",function(){return 0<t.length}).add("downloadBpmnFile",function(){return 1===t.length?N.WorkflowMap.downloadByIdUrl(t[0]):1<t.length?N.WorkflowMap.downloadLatestByKeysUrl(t,n):"javascript:void(0)"}).add("isSuspended",function(){if(1===t.length)return!t[0].active}).add("isActivate",function(){if(1===t.length)return t[0].active}).add("activateWorkflow",function(){1===t.length&&m.WorkflowRepository.activateWorkflow(t[0].key,t[0].category).then(function(){i&&i.dataSource.read().done(function(){f.Notifications.showSuccess("Activate")})})}).add("suspendWorkflow",function(){1===t.length&&m.WorkflowRepository.suspendWorkflow(t[0].key,t[0].category).then(function(){i&&i.dataSource.read().done(function(){f.Notifications.showSuccess("Suspend")})})}).build()},t.displayCapitalCallTaskForm=function(t,e){this.displayCapitalCall(t,e),0<e.splitList.length&&this.displayCapitalCallSplits(t,e.vehicleCurrencyId,e.splitList)},t.displayDistributionTaskForm=function(t,e){this.displayDistribution(t,e),0<e.splitList.length&&this.displayDistributionSplits(t,e.vehicleCurrencyId,e.splitList)},t.displayDistribution=function(t,e){$("<h4>").text(l.I18N.t("lp:production.distribution")).appendTo(t);var n=$("<div>").addClass("floatingGrid").appendTo(t);$("<div>").addClass("clearer").appendTo(t);var i={dataSource:{data:[e]},editable:!1,groupable:!1,filterable:!1,sortable:!1,pageable:p.GridUtils.defaultPageable(),scrollable:!1,reorderable:!1,resizable:!1,columnMenu:!1,columns:[{field:"comments",title:l.I18N.t("lp:distribution.name")},d.DateUI.column({field:"date",title:l.I18N.t("lp:distribution.date")}),d.DateUI.column({field:"calculationDate",title:l.I18N.t("lp:distribution.calculationDate")}),o.NumberUI.column({field:"amount",title:l.I18N.t("lp:distribution.amount")}),o.NumberUI.column({field:"recallable",title:l.I18N.t("lp:distribution.recallable")}),o.NumberUI.column({field:"redemption",title:l.I18N.t("lp:distribution.redemption")}),{field:"investors",title:l.I18N.t("data:fields.investors"),template:function(t){return T.LpCapitalCallInvestorsSelectControl.toMultiselectHtml(t.investors)}}]};p.GridUtils.withDefaults(i),n.kendoGrid(i)},t.displayCommitment=function(t,e){$("<h4>").text(l.I18N.t("lp:production.commitment")).appendTo(t);var n=$("<div>").addClass("floatingGrid").appendTo(t);$("<div>").addClass("clearer").appendTo(t);var i={dataSource:{data:[e]},editable:!1,groupable:!1,filterable:!1,sortable:!1,pageable:p.GridUtils.defaultPageable(),scrollable:!1,reorderable:!1,resizable:!1,columnMenu:!1,columns:[d.DateUI.column({field:"date",title:l.I18N.t("lp:commitment.date")}),o.NumberUI.column({field:"amount",title:l.I18N.t("lp:commitment.amount")}),o.NumberUI.column({field:"quantity",title:l.I18N.t("lp:commitment.quantity")}),s.AssetUI.FundShare.column({field:"fundShare",title:l.I18N.t("lp:commitment.share")}),R.SellSideUI.column({field:"agent",title:l.I18N.t("history:subscriptions.agent")}),d.DateUI.column({field:"closingDate",title:l.I18N.t("lp:commitment.closingDate")}),a.EntityInvestorUI.column({field:"investorEntity",title:l.I18N.t("lp:commitment.investorEntity")}),o.NumberUI.column({field:"fee",title:l.I18N.t("lp:commitment.fee")}),o.NumberUI.column({field:"unavailabilityInYears",title:l.I18N.t("lp:commitment.unavailabilityInYears")}),{field:"reference",title:l.I18N.t("lp:commitment.reference")},{field:"comments",title:l.I18N.t("lp:commitment.comments")}]};p.GridUtils.withDefaults(i),n.kendoGrid(i)},t.displayCompanySubscription=function(t,e){$("<h4>").text(l.I18N.t("lp:production.companySubscription")).appendTo(t);var n=$("<div>").addClass("floatingGrid").appendTo(t);$("<div>").addClass("clearer").appendTo(t);var i={dataSource:{data:e},editable:!1,groupable:!1,filterable:!1,sortable:!1,pageable:p.GridUtils.defaultPageable(),scrollable:!1,reorderable:!1,resizable:!1,columnMenu:!1,columns:[d.DateUI.column({field:"date",title:l.I18N.t("lp:companySubscription.date")}),o.NumberUI.column({field:"amount",title:l.I18N.t("lp:companySubscription.amount")}),o.NumberUI.column({field:"quantity",title:l.I18N.t("lp:companySubscription.quantity")}),s.AssetUI.CompanyShare.column({field:"companyShare",title:l.I18N.t("lp:companySubscription.companyShare")}),a.EntityInvestorUI.column({field:"investorEntity",title:l.I18N.t("lp:companySubscription.investorEntity")}),a.EntityInvestorUI.column({field:"seller",title:l.I18N.t("lp:companySubscription.seller")}),{field:"comments",title:l.I18N.t("lp:companySubscription.comments")}]};p.GridUtils.withDefaults(i),n.kendoGrid(i)},t.displayDebtSubscription=function(t,e){$("<h4>").text(l.I18N.t("lp:production.debtSubscription")).appendTo(t);var n=$("<div>").addClass("floatingGrid").appendTo(t);$("<div>").addClass("clearer").appendTo(t);var i={dataSource:{data:e},editable:!1,groupable:!1,filterable:!1,sortable:!1,pageable:p.GridUtils.defaultPageable(),scrollable:!1,reorderable:!1,resizable:!1,columnMenu:!1,columns:[d.DateUI.column({field:"date",title:l.I18N.t("lp:debtSubscription.date")}),s.AssetUI.Debt.column({field:"debt",title:l.I18N.t("lp:debtSubscription.debt")}),o.NumberUI.column({field:"amount",title:l.I18N.t("lp:debtSubscription.amount")}),o.NumberUI.column({field:"nominal",title:l.I18N.t("lp:debtSubscription.nominal")}),o.NumberUI.column({field:"accrued",title:l.I18N.t("lp:debtSubscription.accrued")}),a.EntityInvestorUI.column({field:"investorEntity",title:l.I18N.t("lp:debtSubscription.investorEntity")}),a.EntityInvestorUI.column({field:"seller",title:l.I18N.t("lp:debtSubscription.seller")}),{field:"comments",title:l.I18N.t("lp:debtSubscription.comments")}]};p.GridUtils.withDefaults(i),n.kendoGrid(i)},t.displayRiskValidation=function(t,e){var n=e.filter(function(t){return 0<t.status});if(!(n.length<=0)){$("<h4>").text(l.I18N.t("flow:flows.riskValidation")).appendTo(t);var i=$("<div>").addClass("floatingGrid").appendTo(t);$("<div>").addClass("clearer").appendTo(t);var a={dataSource:{data:n},editable:!1,groupable:!1,filterable:!1,sortable:!1,pageable:p.GridUtils.defaultPageable(),scrollable:!1,reorderable:!1,resizable:!1,columnMenu:!1,columns:[{field:"name",title:l.I18N.t("risk:workflow.indicator")},{field:"rule",title:l.I18N.t("risk:workflow.rule")},h.RiskValidationStatus.column({field:"status",title:l.I18N.t("risk:workflow.status")}),{field:"comments",title:l.I18N.t("risk:workflow.comments")}],toolbar:[{name:"excel"}]};p.GridUtils.withDefaults(a),i.kendoGrid(a)}},t.displayValidatedShareDistributions=function(t,e){if(e.distributionSharesExplanation||e.distributionLpExplanations){$("<h4>").text(l.I18N.t("lp:distributionValidation:dataTitle")).appendTo(t);var n=$("<div>").addClass("floatingGrid").appendTo(t);$("<div>").addClass("clearer").appendTo(t);var i={explanation:e.distributionSharesExplanation?e.distributionSharesExplanation:void 0,carriedByLpExplanations:e.distributionLpExplanations?e.distributionLpExplanations:void 0},a={initialDistributions:e.initialDistributions,modifiedDistributions:e.modifiedDistributions,editable:!1,distribChanged:null};g.LpExplanationView.display(n,i,a,!0)}},t.displayWorkflowFileData=function(t,e,n){if(e.fileName){var i=$("<h4>").text(l.I18N.t("workflow:task.fileUpload.title")+":  ").appendTo(t);if($("<a>").text(e.fileName).attr("href",D.ExcelMap.workflowFileDownloadUrl(n,S.WorkflowFileTarget.WORKFLOW_DATA)).appendTo(i),e.spreadSheetData.sheets){var a=$("<div>").addClass("floatingGrid").appendTo(t);a.addClass("excelSpreadsheet"),$("<div>").addClass("clearer").appendTo(t);var r={sheets:e.spreadSheetData.sheets,toolbar:!1};a.kendoSpreadsheet(r).data("kendoSpreadsheet").one("render",function(t){t.sender.sheets().forEach(function(t){t.range(0,0,t._rows._count,t._columns._count).enable(!1)})})}e.isPdf&&$("<object>").attr("type","application/pdf").attr("data",D.ExcelMap.workflowFileInlineDownloadUrl(n,S.WorkflowFileTarget.WORKFLOW_DATA)).attr("width",800).attr("height",600).appendTo(t)}},t.displayCapitalCall=function(t,e){$("<h4>").text(l.I18N.t("lp:production.capitalCall")).appendTo(t);var n=$("<div>").addClass("floatingGrid").appendTo(t);$("<div>").addClass("clearer").appendTo(t);var i=l.I18N.t("lp:capitalCall.noAmountPercent");c.CapitalCallMethodology.isInPercent(e.capitalCallMethodology)&&(i=l.I18N.t("lp:capitalCall.amount"));var a,r,o={dataSource:{data:[e]},editable:!1,groupable:!1,filterable:!1,sortable:!1,pageable:p.GridUtils.defaultPageable(),scrollable:!1,reorderable:!1,resizable:!1,columnMenu:!1,columns:[{field:"comments",title:l.I18N.t("lp:capitalCall.name")},d.DateUI.column({field:"date",title:l.I18N.t("lp:capitalCall.date")}),(a={field:"amount",title:i},r=_,a.field&&(a.template=function(t){return r(t)},a.groupable=!1,a.sortable=!1,a.filterable=!1,b.ColumnUtils.addStyle(a,v.ColumnStyle.RIGHT_ALIGNED)),a),{field:"navForCapitalCall",title:l.I18N.t("lp:capitalCall.navForCapitalCall"),hidden:null===e.navForCapitalCall},y.PercentUI.column({field:"premium",title:l.I18N.t("lp:capitalCall.premium")}),d.DateUI.column({field:"closingDate",title:l.I18N.t("lp:capitalCall.closingDate")}),s.AssetUI.FundShare.column({field:"fundShare",title:l.I18N.t("lp:capitalCall.share")}),u.CapitalCallReason.column({field:"reason",title:l.I18N.t("lp:capitalCall.reason")}),c.CapitalCallMethodology.column({field:"capitalCallMethodology",title:l.I18N.t("lp:capitalCall.capitalCallMethodology")}),{field:"investors",title:l.I18N.t("data:fields.investors"),template:function(t){return T.LpCapitalCallInvestorsSelectControl.toMultiselectHtml(t.investors)}}]};p.GridUtils.withDefaults(o),n.kendoGrid(o)},t.displayCapitalCallSplits=function(t,e,n){$("<h4>").text(l.I18N.t("lp:production.capitalCallSplits")).appendTo(t);var i=$("<div>").addClass("floatingGrid").appendTo(t);$("<div>").addClass("clearer").appendTo(t);var a=0===E.SplitGridForOperationForm.differentCurrenciesThanFund(n,e),r={dataSource:{data:n},editable:!1,groupable:!1,filterable:!1,sortable:!1,pageable:p.GridUtils.defaultPageable(),scrollable:!1,reorderable:!1,resizable:!1,columnMenu:!1,columns:[o.NumberUI.column({field:"amountInFundCurrency",title:E.SplitGridForOperationForm.getAmountInFundCurrencyColumnName(e),width:200}),o.NumberUI.column({field:"amount",title:l.I18N.t("history:capitalCallSplit.amount"),width:200,hidden:a}),I.CurrencyUI.column({field:"currency",title:l.I18N.t("history:capitalCallSplit.currency"),width:100}),C.CapitalCallSplitType.column({field:"type",title:l.I18N.t("history:capitalCallSplit.type"),width:200}),{field:"reference",title:l.I18N.t("history:capitalCallSplit.reference"),width:140},w.FeeType.column({field:"feeType",title:l.I18N.t("history:capitalCallSplit.feeType"),width:120}),k.FundOperationUI.column({field:"investment",title:l.I18N.t("history:capitalCallSplit.investment"),width:140}),{field:"comment",title:l.I18N.t("history:capitalCallSplit.comment"),width:300}]};p.GridUtils.withDefaults(r),i.kendoGrid(r)},t.displayDistributionSplits=function(t,e,n){$("<h4>").text(l.I18N.t("lp:production.distributionSplits")).appendTo(t);var i=$("<div>").addClass("floatingGrid").appendTo(t);$("<div>").addClass("clearer").appendTo(t);var a=0===E.SplitGridForOperationForm.differentCurrenciesThanFund(n,e),r={dataSource:{data:n},editable:!1,groupable:!1,filterable:!1,sortable:!1,pageable:p.GridUtils.defaultPageable(),scrollable:!1,reorderable:!1,resizable:!1,columnMenu:!1,columns:[o.NumberUI.column({field:"amountInFundCurrency",title:E.SplitGridForOperationForm.getAmountInFundCurrencyColumnName(e),width:200}),o.NumberUI.column({field:"amount",title:l.I18N.t("history:capitalCallSplit.amount"),width:200,hidden:a}),I.CurrencyUI.column({field:"currency",title:l.I18N.t("history:capitalCallSplit.currency"),width:100}),x.DistributionSplitType.column({field:"type",title:l.I18N.t("history:capitalCallSplit.type"),width:200}),{field:"reference",title:l.I18N.t("history:capitalCallSplit.reference"),width:140},w.FeeType.column({field:"feeType",title:l.I18N.t("history:capitalCallSplit.feeType"),width:120}),k.FundOperationUI.column({field:"disinvestment",title:l.I18N.t("history:capitalCallSplit.investment"),width:140}),k.FundOperationUI.column({field:"investment",title:l.I18N.t("history:capitalCallSplit.investment"),width:140}),{field:"comment",title:l.I18N.t("history:capitalCallSplit.comment"),width:300}]};p.GridUtils.withDefaults(r),i.kendoGrid(r)},t}();e.WorkflowUtils=n}),function(){define("views/flow/flows/flows.deal.workflow",["jquery","lodash","i18n","kendo","site","ui","views/workflow/diagram","workflow/form/WorkflowTaskFormKeys","risk/workflow/RiskValidationTaskFormKey","lp/workflow/LpCompanySubscriptionTaskFormKey","core/ui/DateUI","core/ui/NumberUI","object/ui/AssetUI","object/ui/EntityInvestorUI","workflow/utils/WorkflowUtils"],function(n,t,i,e,a,r,o,d,l,s,u,c,p,m,f){var b,v,y,h,g,T,I,C,w,k,E,D,S;return y=a.router,v=a.map,g=d.WorkflowTaskFormKeys,h=l.RiskValidationTaskFormKey,b=s.LpCompanySubscriptionTaskFormKey,g.register(new h),g.register(new b),r.grid,u.DateUI,c.NumberUI,p.AssetUI,m.EntityInvestorUI,T=f.WorkflowUtils,C=function(t){var e;return e={loaded:function(){return n.getJSON("flows/workflow/data.json",{id:t.model.currentworkflow}).done(w),null}},{diagram:o.create("#flowDealFlowDiagram",e)}},D=function(t,e){var n,i;return n=null!=e?e.workflow:void 0,i={},e&&e.name&&(i.exportName=e.name),t.flowWorkflowContext.diagram.displayInstanceWithTasks(i,n)},k=function(t){var e;return(e=t.model.get("currentFlowId"))&&y.navigate(v.getDealFlowDocumentEdit(e)),!0},S=function(t){var e;return e={items:[{type:"button",text:i.t("flow:documents.documents"),click:k.bind(null,t)}]},n("#flowWorkflowToolbar").kendoToolBar(e),null},w=function(t){var e;return e=n("#transactionWorkflowData"),kendo.destroy(e),e.empty(),t.companySubscription&&T.displayCompanySubscription(e,t.companySubscription),t.riskValidation&&t.riskValidation.indicators&&T.displayRiskValidation(e,t.riskValidation.indicators),null},E=function(t,e){var n;return(n=t.data.context).model.set("currentFlowName",(null!=e?e.name:void 0)||""),n.model.set("currentFlowId",(null!=e?e.id:void 0)||0),n.model.set("currentFlowForm",(null!=e?e.formKey:void 0)||""),n.model.set("currentworkflow",(null!=e?e.workflow:void 0)||""),D(n,e)},I=function(t){var e;return e={context:t},n("body").on("domos:flow:selected",e,E)},{updateRawModel:function(t,e){return e.currentFlowName="",e.currentFlowId=0,e.currentFlowForm="",null},init:function(t){var e;return e=C(t),t.flowWorkflowContext=e,S(t),I(t),null}}})}.call(this),function(){define("views/flow/flows/flows.tasks",["jquery","lodash","i18n","kendo","ui","core/ui/DateUI","core/ui/IntegerUI"],function(r,i,o,t,e,n,a){var d,l,s,u,c,p,m,f,b,v,y,h,g,T,I;return d=n.DateUI,l=a.IntegerUI,s=e.grid,function(){return{grid:null,flowId:null}},T=function(t){var e,n,i;return i=null,(e=t.flowTaskContext.grid)&&0<(n=e.select()).length&&(i=e.dataItem(n[0])),y(i)},v=function(t){return setTimeout(T.bind(null,t))},f=function(t,e){return T(t)},h=function(t,e){var n,i;return n={},(i=t.flowTaskContext).flowId&&(n.flow=i.flowId),r.getJSON("flow/task/list.json",n).done(e.success).fail(e.error),null},c=function(t){var e,n,i,a;return n=t.flowTaskContext,a={dataSource:{transport:{read:h.bind(null,t)},schema:{model:{id:"id",fields:{name:{type:"string"},priority:{type:"number"},flowName:{type:"string"},dueDate:{type:"date"}}}},requestEnd:v.bind(null,t)},groupable:!1,editable:!1,change:f.bind(null,t),columns:[{field:"name",title:o.t("flow:tasks.name")},{field:"flowName",title:o.t("flow:tasks.flowName")},d.column({field:"dueDate",title:o.t("flow:tasks.dueDate")}),l.column({field:"priority",title:o.t("flow:tasks.priority")})],pageable:s.defaultPageable(),scrollable:!0,height:850},s.withDefaults(a),(e=r("#flowTaskGrid")).kendoGrid(a),i=e.data("kendoGrid"),n.grid=i,null},g=function(t){var e,n;return null!=(e=t.flowTaskContext.grid)&&null!=(n=e.dataSource)?n.read():void 0},I=function(t,e){return t.flowTaskContext.flowId=null!=e?e.id:void 0,g(t)},b=function(t,e){var n;if(e&&e.data)return(n=e.data).id,n.instance,"started"===e.type?g(t):"completed"===e.type&&g(t),null},m=function(t,e){var n;if(n=t.data.context,e)return i.isArray(e)?i.each(e,b.bind(null,n)):b(n,e),null},y=function(t){return r("body").trigger("domos:flow:task:selected",t)},p=function(t,e){var n;return n=t.data.context,I(n,e),null},u=function(t){var e;return e={context:t},r("body").on("domos:flow:selected",e,p),r("body").on("domosws:workflow:tasks",e,m),null},{updateRawModel:function(t,e){return null},init:function(t){var e;return e={grid:null,flowId:null},t.flowTaskContext=e,c(t),u(t),null}}})}.call(this),function(){define("views/flow/flows/flows.task.form",["jquery","lodash","i18n","kendo","site","core/web/WebLocation","views/workflow/task/diagram.task"],function(r,t,i,a,e,n,o){var d,l,s,u,c,p,m,f,b;return l=e.router,d=e.map,s=n.WebLocation,c=function(t,e,n){var i;return i={task:e,properties:JSON.stringify(n)},r.post(s.resolve("workflow/task/complete.json"),i),null},f=function(t,e){var n,i,a;return(i=t.model).set("currentTaskFlowName",(null!=e?e.flowName:void 0)||""),i.set("currentTaskName",(null!=e?e.name:void 0)||""),(n=r("#flowTaskForm")).empty(),a={complete:c.bind(null,t)},o.setupForm(n,a,e)},p=function(t){var e;return(e=null!=t?t.flowId:void 0)&&l.navigate(d.getDealFlowDocumentEdit(e)),!0},b=function(t){var e,n;return e=r("#flowTaskToolbar"),a.destroy(e),e.empty(),n={items:[{type:"button",text:i.t("flow:documents.documents"),click:p.bind(null,t)}]},e.kendoToolBar(n),null},m=function(t,e){var n;return n=t.data.context,b(e),f(n,e)},u=function(t){var e;return e={context:t},r("body").on("domos:flow:task:selected",e,m)},{updateRawModel:function(t,e){return e.currentTaskFlowName="",e.currentTaskName="",null},init:function(t){return u(t),null}}})}.call(this),function(){define("views/flow/flow.flows",["views/flow/flows/flows.tab.strip","views/flow/flows/flows.overview","views/flow/flows/flows.deal.flows","views/flow/flows/flows.deal.workflow","views/flow/flows/flows.tasks","views/flow/flows/flows.task.form"],function(t,e,n,i,a,r){var o;return o=[t,e,n,i,a,r],{updateRawModel:function(t,e){var n,i;for(n=0,i=o.length;n<i;n++)o[n].updateRawModel(t,e);return null},init:function(t){var e,n;for(e=0,n=o.length;e<n;e++)o[e].init(t);return null}}})}.call(this),define("text!templates/workflow/workflow.grid.toolbar.html",[],function(){return'<div>\n    <a class="k-button" data-bind="click: activateWorkflow, enabled:isSuspended">\n        <span class="k-icon k-i-check"></span>\n        #=$.t("workflow:tasks.actions.activateWorkflow")#\n    </a>\n    <a class="k-button" data-bind="click: suspendWorkflow, enabled: isActivate">\n        <span class="k-icon k-i-close"></span>\n        #=$.t("workflow:tasks.actions.suspendWorkflow")#\n    </a>\n    <a id="workflowDownloadId" class="k-button" data-bind="attr: {href: downloadBpmnFile }, enabled: downloadEnabled">\n        <span class="k-icon k-i-download"></span>\n        #=$.t("download:actions.download", param)#\n    </a>\n\t<a class="k-button" data-bind="click: exportAsExcel, enabled: hasData">\n        <span class="k-icon k-i-excel"></span>\n        #=$.t("workflow:tasks.actions.exportAsExcel")#\n    </a>\n</div>\n'}),function(){var U,A,F=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};U="#flowWorkflowGrid",A="#flowWorkflowUpload",define("views/flow/flow.workflows",["jquery","lodash","i18n","kendo","ui","core/ui/UploadUtils","views/workflow/diagram","core/api/WorkflowCategory","core/ui/IntegerUI","workflow/utils/WorkflowUtils","text!templates/workflow/workflow.grid.toolbar.html"],function(l,s,u,e,t,n,i,a,r,o,c){var d,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O;return b=n.UploadUtils,m=r.IntegerUI,f=t.grid,v=a.WorkflowCategory,d=[v.DEAL_FLOW,v.FUND_FLOW],y=o.WorkflowUtils,T=function(){return{diagram:i.create("#flowWorkflowDiagram"),grid:null,upload:null}},h=function(t){var e,n;return null!=(e=(n=t.workflowContext).upload)&&e.destroy(),n.upload=null,l(A).empty(),null},N=function(t){return l(A).parents(".k-upload").find("ul.k-upload-files").remove(),!0},_=function(t){var e,n,i;return i=t.workflowContext,h(t),n={async:{saveUrl:"workflow/upload.json",saveField:"file"},complete:N.bind(null,t)},b.withDefaults(n),(e=l(A)).kendoUpload(n),i.upload=e.data("kendoUpload"),null},R=function(t,e){return e&&e.active?t.workflowContext.diagram.displayDefinition(e):t.workflowContext.diagram.clean()},x=function(t){var e,n;return e={category:d},n="workflow/list.json?"+l.param(e),l.getJSON(n).done(t.success).fail(t.error),null},E=function(t,e){var n,i;if(e&&e.data)return i=(n=e.data).category,0<=F.call(d,i)&&("create"===e.type?t.pushCreate(n):"destroy"===e.type&&t.pushDestroy(n)),null},D=function(t,e,n){if(n)return s.isArray(n)?s.each(n,E.bind(null,t)):E(t,n),null},w=function(t){return l("body").on("domosws:workflow:definitions",D.bind(null,t)),!0},p=null,I=function(){var t;return t={transport:{read:x,push:w},schema:{model:{id:"id",fields:{key:{type:"string"},name:{type:"string"},category:{type:"number"},version:{type:"number"}}}},sort:[{field:"name",dir:"asc"},{field:"version",dir:"desc"}]},new e.data.DataSource(t)},C=function(){return null==p&&(p=I()),p},g=function(t){var e,n;return null!=(e=(n=t.workflowContext).grid)&&e.destroy(),n.grid=null,l(U).empty(),null},k=function(t,e){return R(t,e)},S=function(t,e,n,i){var a;return a=f.getSelectedRows(i.sender),y.setupToolbarActions(a,e,i.sender).bind(n),k(t,a),null},O=function(n){var i,t,a,e,r,o,d;return i=l(U),d=n.workflowContext,g(n),a=new kendo.data.ObservableObject,r=kendo.template(c),o={param:{fileType:"bpmn"}},e={dataSource:C(),editable:!1,columns:[{field:"name",title:u.t("workflow:definitions.name")},v.column({field:"category",title:u.t("workflow:definitions.category")}),{field:"key",title:u.t("workflow:definitions.key")},m.column({field:"version",title:u.t("workflow:definitions.version")}),y.createActiveColumn()],pageable:f.defaultPageable(),scrollable:!0,height:400,change:S.bind(null,n,a,i),dataBound:function(t){var e;return e=f.getSelectedRows(t.sender),y.setupToolbarActions(e,a,t.sender).bind(i),k(n,e)}},f.withDefaults(e),e.toolbar=function(){return r(o)},i.kendoGrid(e),t=i.data("kendoGrid"),d.grid=t,a.hasData=function(){return!s.isEmpty(t.dataSource.data())},a.exportAsExcel=function(){return t.saveAsExcel()},null},{updateRawModel:function(t,e){},init:function(t){var e;return e=T(),t.workflowContext=e,O(t),_(t),null}}})}.call(this),function(){var t;t="flowPipeManagementToolbar",define("views/flow/flow.pipes",["jquery","lodash","i18n","kendo","site","ui","core/ui/PercentUI"],function(r,i,o,d,n,t,e){var a,l,s,u,c,p,m,f,b,v,y;return s=e.PercentUI,l=t.grid,f=function(t,e){var n,i;if(e&&e.data)return n=e.data,"create"===(i=e.type)?t.pushCreate(n):"update"===i?t.pushUpdate(n):"destroy"===i&&t.pushDestroy(n),null},m=function(t,e){var n;if(e)return n=t.data.options,i.isArray(e)?i.each(e,f.bind(null,n)):f(n,e),null},b=function(t){var e;return e={options:t},r("body").on("domosws:flow:pipe",e,m),null},a=null,u=function(){var t;return t={transport:{read:{url:"flow/pipe/list.json",dataType:"json"},push:b},schema:{model:{id:"id",fields:{id:{type:"number"},stringId:{type:"string"},name:{type:"string"},defaultFactor:{type:"number"}}}},sort:{field:"name",dir:"asc"}},new d.data.DataSource(t)},c=function(){return null==a&&(a=u()),a},y=function(t){return n.router.navigate(n.map.getDealFlowPipeManagerEdit()),null},p=function(t){var e;return(e=null!=t?t.id:void 0)?n.router.navigate(n.map.getDealFlowPipeManagerEdit(e)):n.router.navigate(n.map.notfound)},v=function(){var t,e,n,i,a;return t=r("#flowPipeManagementGrid"),d.destroy(t),t.empty(),a=d.template("<ul id='flowPipeManagementToolbar' class='gridToolbarMenu d-sprite-wrapper' data-role='menu'> <li> <a href='javascript:void(0)' class='k-link' data-key='create'> <span class='k-sprite d-new'></span> <span data-i18n='flow:pipes.actions.create'></span> </a> </li> </ul>"),i=a({}),e={dataSource:c(),editable:!1,columns:[{command:[l.customCommand(o.t("flow:pipes.actions.view"),p)],title:" "},{field:"name",title:o.t("flow:pipes.fields.name")},{field:"stringId",title:o.t("flow:pipes.fields.sid")},s.column({field:"defaultFactor",title:o.t("flow:pipes.fields.defaultFactor")})],pageable:l.defaultPageable(),scrollable:!0,height:400,toolbar:function(){return i}},l.withDefaults(e),t.kendoGrid(e),n=t.find("#flowPipeManagementToolbar"),d.bind(n,{}),n.localize(),n.data("kendoMenu").bind("select",y),null},{updateRawModel:function(t,e){},init:function(t){return v(),null}}})}.call(this),function(){var E;E="#documentListGrid",define("views/common/document.lists",["jquery","i18n","kendo","ui","core/web/WebHttp","core/ui/IntegerUI"],function(o,a,r,t,e,n){var d,l,i,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k;return d=n.IntegerUI,l=t.grid,i=e.WebHttp,v=function(t,e){var n,i,a,r;if(e&&e.data){if(n=e.data,"create"!==e.type)return"destroy"===e.type?t.pushDestroy(n):void 0;if(i=n.id,null!=(a=o(E).data("kendoGrid"))&&null!=(r=a.dataSource)?r.get(i):void 0)return;return t.pushCreate(n)}},b=function(t,e){return setTimeout(v.bind(null,t,e),50),null},y=function(t,e,n){if(n)return _.isArray(n)?_.each(n,b.bind(null,t)):b(t,n),null},m=function(t){return o("body").on("domosws:document:list",y.bind(null,t)),!0},T=function(t){return o.getJSON("document/list/list.json").done(t.success).fail(t.error),null},k=u=function(t){var e,n;return n=t.data,e={type:"POST",url:"document/list.json",dataType:"json",data:{data:r.stringify(n)}},o.ajax(e).done(t.success).fail(t.error)},p=function(t){var e;return e={id:t.data.id},i.destroyJson("document/list.json",e).then(t.success).catch(t.error)},f=function(t){return I(null!=t?t.id:void 0)},h=function(t){var e,n,i;return n=null,(e=o(E).data("kendoGrid"))&&0<(i=e.select()).length&&(n=e.dataItem(i[0])),f(n),null},C=function(t){var e;return e={dataSource:{transport:{read:T,create:u,update:k,destroy:p,push:m},schema:{model:{id:"id",fields:{id:{type:"number"},name:{type:"string"}}}},sort:{field:"name",dir:"asc"}},columns:[{command:["edit","destroy"],title:" ",width:"230px"},{field:"name",title:a.t("flow:documents.lists.name",{width:"200px"})}],pageable:l.defaultPageable(),height:400,scrollable:!0,change:h,toolbar:["create"]},l.withDefaults(e),o(E).kendoGrid(e),null},g=function(t,e){var n;return n={list:t},o.getJSON("document/list/entry/list.json",n).done(e.success).fail(e.error),null},w=s=function(t,e){var n,i;return i=e.data,n={type:"POST",url:"document/list/entry.json",dataType:"json",data:{data:r.stringify(i)}},o.ajax(n).done(e.success).fail(e.error)},c=function(t,e){var n,i;return i={id:e.data.id},n={type:"DELETE",url:M_URI("document/list/entry.json").addSearch(i).toString(),dataType:"json"},o.ajax(n).done(e.success).fail(e.error)},I=function(t){var e,n,i;if(null!=(i=(e=o("#documentEntryGrid")).data("kendoGrid"))&&i.destroy(),e.empty(),t)return n={dataSource:{transport:{read:g.bind(null,t),create:s.bind(null,t),update:w.bind(null,t),destroy:c.bind(null,t)},schema:{model:{id:"id",fields:{id:{type:"number"},list:{type:"number",defaultValue:t},name:{type:"string"},priority:{type:"number"},mandatory:{type:"boolean"}}}},sort:[{field:"priority",dir:"asc"},{field:"name",dir:"asc"}]},columns:[{command:["edit","destroy"],title:" ",width:"230px"},d.column({field:"priority",title:a.t("flow:documents.entries.priority"),width:"80px"}),{field:"name",title:a.t("flow:documents.entries.name"),width:"230px"},{field:"mandatory",title:a.t("flow:documents.entries.mandatory"),width:"80px"}],pageable:l.defaultPageable(),height:400,scrollable:!0,toolbar:["create"]},l.withDefaults(n),e.kendoGrid(n),null},{updateRawModel:function(t,e){},init:function(t){return C()}}})}.call(this),define("text!templates/flows/deal.flows.html",[],function(){return'<div id="dealFlowRoot">\n    <ul data-role="menu" class="idxNavigableMenu" data-bind="visible: isMenuVisible">\n        <li id="flowFlowsLi" class="k-state-active">\n            <a href="javascript:void(0)" data-bind="click: flowsMenuClick" data-i18n="flow:menu.flows"></a>\n        </li>\n        <li id="flowWorkflowsLi">\n            <a href="javascript:void(0)" data-bind="click: workflowsMenuClick" data-i18n="flow:menu.workflows"></a>\n        </li>\n        <li id="flowDocumentListsLi">\n            <a href="javascript:void(0)" data-bind="click: documentListsMenuClick" data-i18n="flow:menu.documentLists"></a>\n        </li>\n        <li id="flowPipeManagementLi">\n            <a href="javascript:void(0)" data-bind="click: pipeManagementMenuClick" data-i18n="flow:menu.pipeManagement"></a>\n        </li>\n    </ul>\n\n    <div class="idxNavigableContent">\n        <div data-bind="visible: isFlowsActive">\n            <div class="flowTopPane">\n                <div class="zoom0_8p">\n                    <h2 class="flowTitle" data-i18n="flow:flows.flows"></h2>\n                    <div id="flowDealFlowGrid"></div>\n                </div>\n            </div>\n            <div class="flowTopPane">\n                <div class="zoom0_8p">\n                    <h2 class="flowTitle" data-i18n="flow:flows.tasks"></h2>\n                    <div id="flowTaskGrid"></div>\n                </div>\n            </div>\n            <div class="clearer"></div>\n            <div class="flowBottomPane">\n                <div id="flowTab" data-role="tabstrip" data-animation="{open:{effects:\'fadeId\'}}" data-bind="visible: hasTab">\n                    <ul>\n                        <li id="flowOverviewLi" class="k-state-active" data-bind="visible: hasOverview">\n                            <span data-i18n="flow:flows.overview"></span>\n                        </li>\n                        <li id="flowWorkflowLi" data-bind="visible: hasWorkflow">\n                            <span data-i18n="flow:flows.workflow"></span>\n                        </li>\n                        <li id="flowTaskLi" data-bind="visible: hasTask">\n                            <span data-i18n="flow:flows.task"></span>\n                        </li>\n                    </ul>\n                    \x3c!-- Overview --\x3e\n                    <div>\n                        <div id="flowOverviewToolbar"></div>\n                        <div id="flowOverviewChart" class="boardTwoThird"></div>\n                        <div id="flowOverviewGauge" class="boardThird"></div>\n                        <div class="clearer"></div>\n                    </div>\n                    \x3c!-- Workflow --\x3e\n                    <div>\n                        <h2 data-bind="text: currentFlowName"></h2>\n                        <div id="flowWorkflowToolbar"></div>\n                        <div id="transactionWorkflowData"></div>\n                        <p></p>\n                        <div id="flowDealFlowDiagram"></div>\n                    </div>\n                    \x3c!-- Task --\x3e\n                    <div>\n                        <h2 data-bind="text: currentTaskFlowName"></h2>\n                        <div id="flowTaskToolbar"></div>\n                        <p></p>\n                        <h3 data-bind="text: currentTaskName"></h3>\n                        <div id="flowTaskForm"></div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n\n        <div data-bind="visible: isWorkflowsActive">\n            <h2 data-i18n="flow:menu.workflows"></h2>\n\n            <input id="flowWorkflowUpload" type="file"/>\n            <p></p>\n            <div id="flowWorkflowGrid" class="floatingGrid_50"></div>\n            <div class="clearer"></div>\n            <p></p>\n            <div id="flowWorkflowDiagram"></div>\n        </div>\n\n        <div data-bind="visible: isDocumentListsActive">\n            <h2 data-i18n="flow:menu.documentLists"></h2>\n\n            <div id="documentListGrid" class="floatingGrid_50"></div>\n            <div class="clearer"></div>\n            <p></p>\n            <div id="documentEntryGrid" class="floatingGrid_50"></div>\n            <div class="clearer"></div>\n        </div>\n\n        <div data-bind="visible: isPipeManagementActive">\n            <h2 data-i18n="flow:menu.pipeManagement"></h2>\n\n            <div id="flowPipeManagementGrid" class="floatingGrid_50"></div>\n            <div class="clearer"></div>\n        </div>\n    </div>\n\n</div>'}),function(){define("views/flow/flow",["jquery","i18n","kendo","site","core/web/WebLocation","views/layout","views/flow/flow.menu","views/flow/flow.flows","views/flow/flow.workflows","views/flow/flow.pipes","views/common/document.lists","core/data/SiteCategories","text!templates/flows/deal.flows.html"],function(r,t,a,e,n,o,i,d,l,s,u,c,p){var m,f,b,v,y,h,g,T,I;return f=e.map,b=c.SiteCategories,m=[i,d,l,u,s],v=n.WebLocation,T=function(){return v.setPageTitle(t.t("flow:menu.flows")),null},function(){return{}},y=function(t){var e,n,i;for(i={},e=0,n=m.length;e<n;e++)m[e].updateRawModel(t,i);return i},I=function(t){return T(),null},g=function(t){var e,n,i,a;for(r("#dealFlowRoot").localize(),a=[],e=0,n=m.length;e<n;e++)i=m[e],a.push(i.init(t,o));return a},h=function(t){var e,n,i;return e=t.model,i=a.template(p)({}),n={model:e,show:I.bind(null,t),init:g.bind(null,t)},new a.View(i,n)},{init:function(t){var e,n,i;return(e={}).layout=t.layout,n=y(e),e.model=a.observable(n),i=h(e),t.layout.register("flow",f["deal-flow"],i,null,b.processManagement),null}}})}.call(this),define("text!templates/flows/document/document.html",[],function(){return'<div id="flowDocumentRoot">\n    <h1 data-i18n="flow:documents.documents"></h1>\n    <h2 data-bind="text: title"></h2>\n    <div id="flowDocumentGrid" class="floatingGrid"></div>\n    <div class="clearer"></div>\n</div>'}),function(){var K,$,Q;Q="editFlowDocument",$="#flowDocumentGrid",K="domosws:flow:document",define("views/flow/document/edit.document",["jquery","lodash","i18n","kendo","site","ui","core/ui/UploadUtils","object/data/ObjectCategories","object/data/ObjectTypes","views/not.found","views/loading.light","core/ui/IntegerUI","text!templates/flows/document/document.html"],function(a,r,i,o,t,e,n,d,l,s,u,c,p){var m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J;return g=n.UploadUtils,m=c.IntegerUI,h=t.router,f=t.map,b=e.grid,v=d.ObjectCategories,y=l.ObjectTypes,O=function(){return s.display(Q,!1)},function(){return{view:null,query:null,grid:null,handler:null}},function(t){return{title:"",id:0}},J=function(t,e){return t.set("title",e.name),t.set("id",e.id),t},I=function(t){return t.handler&&a("body").on(K,t.handler),!0},k=function(t){return t.handler&&a("body").off(K,t.handler),!0},C=function(t){var e;return k(t),(t.handler=null)!=(e=t.grid)&&e.destroy(),t.grid=null,a($).empty(),null},B=function(t,e){var n;return n={intention:t.model.get("id")},a.getJSON("flow/document/list.json",n).done(e.success).fail(e.error),null},Y=function(t,e){var n;return t.model,n={type:"POST",url:"flow/document.json",dataType:"json",data:{data:o.stringify(e.data)}},a.ajax(n).done(e.success).fail(e.error),null},S=function(t,e){var n,i;return n=e.documentId,i=e.documentName,n&&i?"<a href='document/download?id="+n+"' download='"+i+"'>"+i+"</a>":""},N=function(t,e){return"<input type='file' data-entry='"+e.entry+"'/>"},W=function(t,e){var n,i;return n={intention:t.model.get("id"),entry:e.data("entry")},i={async:{saveUrl:"flow/document/upload.json?"+a.param(n),saveField:"file"},multiple:!1,showFileList:!1},g.withDefaults(i),e.kendoUpload(i)},G=function(t,e,n){var i;if(n&&n.data)return i=n.data,parseInt(i.intention)===parseInt(t.model.get("id"))&&("create"===n.type?e.pushCreate(i):"update"===n.type?e.pushUpdate(i):"destroy"===n.type&&e.pushDestroy(i)),null},q=function(t,e,n,i){if(i)return r.isArray(i)?r.each(i,G.bind(null,t,e)):G(t,e,i),null},M=function(t,e){return k(t),t.handler=q.bind(null,t,e),I(t)},A=function(t,e){return a($).find("input[type='file']").each(function(){return W(t,a(this))}),!0},F=function(){var t;return null!=(t=a($).data("kendoGrid"))&&t.refresh(),null},L=function(t){var e,n;if(t)return n={intention:t.intention,entry:t.entry},e={type:"DELETE",url:"flow/document.json?"+a.param(n),dataType:"json"},a.ajax(e).always(F),null},V=function(t){var e,n;return C(t),n={dataSource:{transport:{read:B.bind(null,t),update:Y.bind(null,t),push:M.bind(null,t)},schema:{model:{id:"entry",fields:{intention:{type:"number",editable:"false"},priority:{type:"number",editable:!1},entry:{type:"number",editable:!1},entryName:{type:"string",editable:!1},mandatory:{type:"boolean",editable:!1},valid:{type:"boolean"},documentId:{type:"string",editable:!1},documentName:{type:"string",editable:!1},documentVersion:{type:"string",editable:!1}}}},sort:{field:"priority",dir:"asc"}},dataBound:A.bind(null,t),columns:[{command:["edit",b.customCommand("Delete",L)],title:" "},m.column({field:"priority",title:i.t("flow:documents.entries.priority")}),{field:"entryName",title:i.t("flow:documents.document")},{field:"mandatory",title:i.t("flow:documents.entries.mandatory")},{field:"valid",title:i.t("flow:documents.valid")},{field:"documentId",title:i.t("data:documents.thumbnail"),groupable:!1,filterable:!1,sortable:!1,template:"<img src='document/thumbnail?id=#: documentId#'></img>"},{field:"documentId",title:i.t("flow:documents.link"),template:S.bind(null,t)},{field:"documentVersion",title:i.t("data:documents.version")},{title:" ",groupable:!1,filterable:!1,sortable:!1,template:N.bind(null,t),editor:function(t,e){return null}}],scrollable:!1},b.withDefaults(n),(e=a($)).kendoGrid(n),t.grid=e.data("kendoGrid"),null},H=function(t){return V(t)},R=function(t){return a("#flowDocumentRoot").localize(),null},w=function(t){var e,n,i;return e=t.model,i=o.template(p)({}),n={model:e,init:R.bind(null,t),show:H.bind(null,t)},new o.View(i,n)},x=function(t){return null==t.view&&(t.view=w(t)),t.view},D=function(t,e){var n,i;if(e){if((n=y.get(e.type))&&n.isOf(v.dealIntentions))return J(t.model,e),i=x(t),t.layout.display(Q,i);O()}else O()},T=function(t){var e;return null!=(e=t.query)&&e.abort(),t.query=null},j=function(t,e){return D(t,e)},P=function(t){return O()},U=function(t){return t.query=null},_=function(t,e){var n;return T(t),n={id:e},t.query=a.getJSON("object.json",n).done(j.bind(null,t)).fail(P.bind(null,t)).always(U.bind(null,t)),null},E=function(t,e){return u.display(t.layout,Q,!1),_(t,e)},{updateRawModel:function(t,e){return null},init:function(t){var e,n,i;return(e={view:null,query:null,grid:null,handler:null}).layout=t.layout,e.restricted=t.restricted,i={title:"",id:0},n=o.observable(i),e.model=n,h.addRoute(f.dealflowDocumentEdit,E.bind(null,e))}}})}.call(this),define("text!templates/flows/edit/pipe.html",[],function(){return'<div id="flowPipeManagerRoot">\n    <h1 data-i18n="flow:pipes.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="flow:pipes.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="flowPipeManagerActions"></div>\n\n    <h2 data-i18n="flow:pipes.sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="flow:pipes.fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" name="ID" class="k-textbox" type="text" data-bind="value: stringId" required/>\n            </td>\n            <td>\n                <label for="name" data-i18n="flow:pipes.fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="defaultFactor" data-i18n="flow:pipes.fields.defaultFactor"></label>\n            </td>\n            <td>\n                <input id="defaultFactor" name="Factor" data-role="domospercent" data-bind="value: defaultFactor"/>\n            </td>\n            <td></td>\n            <td></td>\n        </tr>\n    </table>\n\n    <h2 data-i18n="flow:pipes.sections.configuration"></h2>\n    \n    <div id="flowPipeConfigurationGrid" class="floatingGrid"></div>\n    <div class="clearer"></div>\n\n</div>\n\n'}),function(){define("views/flow/pipe/pipe",["jquery","i18n","ui","core/ui/PercentUI","text!templates/flows/edit/pipe.html"],function(i,a,t,e,n){var r,o,d,l;return d=e.PercentUI,r=t.grid,o=r.transports,l=function(t){var e,n;return e=t.model,n={dataSource:{transport:o.createLocal({data:e.get("configuration")}),schema:{model:{id:"id",fields:{status:{type:"string",defaultValue:"",nullable:!1},factor:{type:"number",defaultValue:1,nullable:!1}}}}},columns:[{command:["edit","destroy"],title:" "},{field:"status",title:a.t("flow:pipes.fields.status")},d.column({field:"factor",title:a.t("flow:pipes.fields.factor")})],toolbar:["create"],scrollable:!1},r.withDefaults(n),i("#flowPipeConfigurationGrid").kendoGrid(n)},{getTemplates:function(){return{view:n}},createRawModel:function(){return{id:0,stringId:"",name:"",defaultFactor:1,configuration:[]}},updateModel:function(t,e){var n,i,a,r,o;for(t.set("id",e.id),t.set("stringId",e.stringId),t.set("name",e.name),t.set("defaultFactor",e.defaultFactor),(n=t.get("configuration")).splice(0,n.length),a=0,r=(o=e.configuration).length;a<r;a++)i=o[a],n.push(i);return null},init:function(t){return l(t)}}})}.call(this),function(){define("views/flow/pipe/edit.pipe",["site","views/edit/edit","core/data/SiteCategories","views/flow/pipe/pipe"],function(t,e,n,i){var a,r,o,d,l,s,u,c,p,m;return o=t.router,r=t.map,d=n.SiteCategories,u=function(t){return t.create(i)},m=function(t){return null==l&&(l=u(t)),l},s=function(){var t;return t={siteCategory:d.processManagement,key:"flowPipeManagerEdit",rootId:"flowPipeManagerRoot",actionsId:"flowPipeManagerActions",url:"flow/pipe.json",getView:m},e.create(t)},a=l=null,p=function(){return null==a&&(a=s()),a},c=function(t){return p().display(t)},{init:function(){return o.addRoute(r.dealflowPipeManagerEdit,c)}}})}.call(this),function(){define("views/flow/module",["views/layout","views/flow/flow","views/flow/document/edit.document","views/flow/pipe/edit.pipe"],function(e,n,i,a){return{init:function(){var t;return t={layout:e,restricted:!1},n.init(t),i.init(t),a.init(t),null}}})}.call(this),define("core/api/PortfolioKind",["require","exports"],function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.PortfolioKind=void 0,(n=e.PortfolioKind||(e.PortfolioKind={}))[n.FOLDER=1]="FOLDER",n[n.INVESTOR=2]="INVESTOR",n[n.INVESTOR_FOLDER=3]="INVESTOR_FOLDER"}),define("text!templates/portfolios/portfolios.panel.html",[],function(){return'<div id="folioPanelRoot">\n    <div id="folioPanelBar"></div>\n    <div id="folioPanelTree" class="folioTree" data-bind="invisible: displayPanelVirtual"></div>\n    <div id="folioPanelVirtual" data-bind="visible: displayPanelVirtual"></div>\n</div>'}),function(){var Ct,wt,kt,Et,Dt,St,Nt;Et="#folioPanelTree",Nt="#folioPanelVirtual",St="folioPanelTBNew",Dt="folioPanelTBEdit",Ct="currentFolio",kt="displayPanelVirtual",wt="#polioFundLinkId",define("views/portfolios/portfolios.panel",["jquery","lodash","i18n","kendo","site","object/data/ObjectCategories","object/data/ObjectTypes","core/api/PortfolioKind","core/web/WebLocation","object/ui/ObjectUtilsUI","core/ui/IconUI","text!templates/portfolios/portfolios.panel.html"],function(r,o,d,l,t,e,n,i,a,s,u,c){var p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q,z,X,Z,tt,et,nt,it,at,rt,ot,dt,lt,st,ut,ct,pt,mt,ft,bt,vt,yt,ht,gt,Tt,It;return h=i.PortfolioKind,T=t.router,g=t.map,f=e.ObjectCategories,b=n.ObjectTypes,p=f.portfolios.id,I=a.WebLocation,v=s.ObjectUtilsUI,m=u.IconUI,N=function(t,e,n){var i,a;return t.model.set("currentIsVirtual",n),t.model.set(Ct,e),e&&(I.setPageTitle(d.t("portfolio:title")+" "+e.name),a=(i=e.fund)?v.getUrl(i.id):v.getUrl(e.id),t.model.set("polioFundLink","<a href='"+a+"'>"+e.name+"</a>"),r(wt).empty(),r(wt).append("<a href='"+a+"'>"+e.name+"</a>")),null},k=function(t){var e,n;return(n=t.data("kendoTreeView"))&&(e=n.select())?n.dataItem(e):null},C=function(t){return N(t,k(r(Et)),!1)},w=function(t){return N(t,k(r(Nt)),!0)},x=function(t){return t.model.get(kt)?w(t):C(t),null},R=function(t){var e;return(e=t.model).set(kt,!e.get(kt)),x(t)},B=function(t){return k(r(Et))},function(){return{locked:!0,tree:null,toolbar:null,query:null}},W=function(){return r("#folioPanelBar")},U=function(t){var e,n;return null!=(n=(e=t.panelContext).toolbar)&&n.destroy(),e.toolbar=null,W().empty()},pt=function(t,e){var n,i,a;return n=!(a=t.panelContext).locked,a.toolbar&&(i=n&&null!=e,a.toolbar.enable("#"+St,n),a.toolbar.enable("#"+Dt,i)),null},ct=function(t){return pt(t,B())},lt=function(t,e,n){return t.panelContext.locked=e,ct(t)},it=function(t,e){return lt(t,!0)},st=function(t,e){return lt(t,!1)},rt=function(t,e){var n;return Q(t),ct(t),null!=(n=r(Nt).data("kendoTreeView"))?n.dataSource.read():void 0},at=function(t,e){var n;return(n=B())?T.navigate(g.getObjectCreate(p,n.id)):T.navigate(g.getObjectCreate(p)),!0},Z=function(t,e){var n;return(n=B())&&T.navigate(g.getObjectEdit(n.id)),!0},S=function(t){return R(t)},Y=function(t){var e,n;return"lockGroup",n={items:[{type:"buttonGroup",buttons:[{text:d.t("portfolio:toolbar.lock"),icon:"lock",togglable:!0,selected:!0,group:"lockGroup",primary:!0,showText:"overflow",toggle:it.bind(null,t)},{text:d.t("portfolio:toolbar.unlock"),icon:"unlock",togglable:!0,group:"lockGroup",primary:!0,showText:"overflow",toggle:st.bind(null,t)}]},{type:"button",text:d.t("portfolio:toolbar.refresh"),icon:"refresh",showText:"overflow",click:rt.bind(null,t)},{type:"buttonGroup",buttons:[{id:St,text:d.t("portfolio:toolbar.new"),icon:"folder-add",showText:"overflow",click:at.bind(null,t),enable:!1},{id:Dt,text:d.t("portfolio:toolbar.edit"),icon:"pencil",showText:"overflow",click:Z.bind(null,t),enable:!1}]},{type:"separator"},{type:"button",text:d.t("portfolio:toolbar.toggleVirtual"),icon:"redo",showText:"overflow",togglable:!0,toggle:S.bind(null,t)}]},U(t),(e=W()).kendoToolBar(n),t.panelContext.toolbar=e.data("kendoToolBar"),null},E=function(t,e){return pt(t,e)},D=function(t,e){if(e.field===Ct)return E(t,t.model.get(Ct))},O=function(t){return t.model.bind("change",D.bind(null,t))},"name",y="sprite","items",H=function(){return r(Et)},A=function(t){var e,n;return null!=(n=(e=t.panelContext).tree)&&n.destroy(),e.tree=null,H().empty(),null},L=function(t){return A(t),H().append(d.t("portfolio:loadError")),null},P=function(t){return A(t),H().append(r("<div>").addClass("k-loading-image")),null},M=function(t){return A(t),H().append(r("<h3>").text(d.t("portfolio:noPortfolios"))),null},ot=function(t,e){return t.panelContext.locked&&null!=e&&e.preventDefault(),null},dt=function(t,e){var n,i,a,r,o;if(e.valid){if((r=t.panelContext).tree)return a=(o=r.tree).dataItem(e.sourceNode),(i=e.destinationNode)&&"over"!==e.dropPosition&&(i=o.parent(e.destinationNode)),n=null,i&&(n=o.dataItem(i)),ft(a,n),null}else e.setValid(!1)},V=function(t){var e;return(e=Number(t))===h.INVESTOR?"portfolio-investor":e===h.INVESTOR_FOLDER?"portfolio-investor-sub":"portfolio"},It=function(t){if(t)return o.isArray(t)?o.each(t,It):(t[y]=V(t.kind),It(t.items)),t},ht=function(t,e,n){var i,a;return(a=t.panelContext.tree)&&null!=(i=a.dataItem(e))&&i.set(y,V(n)),null},yt=function(t,e,n){var i;return null!=(i=t.panelContext.tree)&&i.text(e,n),null},q=function(t,e){var n,i;return(i=t.panelContext.tree)&&e&&(n=i.dataSource.get(e))?i.findByUid(n.uid):null},F=function(t,e){var n,i,a;if(a=t.panelContext.tree)return(n=q(t,e.id))?(yt(t,n,e.name),ht(t,n,e.kind)):(n={id:e.id,name:e.name,kind:e.kind},It(n)),i=q(t,e.parentPortfolio),a.append(n,i),null},mt=function(t,e){var n,i,a;if(a=t.panelContext.tree)return(i=q(t,e.id))&&(n=B().id===e.id,a.remove(i),n&&N(t,null,!1)),null},et=function(t,e){var n,i,a,r;if(e&&e.data)return n=e.data,(i=null!=(a=b.get(n.type))?a.category:void 0)&&i.isOf(p)&&("create"===(r=e.type)||"update"===r?F(t,n):"destroy"===e.type&&mt(t,n)),null},tt=function(t,e){var n;if(e)return n=t.data.context,o.isArray(e)?o.each(e,tt.bind(null,n)):et(n,e),null},_=function(t){return r("body").bind("domosws:object",{context:t},tt)},ut=function(t){return x(t)},G=function(t){var e;return null!=(e=t.panelContext.tree)?e.expand(".k-item"):void 0},bt=function(t,e){return N(t,t.panelContext.tree.dataItem(e.node),!1)},gt=function(t,e,n){var i,a,r;if(t){for(i=0,a=(t=o.sortBy(t,e)).length;i<a;i++)r=t[i],o.has(r,n)&&(r[n]=gt(r[n],e,n));return t}},Tt=function(t){var e;return e=t.item[y],'<div class="portfolioTreeItem"><div class="d-icon">'+m.getHtml(e)+"</div>"+t.item.name+"</div>"},j=function(t,e){var n,i,a,r;return r=t.panelContext,null==e&&(e=[]),!o.isArray(e)||e.length<=0?M(t):(It(e),n={data:e=gt(e,"name","items"),schema:{model:{id:"id",children:"items"}}},a={dataSource:new l.data.HierarchicalDataSource(n),dataTextField:"name",dragAndDrop:!0,dragstart:ot.bind(null,t),drop:dt.bind(null,t),dataBound:G.bind(null,t),select:bt.bind(null,t),template:Tt},A(t),(i=H()).kendoTreeView(a),r.tree=i.data("kendoTreeView"),G(t),ut(t),null)},X=function(t,e){return j(t,e),null},nt=function(t){return L(t),null},z=function(t){return t.panelContext.query=null},Q=function(t){var e;if(!(e=t.panelContext).query)return P(t),e.query=r.getJSON("portfolio/hierarchy.json").done(X.bind(null,t)).fail(nt.bind(null,t)).always(z.bind(null,t)),null},ft=function(t,e){var n,i;if(t)return i={id:t.id},e&&(i.parent=e.id),n={type:"POST",url:"portfolio/hierarchy.json",dataType:"json",data:i},r.ajax(n),null},J=function(t){return Q(t)},vt=function(t,e){var n;return(n=r(Nt).data("kendoTreeView"))?N(t,n.dataItem(e.node),!0):null},$=function(t){var e,n;return e=r(Nt),l.destroy(e),e.empty(),n={dataSource:{transport:{read:{url:"object/list.json",dataType:"json",data:{category:f.virtualPortfolios.id}}}},dataTextField:"name",select:vt.bind(null,t)},e.kendoTreeView(n),null},K=function(t){var e;return e={locked:!0,tree:null,toolbar:null,query:null},t.panelContext=e,r("#folioPanelRoot").localize(),Y(t),J(t),$(t),O(t),_(t),null},{updateRawModel:function(t,e){return e[kt]=!1,e},createView:function(t){var e,n,i;return e=t.model,n=l.template(c)({}),i={model:e,init:K.bind(null,t)},new l.View(n,i)}}})}.call(this),function(){var n;n="currentFolio",define("views/portfolios/portfolios",["kendo","site","views/layout","views/portfolios/portfolios.main","views/portfolios/portfolios.panel","core/data/SiteCategories"],function(a,r,o,d,l,t){var s,u;return s=t.SiteCategories,function(){return{}},u=function(t){var e;return e={currentFolio:null,currentIsVirtual:!1,hasCurrentFolio:function(){return null!=this.get(n)}},l.updateRawModel(t,e),d.updateRawModel(t,e),e},{init:function(){var t,e,n,i;return n=u(t={}),t.model=a.observable(n),e=l.createView(t),i=d.createView(t),o.register("portfolios",r.map.portfolios,i,e,s.portfolios),null}}})}.call(this),function(){var a,d,r,l,s,u,c,p;c=(u={id:2,elementId:"#riskSetupLi"}).id,d=[r={id:1,elementId:"#riskOverviewLi"},u],a=l=r.id,s="currentMenuSelection",p="k-state-active",define("views/risk/risk.menu",["jquery"],function(i){var n,o;return o=function(t,e){var n;return n=i(t.elementId),t.id===e?n.addClass(p):n.removeClass(p),null},n=function(t,e){var n,i,a,r;if(r=t.model,i=e.id,r.get(s)!==i){for(n=0,a=d.length;n<a;n++)o(d[n],i);r.set(s,i)}return e===u&&t.indicatorContext.grid.refresh(),null},{updateRawModel:function(t,e){return e[s]=a,e.isOverviewActive=function(){return this.get(s)===l},e.isSetupActive=function(){return this.get(s)===c},e.overviewMenuClick=n.bind(null,t,r),e.setupMenuClick=n.bind(null,t,u),null},init:function(t){}}})}.call(this),define("text!templates/risk/risk.overview.html",[],function(){return'<div>\n\t<div class="formConfiguration k-content">\n\t\t<table class="formTable">\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="riskOverviewProfile" data-i18n="risk:fields.profile"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="riskOverviewProfile" name="riskOverviewProfile" data-role="domosriskprofile" data-value-primitive="true" data-bind="value: configuration.profile" required="required"/>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="riskOverviewStress">\n\t\t\t\t\t\t<a data-i18n="stress:profiles.name" data-bind="attr: {href: configuration.stressUrl}"></a>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="riskOverviewStress" data-role="domosstressprofile" data-value-primitive="true" data-bind="value: configuration.stressProfile"/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="riskOverviewLevel" data-i18n="risk:fields.level"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="riskOverviewLevel" name="riskOverviewLevel" data-role="domosriskinputlevel" data-bind="value: configuration.level" required="required"/>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="riskOverviewPipe" data-i18n="risk:fields.pipeManager"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="riskOverviewPipe" data-role="domosflowpipemanager" data-value-primitive="true" data-bind="value: configuration.pipe"/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="riskOverviewAsset" data-bind="visible: configuration.isAsset">\n\t\t\t\t\t\t<a data-i18n="risk:fields.asset" data-bind="attr: {href: configuration.assetUrl}"></a>\n\t\t\t\t\t</label>\n\t\t\t\t\t<label for="riskOverviewEntity" data-bind="visible: configuration.isFund">\n\t\t\t\t\t\t<a data-i18n="risk:fields.fund" data-bind="attr: {href: configuration.entityUrl}"></a>\n\t\t\t\t\t</label>\n\t\t\t\t\t<label for="riskOverviewVirtual" data-bind="visible: configuration.isVirtual">\n\t\t\t\t\t\t<a data-i18n="risk:fields.virtualPortfolio" data-bind="attr: {href: configuration.virtualPortfolioUrl}"></a>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="riskOverviewAsset" name="riskOverviewAsset" data-role="domosasset" data-value-primitive="true" data-bind="value: configuration.asset, visible: configuration.isAsset"/>\n\t\t\t\t\t<input id="riskOverviewEntity" name="riskOverviewEntity" data-role="domosvehicle" data-value-primitive="true" data-bind="value: configuration.entity, visible: configuration.isFund"/>\n\t\t\t\t\t<input id="riskOverviewVirtualPortfolio" data-role="domosvirtualportfolio" data-value-primitive="true" data-bind="value: configuration.virtualPortfolio, visible: configuration.isVirtual"/>\n\t\t\t\t</td>\n\t\t\t\t<td></td>\n\t\t\t\t<td>\n\t\t\t\t\t<a class="k-button" href="javascript:void(0)" data-i18n="risk:actions.openPortfolio"\n\t\t\t\t\t\tdata-bind="attr: {href: configuration.openPortfolio}, enabled: configuration.isFundOrVirtualSelected"></a>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="riskOverviewDate" data-i18n="risk:fields.date"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="riskOverviewDate" name="riskOverviewDate" data-role="datepicker" data-bind="value: configuration.date"/>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="riskOverviewCompareDate">\n\t\t\t\t\t\t<input type="checkbox" data-bind="checked: configuration.displayTrends"/>\n\t\t\t\t\t\t<span data-i18n="risk:fields.compareDate" data-bind="enabled: configuration.displayTrends"></span>\n\t\t\t\t\t</label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="riskOverviewCompareDate" name="riskOverviewCompareDate" data-role="datepicker" data-bind="value: configuration.compareDate, enabled: configuration.displayTrends"/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<label for="riskOverviewTransparency" data-i18n="risk:fields.transparency"></label>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input id="riskOverviewTransparency" data-role="domosportfoliotransparency" data-bind="value: configuration.transparency"/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td></td>\n\t\t\t\t<td>\n\t\t\t\t\t<button class="k-button" data-bind="click: configuration.click" data-i18n="risk:actions.compute"></button>\n\t\t\t\t</td>\n\t\t\t\t<td></td>\n\t\t\t\t<td></td>\n\t\t\t</tr>\n\t\t</table>\n\n\t</div>\n\n\t<div data-bind="visible: hasOverviewResults">\n\n\t\t<div id="riskOverviewResultToolbar"></div>\n\t\t<p></p>\n\n\t\t<div id="riskOverviewExport">\n\n\t\t\t<div id="riskOverviewReportChart" class="boardThird"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<div id="riskOverviewHierarchy" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\t\t\t<p></p>\n\t\t\t<div id="riskOverviewCashFlowChart" ></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t\t<div id="riskOverviewDetails" class="floatingGrid" data-bind="visible: hasOverviewResultDetail"></div>\n\t\t\t<div class="clearer"></div>\n\t\t\t<p></p>\n\t\t\t<div id="riskOverviewComments"></div>\n\t\t</div>\n\t</div>\n</div>'}),function(){var L,P,M,j,G,q,B,V,W,H,Y;M="configuration",B="profile",V="stressProfile",G="level",L="asset",j="entity",Y="virtualPortfolio",H="displayTrends",P="compareDate",W="transparency",q="pipe",define("views/risk/risk.overview",["jquery","i18n","kendo","core/util/DateUtils","core/web/WebStorages","core/api/RiskInputLevel","views/risk/risk.overview.details","core/util/ObservableUtils","object/web/ObjectMap","portfolio/data/PortfolioTransparency","stress/web/StressMap","text!templates/risk/risk.overview.html","risk/ui/RiskProfileUI","stress/ui/StressProfileUI","flow/ui/FlowPipeManagerUI","object/ui/VirtualPortfolioUI","object/ui/PortfolioUI","object/ui/VehicleUI","object/ui/AssetUI"],function(f,t,o,e,n,i,a,r,d,l,s,u){var b,c,p,m,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F;return c=[a],b=e.DateUtils,y=i.RiskInputLevel,h=n.WebStorages.tenantLocalStorage(),m=r.ObservableUtils,p=d.ObjectMap,v=l.PortfolioTransparency,g=s.StressMap,function(){return"risk_overview_config_v2"},_=function(t,e,n){return f("body").trigger("domos:risk:overview:results:normal",[e,n])},U=function(t,e,n){return f("body").trigger("domos:risk:overview:results:trend",[e,n])},O=function(t,e,n){return f("body").trigger("domos:risk:overview:results:stress",[e,n])},function(t){var e;return null!=(e=t.query)&&e.abort(),t.query=null},D=function(t,e){return _(0,e),null},E=function(t){return null},k=function(t){return t.query=null},R=function(t,e,n){var i,a;return t.query=null,a=e[0],i=n[0],U(0,a,i)},x=function(t){return t.query=null},N=function(t,e,n){var i,a;return t.query=null,a=e[0],i=n[0],O(0,a,i)},S=function(t){return t.query=null},F=A=function(t){var e,n,i,a,r,o,d,l,s,u,c,p,m;if(!(s=t.overviewContext).query&&((a=t.model.get(M))&&h.setObject("risk_overview_config_v2",a.toJSON()),c=a.get(B),l=a.objectId(),p=a.get(V),m=a.get(W),u=a.get(q),d=a.get(H),o=b.toJson(a.get("date")),i=b.toJson(a.get(P)),c&&l))return r={profile:c,object:l,stressProfile:p,date:o,transparency:m,pipe:u},e="risk/engine.json",d||p?(n={profile:c,object:l,transparency:m,pipe:u},d?(n.date=i,n.stressProfile=p):(n.date=o,n.stressProfile=null),s.query=d?f.when(f.getJSON(e,r),f.getJSON(e,n)).then(R.bind(null,s),x.bind(null,s)):f.when(f.getJSON(e,r),f.getJSON(e,n)).then(N.bind(null,s),S.bind(null,s))):s.query=f.getJSON(e,r).done(D.bind(null,s)).fail(E.bind(null,s)).always(k.bind(null,s)),null},T=function(t){var e,n;return e=null,(n=t.get(G))===y.ASSET?e=t.get(L):n===y.FUND?e=t.get(j):n===y.VIRTUAL_PORTFOLIO&&(e=t.get(Y)),e},C=function(t){return t.get(G)===y.FUND&&!!t.get(j)},w=function(t){return t.get(G)===y.VIRTUAL_PORTFOLIO&&!!t.get(Y)},I=function(t,e){var n,i;for(t.localize(),n=0,i=c.length;n<i;n++)c[n].init(e);return e.localConfiguration&&setTimeout(A.bind(null,e)),null},{updateRawModel:function(t,e){var n,i,a,r;if(t.localConfiguration)r=t.localConfiguration;else{r=h.getObject("risk_overview_config_v2");try{r&&(r=JSON.parse(r))}catch(t){t}}for(null==r&&(r={}),(n={})[B]=r[B]||null,n[V]=r[V]||null,n[G]=r[G]||y.FUND,n[L]=r[L]||null,n.portfolio=r.portfolio||null,n[j]=r[j]||null,n[Y]=r[Y]||null,n.date=new Date,n[H]=!1,n[P]=null,n[W]=v.FLAT_VIEW,n.pipe=r.pipe||null,n.click=F.bind(null,t),n.isAsset=function(){return this.get(G)===y.ASSET},n.isFund=function(){return this.get(G)===y.FUND},n.isVirtual=function(){return this.get(G)===y.VIRTUAL_PORTFOLIO},n.objectId=function(){return T(this)},n.entityUrl=function(){return p.objectEdit(m.get(this,"entity"))},n.assetUrl=function(){return p.objectEdit(m.get(this,L))},n.stressUrl=function(){return g.stressEdit(m.get(this,V))},n.virtualPortfolioUrl=function(){return p.objectEdit(m.get(this,Y))},n.isFundOrVirtualSelected=function(){return C(this)||w(this)},n.openPortfolio=function(){var t;return t={objectId:C(this)?this.get(j):this.get(Y),stressId:this.get(V),transparencyId:this.get(W),date:this.get("date"),pipeId:this.get(q)},g.openPortfolio(t)},e[M]=n,i=0,a=c.length;i<a;i++)c[i].updateRawModel(t,e);return e},init:function(t){var e,n,i,a,r;return a={},t.overviewContext=a,e=f("#riskOverviewContent"),n=t.model,r=o.template(u)({}),i={model:n,init:function(){return I(e,t)}},new o.View(r,i).render(e),null}}})}.call(this),define("core/api/RiskIndicatorLevel",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RiskIndicatorLevel=void 0;var r,o;(r=e.RiskIndicatorLevel||(e.RiskIndicatorLevel={}))[r.FUND=1]="FUND",r[r.PORTFOLIO=2]="PORTFOLIO",r[r.ASSET=3]="ASSET",(o=e.RiskIndicatorLevel||(e.RiskIndicatorLevel={})).getName=a.EnumUtils.createNameFn("risk:RiskIndicatorLevel",o),o.widget=i.EnumWidgetUtils.createDropList("DomosRiskIndicatorLevel",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget),o.canFilter=function(t){return t===o.ASSET},o.isFund=function(t){return t===o.FUND},o.isParentOf=function(t,e){return t<=e},o.list=function(){return a.EnumUtils.list(o)}}),define("core/api/RiskIndicatorType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RiskIndicatorType=void 0;var r,o;(r=e.RiskIndicatorType||(e.RiskIndicatorType={}))[r.FORMULA=1]="FORMULA",r[r.TAG=2]="TAG",r[r.SCRIPT=3]="SCRIPT",r[r.SPREADSHEET=4]="SPREADSHEET",(o=e.RiskIndicatorType||(e.RiskIndicatorType={})).getName=a.EnumUtils.createNameFn("risk:RiskIndicatorType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosRiskIndicatorType",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("text!templates/risk/risk.indicator.toolbar.html",[],function(){return'<ul id="riskGridToolbarMenu" class="gridToolbarMenu d-sprite-wrapper" data-role="menu">\n    <li>\n        <span class="k-sprite d-new"></span>\n        <span data-i18n="risk:actions.create"></span>\n        <ul>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="FORMULA" data-i18n="risk:indicators.FORMULA.new"></a>\n            </li>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="TAG" data-i18n="risk:indicators.TAG.new"></a>\n            </li>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="SCRIPT" data-i18n="risk:indicators.SCRIPT.new"></a>\n            </li>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="SPREADSHEET" data-i18n="risk:indicators.SPREADSHEET.new"></a>\n            </li>\n        </ul>\n    </li>\n    <li>\n        <span class="k-sprite d-grid"></span>\n        <span data-i18n="ui:grid.columns"></span>\n        <ul>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="saveColumns" data-i18n="ui:grid.saveColumns"></a>\n            </li>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="loadColumns" data-i18n="ui:grid.loadColumns"></a>\n            </li>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="resetColumns" data-i18n="ui:grid.resetColumns"></a>\n            </li>\n        </ul>\n    </li>\n    <li data-key="export">\n\t\t<a href="javascript:void(0)" class="k-link" data-i18n="risk:actions.exportJson"></a>\n\t</li>\n</ul>'}),function(){var z,X;z="#riskIndicatorGrid",X=$("<a href='#' class='k-pager-refresh k-link' title='Refresh' aria-label='Refresh'> <span class='k-icon k-i-reload'></span></a>"),define("views/risk/risk.indicators",["jquery","lodash","i18n","kendo","site","ui","core/api/RiskIndicatorLevel","core/api/RiskIndicatorType","core/ui/DateTimeUI","core/ui/NumberUI","core/web/WebLocation","core/ui/grid/GridCommand","risk/ui/RiskProfileUI","exportJson/data/StrategyObjectType","exportJson/views/ExportToJsonWindow","exportJson/repository/ExpotObjectToJsonRepository","text!templates/risk/risk.indicator.toolbar.html"],function(l,s,u,c,a,t,e,n,i,r,o,d,p,m,f,b,v){var y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q;return E=r.NumberUI,g=i.DateTimeUI,I=d.GridCommand,D=e.RiskIndicatorLevel,S=n.RiskIndicatorType,c.data.DataSource,x=o.WebLocation,w=t.grid,k=w.statePersistence,"saveColumns","loadColumns","resetColumns",C=p.GroupableUI,N=m.StrategyObjectType,T=f.ExportToJsonWindow,b.ExpotObjectToJsonRepository,j=function(t,e){var n,i;if(e&&e.data)return n=e.data,"create"===(i=e.type)?t.pushCreate(n):"update"===i?t.pushUpdate(n):"destroy"===i&&t.pushDestroy(n),null},M=function(t,e){var n;if(e)return n=t.data.options,s.isArray(e)?s.each(e,j.bind(null,n)):j(n,e),null},G=function(t){var e;return e={options:t},l("body").on("domosws:risk:indicators",e,M),null},V=function(t){return l.getJSON("risk/indicator/list.json").done(t.success).fail(t.error)},h=null,_=function(){var t;return t={transport:{read:V,push:G},schema:{model:{id:"id",fields:{name:{type:"string"},basis:{type:"number"},level:{type:"number"},description:{type:"string"},created:{type:"date"}}}},sort:{field:"name",dir:"asc"}},new c.data.DataSource(t)},F=function(){return null==h&&(h=_()),h},function(t){var e;return(e=null!=t?t.id:void 0)?window.location.href=K(e):a.router.navigate(a.map.notfound),null},O=function(t){var e,n;if(n=t.grid)return e=n.dataSource.data().toJSON().map(function(t){return{id:t.id,name:t.name}}),T.open(e,N.RISK_INDICATOR),null},$=function(t,e){var n,i;if("export"!==l(e.item).data("key"))return"saveColumns"===(n=l(e.item).children(".k-link").data("key"))?H(t):"loadColumns"===n?P(t):"resetColumns"===n?W(t):n&&s.has(S,n)&&(i=S[n])&&a.router.navigate(a.map.getRiskIndicatorCreate(i)),null;O(t)},R=function(t){var e;return null!=(e=t.menu)&&e.destroy(),t.menu=null},J=function(t){var e,n;return e=l(z).find("#riskGridToolbarMenu"),c.bind(e,{}),e.localize(),null!=(n=e.data("kendoMenu"))&&n.bind("select",$.bind(null,t)),t.menu=n,null},H=function(t){var e;return null!=(e=t.gridState)&&e.save(),!0},P=function(t){var e;return null!=(e=t.gridState)&&e.load(),!0},W=function(t){var e;return null!=(e=t.gridState)&&e.reset(),!0},K=function(t){return x.resolveKendo("/risk/indicator/edit/"+t)},y=(new I).addIdView(K),(Q=y.column()).width="85px",L=function(t,n){var e,i,a,r,o,d;return d=c.template(v),o=d({}),a={dataSource:F(),editable:!1,columns:[Q,{field:"name",title:u.t("risk:fields.name"),width:"300px"},S.column({field:"type",title:u.t("risk:fields.type"),width:"300px"}),E.column({field:"basis",title:u.t("risk:fields.basis"),width:"100px"}),D.column({field:"level",title:u.t("risk:fields.level"),width:"100px"}),{field:"profiles",title:u.t("risk:profiles.profiles"),template:function(t){var e;return e=t.riskProfiles,s.chain(e).map("name").sortBy().take(5).join(", ").value()}},{field:"description",title:u.t("risk:fields.description"),width:"300px"},g.column({field:"created",title:u.t("risk:fields.creationDate")})],dataBound:function(t){var e;if(!(e=t.sender.wrapper.find(".k-pager-wrap.k-grid-pager")).find(".k-pager-refresh.k-link").length)return X.bind("click",function(){return n.set("filter",null)}),e.prepend(X)},pageable:w.defaultPageable(),height:650,scrollable:!0,toolbar:function(){return o}},w.withDefaults(a),(e=l(z)).kendoGrid(a),i=e.data("kendoGrid"),r={initialLoad:!0,key:"risk_gs_indicators",grid:t.grid=i,toolbar:{setup:J.bind(null,t),clean:R.bind(null,t)}},t.gridState=k.createState(r),null},Y=function(t,e){return t.dataSource.data(e)},A=function(t,e){return l.getJSON("risk/indicator/list.json",e).done(Y.bind(null,t))},U=function(t){return l.getJSON("risk/indicator/portfolio/column/list.json").done(Y.bind(null,t))},B=function(t){var e,n;if(n=l(z).data("kendoGrid")){if(!t)return A(n);if("profile"===t.grouping)return e={profile:t.id},A(n,e);if("portfolio"===t.grouping)return U(n)}},q=function(t,e){return"filter"===e.field&&B(t.filter),null},{updateRawModel:function(t,e){return t.filter=null},init:function(t){var e,n;return e={},t.indicatorContext=e,(n=t.model).bind("change",q.bind(null,n)),C.Groupable().widget(l("#filterId")),L(e,n),e.grid.refresh(),null}}})}.call(this),define("risk/repository/RiskGroupRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RiskGroupRepository=void 0;var i=function(){function t(){}return t.fetchIdentifiables=function(){return n.WebHttp.getJson("risk/group/id/list.json")},t}();e.RiskGroupRepository=i}),define("risk/ui/RiskGroupUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","risk/repository/RiskGroupRepository"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RiskGroupUI=void 0;var r=function(){function t(){}return t.widget=n.IdWidgetUtils.createDropList("DomosRiskGroup",a.RiskGroupRepository.fetchIdentifiables,!0),t.column=i.IdentifiableColumnUtils.createFactory(t.widget),t}();e.RiskGroupUI=r}),define("text!templates/risk/risk.grid.toolbar.html",[],function(){return'<ul id="riskGridToolbarMenu" class="gridToolbarMenu d-sprite-wrapper" data-role="menu">\n    <li>\n        <a href="javascript:void(0)" class="k-link" data-key="create">\n            <span class="k-sprite d-new"></span>\n            <span data-i18n="risk:actions.create"></span>\n        </a>\n    </li>\n    <li>\n        <span class="k-sprite d-grid"></span>\n        <span data-i18n="ui:grid.columns"></span>\n        <ul>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="saveColumns" data-i18n="ui:grid.saveColumns"></a>\n            </li>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="loadColumns" data-i18n="ui:grid.loadColumns"></a>\n            </li>\n            <li>\n                <a href="javascript:void(0)" class="k-link" data-key="resetColumns" data-i18n="ui:grid.resetColumns"></a>\n            </li>\n        </ul>\n    </li>\n    <li data-key="export">\n\t\t<a href="javascript:void(0)" class="k-link" data-i18n="risk:actions.exportJson"></a>\n\t</li>\n</ul>'}),function(){var W;W="#riskRuleGrid",define("views/risk/risk.rules",["jquery","i18n","kendo","site","ui","core/ui/grid/GridUtils","risk/ui/RiskGroupUI","core/ui/DateTimeUI","core/web/WebLocation","core/ui/grid/GridCommand","exportJson/data/StrategyObjectType","exportJson/views/ExportToJsonWindow","exportJson/repository/ExpotObjectToJsonRepository","text!templates/risk/risk.grid.toolbar.html"],function(d,l,s,i,t,e,n,a,r,o,u,c,p,m){var f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,O,U,A,F,L,P,M,j,G,q,B,V;return y=a.DateTimeUI,v=s.data.DataSource,T=e.GridUtils,w=n.RiskGroupUI,E=r.WebLocation,g=o.GridCommand,I=t.grid,C=I.statePersistence,k=u.StrategyObjectType,h=c.ExportToJsonWindow,p.ExpotObjectToJsonRepository,"saveColumns","loadColumns","resetColumns",A=function(t,e){var n,i;if(e&&e.data)return n=e.data,"create"===(i=e.type)?t.pushCreate(n):"update"===i?t.pushUpdate(n):"destroy"===i&&t.pushDestroy(n),null},U=function(t,e){var n;if(e)return n=t.data.options,_.isArray(e)?_.each(e,A.bind(null,n)):A(n,e),null},F=function(t){var e;return e={options:t},d("body").on("domosws:risk:rules",e,U),null},b=null,S=function(){var t;return t={transport:{read:{url:"risk/rule/list.json",dataType:"json"},push:F},schema:{model:{id:"id",fields:{name:{type:"string"},created:{type:"date"}},groupName:T.modelName("group")}},sort:{field:"name",dir:"asc"}},new v(t)},x=function(){return null==b&&(b=S()),b},function(t){var e;return(e=null!=t?t.id:void 0)?i.router.navigate(i.map.getRiskRuleEdit(e)):i.router.navigate(i.map.notfound),null},q=function(t){return E.resolveKendo("/risk/rule/"+t)},N=function(t){var e,n;if(n=t.grid)return e=n.dataSource.data().toJSON().map(function(t){return{id:t.id,name:t.name}}),h.open(e,k.AGGREGATION_RULE),null},B=function(t,e){var n;if("export"!==d(e.item).data("key"))return"saveColumns"===(n=d(e.item).children(".k-link").data("key"))?j(t):"loadColumns"===n?O(t):"resetColumns"===n?M(t):n&&i.router.navigate(i.map.getRiskRuleEdit()),null;N(t)},D=function(t){var e;return null!=(e=t.menu)&&e.destroy(),t.menu=null},G=function(t){var e,n;return e=d(W).find("#riskGridToolbarMenu"),s.bind(e,{}),e.localize(),null!=(n=e.data("kendoMenu"))&&n.bind("select",B.bind(null,t)),t.menu=n,null},j=function(t){var e;return null!=(e=t.gridState)&&e.save(),!0},O=function(t){var e;return null!=(e=t.gridState)&&e.load(),!0},M=function(t){var e;return null!=(e=t.gridState)&&e.reset(),!0},P=function(t){return d("body").trigger("domos:risk:rule:selected",t)},L=function(t,e){var n,i,a;return i=null,(n=t.grid)&&0<(a=n.select()).length&&(i=n.dataItem(a[0])),P(i),null},f=(new g).addIdView(q),(V=f.column()).width="85px",R=function(t){var e,n,i,a,r,o;return o=s.template(m),r=o({}),i={dataSource:x(),editable:!1,columns:[V,{field:"name",title:l.t("risk:fields.name"),width:"300px"},w.column({field:"group",title:l.t("risk:fields.group"),width:"300px"}),y.column({field:"created",title:l.t("risk:fields.creationDate")})],pageable:I.defaultPageable(),height:700,scrollable:!0,toolbar:function(){return r},change:L.bind(null,t)},I.withDefaults(i),(e=d(W)).kendoGrid(i),n=e.data("kendoGrid"),a={initialLoad:!0,key:"risk_gs_rules",grid:t.grid=n,toolbar:{setup:G.bind(null,t),clean:D.bind(null,t)}},t.gridState=C.createState(a),null},{updateRawModel:function(t,e){},init:function(t){var e;return e={},t.ruleContext=e,R(e),null}}})}.call(this),function(){var u;u="#riskRuleDetailGraph",define("views/risk/risk.rule.details",["jquery","i18n","kendo"],function(n,t,e){var r,o,i,a,d,l,s;return r="hasRuleSelected",o="currentRuleName",a=function(t){var e;return null!=(e=t.graph)&&e.destroy(),t.graph=null,n(u).empty(),null},s=function(t,e){return a(t),t.graph=M_GRAPH.createGraph(n(u),e),null},l=function(t){return s(t,t.currentRule)},d=function(t,e){var n,i,a;return(i=(n=t.data.context).model)&&(e?(i.set(r,!0),i.set(o,e.name)):i.set(r,!1),i.set(o,"")),(a=n.ruleDetailContext).currentRule=e,l(a),null},i=function(t){var e;return e={context:t},n("body").on("domos:risk:rule:selected",e,d)},{updateRawModel:function(t,e){return e[r]=!1,e[o]="",null},init:function(t){var e;return e={},t.ruleDetailContext=e,i(t),null}}})}.call(this),function(){var dt,lt;dt="#riskGroupGrid",lt="#riskGroupWindow",define("views/risk/risk.groups",["jquery","lodash","i18n","kendo","ui","core/event/SiteEvents","core/ui/Confirmation","core/ui/DateTimeUI","exportJson/data/StrategyObjectType","exportJson/views/ExportToJsonWindow","exportJson/repository/ExpotObjectToJsonRepository","text!templates/risk/risk.grid.toolbar.html"],function(d,i,l,s,t,e,n,a,r,o,u,c){var p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q,z,X,Z,tt,et,nt,it,at,rt,ot;return g=e.SiteEvents,b=a.DateTimeUI,f=s.data.DataSource,p=n.Confirmation,y=t.grid,h=y.statePersistence,"saveColumns","loadColumns","resetColumns",T=r.StrategyObjectType,v=o.ExportToJsonWindow,u.ExpotObjectToJsonRepository,z=function(t){return k(t),g.saveSuccessful(),null},X=function(t){return null},Q=function(t){return t.query=null},nt=function(t){var e,n;if(!t.query)return n=t.model.toJSON(),e={type:"POST",url:"risk/group.json",dataType:"json",data:{data:JSON.stringify(n)}},t.query=d.ajax(e).done(z.bind(null,t)).fail(X.bind(null,t)).always(Q.bind(null,t)),null},Y=function(t){return k(t),g.deleteSuccessful(),null},J=function(t){return null},H=function(t){return t.query=null},x=function(t){var e,n,i;if(!t.query&&!(i=t.model).isNew())return n={id:i.toJSON().id},e={type:"DELETE",url:"risk/group.json?"+d.param(n)},t.query=d.ajax(e).done(Y.bind(null,t)).fail(J.bind(null,t)).always(H.bind(null,t))},it=function(t,e){return G(t)&&nt(t),null},tt=function(t,e){return e&&x(t),null},R=function(t,e){return p.confirmDelete(l.t("risk:groups.confirmDestroy")).then(tt.bind(null,t)).catch(function(){})},G=function(t){var e;return!!(e=t.validator)&&e.validate()},L=function(t){var e;return null!=(e=t.validator)?e.hideMessages():void 0},P=function(t){var e,n;return n={},(e=d("#riskGroupWindow")).kendoValidator(n),t.validator=e.data("kendoValidator")},C=l.t("risk:groups.new"),I=l.t("risk:groups.edit"),S=function(){var t;return t={width:"400px",minWidth:"300px",modal:!0,visible:!1},d(lt).kendoWindow(t),d(lt).data("kendoWindow")},U=function(){return d(lt).data("kendoWindow")||S()},K=function(t){return L(t),!0},k=function(t){return U().close()},E=function(t,e){return k(t)},Z=function(t){var e;return e=t.model.isNew()?C:I,U().title(e).open().center(),null},_=function(t,e){var n,i;return i=(n=t.editContext).model,e?(i.set("id",e.id),i.set("name",e.name),i.set("created",e.created)):(i.set("id",0),i.set("name",""),i.set("created",new Date)),i.set("isModified",!1),Z(n)},N=function(t){return _(t,null)},$=function(t,e){return"isModified"!==e.field&&t.model.set("isModified",!0),null},M=function(t){var e,n,i,a;return e={},t.editContext=e,(a={id:0,name:"",created:new Date,isModified:!1,isNew:function(){return 0===this.get("id")}}).saveClick=it.bind(null,e),a.destroyClick=R.bind(null,e),a.closeClick=E.bind(null,e),i=s.observable(a),(e.model=i).bind("change",$.bind(null,e)),(n=d(lt)).localize(),s.bind(n,i),U().bind("close",K.bind(null,e)),P(e),null},V=function(t,e){var n,i;if(e&&e.data)return n=e.data,"create"===(i=e.type)?t.pushCreate(n):"update"===i?t.pushUpdate(n):"destroy"===i&&t.pushDestroy(n),null},B=function(t,e){var n;if(e)return n=t.data.options,i.isArray(e)?i.each(e,V.bind(null,n)):V(n,e),null},W=function(t){var e;return e={options:t},d("body").on("domosws:risk:groups",e,B),null},m=null,D=function(){return new f({transport:{read:{url:"risk/group/list.json",dataType:"json"},push:W},schema:{model:{id:"id",fields:{name:{type:"string"},created:{type:"date"}}}},sort:{field:"name",dir:"asc"}})},A=function(){return null==m&&(m=D()),m},F=function(t,e){return e&&_(t,e),null},O=function(t){var e,n;if(n=t.grid)return e=n.dataSource.data().toJSON().map(function(t){return{id:t.id,name:t.name}}),v.open(e,T.RISK_GROUP),null},ot=function(t,e){var n;if("export"!==d(e.item).data("key"))return"saveColumns"===(n=d(e.item).children(".k-link").data("key"))?at(t):"loadColumns"===n?q(t):"resetColumns"===n?et(t):n&&N(t),null;O(t)},w=function(t){var e;return null!=(e=t.menu)&&e.destroy(),t.menu=null},rt=function(t){var e,n;return e=d(dt).find("#riskGridToolbarMenu"),s.bind(e,{}),e.localize(),null!=(n=e.data("kendoMenu"))&&n.bind("select",ot.bind(null,t)),t.menu=n,null},at=function(t){var e;return null!=(e=t.gridState)&&e.save(),!0},q=function(t){var e;return null!=(e=t.gridState)&&e.load(),!0},et=function(t){var e;return null!=(e=t.gridState)&&e.reset(),!0},j=function(t){var e,n,i,a,r,o;return o=s.template(c),r=o({}),i={dataSource:A(),editable:!1,columns:[{command:[y.customCommand(l.t("risk:actions.view"),F.bind(null,t))],title:" ",width:"80px"},{field:"name",title:l.t("risk:fields.name"),width:"300px"},b.column({field:"created",title:l.t("risk:fields.creationDate")})],pageable:y.defaultPageable(),height:700,scrollable:!0,toolbar:function(){return r}},y.withDefaults(i),(e=d(dt)).kendoGrid(i),n=e.data("kendoGrid"),a={initialLoad:!0,key:"risk_gs_groups",grid:t.grid=n,toolbar:{setup:rt.bind(null,t),clean:w.bind(null,t)}},t.gridState=h.createState(a),null},{updateRawModel:function(t,e){return null},init:function(t){var e;return e={},t.groupContext=e,j(e),M(e),null}}})}.call(this),define("text!templates/risk/risk.profile.overload.html",[],function(){return'<div data-bind="visible: hasProfile">\n\t<h3 data-i18n="risk:menu.profileOverload"></h3>\n\n\t<div class="formConfiguration k-content">\n\t\t<label for="riskProfileOverloadFundId" data-i18n="risk:fields.vehicle"></label>\n\t\t<input id="riskProfileOverloadFundId" data-bind="value: fundId" data-role="domosvehicle" data-value-primitive="true" />\n\t</div>\n\n\t<div id="riskProfileOverloadTree" class="floatingGrid"></div>\n\t<div class="clearer"></div>\n</div>\n'}),define("risk/views/profile/overload/RiskProfileOverloadLoader",["require","exports","tslib","core/util/CancelToken","risk/repository/RiskProfileRepository"],function(t,e,d,o,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RiskProfileOverloadLoader=void 0;var n=function(){function t(t){this.model=t,this.structure=null,this.overload=null}return t.prototype.load=function(){return d.__awaiter(this,void 0,void 0,function(){var e,n,i,a,r,o;return d.__generator(this,function(t){switch(t.label){case 0:return e=this.model.profileId,n=this.model.fundId,i=this.loadStructure(e),a=this.loadOverload(e,n),i&&e?a?[3,2]:[4,i.promise]:[2,null];case 1:return r=t.sent(),[2,{profileId:e,fundId:n,structure:r,overload:null}];case 2:return[4,Promise.all([i.promise,a.promise])];case 3:return o=t.sent(),[2,{profileId:e,fundId:n,structure:o[0],overload:o[1]}]}})})},t.prototype.loadStructure=function(t){if(this.structure&&!this.structure.token.requested){if(this.structure.profileId===t)return this.structure;this.structure.cancel()}if(!t)return this.structure=null;var e=o.CancelToken.source(),n=e.token,i=e.cancel,a=l.RiskProfileRepository.getStructure(t,n);return this.structure={token:n,cancel:i,promise:a,profileId:t},this.structure},t.prototype.loadOverload=function(t,e){if(this.overload&&!this.overload.token.requested){if(this.overload.profileId===t&&this.overload.fundId===e)return this.overload;this.overload.cancel()}if(!t||!e)return this.overload=null;var n=o.CancelToken.source(),i=n.token,a=n.cancel,r=l.RiskProfileRepository.getOverload(t,e,i);return this.overload={token:i,cancel:a,promise:r,profileId:t,fundId:e},this.overload},t}();e.RiskProfileOverloadLoader=n}),define("risk/views/profile/overload/RiskProfileOverloadTreeListData",["require","exports","lodash","risk/repository/RiskProfileRepository"],function(t,e,E,a){"use strict";function D(t,e){return t+"_"+e}function S(t,e,n,i,a,r){var o=function(t){if(!t.entries)return null;var e=t.entries.sort?"name":"priority";return E.chain(t.entries.values).sortBy(e).map(function(t){return{id:t.id,name:t.name}}).value()}(e),d=r.indicators[D(n,e.id)];return{id:i,parentId:a,expanded:!0,profileId:t.profileId,fundId:t.fundId,priority:e.priority,objectId:e.id,objectName:e.name,objectType:3,groupId:null,ruleId:n,indicatorId:e.id,exclude:!!d&&d.exclude,lowerLimit:e.lowerLimit,upperLimit:e.upperLimit,lowerLimitOverload:d?d.lowerLimit:null,upperLimitOverload:d?d.upperLimit:null,entries:o}}function r(t){switch(t.objectType){case 1:return{groupId:(i=t).groupId||0,lowerLimit:i.lowerLimitOverload,lowerOverload:!E.isNil(i.lowerLimitOverload),upperLimit:i.upperLimitOverload,upperOverload:!E.isNil(i.upperLimitOverload)};case 2:return{ruleId:(n=t).ruleId||0,lowerLimit:n.lowerLimitOverload,lowerOverload:!E.isNil(n.lowerLimitOverload),upperLimit:n.upperLimitOverload,upperOverload:!E.isNil(n.upperLimitOverload)};case 3:default:return{ruleId:(e=t).ruleId||0,indicatorId:e.indicatorId||0,exclude:e.exclude,lowerLimit:e.lowerLimitOverload,lowerOverload:!E.isNil(e.lowerLimitOverload),upperLimit:e.upperLimitOverload,upperOverload:!E.isNil(e.upperLimitOverload)}}var e,n,i}Object.defineProperty(e,"__esModule",{value:!0}),e.RiskProfileOverloadTreeListData=void 0;var n=function(){function t(){}return t.createRows=function(t){for(var e,n,i,a,r,o,d,l,s,u,c=(e=t.overload)?{groups:E.keyBy(e.groups,function(t){return t.groupId}),rules:E.keyBy(e.rules,function(t){return t.ruleId}),indicators:E.keyBy(e.indicators,function(t){return D(t.ruleId,t.indicatorId)})}:{groups:{},rules:{},indicators:{}},p=[],m=0,f=0,b=t.structure.groups;f<b.length;f++){var v=b[f],y=++m;p.push((d=t,s=y,void 0,u=c.groups[(l=v).id],{id:s,parentId:null,expanded:!0,profileId:d.profileId,fundId:d.fundId,priority:l.priority,objectId:l.id,objectName:l.name,objectType:1,groupId:l.id,ruleId:null,indicatorId:null,exclude:!1,lowerLimit:l.lowerLimit,upperLimit:l.upperLimit,lowerLimitOverload:u?u.lowerLimit:null,upperLimitOverload:u?u.upperLimit:null,entries:null}));for(var h=0,g=v.rules;h<g.length;h++){var T=g[h],I=++m;p.push((n=t,a=I,r=y,void 0,o=c.rules[(i=T).id],{id:a,parentId:r,expanded:!0,profileId:n.profileId,fundId:n.fundId,priority:i.priority,objectId:i.id,objectName:i.name,objectType:2,groupId:null,ruleId:i.id,indicatorId:null,exclude:!1,lowerLimit:i.lowerLimit,upperLimit:i.upperLimit,lowerLimitOverload:o?o.lowerLimit:null,upperLimitOverload:o?o.upperLimit:null,entries:null}));for(var C=0,w=T.indicators;C<w.length;C++){var k=w[C];p.push(S(t,k,T.id,++m,I,c))}}}return p},t.save=function(e){var t=e.profileId,n=e.fundId||0,i=r(e);return a.RiskProfileRepository.saveOverload(t,n,i).then(function(t){return e.exclude=t.exclude||!1,e.lowerLimitOverload=t.lowerLimit,e.upperLimitOverload=t.upperLimit,e})},t}();e.RiskProfileOverloadTreeListData=n}),define("risk/views/profile/overload/RiskProfileOverloadTreeList",["require","exports","tslib","lodash","./RiskProfileOverloadLoader","./RiskProfileOverloadTreeListData","core/util/Logger","core/ui/grid/GridUtils","risk/web/RiskMap","i18n","core/util/ObservableUtils","core/ui/grid/column/ColumnUtils","core/ui/grid/column/ColumnStyle"],function(t,e,i,l,a,r,n,s,u,c,p,m,f){"use strict";function b(t){return new kendo.data.TreeListDataSource({transport:{read:function(e){(function(n){return i.__awaiter(this,void 0,void 0,function(){var e;return i.__generator(this,function(t){switch(t.label){case 0:return[4,n.load()];case 1:return(e=t.sent())?[2,r.RiskProfileOverloadTreeListData.createRows(e)]:[2,[]]}})})})(t).then(function(t){return e.success(t)}).catch(function(t){return n.Logger.error(t)})},update:function(e){var t=p.ObservableUtils.unpack(e.data);r.RiskProfileOverloadTreeListData.save(t).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})}},schema:{model:{id:"id",fields:{objectName:{type:"string",editable:!1},priority:{type:"number"},exclude:{type:"boolean"},lowerLimitOverload:{type:"number",nullable:!0},upperLimitOverload:{type:"number",nullable:!0}}}},sort:{field:"priority",dir:"asc"}})}function v(a,n,t){var e={field:a,title:t};m.ColumnUtils.addStyle(e,f.ColumnStyle.RIGHT_ALIGNED);var i=function(t,e,n){if(l.isNil(e))return"";var i="?";if(t.entries){var a=l.find(t.entries,["id",e]);i=a?a.name:"?"}else i=kendo.toString(e,"n2");return n?'<span class="riskOverloadDefault">'+i+"</span>":i};return e.template=function(t){var e=(t=p.ObservableUtils.unpack(t))[a];return l.isNil(e)?i(t,t[n],!0):i(t,e,!1)},e.editor=function(t,e){var n=$('<input name="'+a+'"/>').appendTo(t);$('<span class="k-invalid-msg" data-for="'+a+'"/>').appendTo(t);var i=e.model?p.ObservableUtils.getUnpacked(e.model,"entries"):null;i?n.kendoDropDownList({dataSource:{data:i},autoWidth:!0,optionLabel:"--",dataTextField:"name",dataValueField:"id",valuePrimitive:!0}):n.kendoNumericTextBox()},e}function o(t,e){kendo.destroy(t),t.empty();var n,i,a,r,o,d,l={dataSource:b(e),columns:[(r="objectName",o=c.I18N.t("risk:fields.name"),d={field:r,title:o,template:function(t){var e=(t=p.ObservableUtils.unpack(t))[r],n=t.objectType,i=t.objectId,a="";return 2===n?a=u.RiskMap.ruleEdit(i):3===n&&(a=u.RiskMap.indicatorEdit(i)),a?'<a class="d-link" href="'+a+'">'+kendo.htmlEncode(e)+"</a>":e||""}},d),(n="exclude",i=c.I18N.t("risk:fields.exclude"),a={field:n,title:i},m.ColumnUtils.addStyle(a,f.ColumnStyle.CENTER_ALIGNED),a.template=function(t){return(t=p.ObservableUtils.unpack(t))[n]?'<span class="k-icon k-i-close riskOverloadExcluded"></span>':""},a.editable=function(t){return 3===(t=p.ObservableUtils.unpack(t)).objectType},a),v("lowerLimitOverload","lowerLimit",c.I18N.t("risk:fields.lowerLimit")),v("upperLimitOverload","upperLimit",c.I18N.t("risk:fields.upperLimit")),{command:[{name:"edit"}]}],scrollable:!1,sortable:!1,pageable:!1};s.GridUtils.withDefaults(l),t.kendoTreeList(l)}function d(t,e){var n,i,a,r,o=t.data("kendoTreeList");if(o){var d=e.fundId;i=!!d,a=(n=o).columns,0<=(r=l.findIndex(a,function(t){return l.has(t,"command")}))&&(i?n.showColumn(r):n.hideColumn(r)),o.cancelRow(),o.cancelChanges(),o.dataSource.read()}}Object.defineProperty(e,"__esModule",{value:!0}),e.RiskProfileOverloadTreeList=void 0;var y=function(){function t(){}return t.create=function(t,e){var n=new a.RiskProfileOverloadLoader(e);o(t,n),e.changeEvent.register(function(){return d(t,e)})},t}();e.RiskProfileOverloadTreeList=y}),define("risk/views/profile/overload/RiskProfileOverloadModel",["require","exports","core/event/DEvent","core/data/DObservableBuilder"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RiskProfileOverloadModel=void 0;var a=function(){function t(){var t=this;this.changeEvent=new n.DEvent(!0);this.observable=i.DObservableBuilder.of({profileId:null,fundId:null}).add("hasProfile",function(t){return!!t.get("profileId")}).build(),this.observable.bindChange(function(){return t.changeEvent.fire()})}return Object.defineProperty(t.prototype,"profileId",{get:function(){return this.observable.get("profileId")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fundId",{get:function(){return this.observable.get("fundId")},enumerable:!1,configurable:!0}),t.prototype.kendo=function(){return this.observable.kendo()},t.prototype.setProfile=function(t){this.observable.set("profileId",t)},t}();e.RiskProfileOverloadModel=a}),define("risk/views/profile/overload/RiskProfileOverloadView",["require","exports","text!templates/risk/risk.profile.overload.html","i18n","./RiskProfileOverloadTreeList","./RiskProfileOverloadModel","object/ui/VehicleUI"],function(t,e,a,r,o,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RiskProfileOverloadView=void 0;var n=function(){function t(){}return t.create=function(n){var t=kendo.template(a)({}),i=new d.RiskProfileOverloadModel,e={model:i.kendo(),init:function(t){var e=t.sender.element;r.I18N.localize(e),o.RiskProfileOverloadTreeList.create(e.find("#riskProfileOverloadTree"),i),n.register(function(t){kendo.bind(e,i.kendo()),i.setProfile(t)})}};return new kendo.View(t,e)},t}();e.RiskProfileOverloadView=n}),function(){var X;X="#riskProfileGrid",define("views/risk/risk.profiles",["jquery","lodash","i18n","kendo","site","ui","core/ui/NumberUI","core/ui/IntegerUI","core/ui/DateTimeUI","core/ui/grid/GridUtils","risk/ui/RiskGroupUI","core/api/RiskIndicatorLevel","core/api/RiskIndicatorType","core/web/WebLocation","core/ui/grid/GridCommand","risk/ui/RiskIndicatorUI","core/api/ComputationMethod","core/event/DEvent","risk/views/profile/overload/RiskProfileOverloadView","exportJson/data/StrategyObjectType","exportJson/views/ExportToJsonWindow","exportJson/repository/ExpotObjectToJsonRepository","text!templates/risk/risk.grid.toolbar.html"],function(l,i,s,u,a,t,e,n,r,o,d,c,p,m,f,b,v,y,h,g,T,I,C){var w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q,z;return e.NumberUI,n.IntegerUI,D=r.DateTimeUI,E=u.data.DataSource,u.data.TreeListDataSource,A=m.WebLocation,N=f.GridCommand,b.RiskIndicatorUI,v.ComputationMethod,x=t.grid,_=x.statePersistence,o.GridUtils,d.RiskGroupUI,c.RiskIndicatorLevel,p.RiskIndicatorType,k=y.DEvent,O=h.RiskProfileOverloadView,U=g.StrategyObjectType,S=T.ExportToJsonWindow,I.ExpotObjectToJsonRepository,"saveColumns","loadColumns","resetColumns",R=a.map,V=function(t,e){var n,i;if(e&&e.data)return n=e.data,"create"===(i=e.type)?t.pushCreate(n):"update"===i?t.pushUpdate(n):"destroy"===i&&t.pushDestroy(n),null},B=function(t,e){var n;if(e)return n=t.data.options,i.isArray(e)?i.each(e,V.bind(null,n)):V(n,e),null},W=function(t){var e;return e={options:t},l("body").on("domosws:risk:profiles",e,B),null},w=null,P=function(){return new E({transport:{read:{url:"risk/profile/list.json",dataType:"json"},push:W},schema:{model:{id:"id",fields:{name:{type:"string"},description:{type:"string"},created:{type:"date"}}}},sort:{field:"name",dir:"asc"}})},j=function(){return null==w&&(w=P()),w},Q=function(t){return A.resolveKendo(R.getRiskProfileEdit(t))},L=function(t){return A.resolveKendo(R.getRiskProfileClone(t.id))},function(t){var e;return(e=null!=t?t.id:void 0)?a.router.navigate(a.map.getRiskProfileEdit(e)):a.router.navigate(a.map.notfound),null},M=function(t){var e,n;if(n=t.grid)return e=n.dataSource.data().toJSON().map(function(t){return{id:t.id,name:t.name}}),S.open(e,U.RISK_PROFILE),null},z=function(t,e){var n;if("export"!==l(e.item).data("key"))return"saveColumns"===(n=l(e.item).children(".k-link").data("key"))?K(t):"loadColumns"===n?q(t):"resetColumns"===n?J(t):n&&a.router.navigate(a.map.getRiskProfileEdit()),null;M(t)},F=function(t){var e;return null!=(e=t.menu)&&e.destroy(),t.menu=null},$=function(t){var e,n;return e=l(X).find("#riskGridToolbarMenu"),u.bind(e,{}),e.localize(),null!=(n=e.data("kendoMenu"))&&n.bind("select",z.bind(null,t)),t.menu=n,null},K=function(t){var e;return null!=(e=t.gridState)&&e.save(),!0},q=function(t){var e;return null!=(e=t.gridState)&&e.load(),!0},J=function(t){var e;return null!=(e=t.gridState)&&e.reset(),!0},Y=function(t){return l("body").trigger("domos:risk:profile:selected",t)},H=function(t,e){var n,i,a;return i=null,(n=t.grid)&&0<(a=n.select()).length&&(i=n.dataItem(a[0])),Y(i),t.event.fire(null!=i?i.id:void 0),null},G=function(t){var e,n,i,a,r,o,d;return d=u.template(C),o=d({}),e=(new N).addIdView(Q).addUrl(s.t("risk:actions.copy"),L).width("155px"),a={dataSource:j(),editable:!1,columns:[e.column(),{field:"name",title:s.t("risk:fields.name"),width:"300px"},{field:"description",title:s.t("risk:fields.description"),width:"300px"},D.column({field:"created",title:s.t("risk:fields.creationDate")})],pageable:x.defaultPageable(),height:700,scrollable:!0,toolbar:function(){return o},change:H.bind(null,t)},x.withDefaults(a),(n=l(X)).kendoGrid(a),e.bind(n),i=n.data("kendoGrid"),r={initialLoad:!0,key:"risk_gs_profiles",grid:t.grid=i,toolbar:{setup:$.bind(null,t),clean:F.bind(null,t)}},t.gridState=_.createState(r),null},{updateRawModel:function(t,e){return null},init:function(t){var e,n;return n={event:e=new k(!0)},t.profileContext=n,G(n),O.create(e).render(l("#riskProfileOverload")),null}}})}.call(this),function(){var _;_="#riskStressProfileGrid",define("views/risk/risk.stress.profiles",["jquery","lodash","i18n","kendo","site","ui","core/ui/DateTimeUI","exportJson/data/StrategyObjectType","exportJson/views/ExportToJsonWindow","exportJson/repository/ExpotObjectToJsonRepository","text!templates/risk/risk.grid.toolbar.html"],function(d,i,l,s,a,t,e,n,r,o,u){var c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R;return e.DateTimeUI,p=s.data.DataSource,f=t.grid,b=f.statePersistence,v=n.StrategyObjectType,m=r.ExportToJsonWindow,o.ExpotObjectToJsonRepository,"saveColumns","loadColumns","resetColumns",E=function(t,e){var n,i;if(e&&e.data)return n=e.data,"create"===(i=e.type)?t.pushCreate(n):"update"===i?t.pushUpdate(n):"destroy"===i&&t.pushDestroy(n),null},k=function(t,e){var n;if(e)return n=t.data.options,i.isArray(e)?i.each(e,E.bind(null,n)):E(n,e),null},D=function(t){var e;return e={options:t},d("body").on("domosws:stress:profiles",e,k),null},c=null,h=function(){return new p({transport:{read:{url:"stress/profile/list.json",dataType:"json"},push:D},schema:{model:{id:"id",fields:{name:{type:"string"},description:{type:"string"},created:{type:"date"}}}},sort:{field:"name",dir:"asc"}})},T=function(){return null==c&&(c=h()),c},I=function(t){var e;return(e=null!=t?t.id:void 0)?a.router.navigate(a.map.getStressProfileEdit(e)):a.router.navigate(a.map.notfound),null},g=function(t){var e,n;if(n=t.grid)return e=n.dataSource.data().toJSON().map(function(t){return{id:t.id,name:t.name}}),m.open(e,v.STRESS_PROFILE),null},R=function(t,e){var n;if("export"!==d(e.item).data("key"))return"saveColumns"===(n=d(e.item).children(".k-link").data("key"))?N(t):"loadColumns"===n?w(t):"resetColumns"===n?S(t):n&&a.router.navigate(a.map.getStressProfileEdit()),null;g(t)},y=function(t){var e;return null!=(e=t.menu)&&e.destroy(),t.menu=null},x=function(t){var e,n;return e=d(_).find("#riskGridToolbarMenu"),s.bind(e,{}),e.localize(),null!=(n=e.data("kendoMenu"))&&n.bind("select",R.bind(null,t)),t.menu=n,null},N=function(t){var e;return null!=(e=t.gridState)&&e.save(),!0},w=function(t){var e;return null!=(e=t.gridState)&&e.load(),!0},S=function(t){var e;return null!=(e=t.gridState)&&e.reset(),!0},C=function(t){var e,n,i,a,r,o;return o=s.template(u),r=o({}),i={dataSource:T(),editable:!1,columns:[{command:[f.customCommand(l.t("stress:profiles.actions.view"),I)],title:" ",width:"80px"},{field:"name",title:l.t("stress:profiles.fields.name"),width:"300px"},{field:"description",title:l.t("stress:profiles.fields.description")}],pageable:f.defaultPageable(),height:700,scrollable:!0,toolbar:function(){return r}},f.withDefaults(i),(e=d(_)).kendoGrid(i),n=e.data("kendoGrid"),a={initialLoad:!0,key:"stress_gs_profiles",grid:t.grid=n,toolbar:{setup:x.bind(null,t),clean:y.bind(null,t)}},t.gridState=b.createState(a),null},{updateRawModel:function(t,e){},init:function(t){var e;return e={},t.stressProfileContext=e,C(e),null}}})}.call(this),define("text!templates/risk/edit/rule.tree.edit.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="riskRuleWeight" data-i18n="risk:fields.weight"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="riskRuleWeight" placeholder="#= weight#" data-role="numerictextbox" data-bind="value: weightOverload"/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="riskRuleLower" data-i18n="risk:fields.lowerLimit"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="riskRuleLower" placeholder="#= lowerLimit#" data-role="numerictextbox" data-bind="value: lowerOverload"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="riskRuleUpper"  data-i18n="risk:fields.upperLimit"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="riskRuleUpper" placeholder="#= upperLimit#" data-role="numerictextbox" data-bind="value: upperOverload"/>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n\t<div class="formWindowButtons">\n\t\t<button class="k-primary" data-role="button" data-icon="check" data-bind="click: okClick">OK</button>\n\t\t<button data-role="button" data-icon="cancel" data-bind="click: cancelClick">Cancel</button>\n\t</div>\n</div>'}),define("risk/views/RiskProfileTreeUtils",["require","exports","tag/data/TagDefinitions","i18n","lodash"],function(t,e,o,d,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RiskProfileTreeUtils=void 0;var n=function(){function t(){}return t.limitToString=function(t,e){var n=e.indicator?e.indicator.tagDefinition:void 0,i=o.TagDefinitions.getWithEntries(n),a="";switch(t){case"lowerLimit":a=e.lowerLimit;break;case"upperLimit":a=e.upperLimit;break;default:a=null}if(l.isNil(a))return"";if(i){var r=l.find(i.entries,function(t){return t.id===a});return""+(r?d.I18N.t(r.label):"")}return""+kendo.toString(a,"n")},t}();e.RiskProfileTreeUtils=n}),define("risk/views/RiskProfileTreeEditWindow",["require","exports","core/data/DObservableBuilder","i18n","text!templates/risk/edit/rule.tree.edit.html","core/api/ComputationMethod","./RiskProfileTreeUtils","risk/ui/RiskIndicatorUI"],function(t,e,l,s,u,n,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RiskRuleTreeEditWindow=void 0;var i=function(){function t(){}return t.open=function(t){return t||(t={id:0,indicator:null,profileId:null,created:"",root:0,treeId:0,oldTreeId:0,name:"",method:n.ComputationMethod.getDefault(),methodOverload:null,weight:1,lowerLimit:0,upperLimit:0,sort:0,parentId:null,parentTreeId:null,weightOverload:null,lowerOverload:null,upperOverload:null,sortOverload:null,treeLevel:"",entries:[]}),d=t,new Promise(function(t,e){var n=kendo.template(u)({weight:kendo.toString(d.weight,"n"),lowerLimit:c.RiskProfileTreeUtils.limitToString("lowerLimit",d),upperLimit:c.RiskProfileTreeUtils.limitToString("upperLimit",d)}),i=$("<div>").addClass("formWindow").appendTo($(document.body));i.html(n),i.kendoWindow({modal:!0,width:400,minWidth:300,visible:!1});var a,r=i.data("kendoWindow");r.bind("close",function(){return kendo.destroy(i),i.remove(),t(a),!0});var o=l.DObservableBuilder.of(d).add("hasDefinition",function(t){var e=t.get("indicator");return!!e&&!!e.tagDefinition}).add("okClick",function(t){a=t.toJson(),r.close()}).add("cancelClick",function(t){a=void 0,r.close()}).build();s.I18N.localize(i),o.bind(i),r.title("Edit").open().center()});var d},t}();e.RiskRuleTreeEditWindow=i}),define("risk/data/RiskProfileTree",["require","exports"],function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.RiskTreeLevel=void 0,(n=e.RiskTreeLevel||(e.RiskTreeLevel={})).RISK_PROFILE="RiskProfile",n.RISK_RULE="RiskAggregationRule",n.RISK_IDICATOR="RiskIndicator"}),define("text!templates/risk/edit/rule.tree.edit.entry.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="riskRuleIndicator" data-i18n="risk:fields.indicator"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="riskRuleIndicator" class="k-textbox" type="text" readonly="readonly" data-bind="value: name"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="riskRuleMethod" data-i18n="risk:fields.method"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="riskRuleMethod" data-role="domoscomputationmethod" data-option-label="#= method#..." data-bind="value: methodOverload"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr> \n\t\t\t<td>\n\t\t\t\t<label for="riskRuleWeight" data-i18n="risk:fields.weight"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="riskRuleWeight" placeholder="#= weight#" data-role="numerictextbox" data-bind="value: weightOverload"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="riskRuleSort" data-i18n="risk:fields.sort"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="riskRuleSort" placeholder="#= sort#" data-role="numerictextbox" data-bind="value: sortOverload"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr data-bind="invisible: hasDefinition">\n\t\t\t<td>\n\t\t\t\t<label for="riskRuleLower" data-i18n="risk:fields.lowerLimit"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="riskRuleLower" placeholder="#= lowerLimit#" data-role="numerictextbox" data-bind="value: lowerOverload"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr data-bind="invisible: hasDefinition">\n\t\t\t<td>\n\t\t\t\t<label for="riskRuleUpper" data-i18n="risk:fields.upperLimit"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="riskRuleUpper" placeholder="#= upperLimit#" data-role="numerictextbox" data-bind="value: upperOverload"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr data-bind="visible: hasDefinition">\n\t\t\t<td>\n\t\t\t\t<label for="riskRuleLowerP" data-i18n="risk:fields.lowerLimit"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input\tid="riskRuleLowerP"\n\t\t\t\t\t\tdata-role="dropdownlist"\n\t\t\t\t\t\tdata-bind="value: lowerOverload, source: entries"\n\t\t\t\t\t\tdata-value-field="id"\n\t\t\t\t\t\tdata-text-field="name"\n\t\t\t\t\t\tdata-value-primitive="true"\n\t\t\t\t\t\tdata-option-label="From rule: #= lowerFromRuleEntry#"\n\t\t\t\t\t\tdata-auto-width="true"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr data-bind="visible: hasDefinition">\n\t\t\t<td>\n\t\t\t\t<label for="riskRuleUpperP" data-i18n="risk:fields.upperLimit"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input\tid="riskRuleUpperP"\n\t\t\t\t\t\tdata-role="dropdownlist"\n\t\t\t\t\t\tdata-bind="value: upperOverload, source: entries"\n\t\t\t\t\t\tdata-value-field="id"\n\t\t\t\t\t\tdata-text-field="name"\n\t\t\t\t\t\tdata-value-primitive="true"\n\t\t\t\t\t\tdata-option-label="From rule: #= upperFromRuleEntry#"\n\t\t\t\t\t\tdata-auto-width="true"/>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n\t<div class="formWindowButtons">\n\t\t<button class="k-primary" data-role="button" data-icon="check" data-bind="click: okClick">OK</button>\n\t\t<button data-role="button" data-icon="cancel" data-bind="click: cancelClick">Cancel</button>\n\t</div>\n</div>'}),define("risk/views/RiskRuleEntryTreeEditWindow",["require","exports","core/api/ComputationMethod","core/data/DObservableBuilder","i18n","tag/data/TagDefinitions","lodash","text!templates/risk/edit/rule.tree.edit.entry.html","./RiskProfileTreeUtils","risk/ui/RiskIndicatorUI"],function(t,e,s,u,c,p,m,f,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RiskRuleEntryTreeEditWindow=void 0;var n=function(){function t(){}return t.open=function(t){return t||(t={id:0,indicator:null,profileId:null,created:"",root:0,treeId:0,oldTreeId:0,name:"",method:s.ComputationMethod.getDefault(),methodOverload:null,weight:1,lowerLimit:0,upperLimit:0,sort:0,parentId:null,parentTreeId:null,weightOverload:null,lowerOverload:null,upperOverload:null,sortOverload:null,treeLevel:"",entries:[]}),l=t,new Promise(function(t,e){var n=m.isNil(l.method)?"":l.method,i=kendo.template(f)({method:s.ComputationMethod.getName(n),weight:kendo.toString(l.weight,"n"),lowerLimit:b.RiskProfileTreeUtils.limitToString("lowerLimit",l),upperLimit:b.RiskProfileTreeUtils.limitToString("upperLimit",l),sort:kendo.toString(l.sort,"n0"),lowerFromRuleEntry:b.RiskProfileTreeUtils.limitToString("lowerLimit",l),upperFromRuleEntry:b.RiskProfileTreeUtils.limitToString("upperLimit",l)}),a=$("<div>").addClass("formWindow").appendTo($(document.body));a.html(i),a.kendoWindow({modal:!0,width:400,minWidth:300,visible:!1});var r,o=a.data("kendoWindow");o.bind("close",function(){return kendo.destroy(a),a.remove(),t(r),!0});var d=u.DObservableBuilder.of(l).add("hasDefinition",function(t){var e=t.get("indicator");return!!e&&!!e.tagDefinition}).add("entries",function(t){var e=t.get("indicator");return p.TagDefinitions.getEntryIdentifiables(e?e.tagDefinition:null)}).add("okClick",function(t){r=t.toJson(),o.close()}).add("cancelClick",function(t){r=void 0,o.close()}).build();d.bindChange(function(t,e){switch(e){case"indicator":var n=t.get("indicator");n&&(t.set("oldTreeId",t.get("treeId")),t.set("treeId",n.id)),t.set("lowerLimit",0),t.set("upperLimit",0);break;case"methodOverload":case"weightOverload":case"lowerOverload":case"upperOverload":case"sortOverload":t.set("profileId",t.get("root"))}}),c.I18N.localize(a),d.bind(a),o.title("Edit").open().center()});var l},t}();e.RiskRuleEntryTreeEditWindow=n}),define("risk/views/RiskProfileTreeList",["require","exports","lodash","kendo","core/ui/grid/GridUtils","core/api/ComputationMethod","core/util/ObservableUtils","i18n","core/ui/NumberUI","core/ui/IntegerUI","core/ui/grid/GridToolbar","core/ui/Confirmation","core/util/Logger","./RiskProfileTreeEditWindow","core/web/WebLocation","risk/data/RiskProfileTree","./RiskRuleEntryTreeEditWindow","tag/data/TagDefinitions","core/ui/grid/column/ColumnStyle","core/ui/grid/column/ColumnUtils"],function(t,e,d,l,o,s,u,c,p,m,f,b,v,y,h,g,T,I,n,i){"use strict";function C(t){var e=t.data("kendoTreeList");if(e){var n,i,a=e.select();if(0<a.length){var r=e.dataItem(a),o=r.toJSON();o.treeLevel===g.RiskTreeLevel.RISK_IDICATOR?(i=o,T.RiskRuleEntryTreeEditWindow.open(i)).then(function(t){t&&(u.ObservableUtils.update(r,t),e.dataSource.sync())}).catch(function(t){return v.Logger.error(t)}):o.treeLevel===g.RiskTreeLevel.RISK_RULE&&(n=o,y.RiskRuleTreeEditWindow.open(n)).then(function(t){t&&(u.ObservableUtils.update(r,t),e.dataSource.sync())}).catch(function(t){return v.Logger.error(t)})}}}function w(t){$.getJSON("risk/profileTree/list.json").done(t.success).fail(t.error)}function k(t){var e={type:"POST",url:"risk/profileTree/update",dataType:"json",data:{data:l.stringify(t.data)}};$.ajax(e).done(t.success).fail(t.error)}function E(t,e){return t.get(e)}function D(t,e){return t.field&&(t.template=function(t){return function(t,e){var n=e.indicator?e.indicator.tagDefinition:void 0,i=I.TagDefinitions.getWithEntries(n),a="";switch(t){case"lowerOverload":a=e.computedLowerLimit();break;case"upperOverload":a=e.computedUpperLimit();break;default:a=null}if(d.isNil(a))return"";var r=d.isNil(E(e,t))?"blue":"red";if(i){var o=d.find(i.entries,function(t){return t.id===a});return'<span class="'+r+'">'+(o?c.I18N.t(o.label):"")+"</span>"}return'<span class="'+r+'">'+l.format("{0:n}",a)+"</span>"}(e,t)},t.sortable=!1,t.filterable=!1,i.ColumnUtils.addStyle(t,n.ColumnStyle.RIGHT_ALIGNED)),t}function S(t,e){var n=t.select(),i=t.dataItem(n);if(i){var a=i.toJSON();a.treeLevel===g.RiskTreeLevel.RISK_PROFILE||a.treeLevel!==g.RiskTreeLevel.RISK_PROFILE&&n.length<1?r(e):e.forEach(function(t){t.removeClass("k-state-disabled"),t.addClass("k-state-default")})}else r(e)}function r(t){t.forEach(function(t){t.removeClass("k-state-default"),t.addClass("k-state-disabled")})}Object.defineProperty(e,"__esModule",{value:!0}),e.RiskProfileTreeList=void 0;var a=function(){function t(){}return t.create=function(t){l.destroy(t),t.empty();var e,n,i,a=(new f.GridToolbar).addClick("Edit","k-icon k-i-edit",function(){return C(t)},"editRowId").addClick("Reset","k-icon k-i-close",function(){return function(t){var e=t.data("kendoTreeList"),n=e.select();if(0<n.length){var i=e.dataItem(n);if(!i)return;var a=i.toJSON(),r=a.treeLevel;r!==g.RiskTreeLevel.RISK_PROFILE&&b.Confirmation.confirmReset("Are you sure you want to reset overload values?").then(function(t){if(t){switch(r){case g.RiskTreeLevel.RISK_IDICATOR:a.methodOverload=null,a.weightOverload=null,a.upperOverload=null,a.lowerOverload=null,a.sortOverload=null;break;case g.RiskTreeLevel.RISK_RULE:a.weightOverload=null,a.upperOverload=null,a.lowerOverload=null}u.ObservableUtils.update(i,a),e.dataSource.sync()}}).catch(function(t){return v.Logger.error(t)})}}(t)},"resetRowId").addExcel(),r={dataSource:{transport:{read:w,update:k},schema:{model:{id:"id",fields:{name:{type:"string"},indicator:{nullable:!0,validation:{required:!0}},method:{type:"number",defaultValue:s.ComputationMethod.getDefault(),validation:{required:!0}},methodOverload:{type:"number"},weight:{type:"number",defaultValue:1,validation:{required:!0}},weightOverload:{type:"number"},lowerLimit:{type:"number",nullable:!0},upperLimit:{type:"number",nullable:!0},lowerOverload:{type:"number"},upperOverload:{type:"number"},sort:{type:"number",defaultValue:0,validation:{required:!0}},sortOverload:{type:"number"}},indicatorName:function(){return u.ObservableUtils.get(this,"indicator.name")||""},computedMethod:function(){var t=E(this,"methodOverload");return d.isNil(t)?E(this,"method"):t},computedWeight:function(){var t=E(this,"weightOverload");return d.isNil(t)?E(this,"weight"):t},computedUpperLimit:function(){var t=E(this,"upperOverload");return d.isNil(t)?E(this,"upperLimit"):t},computedLowerLimit:function(){var t=E(this,"lowerOverload");return d.isNil(t)?E(this,"lowerLimit"):t},computedSort:function(){var t=E(this,"sortOverload");return d.isNil(t)?E(this,"sort"):t}}},sort:{field:"sort",dir:"asc"}},columns:[{field:"name",title:c.I18N.t("risk:fields.name"),template:function(t){return function(t,e,n){var i="",a="";switch(n){case g.RiskTreeLevel.RISK_IDICATOR:i=t.indicator.name;var r=t.indicator.id;a=h.WebLocation.resolveKendo("/risk/indicator/edit/"+r);break;case g.RiskTreeLevel.RISK_PROFILE:i=t.name,a=h.WebLocation.resolveKendo("/risk/profile/edit/"+e);break;case g.RiskTreeLevel.RISK_RULE:i=t.name,a=h.WebLocation.resolveKendo("/risk/rule/"+e);break;default:return""}return'<a class="d-link" href="'+a+'">'+i+"</a>"}(t,t.treeId,t.treeLevel)}},(i={field:"computedMethod()",title:c.I18N.t("risk:fields.method"),template:function(t){var e=t.computedMethod();return d.isNil(e)?"":'<span class="'+(d.isNil(E(t,"methodOverload"))?"blue":"red")+'">'+(s.ComputationMethod.getName(e)||"")+"</span>"}},s.ComputationMethod.column(i)),(n={field:"computedWeight()",title:c.I18N.t("risk:fields.weight"),template:function(t){var e=t.computedWeight();return d.isNil(e)?"":'<span class="'+(d.isNil(E(t,"weightOverload"))?"blue":"red")+'">'+l.format("{0:n}",e)+"</span>"}},p.NumberUI.column(n)),D({field:"computedLowerLimit()",title:c.I18N.t("risk:fields.lowerLimit")},"lowerOverload"),D({field:"computedUpperLimit()",title:c.I18N.t("risk:fields.upperLimit")},"upperOverload"),(e={field:"computedSort()",title:c.I18N.t("risk:fields.sort"),template:function(t){var e=t.computedSort();return d.isNil(e)?"":'<span class="'+(d.isNil(E(t,"sortOverload"))?"blue":"red")+'">'+l.format("{0}",e)+"</span>"}},m.IntegerUI.column(e))],scrollable:!0,pageable:o.GridUtils.defaultPageable(),height:700,editable:!1,change:function(t){S(t.sender,[$("#resetRowId"),$("#editRowId")])},dataBound:function(t){S(t.sender,[$("#resetRowId"),$("#editRowId")])},saveChanges:function(t){t.sender.refresh()}};r.toolbar=a.template(),o.GridUtils.withDefaults(r),t.kendoTreeList(r),a.bind(t)},t}();e.RiskProfileTreeList=a}),function(){define("views/risk/risk.summary",["risk/views/RiskProfileTreeList"],function(t){var e;return e=t.RiskProfileTreeList,{updateRawModel:function(){return null},init:function(){return e.create($("#riskSummaryTreeList")),null}}})}.call(this),define("text!templates/risk/risk.html",[],function(){return'<div id="riskRoot">\n    <ul data-role="menu" class="idxNavigableMenu">\n        <li id="riskOverviewLi" class="k-state-active">\n            <a href=\'javascript:void(0)\' data-bind="click: overviewMenuClick" data-i18n="risk:menu.overview"></a>\n        </li>\n        <li id="riskSetupLi">\n            <a href=\'javascript:void(0)\' data-bind="click: setupMenuClick" data-i18n="risk:menu.setup"></a>\n        </li>\n    </ul>\n    <div class="idxNavigableContent">\n        <div data-bind="visible: isOverviewActive">\n            <div id="riskOverviewContent"></div>\n        </div>\n\n        <div data-bind="visible: isSetupActive">\n            <div id="riskTabStrip" data-role="tabstrip">\n                <ul>\n                    <li class="k-state-active">\n                        <span data-i18n="risk:menu.riskIndicators"></span>\n                    </li>\n                    <li>\n                        <span data-i18n="risk:menu.aggregationRules"></span>\n                    </li>\n                    <li>\n                        <span data-i18n="risk:menu.riskProfiles"></span>\n                    </li>\n                    <li>\n                        <span data-i18n="risk:menu.groups"></span>\n                    </li>\n                    <li>\n                        <span data-i18n="stress:profiles.title"></span>\n                    </li>\n                    <li>\n                        <span data-i18n="risk:menu.summary"></span>\n                    </li>\n                </ul>\n\n                \x3c!-- Indicators --\x3e\n                <div>\n                    <h2 data-i18n="risk:menu.riskIndicators"></h2>\n                    <div class="formConfiguration k-content" >\n\n                        <label for="filterId" data-i18n="risk:actions.filter"></label>\n\n                        <input id="filterId" data-bind="value: filter"/>\n\n                    </div>\n                    <div class="clearer"></div>\n                    <div id="riskIndicatorGrid" class="floatingGrid"></div>\n                    <div class="clearer"></div>\n                </div>\n\n\n                \x3c!-- Rules --\x3e\n                <div>\n                    <h2 data-i18n="risk:menu.aggregationRules"></h2>\n                    <div id="riskRuleGrid" class="floatingGrid"></div>\n                    <div class="clearer"></div>\n\n                    \x3c!-- <div data-bind="invisible: hasRuleSelected">\n                        <h3 data-i18n="risk:rules.noneSelected"></h3>\n                    </div>\n                     <div data-bind="visible: hasRuleSelected">\n                        <h3 data-bind="text: currentRuleName"></h3>\n\n                        <div id="riskRuleDetailGraph"></div>\n                    </div> --\x3e\n\n                </div>\n\n\n                \x3c!-- Profiles --\x3e\n                <div>\n                    <h2 data-i18n="risk:menu.riskProfiles"></h2>\n                    <div id="riskProfileGrid" class="floatingGrid"></div>\n\t\t\t\t\t<div class="clearer"></div>\n\t\t\t\t\t\n\t\t\t\t\t<div id="riskProfileOverload"></div>\n                </div>\n\n\n                \x3c!-- Groups --\x3e\n                <div>\n                    <h2 data-i18n="risk:menu.groups"></h2>\n                    <div id="riskGroupGrid" class="floatingGrid_75"></div>\n                    <div class="clearer"></div>\n                </div>\n\n                \x3c!-- Stress --\x3e\n                <div>\n                    <h2 data-i18n="stress:profiles.title"></h2>\n                    <div id="riskStressProfileGrid" class="floatingGrid_75"></div>\n                    <div class="clearer"></div>\n                </div>\n\n                \x3c!--Summary--\x3e\n                <div>\n                    <h2 data-i18n="risk:menu.riskProfiles"></h2>\n                    <div id="riskSummaryTreeList" class="floatingGrid_75"></div>\n                    <div class="clearer"></div>\n                </div>\n            </div>\n\n        </div>\n\n    </div>\n    <div>\n        <div id="riskGroupWindow" class="formWindow">\n            <table class="formTable">\n                <tr>\n                    <td>\n                        <label for="riskGroupEditName" data-i18n="risk:fields.name"></label>\n                    </td>\n                    <td>\n                        <input id="riskGroupEditName" name="riskGroupEditName" class="k-textbox" type="text" data-bind="value: name"\n                            required="required" data-i18n="[validationMessage]risk:validation.nameRequired" />\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <label for="riskGroupEditCreation" data-i18n="risk:fields.creationDate"></label>\n                    </td>\n                    <td>\n                        <input id="riskGroupEditCreation" name="riskGroupEditCreation" class="k-textbox" type="text"\n                            data-bind="display: created" data-format="g" readonly />\n                    </td>\n                </tr>\n            </table>\n            <div class="formWindowButtons">\n                <button class="k-primary" data-role="button" data-icon="check" data-bind="events:{click: saveClick}, enabled: isModified">#=\n                    $.t("risk:actions.save")#</button>\n                <button data-role="button" data-icon="close" data-bind="events:{click: destroyClick}, invisible: isNew">#=\n                    $.t("risk:actions.destroy") #</button>\n                <button data-role="button" data-icon="cancel" data-bind="click: closeClick">#=\n                    $.t("risk:actions.cancel")#</button>\n            </div>\n        </div>\n    </div>\n</div>'}),function(){define("views/risk/risk",["jquery","i18n","kendo","site","core/web/WebLocation","views/layout","views/not.found","views/risk/risk.menu","views/risk/risk.overview","views/risk/risk.indicators","views/risk/risk.rules","views/risk/risk.rule.details","views/risk/risk.groups","views/risk/risk.profiles","views/risk/risk.stress.profiles","views/risk/risk.summary","core/data/SiteCategories","text!templates/risk/risk.html"],function(i,t,a,r,e,o,n,d,l,s,u,c,p,m,f,b,v,y){var h,g,T,I,C,w,k,E;return h=[d,l,s,u,c,p,m,f,b],T=e.WebLocation,g=v.SiteCategories,E=function(){return T.setPageTitle(t.t("risk:menu.title")),null},function(){return{}},I=function(t){var e,n,i;for(i={},e=0,n=h.length;e<n;e++)h[e].updateRawModel(t,i);return i},w=function(t){var e,n;for(i("#riskRoot").localize(),e=0,n=h.length;e<n;e++)h[e].init(t);return null},k=function(){return E(),i("#riskTabStrip").kendoTabStrip().data("kendoTabStrip").element.children(".k-content").height(800),null},C=function(t,e){var n,i;return i=a.template(y)({}),n={model:e,show:k,init:w.bind(null,t)},new a.View(i,n)},{init:function(){var t,e,n,i;return n=I(t={}),e=a.observable(n),t.model=e,i=C(t,e),o.register("risk",r.map.risk,i,null,g.risk),null}}})}.call(this),define("text!templates/risk/risk.local.html",[],function(){return'<div class="idxNavigableContent">\n\t<div id="riskOverviewContent"></div>\n</div>'}),function(){define("views/risk/risk.local",["kendo","site","views/layout","views/risk/risk.overview","core/api/RiskInputLevel","text!templates/risk/risk.local.html"],function(m,t,f,b,e,v){var n,i,y,a,h;return y=e.RiskInputLevel,i=t.router,n=t.map,h=function(t){return b.init(t),null},a=function(t,e,n){var i,a,r,o,d,l,s,u,c,p;return s=parseInt(t),r=parseInt(e),d=parseInt(n),a={profile:s,level:r,asset:null,portfolio:null,entity:null,virtualPortfolio:null},r===y.ASSET?a.asset=d:r===y.FUND?a.entity=d:r===y.VIRTUAL_PORTFOLIO&&(a.virtualPortfolio=d),i={localConfiguration:a},u={},b.updateRawModel(i,u),o=m.observable(u),i.model=o,c=m.template(v)({}),l={model:i.model,init:function(){return h(i)}},p=new m.View(c,l),f.display("",p),null},{init:function(){return i.addRoute(n.riskLocal,a)}}})}.call(this),function(){var X,Z=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},tt=[].slice;X="#riskFormulaVariables",define("views/risk/indicator/formula/indicator.formula.variables",["jquery","lodash","i18n","kendo","ui","tag/data/TagDefinitions","history/data/Histories","metric/data/Metrics","core/api/MetricType","core/api/TagType","object/data/ObjectCategories","core/api/RiskIndicatorLevel","core/util/EnumUtils","core/api/ComputationMethod"],function(i,v,a,r,t,e,n,o,d,l,s,u,c,p){var m,f,b,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q,z;return h=n.Histories,T=o.Metrics,g=d.MetricType,k=l.TagType,b=c.EnumUtils,f=p.ComputationMethod,C=u.RiskIndicatorLevel,I=s.ObjectCategories,w=e.TagDefinitions,t.grid.transports,E=[k.BOOLEAN,k.DOUBLE,k.INTEGER,k.SELECT],q=function(t,e){return{key:t,label:a.t("risk:variables."+t),category:e}},m=[(S=function(t){return q(t,a.t("risk:variables.categories.constants"))})("pi"),S("e")],y=[(x=function(t){return q(t,a.t("risk:variables.categories.functions"))})("sqrt"),x("log"),x("log10"),x("abs"),x("min"),x("max")],j=function(t){return{key:f.getKey(t),label:f.getName(t),category:a.t("risk:variables.categories.valuations")}},G=function(t){var e,n,i,a,r;for(r=[],e=0,n=(a=b.list(f)).length;e<n;e++)i=a[e],r.push(j(i));return r},O=function(t){return{key:t.key,label:t.name,category:a.t("risk:variables.categories.histories")}},U=function(t){var e,n,i,a,r;for(r=[],n=0,i=(a=h.listByObjectCategory(t)).length;n<i;n++)e=a[n],r.push(O(e));return r},A=function(t){return{key:t,label:a.t("metric:"+t),category:a.t("risk:variables.categories.metrics")}},F=function(t){var e,n,i,a,r,o,d;for(d=[],e=0,i=(r=T.listByObjectCategory(t)).length;e<i;e++)n=(a=r[e]).key,(o=a.type)===g.BUCKET?(d.push(A(n+"Less5")),d.push(A(n+"Fifteen")),d.push(A(n+"More15"))):o===g.MARKET?(d.push(A(n+"Lower")),d.push(A(n+"Current")),d.push(A(n+"Higher"))):d.push(A(n));return d},Q=function(t){var e;return e=t.type,0<=Z.call(E,e)},L=function(t){return{key:t.stringId,label:a.t(t.label),category:a.t(t.category.name)}},P=function(t){var e,n,i,a,r;for(r=[],n=0,i=(a=w.listByObjectCategory(t)).length;n<i;n++)e=a[n],Q(e)&&r.push(L(e));return r},R=function(t){return t.isOf(I.investmentVehicles)?[{key:"commitments",label:a.t("data:fields.commitments"),category:a.t("risk:variables.categories.funds")},{key:"capitalCall",label:a.t("data:fields.capitalCall"),category:a.t("risk:variables.categories.funds")},{key:"recallable",label:a.t("data:fields.recallable"),category:a.t("risk:variables.categories.funds")},{key:"distribution",label:a.t("data:fields.distribution"),category:a.t("risk:variables.categories.funds")},{key:"adjustedNav",label:a.t("data:fields.adjustedNav"),category:a.t("risk:variables.categories.funds")}]:[]},N=function(t){return t.isOf(I.properties)?[{key:"insuredValue",label:a.t("data:fields.insuredValue"),category:a.t("risk:variables.categories.valuations")},{key:"reconstructionValue",label:a.t("data:fields.reconstructionValue"),category:a.t("risk:variables.categories.valuations")}]:[]},V=function(t){return I.get(t)},B=function(t){var e,n;return n=t.get("level"),e=t.get("filterCategories").toJSON(),n===C.FUND?[I.investmentVehicles]:n===C.PORTFOLIO?[I.portfolios]:n===C.ASSET?0===e.length?[I.assets]:v.map(e,V):[I.objects]},H=function(t,e){return t.push.apply(t,G()),t.push.apply(t,U(e)),t.push.apply(t,F(e)),t.push.apply(t,P(e)),t.push.apply(t,N(e)),t.push.apply(t,R(e))},D=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},z=function(t,e){var n,i,a,r,o;for(H(o=[],t),i="("+t.singleName+") ",n=0,a=o.length;n<a;n++)(r=o[n]).key=e+D(r.key),r.label=i+r.label;return o},M=function(t){return t.isOf(I.debts)?z(I.assets,"asset"):t.isOf(I.companyShares)?z(I.companies,"company"):[]},Y=function(t){var e,n,i,a,r;for(e=B(t),(r=[]).push.apply(r,m),r.push.apply(r,y),i=0,a=e.length;i<a;i++)n=e[i],H(r,n),r.push.apply(r,M(n));return r},_=function(t){var e,n,i,a,r,o,d,l,s,u,c,p,m,f,b;for(a={id:0},f=v.groupBy(t,"category"),o=[],d=0,u=(e=v.chain(f).keys().sortBy(function(t){return t}).value()).length;d<u;d++)for(n=e[d],r={id:l=++a.id,key:"",label:n,parentId:null},o.push(r),i=f[n],s=0,c=(p=v.sortBy(i,"label")).length;s<c;s++)m=p[s],b={id:++a.id,key:m.key,label:m.label,parentId:l},o.push(b);return o},$=function(t){var e,n,i,a;return a=Y(t.model),(i=t.varContext).variableKeys=v.map(a,"key"),e=_(a),(n=i.variables).splice.apply(n,[0,n.length].concat(tt.call(e))),null},K=function(t){var e,n;if((n=i(X).data("kendoTreeList"))&&(e=n.dataSource))return e.data(t.varContext.variables.toJSON()),null},W=function(t){var e,n;return e={data:t.varContext.variables.toJSON(),schema:{model:{id:"id",expanded:!0}}},n={dataSource:new r.data.TreeListDataSource(e),columns:[{field:"label",title:a.t("risk:variables.label")},{field:"key",title:a.t("risk:variables.key")}],height:500},i(X).kendoTreeList(n),t.varContext.variables.bind("change",K.bind(null,t)),null},J=function(t,e){var n;return"level"!==(n=e.field)&&"filterCategories"!==n||$(t),!0},{getVariables:function(t){return t.varContext.variableKeys},updateRawModel:function(t){return!0},updateModel:function(t,e){},init:function(t){var e,n;return n=[],e={variables:new r.data.ObservableArray(n),variableKeys:[]},t.varContext=e,$(t),t.model.bind("change",J.bind(null,t)),W(t),null}}})}.call(this),function(){var m;m="riskFormula",define("views/risk/indicator/formula/indicator.formula",["jquery","lodash","i18n","kendo","views/risk/indicator/formula/indicator.formula.variables"],function(t,r,o,e,n){var i,d,a,l,s,u,c,p;return a=function(){return t("#riskFormula")},i=function(t){return t.replace(/`/gi,"'").replace(/log10/gi,"log_10").replace(/ccu/g,"c cu ").replace(/prop/g,"pro p ").replace(/in/g,"i n ").replace(/le/g,"l e ").replace(/ge/g,"g e ").replace(/rr/g,"r r ").replace(/or/g,"o r ").replace(/to/g,"t o ").replace(/del/g,"d el ")},function(t){return t?"`"+i(t)+"`":""},function(t){},u=function(t){return t.model.get("formula"),setTimeout(function(){})},c=function(){var t;return null!=(t=a().get(0))?t.value:void 0,!0},p=function(t){return t.toLowerCase()},l=function(t){var e;return e=n.getVariables(t),r.chain(e).map(p).uniq().value()},d=function(t,e){var n,i,a;return(a=e.replace(/\s/g,"").match(/[a-zA-Z][a-zA-Z0-9_]*/g))?(i=r.chain(a).map(p).uniq().value(),n=l(t),r.difference(i,n)):[]},function(t,e){var n,i,a;return!e.is("[name="+m+"]")||(!(a=e.val())||(!((n=d(t,a))&&0<n.length)||(i={variables:n.join(",")},e.attr("data-formula-msg",o.t("risk:validation.unknownVariables",i)),!1)))},s=function(t,e){return"formula"===e.field&&u(t),!0},{updateValidatorOptions:function(t,e){return e},updateRawModel:function(t){return n.updateRawModel(t),!0},updateModel:function(t,e){return n.updateModel(t,e)},init:function(t){return t.model.bind("change",s.bind(null,t)),u(t),a().keyup(c),n.init(t),null}}})}.call(this),define("core/api/RiskFilterBehavior",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RiskFilterBehavior=void 0;var r,o;(r=e.RiskFilterBehavior||(e.RiskFilterBehavior={}))[r.DEFAULT_VALUE=1]="DEFAULT_VALUE",r[r.IGNORE=2]="IGNORE",(o=e.RiskFilterBehavior||(e.RiskFilterBehavior={})).getName=a.EnumUtils.createNameFn("risk:RiskFilterBehavior",o),o.widget=i.EnumWidgetUtils.createDropList("DomosRiskFilterBehavior",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget),o.hasDefaultValue=function(t){return t===o.DEFAULT_VALUE}}),define("core/grouping/GroupingUI",["require","exports","lodash","i18n","tag/data/TagDefinitions","object/data/ObjectCategories","core/ui/grid/column/IdentifiableColumnUtils","core/ui/widget/IdWidgetUtils"],function(t,e,a,r,o,d,i,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GroupingUI=e.GroupingUtil=void 0;var n,s=function(){function t(){}return t.create=function(t,e){var n=l.IdWidgetUtils.createDropList(t,e,!0);return{widget:n,column:i.IdentifiableColumnUtils.createFactory(n)}},t}();function u(t){var e={autoWidth:!0,dataSource:{transport:{read:function(t){c().then(function(t){return t.map(function(t){return{id:t.id,name:t.name,value:t.value}})}).then(t.success).catch(t.error)}},schema:{model:{id:"id",fields:{id:{type:"number"},name:{type:"string"}}}}},dataTextField:"name",dataValueField:"value",optionLabel:"--"};return t.kendoDropDownList(e)}function c(){var i=[{id:1,name:r.I18N.t("data:predicate.balanceSheet"),value:"dms_rule_balance_sheet"},{id:2,name:r.I18N.t("data:predicate.category"),value:"dms_rule_category"},{id:3,name:r.I18N.t("data:predicate.country"),value:"dms_rule_country"},{id:4,name:r.I18N.t("data:predicate.workflowStatus"),value:"dms_rule_workflow"}];return o.TagDefinitions.fullListByObjectCategory(d.ObjectCategories.assets).forEach(function(t){var e,n={id:(e=t).id,name:"[Tag] "+r.I18N.t(e.label),value:e.stringId};i.push(n)}),Promise.resolve(i)}e.GroupingUtil=s,e.GroupingUI={column:(n=s.create("DomosGrouping",c)).column,widget:n.widget,create:function(){return{grouping:{widget:function(t){return u(t)},column:i.IdentifiableColumnUtils.createFactory(u)}}},getGrouping:function(t){return function(e){switch(e){case"dms_rule_balance_sheet":return{id:1,name:r.I18N.t("data:predicate.balanceSheet"),value:e};case"dms_rule_category":return{id:2,name:r.I18N.t("data:predicate.category"),value:e};case"dms_rule_country":return{id:3,name:r.I18N.t("data:predicate.country"),value:e};case"dms_rule_workflow":return{id:4,name:r.I18N.t("data:predicate.workflowStatus"),value:e};default:var t=o.TagDefinitions.fullListByObjectCategory(d.ObjectCategories.assets),n=a.filter(t,function(t){return t.stringId===e}),i=a.first(n);return i?{id:i.id,name:i.label,value:e}:null}}(t)}}}),define("text!templates/risk/edit/indicator.formula.html",[],function(){return'<div id="riskIndicatorRoot">\n    <h1 data-i18n="risk:indicators.FORMULA.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="risk:indicators.FORMULA.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="riskIndicatorActions"></div>\n\n    <h2 data-i18n="risk:sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="risk:fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" name="sid" class="k-textbox" type="text" data-bind="value: sid"/>\n            </td>\n            <td>\n                <label for="created" data-i18n="risk:fields.creationDate"></label>\n            </td>\n            <td>\n                <input id="created" name="created" class="k-textbox" type="text" data-bind="display: created"\n                        data-format="g" readonly="readonly" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="risk:fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required"\n                    data-i18n="[validationMessage]risk:validation.nameRequired" />\n            </td>\n            <td></td>\n            <td></td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="risk:fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox"\n                    data-bind="value: description"></textarea>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="basis" data-i18n="risk:fields.basis"></label>\n            </td>\n            <td>\n                <input id="basis" name="basis" data-role="numerictextbox" data-bind="value: basis" required="required"\n                    data-i18n="[data-required-msg]risk:validation.basisRequired;[data-nonzero-msg]risk:validation.basisNonZero" />\n            </td>\n            <td>\n                <label for="constant" data-i18n="risk:fields.constant"></label>\n            </td>\n            <td>\n                <input id="constant" name="Constant" data-role="numerictextbox" data-bind="value: constant"\n                    required="required" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="ascending" data-i18n="risk:fields.ascending"></label>\n            </td>\n            <td>\n                <input id="ascending" name="Ascending" type="checkbox" class="k-checkbox" data-bind="checked: ascending" />\n                <label for="ascending" class="k-checkbox-label">&nbsp;</label>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="percent" data-i18n="risk:fields.percent"></label>\n            </td>\n            <td>\n                <input id="percent" type="checkbox" class="k-checkbox" data-bind="checked: percent" />\n                <label for="percent" class="k-checkbox-label">&nbsp;</label>\n            </td>\n        </tr>\n    </table>\n\n    <h2 data-i18n="risk:sections.behaviors"></h2>\n\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="level" data-i18n="risk:fields.level"></label>\n            </td>\n            <td>\n                <input id="level" name="level" data-role="domosriskindicatorlevel" data-bind="value: level" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="defaultValue" data-i18n="risk:fields.defaultValue"></label>\n            </td>\n            <td data-bind="invisible: percent">\n                <input id="defaultValue" name="defaultValue" data-role="numerictextbox"\n                    data-bind="value: defaultValue" />\n            </td>\n            <td data-bind="visible: percent">\n                <input id="defaultValue" name="defaultValue" data-role="domospercent"\n                    data-bind="value: defaultValue" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="missingDataBehavior" data-i18n="risk:fields.missingDataBehavior"></label>\n            </td>\n            <td>\n                <input id="missingDataBehavior" name="missingDataBehavior" data-role="domosriskmissingbehavior"\n                    data-bind="value: missingDataBehavior" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="filterCategory" data-i18n="risk:fields.filterCategory"\n                    data-bind="visible: canFilter"></label>\n            </td>\n            <td>\n                <input id="filterCategory" name="filterCategory" data-role="domosassetcategorymultiselect"\n                    data-bind="value: filterCategories, visible: canFilter" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="filterBehavior" data-i18n="risk:fields.filterBehavior"\n                    data-bind="visible: hasFilter"></label>\n            </td>\n            <td>\n                <input id="filterBehavior" name="filterBehavior" data-role="domosriskfilterbehavior"\n                    data-bind="value: filterBehavior, visible: hasFilter" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="filterDefaultValue" data-i18n="risk:fields.filterDefaultValue"\n                    data-bind="visible: hasFilterDefault"></label>\n            </td>\n            <td>\n                <input id="filterDefaultValue" name="filterDefaultValue" data-role="numerictextbox"\n                    data-bind="value: filterDefaultValue, visible: hasFilterDefault" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="balanceSheetFilter" data-i18n="risk:fields.balanceSheetFilter"\n                    data-bind="visible: canFilter"></label>\n            </td>\n            <td>\n                <input id="balanceSheetFilter" data-role="domosbalancesheetmultiselect"\n                    data-bind="value: balanceSheetFilter, visible: canFilter" />\n            </td>\n        </tr>\n        <tr data-bind="visible: canFilter">\n            <td>\n                <label for="portfolioColumn" data-i18n="risk:fields.portfolioColumn"></label>\n            </td>\n            <td>\n                <input id="portfolioColumn" type="checkbox"class="k-checkbox" data-bind="checked: portfolioColumn" />\n                <label for="portfolioColumn" class="k-checkbox-label">&nbsp;</label>\n            </td>\n        </tr>\n    </table>\n    <h3 data-i18n="risk:fields.rules" data-bind="visible:isFund"></h3>\n\n    <div id="rulesBuilder" data-bind="visible:isFund"></div>\n    <h2 data-i18n="risk:sections.grouping" data-bind="visible:isFund"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="grouping" data-i18n="risk:fields.groupingBy" data-bind="visible: isFund"></label>\n            </td>\n            <td>\n                <input id="grouping" data-bind="value: grouping, visible:isFund" />\n            </td>\n        </tr>\n\n    </table>\n    <h2 data-i18n="risk:sections.formula"></h2>\n\n    \x3c!--p id="riskFormulaMath" class="riskFormulaMath"></p--\x3e\n\n    <textarea id="riskFormula" name="riskFormula" class="k-textbox riskFormula" data-bind="value: formula"\n        required="required" data-i18n="[validationMessage]risk:validation.formulaRequired"></textarea>\n\n    <h3 data-i18n="risk:sections.variables"></h3>\n\n    <div id="riskFormulaVariables" class="floatThird"></div>\n    <div class="clearer"></div>\n\n</div>'}),define("core/api/RiskMissingBehavior",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RiskMissingBehavior=void 0;var r,o;(r=e.RiskMissingBehavior||(e.RiskMissingBehavior={}))[r.DEFAULT_AND_RAISE=1]="DEFAULT_AND_RAISE",r[r.DEFAULT_VALUE=2]="DEFAULT_VALUE",r[r.IGNORE=3]="IGNORE",r[r.IGNORE_AND_RAISE=4]="IGNORE_AND_RAISE",(o=e.RiskMissingBehavior||(e.RiskMissingBehavior={})).getName=a.EnumUtils.createNameFn("risk:RiskMissingBehavior",o),o.widget=i.EnumWidgetUtils.createDropList("DomosRiskMissingBehavior",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),function(){var g=[].slice;define("views/risk/indicator/formula/indicator",["jquery","i18n","ui","views/risk/indicator/formula/indicator.formula","core/api/RiskFilterBehavior","core/api/RiskIndicatorLevel","object/query/AdvancedAssetQueryBuilder","core/api/PortfolioViewerColumn","core/grouping/GroupingUI","text!templates/risk/edit/indicator.formula.html","object/ui/AssetCategoryUI","core/api/RiskMissingBehavior"],function(n,t,e,o,i,a,r,d,l,s){var u,c,p,m,f,b,v,y,h;return p=i.RiskFilterBehavior,m=a.RiskIndicatorLevel,u=r.AdvancedAssetQueryBuilder,d.PortfolioViewerColumn,c=l.GroupingUI,v=function(t,e){return!0},b=function(t){var e;return t.predicateLocked||(e=t.rules.getRules(),h(t,e)),null},f=function(t){var e;return e=n("#rulesBuilder"),t.rules=u.init(e),t.rules.event.register(b.bind(null,t)),null},h=function(t,e){var n;return n=t.model,e?n.set("rules",JSON.stringify(e)):n.set("rules","")},y=function(t){var e;e=t.model.get("rules");try{return JSON.parse(e)}catch(t){return t,null}},{updateValidatorOptions:function(t,e){return o.updateValidatorOptions(t,e),null==e.rules&&(e.rules={}),e.rules.nonzero=v.bind(null,t),e},getTemplates:function(){return{view:s}},createRawModel:function(){var t;return t={id:0,created:new Date,sid:"",name:"",basis:0,level:0,filterCategories:[],balanceSheetFilter:[],filterBehavior:0,errorBehavior:0,missingDataBehavior:0,description:"",type:1,constant:0,ascending:!1,percent:!1,filterDefaultValue:0,defaultValue:0,formula:"",portfolioColumn:!1,rules:null,grouping:null,canFilter:function(){return m.canFilter(this.get("level"))},hasFilter:function(){return this.canFilter()&&0<this.get("filterCategories").length},hasFilterDefault:function(){return this.hasFilter()&&p.hasDefaultValue(this.get("filterBehavior"))},isFund:function(){return m.isFund(this.get("level"))}},o.updateRawModel(t),t},updateModel:function(t,e){var n,i,a,r;return t.set("id",e.id),t.set("created",new Date(e.created)),t.set("sid",e.sid),t.set("name",e.name),t.set("basis",e.basis),t.set("level",e.level),t.set("filterBehavior",e.filterBehavior),t.set("errorBehavior",e.errorBehavior),t.set("missingDataBehavior",e.missingDataBehavior),t.set("description",e.description),t.set("type",e.type),t.set("constant",e.constant),t.set("ascending",e.ascending),t.set("percent",e.percent),t.set("filterDefaultValue",e.filterDefaultValue),t.set("defaultValue",e.defaultValue),t.set("formula",e.formula),t.set("portfolioColumn",e.portfolioColumn),t.set("rules",e.rules),t.set("grouping",c.getGrouping(e.grouping)),(a=t.get("filterCategories")).splice.apply(a,[0,a.length].concat(g.call(e.filterCategories))),(n=t.get("balanceSheetFilter")).splice.apply(n,[0,n.length].concat(g.call(e.balanceSheetFilter))),o.updateModel(t,e),f(i={}),i.predicateLocked=!0,i.model=t,r=y(i),i.rules.setRules(r),i.predicateLocked=!1,null},init:function(t){return o.init(t),c.create().grouping.widget(n("#grouping"))}}})}.call(this),define("text!templates/risk/edit/indicator.tag.html",[],function(){return'<div id="riskIndicatorRoot">\n    <h1 data-i18n="risk:indicators.TAG.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="risk:indicators.TAG.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="riskIndicatorActions"></div>\n\n    <h2 data-i18n="risk:sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="risk:fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" name="sid" class="k-textbox" type="text" data-bind="value: sid"/>\n            </td>\n            <td>\n                <label for="created" data-i18n="risk:fields.creationDate"></label>\n            </td>\n            <td>\n                <input id="created" name="created" class="k-textbox" type="text" data-bind="display: created"\n                    data-format="g" readonly="readonly" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="risk:fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required"\n                    data-i18n="[validationMessage]risk:validation.nameRequired" />\n            </td>\n            <td></td>\n            <td></td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="risk:fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="basis" data-i18n="risk:fields.basis"></label>\n            </td>\n            <td>\n                <input id="basis" name="basis" data-role="numerictextbox" data-bind="value: basis" required="required"\n                    data-i18n="[data-required-msg]risk:validation.basisRequired;[data-nonzero-msg]risk:validation.basisNonZero" />\n            </td>\n            <td>\n                <label for="constant" data-i18n="risk:fields.constant"></label>\n            </td>\n            <td>\n                <input id="constant" name="Constant" data-role="numerictextbox" data-bind="value: constant" required="required" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="ascending" data-i18n="risk:fields.ascending"></label>\n            </td>\n            <td>\n                <input id="ascending" name="Ascending" type="checkbox" class="k-checkbox" data-bind="checked: ascending" />\n                <label for="ascending" class="k-checkbox-label">&nbsp;</label>\n            </td>\n        </tr>\n    </table>\n\n    <h2 data-i18n="risk:sections.behaviors"></h2>\n\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="level" data-i18n="risk:fields.level"></label>\n            </td>\n            <td>\n                <input id="level" name="level" data-role="domosriskindicatorlevel" data-bind="value: level" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label data-i18n="risk:fields.defaultValue"></label>\n            </td>\n            <td>\n                <span class="hint" data-i18n="risk:fields.seeTag"></span>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="missingDataBehavior" data-i18n="risk:fields.missingDataBehavior"></label>\n            </td>\n            <td>\n                <input id="missingDataBehavior" name="missingDataBehavior" data-role="domosriskmissingbehavior"\n                    data-bind="value: missingDataBehavior" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="filterCategory" data-i18n="risk:fields.filterCategory" data-bind="visible: canFilter"></label>\n            </td>\n            <td>\n                <input id="filterCategory" name="filterCategory" data-role="domosassetcategorymultiselect" data-bind="value: filterCategories, visible: canFilter" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="filterBehavior" data-i18n="risk:fields.filterBehavior" data-bind="visible: hasFilter"></label>\n            </td>\n            <td>\n                <input id="filterBehavior" name="filterBehavior" data-role="domosriskfilterbehavior" data-bind="value: filterBehavior, visible: hasFilter" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="filterDefaultValue" data-i18n="risk:fields.filterDefaultValue" data-bind="visible: hasFilterDefault"></label>\n            </td>\n            <td>\n                <input id="filterDefaultValue" name="filterDefaultValue" data-role="numerictextbox" data-bind="value: filterDefaultValue, visible: hasFilterDefault" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="balanceSheetFilter" data-i18n="risk:fields.balanceSheetFilter" data-bind="visible: canFilter"></label>\n            </td>\n            <td>\n                <input id="balanceSheetFilter" data-role="domosbalancesheetmultiselect" data-bind="value: balanceSheetFilter, visible: canFilter" />\n            </td>\n        </tr>\n        <tr data-bind="visible: canFilter">\n            <td>\n                <label for="portfolioColumn" data-i18n="risk:fields.portfolioColumn" ></label>\n            </td>\n            <td>\n                <input id="portfolioColumn" type="checkbox" class="k-checkbox" data-bind="checked: portfolioColumn" />\n                <label for="portfolioColumn" class="k-checkbox-label">&nbsp;</label>\n            </td>\n        </tr>\n    </table>\n    \n    <h2 data-i18n="risk:sections.tagDefinition"></h2>\n\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="indicatorDefinition" data-i18n="risk:fields.tagDefinition"></label>\n            </td>\n            <td>\n                <input id="indicatorDefinition" name="Definition" data-bind="value: definition" required />\n            </td>\n            <td></td>\n            <td></td>\n        </tr>\n        <tr data-bind="visible: hasDefinition">\n            <td>\n                <label for="indicatorDefaultValue" data-i18n="risk:fields.defaultValue"></label>\n            </td>\n            <td>\n                <input id="indicatorDefaultValue" data-bind="value: defaultValueEntry" />\n            </td>\n            <td>\n                <label for="indicatorFilterDefaultValue" data-i18n="risk:fields.filterDefaultValue" data-bind="visible: hasFilterDefault"></label>\n            </td>\n            <td>\n                <input id="indicatorFilterDefaultValue" data-bind="value: filterDefaultValueEntry, visible: hasFilterDefault" />\n            </td>\n        </tr>\n    </table>\n</div>'}),function(){var S,N=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},x=[].slice;S="#indicatorDefinition",define("views/risk/indicator/tag/indicator",["jquery","lodash","kendo","i18n","ui","tag/data/TagDefinitions","core/api/TagType","object/data/ObjectCategories","core/api/RiskFilterBehavior","core/api/RiskIndicatorLevel","text!templates/risk/edit/indicator.tag.html","object/ui/AssetCategoryUI","core/api/RiskMissingBehavior"],function(m,i,f,b,t,e,n,a,r,o,d){var l,s,u,v,c,p,y,h,g,T,I,C,w,k,E,D;return c=n.TagType,s=r.RiskFilterBehavior,u=o.RiskIndicatorLevel,l=a.ObjectCategories,v=e.TagDefinitions,p=[c.SELECT],C=function(t){var e;return e=t.type,0<=N.call(p,e)},g=function(t){return l.get(t)},h=function(t){var e,n;return n=t.get("level"),e=t.get("filterCategories").toJSON(),n===u.FUND?[l.investmentVehicles]:n===u.PORTFOLIO?[l.portfolios]:n===u.ASSET?0===e.length?[l.assets]:i.map(e,g):[l.objects]},k=function(t){var e,n,i,a,r,o,d,l,s,u,c,p;for(a=[],o=0,l=(e=h(t)).length;o<l;o++)for(n=e[o],d=0,s=(c=v.listByObjectCategory(n)).length;d<s;d++)i=c[d],C(i)&&a.push({id:i.id,name:b.t(i.label)});return{data:a,schema:{model:{fields:{id:{type:"number"},name:{type:"string"}}}},sort:{field:"name",dir:"asc"}},p=new f.data.DataSource({data:a}),(r=m(S).data("kendoDropDownList"))?r.setDataSource(p):(u={autoWidth:!0,dataSource:p,dataTextField:"name",dataValueField:"id",optionLabel:"--",valuePrimitive:!0},m(S).kendoDropDownList(u)),null},w=function(t){return{id:t.id,name:b.t(t.label),priority:t.priority}},T=function(t){var e;return e=t.sort?"name":"priority",i.chain(t.entries).map(w).sortBy(e).value()},E=function(t,e){var n,i;return(n=t.data("kendoDropDownList"))?n.setDataSource(e):(i={autoWidth:!0,dataSource:e,dataTextField:"name",dataValueField:"id",optionLabel:"--",valuePrimitive:!0},t.kendoDropDownList(i)),null},D=function(t){var e,n,i;return n=[],(e=v.get(t.get("definition")))&&e.entries&&(n=T(e)),i=new f.data.DataSource({data:n}),E(m("#indicatorDefaultValue"),i),E(m("#indicatorFilterDefaultValue"),i),null},I=function(t){var e;return"level"===(e=t.field)||"filterCategories"===e?(this.set("definition",null),k(this)):"definition"===t.field&&(this.set("filterDefaultValueEntry",null),this.set("defaultValueEntry",null),D(this)),null},y=function(t){return t.bind("change",I)},{updateValidatorOptions:function(t,e){return e},getTemplates:function(){return{view:d}},createRawModel:function(){return{id:0,created:new Date,sid:"",name:"",basis:0,level:0,filterCategories:[],balanceSheetFilter:[],filterBehavior:0,errorBehavior:0,missingDataBehavior:0,description:"",type:2,constant:0,ascending:!1,definition:null,filterDefaultValueEntry:null,defaultValueEntry:null,portfolioColumn:!1,canFilter:function(){return u.canFilter(this.get("level"))},hasFilter:function(){return this.canFilter()&&0<this.get("filterCategories").length},hasFilterDefault:function(){return this.hasFilter()&&s.hasDefaultValue(this.get("filterBehavior"))},hasDefinition:function(){return!!this.get("definition")}}},updateModel:function(t,e){var n,i;return t.set("id",e.id),t.set("created",new Date(e.created)),t.set("sid",e.sid),t.set("name",e.name),t.set("basis",e.basis),t.set("level",e.level),t.set("filterBehavior",e.filterBehavior),t.set("errorBehavior",e.errorBehavior),t.set("missingDataBehavior",e.missingDataBehavior),t.set("description",e.description),t.set("type",e.type),t.set("constant",e.constant),t.set("ascending",e.ascending),t.set("portfolioColumn",e.portfolioColumn),(i=t.get("filterCategories")).splice.apply(i,[0,i.length].concat(x.call(e.filterCategories))),(n=t.get("balanceSheetFilter")).splice.apply(n,[0,n.length].concat(x.call(e.balanceSheetFilter))),t.set("definition",e.definition),t.set("filterDefaultValueEntry",e.filterDefaultValueEntry),t.set("defaultValueEntry",e.defaultValueEntry),null},init:function(t){var e;return e=t.model,y(e),k(e),D(e),null}}})}.call(this),function(){var I;I="#scriptTestResult",define("views/risk/indicator/script/indicator.test",["jquery","lodash","i18n","kendo","core/ui/IntegerUI","core/ui/NumberUI","portfolio/data/PortfolioTransparency"],function(r,n,i,a,t,e,o){var d,l,s,u,c,p,m,f,b,v,y,h,g,T;return l=e.NumberUI,d=t.IntegerUI,s=o.PortfolioTransparency,u=function(){var t;return t=r(I),a.destroy(t),t.empty(),null},m=function(t,e){if(e)return t.editor.gotoLine(e.line)},f=function(t,e){var n,i,a;return n=null,(i=r(I).data("kendoGrid"))&&0<(a=i.select()).length&&(n=i.dataItem(a[0])),m(t,n),null},y=function(t,e){var n;return u(),n={dataSource:{data:[e]},columns:[d.column({field:"line",title:i.t("risk:fields.line")}),{field:"message",title:i.t("risk:fields.message")}],editable:!1,scrollable:!1,selectable:!0,change:f.bind(null,t)},e.suggestion&&n.columns.push({field:"suggestion",title:i.t("risk:fields.suggestion"),template:function(t){return i.t("errors:"+t.suggestion)}}),r(I).kendoGrid(n),null},g=function(t,e){var n;return u(),n={dataSource:{data:e,sort:{field:"objectName",dir:"asc"}},columns:[{field:"objectName",title:i.t("risk:fields.object")},l.column({field:"value",title:i.t("risk:fields.value")})],editable:!1,scrollable:!1},r(I).kendoGrid(n),null},h=function(t,e){return n.has(e,"error")?y(t,e.error):n.has(e,"results")&&g(0,e.results),null},b=function(t,e){return h(t,e),null},v=function(){return null},p=function(t){return{fund:null,transparency:s.NO_TRANSPARENCY,testClick:T.bind(null,t),clearClick:c}},{reset:function(t){return u(),null},init:function(t){var e,n;return n=p(t),e=a.observable(n),t.testModel=e,a.bind(r("#scriptTestRoot"),e),null},test:T=function(t){var e,n,i;return u(),n=t.model,i=t.testModel,e={type:"POST",url:"risk/indicator/script/test.json",data:{level:n.get("level"),categories:n.get("filterCategories").toJSON(),script:n.get("script"),fund:i.get("fund"),transparency:i.transparency}},r.ajax(e).done(b.bind(null,t)).fail(v),null},clear:c=function(){return u(),null}}})}.call(this),define("text!templates/risk/edit/indicator.script.html",[],function(){return'<div id="riskIndicatorRoot">\n    <h1 data-i18n="risk:indicators.SCRIPT.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="risk:indicators.SCRIPT.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="riskIndicatorActions"></div>\n\n    <h2 data-i18n="risk:sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="risk:fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" name="sid" class="k-textbox" type="text" data-bind="value: sid"/>\n            </td>\n            <td>\n                <label for="created" data-i18n="risk:fields.creationDate"></label>\n            </td>\n            <td>\n                <input id="created" name="created" class="k-textbox" type="text" data-bind="display: created"\n                    data-format="g" readonly="readonly" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="risk:fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required"\n                    data-i18n="[validationMessage]risk:validation.nameRequired" />\n            </td>\n            <td></td>\n            <td></td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="risk:fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox"\n                    data-bind="value: description"></textarea>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="basis" data-i18n="risk:fields.basis"></label>\n            </td>\n            <td>\n                <input id="basis" name="basis" data-role="numerictextbox" data-bind="value: basis" required="required"\n                    data-i18n="[data-required-msg]risk:validation.basisRequired;[data-nonzero-msg]risk:validation.basisNonZero" />\n            </td>\n            <td>\n                <label for="constant" data-i18n="risk:fields.constant"></label>\n            </td>\n            <td>\n                <input id="constant" name="Constant" data-role="numerictextbox" data-bind="value: constant"\n                    required="required" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="ascending" data-i18n="risk:fields.ascending"></label>\n            </td>\n            <td>\n                <input id="ascending" name="Ascending" type="checkbox" class="k-checkbox" data-bind="checked: ascending" />\n                <label for="ascending" class="k-checkbox-label">&nbsp;</label>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="percent" data-i18n="risk:fields.percent"></label>\n            </td>\n            <td>\n                <input id="percent" type="checkbox" class="k-checkbox" data-bind="checked: percent" />\n                <label for="percent" class="k-checkbox-label">&nbsp;</label>\n            </td>\n        </tr>\n    </table>\n\n    <h2 data-i18n="risk:sections.behaviors"></h2>\n\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="level" data-i18n="risk:fields.level"></label>\n            </td>\n            <td>\n                <input id="level" name="level" data-role="domosriskindicatorlevel" data-bind="value: level" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="defaultValue" data-i18n="risk:fields.defaultValue"></label>\n            </td>\n            <td data-bind="invisible: percent">\n                <input id="defaultValue" name="defaultValue" data-role="numerictextbox"\n                    data-bind="value: defaultValue" />\n            </td>\n            <td data-bind="visible: percent">\n                <input id="defaultValue" name="defaultValue" data-role="domospercent"\n                    data-bind="value: defaultValue" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="missingDataBehavior" data-i18n="risk:fields.missingDataBehavior"></label>\n            </td>\n            <td>\n                <input id="missingDataBehavior" name="missingDataBehavior" data-role="domosriskmissingbehavior"\n                    data-bind="value: missingDataBehavior" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="filterCategory" data-i18n="risk:fields.filterCategory"\n                    data-bind="visible: canFilter"></label>\n            </td>\n            <td>\n                <input id="filterCategory" name="filterCategory" data-role="domosassetcategorymultiselect"\n                    data-bind="value: filterCategories, visible: canFilter" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="filterBehavior" data-i18n="risk:fields.filterBehavior"\n                    data-bind="visible: hasFilter"></label>\n            </td>\n            <td>\n                <input id="filterBehavior" name="filterBehavior" data-role="domosriskfilterbehavior"\n                    data-bind="value: filterBehavior, visible: hasFilter" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="filterDefaultValue" data-i18n="risk:fields.filterDefaultValue"\n                    data-bind="visible: hasFilterDefault"></label>\n            </td>\n            <td>\n                <input id="filterDefaultValue" name="filterDefaultValue" data-role="numerictextbox"\n                    data-bind="value: filterDefaultValue, visible: hasFilterDefault" />\n            </td>\n\n        </tr>\n        <tr>\n            <td>\n                <label for="balanceSheetFilter" data-i18n="risk:fields.balanceSheetFilter"\n                    data-bind="visible: canFilter"></label>\n            </td>\n            <td>\n                <input id="balanceSheetFilter" data-role="domosbalancesheetmultiselect"\n                    data-bind="value: balanceSheetFilter, visible: canFilter" />\n            </td>\n        </tr>\n        <tr data-bind="visible: canFilter">\n            <td>\n                <label for="portfolioColumn" data-i18n="risk:fields.portfolioColumn"></label>\n            </td>\n            <td>\n                <input id="portfolioColumn" type="checkbox" class="k-checkbox" data-bind="checked: portfolioColumn" />\n                <label for="portfolioColumn" class="k-checkbox-label">&nbsp;</label>\n            </td>\n        </tr>\n\n    </table>\n    <h2 data-i18n="risk:sections.script"></h2>\n\n    <div id="riskScript" class="riskScript"></div>\n    <div id="scriptHelpRoot">\n\t\t<button class="k-button" data-i18n="scripts:editor.helpButton" data-bind="click: helpClick"></button>\n\t</div>\n     <h2 data-i18n="risk:sections.test"></h2>\n    <div id="scriptTestToolbarRoot"></div>\n    <div id="scriptTestRoot">\n        <div id="scriptTestResult" class="floatingGrid"></div>\n        <div class="clearer"></div>\n    </div>\n\n</div>'}),function(){var E=[].slice;define("views/risk/indicator/script/indicator",["jquery","i18n","ui","kendo","views/risk/indicator/script/indicator.completers","views/risk/indicator/script/indicator.test","core/api/RiskFilterBehavior","core/api/RiskIndicatorLevel","core/util/ObservableUtils","object/web/ObjectMap","object/ui/VehicleUI","portfolio/data/PortfolioTransparency","views/common/script.help","text!templates/risk/edit/indicator.script.html","object/ui/AssetCategoryUI","core/api/RiskMissingBehavior"],function(u,c,t,p,d,m,e,n,i,a,r,o,l,s){var f,b,v,y,h,g,T,I,C,w,k;return h=e.RiskFilterBehavior,g=n.RiskIndicatorLevel,v=i.ObservableUtils,b=a.ObjectMap,T=r.VehicleUI,y=o.PortfolioTransparency,void 0===k&&(k=window.ace),f=k,C=function(t){return t.editorLocked||t.model.set("script",t.editor.getSession().getValue()),null},I=function(t){var e,n,i,a,r,o,d,l,s;if(e=u("#scriptTestToolbarRoot"),p.destroy(e),e.empty(),i=[],(a=t.model).canFilter()&&(i.push({template:"<label id='label_fundId' for='fund'></label>"}),i.push({template:"<input id='fund'/>"}),i.push({template:"<label for='transparency'>"+c.t("risk:fields.transparency")+"</label>"}),i.push({template:"<input id='transparency'/>"}),i.push({type:"separator"})),i.push({type:"buttonGroup",text:"Actions",buttons:[{id:"testButton",text:c.t("risk:fields.test"),click:function(){return m.test(t)}},{id:"cleanButton",text:c.t("risk:fields.clear"),click:function(){return m.clear()}}]}),r={items:i},e.kendoToolBar(r),(o=t.testModel).set("fund",null),o.set("transparency",y.NO_TRANSPARENCY),a.canFilter())return o.fundUrl=function(){return b.objectEdit(v.get(o,"fund"))},T.widget(u("#fund"),{valuePrimitive:!0}),(s=u("#fund").data("kendoDomosVehicle")).value(o.get("fund")),s.bind("dataBound",function(){return s.value(o.get("fund"))}),u("<a>").attr("href",o.fundUrl()).text(c.t("risk:fields.fund")).appendTo(u("#label_fundId")),n=function(){return o.set("fund",parseInt(this.value())||null),u("#label_fundId").find("a").attr("href",o.fundUrl())},s.bind("change",n),l=u("#transparency"),(s=y.widget(l).data("kendoDomosPortfolioTransparency")).value(o.get("transparency")),s.bind("dataBound",function(){return s.value(o.get("transparency"))}),d=function(){return o.set("transparency",parseInt(this.value())||y.NO_TRANSPARENCY)},s.bind("change",d)},w=function(t,e){return"level"===e.field&&(m.clear(),I(t)),"fund"===e.field&&m.test(t),null},{updateValidatorOptions:function(t,e){return e},getTemplates:function(){return{view:s}},createRawModel:function(){return{id:0,created:new Date,sid:"",name:"",basis:0,level:0,filterCategories:[],balanceSheetFilter:[],filterBehavior:0,errorBehavior:0,missingDataBehavior:0,description:"",type:1,constant:0,ascending:!1,percent:!1,filterDefaultValue:0,defaultValue:0,script:"",portfolioColumn:!1,filter:"",canFilter:function(){return g.canFilter(this.get("level"))},hasFilter:function(){return this.canFilter()&&0<this.get("filterCategories").length},hasFilterDefault:function(){return this.hasFilter()&&h.hasDefaultValue(this.get("filterBehavior"))}}},updateModel:function(t,e){var n,i;return t.set("id",e.id),t.set("created",new Date(e.created)),t.set("sid",e.sid),t.set("name",e.name),t.set("basis",e.basis),t.set("level",e.level),t.set("filterBehavior",e.filterBehavior),t.set("errorBehavior",e.errorBehavior),t.set("missingDataBehavior",e.missingDataBehavior),t.set("description",e.description),t.set("type",e.type),t.set("constant",e.constant),t.set("ascending",e.ascending),t.set("percent",e.percent),t.set("filterDefaultValue",e.filterDefaultValue),t.set("defaultValue",e.defaultValue),t.set("script",e.script),t.set("portfolioColumn",e.portfolioColumn),t.set("filter",e.filter),(i=t.get("filterCategories")).splice.apply(i,[0,i.length].concat(E.call(e.filterCategories))),(n=t.get("balanceSheetFilter")).splice.apply(n,[0,n.length].concat(E.call(e.balanceSheetFilter))),null},viewShow:function(t){var e;return(e=t.editor)&&(t.editorLocked=!0,e.getSession().setValue(t.model.get("script")),e.getSession().setUndoManager(new f.UndoManager),e.resize(),t.editorLocked=!1),m.reset(t),I(t),null},init:function(t){var e,n,i,a,r,o;for(r={enableBasicAutocompletion:!(t.editorLocked=!1),fontSize:"12pt",maxLines:50},(n=f.edit("riskScript")).setOptions(r),n.setTheme("ace/theme/chrome"),n.getSession().setMode("ace/mode/javascript"),i=0,a=(o=d.list()).length;i<a;i++)e=o[i],n.completers.push(e);return(t.editor=n).getSession().on("change",C.bind(null,t)),l.setup(t),m.init(t),t.model.bind("change",w.bind(null,t)),null}}})}.call(this),define("text!templates/risk/edit/indicator.spreadsheet.html",[],function(){return'<div id="riskIndicatorRoot">\n    <h1 data-i18n="risk:indicators.SPREADSHEET.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="risk:indicators.SPREADSHEET.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="riskIndicatorActions"></div>\n\n    <h2 data-i18n="risk:sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="sid" data-i18n="risk:fields.sid"></label>\n            </td>\n            <td>\n                <input id="sid" name="sid" class="k-textbox" type="text" data-bind="value: sid"/>\n            </td>\n            <td>\n                <label for="created" data-i18n="risk:fields.creationDate"></label>\n            </td>\n            <td>\n                <input id="created" name="created" class="k-textbox" type="text" data-bind="display: created"\n                    data-format="g" readonly="readonly" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="risk:fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required"\n                    data-i18n="[validationMessage]risk:validation.nameRequired" />\n            </td>\n            <td></td>\n            <td></td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="risk:fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="basis" data-i18n="risk:fields.basis"></label>\n            </td>\n            <td>\n                <input id="basis" name="basis" data-role="numerictextbox" data-bind="value: basis" required="required"\n                    data-i18n="[data-required-msg]risk:validation.basisRequired;[data-nonzero-msg]risk:validation.basisNonZero" />\n            </td>\n            <td>\n                <label for="constant" data-i18n="risk:fields.constant"></label>\n            </td>\n            <td>\n                <input id="constant" name="Constant" data-role="numerictextbox" data-bind="value: constant" required="required" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="ascending" data-i18n="risk:fields.ascending"></label>\n            </td>\n            <td>\n                <input id="ascending" name="Ascending" type="checkbox" class="k-checkbox" data-bind="checked: ascending" />\n                <label for="ascending" class="k-checkbox-label">&nbsp;</label>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="percent" data-i18n="risk:fields.percent"></label>\n            </td>\n            <td>\n                <input id="percent" type="checkbox" class="k-checkbox" data-bind="checked: percent" />\n                <label for="percent" class="k-checkbox-label">&nbsp;</label>\n            </td>\n        </tr>\n    </table>\n\n    <h2 data-i18n="risk:sections.behaviors"></h2>\n\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="level" data-i18n="risk:fields.level"></label>\n            </td>\n            <td>\n                <input id="level" name="level" data-role="domosriskindicatorlevel" data-bind="value: level" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="defaultValue" data-i18n="risk:fields.defaultValue"></label>\n            </td>\n            <td data-bind="invisible: percent">\n                <input id="defaultValue" name="defaultValue" data-role="numerictextbox" data-bind="value: defaultValue" />\n            </td>\n            <td data-bind="visible: percent">\n                <input id="defaultValue" name="defaultValue" data-role="domospercent"\n                    data-bind="value: defaultValue" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="missingDataBehavior" data-i18n="risk:fields.missingDataBehavior"></label>\n            </td>\n            <td>\n                <input id="missingDataBehavior" name="missingDataBehavior" data-role="domosriskmissingbehavior"\n                    data-bind="value: missingDataBehavior" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="filterCategory" data-i18n="risk:fields.filterCategory" data-bind="visible: canFilter"></label>\n            </td>\n            <td>\n                <input id="filterCategory" name="filterCategory" data-role="domosassetcategorymultiselect" data-bind="value: filterCategories, visible: canFilter" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="filterBehavior" data-i18n="risk:fields.filterBehavior" data-bind="visible: hasFilter"></label>\n            </td>\n            <td>\n                <input id="filterBehavior" name="filterBehavior" data-role="domosriskfilterbehavior" data-bind="value: filterBehavior, visible: hasFilter" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="filterDefaultValue" data-i18n="risk:fields.filterDefaultValue" data-bind="visible: hasFilterDefault"></label>\n            </td>\n            <td>\n                <input id="filterDefaultValue" name="filterDefaultValue" data-role="numerictextbox" data-bind="value: filterDefaultValue, visible: hasFilterDefault" />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="indicatorIdentifier" data-i18n="risk:fields.indicatorStringId"></label>\n            </td>\n            <td>\n                <input id="indicatorIdentifier" class="k-textbox" type="text" data-bind="value: indicatorStringId"\n                    required />\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="balanceSheetFilter" data-i18n="risk:fields.balanceSheetFilter" data-bind="visible: canFilter"></label>\n            </td>\n            <td>\n                <input id="balanceSheetFilter" data-role="domosbalancesheetmultiselect" data-bind="value: balanceSheetFilter" />\n            </td>\n        </tr>\n        <tr data-bind="visible: canFilter">\n            <td>\n                <label for="portfolioColumn" data-i18n="risk:fields.portfolioColumn"></label>\n            </td>\n            <td>\n                <input id="portfolioColumn" type="checkbox" class="k-checkbox" data-bind="checked: portfolioColumn" />\n                <label for="portfolioColumn" class="k-checkbox-label">&nbsp;</label>\n            </td>\n        </tr>\n    </table>\n    \n</div>'}),function(){var s=[].slice;define("views/risk/indicator/spreadsheet/indicator",["jquery","i18n","ui","core/api/RiskFilterBehavior","core/api/RiskIndicatorLevel","text!templates/risk/edit/indicator.spreadsheet.html","object/ui/AssetCategoryUI","core/api/RiskMissingBehavior"],function(t,e,n,i,a,r){var o,d,l;return o=i.RiskFilterBehavior,d=a.RiskIndicatorLevel,l=function(t,e){return!0},{updateValidatorOptions:function(t,e){return null==e.rules&&(e.rules={}),e.rules.nonzero=l.bind(null,t),e},getTemplates:function(){return{view:r}},createRawModel:function(){return{id:0,created:new Date,sid:"",name:"",basis:0,level:0,filterCategories:[],balanceSheetFilter:[],filterBehavior:0,errorBehavior:0,missingDataBehavior:0,description:"",type:1,constant:0,ascending:!1,percent:!1,filterDefaultValue:0,defaultValue:0,indicatorStringId:"",portfolioColumn:!1,canFilter:function(){return d.canFilter(this.get("level"))},hasFilter:function(){return this.canFilter()&&0<this.get("filterCategories").length},hasFilterDefault:function(){return this.hasFilter()&&o.hasDefaultValue(this.get("filterBehavior"))}}},updateModel:function(t,e){var n,i;return t.set("id",e.id),t.set("created",new Date(e.created)),t.set("sid",e.sid),t.set("name",e.name),t.set("basis",e.basis),t.set("level",e.level),t.set("filterBehavior",e.filterBehavior),t.set("errorBehavior",e.errorBehavior),t.set("missingDataBehavior",e.missingDataBehavior),t.set("description",e.description),t.set("type",e.type),t.set("constant",e.constant),t.set("ascending",e.ascending),t.set("percent",e.percent),t.set("filterDefaultValue",e.filterDefaultValue),t.set("defaultValue",e.defaultValue),t.set("indicatorStringId",e.indicatorStringId),t.set("portfolioColumn",e.portfolioColumn),(i=t.get("filterCategories")).splice.apply(i,[0,i.length].concat(s.call(e.filterCategories))),(n=t.get("balanceSheetFilter")).splice.apply(n,[0,n.length].concat(s.call(e.balanceSheetFilter))),null},init:function(t){}}})}.call(this),function(){define("views/risk/indicator/edit.indicator",["lodash","i18n","site","views/edit/edit","core/data/SiteCategories","views/risk/indicator/formula/indicator","views/risk/indicator/tag/indicator","views/risk/indicator/script/indicator","views/risk/indicator/spreadsheet/indicator","core/api/RiskIndicatorType","core/grouping/GroupingUI"],function(i,n,t,e,a,r,o,d,l,s,u){var c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U;return b=s.RiskIndicatorType,f=t.router,p=t.map,u.GroupingUI,v=a.SiteCategories,(y={})[b.FORMULA]=r,y[b.TAG]=o,y[b.SCRIPT]=d,y[b.SPREADSHEET]=l,E=function(t){var e,n;return n={},(e=t.module)&&e.updateValidatorOptions&&e.updateValidatorOptions(t,n),n},I=function(t){return{id:t}},k=function(t){var e,n;return n=t,i.isString(t)&&(e=parseInt(t),i.isFinite(e)||(n=b[t])),{type:n}},R=function(t,e){var n,i;return e?(i=null,(n=y[e])&&(i=t.create(n)),i):null},x=function(t,e){return e?R(t,e.type):null},O=function(t){var e;return(e=t.module)&&e.viewShow&&e.viewShow(t),null},U=function(t){return $("#riskIndicatorGrid").data("kendoGrid").dataSource.read()},_=function(t){return setTimeout(U.bind(null,t),50)},h=function(t){var e;return(e=b[t.type])?n.t("risk:indicators."+e+".confirmDestroy"):null},w=function(){return{siteCategory:v.risk,key:"riskIndicatorEdit",rootId:"riskIndicatorRoot",actionsId:"riskIndicatorActions",url:"risk/indicator.json",askDestroy:h,createValidatorOptions:E,viewShow:O,viewHide:_,getView:x}},C=function(){var t;return(t=w()).createGetParameters=k,e.create(t)},T=function(){var t;return(t=w()).createGetParameters=I,e.create(t)},N=function(){return null==m&&(m=C()),m},c=m=null,S=function(){return null==c&&(c=T()),c},g=function(t){return N().display(t)},D=function(t){return S().display(t)},{init:function(){return f.addRoute(p.riskIndicatorEdit,D),f.addRoute(p.riskIndicatorCreate,g)}}})}.call(this),define("text!templates/risk/edit/rule.entry.edit.html",[],function(){return'<div>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="riskRuleIndicator" data-i18n="risk:fields.indicator"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="riskRuleIndicator" data-role="domosriskindicator" data-bind="value: indicator"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="riskRuleMethod" data-i18n="risk:fields.method"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="riskRuleMethod" data-role="domoscomputationmethod" data-bind="value: method"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="riskRuleWeight" data-i18n="risk:fields.weight"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="riskRuleWeight" data-role="numerictextbox" data-bind="value: weight"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="riskRuleSort" data-i18n="risk:fields.sort"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="riskRuleSort" data-role="numerictextbox" data-bind="value: sort"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr data-bind="invisible: hasDefinition">\n\t\t\t<td>\n\t\t\t\t<label for="riskRuleLower" data-i18n="risk:fields.lowerLimit"></label>\n\t\t\t</td>\n\t\t\t<td data-bind="invisible: isPercent">\n\t\t\t\t<input id="riskRuleLower" data-role="numerictextbox" data-bind="value: lowerLimit"/>\n\t\t\t</td>\n\t\t\t<td data-bind="visible: isPercent">\n\t\t\t\t<input id="riskRuleLower" data-role="domospercent" data-bind="value: lowerLimit"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr data-bind="invisible: hasDefinition">\n\t\t\t<td>\n\t\t\t\t<label for="riskRuleUpper" data-i18n="risk:fields.upperLimit"></label>\n\t\t\t</td>\n\t\t\t<td data-bind="invisible: isPercent">\n\t\t\t\t<input id="riskRuleUpper" data-role="numerictextbox" data-bind="value: upperLimit"/>\n\t\t\t</td>\n\t\t\t<td data-bind="visible: isPercent">\n\t\t\t\t<input id="riskRuleUpper" data-role="domospercent" data-bind="value: upperLimit"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr data-bind="visible: hasDefinition">\n\t\t\t<td>\n\t\t\t\t<label for="riskRuleLowerP" data-i18n="risk:fields.lowerLimit"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input\tid="riskRuleLowerP"\n\t\t\t\t\t\tdata-role="dropdownlist"\n\t\t\t\t\t\tdata-bind="value: lowerLimit, source: entries"\n\t\t\t\t\t\tdata-value-field="id"\n\t\t\t\t\t\tdata-text-field="name"\n\t\t\t\t\t\tdata-value-primitive="true"\n\t\t\t\t\t\tdata-option-label="--"\n\t\t\t\t\t\tdata-auto-width="true"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr data-bind="visible: hasDefinition">\n\t\t\t<td>\n\t\t\t\t<label for="riskRuleUpperP" data-i18n="risk:fields.upperLimit"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input\tid="riskRuleUpperP"\n\t\t\t\t\t\tdata-role="dropdownlist"\n\t\t\t\t\t\tdata-bind="value: upperLimit, source: entries"\n\t\t\t\t\t\tdata-value-field="id"\n\t\t\t\t\t\tdata-text-field="name"\n\t\t\t\t\t\tdata-value-primitive="true"\n\t\t\t\t\t\tdata-option-label="--"\n\t\t\t\t\t\tdata-auto-width="true"/>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n\t<div class="formWindowButtons">\n\t\t<button class="k-primary" data-role="button" data-icon="check" data-bind="click: okClick">OK</button>\n\t\t<button data-role="button" data-icon="cancel" data-bind="click: cancelClick">Cancel</button>\n\t</div>\n</div>'}),define("risk/views/RiskRuleEntryEditWindow",["require","exports","core/api/ComputationMethod","core/data/DObservableBuilder","i18n","tag/data/TagDefinitions","text!templates/risk/edit/rule.entry.edit.html","risk/ui/RiskIndicatorUI"],function(t,e,n,l,s,u,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RiskRuleEntryEditWindow=void 0;var i=function(){function t(){}return t.open=function(t){return t||(t={id:0,indicator:null,method:n.ComputationMethod.getDefault(),weight:1,lowerLimit:null,upperLimit:null,sort:0}),d=t,new Promise(function(t,e){var n=kendo.template(c)({}),i=$("<div>").addClass("formWindow").appendTo($(document.body));i.html(n),i.kendoWindow({modal:!0,width:400,minWidth:300,visible:!1});var a,r=i.data("kendoWindow");r.bind("close",function(){return kendo.destroy(i),i.remove(),t(a),!0});var o=l.DObservableBuilder.of(d).add("hasDefinition",function(t){var e=t.get("indicator");return!!e&&!!e.tagDefinition}).add("entries",function(t){var e=t.get("indicator");return u.TagDefinitions.getEntryIdentifiables(e?e.tagDefinition:null)}).add("isPercent",function(t){var e=t.get("indicator");return!!e&&e.percent}).add("okClick",function(t){a=t.toJson(),r.close()}).add("cancelClick",function(t){a=void 0,r.close()}).build();o.bindChange(function(t,e){e&&"indicator"===e&&(t.set("lowerLimit",null),t.set("upperLimit",null))}),s.I18N.localize(i),o.bind(i),r.title("Edit").open().center()});var d},t}();e.RiskRuleEntryEditWindow=i}),define("risk/views/RiskRuleEntryGrid",["require","exports","lodash","kendo","core/ui/grid/GridUtils","core/ui/grid/LocalTransport","core/api/ComputationMethod","core/util/ObservableUtils","risk/ui/RiskIndicatorUI","i18n","core/ui/NumberUI","core/ui/IntegerUI","core/ui/grid/GridCommand","core/ui/grid/GridToolbar","core/ui/Confirmation","core/util/Logger","core/ui/grid/column/ColumnUtils","core/ui/grid/column/ColumnStyle","tag/data/TagDefinitions","./RiskRuleEntryEditWindow"],function(t,e,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,n){"use strict";function k(t){return n.RiskRuleEntryEditWindow.open(t)}function E(t){var e=t.field;return e&&(t.template=function(t){return function(t,e){var n=e.indicator,i=n?n.tagDefinition:void 0,a=w.TagDefinitions.getWithEntries(i),r=e[t];if(d.isNil(r))return"";if(a){var o=d.find(a.entries,function(t){return t.id===r});return o?f.I18N.t(o.label):""}return n&&n.percent?l.format("{0:p}",r):l.format("{0:n}",r)}(e,t)},t.groupable=!1,t.sortable=!1,t.filterable=!1,I.ColumnUtils.addStyle(t,C.ColumnStyle.RIGHT_ALIGNED)),t}Object.defineProperty(e,"__esModule",{value:!0}),e.RiskRuleEntryGrid=void 0;var i=function(){function t(){}return t.create=function(i,t){l.destroy(i),i.empty();var e=(new y.GridCommand).addClick("Edit","k-i-edit",function(t){return e=t,void((n=i.data("kendoGrid"))&&k(e.toJSON()).then(function(t){t&&(p.ObservableUtils.update(e,t),n.dataSource.sync())}).catch(function(t){return T.Logger.error(t)}));var e,n}).addClick("Delete","k-i-close",function(t){return e=t,void((n=i.data("kendoGrid"))&&g.Confirmation.confirmDelete("Are you sure you want to delete this entry?").then(function(t){t&&(n.dataSource.remove(e),n.dataSource.sync())}).catch(function(t){return T.Logger.error(t)}));var e,n}),n=(new h.GridToolbar).addClick("Add new record","k-icon k-i-plus",function(){var e;(e=i.data("kendoGrid"))&&k().then(function(t){t&&(delete t.id,e.dataSource.add(t),e.dataSource.sync())}).catch(function(t){return T.Logger.error(t)})}).addExcel(),a=e.column();a.width="180px",I.ColumnUtils.addStyle(a,C.ColumnStyle.CENTER_ALIGNED);var r,o={dataSource:(r=t,{transport:u.LocalTransport.bind(r),schema:{model:{id:"id",fields:{indicator:{nullable:!0,validation:{required:!0}},method:{type:"number",defaultValue:c.ComputationMethod.getDefault(),validation:{required:!0}},weight:{type:"number",defaultValue:1,validation:{required:!0}},lowerLimit:{type:"number",nullable:!0},upperLimit:{type:"number",nullable:!0},sort:{type:"number",defaultValue:0,validation:{required:!0}}},indicatorName:function(){return p.ObservableUtils.get(this,"indicator.name")||""}}},sort:{field:"sort",dir:"asc"}}),columns:[a,m.RiskIndicatorUI.column({field:"indicator",title:f.I18N.t("risk:fields.indicator"),width:"300px"}),c.ComputationMethod.column({field:"method",title:f.I18N.t("risk:fields.method"),width:"120px"}),b.NumberUI.column({field:"weight",title:f.I18N.t("risk:fields.weight"),width:"120px"}),E({field:"lowerLimit",title:f.I18N.t("risk:fields.lowerLimit"),width:"120px"}),E({field:"upperLimit",title:f.I18N.t("risk:fields.upperLimit"),width:"120px"}),v.IntegerUI.column({field:"sort",title:f.I18N.t("risk:fields.sort"),width:"120px"})],scrollable:!0,editable:!1,pageable:s.GridUtils.defaultPageable(),height:500};o.toolbar=n.template(),s.GridUtils.withDefaults(o),i.kendoGrid(o),e.bind(i),n.bind(i)},t}();e.RiskRuleEntryGrid=i}),define("text!templates/risk/edit/rule.html",[],function(){return'<div id="riskRuleRoot">\n    <h1 data-i18n="risk:rules.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="risk:rules.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="riskRuleActions"></div>\n\n    <h2 data-i18n="risk:sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="name" data-i18n="risk:fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]risk:validation.nameRequired"/>\n            </td>\n            <td>\n                <label for="created" data-i18n="risk:fields.creationDate"></label>\n            </td>\n            <td>\n                <input id="created" name="created" class="k-textbox" type="text" data-bind="display: created" data-format="g" readonly="readonly"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="group" data-i18n="risk:fields.group"></label>\n            </td>\n            <td>\n                <input id="group" name="group" data-role="domosriskgroup" data-bind="value: group" required="required"/>\n            </td>\n            <td></td>\n            <td></td>\n        </tr>\n    </table>\n\n    <h2 data-i18n="risk:sections.indicators"></h2>\n    <div id="indicatorGrid" class="floatingGrid_1100_px"></div>\n    <div class="clearer"></div>\n\n    <h2 data-i18n="risk:sections.display"></h2>\n\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="lowerLimit" data-i18n="risk:fields.lowerLimit"></label>\n            </td>\n            <td>\n                <input id="lowerLimit" data-role="numerictextbox" data-bind="value: lowerLimit"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="upperLimit" data-i18n="risk:fields.upperLimit"></label>\n            </td>\n            <td>\n                <input id="upperLimit" data-role="numerictextbox" data-bind="value: upperLimit"/>\n            </td>\n        </tr>\n    </table>\n</div>\n\n\n\n'}),function(){var p=[].slice;define("views/risk/rule/rule",["jquery","i18n","ui","core/api/ComputationMethod","core/util/ObservableUtils","risk/ui/RiskIndicatorUI","core/ui/NumberUI","core/ui/IntegerUI","risk/views/RiskRuleEntryGrid","text!templates/risk/edit/rule.html","risk/ui/RiskGroupUI"],function(n,t,e,i,a,r,o,d,l,s){var u,c;return o.NumberUI,d.IntegerUI,a.ObservableUtils,r.RiskIndicatorUI,i.ComputationMethod,u=l.RiskRuleEntryGrid,e.grid.transports,c=function(t){var e;return e=t.model.get("entries"),u.create(n("#indicatorGrid"),e)},{getTemplates:function(){return{view:s}},createRawModel:function(){return{id:0,created:new Date,name:"",group:null,lowerLimit:null,upperLimit:null,entries:[]}},updateModel:function(t,e){var n;return t.set("id",e.id),t.set("created",new Date(e.created)),t.set("name",e.name),t.set("group",e.group),t.set("lowerLimit",e.lowerLimit),t.set("upperLimit",e.upperLimit),(n=t.get("entries")).splice.apply(n,[0,n.length].concat(p.call(e.entries))),null},init:function(t){return c(t)}}})}.call(this),function(){define("views/risk/rule/edit.rule",["site","views/edit/edit","core/data/SiteCategories","views/risk/rule/rule"],function(t,e,n,i){var a,r,o,d,l,s,u,c;return o=t.router,r=t.map,d=n.SiteCategories,s=function(t){return t.create(i)},l=function(){var t;return t={siteCategory:d.risk,key:"riskRuleEdit",rootId:"riskRuleRoot",actionsId:"riskRuleActions",url:"risk/rule.json",getView:s},e.create(t)},a=null,c=function(){return null==a&&(a=l()),a},u=function(t){return c().display(t)},{init:function(){return o.addRoute(r.riskRuleEdit,u)}}})}.call(this),define("risk/repository/RiskRuleRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RiskRuleRepository=void 0;var i=function(){function t(){}return t.fetchIdentifiables=function(){return n.WebHttp.getJson("risk/rule/id/list.json")},t}();e.RiskRuleRepository=i}),define("risk/ui/RiskRuleUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","risk/repository/RiskRuleRepository","core/web/WebLocation"],function(t,e,n,i,a,r){"use strict";function o(t){return r.WebLocation.resolveKendo("/risk/rule/"+t)}Object.defineProperty(e,"__esModule",{value:!0}),e.RiskRuleUI=void 0;var d=function(){function t(){}return t.widget=n.IdWidgetUtils.createDropList("DomosRiskRule",a.RiskRuleRepository.fetchIdentifiables,!0),t.column=i.IdentifiableColumnUtils.createFactory(t.widget,o),t}();e.RiskRuleUI=d}),define("text!templates/risk/edit/profile.html",[],function(){return'<div id="riskProfileRoot">\n    <h1 data-i18n="risk:profiles.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="risk:profiles.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="riskProfileActions"></div>\n\n    <h2 data-i18n="risk:sections.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="name" data-i18n="risk:fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required" data-i18n="[validationMessage]risk:validation.nameRequired"/>\n            </td>\n            <td>\n                <label for="created" data-i18n="risk:fields.creationDate"></label>\n            </td>\n            <td>\n                <input id="created" name="created" class="k-textbox" type="text" data-bind="display: created" data-format="g" readonly="readonly"/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="risk:fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n            </td>\n        </tr>\n    </table>\n    <h2 data-i18n="risk:sections.cashProjection"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="endOfDate" data-i18n="risk:fields.endOfDate"></label>\n            </td>\n            <td>\n                <input id="endOfDate" type="checkbox" data-bind="checked: endOfDate" />\n            </td>\n            <td>\n                <label for="bucket" data-i18n="risk:fields.bucket"></label>\n            </td>\n            <td>\n                <input id="bucket" class="k-textbox" type="text" data-bind="value: bucket"/>\n            </td>\n        </tr>\n        \n    </table>\n\n    <h2 data-i18n="risk:sections.rules"></h2>\n\n    <div id="profileRuleGrid" class="floatingGrid_1100_px"></div>\n    <div class="clearer"></div>\n\n\n    <h2 data-i18n="risk:sections.display"></h2>\n\n    <div id="profileDisplayGrid" class="floatingGrid_800_px"></div>\n    <div class="clearer"></div>\n\n</div>\n\n\n\n'}),function(){var T=[].slice;define("views/risk/profile/profile",["jquery","i18n","ui","risk/ui/RiskGroupUI","risk/ui/RiskRuleUI","core/ui/grid/GridUtils","core/util/ObservableUtils","core/ui/NumberUI","core/ui/IntegerUI","text!templates/risk/edit/profile.html"],function(i,a,t,e,n,r,o,d,l,s){var u,c,p,m,f,b,v,y,h,g;return f=d.NumberUI,c=l.IntegerUI,v=e.RiskGroupUI,y=n.RiskRuleUI,u=r.GridUtils,b=o.ObservableUtils,p=t.grid,m=p.transports,g=function(t){var e,n;return e=t.model,n={dataSource:{transport:m.createLocal({data:e.get("rules")}),schema:{model:{id:"id",fields:{rule:{nullable:!0,validation:{required:!0}},weight:{type:"number",defaultValue:1,validation:{required:!0}},lowerLimit:{type:"number",defaultValue:null},upperLimit:{type:"number",defaultValue:null},priority:{type:"number",defaultValue:0,nullable:!1,validation:{required:!0}}},ruleName:function(){return b.get(this,"rule.name")||""},groupName:function(){return b.get(this,"rule.group.name")||""}}}},columns:[{command:["edit","destroy"],title:" ",width:"230px",attributes:{style:"text-align: center"}},y.column({field:"rule",title:a.t("risk:fields.aggregationRule"),width:"200px"}),{field:"groupName()",title:a.t("risk:fields.group"),width:"120px"},f.column({field:"weight",title:a.t("risk:fields.weight"),width:"120px"}),f.column({field:"lowerLimit",title:a.t("risk:fields.lowerLimit"),width:"120px"}),f.column({field:"upperLimit",title:a.t("risk:fields.upperLimit"),width:"120px"}),c.column({field:"priority",title:a.t("risk:fields.priority"),width:"120px"})],toolbar:["create"],pageable:p.defaultPageable(),scrollable:!0,height:500},p.withDefaults(n),i("#profileRuleGrid").kendoGrid(n)},h=function(t){var e,n;return e=t.model,n={dataSource:{transport:m.createLocal({data:e.get("groupDisplay")}),schema:{model:{id:"id",fields:{group:{nullable:!0,validation:{required:!0}},priority:{type:"number",defaultValue:0,nullable:!1,validation:{required:!0}},lowerLimit:{type:"number",defaultValue:0},upperLimit:{type:"number",defaultValue:0}},groupName:u.modelName("group")}}},columns:[{command:["edit","destroy"],title:" ",width:"230px",attributes:{style:"text-align: center"}},v.column({field:"group",title:a.t("risk:fields.group"),width:"200px"}),c.column({field:"priority",title:a.t("risk:fields.priority"),width:"100px"}),f.column({field:"lowerLimit",title:a.t("risk:fields.lowerLimit"),width:"120px"}),f.column({field:"upperLimit",title:a.t("risk:fields.upperLimit"),width:"120px"})],toolbar:["create"],scrollable:!0,pageable:p.defaultPageable(),height:500},p.withDefaults(n),i("#profileDisplayGrid").kendoGrid(n)},{getTemplates:function(){return{view:s}},createRawModel:function(){return{id:0,created:new Date,name:"",description:"",endOfDate:!1,bucket:null,rules:[],groupDisplay:[]}},updateModel:function(t,e){var n,i;return t.set("id",e.id),t.set("created",new Date(e.created)),t.set("name",e.name),t.set("description",e.description),t.set("endOfDate",e.endOfDate),t.set("bucket",e.bucket),(i=t.get("rules")).splice.apply(i,[0,i.length].concat(T.call(e.rules))),(n=t.get("groupDisplay")).splice.apply(n,[0,n.length].concat(T.call(e.groupDisplay))),null},init:function(t){return g(t),h(t)}}})}.call(this),function(){define("views/risk/profile/edit.profile",["site","views/edit/edit","core/data/SiteCategories","views/risk/profile/profile"],function(t,e,n,i){var a,r,o,d,l,s,u,c,p;return r=t.router,a=t.map,o=n.SiteCategories,c=function(t){return t.create(i)},u=function(){return{siteCategory:o.risk,key:"riskProfileEdit",rootId:"riskProfileRoot",actionsId:"riskProfileActions",url:"risk/profile.json",getView:c}},s=function(){var t;return t=u(),e.create(t)},l=function(n){var t;return(t=u()).createGetParameters=function(t){var e;return e={},t&&(e.id=t),e.clone=n,e},e.create(t)},p=function(t){return s().display(t)},d=function(t){return l(t).display()},{init:function(){return r.addRoute(a.riskProfileEdit,p),r.addRoute(a.riskProfileClone,d)}}})}.call(this),function(){define("views/risk/module",["views/risk/risk","views/risk/risk.local","views/risk/indicator/edit.indicator","views/risk/rule/edit.rule","views/risk/profile/edit.profile"],function(t,e,n,i,a){return{init:function(){return t.init(),e.init(),n.init(),i.init(),a.init(),null}}})}.call(this),define("reporting/repository/ReportingActivityRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReportingActivityRepository=void 0;var i=function(){function t(){}return t.fetchIdentifiables=function(){return n.WebHttp.getJson("reporting/activity/id/list.json")},t.list=function(){return n.WebHttp.getJson("reporting/activity/list.json")},t}();e.ReportingActivityRepository=i}),define("reporting/web/ReportingMap",["require","exports","core/web/WebLocation"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReportingMap=void 0;var i=function(){function t(){}return t.activityEdit=function(t){return t?n.WebLocation.resolveKendo("/reporting/activity/"+t):"javascript:void(0)"},t}();e.ReportingMap=i}),define("reporting/ui/ReportingActivityUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","reporting/repository/ReportingActivityRepository","reporting/web/ReportingMap"],function(t,e,n,i,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReportingActivityUI=void 0;var o=function(){function t(){}return t.widget=n.IdWidgetUtils.createDropList("DomosReportingActivity",a.ReportingActivityRepository.fetchIdentifiables,!0),t.column=i.IdentifiableColumnUtils.createFactory(t.widget,r.ReportingMap.activityEdit),t}();e.ReportingActivityUI=o}),define("core/api/U11CssfReportingStatus",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.U11CssfReportingStatus=void 0;var r,o;(r=e.U11CssfReportingStatus||(e.U11CssfReportingStatus={}))[r.NULL_REPORT=1]="NULL_REPORT",r[r.PROVISIONAL_REPORT=2]="PROVISIONAL_REPORT",r[r.FINAL_REPORT=3]="FINAL_REPORT",(o=e.U11CssfReportingStatus||(e.U11CssfReportingStatus={})).getName=a.EnumUtils.createNameFn("reporting:u11ReportingStatus",o),o.widget=i.EnumWidgetUtils.createDropList("DomosU11CssfReportingStatus",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("core/api/ReportingRunningStatus",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReportingRunningStatus=void 0;var r,o;(r=e.ReportingRunningStatus||(e.ReportingRunningStatus={}))[r.NOT_STARTED=1]="NOT_STARTED",r[r.RUNNING=2]="RUNNING",r[r.ENDED=3]="ENDED",(o=e.ReportingRunningStatus||(e.ReportingRunningStatus={})).getName=a.EnumUtils.createNameFn("reporting:runningStatus",o),o.widget=i.EnumWidgetUtils.createDropList("DomosReportingRunningStatus",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("reporting/repository/ReportingInstanceRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReportingInstanceRepository=void 0;var i=function(){function t(){}return t.list=function(){return n.WebHttp.getJson("reporting/instance/list.json")},t}();e.ReportingInstanceRepository=i}),define("reporting/data/ReportingActivityModel",["require","exports","core/ui/grid/GridUtils"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReportingActivityModel=void 0,e.ReportingActivityModel=kendo.data.Model.define({id:"id",fields:{id:{type:"number"},name:{type:"string"},nextDueDate:{type:"date"},source:{type:"number"},active:{type:"boolean"},legalPerson:{nullable:!0},declarerLegal:{nullable:!0},country:{type:"number"},transparency:{type:"boolean"},timelinessDays:{type:"number"},preparationDays:{type:"number"},validationCutOff:{type:"number"},submissionCutOff:{type:"number"},workflow:{nullable:!0},documentList:{nullable:!0},frequency:{type:"number"},dashboard:{type:"number",nullable:!0},role:{type:"number",nullable:!0}},legalPersonName:n.GridUtils.modelName("legalPerson"),declarerLegalName:n.GridUtils.modelName("declarerLegal"),documentListName:n.GridUtils.modelName("documentList")})}),define("reporting/data/ReportingUtil",["require","exports","core/util/ObservableUtils","core/api/ReportingSource","core/api/ReportingPeriodType","core/api/U11CssfReportingStatus","core/api/ReportingFilingType"],function(t,e,n,i,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReportingUtil=void 0;var d=function(){function t(){}return t.getPeriodAsString=function(t){switch((t=n.ObservableUtils.unpack(t)).activity.source){case i.ReportingSource.U_1_1:case i.ReportingSource.TPT_OBS:case i.ReportingSource.TPT_IBS:return kendo.toString(t.u11YearMonth,"yyyy-MM");case i.ReportingSource.CRS:case i.ReportingSource.FATCA:return""+t.year;case i.ReportingSource.S213_L1:case i.ReportingSource.S216_L1:case i.ReportingSource.AIF_1_2:case i.ReportingSource.AIFM_1_2:case i.ReportingSource.SGOREP:return t.year+" "+(a.ReportingPeriodType.getName(t.period)||"");case i.ReportingSource.DASHBOARD:default:return""}},t.getFilingAsString=function(t){switch((t=n.ObservableUtils.unpack(t)).activity.source){case i.ReportingSource.U_1_1:return r.U11CssfReportingStatus.getName(t.u11Status)||"";case i.ReportingSource.AIF_1_2:case i.ReportingSource.AIFM_1_2:return o.ReportingFilingType.getName(t.filing)||"";case i.ReportingSource.TPT_OBS:case i.ReportingSource.CRS:case i.ReportingSource.SGOREP:case i.ReportingSource.DASHBOARD:case i.ReportingSource.S213_L1:default:return""}},t}();e.ReportingUtil=d}),define("reporting/data/ReportingInstanceModel",["require","exports","core/ui/grid/GridUtils","core/api/ReportingSource","core/util/ObservableUtils","./ReportingUtil"],function(t,e,n,i,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReportingInstanceModel=void 0,e.ReportingInstanceModel=kendo.data.Model.define({id:"id",fields:{id:{type:"number"},activity:{nullable:!0},date:{type:"date"},filing:{type:"number"},period:{type:"number"},oldPeriod:{type:"number",nullable:!0},newPeriod:{type:"number",nullable:!0},year:{type:"number"},u11Status:{type:"number"},u11YearMonth:{type:"date"},strategyType:{type:"string"},strategySubType:{type:"string"},documentList:{nullable:!0},xmlFile:{type:"string",nullable:!0},recordType:{type:"number"},oldObligation:{type:"number",nullable:!0},obligation:{type:"number",nullable:!0},running:{type:"number"},status:{type:"string"},workflowInstance:{type:"string"}},activityName:n.GridUtils.modelName("activity"),getSource:function(){return i.ReportingSource.getName(a.ObservableUtils.get(this,"activity.source"))||""},getLegal:function(){return a.ObservableUtils.get(this,"activity.legalPersonName")||""},getPeriod:function(){return r.ReportingUtil.getPeriodAsString(this)},getFiling:function(){return r.ReportingUtil.getFilingAsString(this)}})}),define("text!templates/reporting/reporting.activities.grid.toolbar.html",[],function(){return'<ul id="reportingActivityGridToolbarMenu" class="gridToolbarMenu d-sprite-wrapper" data-role="menu">\n    <li>\n        <a href="javascript:void(0)" class="k-link" data-key="create">\n            <span class="k-sprite d-new"></span>\n            <span data-i18n="reporting:activities.create"></span>\n        </a>\n    </li>\n</ul>'}),define("text!templates/reporting/reporting.instances.grid.toolbar.html",[],function(){return'<ul id="reportingInstanceGridToolbarMenu" class="gridToolbarMenu d-sprite-wrapper" data-role="menu">\n    <li>\n        <a href="javascript:void(0)" class="k-link" data-key="create">\n            <span class="k-sprite d-new"></span>\n            <span data-i18n="reporting:instances.create"></span>\n        </a>\n    </li>\n</ul>'}),function(){var rt;rt="#activityInstanceGrid",define("views/reporting/reporting.activities",["jquery","lodash","i18n","kendo","site","ui","core/ui/DateUI","core/util/ObservableUtils","object/ui/LegalUI","reporting/ui/ReportingActivityUI","basic/ui/CountryUI","core/api/ReportingSource","core/api/U11CssfReportingStatus","core/api/ReportingRunningStatus","core/api/ReportingFilingType","core/api/ReportingPeriodType","core/ui/grid/GridUtils","reporting/repository/ReportingActivityRepository","reporting/repository/ReportingInstanceRepository","reporting/data/ReportingActivityModel","reporting/data/ReportingInstanceModel","reporting/web/ReportingMap","text!templates/reporting/reporting.activities.grid.toolbar.html","text!templates/reporting/reporting.instances.grid.toolbar.html"],function(d,i,l,s,o,t,e,n,a,r,u,c,p,m,f,b,v,y,h,g,T,I,C,w){var k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q,z,X,Z,tt,et,nt,it,at;return E=e.DateUI,N=n.ObservableUtils,r.ReportingActivityUI,D=a.LegalUI,k=u.CountryUI,(S=t.grid).transports,f.ReportingFilingType,b.ReportingPeriodType,A=m.ReportingRunningStatus,F=c.ReportingSource,p.U11CssfReportingStatus,v.GridUtils,R=y.ReportingActivityRepository,O=h.ReportingInstanceRepository,x=g.ReportingActivityModel,_=T.ReportingInstanceModel,U=I.ReportingMap,function(){return{}},function(t){return{currentActivity:null,documentList:null,workflow:null}},Z=function(t,e){return"currentActivity"===e.field&&j(t),null},M=function(t){return t.bind("change",Z.bind(null,t))},it=function(t){var e;return e={instance:t},d.getJSON("reporting/instance/start.json",e).success(at).fail(nt)},z=function(t,e){var n,i;if(e&&e.data)return n=e.data,"create"===(i=e.type)?t.pushCreate(n):"update"===i?t.pushUpdate(n):"destroy"===i&&t.pushDestroy(n),null},Q=function(t,e){var n;if(e)return n=t.data.options,i.isArray(e)?i.each(e,z.bind(null,n)):z(n,e),null},X=function(t){var e;return e={options:t},d("body").on("domosws:reporting:instances",e,Q),null},B=function(t){var e;return(e=null!=t?t.id:void 0)?o.router.navigate(o.map.getReportingInstanceEdit(e)):o.router.navigate(o.map.notfound),null},V=function(t){var e;if(e=null!=t?t.id:void 0)return t.running===A.NOT_STARTED&&it(e),null},W=function(t,e){var n,i,a,r;return n=(a=t.model).get("currentActivity"),r=a.get("workflow.id"),i=a.get("documentList.id"),o.router.navigate(o.map.getReportingInstanceCreate(n,r,i)),null},H=function(t,e){var n;return!!(n=N.get(t,"activity.source"))&&n===e},function(t){return H(t,F.U_1_1)},et=function(e){var t,n,i;return t=function(t){var e,n,i,a;for(i=new s.data.ObservableArray([]),n=0,a=t.length;n<a;n++)e=t[n],i.push(new _(e));return i},i=function(t){return e.success(t)},n=function(t){return e.error(t)},O.list().then(t).then(i).catch(n),null},q=function(t){var e,n,i,a,r,o;return o=s.template(w),r=o({}),i={dataSource:{transport:{read:et,push:X},schema:{model:_}},editable:!1,columns:[{command:[S.customCommand(l.t("reporting:instances.view"),B),S.customCommand(l.t("reporting:instances.start"),V)],title:" ",width:"200px"},{field:"activityName()",title:l.t("reporting:instances.activity"),width:"200px",template:function(t){var e;if(e=t.activity)return"<a href='"+kendo.htmlEncode(U.activityEdit(e.id))+"'>"+kendo.htmlEncode(e.name)+"</a>"}},E.column({field:"date",title:l.t("reporting:instances.date"),width:"200px"}),{field:"getPeriod()",title:l.t("reporting:instances.period"),width:"200px"},{field:"getFiling()",title:l.t("reporting:instances.filing"),width:"200px"},A.column({field:"running",title:l.t("reporting:instances.running"),width:"200px"}),{field:"status",title:l.t("reporting:instances.status"),width:"200px"}],toolbar:function(){return r},pageable:S.defaultPageable(),height:500,scrollable:!0},S.withDefaults(i),(e=d(rt)).kendoGrid(i),a=e.find("#reportingInstanceGridToolbarMenu"),s.bind(a,{}),a.localize(),null!=(n=a.data("kendoMenu"))&&n.bind("select",W.bind(null,t)),null},j=function(t){var e,n;if((n=d(rt).data("kendoGrid"))&&n.dataSource)return(e=t.get("currentActivity"))?n.dataSource.filter({field:"activity.id",operator:"eq",value:e}):n.dataSource.filter({}),null},K=function(t,e){var n,i;if(e&&e.data)return n=e.data,"create"===(i=e.type)?t.pushCreate(n):"update"===i?t.pushUpdate(n):"destroy"===i&&t.pushDestroy(n),null},J=function(t,e){var n;if(e)return n=t.data.options,i.isArray(e)?i.each(e,K.bind(null,n)):K(n,e),null},$=function(t){var e;return e={options:t},d("body").on("domosws:reporting:activities",e,J),null},L=function(t){var e;return(e=null!=t?t.id:void 0)?o.router.navigate(o.map.getReportingActivityEdit(e)):o.router.navigate(o.map.notfound),null},Y=function(t,e){var n,i,a,r;return a=t.model,n=null,(i=e.sender)&&0<(r=i.select()).length&&(n=i.dataItem(r[0])),n?(a.set("currentActivity",n.id),a.set("documentList",n.documentList),a.set("workflow",n.workflow)):(a.set("currentActivity",null),a.set("documentList",null),a.set("workflow",null)),null},P=function(t,e){return o.router.navigate(o.map.getReportingActivityEdit(null)),null},tt=function(e){var t,n,i;return t=function(t){var e,n,i,a;for(i=new s.data.ObservableArray([]),n=0,a=t.length;n<a;n++)e=t[n],i.push(new x(e));return i},i=function(t){return e.success(t)},n=function(t){return e.error(t)},R.list().then(t).then(i).catch(n),null},G=function(t){var e,n,i,a,r,o;return o=s.template(C),r=o({}),i={dataSource:{transport:{read:tt,push:$},schema:{model:x},sort:[{field:"name",dir:"asc"},{field:"legalPersonName()",dir:"asc"}]},editable:!1,columns:[{command:[S.customCommand(l.t("reporting:activities.view"),L)],title:" ",width:"100px"},{field:"name",title:l.t("reporting:activities.name"),width:"200px"},F.column({field:"source",title:l.t("reporting:activities.source"),width:"200px"}),E.column({field:"nextDueDate",title:l.t("reporting:activities.nextDueDate"),width:"200px"}),{field:"active",title:l.t("reporting:activities.active"),width:"200px"},D.column({field:"legalPerson",title:l.t("reporting:activities.assignment"),width:"200px"}),k.column({field:"country",title:l.t("reporting:activities.reportingCountry"),width:"200px"})],toolbar:function(){return r},change:Y.bind(null,t),pageable:S.defaultPageable(),height:500,scrollable:!0},S.withDefaults(i),(e=d("#activityActivityGrid")).kendoGrid(i),a=e.find("#reportingActivityGridToolbarMenu"),s.bind(a,{}),a.localize(),null!=(n=a.data("kendoMenu"))&&n.bind("select",P.bind(null,t)),null},{updateRawModel:function(t,e){return null},init:function(t){var e,n,i;return e={},t.activitiesContext=e,i={currentActivity:null,documentList:null,workflow:null},n=s.observable(i),e.model=n,G(e),q(e),M(n),null},startSuccess:at=function(){var t,e;return null!=(t=d(rt).data("kendoGrid"))&&null!=(e=t.dataSource)&&e.read(),null},startFail:nt=function(){return null}}})}.call(this),function(){var l,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E;g=(h={id:2,elementId:"#reportingProductionLi"}).id,s=(l={id:3,elementId:"#reportingActivityLi"}).id,y=(v={id:4,elementId:"#reportingPreviewLi"}).id,I=(T={id:5,elementId:"#reportingRepositoryLi"}).id,E=(k={id:6,elementId:"#reportingWorkflowLi"}).id,c=(u={id:7,elementId:"#reportingDocumentListsLi"}).id,m=[f={id:1,elementId:"#reportingOverviewLi"},h,l,v,T,k,u],p=b=f.id,C="currentMenuSelection",w="k-state-active",define("views/reporting/reporting.menu",["jquery","views/reporting/reporting.activities"],function(o,e){var i,a,d,r;return d=function(t,e){var n;return n=o(t.elementId),t.id===e?n.addClass(w):n.removeClass(w),null},i=function(t){return o.getJSON("reporting/generate/instances.json"),null},r=function(t){return o.getJSON("reporting/instance/start.json").done(e.startSuccess()).fail(e.startFail()),null},a=function(t,e){var n,i,a,r;if(r=t.model,i=e.id,r.get(C)!==i){for(n=0,a=m.length;n<a;n++)d(m[n],i);r.set(C,i)}return e===h&&(o("#reportingInstanceGrid").data("kendoGrid").refresh(),o("#reportingProductionTaskGrid").data("kendoGrid").refresh()),e===l&&(o("#activityActivityGrid").data("kendoGrid").refresh(),o("#activityInstanceGrid").data("kendoGrid").refresh()),e===v&&(o("#aifmAssumptionGrid").data("kendoGrid").refresh(),o("#aifAssumptionGrid").data("kendoGrid").refresh()),e===T&&t.repositoryContext.grid.refresh(),e===k&&t.workflowContext.grid.refresh(),e===u&&o("#documentListGrid").data("kendoGrid").refresh(),null},{updateRawModel:function(t,e,n){return null==n&&(n=!1),n&&(p=g),e[C]=p,e.isMenuVisible=!n,e.isOverviewActive=function(){return this.get(C)===b},e.isProductionActive=function(){return this.get(C)===g},e.isActivityActive=function(){return this.get(C)===s},e.isPreviewActive=function(){return this.get(C)===y},e.isRepositoryActive=function(){return this.get(C)===I},e.isWorkflowActive=function(){return this.get(C)===E},e.isDocumentListsActive=function(){return this.get(C)===c},e.overviewMenuClick=a.bind(null,t,f),e.productionMenuClick=a.bind(null,t,h),e.activityMenuClick=a.bind(null,t,l),e.previewMenuClick=a.bind(null,t,v),e.repositoryMenuClick=a.bind(null,t,T),e.workflowMenuClick=a.bind(null,t,k),e.documentListsMenuClick=a.bind(null,t,u),e.generateClick=i.bind(null,t),e.startAllClick=r.bind(null,t),null},init:function(t){}}})}.call(this),define("core/api/ReportingTimelinessType",["require","exports","lodash","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils","core/web/WebLocation"],function(t,e,i,n,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReportingTimelinessType=void 0;var d,l,s,u,c;function p(t){return o.WebLocation.resolveImage(function(t){switch(t){case d.CLOSE_TO_DUE_DATE:return"reporting_close_to_date_16x16.png";case d.LATE:return"reporting_late_16x16.png";default:return"reporting_in_time_16x16.png"}}(t))}function m(t){return"<img src='"+p(t)+"' class='gridRowImageWithText'/><span class='"+function(t){switch(t){case d.CLOSE_TO_DUE_DATE:return"reportingCloseToDate";case d.LATE:return"reportingLate";default:return"reportingInTime"}}(t)+"'>"+(d.getName(t)||"")+"</span>"}(l=d=e.ReportingTimelinessType||(e.ReportingTimelinessType={}))[l.IN_TIME=0]="IN_TIME",l[l.CLOSE_TO_DUE_DATE=1]="CLOSE_TO_DUE_DATE",l[l.LATE=2]="LATE",(s=d=e.ReportingTimelinessType||(e.ReportingTimelinessType={})).getName=r.EnumUtils.createNameFn("reporting:timelinessTypes",s),s.widget=a.EnumWidgetUtils.createDropList("DomosReportingTimelinessType",s,!1),u=d=e.ReportingTimelinessType||(e.ReportingTimelinessType={}),c=n.EnumColumnUtils.createFactory(u,u.widget),u.column=function(t){var n=t.field;return!i.has(t,"template")&&n&&(t.template=function(t){if(!t||!i.has(t,n))return"";var e=t[n];return i.isNumber(e)?m(e):""}),c(t)}}),function(){var w,_,v;w="#reportingOverviewCalendar",v="#reportingOverviewValidationChart",_="#reportingOverviewLateChart",define("views/reporting/reporting.overview",["jquery","lodash","i18n","kendo","core/api/ReportingSource","core/api/ReportingTimelinessType","core/util/EnumUtils"],function(D,t,S,N,e,n,i){var x,C,R,a,r,o,d,l,s,u,c,p;return C=e.ReportingSource,R=n.ReportingTimelinessType,x=i.EnumUtils,function(){return{query:null,calendar:null,validationChart:null,lateChart:null}},a=function(t){var e,n,i,a;return null!=(n=(e=t.overviewContext).calendar)&&n.destroy(),e.calendar=null,D(w).empty(),null!=(i=e.validationChart)&&i.destroy(),e.validationChart=null,D(v).empty(),null!=(a=e.lateChart)&&a.destroy(),e.lateChart=null,D(_).empty(),null},c=function(t,e){var n,o,i,a,r,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I;if(f=t.overviewContext,T=new Date,g={},e&&e.scheduling){for(b={},r=0,s=(v=e.scheduling).length;r<s;r++)for(d=0,u=(y=(p=v[r]).dates).length;d<u;d++)n=y[d],null==b[o=new Date(n).toDateString()]&&(b[o]={aif:[],aifm:[]}),h=b[o],p.source===C.AIF_1_2?h.aif.push(p.name):p.source===C.AIFM_1_2&&h.aifm.push(p.name);for(l in b)c={tip:""},0<(I=b[l]).aifm.length&&(c.tip+="<br/>AIFM: "+I.aifm.join(", "),0<I.aif.length?c.style="reportingCalendarAIFMandAIF":c.style="reportingCalendarAIFM"),0<I.aif.length&&(c.tip+="<br/>AIF: "+I.aif.join(", "),I.aifm.length<=0&&(c.style="reportingCalendarAIF")),g[l]=c}return(i=[]).push(g),m={value:T,dates:i,month:{content:'# var obj = data.dates[0][data.date.toDateString()]; if (obj !== null && typeof obj !== "undefined") { # <div data-tip="#= obj.tip#" class="#= obj.style#">#= data.value#</div> # } else { # #= data.value # # } #'},navigate:function(){return D(".reportingCalendarAIF, .reportingCalendarAIFM, .reportingCalendarAIFMandAIF").kendoTooltip({content:function(t){var e,n,i,a,r;return a=(r=t.target).data("tip"),o="",null!=(e=D(r).parent().data("value"))&&(n=e.split("/"),i=new Date(parseInt(n[0]),parseInt(n[1]),parseInt(n[2])),o="<b>"+kendo.toString(i,"D")+"</b>"),o+a}})}},(a=D(w)).kendoCalendar(m),f.calendar=a.data("kendoCalendar")},p=function(t,e){var n,l,i,s,a,r,o,d,u,c,p,m,f,b;for(p=t.overviewContext,b=e.status,l={},a=0,r=b.length;a<r;a++)(u=b[a]).status&&(null==l[o=u.source]&&(l[o]={}),null==(n=l[u.source])[d=u.status]&&(n[d]=0),l[u.source][u.status]+=u.count);return m=[],s=!0,f=function(t){var e,n,i,a,r,o,d;if(e=l[t],i=C.getName(t)||"",null!=e){for(d in r=[],e)(n=e[d])&&(o={category:i+" ("+d+")",value:n},r.push(o));return a={name:i,data:r,labels:{visible:!0,background:"transparent",position:s?"insideEnd":"outsideEnd",template:"#= category #: #= value#"}},m.push(a),s=!1}},x.forEach(C,f),c={series:m,seriesDefaults:{type:"donut"},legend:{visible:!1,position:"bottom"},chartArea:{background:""},tooltip:{visible:!0,template:"#= category #: #= value#"},title:{text:S.t("reporting:overview.productionStatus")}},(i=D(v)).kendoChart(c),p.validationChart=i.data("kendoChart"),null},function(t,e){var n,i,a,r,o,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E;for(b=t.overviewContext,E=e.tracking,n=x.map(R,function(t){return t}),r=[],h=[],w={},d=0,u=E.length;d<u;d++)for(m=E[d],a=new Date(m.date),k=m.tasks,v=m.report,r.push(N.toString(a,"d")),h.push(v),l=0,c=n.length;l<c;l++)null==w[I=n[l]]&&(w[I]=[]),null!=k[I]?k[I]&&w[I].push(k[I]):w[I].push(0);for(T=[],s=0,p=n.length;s<p;s++)g={type:"column",data:w[I=n[s]],name:R.getName(I)||"",axis:"statusAxis"},T.push(g);return g={type:"line",data:h,name:S.t("reporting:overview.reportGeneration"),axis:"reportAxis"},T.push(g),C={name:"statusAxis",line:{visible:!(i=[])},title:{text:S.t("reporting:overview.statusCount")}},i.push(C),y={name:"reportAxis",line:{visible:!0},title:{text:S.t("reporting:overview.reportCount")}},i.push(y),f={series:T,legend:{visible:!0,position:"bottom"},chartArea:{background:""},valueAxis:i,categoryAxis:{categories:r,majorGridLines:{visible:!1}},tooltip:{visible:!0,template:"#= series.name #: #= value #"},title:{text:S.t("reporting:overview.productionTracking")}},(o=D(_)).kendoChart(f),b.lateChart=o.data("kendoChart"),null},l=function(t,e){return c(t,e),p(t,e)},s=function(t){return null},d=function(t){return t.overviewContext.query=null},o=function(t){var e;if(!(e=t.overviewContext).query)return a(t),e.query=D.getJSON("reporting/overview.json").done(l.bind(null,t)).fail(s.bind(null,t)).always(d.bind(null,t)),null},u=function(t){return o(t)},r=function(t){var e;return e={items:[{type:"button",text:S.t("reporting:overview.refresh"),click:u.bind(null,t)}]},D("#reportingOverviewToolbar").kendoToolBar(e),null},{updateRawModel:function(t,e){return null},init:function(t){var e;return e={query:null,calendar:null,validationChart:null,lateChart:null},t.overviewContext=e,r(t),o(t),null}}})}.call(this),function(){define("views/reporting/production/production.instances",["jquery","lodash","i18n","kendo","site","ui","core/util/ObservableUtils","reporting/ui/ReportingActivityUI","core/api/ReportingSource","core/api/ReportingRunningStatus","core/api/ReportingPeriodType","core/ui/DateUI","reporting/repository/ReportingInstanceRepository","reporting/data/ReportingInstanceModel","object/web/ObjectMap","reporting/web/ReportingMap"],function(n,i,a,r,t,e,o,d,l,s,u,c,p,m,f,b){var v,y,h,g,T,I,C,w,k,E,D,S,N;return v=c.DateUI,o.ObservableUtils,d.ReportingActivityUI,l.ReportingSource,C=s.ReportingRunningStatus,u.ReportingPeriodType,r.data.DataSource,y=e.grid,T=p.ReportingInstanceRepository,g=m.ReportingInstanceModel,h=f.ObjectMap,I=b.ReportingMap,function(){return{}},E=function(t,e){var n,i;if(e&&e.data)return n=e.data,"create"===(i=e.type)?t.pushCreate(n):"update"===i?t.pushUpdate(n):"destroy"===i&&t.pushDestroy(n),null},k=function(t,e){var n;if(e)return n=t.data.options,i.isArray(e)?i.each(e,E.bind(null,n)):E(n,e),null},D=function(t){var e;return e={options:t},n("body").on("domosws:reporting:instances",e,k),null},S=function(t,e){var n,i,a,r;return a=t.model,i=null,(n=e.sender)&&0<(r=n.select()).length&&(i=n.dataItem(r[0])),i?(i.toJSON&&(i=i.toJSON()),a.set("currentInstance",i)):a.set("currentInstance",null),null},N=function(e){var t,n,i;return t=function(t){var e,n,i,a;for(i=new r.data.ObservableArray([]),n=0,a=t.length;n<a;n++)e=t[n],i.push(new g(e));return i},i=function(t){return e.success(t)},n=function(t){return e.error(t)},T.list().then(t).then(i).catch(n),null},w=function(t){var e;return e={dataSource:{transport:{read:N,push:D},schema:{model:g},sort:{field:"name",dir:"asc"},filter:{field:"running",operator:"eq",value:C.RUNNING},group:{field:"activity.name"}},editable:!1,columns:[{field:"activity.name",title:a.t("reporting:production.activity"),template:function(t){var e;if(e=t.activity)return"<a href='"+kendo.htmlEncode(I.activityEdit(e.id))+"'>"+kendo.htmlEncode(e.name)+"</a>"}},v.column({field:"date",title:a.t("reporting:production.date")}),C.column({field:"running",title:a.t("reporting:instances.running")}),{field:"getLegal()",title:a.t("reporting:production.assignment"),template:function(t){var e;if(e=t.activity)return"<a href='"+kendo.htmlEncode(h.objectEdit(e.legalPersonId))+"'>"+kendo.htmlEncode(e.legalPersonName)+"</a>"}},{field:"getSource()",title:a.t("reporting:production.source")},{field:"status",title:a.t("reporting:production.status")},{field:"getPeriod()",title:a.t("reporting:production.period")}],pageable:y.defaultPageable(),height:600,scrollable:!0,change:S.bind(null,t)},y.withDefaults(e),n("#reportingInstanceGrid").kendoGrid(e),null},{updateRawModel:function(t,e){return null},init:function(t){var e;return e={},t.instancesContext=e,w(t),null}}})}.call(this),function(){define("views/reporting/report/report.viewer",["jquery","lodash","i18n","kendo"],function(o,t,d,n){var i,a,r,l,s,u,c,p;return s=function(t,e){var n;return n={},t._isPreview?n.preview=e.id:n.instance=e.id,"reporting/report.xml?"+o.param(n)},l=function(t,e){var n;return n={},t._isPreview?n.preview=e.id:n.instance=e.id,"reporting/report.pdf?"+o.param(n)},r=function(t,e){var n;return n={},t._isPreview?n.preview=e.id:n.instance=e.id,"reporting/report/inline.pdf?"+o.param(n)},u=function(t,e,n){var i,a,r;return r=o("<ul>").attr("style","width:900px").appendTo(e),i=o("<li>").appendTo(r),(a=n.reportName)||(a="report"),o("<a>").attr("download",a+".xml").attr("href",s(t,n)).text(d.t("reporting:reportViewer.downloadXML")).appendTo(i),i=o("<li>").appendTo(r),o("<a>").attr("download",a+".pdf").attr("href",l(t,n)).text(d.t("reporting:reportViewer.downloadPDF")).appendTo(i),r.kendoMenu(),null},p=function(t,e,n){return o("<object>").attr("type","application/pdf").attr("data",r(t,n)).attr("width","900").attr("height","1200").appendTo(e)},c=function(t){return o("<h3>").text(d.t("reporting:reportViewer.noReports")).appendTo(t)},i=function(t){var e;return e=o(t._element),n.destroy(e),e.empty(),null},a=function(t,e){var n;return i(t),n=o(t._element),e&&e.id?(u(t,n,e),p(t,n,e)):c(n),null},{create:function(t,e){var n;return null==e&&(e=!1),(n={_element:t,_isPreview:e}).display=a.bind(null,n),n}}})}.call(this),function(){define("views/reporting/production/production.preview",["jquery","lodash","i18n","kendo","core/event/SiteEvents","views/reporting/report/report.viewer"],function(s,u,n,t,e,i){var a,r,o,d,l,c,p,m,f,b,v,y,h,g,T;return a=e.SiteEvents,function(){return{viewer:null,query:null}},d=function(t){var e,n,i;for(e=0,n=t.length;e<n;e++)i=t[e],a.warning({message:i.warning,information:i.info});return null},b=function(t,e){return e.warnings&&d(e.warnings),t.viewer.display(e)},v=function(t,e){return t.viewer.display(null),null},f=function(t){return t.query=null},c=function(t,e,n){var i,a,r,o,d,l;if(r=t.model,!(d=t.productionPreviewContext).query&&(a=null!=(l=r.get("currentInstance"))?l.get("id"):void 0))return i={instance:a,debug:e},u.isNil(n)||(i.freeze=n),o={type:"POST",url:"reporting/instance/generate.json",dataType:"json",data:i},d.query=s.ajax(o).done(b.bind(null,d)).fail(v.bind(null,d)).always(f.bind(null,d)),null},p=function(t){return c(t,!1)},o=function(t){return c(t,!0)},l=function(t){return c(t,!1,!0)},T=function(t){return c(t,!1,!1)},m=function(t){var e;return e={items:[{type:"button",text:n.t("reporting:production.generate"),click:p.bind(null,t)},{type:"button",text:n.t("reporting:production.debug"),click:o.bind(null,t)},{type:"button",text:n.t("reporting:production.freeze"),click:l.bind(null,t)},{type:"button",text:n.t("reporting:production.unfreeze"),click:T.bind(null,t)}]},s("#productionPreviewToolbar").kendoToolBar(e),null},h=function(t,e){return t.productionPreviewContext.viewer.display(e)},g=function(t){var e,n,i;if(t.productionPreviewContext.viewer.display(null),i=null!=(e=t.model.get("currentInstance"))?e.get("id"):void 0)return n={id:i},s.getJSON("reporting/instance/report.json",n).done(h.bind(null,t)),null},y=function(t,e){return"currentInstance"===e.field&&g(t),null},r=function(t){return t.model.bind("change",y.bind(null,t))},{updateRawModel:function(t,e){return null},init:function(t){var e;return e={viewer:null,query:null},(t.productionPreviewContext=e).viewer=i.create("#productionPreviewViewer"),e.viewer.display(null),m(t),r(t),null}}})}.call(this),function(){var s,u,c;c="productionWorkflowLi",s="productionPreviewLi",u="productionTaskLi",define("views/reporting/production/production.tab.strip",["jquery","lodash","i18n","kendo"],function(r,t,e,n){var i,a,o,d,l;return o=function(){return r("#productionTab").data("kendoTabStrip")},l=function(t,e,n){var i,a;return a=o(),n?(i=!1,(t||n!==c&&n!==s)&&(e||n!==u)||(i=!0),i&&l(t,e,null)):t?a.select(r("#productionWorkflowLi")):e&&a.select(r("#productionTaskLi")),null},a=function(t){var e,n,i,a;if(e=!!t.get("currentInstance"),n=!!t.get("currentTask"),e||n)return a=null!=(i=o().select())?i.attr("id"):void 0,l(e,n,a)},d=function(t,e){var n;return"currentInstance"!==(n=e.field)&&"currentTask"!==n||a(t),null},i=function(t){return t.bind("change",d.bind(null,t)),null},{updateRawModel:function(t,e){return e.hasTab=function(){return!!this.get("currentInstance")||!!this.get("currentTask")},null},init:function(t){return i(t.model),null}}})}.call(this),function(){var N;N="#reportingProductionTaskGrid",define("views/reporting/production/production.tasks",["jquery","lodash","i18n","kendo","ui","core/util/ObservableUtils","reporting/ui/ReportingActivityUI","core/api/ReportingTimelinessType","core/ui/DateUI","core/ui/IntegerUI"],function(r,i,n,t,e,a,o,d,l,s){var u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S;return u=l.DateUI,c=s.IntegerUI,m=a.ObservableUtils,f=o.ReportingActivityUI,b=d.ReportingTimelinessType,p=e.grid,function(){return{}},h=function(){return r(N).data("kendoGrid")},S=function(t){var e,n,i,a;return n=t.model,a=null,(e=h())&&0<(i=e.select()).length&&(a=e.dataItem(i[0])),a?(a.toJSON&&(a=a.toJSON()),n.set("currentTask",a)):n.set("currentTask",null),null},k=function(t){return setTimeout(S.bind(null,t))},C=function(t,e){return S(t)},E=function(t,e){var n,i,a;return n={},(i=null!=(a=t.model.get("currentInstance"))?a.get("id"):void 0)&&(n.instance=i),r.getJSON("reporting/instance/task/list.json",n).done(e.success).fail(e.error),null},g=function(t){var e;return e={dataSource:{transport:{read:E.bind(null,t)},schema:{model:{id:"id",fields:{name:{type:"string"},priority:{type:"number"},date:{type:"date"},activity:{nullable:!0},dueDate:{type:"date"},timeliness:{type:"number"}},activityName:function(){return m.get(this,"activity.name")}}},requestEnd:k.bind(null,t)},groupable:!1,editable:!1,change:C.bind(null,t),columns:[{field:"name",title:n.t("reporting:tasks.name")},u.column({field:"date",title:n.t("reporting:tasks.date")}),f.column({field:"activity",title:n.t("reporting:tasks.activityName")}),u.column({field:"dueDate",title:n.t("reporting:tasks.dueDate")}),b.column({field:"timeliness",title:n.t("reporting:tasks.timeliness")}),c.column({field:"priority",title:n.t("reporting:tasks.priority")})],pageable:p.defaultPageable(),height:600,scrollable:!0},p.withDefaults(e),r(N).kendoGrid(e),null},D=function(t){var e,n;return null!=(e=h())&&null!=(n=e.dataSource)?n.read():void 0},w=function(t,e){var n;if(e&&e.data)return(n=e.data).id,n.instance,"started"===e.type?D():"completed"===e.type&&D(),null},I=function(t,e){var n;if(n=t.data.context,e)return i.isArray(e)?i.each(e,w.bind(null,n)):w(0,e),null},v=function(t){var e;return e={context:t},r("body").on("domosws:workflow:tasks",e,I),null},T=function(t,e){return"currentInstance"===e.field&&D(),null},y=function(t){return t.model.bind("change",T.bind(null,t))},{updateRawModel:function(t,e){return null},init:function(t){var e;return e={},t.productionTaskContext=e,g(t),v(t),y(t),null}}})}.call(this),function(){define("views/reporting/production/production.task.form",["jquery","lodash","i18n","kendo","core/web/WebLocation","views/workflow/task/diagram.task"],function(a,t,e,n,i,r){var o,d,l,s,u,c;return o=i.WebLocation,l=function(t,e,n){var i;return i={task:e,properties:JSON.stringify(n)},a.post(o.resolve("workflow/task/complete.json"),i),null},c=function(t,e){var n,i;return(n=a("#productionTaskForm")).empty(),i={complete:l.bind(null,t)},r.setupForm(n,i,e)},u=function(t){var e;return(e=t.model.get("currentTask"))&&e.toJSON&&(e=e.toJSON()),c(t,e)},s=function(t,e){return"currentTask"===e.field&&u(t),null},d=function(t){return t.model.bind("change",s.bind(null,t))},{updateRawModel:function(t,e){return null},init:function(t){return d(t),null}}})}.call(this),function(){define("views/reporting/production/production.workflow",["jquery","lodash","i18n","kendo","site","views/workflow/diagram"],function(n,t,i,s,e,a){var r,o,d,l,u,c,p,m;return o=e.router,r=e.map,l=function(){return{diagram:a.create("#productionWorkflowDiagram")}},p=function(t){var e,n,i,a,r,o,d,l;return l=null!=(n=(r=t.model).get("currentInstance"))?n.get("workflowInstance"):void 0,i=null!=n?n.get("date"):void 0,d={},(e=null!=(o=r.get("currentActivityName"))?o.call(r):void 0)&&(a=e,i&&(i=new Date(i),a+=" - "+s.toString(i,"d")),d.exportName=a),t.productionWorkflowContext.diagram.displayInstanceWithTasks(d,l)},u=function(t){var e,n;return(e=null!=(n=t.model.get("currentInstance"))?n.get("id"):void 0)&&o.navigate(r.getReportingInstanceDocumentEdit(e)),!0},m=function(t){var e;return e={items:[{type:"button",text:i.t("reporting:documents.documents"),click:u.bind(null,t)}]},n("#productionWorkflowToolbar").kendoToolBar(e),null},c=function(t,e){if("currentInstance"===e.field)return p(t)},d=function(t){return t.model.bind("change",c.bind(null,t))},{updateRawModel:function(t,e){return null},init:function(t){var e;return e=l(),t.productionWorkflowContext=e,m(t),d(t),null}}})}.call(this),define("text!templates/email/email.form.html",[],function(){return'<div id="emailContainer">\n\t<h4 data-i18n="email:emailForm.noEmails" data-bind="invisible: emailListNotEmpty"></h4>\n\t<div id="emailList" data-bind="visible: emailListNotEmpty">\n\t\t<h4 data-i18n="email:emailGrid.title" class="reducedLeft"></h4>\n\t\t<div id="emailGrid"></div>\n\t</div>\n\t<div id="slide-in-handle-container" style="text-align: center;" data-bind="visible: displayTemplate">\n\t\t<a id="slide-in-handle" class="k-icon k-i-arrow-double-60-down" href="javascript:void(0)"></a>\n\t</div>\n\t<div id="emailTemplate" data-bind="visible: showTemplate">\n\t\t<div id="slide-in-pannel">\n\t\t\t<h4 data-i18n="email:template.title" class="reducedLeft"></h4>\n\t\t\t<div id=subjectGroup>\n\t\t\t\t<label class="emailLabel" for="subject" data-i18n="email:template.subject">Subject</label>\n\t\t\t\t<input class="emailInput" id="subject" type="text" class="k-textbox" data-bind="value: subjectTemplate"/>\n\t\t\t</div>\n\t\t\t<div id=templateGroup>\n\t\t\t\t<label class="emailLabel" for="bodyTemplate" data-i18n="email:template.body">Body Template</label>\n\t\t\t\t<div id="emailBodyTextEditor"></div>\n\t\t\t</div>\n\t\t\t<div class="formWindowButtonsCenter">\n\t\t\t\t<button class="k-button k-primary" data-bind="visible: templateUpdateVisible, click: updateTemplate" data-i18n="email:emailForm.updateTemplateButton"></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'}),define("email/repository/EmailRepository",["require","exports","core/web/WebHttp"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EmailRepository=void 0;var n=function(){function t(){}return t.readForm=function(t,e){return i.WebHttp.getJson("email/form.json",{workflowId:t,dashboardId:e})},t.readEmailList=function(t){return i.WebHttp.getJson("email/list.json",{workflowId:t})},t.readEmailBody=function(t){return i.WebHttp.getJson("email/body.json",{emailId:t})},t.updateEmails=function(t){var e={data:JSON.stringify(t)};return i.WebHttp.postJson("email/list.json",e)},t.sendEmail=function(t,e){var n={data:JSON.stringify({action:"send",workflowId:t,emailId:e})};return i.WebHttp.postJson("email.json",n)},t.updateTemplate=function(t,e,n){return i.WebHttp.postJson("email/update/template.json",{workflowId:t,subjectTemplate:e,bodyTemplate:n})},t}();e.EmailRepository=n}),define("email/data/EmailSendingStatus",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EmailSendingStatus=void 0;var r,o;(r=e.EmailSendingStatus||(e.EmailSendingStatus={}))[r.NOT_SENT=1]="NOT_SENT",r[r.SENT=2]="SENT",r[r.SEND_ERROR=3]="SEND_ERROR",(o=e.EmailSendingStatus||(e.EmailSendingStatus={})).getName=n.EnumUtils.createNameFn("email:EmailSendingStatus",o),o.widget=i.EnumWidgetUtils.createDropList("DomosEmailSendingStatus",o,!1),o.column=a.EnumColumnUtils.createFactory(o,o.widget),o.getStatusClass=function(t){switch(t){case o.NOT_SENT:return"emailStatusNotSent";case o.SENT:return"emailStatusSent";default:return"emailStatusError"}}}),define("text!templates/email/email.grid.toolbar.html",[],function(){return'<div data-bind="visible: isToolbarVisible" class="k-header k-grid-toolbar">\n    <a href="javascript:void(0)" class="k-button k-button-icontext k-grid-save-changes" data-bind="click: saveChanges, enabled: hasChanges">\n        <span class="k-icon k-i-check"></span>\n        #=$.t("email:emailGrid.actions.saveChanges")#\n    </a>\n    <a href="javascript:void(0)" class="k-button k-button-icontext k-grid-cancel-changes" data-bind="click: cancelChanges, enabled: hasChanges">\n        <span class="k-icon k-i-cancel"></span>\n        #=$.t("email:emailGrid.actions.cancelChanges")#\n    </a>\n    <a class="k-button" data-bind="click: sendEmail, enabled: isSelected, visible: sendIsVisible">\n        <span class="k-icon k-i-email k-i-envelop k-i-letter"></span>\n        #=$.t("email:emailGrid.actions.send")#\n    </a>\n    <a class="k-button" data-bind="click: sendEmail, enabled: isSelected, visible: resendIsVisible">\n        <span class="k-icon k-i-email k-i-envelop k-i-letter"></span>\n        #=$.t("email:emailGrid.actions.resend")#\n    </a>\n    <a class="k-button" data-bind="click: exportExcel">\n        <span class="k-icon k-i-excel"></span>\n        #=$.t("email:emailGrid.actions.exportExcel")#\n    </a>\n</div>'}),define("email/data/EmailDeliveryStatus",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EmailDeliveryStatus=void 0;var r,o;(r=e.EmailDeliveryStatus||(e.EmailDeliveryStatus={}))[r.UNKNOWN=1]="UNKNOWN",r[r.QUEUED=2]="QUEUED",r[r.DELIVERED=3]="DELIVERED",r[r.OPENED=4]="OPENED",r[r.CLICKED=5]="CLICKED",r[r.BOUNCED=6]="BOUNCED",r[r.SPAM=7]="SPAM",r[r.UNSUBSCRIBED=8]="UNSUBSCRIBED",r[r.BLOCKED=9]="BLOCKED",r[r.HARDBOUNCED=10]="HARDBOUNCED",r[r.SOFTBOUNCED=11]="SOFTBOUNCED",r[r.DEFERRED=12]="DEFERRED",r[r.UNDEFINED=13]="UNDEFINED",(o=e.EmailDeliveryStatus||(e.EmailDeliveryStatus={})).getName=n.EnumUtils.createNameFn("email:EmailDeliveryStatus",o),o.widget=i.EnumWidgetUtils.createDropList("DomosEmailDeliveryStatus",o,!1),o.column=a.EnumColumnUtils.createFactory(o,o.widget),o.getStatusClass=function(t){switch(t){case o.DELIVERED:case o.OPENED:case o.CLICKED:return"emailStatusSent";case o.SPAM:return"emailStatusSpam";case o.UNKNOWN:case o.UNDEFINED:case o.DEFERRED:case o.BLOCKED:return"emailStatusFuzzy";default:return"emailStatusError"}}}),define("email/data/EmailRecipientType",["require","exports","core/util/EnumUtils","core/ui/widget/EnumWidgetUtils","core/ui/grid/column/EnumColumnUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EmailRecipientType=void 0;var r,o;(r=e.EmailRecipientType||(e.EmailRecipientType={}))[r.TO=1]="TO",r[r.CC=2]="CC",r[r.BCC=3]="BCC",(o=e.EmailRecipientType||(e.EmailRecipientType={})).getName=n.EnumUtils.createNameFn("email:EmailRecipientType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosEmailRecipientType",o,!1),o.column=a.EnumColumnUtils.createFactory(o,o.widget)}),define("email/view/EmailGrid",["require","exports","email/repository/EmailRepository","email/data/EmailSendingStatus","core/ui/grid/GridUtils","i18n","core/ui/DateTimeUI","document/web/DocumentMap","object/ui/ObjectUI","text!templates/email/email.grid.toolbar.html","core/data/DObservableBuilder","core/util/ObservableUtils","core/event/SiteEvents","core/ui/Confirmation","email/data/EmailDeliveryStatus","email/data/EmailRecipientType"],function(t,e,d,c,l,s,u,p,m,f,a,b,r,o,v,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EmailGrid=void 0;function h(t){var e,n=t.select();if(0<n.length){var i=t.dataItem(n[0]);i&&(e=i.toJSON())}return e}function g(){}function T(e,n,t){var i=e||{id:"",recipientType:y.EmailRecipientType.TO,name:"",email:"",externalId:null,deliveryStatus:null,deliveryDetails:null,fromName:"",fromAddress:"",subject:"",objectLinked:{id:0,name:"",category:0},alfrescoDocId:"",campaignId:null,creationTime:new Date,sentTime:null,sendingStatus:c.EmailSendingStatus.NOT_SENT,sendingDetails:null,active:!0};return a.DObservableBuilder.of(i).add("isToolbarVisible",function(){return!!t}).add("isSelected",function(){return!!e}).add("exportExcel",function(){t&&t.saveAsExcel()}).add("sendIsVisible",function(){return!e||e.sendingStatus===c.EmailSendingStatus.NOT_SENT}).add("resendIsVisible",function(){return!!e&&e.sendingStatus!==c.EmailSendingStatus.NOT_SENT}).add("hasChanges",function(){return!!t&&t.dataSource.hasChanges()}).add("saveChanges",function(){t&&t.dataSource.sync()}).add("cancelChanges",function(){t&&t.cancelChanges()}).add("sendEmail",function(){e&&o.Confirmation.confirmDelete(s.I18N.t("email:emailGrid.confirmSend")).then(function(t){t&&d.EmailRepository.sendEmail(n,e.id).then(function(){return r.SiteEvents.success(s.I18N.t("email:emailGrid.sendSuccess"))}).catch(function(){return r.SiteEvents.error(s.I18N.t("email:emailGrid.sendFailure"))})}).catch(g)}).build()}var n=function(){function t(){}return t.displayEmailGrid=function(t,i,n){var e=kendo.template(f),a=t.find("#emailGrid"),r={dataSource:{transport:{read:function(e){d.EmailRepository.readEmailList(i).then(function(t){e.success(t),n.get("workflowIsFinished")||(0===t.length?n.set("templateUpdateVisible",!0):n.set("templateUpdateVisible",0<t.filter(function(t){return t.sendingStatus===c.EmailSendingStatus.NOT_SENT}).length))}).catch(function(t){return e.error(t)})},update:function(e){d.EmailRepository.updateEmails(e.data.models).then(function(t){e.success(t),setTimeout(function(){return o.dataSource.read()},1)}).catch(e.error)}},batch:!0,schema:{model:{id:"id",fields:{id:{type:"string",nullable:!1,editable:!1},recipientType:{nullable:!1,editable:!1},name:{type:"string"},email:{type:"string"},deliveryStatus:{nullable:!0,editable:!1},fromName:{type:"string",editable:!1},fromAddress:{type:"string",editable:!1},subject:{type:"string"},objectLinked:{nullable:!1,editable:!1},alfrescoDocId:{type:"string",editable:!1},campaignId:{type:"number",nullable:!0,editable:!1},creationTime:{type:"date",nullable:!1,editable:!1},sentTime:{type:"date",nullable:!0,editable:!1},sendingStatus:{nullable:!1,editable:!1},sendingDetails:{type:"string",nullable:!0,editable:!1},active:{type:"boolean"}},objectLinkedName:function(){return b.ObservableUtils.get(this,"objectLinked.name")||""}}}},editable:!0,groupable:!0,filterable:!0,pageable:l.GridUtils.defaultPageable(),scrollable:!0,sortable:{mode:"multiple",allowUnsort:!0,showIndexes:!0},columns:[{field:"active",title:s.I18N.t("email:emailGrid.active"),attributes:{style:"text-align: center;"},template:function(t){return t?'<input type="checkbox" '+(t.active?' checked="checked"':"")+' class="chkbx" />':""},width:83},{field:"subject",title:s.I18N.t("email:emailGrid.subject")},{field:"fromName",title:s.I18N.t("email:emailGrid.fromName"),editable:function(){return!1}},{field:"fromAddress",title:s.I18N.t("email:emailGrid.fromAddress"),editable:function(){return!1}},y.EmailRecipientType.column({field:"recipientType",title:s.I18N.t("email:emailGrid.recipientType")}),{field:"name",title:s.I18N.t("email:emailGrid.name")},{field:"email",title:s.I18N.t("email:emailGrid.address")},m.ObjectUI.column({field:"objectLinked",title:s.I18N.t("email:emailGrid.object"),editable:function(){return!1}}),{field:"sendingStatus",title:s.I18N.t("email:emailGrid.sendingStatus"),template:function(t){return'<span class="'+c.EmailSendingStatus.getStatusClass(t.sendingStatus)+'">'+c.EmailSendingStatus.getName(t.sendingStatus)+"</span>"},width:140,editable:function(){return!1}},{field:"deliveryStatus",title:s.I18N.t("email:emailGrid.deliveryStatus"),template:function(t){return t.deliveryStatus?"<span"+(' class="'+v.EmailDeliveryStatus.getStatusClass(t.deliveryStatus)+'"')+">"+v.EmailDeliveryStatus.getName(t.deliveryStatus)+"</span>":""},width:140,editable:function(){return!1}},u.DateTimeUI.column({field:"creationTime",title:s.I18N.t("email:emailGrid.creationTime"),width:140,editable:function(){return!1}}),u.DateTimeUI.column({field:"sentTime",title:s.I18N.t("email:emailGrid.sentTime"),width:140,editable:function(){return!1}}),{field:"sendingDetails",title:s.I18N.t("email:emailGrid.sendingDetails"),template:function(t){return t.sendingDetails?'<span class="'+c.EmailSendingStatus.getStatusClass(t.sendingStatus)+'">'+t.sendingDetails+"</span>":""},editable:function(){return!1}},{field:"deliveryDetails",title:s.I18N.t("email:emailGrid.deliveryDetails"),template:function(t){return t.deliveryDetails&&t.deliveryStatus?'<span class="'+v.EmailDeliveryStatus.getStatusClass(t.deliveryStatus)+'">'+t.deliveryDetails+"</span>":""},editable:function(){return!1}},{field:"alfrescoDocId",title:s.I18N.t("email:emailGrid.attachment"),width:100,template:function(t){return t.alfrescoDocId?'<div style="text-align: center;"><a class="k-icon k-i-download" href="'+p.DocumentMap.downloadUrl(t.alfrescoDocId)+'"/></div>':""},editable:function(){return!1}}],change:function(t){var e=t.sender;T(h(e),i,e).bind(a)},dataBound:function(t){var e=t.sender;T(h(e),i,e).bind(a)},cellClose:function(t){var e=t.sender;T(h(e),i,e).bind(a)},excelExport:function(t){for(var e=t.sender.columns,n=-1,i=-1,a=0;a<e.length&&!("sendingStatus"===e[a].field&&(n=a,0<=i))&&!("deliveryStatus"===e[a].field&&(i=a,0<=n));a++);if(0<=n){var r=t.workbook;if(r){var o=r.sheets[0];if(o.rows)for(var d=1;d<o.rows.length;d++){var l=o.rows[d];if(l.cells){var s=l.cells[n].value;s&&(l.cells[n].value=c.EmailSendingStatus.getName(s));var u=l.cells[i].value;u&&(l.cells[i].value=v.EmailDeliveryStatus.getName(u))}}}}},toolbar:function(){return e}};l.GridUtils.withDefaults(r),a.kendoGrid(r);var o=a.data("kendoGrid");return T(void 0,i,void 0).bind(a),a.on("change","input.chkbx",function(t){var e=o.dataItem($(t.target).closest("tr")),n=!e.get("active");e.set("active",n),T(h(o),i,o).bind(a)}),a.kendoTooltip({filter:"td:nth-child(2)",position:"left",width:1e3,content:function(e){var t=o.dataItem(e.target.closest("tr")).get("id");d.EmailRepository.readEmailBody(t).then(function(t){e.sender.content.html("<div style='text-align:justify;'> "+t.content+"</div>")})}}).data("kendoTooltip"),o},t}();e.EmailGrid=n}),define("email/view/EmailTemplate",["require","exports","kendo","i18n","email/repository/EmailRepository","core/event/SiteEvents"],function(t,e,a,o,r,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EmailTemplate=void 0;var s="#slide-in-handle",u="k-i-arrow-double-60-down",c="k-i-arrow-double-60-up",n=function(){function d(){}return d.displayBodyTemplateEditor=function(t,e,n){var i=t.find("#emailBodyTextEditor"),a=$("<textarea>").addClass("componentEditor").appendTo(i);a.val(n);var r={textEditor:null,model:e},o={deserialization:{custom:d.__editorSerialization},serialization:{custom:d.__editorSerialization},tools:[{name:"formatting"},{name:"bold"},{name:"italic"},{name:"underline"},{name:"strikethrough"},{name:"justifyLeft"},{name:"justifyCenter"},{name:"justifyRight"},{name:"justifyFull"},{name:"insertUnorderedList"},{name:"insertOrderedList"},{name:"indent"},{name:"outdent"},{name:"createLink"},{name:"unlink"},{name:"insertImage"},{name:"foreColor"},{name:"backColor"},{name:"fontName"},{name:"fontSize"},{name:"createTable"}],change:d.__onTextChange.bind(null,r)};a.kendoEditor(o),r.textEditor=a.data("kendoEditor")},d.plugSlideEffect=function(e,n){var i=a.fx(e.find("#slide-in-pannel")).slideIn("up");d.actionSlide(e,i,n),e.find(s).click(function(t){d.actionSlide(e,i,n),t.preventDefault()})},d.updateTemplate=function(t,e){var n=t.get("subjectTemplate"),i=t.get("bodyTemplate");n&&i&&r.EmailRepository.updateTemplate(e,n,i).then(function(){l.SiteEvents.success(o.I18N.t("email:emailForm:refreshTemplateSuccess"))})},d.actionSlide=function(t,e,n){var i=t.find("#slide-in-handle-container"),a=t.find(s),r=!n.get("showTemplate");r?(n.set("showTemplate",r),e.reverse(),i.attr("title",o.I18N.t("email:template.hideTemplate")),a.removeClass(u),a.addClass(c)):(e.play(),i.attr("title",o.I18N.t("email:template.showTemplate")),a.removeClass(c),a.addClass(u),n.set("showTemplate",r))},d.__editorSerialization=function(t){t.replace(/(<\/?)strong(\s?)/g,"$1b$2").replace(/(<\/?)em(\s?)/g,"$1i$2")},d.__onTextChange=function(t){t.textEditor&&t.model.set("bodyTemplate",t.textEditor.value())},d}();e.EmailTemplate=n}),define("email/view/EmailForm",["require","exports","kendo","text!templates/email/email.form.html","email/repository/EmailRepository","core/util/Logger","i18n","lodash","./EmailGrid","./EmailTemplate","core/data/DObservable"],function(t,e,r,o,i,a,d,l,s,u,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EmailForm=void 0;var p={showTemplate:!1,templateUpdateVisible:!1,displayTemplate:!1};var n=function(){function t(){}return t.loadAndDisplay=function(e,t,n){r.destroy(e),e.empty(),i.EmailRepository.readForm(t,n).then(function(t){!function(n,i){var t=r.template(o)({}),e=i;l.defaults(e,p),i.bodyTemplate&&i.subjectTemplate&&(e.displayTemplate=!0),e.showTemplate=e.displayTemplate&&(i.workflowIsFinished||!(0===i.emailCount)),e.templateUpdateVisible=!1,0===i.emailCount&&(i.workflowIsFinished||(e.templateUpdateVisible=!0)),e.emailListNotEmpty=function(){return 0<i.emailCount},e.updateTemplate=function(){u.EmailTemplate.updateTemplate(c.DObservable.of(this),i.workflowId)};var a={model:r.observable(e),init:function(t){d.I18N.localize(n);var e=t.sender.model;0<i.emailCount&&s.EmailGrid.displayEmailGrid(n,i.workflowId,c.DObservable.of(e)),i.bodyTemplate&&(u.EmailTemplate.displayBodyTemplateEditor(n,c.DObservable.of(e),i.bodyTemplate),u.EmailTemplate.plugSlideEffect(n,c.DObservable.of(e)))}};new r.View(t,a).render(n)}(e,t)}).catch(function(t){a.Logger.error(t)})},t}();e.EmailForm=n}),function(){define("views/reporting/production/production.email",["email/view/EmailForm"],function(t){var n,e,i;return n=t.EmailForm,i=function(t,e){return"currentInstance"===e.field&&n.loadAndDisplay($("#productionEmailView"),t.model.currentInstance.workflowInstance,t.model.currentInstance.activity.dashboard),null},e=function(t){return t.model.bind("change",i.bind(null,t))},{updateRawModel:function(t,e){return null},init:function(t){return e(t),null}}})}.call(this),function(){define("views/reporting/reporting.production",["kendo","core/util/ObservableUtils","views/reporting/production/production.instances","views/reporting/production/production.preview","views/reporting/production/production.tab.strip","views/reporting/production/production.tasks","views/reporting/production/production.task.form","views/reporting/production/production.workflow","views/reporting/production/production.email"],function(l,t,e,n,i,a,r,o,d){var s,u,c,p;return u=t.ObservableUtils,s=[e,i,o,n,a,r,d],function(){return{}},p=function(t){return t&&u.get(t,"activity.name")||""},c=function(t){return{currentInstance:null,currentTask:null,currentActivityName:function(){return p(this.get("currentInstance"))},hasInstance:function(){return!!this.get("currentInstance")},currentTaskActivityName:function(){return p(this.get("currentTask"))},hasTask:function(){return!!this.get("currentTask")}}},{updateRawModel:function(t,e){return null},init:function(t){var e,n,i,a,r,o,d;for(o={},t.productionContext=o,d=c(),e=0,i=s.length;e<i;e++)s[e].updateRawModel(t,d);for(r=l.observable(d),o.model=r,n=0,a=s.length;n<a;n++)s[n].init(o);return l.bind($("#reportingProductionRoot"),r),null}}})}.call(this),define("core/api/ReportingRecordType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReportingRecordType=void 0;var r,o;(r=e.ReportingRecordType||(e.ReportingRecordType={}))[r.RECORD=1]="RECORD",r[r.CANCELLATION=2]="CANCELLATION",(o=e.ReportingRecordType||(e.ReportingRecordType={})).getName=a.EnumUtils.createNameFn("reporting:ReportingRecordType",o),o.widget=i.EnumWidgetUtils.createDropList("DomosReportingRecordType",o,!0),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),function(){var j,G;j="#aifmAssumptionGrid",G="#aifAssumptionGrid",define("views/reporting/reporting.preview",["jquery","lodash","i18n","kendo","site","ui","core/event/SiteEvents","core/api/ReportingSource","core/api/U11CssfReportingStatus","core/api/ReportingFilingType","core/api/ReportingPeriodType","core/api/ReportingRecordType","dashboard/data/DashboardType","object/web/ObjectMap","dashboard/web/DashboardMap","portfolio/data/PortfolioTransparency","views/reporting/report/report.viewer","core/ui/IntegerUI","core/ui/YearUI"],function(a,t,i,r,e,n,o,d,l,s,u,c,p,m,f,b,v,y){var h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M;return T=y.IntegerUI,N=d.ReportingSource,E=s.ReportingFilingType,D=u.ReportingPeriodType,R=l.U11CssfReportingStatus,S=c.ReportingRecordType,k=b.PortfolioTransparency,I=n.grid,C=I.transports,x=o.SiteEvents,g=p.DashboardType,w=m.ObjectMap,h=f.DashboardMap,function(){return{}},M=function(t){return"source"===t.field&&(t.sender.isAIFM()&&a(j).data("kendoGrid").refresh(),t.sender.isAIF()&&a(G).data("kendoGrid").refresh()),null},_=function(t){return{source:N.AIFM_1_2,transparency:k.NO_TRANSPARENCY,aifm:{country:826,aifm:0,filing:E.INITIAL,period:D.FIRST_QUARTER,year:(new Date).getFullYear(),assumptions:[],record:S.RECORD},aif:{country:826,aif:0,filing:E.INITIAL,period:D.FIRST_QUARTER,year:(new Date).getFullYear(),assumptions:[],record:S.RECORD},u11:{uci:0,status:R.FINAL_REPORT,yearMonth:new Date},crs:{vehicle:0,type:"",subType:"",year:(new Date).getFullYear(),declarer:null},tpt:{vehicle:0,yearMonth:new Date},s213:{vehicle:0,period:D.FIRST_QUARTER,year:(new Date).getFullYear()},dashboardModel:{dashboard:null,date:new Date,fund:null,investor:null},isAIFM:function(){return this.get("source")===N.AIFM_1_2},isAIF:function(){return this.get("source")===N.AIF_1_2},isU11:function(){return this.get("source")===N.U_1_1},isCRS:function(){return this.get("source")===N.CRS},isTPT:function(){return this.get("source")===N.TPT_OBS},isSGOREP:function(){return this.get("source")===N.SGOREP},isDashboard:function(){return this.get("source")===N.DASHBOARD},isS213_L1:function(){return this.get("source")===N.S213_L1},isAIFMRecord:function(){return this.get("aifm.record")===S.RECORD},isAIFRecord:function(){return this.get("aif.record")===S.RECORD},isDashboardFund:function(){return this.get("dashboardModel.dashboard.type")===g.FUND},isDashboardEntities:function(){return this.get("dashboardModel.dashboard.type")===g.ENTITIES},isDashboardFundOrEntities:function(){var t;return(t=this.get("dashboardModel.dashboard.type"))===g.ENTITIES||t===g.FUND},fundUrl:function(){return w.objectEdit(this.get("dashboardModel.fund"))},investorUrl:function(){return w.objectEdit(this.get("dashboardModel.investor"))},dashboardUrl:function(){return h.dashboardEdit(this.get("dashboardModel.dashboard.id"))},aifmUrl:function(){return w.objectEdit(this.get("aifm.aifm"))},aifUrl:function(){return w.objectEdit(this.get("aif.aif"))},u11Url:function(){return w.objectEdit(this.get("u11.uci"))},crsUrl:function(){return w.objectEdit(this.get("crs.vehicle"))},tptUrl:function(){return w.objectEdit(this.get("tpt.vehicle"))},generateClick:U.bind(null,t)}},O=function(t){var e,n,i;for(e=0,n=t.length;e<n;e++)i=t[e],x.warning({message:i.warning,information:i.info});return null},L=function(t,e){return e.warnings&&O(e.warnings),t.viewer.display(e)},P=function(t,e){return t.viewer.display(null),null},F=function(t){},U=function(t){var e,n;return e=t.model.toJSON(),n={type:"POST",url:"reporting/generate.preview.json",dataType:"json",data:{data:JSON.stringify(e)}},a.ajax(n).done(L.bind(null,t)).fail(P.bind(null,t)).always(F.bind(null,t)),null},A=function(t,e){var n;return n={dataSource:{transport:C.createLocal({data:e}),schema:{model:{id:"id",fields:{questionNumber:{type:"number"},description:{type:"string"}}}}},columns:[{command:["edit","destroy"],title:" ",width:"230px"},T.column({field:"questionNumber",title:i.t("reporting:assumptions.questionNumber"),width:"230px"}),{field:"description",title:i.t("reporting:assumptions.description"),width:"230px"}],toolbar:["create"],pageable:I.defaultPageable(),scrollable:!1},I.withDefaults(n),t.kendoGrid(n)},{updateRawModel:function(t,e){return null},init:function(t){var e,n,i;return n={},(t.previewContext=n).viewer=v.create("#previewViewer",!0),n.viewer.display(null),i=_(n),e=r.observable(i),n.model=e,A(a(j),e.get("aifm.assumptions")),A(a(G),e.get("aif.assumptions")),e.bind("change",M),r.bind(a("#previewRoot"),e),null}}})}.call(this),function(){var E;E="#reportingRepositoryGrid",define("views/reporting/reporting.repository",["jquery","lodash","i18n","kendo","site","ui","core/api/ReportingSource","views/reporting/report/report.viewer","core/ui/DateUI","core/ui/DateTimeUI","reporting/web/ReportingMap"],function(u,t,a,e,n,i,r,o,d,l,s){var c,p,m,f,b,v,y,h,g,T,I,C,w,k;return f=d.DateUI,m=l.DateTimeUI,h=r.ReportingSource,p=e.data.DataSource,b=i.data.dataSourceHelpers,v=i.grid,y=s.ReportingMap,function(){return{grid:null,menu:null}},c=null,T=function(){return new p({transport:{read:{url:"reporting/report/list.json",dataType:"json"}},schema:{model:{id:"id",fields:{name:{type:"string"},description:{type:"string"},source:{type:"number"},instance:{type:"number"},activity:{type:"number"},activityName:{type:"string"},date:{type:"date"},creationDate:{type:"date"},creationDay:{type:"date"},modificationDate:{type:"date"}}}},group:[{field:"activityName"},{field:"creationDay"}],sort:{field:"name",dir:"asc"}})},I=function(){return null==c&&(c=T()),c},g=function(t){var e;return null!=(e=t.grid)&&e.destroy(),t.grid=null,u(E).empty(),null},k=function(t,e){var n,i,a,r,o,d,l,s;for(n=e.sender.dataSource,a=0,o=(i=b.flatView(n)).length;a<o;a++)s=i[a],l=null,(d=parseInt(s.source))===h.AIF_1_2?l="reportingRowAIF":d===h.AIFM_1_2&&(l="reportingRowAIFM"),l&&(r=n.get(s.id))&&u(E).find("tr[data-uid="+r.uid+"]").addClass(l);return!0},C=function(t,e){var n;return e?(n={id:e.instance,reportName:e.name},t.viewer.display(n)):t.viewer.display(e),null},w=function(t){var e,n,i;return g(t),i={dataSource:I(),editable:!1,columns:[{command:[v.customCommand(a.t("reporting:repository.view"),C.bind(null,t))],title:" ",width:"80px"},h.column({field:"source",title:a.t("reporting:repository.source")}),{field:"activityName",title:a.t("reporting:repository.activity"),template:function(t){var e,n;return e=t.activity,n=t.activityName,"<a href='"+kendo.htmlEncode(y.activityEdit(e))+"'>"+kendo.htmlEncode(n)+"</a>"}},{field:"name",title:a.t("reporting:repository.report")},m.column({field:"creationDate",title:a.t("reporting:repository.created")}),f.column({field:"creationDay",title:a.t("reporting:repository.creationDay")})],pageable:v.defaultPageable(),height:800,scrollable:!0,dataBound:k.bind(null,t)},v.withDefaults(i),(e=u(E)).kendoGrid(i),n=e.data("kendoGrid"),t.grid=n,null},{updateRawModel:function(t,e){return null},init:function(t){var e;return e={grid:null,menu:null},(t.repositoryContext=e).viewer=o.create("#reportingRepositoryViewer"),e.viewer.display(null),w(e),null}}})}.call(this),function(){var U,A;U="#reportingWorkflowGrid",A="#reportingWorkflowUpload",define("views/reporting/reporting.workflows",["jquery","lodash","i18n","kendo","ui","views/workflow/diagram","core/api/WorkflowCategory","core/ui/IntegerUI","core/ui/UploadUtils","workflow/utils/WorkflowUtils","text!templates/workflow/workflow.grid.toolbar.html"],function(l,s,u,e,t,n,i,a,r,o,c){var d,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O;return b=r.UploadUtils,m=a.IntegerUI,f=t.grid,v=i.WorkflowCategory,d=v.REPORTING,y=o.WorkflowUtils,T=function(){return{diagram:n.create("#reportingWorkflowDiagram"),grid:null,upload:null}},h=function(t){var e,n;return null!=(e=(n=t.workflowContext).upload)&&e.destroy(),n.upload=null,l(A).empty(),null},N=function(t){return l(A).parents(".k-upload").find("ul.k-upload-files").remove(),!0},_=function(t){var e,n,i;return i=t.workflowContext,h(t),n={async:{saveUrl:"workflow/upload.json",saveField:"file"},complete:N.bind(null,t)},b.withDefaults(n),(e=l(A)).kendoUpload(n),i.upload=e.data("kendoUpload"),null},function(t){var e,n,i;return 0<(n=t.select()).length&&(i=t.dataItem(n[0]))&&(e=i.toJSON()),e},R=function(t,e){return e&&e.active?t.workflowContext.diagram.displayDefinition(e):t.workflowContext.diagram.clean()},x=function(t){var e;return e={category:d},l.getJSON("workflow/list.json",e).done(t.success).fail(t.error),null},E=function(t,e){var n;if(e&&e.data)return n=e.data,"create"===e.type?t.pushCreate(n):"destroy"===e.type&&t.pushDestroy(n),null},D=function(t,e,n){if(n)return s.isArray(n)?s.each(n,E.bind(null,t)):E(t,n),null},w=function(t){return l("body").on("domosws:workflow:definitions",D.bind(null,t)),!0},p=null,I=function(){var t;return t={transport:{read:x,push:w},schema:{model:{id:"id",fields:{key:{type:"string"},name:{type:"string"},category:{type:"number"},version:{type:"number"}}}},sort:[{field:"name",dir:"asc"},{field:"version",dir:"desc"}]},new e.data.DataSource(t)},C=function(){return null==p&&(p=I()),p},g=function(t){var e,n;return null!=(e=(n=t.workflowContext).grid)&&e.destroy(),n.grid=null,l(U).empty(),null},k=function(t,e){return R(t,e)},S=function(t,e,n,i){var a;return a=f.getSelectedRows(i.sender),y.setupToolbarActions(a,e,i.sender).bind(n),k(t,a),null},O=function(n){var i,t,a,e,r,o,d;return i=l(U),d=n.workflowContext,g(n),a=new kendo.data.ObservableObject,r=kendo.template(c),o={param:{fileType:"bpmn"}},e={dataSource:C(),columns:[{field:"name",title:u.t("workflow:definitions.name"),width:"200px"},{field:"key",title:u.t("workflow:definitions.key"),width:"200px"},m.column({field:"version",title:u.t("workflow:definitions.version"),width:"200px"}),y.createActiveColumn()],pageable:f.defaultPageable(),scrollable:!0,editable:!1,height:500,change:S.bind(null,n,a,i),dataBound:function(t){var e;return e=f.getSelectedRows(t.sender),y.setupToolbarActions(e,a,t.sender).bind(i),k(n,e)}},f.withDefaults(e),e.toolbar=function(){return r(o)},i.kendoGrid(e),t=i.data("kendoGrid"),d.grid=t,a.hasData=function(){return!s.isEmpty(t.dataSource.data())},a.exportAsExcel=function(){return t.saveAsExcel()},null},{updateRawModel:function(t,e){},init:function(t){var e;return e=T(),t.workflowContext=e,O(t),_(t)}}})}.call(this),define("text!templates/reporting/reporting.html",[],function(){return'<div id="reportingRoot">\n    <ul data-role="menu" class="idxNavigableMenu" data-bind="visible: isMenuVisible">\n        <li id="reportingOverviewLi" class="k-state-active">\n            <a href=\'javascript:void(0)\' data-bind="click: overviewMenuClick" data-i18n="reporting:menu.overview"></a>\n        </li>\n        <li id="reportingProductionLi">\n            <a href=\'javascript:void(0)\' data-bind="click: productionMenuClick" data-i18n="reporting:menu.production"></a>\n        </li>\n        <li id="reportingActivityLi">\n            <a href=\'javascript:void(0)\' data-bind="click: activityMenuClick" data-i18n="reporting:menu.activities"></a>\n        </li>\n        <li id="reportingPreviewLi">\n            <a href=\'javascript:void(0)\' data-bind="click: previewMenuClick" data-i18n="reporting:menu.preview"></a>\n        </li>\n        <li id="reportingRepositoryLi">\n            <a href=\'javascript:void(0)\' data-bind="click: repositoryMenuClick" data-i18n="reporting:menu.repository"></a>\n        </li>\n        <li id="reportingWorkflowLi">\n            <a href=\'javascript:void(0)\' data-bind="click: workflowMenuClick" data-i18n="reporting:menu.workflows"></a>\n        </li>\n        <li id="reportingDocumentListsLi">\n            <a href="javascript:void(0)" data-bind="click: documentListsMenuClick" data-i18n="reporting:menu.documentLists"></a>\n        </li>\n    </ul>\n\n\n    <div class="idxNavigableContent">\n        \x3c!-- Overview --\x3e\n        <div data-bind="visible: isOverviewActive">\n            <div id="reportingOverviewToolbar"></div>\n\n            <div>\n                <div class="boardTile">\n                    <div id="reportingOverviewCalendar" class="reportingCalendar"></div>\n                </div>\n                <div class="floatTwoThird">\n                    <div id="reportingOverviewValidationChart"></div>\n                </div>\n                <div class="clearer"></div>\n            </div>\n            <div id="reportingOverviewLateChart"></div>\n        </div>\n\n\n        \x3c!-- Production --\x3e\n        <div data-bind="visible: isProductionActive">\n            <div id="reportingProductionRoot">\n                <div class="reportingTopPane">\n                    <div class="zoom0_8p">\n                        <h2 class="reportingTitle" data-i18n="reporting:production.instances"></h2>\n                        <div id="reportingInstanceGrid"></div>\n                    </div>\n                </div>\n                <div class="reportingTopPane">\n                    <div class="zoom0_8p">\n                        <h2 class="reportingTitle" data-i18n="reporting:production.tasks"></h2>\n                        <div id="reportingProductionTaskGrid"></div>\n                    </div>\n                </div>\n                <div class="clearer"></div>\n                <div class="reportingBottomPane">\n                    <div id="productionTab" data-role="tabstrip" data-animation="{open:{effects:\'fadeIn\'}}"\n                        data-bind="visible: hasTab">\n                        <ul>\n                            <li id="productionWorkflowLi" class="k-state-active" data-bind="visible: hasInstance">\n                                <span data-i18n="reporting:production.workflow"></span>\n                            </li>\n                            <li id="productionPreviewLi" data-bind="visible: hasInstance">\n                                <span data-i18n="reporting:production.reportPreview"></span>\n                            </li>\n                            <li id="productionTaskLi" data-bind="visible: hasTask">\n                                <span data-i18n="reporting:production.task"></span>\n                            </li>\n                            <li id="productionEmailLi" data-bind="visible: hasInstance">\n                                <span data-i18n="reporting:production.email"></span>\n                            </li>\n                        </ul>\n                        \x3c!-- Workflow --\x3e\n                        <div>\n                            <h2 data-bind="text: currentActivityName"></h2>\n                            <h3 data-bind="text: currentInstance.date" data-format="d"></h3>\n                            <div id="productionWorkflowToolbar"></div>\n                            <p></p>\n                            <div id="productionWorkflowDiagram"></div>\n                        </div>\n                        \x3c!-- Report preview --\x3e\n                        <div>\n                            <h2 data-bind="text: currentActivityName"></h2>\n                            <h3 data-bind="text: currentInstance.date" data-format="d"></h3>\n\n                            <div id="productionPreviewToolbar"></div>\n                            <p></p>\n                            <div id="productionPreviewViewer"></div>\n                        </div>\n                        \x3c!-- Task --\x3e\n                        <div>\n                            <h2 data-bind="text: currentTaskActivityName"></h2>\n                            <h3 data-bind="text: currentTask.name"></h3>\n                            <h3 data-bind="text: currentTask.date" data-format="d"></h3>\n                            <div id="productionTaskForm"></div>\n                        </div>\n                        \x3c!-- Email --\x3e\n                        <div>\n                            <h2 data-bind="text: currentTaskActivityName"></h2>\n                            <div id="productionEmailView"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        \x3c!-- Activities --\x3e\n        <div data-bind="visible: isActivityActive">\n            <h2 data-i18n="reporting:menu.reports"></h2>\n\n            <div id="activityActivityGrid" class="floatingGrid_75"></div>\n            <div class="clearer"></div>\n\n            <p></p>\n\n            <div id="activityInstanceGrid" class="floatingGrid_75"></div>\n            <div class="clearer"></div>\n            <p></p>\n\n            <div>\n                <button data-role="button" data-bind="click: generateClick">#=\n                    $.t("reporting:actions.generate")#</button>\n                <button data-role="button" data-bind="click: startAllClick">#=\n                    $.t("reporting:actions.startAll")#</button>\n            </div>\n        </div>\n\n        \x3c!-- Preview --\x3e\n        <div data-bind="visible: isPreviewActive">\n            <h2 data-i18n="reporting:menu.preview"></h2>\n\n            <div id="previewRoot">\n                <table class="formTable">\n                    <tr>\n                        <td>\n                            <label for="previewSource" data-i18n="reporting:preview.source"></label>\n                        </td>\n                        <td>\n                            <input id="previewSource" data-role="domosreportingsource" data-bind="value: source" />\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <label for="previewTransparency" data-i18n="reporting:preview.transparency"></label>\n                        </td>\n                        <td>\n                            <input id="previewTransparency" data-role="domosportfoliotransparency" data-bind="value: transparency" />\n                        </td>\n                    </tr>\n                </table>\n                <div data-bind="visible: isAIFM">\n                    <table class="formTable">\n                        <tr>\n                            <td>\n                                <label for="aifmCountry" data-i18n="reporting:reports.aifm.country"></label>\n                            </td>\n                            <td>\n                                <input id="aifmCountry" data-role="domoscountry" data-bind="value: aifm.country" />\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                <label for="aifmAIFM">\n                                    <a data-i18n="reporting:reports.aifm.aifm" data-bind="attr: {href: aifmUrl}"></a>\n                                </label>\n                            </td>\n                            <td>\n                                <input id="aifmAIFM" data-role="domoslegalperson" data-value-primitive="true"\n                                    data-bind="value: aifm.aifm" />\n                            </td>\n                            <td>\n                                <label for="aifmRecord" data-i18n="reporting:reports.aifm.record"></label>\n                            </td>\n                            <td>\n                                <input id="aifmRecord" data-role="domosreportingrecordtype"\n                                    data-bind="value: aifm.record" />\n                            </td>\n                        </tr>\n                        <tr data-bind="visible: isAIFMRecord">\n                            <td>\n                                <label for="aifmFiling" data-i18n="reporting:reports.aifm.filing"></label>\n                            </td>\n                            <td>\n                                <input id="aifmFiling" data-role="domosreportingfilingtype"\n                                    data-bind="value: aifm.filing" />\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                <label for="aifmPeriod" data-i18n="reporting:reports.aifm.period"></label>\n                            </td>\n                            <td>\n                                <input id="aifmPeriod" data-role="domosreportingperiodtype"\n                                    data-bind="value: aifm.period" />\n                            </td>\n                            <td>\n                                <label for="aifmYear" data-i18n="reporting:reports.aifm.year"></label>\n                            </td>\n                            <td>\n                                <input id="aifmYear" data-role="domosyear" data-bind="value: aifm.year" />\n                            </td>\n                        </tr>\n                    </table>\n\n                    <h3 data-i18n="reporting:assumptions.title"></h3>\n\n                    <div id="aifmAssumptionGrid" class="floatingGrid_50"></div>\n                    <div class="clearer"></div>\n                </div>\n                <div data-bind="visible: isAIF">\n                    <table class="formTable">\n                        <tr>\n                            <td>\n                                <label for="aifCountry" data-i18n="reporting:reports.aif.country"></label>\n                            </td>\n                            <td>\n                                <input id="aifCountry" data-role="domoscountry" data-bind="value: aif.country" />\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                <label for="aifAIF">\n                                    <a data-i18n="reporting:reports.aif.aif" data-bind="attr: {href: aifUrl}"></a>\n                                </label>\n                            </td>\n                            <td>\n                                <input id="aifAIF" data-role="domosvehicle" data-value-primitive="true"\n                                    data-bind="value: aif.aif" />\n                            </td>\n                            <td>\n                                <label for="aifRecord" data-i18n="reporting:reports.aif.record"></label>\n                            </td>\n                            <td>\n                                <input id="aifRecord" data-role="domosreportingrecordtype"\n                                    data-bind="value: aif.record" />\n                            </td>\n                        </tr>\n                        <tr data-bind="visible: isAIFRecord">\n                            <td>\n                                <label for="aifFiling" data-i18n="reporting:reports.aif.filing"></label>\n                            </td>\n                            <td>\n                                <input id="aifFiling" data-role="domosreportingfilingtype"\n                                    data-bind="value: aif.filing" />\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                <label for="aifPeriod" data-i18n="reporting:reports.aif.period"></label>\n                            </td>\n                            <td>\n                                <input id="aifPeriod" data-role="domosreportingperiodtype"\n                                    data-bind="value: aif.period" />\n                            </td>\n                            <td>\n                                <label for="aifYear" data-i18n="reporting:reports.aif.year"></label>\n                            </td>\n                            <td>\n                                <input id="aifYear" data-role="domosyear" data-bind="value: aif.year" />\n                            </td>\n                        </tr>\n                    </table>\n\n                    <h3 data-i18n="reporting:assumptions.title"></h3>\n\n                    <div id="aifAssumptionGrid" class="floatingGrid_50"></div>\n                    <div class="clearer"></div>\n                </div>\n                <div data-bind="visible: isU11">\n                    <table class="formTable">\n                        <tr>\n                            <td>\n                                <label for="u11Uci">\n                                    <a data-i18n="reporting:reports.u11.uci" data-bind="attr: {href: u11Url}"></a>\n                                </label>\n                            </td>\n                            <td>\n                                <input id="u11Uci" data-role="domosvehicle" data-value-primitive="true"\n                                    data-bind="value: u11.uci" />\n                            </td>\n                            <td>\n                                <label for="u11Status" data-i18n="reporting:reports.u11.status"></label>\n                            </td>\n                            <td>\n                                <input id="u11Status" data-role="domosu11cssfreportingstatus"\n                                    data-bind="value: u11.status" />\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                <label for="u11YearMonth" data-i18n="reporting:reports.u11.yearMonth"></label>\n                            </td>\n                            <td>\n                                <input id="u11YearMonth" data-bind="value: u11.yearMonth" data-role="datepicker"\n                                    data-start="year" data-depth="year" data-format="MMMM yyyy" />\n                            </td>\n                        </tr>\n                    </table>\n                </div>\n                <div data-bind="visible: isCRS">\n                    <table class="formTable">\n                        <tr>\n                            <td>\n                                <label for="crsVehicle">\n                                    <a data-i18n="reporting:reports.crs.vehicle" data-bind="attr: {href: crsUrl}"></a>\n                                </label>\n                            </td>\n                            <td>\n                                <input id="crsVehicle" data-role="domosvehicle" data-value-primitive="true"\n                                    data-bind="value: crs.vehicle" />\n                            </td>\n                            <td>\n                                <label for="crsYear" data-i18n="reporting:reports.crs.year"></label>\n                            </td>\n                            <td>\n                                <input id="crsYear" data-role="domosyear" data-bind="value: crs.year" />\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                <label for="crsType" data-i18n="reporting:reports.crs.type"></label>\n                            </td>\n                            <td>\n                                <input id="crsType" class="k-textbox" data-bind="value: crs.type" />\n                            </td>\n\n                            <td>\n                                <label for="crsSubType" data-i18n="reporting:reports.crs.subType"></label>\n                            </td>\n                            <td>\n                                <input id="crsSubType" class="k-textbox" data-bind="value: crs.subType" />\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                <label for="crsDeclarer" data-i18n="reporting:reports.crs.declarer"></label>\n                            </td>\n                            <td>\n                                <input id="crsDeclarer" data-role="domoslegalperson" data-value-primitive="true"\n                                    data-bind="value: crs.declarer" />\n                            </td>\n                        </tr>\n                    </table>\n                </div>\n                <div data-bind="visible: isTPT">\n                    <table class="formTable">\n                        <tr>\n                            <td>\n                                <label for="tptVehicle">\n                                    <a data-i18n="reporting:reports.tpt.vehicle" data-bind="attr: {href: tptUrl}"></a>\n                                </label>\n                            </td>\n                            <td>\n                                <input id="tptVehicle" data-role="domosvehicle" data-value-primitive="true"\n                                    data-bind="value: tpt.vehicle" />\n                            </td>\n                            <td>\n                                <label for="tptYearMonth" data-i18n="reporting:reports.tpt.yearMonth"></label>\n                            </td>\n                            <td>\n                                <input id="tptYearMonth" data-bind="value: tpt.yearMonth" data-role="datepicker"\n                                    data-start="year" data-depth="year" data-format="MMMM yyyy" />\n                            </td>\n                        </tr>\n                    </table>\n\t\t\t\t</div>\n\t\t\t\t<div data-bind="visible: isS213_L1">\n                    <table class="formTable">\n                        <tr>\n                            <td>\n                                <label for="s213Vehicle" data-i18n="reporting:reports.s213.vehicle"></label>\n                            </td>\n                            <td>\n                                <input id="s213Vehicle" data-role="domosvehicle" data-value-primitive="true"\n                                    data-bind="value: s213.vehicle" />\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n                            <td>\n                                <label for="s213Period" data-i18n="reporting:reports.s213.period"></label>\n                            </td>\n                            <td>\n                                <input id="s213Period" data-role="domosreportingperiodtype"\n                                    data-bind="value: s213.period" />\n                            </td>\n                            <td>\n                                <label for="s213Year" data-i18n="reporting:reports.s213.year"></label>\n                            </td>\n                            <td>\n                                <input id="s213Year" data-role="domosyear" data-bind="value: s213.year" />\n                            </td>\n                        </tr>\n                    </table>\n                </div>\n                <div data-bind="visible: isDashboard">\n                    <table class="formTable">\n                        <tr>\n                            <td>\n                                <label for="dashboard">\n                                        <a data-i18n="reporting:reports.dashboardModel.dashboard" data-bind="attr: {href: dashboardUrl}"></a>\n                                </label>\n                            </td>\n                            <td>\n                                <input id="dashboard" data-role="domosdashboard"\n                                    data-bind="value: dashboardModel.dashboard"/>\n                            </td>\n                            <td>\n                                <label for="dashboardDate" data-i18n="reporting:reports.dashboardModel.date"></label>\n                            </td>\n                            <td>\n                                <input id="dashboardDate" data-bind="value: dashboardModel.date" data-role="datepicker" />\n                            </td>\n\n                        </tr>\n                        <tr data-bind="visible: isDashboardFundOrEntities">\n                            <td>\n                                <label for="fund">\n                                        <a data-i18n="reporting:reports.dashboardModel.fund" data-bind="attr: {href: fundUrl}"></a>\n                                </label>\n                            </td>\n                            <td>\n                                <input id="fund" data-role="domosvehicle" data-value-primitive="true"\n                                        data-bind="value: dashboardModel.fund"/>\n                            </td>\n                            <td data-bind="visible: isDashboardEntities">\n                                    <label for="dashboardInvestor">\n                                            <a data-i18n="reporting:reports.dashboardModel.investor" data-bind="attr: {href: investorUrl}"></a>\n                                    </label>\n                            </td>\n                            <td data-bind="visible: isDashboardEntities">\n                                <input id="dashboardInvestor" data-role="domosentityinvestorid" data-value-primitive="true"\n                                    data-bind="value: dashboardModel.investor"/>\n                            </td>\n                        </tr>\n                    </table>\n                </div>\n                <p></p>\n\n                <button class="k-button" data-i18n="reporting:actions.generate"\n                    data-bind="click: generateClick"></button>\n\n                <p></p>\n\n                <div class="floatTwoThird">\n                    <div id="previewViewer"></div>\n                </div>\n                <div class="clearer"></div>\n            </div>\n\n        </div>\n\n\n        \x3c!-- Repository --\x3e\n        <div data-bind="visible: isRepositoryActive">\n            <h2 data-i18n="reporting:menu.repository"></h2>\n\n            <div id="reportingRepositoryGrid" class="floatingGrid_50"></div>\n            <div class="clearer"></div>\n            <p></p>\n            <div id="reportingRepositoryViewer"></div>\n        </div>\n\n        \x3c!-- Workflows --\x3e\n        <div data-bind="visible: isWorkflowActive">\n            <h2 data-i18n="reporting:menu.workflows"></h2>\n\n            <input id="reportingWorkflowUpload" type="file" />\n            <p></p>\n            <div id="reportingWorkflowGrid" class="floatingGrid_50"></div>\n            <div class="clearer"></div>\n            <p></p>\n            <div id="reportingWorkflowDiagram"></div>\n        </div>\n\n        \x3c!-- Document lists --\x3e\n        <div data-bind="visible: isDocumentListsActive">\n            <h2 data-i18n="reporting:menu.documentLists"></h2>\n\n            <div id="documentListGrid" class="floatingGrid_50"></div>\n            <div class="clearer"></div>\n            <p></p>\n            <div id="documentEntryGrid" class="floatingGrid_50"></div>\n            <div class="clearer"></div>\n        </div>\n    </div>\n</div>'}),function(){define("views/reporting/reporting",["jquery","i18n","kendo","site","core/web/WebLocation","views/layout","views/reporting/reporting.menu","views/reporting/reporting.overview","views/reporting/reporting.production","views/reporting/reporting.activities","views/reporting/reporting.preview","views/reporting/reporting.repository","views/reporting/reporting.workflows","views/common/document.lists","core/data/SiteCategories","text!templates/reporting/reporting.html","core/api/ReportingSource","core/api/ReportingFilingType","core/api/ReportingPeriodType","basic/ui/CountryUI","object/ui/LegalUI"],function(i,t,a,r,e,o,n,d,l,s,u,c,p,m,f,b){var v,y,h,g,T,I,C,w;return v=[n,d,l,s,u,c,p,m],h=e.WebLocation,y=f.SiteCategories,C=function(){return h.setPageTitle(t.t("reporting:menu.title")),null},function(){return{}},g=function(t){var e,n,i;for(i={},e=0,n=v.length;e<n;e++)v[e].updateRawModel(t,i);return i},w=function(t){return C(),null},I=function(t){var e,n;for(h.setPageTitle("Reporting"),i("#reportingRoot").localize(),e=0,n=v.length;e<n;e++)v[e].init(t);return null},T=function(t,e){var n,i;return i=a.template(b)({}),n={model:e,show:w.bind(null,t),init:I.bind(null,t)},new a.View(i,n)},{init:function(){var t,e,n,i;return n=g(t={}),e=a.observable(n),t.model=e,i=T(t,e),o.register("reporting",r.map.reporting,i,null,y.reporting),null}}})}.call(this),define("text!templates/reporting/edit/activity.html",[],function(){return'<div id="reportingActivityRoot">\n\t<h1 data-i18n="reporting:activities.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="reporting:activities.edit" data-bind="invisible: isNew"></h1>\n\n\t<div id="reportingActivityActions"></div>\n\n\t<h2 data-i18n="reporting:sections.mainInformation"></h2>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="name" data-i18n="reporting:activities.name"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="name" name="name" class="k-textbox" type="text" data-bind="value: name" required="required"\n\t\t\t\t\tdata-i18n="[validationMessage]reporting:validation.nameRequired" />\n\t\t\t</td>\n\t\t\t<td></td>\n\t\t\t<td></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="source" data-i18n="reporting:activities.source"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="source" name="source" data-role="domosreportingsource" data-bind="value: source" />\n\t\t\t</td>\n\t\t\t<td></td>\n\t\t\t<td></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="active" data-i18n="reporting:activities.active"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="active" name="active" type="checkbox" data-bind="checked: active" />\n\t\t\t</td>\n\t\t\t<td></td>\n\t\t\t<td></td>\n\t\t</tr>\n\t</table>\n\t<h2 data-i18n="reporting:sections.additionalData"></h2>\n\t<table class="formTable">\n\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="workflow" data-i18n="reporting:activities.workflow"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="workflow" data-role="domosworkflowreporting" data-bind="value: workflow" />\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="documentList" data-i18n="reporting:activities.documentList"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="documentList" data-role="domosdocumentlist" data-bind="value: documentList" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr data-bind="visible: isDashboardTypeFundOrEntities">\n\t\t\t<td></td>\n\t\t\t<td></td>\n\t\t\t<td>\n\t\t\t\t<label for="fund">\n\t\t\t\t\t<a data-i18n="reporting:activities.fund" data-bind="attr: {href: legalPersonUrl}"></a>\n\t\t\t\t</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="fund" data-bind="value: legalPerson"/>\n\t\t\t</td>\n\t\t\t</tr>\n\t\t<tr data-bind="visible: isDashboardTypeEntities">\n\t\t\t<td></td>\n\t\t\t<td></td>\n\t\t\t<td>\n\t\t\t\t<label for="investor">\n\t\t\t\t\t<a data-i18n="reporting:activities.investor" data-bind="attr: {href: entityInvestorUrl}"></a>\n\t\t\t\t</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="investor" data-role="domosentityinvestorid" data-bind="value: entityInvestor" />\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n\n\t<h2 data-i18n="reporting:sections.assignment"></h2>\n\n\t<table class="formTable">\n\t\t<tr data-bind="visible: isAIFOrAIFM">\n\t\t\t<td>\n\t\t\t\t<label for="reportingCountry" data-i18n="reporting:activities.reportingCountry"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="reportingCountry" name="reportingCountry" data-role="domoscountry"\n\t\t\t\t\tdata-bind="value: country" />\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="aifm"  data-bind="visible: isAIFM">\n\t\t\t\t\t<a data-i18n="reporting:activities.aifm" data-bind="attr: {href: legalPersonUrl}"></a>\n\t\t\t\t</label>\n\t\t\t\t<label for="aif" data-bind="visible: isAIF">\n\t\t\t\t\t<a data-i18n="reporting:activities.aif" data-bind="attr: {href: legalPersonUrl}"></a>\n\t\t\t\t</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="aifm" name="AIFM" data-role="domoslegalperson"\n\t\t\t\t\tdata-bind="value: legalPerson, visible: isAIFM" />\n\t\t\t\t<input id="aif" name="AIF" data-role="domosvehicle" data-bind="value: legalPerson, visible: isAIF" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr data-bind="visible: isU11">\n\t\t\t<td>\n\t\t\t\t<label for="uci">\n\t\t\t\t\t<a data-i18n="reporting:activities.uci" data-bind="attr: {href: legalPersonUrl}"></a>\n\t\t\t\t</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="uci" name="UCI" data-role="domosvehicle" data-bind="value: legalPerson" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr data-bind="visible: isCRSOrFATCA">\n\t\t\t<td>\n\t\t\t\t<label for="crsVehicle">\n\t\t\t\t\t<a data-i18n="reporting:activities.vehicle" data-bind="attr: {href: legalPersonUrl}"></a>\n\t\t\t\t</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="crsVehicle" data-role="domosvehicle" data-bind="value: legalPerson" />\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="declarer">\n\t\t\t\t\t<a data-i18n="reporting:activities.declarer" data-bind="attr: {href: declarerLegalUrl}"></a>\n\t\t\t\t</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="declarer" data-role="domoslegalperson" data-bind="value: declarerLegal" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr data-bind="visible: isU11">\n\t\t\t<td>\n\t\t\t\t<label for="transparency" data-i18n="reporting:activities.transparency"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="transparency" data-role="domosportfoliotransparency" data-bind="value: transparency" />\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr data-bind="visible: isTPT">\n\t\t\t<td>\n\t\t\t\t<label for="tptVehicle">\n\t\t\t\t\t<a data-i18n="reporting:activities.vehicle" data-bind="attr: {href: legalPersonUrl}"></a>\n\t\t\t\t</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="tptVehicle" data-role="domosvehicle" data-bind="value: legalPerson" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr data-bind="visible: isTPT">\n\t\t\t<td>\n\t\t\t\t<label for="tptTransparency" data-i18n="reporting:activities.transparency"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="tptTransparency" data-role="domosportfoliotransparency" data-bind="value: transparency" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr data-bind="visible: isSGOREP">\n\t\t\t<td>\n\t\t\t\t<label for="SGOREP">\n\t\t\t\t\t<a  data-i18n="reporting:activities.vehicle" data-bind="attr: {href: legalPersonUrl}"></a>\n\t\t\t\t</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="SGOREP" name="SGOREP" data-role="domoslegalperson" data-bind="value: legalPerson" />\n\t\t\t</td>\n\t\t\t<td></td>\n\t\t\t<td></td>\n\t\t</tr>\n\n\t\t<tr data-bind="visible: isDashboard">\n\t\t\t<td>\n\t\t\t\t<label for="frequency" data-i18n="reporting:activities.frequency"></label>\n\t\t\t</td>\n\n\t\t\t<td>\n\t\t\t\t<input id="frequency" data-role="domosreportingfrequency" data-bind="value: frequency" />\n\t\t\t</td>\n\t\t\t<td></td>\n\t\t\t<td></td>\n\t\t</tr>\n\t\t<tr data-bind="visible: isDashboard">\n\t\t\t<td>\n\t\t\t\t<label for="role" data-i18n="reporting:activities.role"></label>\n\t\t\t</td>\n\n\t\t\t<td>\n\t\t\t\t<input id="role" data-role="domosentityrole" data-bind="value: role" />\n\t\t\t</td>\n\t\t\t<td></td>\n\t\t\t<td></td>\n\t\t</tr>\n\n\t\t<tr data-bind="visible: isDashboard">\n\t\t\t<td>\n\t\t\t\t<label for="dashboard">\n\t\t\t\t\t<a  data-i18n="reporting:activities.dashboard" data-bind="attr: {href: dashboardUrl}"></a>\n\t\t\t\t</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="dashboard" data-role="domosdashboard" data-bind="value: dashboard" data-value-primitive="true"/>\n\t\t\t</td>\n\t\t\t<td></td>\n\t\t\t<td></td>\n\t\t</tr>\n\n\n\n\t\t<tr data-bind="visible: isShowLegalPerson">\n\t\t\t<td>\n\t\t\t\t<label for="vehicle">\n\t\t\t\t\t<a data-i18n="reporting:activities.vehicle" data-bind="attr: {href: legalPersonUrl}"></a>\n\t\t\t\t</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="vehicle" data-role="domoslegalperson" data-bind="value: legalPerson" />\n\t\t\t</td>\n\t\t\t<td></td>\n\t\t\t<td></td>\n\t\t</tr>\n\t</table>\n\n\t<h2 data-i18n="reporting:sections.scheduling"></h2>\n\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="timeliness" data-i18n="reporting:activities.timelinessDays"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="timeliness" name="timeliness" data-bind="value: timelinessDays" data-role="numerictextbox"\n\t\t\t\t\tdata-format="n0" data-min="0" />\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="preparation" data-i18n="reporting:activities.preparationDays"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="preparation" name="preparation" data-bind="value: preparationDays" data-role="numerictextbox"\n\t\t\t\t\tdata-format="n0" data-min="0" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="validation" data-i18n="reporting:activities.validationCutOff"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="validation" name="validation" data-bind="value: validationCutOff" data-role="numerictextbox"\n\t\t\t\t\tdata-format="n0" data-min="0" />\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="submission" data-i18n="reporting:activities.submissionCutOff"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="submission" name="submission" data-bind="value: submissionCutOff" data-role="numerictextbox"\n\t\t\t\t\tdata-format="n0" data-min="0" />\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n</div>'}),define("reporting/data/ReportingFrequency",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReportingFrequency=void 0;var r,o;(r=e.ReportingFrequency||(e.ReportingFrequency={}))[r.WEEKLY=1]="WEEKLY",r[r.MONTHLY=2]="MONTHLY",r[r.QUARTERLY=3]="QUARTERLY",r[r.SEMI_ANNUALLY=4]="SEMI_ANNUALLY",r[r.ANNUALLY=5]="ANNUALLY",(o=e.ReportingFrequency||(e.ReportingFrequency={})).getName=a.EnumUtils.createNameFn("reporting:ReportingFrequency",o),o.widget=i.EnumWidgetUtils.createDropList("DomosReportingFrequency",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),function(){define("views/reporting/edit/activity/activity",["jquery","lodash","i18n","kendo","core/api/ReportingSource","dashboard/repository/DashboardRepository","dashboard/data/DashboardType","object/web/ObjectMap","dashboard/web/DashboardMap","object/ui/VehicleUI","dashboard/ui/DashboardUI","portfolio/data/PortfolioTransparency","text!templates/reporting/edit/activity.html","basic/ui/CountryUI","object/ui/LegalUI","reporting/data/ReportingFrequency"],function(e,a,t,n,i,r,o,d,l,s,u,c,p){var m,f,b,v,y,h,g,T,I,C;return h=i.ReportingSource,m=r.DashRepoInstance,b=o.DashboardType,v=d.ObjectMap,f=l.DashboardMap,g=s.VehicleUI,u.DashboardUI,y=c.PortfolioTransparency,T=function(t){var e,n,i;return i=t.get("dashboards"),n=t.get("dashboard"),(e=a.first(a.filter(i,function(t){return t.id===n})))?e.type:null},C=function(t){return!!t.isDashboard()&&T(t)===b.FUND},I=function(t){return!!t.isDashboard()&&T(t)===b.ENTITIES},{getTemplates:function(){return{view:p}},createRawModel:function(){return{id:0,name:"",source:0,active:!0,country:0,transparency:y.NO_TRANSPARENCY,legalPerson:null,declarerLegal:null,timelinessDays:0,preparationDays:0,validationCutOff:0,submissionCutOff:0,workflow:null,documentList:null,dashboard:null,role:null,frequency:null,entityInvestor:null,dashboards:[],isCRSOrFATCA:function(){var t;return(t=this.get("source"))===h.CRS||t===h.FATCA},isAIFM:function(){return this.get("source")===h.AIFM_1_2},isAIF:function(){return this.get("source")===h.AIF_1_2},isU11:function(){return this.get("source")===h.U_1_1},isCRS:function(){return this.get("source")===h.CRS},isTPT:function(){return this.get("source")===h.TPT_OBS},isAIFOrAIFM:function(){var t;return(t=this.get("source"))===h.AIFM_1_2||t===h.AIF_1_2},isSGOREP:function(){return this.get("source")===h.SGOREP},isDashboard:function(){return this.get("source")===h.DASHBOARD},isDashboardTypeFund:function(){return C(this)},isDashboardTypeEntities:function(){return I(this)},isDashboardTypeFundOrEntities:function(){return C(this)||I(this)},isShowLegalPerson:function(){var t;return(t=this.get("source"))===h.S213_L1||t===h.S216_L1||t===h.TPT_IBS},isS213_L1:function(){return this.get("source")===h.S213_L1},isS216_L1:function(){return this.get("source")===h.S216_L1},isFATCA:function(){return this.get("source")===h.FATCA},isTPT_IBS:function(){return this.get("source")===h.TPT_IBS},legalPersonUrl:function(){return v.objectEdit(this.get("legalPerson.id"))},declarerLegalUrl:function(){return v.objectEdit(this.get("declarerLegal.id"))},entityInvestorUrl:function(){return v.objectEdit(this.get("entityInvestor.id"))},dashboardUrl:function(){return f.dashboardEdit(this.get("dashboard"))}}},updateModel:function(t,e){return m.fetch(),t.set("id",e.id),t.set("name",e.name),t.set("source",e.source),t.set("active",e.active),t.set("country",e.country),t.set("transparency",e.transparency),t.set("legalPerson",e.legalPerson),t.set("declarerLegal",e.declarerLegal),t.set("timelinessDays",e.timelinessDays),t.set("preparationDays",e.preparationDays),t.set("validationCutOff",e.validationCutOff),t.set("submissionCutOff",e.submissionCutOff),t.set("workflow",e.workflow),t.set("documentList",e.documentList),t.set("dashboard",e.dashboard),t.set("role",e.role),t.set("frequency",e.frequency),t.set("entityInvestor",e.entityInvestor),t.set("dashboards",m.getListDashboard),null},init:function(t){return g.widget(e("#fund"),{dataTextField:"name",dataValueField:"id",optionLabel:!1}),null}}})}.call(this),function(){define("views/reporting/edit/activity/edit.activity",["site","views/edit/edit","core/data/SiteCategories","views/reporting/edit/activity/activity"],function(t,e,n,i){var a,r,o,d,l,s,u,c,p,m;return o=t.router,r=t.map,d=n.SiteCategories,u=function(t){return t.create(i)},m=function(t){return null==l&&(l=u(t)),l},s=function(){var t;return t={siteCategory:d.reporting,key:"reportingActivityEdit",rootId:"reportingActivityRoot",actionsId:"reportingActivityActions",url:"reporting/activity.json",getView:m},e.create(t)},a=l=null,p=function(){return null==a&&(a=s()),a},c=function(t){return p().display(t)},{init:function(){return o.addRoute(r.reportingActivityEdit,c)}}})}.call(this),function(){var j,G,q;j="#instanceDocument",G="instanceDocumentGrid",q="instanceDocumentVersion",define("views/reporting/edit/common/documents",["jquery","i18n","kendo","ui","core/ui/UploadUtils","core/ui/grid/column/ColumnStyle","core/ui/grid/column/ColumnUtils"],function(d,l,i,t,e,n,a){var r,o,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,O,U,A,F,L,P,M;return u=e.UploadUtils,s=t.grid,r=n.ColumnStyle,o=a.ColumnUtils,m=function(t,e){return O(t,e,b(t))},x=function(t,e,n){return O(t,e,f(t,n))},R=function(t,e,n){var i;return(i=n.find("#searchBox").val())&&x(t,e,i),null},F=function(t,e){var n,i;return n=d("<div>").appendTo(e),i={items:[{template:"<label>Search:</label>"},{template:"<input id='searchBox' class='k-textbox'/>",overflow:"never"},{type:"button",text:"Search",click:R.bind(null,t,e,n)},{type:"button",text:"Clear",click:m.bind(null,t,e)}]},n.kendoToolBar(i),null},p=function(t){var e;return e=t.find("#"+q),i.destroy(e),e.empty(),null},y=function(t,e,n){var i,a,r,o;if(p(e),n&&(r=n.get("id")))return i=e.find("#"+q),a=d("<div>").addClass("floatingGrid").appendTo(i),d("<div>").addClass("clearer").appendTo(i),o={dataSource:{transport:{read:{url:"document/version/list",dataType:"json",data:{id:r}}},schema:{model:{id:"id",fields:{name:{type:"string"},version:{type:"string",editable:!1},description:{type:"string"}}}},sort:{field:"version",dir:"desc"}},columns:[{field:"id",title:l.t("data:documents.thumbnail"),groupable:!1,filterable:!1,sortable:!1,template:"<img src='document/thumbnail?id=#: id#'></img>"},{field:"name",title:l.t("data:documents.link"),template:h.bind(null,t)},{field:"version",title:l.t("data:documents.version")}],scrollable:!1},s.withDefaults(o),a.kendoGrid(o),null},P=function(t,e){return d("<div>").attr("id",q).appendTo(e),null},w=function(t,e,n){return y(t,e,n)},D=function(t,e){return e.find(".k-upload").find("ul.k-upload-files").remove(),!0},A=function(t,e){var n,i,a,r;if(n=d("<div>").appendTo(e),i=t.model.get("id"))return r={instance:i},a={async:{saveUrl:"reporting/instance/document/upload.json?"+d.param(r),saveField:"file"},complete:D.bind(null,t,n)},u.withDefaults(a),d("<input>").attr("type","file").appendTo(n).kendoUpload(a),null},N=function(t,e,n){var i,a;if(a=t.model.get("id"))return i={instance:a,search:e},d.getJSON("reporting/instance/document/search.json",i).done(n.success).fail(n.error),null;n.success([])},S=function(t,e){var n,i;if(i=t.model.get("id"))return n={instance:i},d.getJSON("reporting/instance/document/list.json",n).done(e.success).fail(e.error),null;e.success([])},M=function(t,e){var n;return t.model,n={type:"POST",url:"document.json",dataType:"json",data:{data:i.stringify(e.data)}},d.ajax(n).done(e.success).fail(e.error),null},v=function(t,e){var n,i;return t.model,i={id:e.data.id},n={type:"DELETE",url:"document.json?"+d.param(i),dataType:"json"},d.ajax(n).done(e.success).fail(e.error)},k=function(t,e,n){var i;if(n&&n.data)return i=n.data,parseInt(i.object)===parseInt(t.model.get("id"))&&("create"===n.type?e.pushCreate(i):"update"===n.type?e.pushUpdate(i):"destroy"===n.type&&e.pushDestroy(i)),null},E=function(t,e,n,i){if(i)return _.isArray(i)?_.each(i,k.bind(null,t,e)):k(t,e,i),null},C=function(t,e){return d("body").on("domosws:reporting:document",E.bind(null,t,e))},h=function(t,e){var n,i;return n=e.id,i=e.name,n&&i?"<a href='document/download?id="+n+"' download='"+i+"'>"+i+"</a>":""},g=function(t,e){return"<input type='file' data-id='"+e.id+"'/>"},L=function(t,e){var n,i;return n={id:e.data("id")},i={async:{saveUrl:"document/update?"+d.param(n),saveField:"file"},multiple:!1,showFileList:!1},e.kendoUpload(i),null},I=function(t,e,n){return e.find("input[type='file']").each(function(){return L(0,d(this))}),!0},T=function(t,e,n){var i,a,r;return r=null,(a=(i=n.sender).select())&&0<a.length&&(r=i.dataItem(a[0])),w(t,e,r)},O=function(t,e,n){var i;return(i=e.find("#"+G).data("kendoGrid"))&&(i.setDataSource(n),i.refresh(),y(t,e,null)),null},f=function(t,e){var n;return n={transport:{read:N.bind(null,t,e),update:M.bind(null,t),destroy:v.bind(null,t),push:C.bind(null,t)},schema:{model:{id:"id",fields:{id:{editable:!1},name:{type:"string"},version:{type:"string",editable:!1},description:{type:"string"}}}},sort:{field:"name",dir:"asc"}},new i.data.DataSource(n)},b=function(t){var e;return e={transport:{read:S.bind(null,t),update:M.bind(null,t),destroy:v.bind(null,t),push:C.bind(null,t)},schema:{model:{id:"id",fields:{id:{editable:!1},name:{type:"string"},version:{type:"string",editable:!1},description:{type:"string"}}}},sort:{field:"name",dir:"asc"}},new i.data.DataSource(e)},U=function(t,e){var n,i;return n=d("<div>").attr("id",G).addClass("floatingGrid_1100_px").appendTo(e),d("<div>").addClass("clearer").appendTo(e),i={dataSource:b(t),columns:[o.addStyle({command:["edit","destroy"],title:" ",width:"230px"},r.CENTER_ALIGNED),{field:"id",title:l.t("data:documents.thumbnail"),groupable:!1,filterable:!1,sortable:!1,template:"<img src='document/thumbnail?id=#: id#'></img>",width:"120px"},{field:"name",title:l.t("data:documents.link"),template:h.bind(null,t),width:"120px"},{field:"version",title:l.t("data:documents.version"),width:"100px"},{field:"description",title:l.t("data:documents.description"),width:"200px"},{title:" ",groupable:!1,sortable:!1,filterable:!1,template:g.bind(null,t),editor:function(t,e){return null},width:"200px"}],dataBound:I.bind(null,t,n),change:T.bind(null,t,e),scrollable:!0,pageable:s.defaultPageable(),height:500},s.withDefaults(i),n.kendoGrid(i),null},c=function(){var t;return t=d(j),i.destroy(t),t.empty(),null},{refresh:function(t){var e;return c(),e=d(j),A(t,e),F(t,e),U(t,e),P(0,e),null},init:function(t){return null}}})}.call(this),function(){define("views/reporting/edit/common/emails",["email/view/EmailForm"],function(t){var e;return e=t.EmailForm,{refresh:function(t){return t.object.workflowInstance&&e.loadAndDisplay($("#instanceEmail"),t.object.workflowInstance,t.object.activity.dashboard),null},init:function(t){return null}}})}.call(this),define("text!templates/reporting/edit/instance.html",[],function(){return'<div id="reportingInstanceRoot">\n\t<h1 data-i18n="reporting:instances.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="reporting:instances.edit" data-bind="invisible: isNew"></h1>\n\n\t<div id="reportingInstanceActions"></div>\n\n\t<p></p>\n\n\t<div data-role="tabstrip">\n\t\t<ul>\n\t\t\t<li class="k-state-active">\n\t\t\t\t<span data-i18n="data:sections.description"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNew">\n\t\t\t\t<span data-i18n="data:sections.documents"></span>\n\t\t\t</li>\n\t\t\t<li data-bind="invisible: isNewOrNoWorkflow">\n\t\t\t\t<span data-i18n="data:sections.email"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t\x3c!-- Description --\x3e\n\t\t<div>\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="activity">\n\t\t\t\t\t\t\t<a data-i18n="reporting:instances.activity" data-bind="attr:{href: activityUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="activity" name="activity" data-role="domosreportingactivity" data-bind="value: activity"\n\t\t\t\t\t\t\trequired />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="workflow" data-i18n="reporting:instances.workflow"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="workflow" name="workflow" data-role="domosworkflowreporting" data-bind="value: workflow"\n\t\t\t\t\t\t\trequired />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="documentList" data-i18n="reporting:instances.documentList"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="documentList" name="documentList" data-role="domosdocumentlist" data-bind="value: documentList" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: isAIFOrAIFM">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="reportingCountry" data-i18n="reporting:instances.reportingCountry"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="reportingCountry" name="reportingCountry" class="k-textbox" type="text" data-bind="value: countryName"\n\t\t\t\t\t\t\treadonly />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="aifm"  data-bind="visible: isAIFM">\n\t\t\t\t\t\t\t<a data-i18n="reporting:instances.aifm" data-bind="attr: {href: vehicleUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<label for="aifm" data-bind="invisible: isAIFM">\n\t\t\t\t\t\t\t<a data-i18n="reporting:instances.aif" data-bind="attr: {href: vehicleUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="aifm" name="AIFM" class="k-textbox" type="text" data-bind="value: legalPersonName"\n\t\t\t\t\t\t\treadonly />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: isDashboardEntities">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="investor">\n\t\t\t\t\t\t\t<a data-i18n="reporting:instances.investor" data-bind="attr: {href: investorUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="investor" data-role="domosentityinvestorid" data-bind="value: investor" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: isAIFOrAIFMFundOrEntities">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="date" data-i18n="reporting:instances.date"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="date" name="date" data-role="datepicker" data-bind="value: date" required="required" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td data-bind=" visible: isAIFOrAIFM">\n\t\t\t\t\t\t<label for="record" data-i18n="reporting:instances.recordType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td data-bind=" visible: isAIFOrAIFM">\n\t\t\t\t\t\t<input id="record" name="record" data-role="domosreportingrecordtype" data-bind="value: recordType" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: isAIFMDRecord">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="filing" data-i18n="reporting:instances.filingType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="filing" name="filing" data-role="domosreportingfilingtype" data-bind="value: filing" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: isAIFOrAIFM">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="period" data-i18n="reporting:instances.periodType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="period" name="period" data-role="domosreportingperiodtype" data-bind="value: period" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="year" data-i18n="reporting:instances.periodYear"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="year" name="year" data-role="domosyear" data-bind="value: year" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: isU11">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="uci"></label>\n\t\t\t\t\t\t<a data-i18n="reporting:instances.uci" data-bind="attr: {href: vehicleUrl}"></a>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="aifm" name="AIFM" class="k-textbox" type="text" data-bind="value: legalPersonName"\n\t\t\t\t\t\t\treadonly />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: isU11">\n\t\t\t\t\t\x3c!-- <td>\n\t\t\t\t\t\t<label for="u11Status" data-i18n="reporting:instances.u11Status"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="u11Status" data-role="domosu11cssfreportingstatus" data-bind="value: u11Status" />\n\t\t\t\t\t</td> --\x3e\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="u11YearMonth" data-i18n="reporting:instances.u11YearMonth"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="u11YearMonth" data-bind="value: u11YearMonth" data-role="datepicker" data-start="year"\n\t\t\t\t\t\t\tdata-depth="year" data-format="MMMM yyyy" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: isCRS">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="strategyType" data-i18n="reporting:instances.strategyType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="strategyType" class="k-textbox" data-bind="value: strategyType" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="strategySubType" data-i18n="reporting:instances.strategySubType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="strategySubType" class="k-textbox" data-bind="value: strategySubType" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: isCRS">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="year" data-i18n="reporting:instances.periodYear"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="year" name="year" data-role="domosyear" data-bind="value: year" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: isTPT">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="tptVehicle">\n\t\t\t\t\t\t\t<a data-i18n="reporting:instances.tptVehicle" data-bind="attr: {href: vehicleUrl}"></a>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="tptVehicle" class="k-textbox" type="text" data-bind="value: legalPersonName"\n\t\t\t\t\t\t\treadonly />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: isTPT">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="tptYearMonth" data-i18n="reporting:instances.tptYearMonth"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="tptYearMonth" data-bind="value: u11YearMonth" data-role="datepicker" data-start="year"\n\t\t\t\t\t\t\tdata-depth="year" data-format="MMMM yyyy" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: isS213">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="s213Period" data-i18n="reporting:instances.periodType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="s213Period" name="Period" data-role="domosreportingperiodquartertype" data-bind="value: period"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="s213Year" data-i18n="reporting:instances.periodYear"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="s213Year" name="Year" data-role="domosyear" data-bind="value: year" required/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-bind="visible: isSGOREP">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="sgorepPeriod" data-i18n="reporting:instances.periodType"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="sgorepPeriod" name="Period" data-role="domosreportingperiodquartertype" data-bind="value: period"/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="sgorepYear" data-i18n="reporting:instances.periodYear"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="sgorepYear" name="Year" data-role="domosyear" data-bind="value: year" required/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\t\t\t<div data-bind="visible: isAIFOrAIFM">\n\t\t\t\t<h2 data-i18n="reporting:sections.assumptions"></h2>\n\n\t\t\t\t<div id="assumptionGrid" class="floatingGrid_800_px"></div>\n\t\t\t\t<div class="clearer"></div>\n\t\t\t</div>\n\n\t\t\t<p></p>\n\n\t\t\t<h2 data-i18n="reporting:sections.uploadSession" data-bind="invisible: isNew"></h2>\n\n\t\t\t<table class="formTable" data-bind="invisible: isNew">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="xmlFile" data-i18n="reporting:instances.excelFile" data-bind="visible: isShowExcel"></label>\n\t\t\t\t\t\t<label for="xmlFile" data-i18n="reporting:instances.xmlFile" data-bind="visible: isHideExcel"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="xmlFile" class="k-textbox" type="text" data-bind="value: xmlFile" readonly />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\n\n\t\t\t<div id="importXmlFile" data-bind="invisible: isNew"></div>\n\n\t\t\t<p></p>\n\t\t\t<div data-bind="visible: isAIFOrAIFM">\n\t\t\t\t<h2 data-i18n="reporting:sections.changeOfObligation"></h2>\n\t\t\t\t<table class="formTable">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="oldPeriodType" data-i18n="reporting:instances.oldPeriodType"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="oldPeriodType" data-role="domosreportingperiodtype" data-bind="value: oldPeriod" />\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="newPeriodType" data-i18n="reporting:instances.newPeriodType"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="newPeriodType" data-role="domosreportingperiodtype" data-bind="value: newPeriod" />\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr data-bind="visible :isAIFM">\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="oldObligationTypAIFMe" data-i18n="reporting:instances.oldObligationType"\n\t\t\t\t\t\t\t\tdata-bind="visible :isAIFM"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="oldObligationTypeAIFM" data-role="domosaifmreportingobligation" data-bind="visible : isAIFM,value: oldObligation" />\n\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="obligationTypeAIFM" data-i18n="data:fields.AIFMReportingObligation" data-bind="visible :isAIFM"></label>\n\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="obligationTypeAIFM" data-role="domosaifmreportingobligation" data-bind="visible :isAIFM,value: obligation" />\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr data-bind="visible :isAIF">\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="oldObligationTypeAIF" data-i18n="reporting:instances.oldObligationType"\n\t\t\t\t\t\t\t\tdata-bind="visible :isAIF"></label>\n\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="oldObligationTypeAIF" data-role="domosaifreportingobligation" data-bind="visible :isAIF,value: oldObligation" />\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<label for="obligationTypeAIF" data-i18n="reporting:instances.obligationType" data-bind="visible :isAIF"></label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input id="obligationTypeAIF" data-role="domosaifreportingobligation" data-bind="visible :isAIF,value: obligation" />\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\n\t\t\x3c!-- Documents --\x3e\n\t\t<div>\n\t\t\t<div id="instanceDocument"></div>\n\t\t</div>\n\n\t\t\x3c!-- Email --\x3e\n\t\t<div>\n\t\t\t<div id="instanceEmail"></div>\n\t\t</div>\n\t</div>\n</div>'}),define("core/api/ReportingPeriodQuarterType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReportingPeriodQuarterType=void 0;var r,o;(r=e.ReportingPeriodQuarterType||(e.ReportingPeriodQuarterType={}))[r.FIRST_QUARTER=1]="FIRST_QUARTER",r[r.SECOND_QUARTER=2]="SECOND_QUARTER",r[r.THIRD_QUARTER=3]="THIRD_QUARTER",r[r.FOURTH_QUARTER=4]="FOURTH_QUARTER",(o=e.ReportingPeriodQuarterType||(e.ReportingPeriodQuarterType={})).getName=a.EnumUtils.createNameFn("reporting:periodTypes",o),o.widget=i.EnumWidgetUtils.createDropList("DomosReportingPeriodQuarterType",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),function(){var tt=[].slice;define("views/reporting/edit/instance/instance",["jquery","lodash","i18n","kendo","ui","core/ui/UploadUtils","core/util/ObservableUtils","reporting/ui/ReportingActivityUI","basic/data/Countries","core/api/ReportingSource","core/api/U11CssfReportingStatus","core/api/ReportingRecordType","views/reporting/edit/common/documents","views/reporting/edit/common/emails","core/ui/IntegerUI","object/web/ObjectMap","core/ui/grid/column/ColumnStyle","core/ui/grid/column/ColumnUtils","dashboard/repository/DashboardRepository","dashboard/data/DashboardType","reporting/web/ReportingMap","text!templates/reporting/edit/instance.html","core/api/ReportingFilingType","core/api/ReportingPeriodType","core/api/ReportingPeriodQuarterType","document/ui/DocumentListUI","workflow/ui/WorkflowUI","core/ui/YearUI"],function(r,a,i,o,t,e,n,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I){var C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$,Q,z,X,Z;return L=e.UploadUtils,S=f.IntegerUI,_=n.ObservableUtils,d.ReportingActivityUI,k=l.Countries,A=s.ReportingSource,F=u.U11CssfReportingStatus,U=c.ReportingRecordType,C=v.ColumnStyle,w=y.ColumnUtils,N=t.grid,x=N.transports,R=b.ObjectMap,E=h.DashRepoInstance,D=g.DashboardType,O=T.ReportingMap,Q=function(t,e){var n;return!!(n=_.get(t,"activity.source"))&&n===e},P=function(t){var e,n,i;return i=t.get("dashboards"),n=_.get(t,"activity.dashboard"),(e=a.first(a.filter(i,function(t){return t.id===n})))?e.type:null},J=function(t){var e;return(e=P(t))===D.FUND||e===D.ENTITIES},Y=function(t){return P(t)===D.ENTITIES},q=function(t){return Q(t,A.AIFM_1_2)},G=function(t){return Q(t,A.AIF_1_2)},V=function(t){return G(t)||q(t)},B=function(t,e){return V(t)&&t.get("recordType")===U.RECORD},X=function(t){return Q(t,A.U_1_1)},W=function(t){return Q(t,A.CRS)||Q(t,A.FATCA)},z=function(t){var e;return(e=M(t))===A.TPT_OBS||e===A.TPT_IBS},K=function(t){var e;return(e=M(t))===A.S213_L1||e===A.S216_L1},$=function(t){return Q(t,A.SGOREP)},H=function(t){return Q(t,A.DASHBOARD)},M=function(t){return _.get(t,"activity.source")},j=function(t){var e,n;return e=t.model,n={dataSource:{transport:x.createLocal({data:e.get("assumptions")}),schema:{model:{id:"id",fields:{questionNumber:{type:"number",defaultValue:1,validation:{required:!0,min:1,max:999}},description:{type:"string"}}}}},columns:[w.addStyle({command:["edit","destroy"],title:" ",width:"230px"},C.CENTER_ALIGNED),S.column({field:"questionNumber",title:i.t("reporting:assumptions.questionNumber"),width:"200px"}),{field:"description",title:i.t("reporting:assumptions.description"),width:"300px"}],toolbar:["create"],pageable:N.defaultPageable(),scrollable:!0,height:500},N.withDefaults(n),r("#assumptionGrid").kendoGrid(n)},Z=function(t){var e,n,i,a;if(n=r("#importXmlFile"),o.destroy(n),n.empty(),e=r("<div>").appendTo(n),i=t.model,t.model.get("id"))return a={async:{saveUrl:"reporting/instance/xml/upload.json?id="+i.get("id"),saveField:"file"}},L.withDefaults(a),r("<input>").attr("type","file").appendTo(e).kendoUpload(a),null},{getTemplates:function(){return{view:I}},createRawModel:function(){return{id:0,activity:null,date:new Date,workflow:null,filing:0,period:0,year:0,assumptions:[],documentList:null,u11Status:F.FINAL_REPORT,u11YearMonth:new Date,strategyType:"",strategySubType:"",xmlFile:"",recordType:U.RECORD,oldPeriod:null,newPeriod:null,oldObligation:null,obligation:null,dashboards:[],investor:null,legalPersonName:function(){return _.get(this,"activity.legalPersonName")},countryName:function(){return k.getName(_.get(this,"activity.country"))},isAIFM:function(){return q(this)},isAIF:function(){return G(this)},isAIFOrAIFM:function(){return V(this)},isAIFMDRecord:function(){return B(this)},isU11:function(){return X(this)},isCRS:function(){return W(this)},isTPT:function(){return z(this)},isS213:function(){return K(this)},isSGOREP:function(){return $(this)},isDashboard:function(){return H(this)},isAIFOrAIFMFundOrEntities:function(){return V(this)||J(this)},vehicleUrl:function(){return R.objectEdit(_.get(this,"activity.legalPersonId"))},investorUrl:function(){var t;return(t=this.get("investor"))?R.objectEdit(t.id):"javascript:void(0)"},activityUrl:function(){var t;return(t=this.get("activity"))?O.activityEdit(t.id):"javascript:void(0)"},isDashboardEntities:function(){return Y(this)},isNewOrNoWorkflow:function(){return!_.get(this,"id")||!_.get(this,"workflowInstance")},isShowExcel:function(){return $(this)},isHideExcel:function(){return!$(this)}}},updateModel:function(t,e){var n;return E.fetch(),t.set("id",e.id),t.set("activity",e.activity),t.set("date",new Date(e.date)),t.set("workflow",e.workflow),t.set("workflowInstance",e.workflowInstance),t.set("filing",e.filing),t.set("period",e.period),t.set("year",e.year),t.set("documentList",e.documentList),t.set("u11Status",e.u11Status),t.set("u11YearMonth",new Date(e.u11YearMonth)),t.set("strategyType",e.strategyType),t.set("strategySubType",e.strategySubType),t.set("xmlFile",e.xmlFile||""),t.set("recordType",e.recordType),t.set("oldPeriod",e.oldPeriod),t.set("newPeriod",e.newPeriod),t.set("oldObligation",e.oldObligation),t.set("obligation",e.obligation),t.set("dashboards",E.getListDashboard),t.set("investor",e.investor),(n=t.get("assumptions")).splice.apply(n,[0,n.length].concat(tt.call(e.assumptions))),null},init:function(t){return p.init(t),m.init(t),j(t)},viewShow:function(t){return p.refresh(t),m.refresh(t),Z(t),null}}})}.call(this),function(){define("views/reporting/edit/instance/edit.instance",["jquery","i18n","site","views/edit/edit","core/data/SiteCategories","views/reporting/edit/instance/instance"],function(t,n,e,i,a,r){var o,d,l,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E;return s=e.router,d=e.map,u=a.SiteCategories,h=function(t){return t.create(r)},w=function(t){return null==c&&(c=h(t)),c},g=function(t){var e;return e=t.model.get("id"),s.navigate(d.getReportingInstanceDocumentEdit(e))},E=function(t,e){return 0!==t.model.get("id")&&(e.push({type:"separator"}),e.push({type:"button",text:n.t("reporting:documents.documents"),click:g.bind(null,t)})),null},f=function(t){return{id:t}},y=function(t,e,n){return{activity:t,workflow:e,documentList:n}},k=function(t){var e;return(e=t.module)&&e.viewShow&&e.viewShow(t),null},v=function(){return{siteCategory:u.reporting,key:"reportingInstanceEdit",rootId:"reportingInstanceRoot",actionsId:"reportingInstanceActions",url:"reporting/instance.json",getView:w,setupToolbar:E,viewShow:k}},b=function(){var t;return(t=v()).createGetParameters=y,i.create(t)},m=function(){var t;return(t=v()).createGetParameters=f,i.create(t)},C=function(){return null==l&&(l=b()),l},o=l=c=null,I=function(){return null==o&&(o=m()),o},function(t){return I().display(t)},p=function(t,e,n){return C().display(t,e,n)},T=function(t){return I().display(t)},{init:function(){return s.addRoute(d.reportingInstanceEdit,T),s.addRoute(d.reportingInstanceCreate,p)}}})}.call(this),function(){define("views/reporting/edit/module",["views/reporting/edit/activity/edit.activity","views/reporting/edit/instance/edit.instance"],function(t,e){return{init:function(){return t.init(),e.init(),null}}})}.call(this),define("text!templates/reporting/document/document.html",[],function(){return'<div id="reportingDocumentRoot">\n    <h1 data-i18n="reporting:documents.documents"></h1>\n    <h2 data-bind="text: activityName"></h2>\n    <h3 data-bind="text: date" data-format="d"></h3>\n\n    <div id="reportingDocumentGrid" class="floatingGrid_1200_px"></div>\n    <div class="clearer"></div>\n    <p></p>\n\n    <h3 data-i18n=""></h3>\n    <div id="reportingCssfDocumentGrid" class="floatingGrid_1200_px"></div>\n    <div class="clearer"></div>\n</div>'}),function(){var Q,z,X;X="editReportingDocument",z="#reportingDocumentGrid",Q="domosws:reporting:document",define("views/reporting/document/edit.document",["jquery","lodash","i18n","kendo","site","ui","core/ui/UploadUtils","core/util/ObservableUtils","views/layout","views/not.found","views/loading","core/ui/IntegerUI","text!templates/reporting/document/document.html"],function(a,r,i,o,t,e,n,d,l,s,u,c,p){var m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y,J,K,$;return h=n.UploadUtils,v=d.ObservableUtils,m=c.IntegerUI,y=t.router,f=t.map,b=e.grid,U=function(){return s.display(X,!1)},function(){return{view:null,query:null,grid:null,handler:null}},C=function(t){return{id:0,activity:null,date:new Date,activityName:function(){return v.get(this,"activity.name")||""}}},$=function(t,e){return t.set("id",e.id),t.set("activity",e.activity),t.set("date",e.date),t},T=function(t){return t.handler&&a("body").on(Q,t.handler),!0},E=function(t){return t.handler&&a("body").off(Q,t.handler),!0},I=function(t){var e;return E(t),(t.handler=null)!=(e=t.grid)&&e.destroy(),t.grid=null,a(z).empty(),null},V=function(t,e){var n;return n={instance:t.model.get("id")},a.getJSON("reporting/document/list.json",n).done(e.success).fail(e.error),null},K=function(t,e){var n;return t.model,n={type:"POST",url:"reporting/document.json",dataType:"json",data:{data:o.stringify(e.data)}},a.ajax(n).done(e.success).fail(e.error),null},N=function(t,e){var n,i;return n=e.documentId,i=e.documentName,n&&i?"<a href='document/download?id="+n+"' download='"+i+"'>"+i+"</a>":""},x=function(t,e){return"<input type='file' data-entry='"+e.entry+"'/>"},Y=function(t,e){var n,i;return n={instance:t.model.get("id"),entry:e.data("entry")},i={async:{saveUrl:"reporting/document/upload.json?"+a.param(n),saveField:"file"},multiple:!1,showFileList:!1},h.withDefaults(i),e.kendoUpload(i)},G=function(t,e,n){var i;if(n&&n.data)return i=n.data,parseInt(i.instance)===parseInt(t.model.get("id"))&&("create"===n.type?e.pushCreate(i):"update"===n.type?e.pushUpdate(i):"destroy"===n.type&&e.pushDestroy(i)),null},q=function(t,e,n,i){if(i)return r.isArray(i)?r.each(i,G.bind(null,t,e)):G(t,e,i),null},M=function(t,e){return E(t),t.handler=q.bind(null,t,e),T(t)},F=function(t,e){return a(z).find("input[type='file']").each(function(){return Y(t,a(this))}),!0},L=function(){var t;return null!=(t=a(z).data("kendoGrid"))&&t.refresh(),null},function(t){var e,n;if(t)return n={intention:t.intention,entry:t.entry},e={type:"DELETE",url:"reporting/document.json?"+a.param(n),dataType:"json"},a.ajax(e).always(L),null},H=function(t){var e,n;return I(t),n={dataSource:{transport:{read:V.bind(null,t),update:K.bind(null,t),push:M.bind(null,t)},schema:{model:{id:"entry",fields:{instance:{type:"number",editable:"false"},priority:{type:"number",editable:!1},entry:{type:"number",editable:!1},entryName:{type:"string",editable:!1},mandatory:{type:"boolean",editable:!1},valid:{type:"boolean"},documentId:{type:"string",editable:!1},documentName:{type:"string",editable:!1}}}},sort:{field:"priority",dir:"asc"}},dataBound:F.bind(null,t),columns:[{command:["edit"],title:" ",width:120},m.column({field:"priority",title:i.t("flow:documents.entries.priority"),width:100}),{field:"entryName",title:i.t("flow:documents.document"),width:120},{field:"mandatory",title:i.t("flow:documents.entries.mandatory"),width:120},{field:"valid",title:i.t("flow:documents.valid"),width:100},{field:"documentName",title:i.t("flow:documents.link"),template:N.bind(null,t),width:120},{title:" ",template:x.bind(null,t),width:120}],scrollable:!0,pageable:b.defaultPageable(),height:500},b.withDefaults(n),(e=a(z)).kendoGrid(n),t.grid=e.data("kendoGrid"),null},k=function(t,e){var n,i;return n=e.id,i=e.name,n&&i?"<a href='document/download?id="+n+"' download='"+i+"'>"+i+"</a>":""},B=function(t,e){var n,i;if(i=t.model.get("id"))return n={instance:i},a.getJSON("reporting/instance/document/cssf/list.json",n).done(e.success).fail(e.error),null;e.success([])},W=function(t){var e,n;return e=a("#reportingCssfDocumentGrid"),o.destroy(e),e.empty(),n={dataSource:{transport:{read:B.bind(null,t)},schema:{model:{id:"id",fields:{name:{type:"string"},version:{type:"string"},description:{type:"string"}}}},sort:{field:"name",dir:"asc"}},columns:[{field:"id",title:i.t("data:documents.thumbnail"),groupable:!1,filterable:!1,sortable:!1,template:"<img src='document/thumbnail?id=#: id#'></img>",width:230},{field:"name",title:i.t("data:documents.link"),template:k.bind(null,t),width:120},{field:"version",title:i.t("data:documents.version"),width:120},{field:"description",title:i.t("data:documents.description"),width:300}],scrollable:!0,editable:!1,pageable:b.defaultPageable(),height:500},b.withDefaults(n),e.kendoGrid(n),null},J=function(t){return H(t),W(t)},_=function(t){return a("#reportingDocumentRoot").localize(),null},w=function(t){var e,n,i;return e=t.model,i=o.template(p)({}),n={model:e,init:_.bind(null,t),show:J.bind(null,t)},new o.View(i,n)},R=function(t){return null==t.view&&(t.view=w(t)),t.view},S=function(t,e){var n;if(e)return $(t.model,e),n=R(t),l.display(X,n);U()},g=function(t){var e;return null!=(e=t.query)&&e.abort(),t.query=null},j=function(t,e){return S(t,e)},P=function(t){return U()},A=function(t){return t.query=null},O=function(t,e){var n;return g(t),n={id:e},t.query=a.getJSON("reporting/instance.json",n).done(j.bind(null,t)).fail(P.bind(null,t)).always(A.bind(null,t)),null},D=function(t,e){return u.display(X,!1),O(t,e)},{init:function(){var t,e,n;return t={view:null,query:null,grid:null,handler:null},n=C(),e=o.observable(n),t.model=e,y.addRoute(f.reportingInstanceDocumentEdit,D.bind(null,t))}}})}.call(this),define("text!templates/reporting/reporting.cssf.identifiers.html",[],function(){return'<div id="reportingCssfIdentifiersRoot">\n\t<h1>CSSF identifiers</h1>\n\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="aifm">AIFM</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="aifm" type="text" class="k-textbox" data-bind="value: aifm"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="aif">AIF</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="aif" type="text" class="k-textbox" data-bind="value: aif"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="u11">U1.1</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="u11" type="text" class="k-textbox" data-bind="value: u11"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label>TPT OBS</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: tptobs"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label>TPT OBS (Type)</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: tptobs_type"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label>S213</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: s213_l1"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label>S213 (Type)</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: s213_l1_type"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label>S216</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: s216_l1"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label>S216 (Type)</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: s216_l1_type"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label>TPT IBS</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: tptibs"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label>TPT IBS (Type)</label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input type="text" class="k-textbox" data-bind="value: tptibs_type"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<button class="k-button" data-bind="click: refreshClick">Refresh</button>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<button class="k-button" data-bind="click: saveClick">Save</button>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>\n'}),function(){define("views/reporting/reporting.cssf.identifiers",["jquery","i18n","kendo","site","core/event/SiteEvents","views/layout","core/data/SiteCategories","text!templates/reporting/reporting.cssf.identifiers.html"],function(i,t,r,o,e,d,n,l){var s,a,u,c,p,m,f,b,v,y;return a=e.SiteEvents,s=n.SiteCategories,m=function(t,e){return t.set("aifm",e.aifm||""),t.set("aif",e.aif||""),t.set("u11",e.u11||""),t.set("tptobs",e.tptobs||""),t.set("tptobs_type",e.tptobs_type||""),t.set("s213_l1",e.s213_l1||""),t.set("s213_l1_type",e.s213_l1_type||""),t.set("s216_l1",e.s216_l1||""),t.set("s216_l1_type",e.s216_l1_type||""),t.set("tptibs",e.tptibs||""),t.set("tptibs_type",e.tptibs_type||""),null},f=function(){return alert("ERROR")},p=function(t){return i.getJSON("reporting/cssf/identifiers.json").done(m.bind(null,t)).fail(f)},b=function(t){return p(t)},y=function(t){return a.saveSuccessful(),b(t)},v=function(t){var e,n;return n=t.toJSON(),e={type:"POST",url:"reporting/cssf/identifiers.json",dataType:"json",data:{data:JSON.stringify(n)}},i.ajax(e).done(y.bind(null,t)).fail(f),null},u=function(){return{aifm:"",aif:"",u11:"",tptobs:"",tptobs_type:"",s213_l1:"",s213_l1_type:"",s216_l1:"",s216_l1_type:"",tptibs:"",tptibs_type:"",saveClick:function(){return v(this)},refreshClick:function(){return b(this)}}},c=function(t){return i("#reportingCssfIdentifiersRoot").localize(),p(t),null},{init:function(){var t,e,n,i,a;return n=u(),t=r.observable(n),i=r.template(l)({}),e={model:t,init:c.bind(null,t)},a=new r.View(i,e),d.register("reportingCssfIdentifiers",o.map.reportingCssfIdentifiers,a,null,s.reporting)}}})}.call(this),define("text!templates/reporting/reporting.import.html",[],function(){return'<div id="reportingImportRoot">\n\t<h1>Import report XML</h1>\n\t<h3>AIFM</h3>\n\t<input id="importAIFM" type="file"/>\n\t<p></p>\n\n\t<h3>AIF</h3>\n\t<input id="importAIF" type="file"/>\n\t<p></p>\n\n\t<h3>U1.1</h3>\n\t<input id="importU11" type="file"/>\n\t<p></p>\n\n\t<div class="floatTwoThird">\n\t\t<div id="importPreviewViewer"></div>\n\t</div>\n\t<div class="clearer"></div>\n</div>'}),function(){define("views/reporting/reporting.import",["jquery","lodash","kendo","site","views/layout","views/reporting/report/report.viewer","core/data/SiteCategories","text!templates/reporting/reporting.import.html"],function(a,t,n,e,i,r,o,d){var l,s,u,c,p;return l=o.SiteCategories,c=function(t,e){return"upload"===e.operation&&t.display(e.response),null},p=function(t,e,n){var i;return i={async:{saveUrl:n,saveField:"file"},success:c.bind(null,t)},a(e).kendoUpload(i),null},u=function(){var t;return(t=r.create("#importPreviewViewer",!0)).display(null),p(t,"#importAIFM","reporting/preview/import/aifm.json"),p(t,"#importAIF","reporting/preview/import/aif.json"),p(t,"#importU11","reporting/preview/import/u11.json"),null},s=function(){var t,e;return t=n.template(d)({}),e={init:u},new n.View(t,e)},{init:function(){var t;return t=s(),i.register("reportingImport",e.map.reportingImport,t,null,l.reporting),null}}})}.call(this),function(){define("views/reporting/module",["views/layout","views/reporting/reporting","views/reporting/edit/module","views/reporting/document/edit.document","views/reporting/reporting.cssf.identifiers","views/reporting/reporting.import"],function(t,e,n,i,a,r){return{init:function(){return e.init(t),n.init(),i.init(),a.init(),r.init(),null}}})}.call(this),define("text!templates/settings/change.password.html",[],function(){return'<div id="changePasswordRoot">\n    <h2 data-i18n="settings:changePassword"></h2>\n    \n    <table class="passwordTable">\n        <tr>\n            <td>\n                <label for="pwdPassword" data-i18n="settings:currentPassword"></label>\n            </td>\n            <td>\n                <input id="pwdPassword" name="pwdPassword" class="k-textbox" type="password" data-value-update="keyup"\n                       data-bind="value: password, disabled: locked" data-i18n="[placeholder]settings:currentPasswordHint"/>\n            </td>\n            <td></td>\n            <td></td>\n        </tr>\n        <tr data-bind="visible: hasUser">\n            <td>\n                <label for="pwdUser" data-i18n="settings:user"></label>\n            </td>\n            <td>\n                <input id="pwdUser" class="k-textbox" data-bind="value: userName" readonly/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="pwdNewPassword" data-i18n="settings:newPassword"></label>\n            </td>\n            <td>\n                <input id="pwdNewPassword" name="pwdNewPassword" class="k-textbox" type="password" data-value-update="keyup"\n                       data-bind="value: newPassword, disabled: locked" data-i18n="[placeholder]settings:newPasswordHint"/>\n            </td>\n            <td>\n                <div id="passwordStrength"></div>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="pwdConfirmPassword" data-i18n="settings:confirmPassword"></label>\n            </td>\n            <td>\n                <input id="pwdConfirmPassword" name="pwdConfirmPassword" class="k-textbox" type="password" data-value-update="keyup"\n                       data-bind="value: confirmPassword, disabled: locked" data-i18n="[placeholder]settings:confirmPasswordHint"/>\n            </td>\n            <td>\n                <span class="passwordError" data-i18n="settings:passwordsDoNotMatch" data-bind="invisible: arePasswordMatch"></span>\n            </td>\n        </tr>\n        <tr>\n            <td></td>\n            <td>\n                <button class="k-button" data-i18n="settings:changePassword" data-bind="enabled: canChange, events:{click: changeClick}"></button>\n            </td>\n            <td></td>\n            <td></td>\n        </tr>\n    </table>\n</div>'}),function(){var L,P;L="changePassword",P="#passwordStrength",define("views/settings/change.password",["jquery","i18n","kendo","site","core/event/SiteEvents","views/layout","views/not.found","views/loading","text!templates/settings/change.password.html"],function(r,i,o,n,t,a,e,d,l){var s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F;return s=t.SiteEvents,function(){return{}},I=function(t,e){return t===e},T=function(t,e,n){return!!(t&&e&&n)&&I(e,n)},h=function(t){return!t.get("locked")&&T(t.get("password"),t.get("newPassword"),t.get("confirmPassword"))},N=function(t){var e;return e=i.t("settings:passwordChangeSuccess"),s.success(e),n.router.navigateLastMainPage()},x=function(t){var e,n;return n=i.t("settings:passwordChangeFailure.title"),e=i.t("settings:passwordChangeFailure.message"),s.error({title:n,message:e})},S=function(t){return t.set("locked",!1)},g=function(t){var e,n;if(h(t))return t.set("locked",!0),e={password:t.get("password"),newPassword:t.get("newPassword")},(n=t.get("user"))&&(e.user=n),r.post("user/change.password.action",e).done(N.bind(null,t)).fail(x.bind(null,t)).always(S.bind(null,t)),null},C=function(){return{user:0,userName:"",password:"",newPassword:"",confirmPassword:"",locked:!1,hasUser:function(){return!!this.get("user")},arePasswordMatch:function(){return I(this.get("newPassword"),this.get("confirmPassword"))},canChange:function(){return h(this)},changeClick:function(){return g(this)}}},v=function(t,e){var n;return n=t.model,e?(n.set("user",e.id),n.set("userName",e.name)):(n.set("user",0),n.set("userName","")),null},R=function(t,e){return"newPassword"===e.field&&F(t.get("newPassword")),null},y=function(t){return t.bind("change",R.bind(null,t))},_=function(t){var e;return t.value(0),t.progressStatus.text(i.t("settings:passwordStrength.empty")),(e=t.progressWrapper).addClass("passwordStrengthEmpty"),e.removeClass("passwordStrengthWeak"),e.removeClass("passwordStrengthGood"),e.removeClass("passwordStrengthStrong"),null},A=function(t){var e;return t.value(1),t.progressStatus.text(i.t("settings:passwordStrength.weak")),(e=t.progressWrapper).removeClass("passwordStrengthEmpty"),e.addClass("passwordStrengthWeak"),e.removeClass("passwordStrengthGood"),e.removeClass("passwordStrengthStrong"),null},O=function(t){var e;return t.value(2),t.progressStatus.text(i.t("settings:passwordStrength.good")),(e=t.progressWrapper).removeClass("passwordStrengthEmpty"),e.removeClass("passwordStrengthWeak"),e.addClass("passwordStrengthGood"),e.removeClass("passwordStrengthStrong"),null},U=function(t){var e;return t.value(3),t.progressStatus.text(i.t("settings:passwordStrength.strong")),(e=t.progressWrapper).removeClass("passwordStrengthEmpty"),e.removeClass("passwordStrengthWeak"),e.removeClass("passwordStrengthGood"),e.addClass("passwordStrengthStrong"),null},F=function(t){var e,n,i,a;if(a=r(P).data("kendoProgressBar"))if(!t||t.length<=0)_(a);else if(e=0,n=t!==t.toUpperCase(),i=t!==t.toLowerCase(),n&&i&&++e,t.match(/\d+/g)&&++e,2<=e&&8<=t.length)U(a);else{if(!(1<=e&&5<=t.length))return A(a),null;O(a)}},E=function(){var t,e;return t={type:"value",max:3,animation:!1},e=r(P).kendoProgressBar(t).data("kendoProgressBar"),_(e)},D=function(t){return r("#changePasswordRoot").localize(),E(),y(t)},w=function(t){var e,n,i,a,r;return a={},r=o.template(l)(a),i=C(),e=o.observable(i),n={model:t.model=e,init:D.bind(null,e)},new o.View(r,n)},k=function(t){return null==t.view&&(t.view=w(t)),t.view},c=function(t,e){var n;return n=k(t),v(t,e),a.display(L,n)},b=function(t,e){return c(t,e),null},f=function(t){return e.display(L,!1)},p=function(t,e){var n;return n={id:e},r.getJSON("user.json",n).done(b.bind(null,t)).fail(f.bind(null,t)),null},m=function(t,e){return d.display(L,!1),p(t,e)},u=function(t,e){return e?m(t,e):c(t,null),null},{init:function(){var t;return t={},n.router.addRoute(n.map.changePassword,u.bind(null,t))}}})}.call(this),define("user/repository/UserGroupRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserGroupRepository=void 0;var i=function(){function t(){}return t.fetchIdentifiables=function(){return n.WebHttp.getJson("user/group/id/list.json")},t}();e.UserGroupRepository=i}),define("user/ui/UserGroupUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","user/repository/UserGroupRepository"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserGroupUI=void 0;var r=function(){function t(){}return t.widget=n.IdWidgetUtils.createDropList("DomosUserGroup",a.UserGroupRepository.fetchIdentifiables,!0),t.column=i.IdentifiableColumnUtils.createFactory(t.widget),t}();e.UserGroupUI=r}),define("text!templates/settings/users.html",[],function(){return'<div id="usersRoot">\n    <h2 data-i18n="settings:groups.title"></h2>\n\n    <div id="usersGroupGrid" class="floatingGrid_800_px"></div>\n    <div class="clearer"></div>\n\n    <h2 data-i18n="settings:users.title"></h2>\n\n    <div id="usersGrid" class="floatingGrid_1400_px"></div>\n    <div class="clearer"></div>\n\n    <p></p>\n\n</div>'}),define("text!templates/settings/users.group.grid.toolbar.html",[],function(){return'<ul id="usersGroupGridToolbarMenu" class="gridToolbarMenu d-sprite-wrapper" data-role="menu">\n    <li>\n        <a href="javascript:void(0)" class="k-link" data-key="create">\n            <span class="k-sprite d-new"></span>\n            <span data-i18n="settings:groups.create"></span>\n        </a>\n    </li>\n</ul>'}),define("text!templates/settings/users.grid.toolbar.html",[],function(){return'<div class="k-header k-grid-toolbar">\n    <a class="k-button" data-bind="click: create">\n        <span class="k-icon k-i-plus"></span>\n        #=$.t("settings:users.create")#\n    </a>\n\n    <span class="editBtnContainer">\n        <a href="javascript:void(0)" class="k-button k-button-icontext k-grid-custom" data-bind="click: edit, enabled: isSelected">\n            <span class="k-icon k-i-edit"></span>\n            #=$.t("settings:users.edit")#\n        </a>\n    </span>\n    <span class="updateCancelContainer">\n        <a role="button" class="k-button k-button-icontext k-grid-update" data-bind="click: update" href="javascript:void(0)">\n            <span class="k-icon k-i-check"></span>\n            #=$.t("settings:users.update")#\n        </a>\n        <a role="button" class="k-button k-button-icontext k-grid-cancel" data-bind="click: cancelUpdate" href="javascript:void(0)">\n            <span class="k-icon k-i-cancel"></span>\n            #=$.t("settings:users.cancel")#\n        </a>\n    </span>\n    \x3c!--a class="k-button" data-bind="click: changePassword, enabled: isSelected">\n        <span class="k-icon k-i-lock"></span>\n        #=$.t("settings:users.changePassword")#\n    </a--\x3e\n    <a class="k-button" data-bind="click: delete, enabled: isSelected">\n        <span class="k-icon k-i-close"></span>\n        #=$.t("settings:users.delete")#\n    </a>\n    <a class="k-button" data-bind="click: sendCreationMail, enabled: isSelected">\n        <span class="k-icon k-i-email-box"></span>\n        #=$.t("settings:users.sendCreationMail")#\n    </a>\n    <a class="k-button" data-bind="click: sendResetMail, enabled: isSelected">\n        <span class="k-icon k-i-email"></span>\n        #=$.t("settings:users.sendResetMail")#\n    </a>\n</div>'}),define("text!templates/settings/users.add.window.html",[],function(){return'<div class="addUserWindow">\n\t<table>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="userName" class="k-label" data-i18n="settings:users.name"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="userName" type="text" class="k-text"  data-bind="value: name" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="fullName" class="k-label" data-i18n="settings:users.fullName"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="fullName" type="text" class="k-text"  data-bind="value: fullName" />\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="email" class="k-label" data-i18n="settings:users.email"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="email" type="text" class="k-text" data-bind="value: email" />\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n\t<div class="formWindowButtons">\n\t\t<button class="k-button k-primary" data-i18n="settings:users.add" data-bind="click: addUserClick"></button>\n\t\t<button class="k-button" data-i18n="settings:users.cancel" data-bind="click: cancelClick"></button>\n\t</div>\n</div>'}),define("user/ui/UserAdd",["require","exports","text!templates/settings/users.add.window.html","i18n","core/data/DObservableBuilder","core/web/WebHttp","core/util/Logger"],function(t,e,d,l,s,u,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AddUserWindow=void 0;var n=function(){function t(){}return t.open=function(o){return new Promise(function(t,e){var n=kendo.template(d),i=$("<div>").addClass("formWindow").appendTo($(document.body));i.html(n),l.I18N.localize(i);var a=!1,r=i.kendoWindow({modal:!0,width:450,minHeight:150,visible:!1}).data("kendoWindow");r.bind("close",function(){return kendo.destroy(i),i.remove(),t(a),!0}),s.DObservableBuilder.of({name:"",fullName:"",email:""}).add("addUserClick",function(t){return a=!0,console.log(t.toJson()),r.close(),u.WebHttp.postJson("/user.json",{user:JSON.stringify(t.toJson())}).then(function(){o()}).catch(c.Logger.error),!0}).add("cancelClick",function(t){return r.close()}).build().bind(i),r.title(l.I18N.t("settings:users.addTitle")).open().center()})},t}();e.AddUserWindow=n}),define("user/ui/UsersGrid",["require","exports","site","kendo","core/ui/grid/GridUtils","core/util/ObservableUtils","i18n","text!templates/settings/users.grid.toolbar.html","core/data/DObservableBuilder","user/repository/UserRepository","./UserGroupUI","core/api/UserType","./UserAdd","core/ui/Confirmation","core/event/SiteEvents","core/util/PromiseUtils"],function(t,e,n,a,r,o,d,l,s,u,c,p,m,f,b,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UsersGrid=void 0;function y(){}function h(e,n,i){return s.DObservableBuilder.of({}).add("isSelected",function(){return 0<e.length}).add("create",function(){m.AddUserWindow.open(function(){i.dataSource.read()})}).add("edit",function(){var t=$(i.select()[0]);t&&(n.editMode=!0,i.editRow(t),$(".editBtnContainer, .updateCancelContainer").toggle())}).add("update",function(){i.dataSource.sync(),$(".editBtnContainer, .updateCancelContainer").toggle(),n.editMode=!1,n.previousSelected=null}).add("cancelUpdate",function(){i.cancelChanges(),$(".editBtnContainer, .updateCancelContainer").toggle(),n.editMode=!1,n.previousSelected=null}).add("delete",function(){0<e.length&&f.Confirmation.confirmDelete(d.I18N.t("settings:users.confirmDelete")).then(function(t){if(t)return u.UserRepository.delete(e[0]).then(function(){i.dataSource.read()})}).catch(y)}).add("sendCreationMail",function(){0<e.length&&v.PromiseUtils.consume(u.UserRepository.sendCreationMail(e[0]).then(function(){return b.SiteEvents.successEvent().fire({message:d.I18N.t("settings:users.mailSent")})}))}).add("sendResetMail",function(){0<e.length&&v.PromiseUtils.consume(u.UserRepository.sendResetMail(e[0]).then(function(){return b.SiteEvents.successEvent().fire({message:d.I18N.t("settings:users.mailSent")})}))}).build().kendo()}var i=function(){function t(){}return t.init=function(t){return function(n){a.destroy(n),n.empty();var t=a.template(l),i={previousSelected:null,editMode:!1},e={dataSource:{transport:{read:function(t){u.UserRepository.list().then(t.success).catch(t.error)},update:function(t){u.UserRepository.update(t.data).then(t.success).catch(t.error)}},schema:{model:{id:"user",fields:{user:{type:"number",editable:!1},userName:{type:"string",editable:!1},email:{type:"string",editable:!0},fullName:{type:"string",editable:!0},type:{type:"number",editable:!1},active:{type:"boolean",editable:!0},group:{nullable:!0},groupName:function(){return o.ObservableUtils.get(this,"group.name")||""}},sort:{field:"priority",dir:"asc"}}}},scrollable:!0,editable:"inline",pageable:r.GridUtils.defaultPageable(),height:600,columns:[{field:"userName",title:d.I18N.t("settings:users.name"),width:"180px"},{field:"email",title:d.I18N.t("settings:users.email"),width:"270px"},{field:"fullName",title:d.I18N.t("settings:users.fullName"),width:"200px"},c.UserGroupUI.column({field:"group",title:d.I18N.t("settings:users.group"),width:"180px"}),{field:"active",title:d.I18N.t("settings:users.active"),width:"110px"},p.UserType.column({field:"type",title:d.I18N.t("settings:users.type"),width:"175px"})],change:function(t){t.preventDefault();var e=r.GridUtils.getSelectedRows(t.sender);0<e.length?i.previousSelected?i.previousSelected.user!==e[0].user&&(i.editMode?(t.sender.select().each(function(t,e){$(e).removeClass("k-state-selected")}),b.SiteEvents.warning({message:d.I18N.t("settings:users.warning.saveOrCancel"),information:d.I18N.t("settings:users.warning.warning")})):(a.bind(n,h(e,i,t.sender)),i.previousSelected=e[0])):(a.bind(n,h(e,i,t.sender)),i.previousSelected=e[0]):(i.previousSelected&&a.bind(n,h(e,i,t.sender)),i.previousSelected=null)},dataBound:function(t){var e=r.GridUtils.getSelectedRows(t.sender);a.bind(n,h(e,i,t.sender))},toolbar:function(){return t}};r.GridUtils.withDefaults(e),n.kendoGrid(e)}(t.find("#usersGrid"))},t}();e.UsersGrid=i}),function(){var R,O;O="#usersRoot",R="#usersGroupGrid",define("views/settings/users",["jquery","i18n","kendo","site","ui","views/layout","core/util/ObservableUtils","user/ui/UserGroupUI","core/api/UserType","core/ui/grid/column/ColumnStyle","core/ui/grid/column/ColumnUtils","text!templates/settings/users.html","text!templates/settings/users.group.grid.toolbar.html","user/ui/UsersGrid"],function(o,i,a,n,t,e,r,d,l,s,u,c,p,m){var f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x;return r.ObservableUtils,d.UserGroupUI,l.UserType,v=t.grid,f=s.ColumnStyle,b=u.ColumnUtils,C=function(t,e){var n,i,a,r;if(e&&e.data){if(n=e.data,"create"!==e.type)return"update"===e.type?t.pushUpdate(n):"destroy"===e.type?t.pushDestroy(n):void 0;if(i=n.id,null!=(a=o(R).data("kendoGrid"))&&null!=(r=a.dataSource)?r.get(i):void 0)return;return t.pushCreate(n)}},I=function(t,e){return setTimeout(C.bind(null,t,e),50),null},w=function(t,e,n){if(n)return _.isArray(n)?_.each(n,I.bind(null,t)):I(t,n),null},T=function(t){return o("body").on("domosws:user:group",w.bind(null,t)),!0},k=function(t){return o.getJSON("user/group/list.json").done(t.success).fail(t.error),null},y=function(t){return n.router.navigate(n.map.getUserGroupEdit()),null},D=function(){var t,e;return t=o(R).find("#usersGroupGridToolbarMenu"),a.bind(t,{}),t.localize(),null!=(e=t.data("kendoMenu"))&&e.bind("select",y),null},h=function(t){var e;return(e=null!=t?t.id:void 0)?n.router.navigate(n.map.getUserGroupEdit(e)):n.router.navigate(n.map.notfound)},g=function(){var t,e,n;return n=a.template(p),e=n({}),t={dataSource:{transport:{read:k,push:T},schema:{model:{id:"id",fields:{id:{type:"number"},name:{type:"string"}}}},sort:{field:"name",dir:"asc"}},editable:!1,columns:[b.addStyle({command:[v.customCommand(i.t("settings:groups.view"),h)],title:" ",width:"80px"},f.CENTER_ALIGNED),{field:"name",title:i.t("settings:groups.name"),width:"400px"}],pageable:v.defaultPageable(),toolbar:function(){return e},scrollable:!0,height:600},v.withDefaults(t),o(R).kendoGrid(t),D(),null},E=function(){var t,e;return null!=(t=o("#usersGrid").data("kendoGrid"))&&null!=(e=t.dataSource)?e.read():void 0},x=function(){return E()},N=function(){return o(O).localize(),g(),m.UsersGrid.init(o(O)),null},S=function(){var t,e,n;return e={},n=a.template(c)(e),t={init:N,show:x},new a.View(n,t)},{init:function(){return e.register("users",n.map.users,S())}}})}.call(this),define("core/api/UserRight",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserRight=void 0;var r,o;(r=e.UserRight||(e.UserRight={}))[r.READ=1]="READ",r[r.READ_WRITE=2]="READ_WRITE",r[r.READ_WRITE_DELETE=3]="READ_WRITE_DELETE",(o=e.UserRight||(e.UserRight={})).getName=a.EnumUtils.createNameFn("settings:UserRight",o),o.widget=i.EnumWidgetUtils.createDropList("DomosUserRight",o,!1),o.column=n.EnumColumnUtils.createFactory(o)}),define("core/api/UserRightCategory",["require","exports","core/ui/grid/column/EnumColumnUtils","core/util/EnumUtils"],function(t,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserRightCategory=void 0;var a,r;(a=e.UserRightCategory||(e.UserRightCategory={}))[a.OBJECT=1]="OBJECT",a[a.HISTORY=2]="HISTORY",a[a.METRIC=3]="METRIC",a[a.REPORTING_ACTIVITY=4]="REPORTING_ACTIVITY",a[a.REPORTING_INSTANCE=5]="REPORTING_INSTANCE",a[a.RISK_GROUP=7]="RISK_GROUP",a[a.RISK_INDICATOR=8]="RISK_INDICATOR",a[a.RISK_RULE=9]="RISK_RULE",a[a.RISK_PROFILE=10]="RISK_PROFILE",a[a.RISK_DASHBOARD=11]="RISK_DASHBOARD",a[a.DOCUMENT=12]="DOCUMENT",a[a.DOCUMENT_LIST=13]="DOCUMENT_LIST",a[a.FLOW_DOCUMENT=14]="FLOW_DOCUMENT",a[a.REPORTING_DOCUMENT=15]="REPORTING_DOCUMENT",a[a.OBJECT_DOCUMENT=16]="OBJECT_DOCUMENT",a[a.STRESS_PROFILE=17]="STRESS_PROFILE",a[a.INDEX=18]="INDEX",a[a.INTEREST_RATE=19]="INTEREST_RATE",a[a.DASHBOARD=20]="DASHBOARD",a[a.DASHBOARD_COMPONENT=21]="DASHBOARD_COMPONENT",a[a.DASHBOARD_PERIMETER=22]="DASHBOARD_PERIMETER",a[a.COMPLIANCE_GROUP=23]="COMPLIANCE_GROUP",a[a.COMPLIANCE_INDICATOR=24]="COMPLIANCE_INDICATOR",a[a.COMPLIANCE_RULE=25]="COMPLIANCE_RULE",a[a.COMPLIANCE_PROFILE=26]="COMPLIANCE_PROFILE",a[a.COMPLIANCE_TAG=27]="COMPLIANCE_TAG",a[a.COMPLIANCE_FORM=28]="COMPLIANCE_FORM",a[a.RISK_COMMENT=29]="RISK_COMMENT",a[a.STRATEGY_MAPPING=30]="STRATEGY_MAPPING",a[a.STRATEGY_FILE=31]="STRATEGY_FILE",a[a.STRATEGY_ACTIVITY=32]="STRATEGY_ACTIVITY",a[a.STRATEGY_DATA=33]="STRATEGY_DATA",a[a.COMPLIANCE_FORM_CHECK_ITEM=34]="COMPLIANCE_FORM_CHECK_ITEM",a[a.BANK_ACCOUNT=35]="BANK_ACCOUNT",a[a.INVESTMENT_CHECK_ITEM=36]="INVESTMENT_CHECK_ITEM",a[a.JS_SCRIPT=37]="JS_SCRIPT",a[a.ACCOUNTING=38]="ACCOUNTING",a[a.TASK_FORM=39]="TASK_FORM",a[a.PORTFOLIO_COLUMN=40]="PORTFOLIO_COLUMN",a[a.DOCUMENT_REVIEW_TASK=41]="DOCUMENT_REVIEW_TASK",a[a.CHECK_ITEM_DATA=42]="CHECK_ITEM_DATA",a[a.TRACKED_CHECK_DATA=43]="TRACKED_CHECK_DATA",a[a.DATA_CHECK_ITEM=44]="DATA_CHECK_ITEM",a[a.AML_REQUEST=45]="AML_REQUEST",a[a.AML_RESPONSE=46]="AML_RESPONSE",a[a.EMAIL=47]="EMAIL",a[a.EMAIL_CAMPAIGN=48]="EMAIL_CAMPAIGN",a[a.PORTAL_ADMIN=49]="PORTAL_ADMIN",a[a.USER_ADMIN=50]="USER_ADMIN",(r=e.UserRightCategory||(e.UserRightCategory={})).getName=i.EnumUtils.createNameFn("settings:UserRightCategory",r),r.column=n.EnumColumnUtils.createFactory(r)}),define("text!templates/settings/edit/user.group.html",[],function(){return'<div id="userGroupRoot">\n    <h1 data-i18n="settings:groups.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="settings:groups.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="userGroupActions"></div>\n\n    <table class="userGroupTable">\n        <tr>\n            <td>\n                <label for="name" data-i18n="settings:groups.name"></label>\n            </td>\n            <td>\n                <input id="name" name="name" type="text" class="k-textbox" data-bind="value: name">\n            </td>\n        </tr>\n    </table>\n\n    <h3 data-i18n="settings:groups.rights"></h3>\n\n    <div id="userGroupRightGrid" class="floatingGrid_700_px"></div>\n    <div class="clearer"></div>\n\n    <p></p>\n\n    <h2 data-i18n="settings:groups.roles"></h2>\n\n    <div id="userGroupRoleGrid" class="floatingGrid_700_px"></div>\n    <div class="clearer"></div>\n\n    <p></p>\n\n</div>'}),function(){var v=[].slice;define("views/settings/group/user.group",["jquery","i18n","ui","core/api/UserRight","core/api/UserRightCategory","core/ui/grid/column/ColumnStyle","core/ui/grid/column/ColumnUtils","text!templates/settings/edit/user.group.html"],function(i,a,t,e,n,r,o,d){var l,s,u,c,p,m,f,b;return p=e.UserRight,m=n.UserRightCategory,u=t.grid,c=u.transports,l=r.ColumnStyle,s=o.ColumnUtils,f=function(t){var e,n;return e=t.model,n={dataSource:{transport:c.createLocal({data:e.get("rights"),id:"category"}),schema:{model:{id:"category",fields:{category:{type:"number",editable:!1},right:{type:"number"}}}}},columns:[s.addStyle({command:["edit"],title:" ",width:"225px"},l.CENTER_ALIGNED),m.column({field:"category",title:a.t("settings:groups.category"),width:"255px"}),p.column({field:"right",title:a.t("settings:groups.right"),width:"203px"})],pageable:u.defaultPageable(),height:800,scrollable:!0},u.withDefaults(n),i("#userGroupRightGrid").kendoGrid(n)},b=function(t){var e,n;return e=t.model,n={dataSource:{transport:c.createLocal({data:e.get("roles")}),schema:{model:{id:"id",fields:{role:{type:"string"}}}}},columns:[s.addStyle({command:["edit","destroy"],title:" ",width:"225px"},l.CENTER_ALIGNED),{field:"role",title:a.t("settings:groups.role"),width:"458px"}],toolbar:["create"],pageable:u.defaultPageable(),height:500,scrollable:!0},u.withDefaults(n),i("#userGroupRoleGrid").kendoGrid(n)},{getTemplates:function(){return{view:d}},createRawModel:function(){return{id:0,name:"",rights:[],roles:[]}},updateModel:function(t,e){var n,i;return t.set("id",e.id),t.set("name",e.name),(n=t.get("rights")).splice.apply(n,[0,n.length].concat(v.call(e.rights))),(i=t.get("roles")).splice.apply(i,[0,i.length].concat(v.call(e.roles))),null},init:function(t){return f(t),b(t)}}})}.call(this),function(){define("views/settings/group/edit.user.group",["site","views/edit/edit","views/settings/group/user.group"],function(t,e,n){var i,a,r,o,d,l,s,u,c;return r=t.router,a=t.map,l=function(t){return t.create(n)},c=function(t){return null==o&&(o=l(t)),o},d=function(){var t;return t={key:"userGroupEdit",rootId:"userGroupRoot",actionsId:"userGroupActions",url:"user/group.json",getView:c},e.create(t)},i=o=null,u=function(){return null==i&&(i=d()),i},s=function(t){return u().display(t)},{init:function(){return r.addRoute(a.userGroupEdit,s)}}})}.call(this),define("text!templates/settings/jobs.html",[],function(){return'<div id="jobsRoot">\n    <h2 data-i18n="settings:jobs.title"></h2>\n\n    <div id="jobsGrid" class="floatingGrid_600_px"></div>\n    <div class="clearer"></div>\n\n    <p></p>\n    <div id="JobsDlg"></div>\n\n    <div id="JobsDlgDownload"></div>\n\n    <a id="dashboardsHiddenDownloadLink" class="k-button hidden" download>\n        hidden download link\n    </a>\n\n</div>'}),define("text!templates/settings/jobs.grid.toolbar.html",[],function(){return'<ul id="jobsGridToolbarMenu" class="gridToolbarMenu d-sprite-wrapper" data-role="menu">\n    <li id="jobCancelBtn"">\n        <a href="javascript:void(0)" class="k-link" data-key="cancel">\n            <span data-i18n="settings:jobs.cancel"></span>\n        </a>\n    </li>\n    <li id="jobDownloadBtn"">\n        <a href="javascript:void(0)" class="k-link" data-key="download">\n            <span data-i18n="settings:jobs.download"></span>\n        </a>\n    </li>\n</ul>'}),function(){var S;S="#jobsGrid",window.coloredStatus=function(t){var e,n;return n=-1!==["ERROR","CANCELED","UNKNOWN"].indexOf(t),e=-1!==["READY"].indexOf(t),n?"<b style='color:red'>"+t+"</b>":e?"<b style='color:green'>"+t+"</b>":t},define("views/settings/jobs",["jquery","i18n","kendo","site","ui","views/layout","core/util/ObservableUtils","text!templates/settings/jobs.html","text!templates/settings/jobs.grid.toolbar.html"],function(r,i,a,t,e,n,o,d,l){var s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D;return o.ObservableUtils,s=e.grid,D=null,E=function(){},C=function(t){return"jobCancelBtn"===r(t.item).attr("id")?p():"jobDownloadBtn"===r(t.item).attr("id")?b():void 0},p=function(){var t,e;return t=r(S).data("kendoGrid"),e=Object.keys(t._selectedIds)[0],console.log("sending kill to job id: ",e)},b=function(){var t,e,n,i,a;return e=r(S).data("kendoGrid"),n=Object.keys(e._selectedIds)[0],console.log("download job id: ",n),t=r("#dashboardsHiddenDownloadLink"),a="board/engine/export/download?uuid="+encodeURIComponent(n),(i=t.attr("href",a)[0])&&i.click(),null},u=function(){return r("#JobsDlg").kendoDialog({width:"450px",title:i.t("settings:jobs.titleConfirmKill"),closable:!1,modal:!1,content:"<p>"+i.t("settings:jobs.confirmKill")+"<p>",actions:[{text:i.t("settings:jobs.buttonKill"),action:p},{text:i.t("settings:jobs.buttonNo"),primary:!0}],close:E}),r("#JobsDlgDownload").kendoDialog({width:"450px",title:i.t("settings:jobs.titleConfirmDownload"),closable:!1,modal:!1,content:"<p>"+i.t("settings:jobs.confirmDownload")+"<p>",actions:[{text:i.t("settings:jobs.buttonDownload"),action:b},{text:i.t("settings:jobs.buttonNo"),primary:!0}],close:E}),r("#JobsDlgDownload").data("kendoDialog").close(),r("#JobsDlg").data("kendoDialog").close()},h=function(t,e){var n;return(n=r(S).data("kendoGrid"))?(n.dataSource&&n.dataSource.read(),n.refresh()):null},y=function(t,e){return setTimeout(h.bind(null,t,e),50),null},v=function(t,e,n){return y(t),null},f=function(t){return r("body").on("domosws:jobs:notify",v.bind(null,t)),!0},T=function(t,e){return console.log(e),t(e.jobs)},g=function(t){return r.getJSON("jobs/list.json").done(T.bind(null,t.success)).fail(t.error),null},function(t){var e,n,i;return n=r(S).data("kendoGrid"),i=Object.keys(n._selectedIds)[0],console.log("id:",i),e=n.dataSource.get(i),console.log("data: ",e),r("#JobsDlg").data("kendoDialog").open(),null},function(t){var e,n,i;return n=r(S).data("kendoGrid"),i=Object.keys(n._selectedIds)[0],console.log("id:",i),e=n.dataSource.get(i),console.log("data: ",e),r("#JobsDlgDownload").data("kendoDialog").open(),null},I=function(){var t;return t=r(S).find("#jobsGridToolbarMenu"),a.bind(t,{}),t.localize(),(D=t.data("kendoMenu")).bind("select",C),D.enable("#jobCancelBtn",!1),D.enable("#jobDownloadBtn",!1),null},m=function(t){var e,n,i;return n=t.sender,console.log("selected:",n._selectedIds),i=Object.keys(n._selectedIds)[0],console.log("id:",i),e=n.dataSource.get(i),console.log("data:",e),-1!==["ENQUEUE","PROCESSING"].indexOf(e.state)?D.enable("#jobCancelBtn",!0):D.enable("#jobCancelBtn",!1),D.enable("#jobDownloadBtn","READY"===e.state)},c=function(){var t,e,n;return n=a.template(l),e=n({}),t={dataSource:{transport:{read:g,push:f},schema:{model:{id:"buildId",fields:{buildId:{type:"string"},state:{type:"string"},since:{type:"date"}}}},sort:{field:"since",dir:"desc"},pageSize:10},editable:!1,change:m,columns:[{field:"name",title:i.t("settings:jobs.name"),width:"100px"},{field:"state",title:i.t("settings:jobs.status"),template:"#=coloredStatus(state)#",width:"150px"},{field:"since",format:"{0:s}",title:i.t("settings:jobs.since"),width:"150px"}],pageable:s.defaultPageable(),toolbar:function(){return e},scrollable:!0,height:500},s.withDefaults(t),r(S).kendoGrid(t),I(),null},function(){return __refreshJobsGrid()},k=function(){return r("#jobsRoot").localize(),c(),u()},w=function(){var t,e,n;return e={},n=a.template(d)(e),t={init:k},new a.View(n,t)},{init:function(){return n.register("jobs",t.map.jobs,w())}}})}.call(this),function(){define("views/settings/module",["views/settings/change.password","views/settings/users","views/settings/group/edit.user.group","views/settings/jobs"],function(t,e,n,i){return{init:function(){return t.init(),e.init(),n.init(),i.init(),null}}})}.call(this),define("stress/views/profile/StressProfileUnitGrid",["require","exports","kendo","core/ui/grid/GridUtils","core/ui/grid/LocalTransport","i18n","core/ui/PercentUI","core/util/Logger","object/query/AdvancedAssetQueryBuilder"],function(t,e,o,d,l,s,u,c,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StressProfileUnitGrid=void 0;var n=function(){function t(){}return t.init=function(t,e,n){o.destroy(t),t.empty();var a=p.AdvancedAssetQueryBuilder.init(e),i={dataSource:{transport:l.LocalTransport.bind(n.get("units")),schema:{model:{id:"id",fields:{priority:{type:"number"},identifier:{type:"string",nullable:!1,defaultValue:""},values:{type:"number",nullable:!1,defaultValue:0},filter:{type:"string",defaultValue:""}}}},sort:{field:"priority",dir:"asc"}},columns:[{command:["edit","destroy"]},{field:"identifier",title:s.I18N.t("stress:profiles.fields.identifier")},u.PercentUI.column({field:"value",title:s.I18N.t("stress:profiles.fields.value")})],toolbar:[{name:"create"}],scrollable:!0,pageable:d.GridUtils.defaultPageable()};d.GridUtils.withDefaults(i);var r=t.kendoGrid(i).data("kendoGrid");r.bind("change",function(){var t=r.select();if(t.length<=0)a.hide();else{var e=r.dataItem(t);if(e){var n=e.get("filter"),i=null;try{i=JSON.parse(n)}catch(t){c.Logger.error(t)}a.setRules(i)}else a.hide()}}),r.bind("remove",function(){return a.hide()}),a.event.register(function(){var t=r.select();if(!(t.length<=0)){var e=r.dataItem(t);if(e){var n=a.getRules();n?e.set("filter",JSON.stringify(n)):e.set("filter",""),r.dataSource.sync()}}}),n.bind("change",function(t){if("isModified"===t.field&&!!!n.get("isModified"))try{a.hide()}catch(t){c.Logger.error(t)}})},t}();e.StressProfileUnitGrid=n}),define("stress/data/StressUnitHelperTable",["require","exports","i18n"],function(t,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StressUnitHelperTable=void 0;var l,n,s="stress:profiles.help",u=s+".identifiers",c=s+".explanations";(n=l||(l={})).HEADER="k-header",n.GRID_HEADER="k-grid-header",n.CONTENT="k-content",n.ALT="k-alt";var p={"text-align":"center"},m={"text-align":"left"};var i=function(){function t(){}return t.init=function(t){var e,n=((e=new Map).set(d.I18N.t(u+".currency"),d.I18N.t(c+".currency")),e.set(d.I18N.t(u+".quantity"),d.I18N.t(c+".quantity")),e.set(d.I18N.t(u+".last"),d.I18N.t(c+".last")),e.set(d.I18N.t(u+".navPerShare"),d.I18N.t(c+".navPerShare")),e.set(d.I18N.t(u+".dividend"),d.I18N.t(c+".dividend")),e.set(d.I18N.t(u+".property"),d.I18N.t(c+".property")),{headerIdentifier:d.I18N.t(s+".headerIdentifier"),headerExplanation:d.I18N.t(s+".headerExplanation"),explanations:e}),i=$("<table>").appendTo(t),a=$("<thead>").addClass(l.GRID_HEADER).appendTo(i),r=$("<tr>").appendTo(a);$("<th>").css(p).addClass(l.HEADER).text(""+n.headerIdentifier).appendTo(r),$("<th>").css(p).addClass(l.HEADER).text(""+n.headerExplanation).appendTo(r);var o=0;n.explanations.forEach(function(t,e){var n=$("<tr>").addClass(l.CONTENT);o%2!=0&&n.addClass(l.ALT),n.appendTo(i),$("<td>").css(m).text(e).appendTo(n),$("<td>").css(m).text(t).appendTo(n),o++})},t}();e.StressUnitHelperTable=i}),define("text!templates/stress/edit/profile.html",[],function(){return'<div id="stressProfileRoot">\n    <h1 data-i18n="stress:profiles.edit.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="stress:profiles.edit.edit" data-bind="invisible: isNew"></h1>\n\n    <div id="stressProfileActions"></div>\n\n    <h2 data-i18n="stress:profiles.fields.mainInformation"></h2>\n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="name" data-i18n="stress:profiles.fields.name"></label>\n            </td>\n            <td>\n                <input id="name" name="Name" class="k-textbox" type="text" data-bind="value: name" required />\n            </td>\n            <td></td>\n            <td></td>\n        </tr>\n        <tr>\n            <td>\n                <label for="description" data-i18n="stress:profiles.fields.description"></label>\n            </td>\n            <td colspan="3">\n                <textarea id="description" name="description" class="k-textbox"\n                    data-bind="value: description"></textarea>\n            </td>\n        </tr>\n    </table>\n\n    <div>\n        <h2 data-i18n="stress:profiles.fields.units"></h2>\n        <div class="stressTopPane">\n            <div id="stressProfileUnitGrid" class="floatingGrid"></div>\n        </div>\n        <h4 data-i18n="stress:profiles.help.title"></h4>\n         <div class="stressTopPane">\n            <div id="tableHelper" class="k-grid k-widget zoom0_8p"></div>\n        </div>\n    </div>\n\n    <div class="clearer">\n    </div>\n    <h3 data-i18n="data:fields.filter"></h3>\n\n    <div id="filterBuilder" data-bind="visible: isRowSelected"></div>\n\n    <h2 data-i18n="stress:profiles.fields.rates"></h2>\n\n    <div id="stressProfileRateGrid" class="floatingGrid"></div>\n    <div class="clearer"></div>\n\n\n</div>'}),function(){var g=[].slice;define("views/stress/profile/profile",["jquery","i18n","ui","core/util/ObservableUtils","rate/ui/InterestRateUI","core/ui/PercentUI","stress/views/profile/StressProfileUnitGrid","stress/data/StressUnitHelperTable","text!templates/stress/edit/profile.html"],function(i,a,t,e,n,r,o,d,l){var s,u,c,p,m,f,b,v,y,h;return m=r.PercentUI,p=e.ObservableUtils,s=n.InterestRateUI,u=t.grid,c=u.transports,f=o.StressProfileUnitGrid,b=d.StressUnitHelperTable,h=function(t){return f.init(i("#stressProfileUnitGrid"),i("#filterBuilder"),t.model),null},y=function(){return b.init(i("#tableHelper")),null},v=function(t){var e,n;return e=t.model,n={dataSource:{transport:c.createLocal({data:e.get("rates")}),schema:{model:{id:"id",fields:{interestRate:{nullable:!0,validation:{required:!0}},percent:{type:"number",nullable:!1,defaultValue:0}},interestRateName:function(){return p.get(this,"interestRate.name")}}},sort:{field:"priority",dir:"asc"}},columns:[{command:["edit","destroy"],title:" "},s.column({field:"interestRate",title:a.t("stress:profiles.fields.interestRate")}),m.column({field:"percent",title:a.t("stress:profiles.fields.percent")})],toolbar:["create"],scrollable:!1},u.withDefaults(n),i("#stressProfileRateGrid").kendoGrid(n),null},{getTemplates:function(){return{view:l}},createRawModel:function(){return{id:0,name:"",description:"",units:[{id:0,identifier:"",value:0,filter:""}],rates:[]}},updateModel:function(t,e){var n,i;return t.set("id",e.id),t.set("name",e.name),t.set("description",e.description),i=t.get("units"),e.units,i.splice.apply(i,[0,i.length].concat(g.call(e.units))),(n=t.get("rates")).splice.apply(n,[0,n.length].concat(g.call(e.rates))),null},init:function(t){return v(t),null},viewShow:function(t){return h(t),y(),null}}})}.call(this),function(){define("views/stress/profile/edit.profile",["site","views/edit/edit","core/data/SiteCategories","views/stress/profile/profile"],function(t,e,n,i){var a,r,o,d,l,s,u,c,p,m,f;return o=t.router,r=t.map,d=n.SiteCategories,u=function(t){return t.create(i)},m=function(t){return null==l&&(l=u(t)),l},f=function(t){return i.viewShow(t),null},s=function(){var t;return t={siteCategory:d.risk,key:"stressProfileEdit",rootId:"stressProfileRoot",actionsId:"stressProfileActions",url:"stress/profile.json",getView:m,viewShow:f},e.create(t)},a=l=null,p=function(){return null==a&&(a=s()),a},c=function(t){return p().display(t)},{init:function(){return o.addRoute(r.stressProfileEdit,c)}}})}.call(this),function(){define("views/stress/module",["views/stress/profile/edit.profile"],function(t){return{init:function(){return t.init(),null}}})}.call(this),define("core/api/IndexFrequency",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IndexFrequency=void 0;var r,o;(r=e.IndexFrequency||(e.IndexFrequency={}))[r.DAILY=1]="DAILY",r[r.MONTHLY=2]="MONTHLY",r[r.QUARTERLY=3]="QUARTERLY",(o=e.IndexFrequency||(e.IndexFrequency={})).getDefault=function(){return o.DAILY},o.getName=a.EnumUtils.createNameFn("data:IndexFrequency",o),o.widget=i.EnumWidgetUtils.createDropList("DomosIndexFrequency",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("text!templates/index/indices.html",[],function(){return'<div id="indicesRoot">\n    <h2 data-i18n="data:index.name_plural"></h2>\n    <p></p>\n    <div id="indicesGrid" class="floatingGrid"></div>\n    <div class="clearer"></div>\n</div>'}),function(){define("views/index/indices",["jquery","kendo","i18n","site","ui","views/layout","core/api/IndexFrequency","text!templates/index/indices.html"],function(r,o,d,n,t,e,i,a){var l,s,u,c,p,m,f,b;return l=i.IndexFrequency,u=n.map,s=t.grid,"<ul id='indexToolbar' class='gridToolbarMenu d-sprite-wrapper' data-role='menu'> <li> <a href='javascript:void(0)' class='k-link' data-key='create'> <span class='k-sprite d-new'></span> <span data-i18n='data:index.actions.create'></span> </a> </li> </ul>",b=function(t){var e;return(e=null!=t?t.id:void 0)?n.router.navigate(n.map.getIndexEdit(e)):n.router.navigate(n.map.notfound),null},f=function(){return n.router.navigate(n.map.getIndexEdit())},p=function(){var t,e,n,i,a;return t=r("#indicesGrid"),o.destroy(t),t.empty(),a=o.template("<ul id='indexToolbar' class='gridToolbarMenu d-sprite-wrapper' data-role='menu'> <li> <a href='javascript:void(0)' class='k-link' data-key='create'> <span class='k-sprite d-new'></span> <span data-i18n='data:index.actions.create'></span> </a> </li> </ul>"),i=a({}),e={dataSource:{transport:{read:{url:"index/list.json",dataType:"json"}}},columns:[{command:[s.customCommand(d.t("data:index.actions.view"),b)],title:" "},{field:"stringId",title:d.t("data:index.fields.stringId")},{field:"name",title:d.t("data:index.fields.name")},l.column({field:"frequency",title:d.t("data:index.fields.frequency")})],editable:!1,toolbar:function(){return i},scrollable:!1},s.withDefaults(e),t.kendoGrid(e),n=t.find("#indexToolbar"),o.bind(n,{}),n.localize(),n.data("kendoMenu").bind("select",f),null},m=function(){return r("#indicesRoot").localize(),p()},c=function(){var t,e;return e=o.template(a)({}),t={init:m},new o.View(e,t)},{init:function(){var t;return t=c(),e.register("indices",u.indices,t)}}})}.call(this),define("core/ui/YearMonthUI",["require","exports","tslib","kendo","./widget/Plugin","./grid/column/ColumnUtils"],function(t,e,i,n,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.YearMonthUI=void 0;var o,d,l="DomosYearMonth";function s(t,e){return t["kendo"+l](e)}o={name:l,start:"year",depth:"year",format:"y"},d=function(n){function t(t,e){return n.call(this,t,e)||this}return i.__extends(t,n),t}(n.ui.DatePicker),a.Plugin.plugin(d,n.ui.DatePicker,o);var u=function(){function t(){}return t.widget=function(t,e){return s(t,e)},t.column=function(t,e){return t=r.ColumnUtils.addFormat(t,"{0:y}"),r.ColumnUtils.addEditor(t,function(t){return s(t,e)})},t}();e.YearMonthUI=u}),define("text!templates/index/index.history.html",[],function(){return'<div id="indexHistoryRoot">\n    <h1 data-i18n="data:index.history.title"></h1>\n    <h2 data-bind="text: title"></h2>\n    <p></p>\n\n    <div id="indexHistoryToolbar"></div>\n\n    <div data-bind="invisible: locked" class="k-content d-content">\n        <div class="floatThird">\n            <table class="formTable">\n                <tr>\n                    <td>\n                        <label for="indexHistoryDate" data-i18n="data:index.history.date"></label>\n                    </td>\n                    <td>\n                        <input id="indexHistoryDate" data-bind="value: date" data-role="datepicker"\n                        # if (isMonth || isQuarterly) { #\n                            data-start="year" data-depth="year" data-format="MMMM yyyy"\n                        # } #\n                        />\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <label for="indexHistoryValue" data-i18n="data:index.history.value"></label>\n                    </td>\n                    <td>\n                        <input id="indexHistoryValue" data-bind="value: value" data-role="numerictextbox"/>\n                    </td>\n                </tr>\n                <tr>\n                    <td></td>\n                    <td>\n                        <button class="k-button" data-i18n="data:index.history.actions.addOrUpdate" data-bind="click: addOrUpdateClick"></button>\n                    </td>\n                </tr>\n            </table>\n        </div>\n        <div class="clearer"></div>\n    </div>\n    \n    <div id="indexHistoryGrid" class="floatingGrid"></div>\n    <div class="clearer"></div>\n</div>'}),function(){var G,q;q="indexHistory",G="#indexHistoryGrid",define("views/index/index.history",["jquery","lodash","kendo","i18n","site","ui","core/api/IndexFrequency","views/layout","views/not.found","views/loading","core/util/DateUtils","core/ui/DateUI","core/ui/YearMonthUI","core/ui/NumberUI","core/ui/YearUI","text!templates/index/index.history.html"],function(l,d,s,u,t,e,n,c,p,i,a,r,o,m,f,b){var v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j;return I=m.NumberUI,w=o.YearMonthUI,v=r.DateUI,h=n.IndexFrequency,f.YearUI,C=t.router,g=t.map,y=a.DateUtils,T=e.grid,E=function(t,e){var n,i,a,r,o,d;for(d=[],r=0,o=e.length;r<o;r++)i=e[r],n=y.toDate(i.date),a={id:y.toJson(n),date:n,value:i.value},d.push(a);return t(d)},L=function(t,e){var n;return n={index:t.get("id")},l.getJSON("index/history.json",n).done(E.bind(null,e.success.bind(e))).fail(e.error),null},j=D=function(t,e){var n,i;return i=e.data,n={type:"POST",url:"index/history.json",dataType:"json",data:{index:t.get("id"),data:s.stringify(i)}},l.ajax(n).done(e.success).fail(e.error),null},S=function(t,e){var n,i,a;return i=e.data,a={index:t.get("id"),data:s.stringify(i)},n={type:"DELETE",url:"index/history.json?"+l.param(a),dataType:"json"},l.ajax(n).done(e.success).fail(e.error),null},U=function(t){var e,n,i,a,r,o;if(i=l(G).data("kendoGrid")){for(n=null,a=0,r=(o=i.columns).length;a<r;a++)if(e=o[a],d.has(e,"command")){n=e;break}if(n)return t.get("locked")?i.hideColumn(n):i.showColumn(n),!0}},P=function(e){var t,n,i,a,r,o;return r=e.get("locked"),i=e.get("isMonth"),a=e.get("isQuarterly"),e.bind("change",function(t){return"locked"===t.field&&U(e),null}),t={field:"date",title:u.t("data:index.history.date")},t=i?w.column(t):a?{field:"date",title:u.t("data:index.history.date"),editable:function(){return!1},template:function(t){var a,e;return(a=y.toDate(t.date))&&(e=function(){var t,e,n,i;switch(!1){case!(0<=(t=a.getMonth())&&t<=2):return"Q1";case!(3<=(e=a.getMonth())&&e<=5):return"Q2";case!(6<=(n=a.getMonth())&&n<=8):return"Q3";case!(9<=(i=a.getMonth())&&i<=11):return"Q4"}}()+" / "+a.getFullYear()),e}}:v.column(t),o={dataSource:{transport:{read:L.bind(null,e),create:D.bind(null,e),update:j.bind(null,e),destroy:S.bind(null,e)},schema:{model:{id:"id",fields:{date:{type:"date",nullable:!1,editable:!1},value:{type:"number"}}}},sort:{field:"date",dir:"desc"}},columns:[{command:["edit","destroy"],title:" ",hidden:r},t,I.column({field:"value",title:u.t("data:index.history.value")})],scrollable:!1},T.withDefaults(o),n=l(G),s.destroy(n),n.empty(),n.kendoGrid(o),null},M=function(t){var e,n,i;return n=t.get("locked"),i={items:[{type:"buttonGroup",buttons:[{text:u.t("data:index.history.actions.lock"),icon:"lock",togglable:!0,selected:n,group:"lock",primary:!0,toggle:function(){return t.set("locked",!0)}},{text:u.t("data:index.history.actions.unlock"),icon:"unlock",togglable:!0,selected:!n,group:"lock",primary:!0,toggle:function(){return t.set("locked",!1)}}]}]},e=l("#indexHistoryToolbar"),s.destroy(e),e.empty(),e.kendoToolBar(i),null},R=function(t,e){var n,i,a,r,o,d;for(n=e.date,r=0,o=(d=t.data()).length;r<o;r++)if(a=(i=d[r]).get("date"),y.equals(a,n))return i;return null},k=function(t){var e,n,i,a,r,o,d;if(n=null!=(d=l(G).data("kendoGrid"))?d.dataSource:void 0)return(o=t.toJSON()).isQuarterly&&(r=(e=o.date).getMonth()%3,a=new Date(e.getFullYear(),e.getMonth()-r,1),o.date=a),(i=R(n,o))?i.set("value",o.value):(i={date:o.date,value:o.value},n.add(i)),n.sync(),!0},_=function(t){return l("#indexHistoryRoot").localize(),M(t),P(t)},x=function(t){var e,n,i,a,r,o,d;if(t)return e=t.frequency===h.MONTHLY,n=t.frequency===h.QUARTERLY,o=s.template(b)({isMonth:e,isQuarterly:n}),r={id:t.id,title:t.name,locked:!0,isMonth:e,isQuarterly:n,date:new Date,value:0,addOrUpdateClick:function(){return k(this)}},a={model:i=s.observable(r),init:_.bind(null,i)},d=new s.View(o,a),c.display(q,d);p.display(q,!1)},A=function(t){return x(t)},F=function(){return p.display(q,!1)},O=function(t){var e;return e={id:t},l.getJSON("index.json",e).done(A).fail(F)},N=function(t){return i.display(q,!1),O(t)},{init:function(){return C.addRoute(g.indexHistory,N)}}})}.call(this),define("text!templates/index/index.html",[],function(){return'<div id="indexEditRoot">\n    <h1 data-i18n="data:index.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="data:index.edit" data-bind="invisible: isNew"></h1>\n    \n    <div id="indexEditActions"></div>\n    \n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="stringId" data-i18n="data:index.fields.stringId"></label>\n            </td>\n            <td>\n                <input  id="stringId"\n                        class="k-textbox"\n                        type="text"\n                        data-bind="value: stringId"\n                        data-i18n="[name]data:index.fields.stringId"\n                        required/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="data:index.fields.name"></label>\n            </td>\n            <td>\n                <input  id="name"\n                        class="k-textbox"\n                        type="text"\n                        data-bind="value: name"\n                        data-i18n="[name]data:index.fields.name"\n                        required/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="frequency" data-i18n="data:index.fields.frequency"></label>\n            </td>\n            <td>\n                <input  id="frequency"\n                        data-bind="value: frequency"\n                        data-role="domosindexfrequency"/>\n            </td>\n        </tr>\n    </table>\n</div>'}),function(){define("views/index/edit/index",["jquery","i18n","core/api/IndexFrequency","text!templates/index/index.html"],function(t,e,n,i){var a;return a=n.IndexFrequency,{getTemplates:function(){return{view:i}},createRawModel:function(){return{id:0,stringId:"",name:"",frequency:a.getDefault()}},updateModel:function(t,e){return t.set("id",e.id),t.set("stringId",e.stringId),t.set("name",e.name),t.set("frequency",e.frequency),null},init:function(){return null}}})}.call(this),function(){define("views/index/edit/edit.index",["jquery","i18n","site","views/edit/edit","views/index/edit/index"],function(t,n,e,i,a){var r,o,d,l,s,u,c,p,m,f,b;return d=e.router,o=e.map,u=function(t){return t.create(a)},m=function(t){return null==l&&(l=u(t)),l},f=function(t){var e;return(e=t.model.get("id"))&&d.navigate(o.getIndexHistory(e)),null},b=function(t,e){if(t.model.get("id"))return e.push({type:"separator"}),e.push({type:"button",text:n.t("data:index.history.title"),click:f.bind(null,t)})},s=function(){var t;return t={key:"indexEdit",rootId:"indexEditRoot",actionsId:"indexEditActions",url:"index.json",getView:m,setupToolbar:b},i.create(t)},r=l=null,p=function(){return null==r&&(r=s()),r},c=function(t){return p().display(t)},{init:function(){return d.addRoute(o.indexEdit,c)}}})}.call(this),function(){define("views/index/module",["views/index/indices","views/index/index.history","views/index/edit/edit.index"],function(t,e,n){return{init:function(){return t.init(),e.init(),n.init(),null}}})}.call(this),define("core/api/TenorUnit",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TenorUnit=void 0;var r,o;(r=e.TenorUnit||(e.TenorUnit={}))[r.DAYS=1]="DAYS",r[r.WEEKS=2]="WEEKS",r[r.MONTHS=3]="MONTHS",r[r.YEARS=4]="YEARS",(o=e.TenorUnit||(e.TenorUnit={})).getName=a.EnumUtils.createNameFn("data:TenorUnit",o),o.widget=i.EnumWidgetUtils.createDropList("DomosTenorUnit",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("rate/repository/InterestRateFamilyRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InterestRateFamilyRepository=void 0;var i=function(){function t(){}return t.fetchIdentifiables=function(){return n.WebHttp.getJson("interest.rate/family/id/list.json")},t}();e.InterestRateFamilyRepository=i}),define("rate/ui/InterestRateFamilyUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","rate/repository/InterestRateFamilyRepository"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InterestRateFamilyUI=void 0;var r=function(){function t(){}return t.widget=n.IdWidgetUtils.createDropList("DomosInterestRateFamily",a.InterestRateFamilyRepository,!0),t.column=i.IdentifiableColumnUtils.createFactory(t.widget),t}();e.InterestRateFamilyUI=r}),define("text!templates/rate/rates.html",[],function(){return'<div id="ratesRoot">\n    <h2 data-i18n="data:rate.name_plural"></h2>\n    <p></p>\n    <div id="ratesGrid" class="floatingGrid"></div>\n    <div class="clearer"></div>\n</div>'}),function(){define("views/rate/rates",["jquery","kendo","i18n","site","ui","views/layout","core/api/TenorUnit","rate/ui/InterestRateFamilyUI","core/util/ObservableUtils","core/ui/IntegerUI","text!templates/rate/rates.html"],function(r,o,d,n,t,e,i,a,l,s,u){var c,p,m,f,b,v,y,h,g,T,I;return c=s.IntegerUI,b=l.ObservableUtils,v=i.TenorUnit,p=a.InterestRateFamilyUI,f=n.map,m=t.grid,"<ul id='rateToolbar' class='gridToolbarMenu d-sprite-wrapper' data-role='menu'> <li> <a href='javascript:void(0)' class='k-link' data-key='create'> <span class='k-sprite d-new'></span> <span data-i18n='data:rate.actions.create'></span> </a> </li> </ul>",I=function(t){var e;return(e=null!=t?t.id:void 0)?n.router.navigate(n.map.getRateEdit(e)):n.router.navigate(n.map.notfound),null},T=function(){return n.router.navigate(n.map.getRateEdit())},h=function(){var t,e,n,i,a;return t=r("#ratesGrid"),o.destroy(t),t.empty(),a=o.template("<ul id='rateToolbar' class='gridToolbarMenu d-sprite-wrapper' data-role='menu'> <li> <a href='javascript:void(0)' class='k-link' data-key='create'> <span class='k-sprite d-new'></span> <span data-i18n='data:rate.actions.create'></span> </a> </li> </ul>"),i=a({}),e={dataSource:{transport:{read:{url:"interest.rate/list.json",dataType:"json"}},schema:{model:{id:"id",fields:{family:{nullable:!0}},familyName:function(){return b.get(this,"family.name")}}}},columns:[{command:[m.customCommand(d.t("data:rate.actions.view"),I)],title:" "},{field:"stringId",title:d.t("data:rate.fields.stringId")},{field:"name",title:d.t("data:rate.fields.name")},p.column({field:"family",title:d.t("data:rate.fields.family")}),c.column({field:"tenorPeriod",title:d.t("data:rate.fields.tenorPeriod")}),v.column({field:"tenorUnit",title:d.t("data:rate.fields.tenorUnit")})],editable:!1,toolbar:function(){return i},scrollable:!1},m.withDefaults(e),t.kendoGrid(e),n=t.find("#rateToolbar"),o.bind(n,{}),n.localize(),n.data("kendoMenu").bind("select",T),null},g=function(){return r("#ratesRoot").localize(),h()},y=function(){var t,e;return e=o.template(u)({}),t={init:g},new o.View(e,t)},{init:function(){var t;return t=y(),e.register("rates",f.rates,t)}}})}.call(this),define("text!templates/rate/rate.history.html",[],function(){return'<div id="rateHistoryRoot">\n    <h1 data-i18n="data:rate.history.title"></h1>\n    <h2 data-bind="text: title"></h2>\n    <p></p>\n    \n    <div id="rateHistoryToolbar"></div>\n    \n    <div data-bind="invisible: locked" class="k-content d-content">\n        <div class="floatThird">\n            <table class="formTable">\n                <tr>\n                    <td>\n                        <label for="rateHistoryDate" data-i18n="data:rate.history.date"></label>\n                    </td>\n                    <td>\n                        <input id="rateHistoryDate" data-bind="value: date" data-role="datepicker"/>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <label for="rateHistoryValue" data-i18n="data:rate.history.value"></label>\n                    </td>\n                    <td>\n                        <input id="rateHistoryValue" data-bind="value: value" data-role="numerictextbox"/>\n                    </td>\n                </tr>\n                <tr>\n                    <td></td>\n                    <td>\n                        <button class="k-button" data-i18n="data:rate.history.actions.addOrUpdate" data-bind="click: addOrUpdateClick"></button>\n                    </td>\n                </tr>\n            </table>\n        </div>\n        <div class="clearer"></div>\n    </div>\n    \n    <div id="rateHistoryGrid" class="floatingGrid"></div>\n    <div class="clearer"></div>\n</div>'}),function(){var F,L;L="rateHistory",F="#rateHistoryGrid",define("views/rate/rate.history",["jquery","lodash","kendo","i18n","site","ui","views/layout","views/not.found","views/loading","core/util/DateUtils","core/ui/DateUI","core/ui/NumberUI","text!templates/rate/rate.history.html"],function(d,l,o,a,t,e,s,u,n,i,r,c,p){var m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A;return h=t.router,b=t.map,m=r.DateUI,f=i.DateUtils,y=c.NumberUI,v=e.grid,g=function(t,e){var n,i,a,r,o,d;for(d=[],r=0,o=e.length;r<o;r++)i=e[r],n=f.toDate(i.date),a={id:f.toJson(n),date:n,value:i.value},d.push(a);return t(d)},_=function(t,e){var n;return n={rate:t.get("id")},d.getJSON("interest.rate/history.json",n).done(g.bind(null,e.success)).fail(e.error),null},A=I=function(t,e){var n,i;return(i=e.data).date=f.toJson(i.date),n={type:"POST",url:"interest.rate/history.json",dataType:"json",data:{rate:t.get("id"),data:o.stringify(i)}},d.ajax(n).done(e.success).fail(e.error),null},C=function(t,e){var n,i,a;return(i=e.data).date=f.toJson(i.date),a={rate:t.get("id"),data:o.stringify(i)},n={type:"DELETE",url:"interest.rate/history.json?"+d.param(a),dataType:"json"},d.ajax(n).done(e.success).fail(e.error),null},N=function(t){var e,n,i,a,r,o;if(i=d(F).data("kendoGrid")){for(n=null,a=0,r=(o=i.columns).length;a<r;a++)if(e=o[a],l.has(e,"command")){n=e;break}if(n)return t.get("locked")?i.hideColumn(n):i.showColumn(n),!0}},O=function(e){var t,n,i;return n=e.get("locked"),e.bind("change",function(t){return"locked"===t.field&&N(e),null}),i={dataSource:{transport:{read:_.bind(null,e),create:I.bind(null,e),update:A.bind(null,e),destroy:C.bind(null,e)},schema:{model:{id:"id",fields:{date:{type:"date",nullable:!1,editable:!1},value:{type:"number"}}}},sort:{field:"date",dir:"desc"}},columns:[{command:["edit","destroy"],title:" ",hidden:n},m.column({field:"date",title:a.t("data:rate.history.date")}),y.column({field:"value",title:a.t("data:rate.history.value"),decimals:4})],scrollable:!1},v.withDefaults(i),t=d(F),o.destroy(t),t.empty(),t.kendoGrid(i),null},U=function(t){var e,n,i;return n=t.get("locked"),i={items:[{type:"buttonGroup",buttons:[{text:a.t("data:rate.history.actions.lock"),icon:"lock",togglable:!0,selected:n,group:"lock",primary:!0,toggle:function(){return t.set("locked",!0)}},{text:a.t("data:rate.history.actions.unlock"),icon:"unlock",togglable:!0,selected:!n,group:"lock",primary:!0,toggle:function(){return t.set("locked",!1)}}]}]},e=d("#rateHistoryToolbar"),o.destroy(e),e.empty(),e.kendoToolBar(i),null},E=function(t,e){var n,i,a,r,o,d;for(n=e.date,r=0,o=(d=t.data()).length;r<o;r++)if(a=(i=d[r]).get("date"),f.equals(a,n))return i;return null},T=function(t){var e,n,i,a;if(e=null!=(a=d(F).data("kendoGrid"))?a.dataSource:void 0)return i=t.toJSON(),(n=E(e,i))?n.set("value",i.value):(n={date:i.date,value:i.value},e.add(n)),e.sync(),!0},D=function(t){return d("#rateHistoryRoot").localize(),U(t),O(t)},k=function(t){var e,n,i,a,r;if(t)return a=o.template(p)({}),i={id:t.id,title:t.name,locked:!0,date:new Date,value:0,addOrUpdateClick:function(){return T(this)}},n={model:e=o.observable(i),init:D.bind(null,e)},r=new o.View(a,n),s.display(L,r);u.display(L,!1)},x=function(t){return k(t)},R=function(){return u.display(L,!1)},S=function(t){var e;return e={id:t},d.getJSON("interest.rate.json",e).done(x).fail(R)},w=function(t){return n.display(L,!1),S(t)},{init:function(){return h.addRoute(b.rateHistory,w)}}})}.call(this),define("text!templates/rate/rate.html",[],function(){return'<div id="rateEditRoot">\n    <h1 data-i18n="data:rate.new" data-bind="visible: isNew"></h1>\n    <h1 data-i18n="data:rate.edit" data-bind="invisible: isNew"></h1>\n    \n    <div id="rateEditActions"></div>\n    \n    <table class="formTable">\n        <tr>\n            <td>\n                <label for="stringId" data-i18n="data:rate.fields.stringId"></label>\n            </td>\n            <td>\n                <input  id="stringId"\n                        class="k-textbox"\n                        type="text"\n                        data-bind="value: stringId"\n                        data-i18n="[name]data:rate.fields.stringId"\n                        required/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="name" data-i18n="data:rate.fields.name"></label>\n            </td>\n            <td>\n                <input  id="name"\n                        class="k-textbox"\n                        type="text"\n                        data-bind="value: name"\n                        data-i18n="[name]data:rate.fields.name"\n                        required/>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <label for="family" data-i18n="data:rate.fields.family"></label>\n            </td>\n            <td>\n                <input  id="family"\n                        data-bind="value: family"\n                        data-role="domosinterestratefamily"/>\n            </td>\n        </tr>\n        <tr>\n            \n            <td>\n                <label for="tenorPeriod" data-i18n="data:rate.fields.tenorPeriod"></label>\n            </td>\n            <td>\n                <input  id="tenorPeriod"\n                        data-bind="value: tenorPeriod"\n                        data-role="numerictextbox" data-min="0" data-max="24"/>\n            </td>\n            <td>\n                <label for="tenorUnit" data-i18n="data:rate.fields.tenorUnit"></label>\n            </td>\n            <td>\n                <input  id="tenorUnit"\n                        data-bind="value: tenorUnit"\n                        data-role="domosratetenorunit"/>\n            </td>\n        </tr>\n    </table>\n</div>'}),function(){define("views/rate/edit/rate",["jquery","i18n","text!templates/rate/rate.html","core/api/TenorUnit","rate/ui/InterestRateFamilyUI"],function(t,e,n){return{getTemplates:function(){return{view:n}},createRawModel:function(){return{id:0,stringId:"",name:"",family:null,tenorPeriod:1,tenorUnit:1}},updateModel:function(t,e){return t.set("id",e.id),t.set("stringId",e.stringId),t.set("name",e.name),t.set("family",e.family),t.set("tenorPeriod",e.tenorPeriod),t.set("tenorUnit",e.tenorUnit),null},init:function(){return null}}})}.call(this),function(){define("views/rate/edit/edit.rate",["jquery","i18n","site","views/edit/edit","views/rate/edit/rate"],function(t,n,e,i,a){var r,o,d,l,s,u,c,p,m,f,b;return d=e.router,o=e.map,u=function(t){return t.create(a)},m=function(t){return null==l&&(l=u(t)),l},f=function(t){var e;return(e=t.model.get("id"))&&d.navigate(o.getRateHistory(e)),null},b=function(t,e){if(t.model.get("id"))return e.push({type:"separator"}),e.push({type:"button",text:n.t("data:rate.history.title"),click:f.bind(null,t)})},s=function(){var t;return t={key:"rateEdit",rootId:"rateEditRoot",actionsId:"rateEditActions",url:"interest.rate.json",getView:m,setupToolbar:b},i.create(t)},r=l=null,p=function(){return null==r&&(r=s()),r},c=function(t){return p().display(t)},{init:function(){return d.addRoute(o.rateEdit,c)}}})}.call(this),function(){define("views/rate/module",["views/rate/rates","views/rate/rate.history","views/rate/edit/edit.rate"],function(t,e,n){return{init:function(){return t.init(),e.init(),n.init(),null}}})}.call(this),define("text!templates/swap/swap.rate.history.html",[],function(){return'<div id="swapRateHistoryRoot">\n    <h1 data-i18n="data:swap.history.title"></h1>\n    <p></p>\n    \n    <div id="swapRateHistoryToolbar"></div>\n    \n    <div data-bind="invisible: locked" class="k-content d-content">\n        <div class="floatThird">\n            <table class="formTable">\n                <tr>\n                    <td>\n                        <label for="historyDate" data-i18n="data:swap.history.date"></label>\n                    </td>\n                    <td>\n                        <input id="historyDate" data-bind="value: date" data-role="datepicker"/>\n                    </td>\n\t\t\t\t</tr>\n                <tr>\n                    <td>\n                        <label for="historyYear" data-i18n="data:swap.history.year"></label>\n                    </td>\n                    <td>\n                        <input id="historyYear" data-bind="value: year" data-role="numerictextbox" data-min="1" data-max="100" data-format="n0"/>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <label for="historyValue" data-i18n="data:swap.history.quote"></label>\n                    </td>\n                    <td>\n                        <input id="historyValue" data-bind="value: quote" data-role="domospercent" data-format="p3"/>\n                    </td>\n                </tr>\n                <tr>\n                    <td></td>\n                    <td>\n                        <button class="k-button" data-i18n="data:swap.history.actions.addOrUpdate" data-bind="click: addOrUpdateClick"></button>\n                    </td>\n                </tr>\n            </table>\n        </div>\n        <div class="clearer"></div>\n    </div>\n    \n    <div id="swapRateHistoryGrid" class="floatingGrid"></div>\n    <div class="clearer"></div>\n</div>'}),function(){var U;U="#swapRateHistoryGrid",define("views/swap/swap.history",["jquery","lodash","kendo","i18n","site","ui","views/layout","views/not.found","views/loading","core/util/DateUtils","core/ui/DateUI","core/ui/IntegerUI","core/ui/PercentUI","text!templates/swap/swap.rate.history.html"],function(d,l,r,a,t,e,o,n,i,s,u,c,p,m){var f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O;return g=p.PercentUI,f=u.DateUI,v=c.IntegerUI,T=t.router,y=t.map,b=s.DateUtils,h=e.grid,I=function(t,e){var n,i,a,r,o,d;for(d=[],r=0,o=e.length;r<o;r++)i=e[r],n=b.toDate(i.date),a={id:b.toJson(n),date:n,year:i.year,quote:i.quote},d.push(a);return t(d)},x=function(t,e){return d.getJSON("swap/rate/history.json").done(I.bind(null,e.success)).fail(e.error),null},O=w=function(t,e){var n,i;return(i=e.data).date=b.toJson(i.date),n={type:"POST",url:"swap/rate/history.json",dataType:"json",data:{data:r.stringify(i)}},d.ajax(n).done(e.success).fail(e.error),null},k=function(t,e){var n,i,a;return(i=e.data).date=b.toJson(i.date),a={data:r.stringify(i)},n={type:"DELETE",url:"swap/rate/history.json?"+d.param(a),dataType:"json"},d.ajax(n).done(e.success).fail(e.error),null},N=function(t){var e,n,i,a,r,o;if(i=d(U).data("kendoGrid")){for(n=null,a=0,r=(o=i.columns).length;a<r;a++)if(e=o[a],l.has(e,"command")){n=e;break}if(n)return t.get("locked")?i.hideColumn(n):i.showColumn(n),!0}},R=function(e){var t,n,i;return n=e.get("locked"),e.bind("change",function(t){return"locked"===t.field&&N(e),null}),i={dataSource:{transport:{read:x.bind(null,e),create:w.bind(null,e),update:O.bind(null,e),destroy:k.bind(null,e)},schema:{model:{id:"id",fields:{date:{type:"date",nullable:!1,editable:!1},year:{type:"number",nullable:!1,editable:!1},quote:{type:"number",nullable:!1}}}},sort:{field:"date",dir:"desc"}},columns:[{command:["edit","destroy"],title:" ",hidden:n},f.column({field:"date",title:a.t("data:swap.history.date")}),v.column({field:"year",title:a.t("data:swap.history.year")}),g.column({field:"quote",title:a.t("data:swap.history.quote"),decimals:4})],scrollable:!1},h.withDefaults(i),t=d(U),r.destroy(t),t.empty(),t.kendoGrid(i),null},_=function(t){var e,n,i;return n=t.get("locked"),i={items:[{type:"buttonGroup",buttons:[{text:a.t("data:swap.history.actions.lock"),icon:"lock",togglable:!0,selected:n,group:"lock",primary:!0,toggle:function(){return t.set("locked",!0)}},{text:a.t("data:swap.history.actions.unlock"),icon:"unlock",togglable:!0,selected:!n,group:"lock",primary:!0,toggle:function(){return t.set("locked",!1)}}]}]},e=d("#swapRateHistoryToolbar"),r.destroy(e),e.empty(),e.kendoToolBar(i),null},D=function(t,e){var n,i,a,r,o,d,l,s;for(n=e.date,s=e.year,o=0,d=(l=t.data()).length;o<d;o++)if(a=(i=l[o]).get("date"),r=i.get("year"),b.equals(a,n)&&r===s)return i;return null},C=function(t){var e,n,i,a;if(e=null!=(a=d(U).data("kendoGrid"))?a.dataSource:void 0)return i=t.toJSON(),(n=D(e,i))?n.set("quote",i.quote):(n={date:i.date,year:i.year,quote:i.quote},e.add(n)),e.sync(),!0},S=function(t){return d("#swapRateHistoryRoot").localize(),_(t),R(t)},E=function(){var t,e,n,i,a;return i=r.template(m)({}),n={locked:!0,date:new Date,year:1,quote:0,addOrUpdateClick:function(){return C(this)}},e={model:t=r.observable(n),init:S.bind(null,t)},a=new r.View(i,e),o.display("swapRateHistory",a)},{init:function(){return T.addRoute(y.swapRateHistory,E)}}})}.call(this),function(){define("views/swap/module",["views/swap/swap.history"],function(t){return{init:function(){return t.init(),null}}})}.call(this),define("text!templates/import.html",[],function(){return'\n<div>\n\t<h1>Data strategy</h1>\n\n\t<h3>Data</h3>\n\t<input id="importStrategyData" type="file"/>\n\t<p></p>\n\t<div id="importStrategyDataResults"></div>\n\t\n\t<h1>Standard</h1>\n\n\t<h3>Data&nbsp;<a class="k-button" href="#=dataUrl#" data-i18n="[title]site:importing.downloadTemplate" download>\n\t\t<span class="k-icon k-i-download"></span>\n\t</a></h3>\n\t<input id="importData" type="file"/>\n\t<p></p>\n\n\n\t<h3>Clusters&nbsp;<a class="k-button" href="#=clusterUrl#" data-i18n="[title]site:importing.downloadTemplate" download>\n\t\t<span class="k-icon k-i-download"></span>\n\t</a></h3>\n\t<input id="importClusters" type="file"/>\n\t<p></p>\n\n\t<h3>Indices&nbsp;<a class="k-button" href="#=indexUrl#" data-i18n="[title]site:importing.downloadTemplate" download>\n\t\t<span class="k-icon k-i-download"></span>\n\t</a></h3>\n\t<input id="importIndices" type="file"/>\n\t<p></p>\n\n\t<h3>Interest rates&nbsp;<a class="k-button" href="#=rateUrl#" data-i18n="[title]site:importing.downloadTemplate" download>\n\t\t<span class="k-icon k-i-download"></span>\n\t</a></h3>\n\t<input id="importInterestRates" type="file"/>\n\t<p></p>\n\n\t<h3>Tags&nbsp;<a class="k-button" href="#=tagUrl#" data-i18n="[title]site:importing.downloadTemplate" download>\n\t\t<span class="k-icon k-i-download"></span>\n\t</a></h3>\n\t<input id="importTags" type="file"/>\n\t<p></p>\n\t\n\t<h3>KPI&nbsp;<a class="k-button" href="#=kpiUrl#" data-i18n="[title]site:importing.downloadTemplate" download>\n\t\t<span class="k-icon k-i-download"></span>\n\t</a></h3>\n\t<input id="importKpi" type="file"/>\n\t<p></p>\n\n\t<h3>Assets&nbsp;<a class="k-button" href="#=assetUrl#" data-i18n="[title]site:importing.downloadTemplate" download>\n\t\t<span class="k-icon k-i-download"></span>\n\t</a></h3>\n\t<input id="importAssets" type="file"/>\n\t<p></p>\n\n\t<h3>Entities&nbsp;<a class="k-button" href="#=entityUrl#" data-i18n="[title]site:importing.downloadTemplate" download>\n\t\t<span class="k-icon k-i-download"></span>\n\t</a></h3>\n\t<input id="importEntities" type="file">\n\t<p></p>\n\n\t<h3>Portfolios&nbsp;<a class="k-button" href="#=portfolioUrl#" data-i18n="[title]site:importing.downloadTemplate" download>\n\t\t<span class="k-icon k-i-download"></span>\n\t</a></h3>\n\t<input id="importPortfolios" type="file"/>\n\t<p></p>\n\n\t<h3>Risk&nbsp;<a class="k-button" href="#=riskUrl#" data-i18n="[title]site:importing.downloadTemplate" download>\n\t\t<span class="k-icon k-i-download"></span>\n\t</a></h3>\n\t<input id="importRisk" type="file"/>\n\t<p></p>\n\n\t<h3>Compliance&nbsp;<a class="k-button" href="#=complianceUrl#" data-i18n="[title]site:importing.downloadTemplate" download>\n\t\t<span class="k-icon k-i-download"></span>\n\t</a></h3>\n\t<input id="importCompliance" type="file"/>\n\t<p></p>\n\t\n\t<h3>Document&nbsp;<a class="k-button" href="#=documentUrl#" data-i18n="[title]site:importing.downloadTemplate" download>\n\t\t<span class="k-icon k-i-download"></span>\n\t</a></h3>\n\t<input id="importDocument" type="file"/>\n\t<p></p>\n\n\t<h3>Right&nbsp;<a class="k-button" href="#=rightUrl#" data-i18n="[title]site:importing.downloadTemplate" download>\n\t\t<span class="k-icon k-i-download"></span>\n\t</a></h3>\n\t<input id="importRight" type="file"/>\n\t<p></p>\n\n\t<h3>Fee definition&nbsp;<a class="k-button" href="#=feesUrl#" data-i18n="[title]site:importing.downloadTemplate" download>\n\t\t<span class="k-icon k-i-download"></span>\n\t</a></h3>\n\t<input id="importFeeDefinition" type="file"/>\n\t<p></p>\n\n</div>'}),function(){define("views/import",["jquery","lodash","kendo","site","core/ui/UploadUtils","views/layout","views/strategy/common/data.upload","excel/web/ExcelMap","text!templates/import.html"],function(i,t,n,e,a,r,o,d,l){var s,u,c,p,m;return u=a.UploadUtils,s=d.ExcelMap,m=function(t,e){var n;return n={async:{saveUrl:e,saveField:"file"}},u.withDefaults(n),i(t).kendoUpload(n),null},p=function(){return o.init("#importStrategyData","#importStrategyDataResults",null,null),m("#importData","import/data.json"),m("#importClusters","import/cluster.json"),m("#importIndices","import/index.json"),m("#importInterestRates","import/interest.rate.json"),m("#importTags","import/tag.json"),m("#importAssets","import/asset.json"),m("#importEntities","import/entity.json"),m("#importPortfolios","import/portfolio.json"),m("#importRisk","import/risk.json"),m("#importCompliance","import/compliance.json"),m("#importDocument","import/document.json"),m("#importRight","import/right.json"),m("#importKpi","import/kpi.json"),m("#importFeeDefinition","import/fee.definition.json"),null},c=function(){var t,e;return t=n.template(l)({clusterUrl:s.templateDownloadUrl(1),dataUrl:s.templateDownloadUrl(2),rightUrl:s.templateDownloadUrl(3),indexUrl:s.templateDownloadUrl(4),rateUrl:s.templateDownloadUrl(5),tagUrl:s.templateDownloadUrl(6),entityUrl:s.templateDownloadUrl(7),assetUrl:s.templateDownloadUrl(8),portfolioUrl:s.templateDownloadUrl(9),riskUrl:s.templateDownloadUrl(10),complianceUrl:s.templateDownloadUrl(11),kpiUrl:s.templateDownloadUrl(12),documentUrl:s.templateDownloadUrl(13),feesUrl:s.templateDownloadUrl(16)}),e={init:p},new n.View(t,e)},{init:function(){var t;return t=c(),r.register("import",e.map.import,t),null}}})}.call(this),define("text!templates/documents/search.html",[],function(){return'<div id="searchDocumentsRoot">\n\t<h2 data-i18n="data:search.results"></h2>\n\t<p></p>\n\t<div id="searchDocumentsGrid" class="floatingGrid"></div>\n\t<div class="clearer"></div>\n</div>'}),function(){var E,D=[].slice;E="searchDocuments",define("views/documents/search.documents",["jquery","lodash","i18n","kendo","ui","site/router","site/routemap","views/loading","views/not.found","views/layout","document/ui/DocumentTagUI","text!templates/documents/search.html"],function(n,i,a,t,e,r,o,d,l,s,u,c){var p,m,f,b,v,y,h,g,T,I,C,w,k;return p=u.DocumentTagUI,m=e.grid,f=m.transports,C={documents:[]},T=t.observable(C),w=t.template(c)({}),b=function(t){var e,n;return e=t.id,n=t.name,e&&n?"<a href='document/download?id="+e+"' download='"+n+"'>"+n+"</a>":""},v=function(){var t,e;return t=n("#searchDocumentsGrid"),e={dataSource:{transport:f.createLocal({data:T.get("documents")}),schema:{model:{id:"id",fields:{name:{type:"string"},description:{type:"string"},version:{type:"string"}}}},sort:{field:"version",dir:"desc"}},columns:[{field:"id",title:a.t("data:documents.thumbnail"),groupable:!1,filterable:!1,sortable:!1,template:"<img src='document/thumbnail?id=#: id#'></img>"},{field:"name",title:a.t("data:documents.link"),template:b},{field:"version",title:a.t("data:documents.version")},{field:"description",title:a.t("data:documents.description")},p.columnMulti({field:"tags",title:a.t("data:documents.tags")})],editable:!1,scrollable:!1},m.withDefaults(e),t.kendoGrid(e)},I={model:T,init:function(){return n("#searchDocumentsRoot").localize(),v()}},k=new t.View(w,I),y=function(t){var e;return(e=T.get("documents")).splice.apply(e,[0,e.length].concat(D.call(t))),s.display(E,k)},h=function(){return l.display(E,!1)},g=function(t){var e;if(i.has(t,"text"))return e=t.text,d.display(E,!1),n.getJSON("document/search.json",{text:e}).done(y).fail(h);history.back()},{init:function(){return r.addRoute(o.searchDocuments,g)}}})}.call(this),define("text!templates/documents/documents.grid.toolbar.html",[],function(){return'<ul id="documentGridToolbarMenu" class="gridToolbarMenu d-sprite-wrapper" data-role="menu">\n    <li>\n        <a href="javascript:void(0)" class="k-link" data-key="create">\n            <span class="k-sprite d-new"></span>\n            <span data-i18n="documents:toolbar.actions.create"></span>\n        </a>\n    </li>\n</ul>'}),function(){var J,K;J="#documentTagGrid",K="#documentTagWindow",define("views/documents/documents.tags",["jquery","lodash","i18n","kendo","ui","core/event/SiteEvents","core/ui/Confirmation","text!templates/documents/documents.grid.toolbar.html"],function(d,i,l,s,t,e,n,u){var a,r,o,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,_,O,U,A,F,L,P,M,j,G,q,B,V,W,H,Y;return p=e.SiteEvents,o=s.data.DataSource,a=n.Confirmation,c=t.grid,j=function(t){return m(t),p.saveSuccessful(),null},G=function(t){return null},M=function(t){return t.query=null},V=function(t){var e,n;if(!t.query)return n=t.model.toJSON(),e={type:"POST",url:"document/tag.json",dataType:"json",data:{data:JSON.stringify(n)}},t.query=d.ajax(e).done(j.bind(null,t)).fail(G.bind(null,t)).always(M.bind(null,t)),null},A=function(t){return m(t),p.deleteSuccessful(),null},F=function(t){return null},U=function(t){return t.query=null},g=function(t){var e,n,i;if(!t.query&&!(i=t.model).isNew())return n={id:i.toJSON().id},e={type:"DELETE",url:"document/tag.json?"+d.param(n)},t.query=d.ajax(e).done(A.bind(null,t)).fail(F.bind(null,t)).always(U.bind(null,t))},W=function(t,e){return x(t)&&V(t),null},B=function(t,e){return e&&g(t),null},T=function(t,e){return a.confirmDelete(l.t("documents:tags.actions.confirmDestroy")).then(B.bind(null,t)).catch(function(){})},x=function(t){var e;return!!(e=t.validator)&&e.validate()},E=function(t){var e;return null!=(e=t.validator)?e.hideMessages():void 0},D=function(t){var e,n;return n={},(e=d("#documentTagWindow")).kendoValidator(n),t.validator=e.data("kendoValidator")},y=function(){var t;return t={width:"400px",minWidth:"300px",modal:!0,visible:!1},d(K).kendoWindow(t),d(K).data("kendoWindow")},C=function(){return d(K).data("kendoWindow")||y()},L=function(t){return E(t),!0},m=function(t){return C().close()},f=function(t,e){return m(t)},q=function(t){var e;return e=t.model.isNew()?l.t("documents:tags.new"):l.t("documents:tags.edit"),C().title(e).open().center(),null},I=function(t,e){var n,i;return i=(n=t.editContext).model,e?(i.set("id",e.id),i.set("stringId",e.stringId),i.set("name",e.name)):(i.set("id",0),i.set("stringId",""),i.set("name","")),i.set("isModified",!1),q(n)},h=function(t){return I(t,null)},P=function(t,e){return"isModified"!==e.field&&t.model.set("isModified",!0),null},S=function(t){var e,n,i,a;return e={},t.editContext=e,(a={id:0,stringId:"",name:"",isModified:!1,isNew:function(){return 0===this.get("id")}}).saveClick=W.bind(null,e),a.destroyClick=T.bind(null,e),a.closeClick=f.bind(null,e),i=s.observable(a),(e.model=i).bind("change",P.bind(null,e)),(n=d(K)).localize(),s.bind(n,i),C().bind("close",L.bind(null,e)),D(e),null},_=function(t,e){var n,i;if(e&&e.data)return n=e.data,"create"===(i=e.type)?t.pushCreate(n):"update"===i?t.pushUpdate(n):"destroy"===i&&t.pushDestroy(n),null},R=function(t,e){var n;if(e)return n=t.data.options,i.isArray(e)?i.each(e,_.bind(null,n)):_(n,e),null},O=function(t){var e;return e={options:t},d("body").on("domosws:document:tags",e,R),null},r=null,v=function(){return new o({transport:{read:{url:"document/tag/list.json",dataType:"json"},push:O},schema:{model:{id:"id",fields:{stringId:{type:"string"},name:{type:"string"}}}},sort:{field:"name",dir:"asc"}})},w=function(){return null==r&&(r=v()),r},k=function(t,e){return e&&I(t,e),null},b=function(t){return{command:[c.customCommand(l.t("documents:tags.actions.view"),k.bind(null,t))],title:" ",width:"80px"}},Y=function(t,e){return d(e.item).children(".k-link").data("key")&&h(t),null},function(t){var e;return null!=(e=t.menu)&&e.destroy(),t.menu=null},H=function(t){var e,n;return e=d(J).find("#documentGridToolbarMenu"),s.bind(e,{}),e.localize(),null!=(n=e.data("kendoMenu"))&&n.bind("select",Y.bind(null,t)),t.menu=n,null},N=function(t){var e,n,i,a,r,o;return o=s.template(u),r=o({}),(e=b(t)).width="100px",a={dataSource:w(),editable:!1,columns:[e,{field:"stringId",title:l.t("documents:tags.fields.stringId",{width:"200px"})},{field:"name",title:l.t("documents:tags.fields.name"),width:"200px"}],pageable:c.defaultPageable(),scrollable:!0,height:400,toolbar:function(){return r}},c.withDefaults(a),(n=d(J)).kendoGrid(a),i=n.data("kendoGrid"),t.grid=i,H(t),null},{updateRawModel:function(t,e){return null},init:function(t){var e;return e={},t.groupContext=e,N(e),S(e),null}}})}.call(this),define("text!templates/documents/documents.html",[],function(){return'<div id="documentsRoot">\n\t<h2 data-i18n="documents:menu.tags"></h2>\n\n\t<div id="documentTagGrid" class="floatingGrid_600_px"></div>\n\t<div class="clearer"></div>\n\n\t<div>\n\t\t<div id="documentTagWindow" class="formWindow">\n\t\t\t<table class="formTable">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="documentTagEditStringId" data-i18n="documents:tags.fields.stringId"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="documentTagEditStringId" name="ID" class="k-textbox" type="text" data-bind="value: stringId" required/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<label for="documentTagEditName" data-i18n="documents:tags.fields.name"></label>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input id="documentTagEditName" name="Name" class="k-textbox" type="text" data-bind="value: name" required/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<div class="formWindowButtons">\n\t\t\t\t<button class="k-primary" data-role="button" data-icon="check" data-bind="events:{click: saveClick}, enabled: isModified">#= $.t("documents:tags.actions.save")#</button>\n\t\t\t\t<button data-role="button" data-icon="close" data-bind="events:{click: destroyClick}, invisible: isNew">#= $.t("documents:tags.actions.destroy") #</button>\n\t\t\t\t<button data-role="button" data-icon="cancel" data-bind="click: closeClick">#= $.t("documents:tags.actions.cancel")#</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'}),function(){define("views/documents/documents",["jquery","i18n","kendo","ui","site","views/layout","views/documents/documents.tags","text!templates/documents/documents.html"],function(r,t,a,e,o,d,n,l){var s,u,c,p;return s=[n],function(){return{}},u=function(t){var e,n,i;for(i={},e=0,n=s.length;e<n;e++)s[e].updateRawModel(t,i);return i},p=function(t){var e,n,i,a;for(r("#documentsRoot").localize(),a=[],e=0,n=s.length;e<n;e++)i=s[e],a.push(i.init(t));return a},c=function(t,e){var n,i;return i=a.template(l)({}),n={model:e,init:p.bind(null,t)},new a.View(i,n)},{init:function(){var t,e,n,i;return n=u(t={}),e=a.observable(n),t.model=e,i=c(t,e),d.register("documents",o.map.documents,i)}}})}.call(this),function(){define("views/documents/module",["views/documents/search.documents","views/documents/documents"],function(t,e){return{init:function(){return t.init(),e.init()}}})}.call(this),function(){"use strict";define("views/strategy/strategy.data",["jquery","i18n","kendo","ui","core/ui/DateUI","core/ui/DateTimeUI","core/ui/UploadUtils"],function(r,o,d,t,e,n,i){var l,s,u,a,c,p,m,f,b,v;return a=i.UploadUtils,s=e.DateUI,l=n.DateTimeUI,u=t.grid,b=function(){var t;return t={async:{saveUrl:"strategy/data/upload",saveField:"file"}},a.withDefaults(t),r("#strategyDataImport").kendoUpload(t),null},p=function(t){var e,n;return n=t.id,e=t.fileName,n&&e?"<a href='strategy/data/download?id="+n+"' download='"+e+"'>"+e+"</a>":""},m=function(t){return r.getJSON("strategy/data/list.json").done(t.success).fail(t.error)},v=function(t){var e,n;return n=t.data,e={type:"POST",url:"strategy/data.json",dataType:"json",data:{data:d.stringify(n)}},r.ajax(e).done(t.success).fail(t.error)},c=function(t){var e,n;return n={id:t.data.id},e={type:"DELETE",url:"strategy/data.json?"+r.param(n),dataType:"json"},r.ajax(e).done(t.success).fail(t.error)},f=function(t){var e,n,i,a;return n=r("#strategyDataGrid"),d.destroy(n),n.empty(),e=t.dataContext,a={dataSource:{transport:{read:m,update:v,destroy:c},schema:{model:{id:"id",fields:{fileName:{type:"string",editable:!1},type:{type:"string"},subType:{type:"string"},date:{type:"date"},auditDate:{type:"date"},startValidityDate:{type:"date"},endValidityDate:{type:"date"},user:{type:"string",editable:!1},created:{type:"date",editable:!1},deleted:{type:"boolean",editable:!1}}}},filter:{field:"deleted",operator:"eq",value:!1}},columns:[{command:["edit","destroy"],title:" "},{field:"fileName",title:o.t("strategy:data.fileName"),template:p},{field:"type",title:o.t("strategy:data.type")},{field:"subType",title:o.t("strategy:data.subType")},s.column({field:"date",title:o.t("strategy:data.date")}),s.column({field:"auditDate",title:o.t("strategy:data.auditDate")}),s.column({field:"startValidityDate",title:o.t("strategy:data.startValidityDate")}),s.column({field:"endValidityDate",title:o.t("strategy:data.endValidityDate")}),{field:"user",title:o.t("strategy:data.user")},l.column({field:"created",title:o.t("strategy:data.created")}),{field:"deleted",title:o.t("strategy:data.deleted"),hidden:!0}],pageable:u.defaultPageable(),height:800,scrollable:!0},u.withDefaults(a),n.kendoGrid(a),i=n.data("kendoGrid"),e.grid=i,null},{updateRawModel:function(t,e){},init:function(t){var e;return e={},t.dataContext=e,f(t),b()}}})}.call(this),define("text!templates/strategy/strategy.mapping.toolbar.html",[],function(){return'<ul id="strategyMappingToolbarMenu" class="gridToolbarMenu d-sprite-wrapper" data-role="menu">\n    <li>\n        <a href="javascript:void(0)" class="k-link" data-key="create">\n            <span class="k-sprite d-new"></span>\n            <span data-i18n="strategy:mapping.actions.create"></span>\n        </a>\n    </li>\n</ul>'}),function(){"use strict";var f;f="#strategyMappingGrid",define("views/strategy/strategy.mapping",["jquery","i18n","kendo","ui","site","text!templates/strategy/strategy.mapping.toolbar.html"],function(d,l,s,t,n,u){var c,p,i,m,a;return(c=t.grid).statePersistence,a=function(t){return n.router.navigate(n.map.getStrategyMappingEdit()),null},m=function(){var t,e;return t=d(f).find("#strategyMappingToolbarMenu"),s.bind(t,{}),t.localize(),null!=(e=t.data("kendoMenu"))&&e.bind("select",a),null},p=function(t){var e;return(e=null!=t?t.id:void 0)?n.router.navigate(n.map.getStrategyMappingEdit(e)):n.router.navigate(n.map.notfound),null},i=function(t){var e,n,i,a,r,o;return e=d(f),s.destroy(e),e.empty(),i=t.mappingContext,o=s.template(u),r=o({}),a={dataSource:{transport:{read:"strategy/mapping/list.json"},schema:{model:{id:"id",fields:{name:{type:"string"},type:{type:"string"},subType:{type:"string"}}}}},columns:[{command:[c.customCommand(l.t("strategy:mapping.actions.view"),p)],title:" ",width:"85px"},{field:"name",title:l.t("strategy:mapping.name"),width:"200px"},{field:"type",title:l.t("strategy:mapping.type"),width:"200px"},{field:"subType",title:l.t("strategy:mapping.subType"),width:"200px"},{field:"description",title:l.t("strategy:mapping.description"),width:"600px"}],toolbar:function(){return r},pageable:c.defaultPageable(),height:800,scrollable:!0},c.withDefaults(a),e.kendoGrid(a),m(),n=e.data("kendoGrid"),i.grid=n,null},{updateRawModel:function(t,e){},init:function(t){var e;return e={},t.mappingContext=e,i(t)}}})}.call(this),function(){var d,a,l,r,s,u,c,p,m,f,b,v,y,h,g,T;a=(d={id:2,elementId:"#strategyDataLi"}).id,f=(m={id:3,elementId:"#strategyMappingLi"}).id,T=(g={id:4,elementId:"#strategyWorkflowLi"}).id,u=(s={id:5,elementId:"#strategyFtpLi"}).id,r=(l={id:6,elementId:"#strategyDataRoomLi"}).id,p=[b={id:1,elementId:"#strategyProductionLi"},d,m,g,s,l],c=v=b.id,y="currentMenuSelection",h="k-state-active",define("views/strategy/strategy.menu",["jquery"],function(i){var n,o;return o=function(t,e){var n;return n=i(t.elementId),t.id===e?n.addClass(h):n.removeClass(h),null},n=function(t,e){var n,i,a,r;if(r=t.model,i=e.id,r.get(y)!==i){for(n=0,a=p.length;n<a;n++)o(p[n],i);r.set(y,i)}return e===d&&t.dataContext.grid.refresh(),e===m&&t.dataContext.grid.refresh(),e===m&&t.mappingContext.grid.refresh(),e===g&&t.workflowContext.grid.refresh(),e===s&&t.ftpContext.grid.refresh(),e===l&&t.dataRoomContext.grid.refresh(),null},{updateRawModel:function(t,e){return e[y]=c,e.isProductionActive=function(){return this.get(y)===v},e.isDataActive=function(){return this.get(y)===a},e.isMappingActive=function(){return this.get(y)===f},e.isWorkflowActive=function(){return this.get(y)===T},e.isFtpActive=function(){return this.get(y)===u},e.isDataRoomActive=function(){return this.get(y)===r},e.productionMenuClick=n.bind(null,t,b),e.dataMenuClick=n.bind(null,t,d),e.mappingMenuClick=n.bind(null,t,m),e.workflowMenuClick=n.bind(null,t,g),e.ftpMenuClick=n.bind(null,t,s),e.dataRoomMenuClick=n.bind(null,t,l),null},init:function(t){}}})}.call(this),define("core/api/StrategyActivityType",["require","exports","core/ui/grid/column/EnumColumnUtils","core/ui/widget/EnumWidgetUtils","core/util/EnumUtils"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StrategyActivityType=void 0;var r,o;(r=e.StrategyActivityType||(e.StrategyActivityType={}))[r.TEMPLATE=1]="TEMPLATE",r[r.STANDARD=2]="STANDARD",r[r.MULTIPLE=3]="MULTIPLE",(o=e.StrategyActivityType||(e.StrategyActivityType={})).getName=a.EnumUtils.createNameFn("strategy:activityTypes",o),o.widget=i.EnumWidgetUtils.createDropList("DomosStrategyActivityType",o,!1),o.column=n.EnumColumnUtils.createFactory(o,o.widget)}),define("text!templates/strategy/strategy.activity.toolbar.html",[],function(){return'<ul id="strategyActivityToolbarMenu" class="gridToolbarMenu d-sprite-wrapper" data-role="menu">\n\t<li>\n\t\t<span class="k-sprite d-new"></span>\n\t\t<span data-i18n="strategy:activity.actions.create"></span>\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\t<a href="javascript:void(0)" class="k-link" data-key="2" data-i18n="strategy:activity.STANDARD.new"></a>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<a href="javascript:void(0)" class="k-link" data-key="1" data-i18n="strategy:activity.TEMPLATE.new"></a>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<a href="javascript:void(0)" class="k-link" data-key="3" data-i18n="strategy:activity.MULTIPLE.new"></a>\n\t\t\t</li>\n\t\t</ul>\n\t</li>\n</ul>\n'}),function(){var f;f="#strategyActivityGrid",define("views/strategy/production/production.activities",["jquery","i18n","kendo","ui","site","core/api/StrategyActivityType","text!templates/strategy/strategy.activity.toolbar.html"],function(r,a,o,t,n,e,d){var l,s,u,c,i,p,m;return l=t.grid,s=e.StrategyActivityType,u=function(t){var e;return(e=null!=t?t.id:void 0)?n.router.navigate(n.map.getStrategyActivityEdit(e)):n.router.navigate(n.map.notfound)},m=function(t){var e;return(e=r(t.item).children(".k-link").data("key"))&&n.router.navigate(n.map.getStrategyActivityCreate(e)),null},p=function(){var t,e;return t=r(f).find("#strategyActivityToolbarMenu"),o.bind(t,{}),t.localize(),null!=(e=t.data("kendoMenu"))&&e.bind("select",m),null},c=function(t){var e,n,i,a;return n=r(f).data("kendoGrid"),e=null,i=t.model,n&&0<(a=n.select()).length&&(e=n.dataItem(a[0])),e?(e.toJSON&&(e=e.toJSON()),i.set("currentActivity",e)):i.set("currentActivity",null),null},i=function(t){var e,n,i;return i=o.template(d),n=i({}),e={dataSource:{transport:{read:"strategy/activity/list.json"}},editable:!1,columns:[{command:[l.customCommand(a.t("strategy:activity.actions.view"),u)],title:" "},{field:"name",title:a.t("strategy:activity.name")},s.column({field:"type",title:a.t("strategy:activity.type")}),{field:"dataType",title:a.t("strategy:activity.dataType")},{field:"workflowRunning",title:a.t("strategy:activity.workflowRunning")},{field:"workflowDefinition",title:a.t("strategy:activity.workflowDefinition")}],toolbar:function(){return n},pageable:l.defaultPageable(),height:500,scrollable:!0,change:c.bind(null,t)},l.withDefaults(e),r(f).kendoGrid(e),p()},{updateRawModel:function(t,e){},init:function(t){return i(t)}}})}.call(this),function(){var I;I="#strategyTaskGrid",define("views/strategy/production/production.tasks",["jquery","lodash","i18n","kendo","ui","core/ui/DateUI","core/ui/IntegerUI"],function(r,i,n,t,e,a,o){var d,l,s,u,c,p,m,f,b,v,y,h,g,T;return d=a.DateUI,l=o.IntegerUI,s=e.grid,function(){return{}},T=function(t){var e,n,i,a;return n=t.model,a=null,(e=r(I).data("kendoGrid"))&&0<(i=e.select()).length&&(a=e.dataItem(i[0])),a?(a.toJSON&&(a=a.toJSON()),n.set("currentTask",a)):n.set("currentTask",null),null},y=function(t){return setTimeout(T.bind(null,t))},b=function(t,e){return T(t)},h=function(t,e){var n,i,a;return i={},(n=null!=(a=t.model.get("currentActivity"))?a.get("id"):void 0)&&(i.activity=n),r.getJSON("strategy/task/list.json",i).done(e.success).fail(e.error),null},p=function(t){var e;return e={dataSource:{transport:{read:h.bind(null,t)},schema:{model:{id:"id",fields:{name:{type:"string"},priority:{type:"number"},activityName:{type:"string"},dueDate:{type:"date"}}}},requestEnd:y.bind(null,t)},groupable:!1,editable:!1,change:b.bind(null,t),columns:[{field:"name",title:n.t("strategy:tasks.name")},{field:"activityName",title:n.t("strategy:tasks.activityName")},d.column({field:"dueDate",title:n.t("strategy:tasks.dueDate")}),l.column({field:"priority",title:n.t("strategy:tasks.priority")})],pageable:s.defaultPageable(),height:500,scrollable:!0},s.withDefaults(e),r(I).kendoGrid(e),null},g=function(t){var e,n;return null!=(e=r(I).data("kendoGrid"))&&null!=(n=e.dataSource)&&n.read(),null},v=function(t,e){var n;if(e&&e.data)return(n=e.data).id,n.instance,"started"===e.type?g():"completed"===e.type&&g(),null},f=function(t,e){var n;if(n=t.data.context,e)return i.isArray(e)?i.each(e,v.bind(null,n)):v(0,e),null},u=function(t){var e;return e={context:t},r("body").on("domosws:workflow:tasks",e,f),null},m=function(t,e){return"currentActivity"===e.field&&g(),null},c=function(t){return t.model.bind("change",m.bind(null,t))},{updateRawModel:function(t,e){return null},init:function(t){var e;return e={},t.taskContext=e,p(t),u(t),c(t),null}}})}.call(this),function(){var u,c;c="strategyProductionWorkflowLi",u="strategyProductionTaskLi",define("views/strategy/production/production.tab.strip",["jquery","lodash","i18n","kendo","site"],function(r,t,e,n,i){var a,o,d,l,s;return d=function(){return r("#strategyProductionTab").data("kendoTabStrip")},s=function(t,e,n){var i,a;return a=d(),n?(i=!1,(t||n!==c)&&(e||n!==u)||(i=!0),i&&s(t,e,null)):t?a.select(r("#strategyProductionWorkflowLi")):e&&a.select(r("#strategyProductionTaskLi")),null},o=function(t){var e,n,i,a;if(e=!!t.get("currentActivity"),n=!!t.get("currentTask"),e||n)return a=null!=(i=d().select())?i.attr("id"):void 0,s(e,n,a)},l=function(t,e){var n;return"currentActivity"!==(n=e.field)&&"currentTask"!==n||o(t),null},a=function(t){return t.bind("change",l.bind(null,t)),null},{updateRawModel:function(t,e){return e.hasTab=function(){return!!this.get("currentActivity")||!!this.get("currentTask")},null},init:function(t){return a(t.model),null}}})}.call(this),function(){define("views/strategy/production/production.task.form",["jquery","lodash","i18n","kendo","core/web/WebLocation","views/workflow/task/diagram.task"],function(a,t,e,n,i,r){var o,d,l,s,u,c;return o=i.WebLocation,l=function(t,e,n){var i;return i={task:e,properties:JSON.stringify(n)},a.post(o.resolvve("workflow/task/complete.json"),i),null},c=function(t,e){var n,i;return(n=a("#strategyProductionTaskForm")).empty(),i={complete:l.bind(null,t)},r.setupForm(n,i,e)},u=function(t){var e;return(e=t.model.get("currentTask"))&&e.toJSON&&(e=e.toJSON()),c(t,e)},s=function(t,e){return"currentTask"===e.field&&u(t),null},d=function(t){return t.model.bind("change",s.bind(null,t))},{updateRawModel:function(t,e){return null},init:function(t){return d(t),null}}})}.call(this),function(){var c;c="strategyProductionDiagramError",define("views/strategy/production/production.workflow",["jquery","lodash","i18n","kendo","site","views/workflow/diagram"],function(d,l,t,s,e,n){var i,a,r,o,u;return e.router,e.map,r=function(t){var e,n,i,a,r,o;if(n=d("#"+c),s.destroy(n),n.empty(),a=null!=(o=t.variables)?o.DMS_ERRORS:void 0){i=null;try{i=JSON.parse(a)}catch(t){t}if(i&&l.isArray(i)&&!(i.length<=0))return d("<h3>").text("Errors").appendTo(n),e=d("<div>").addClass("floatingGrid").appendTo(n),d("<div>").addClass("clearer").appendTo(n),r={dataSource:{data:i},columns:[{field:"message",title:"Error"}],editable:!1,scrollable:!1},e.kendoGrid(r),null}},a=function(){var t;return t={loaded:r,additionalElementId:c},{diagram:n.create("#strategyProductionWorkflowDiagram",t)}},u=function(t){var e,n,i,a;return a=null!=(e=t.model.get("currentActivity"))?e.get("workflow"):void 0,i={},(n=null!=e?e.get("name"):void 0)&&(i.exportName=n),t.productionWorkflowContext.diagram.displayInstanceWithTasks(i,a)},o=function(t,e){if("currentActivity"===e.field)return u(t)},i=function(t){return t.model.bind("change",o.bind(null,t))},{updateRawModel:function(t,e){return null},init:function(t){var e;return e=a(),t.productionWorkflowContext=e,i(t),null}}})}.call(this),function(){define("views/strategy/strategy.production",["kendo","views/strategy/production/production.activities","views/strategy/production/production.tasks","views/strategy/production/production.tab.strip","views/strategy/production/production.task.form","views/strategy/production/production.workflow"],function(l,t,e,n,i,a){var s;return s=[t,e,n,i,a],function(){return{}},function(t){return{currentActivity:null,currentTask:null,hasActivity:function(){return!!this.get("currentActivity")},hasTask:function(){return!!this.get("currentTask")}}},{updateRawModel:function(t,e){return null},init:function(t){var e,n,i,a,r,o,d;for(o={},t.productionContext=o,d={currentActivity:null,currentTask:null,hasActivity:function(){return!!this.get("currentActivity")},hasTask:function(){return!!this.get("currentTask")}},e=0,i=s.length;e<i;e++)s[e].updateRawModel(t,d);for(r=l.observable(d),o.model=r,n=0,a=s.length;n<a;n++)s[n].init(o);return l.bind($("#strategyProductionRoot"),r),null}}})}.call(this),function(){var U,A,F=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};U="#strategyWorkflowGrid",A="#strategyWorkflowUpload",define("views/strategy/strategy.workflow",["jquery","i18n","kendo","ui","core/ui/UploadUtils","views/workflow/diagram","core/api/WorkflowCategory","core/ui/IntegerUI","workflow/utils/WorkflowUtils","text!templates/workflow/workflow.grid.toolbar.html"],function(l,s,e,t,n,i,a,r,o,u){var d,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x,R,O;return f=n.UploadUtils,p=r.IntegerUI,m=t.grid,b=a.WorkflowCategory,d=[b.DATA_STRATEGY],v=o.WorkflowUtils,g=function(){return{diagram:i.create("#strategyWorkflowDiagram"),grid:null,upload:null}},y=function(t){var e,n;return null!=(e=(n=t.workflowContext).upload)&&e.destroy(),n.upload=null,l(A).empty(),null},S=function(t){return l(A).parents(".k-upload").find("ul.k-upload-files").remove(),!0},R=function(t){var e,n,i;return i=t.workflowContext,y(t),n={async:{saveUrl:"workflow/upload.json",saveField:"file"},complete:S.bind(null,t)},f.withDefaults(n),(e=l(A)).kendoUpload(n),i.upload=e.data("kendoUpload"),null},x=function(t,e){return e&&e.active?t.workflowContext.diagram.displayDefinition(e):t.workflowContext.diagram.clean()},N=function(t){var e,n;return e={category:d},n="workflow/list.json?"+l.param(e),l.getJSON(n).done(t.success).fail(t.error),null},k=function(t,e){var n,i;if(e&&e.data)return i=(n=e.data).category,0<=F.call(d,i)&&("create"===e.type?t.pushCreate(n):"destroy"===e.type&&t.pushDestroy(n)),null},E=function(t,e,n){if(n)return _.isArray(n)?_.each(n,k.bind(null,t)):k(t,n),null},C=function(t){return l("body").on("domosws:workflow:definitions",E.bind(null,t)),!0},c=null,T=function(){var t;return t={transport:{read:N,push:C},schema:{model:{id:"id",fields:{key:{type:"string"},name:{type:"string"},category:{type:"number"},version:{type:"number"}}}},sort:[{field:"name",dir:"asc"},{field:"version",dir:"desc"}]},new e.data.DataSource(t)},I=function(){return null==c&&(c=T()),c},h=function(t){var e,n;return null!=(e=(n=t.workflowContext).grid)&&e.destroy(),n.grid=null,l(U).empty(),null},w=function(t,e){return x(t,e)},D=function(t,e,n,i){var a;return a=m.getSelectedRows(i.sender),v.setupToolbarActions(a,e,i.sender).bind(n),w(t,a),null},O=function(n){var i,t,a,e,r,o,d;return i=l(U),d=n.workflowContext,h(n),a=new kendo.data.ObservableObject,r=kendo.template(u),o={param:{fileType:"bpmn"}},e={dataSource:I(),columns:[{field:"name",title:s.t("workflow:definitions.name")},b.column({field:"category",title:s.t("workflow:definitions.category")}),{field:"key",title:s.t("workflow:definitions.key")},p.column({field:"version",title:s.t("workflow:definitions.version")}),v.createActiveColumn()],pageable:m.defaultPageable(),scrollable:!0,editable:!1,height:400,change:D.bind(null,n,a,i),dataBound:function(t){var e;return e=m.getSelectedRows(t.sender),v.setupToolbarActions(e,a,t.sender).bind(i),w(n,e)}},m.withDefaults(e),e.toolbar=function(){return r(o)},i.kendoGrid(e),t=i.data("kendoGrid"),d.grid=t,a.hasData=function(){return!_.isEmpty(t.dataSource.data())},a.exportAsExcel=function(){return t.saveAsExcel()},null},{updateRawModel:function(t,e){},init:function(t){var e;return e=g(),t.workflowContext=e,O(t),R(t)}}})}.call(this),function(){define("views/strategy/strategy.ftp",["jquery","i18n","kendo","ui"],function(r,t,o,e){var d,n;return d=e.grid,n=function(t){var e,n,i,a;return e=r("#strategyFtpGrid"),o.destroy(e),e.empty(),n=t.ftpContext,a={dataSource:{transport:{read:{url:"ftp/account/list.json",dataType:"json"}},schema:{model:{id:"user",fields:{user:{type:"string"},password:{type:"string"}}}}},sort:[{field:"user",dir:"asc"}],editable:!1,columns:[{field:"user",title:"User",width:"100"},{field:"password",title:"Password",width:"200"}],pageable:d.defaultPageable(),height:500,scrollable:!0},d.withDefaults(a),e.kendoGrid(a),i=e.data("kendoGrid"),n.grid=i,null},{updateRawModel:function(t,e){},init:function(t){var e;return e={},t.ftpContext=e,n(t),null}}})}.call(this),function(){define("views/strategy/strategy.data.room",["jquery","i18n","kendo","ui","core/util/ObservableUtils","user/ui/UserUI"],function(r,o,d,t,e,n){var l,s,u,c,p,m,i,f;return s=e.ObservableUtils,u=n.UserUI,l=t.grid,m=function(t){return r.getJSON("strategy/room/list.json").done(t.success).fail(t.error),null},f=c=function(t){var e,n;return n=t.data,e={type:"POST",url:"strategy/room.json",dataType:"json",data:{data:d.stringify(n)}},r.ajax(e).done(t.success).fail(t.error)},p=function(t){var e,n;return n={id:t.data.id},e={type:"DELETE",url:"strategy/room.json?"+r.param(n),dataType:"json"},r.ajax(e).done(t.success).fail(t.error)},i=function(t){var e,n,i,a;return n=r("#strategyDataRoomGrid"),d.destroy(n),n.empty(),e=t.dataRoomContext,a={dataSource:{transport:{read:m,create:c,update:f,destroy:p},schema:{model:{id:"id",fields:{id:{type:"number"},user:{nullable:!0,validation:{required:!0}},type:{type:"string"},subType:{type:"string"}},userName:function(){return s.get(this,"user.name")}}}},columns:[{command:["edit","destroy"],title:" ",attributes:{style:"text-align: center;"},width:"250px"},u.DataRoom.column({field:"user",title:o.t("strategy:data.user"),width:"200px"}),{field:"type",title:o.t("strategy:data.type"),width:"200px"},{field:"subType",title:o.t("strategy:data.subType"),width:"200px"}],pageable:l.defaultPageable(),height:500,scrollable:!0,toolbar:["create"]},l.withDefaults(a),n.kendoGrid(a),i=n.data("kendoGrid"),e.grid=i,null},{updateRawModel:function(t,e){},init:function(t){var e;return e={},t.dataRoomContext=e,i(t),null}}})}.call(this),define("text!templates/strategy/strategy.html",[],function(){return'<div id="dataStrategyRoot">\n\t<ul data-role="menu" class="idxNavigableMenu">\n\t\t<li id="strategyProductionLi" class="k-state-active">\n\t\t\t<a href="javascript:void(0)" data-bind="click: productionMenuClick" data-i18n="strategy:menu.production"></a>\n\t\t</li>\n\t\t<li id="strategyDataLi">\n\t\t\t<a href="javascript:void(0)" data-bind="click: dataMenuClick" data-i18n="strategy:menu.data"></a>\n\t\t</li>\n\t\t<li id="strategyMappingLi">\n\t\t\t<a href="javascript:void(0)" data-bind="click: mappingMenuClick" data-i18n="strategy:menu.mapping"></a>\n\t\t</li>\n\t\t<li id="strategyWorkflowLi">\n\t\t\t<a href="javascript:void(0)" data-bind="click: workflowMenuClick" data-i18n="strategy:menu.workflow"></a>\n\t\t</li>\n\t\t<li id="strategyFtpLi">\n\t\t\t<a href="javascript:void(0)" data-bind="click: ftpMenuClick" data-i18n="strategy:menu.ftp"></a>\n\t\t</li>\n\t\t<li id="strategyDataRoomLi" data-bind="visible: isAdministrator">\n\t\t\t<a href="javascript:void(0)" data-bind="click: dataRoomMenuClick" data-i18n="strategy:menu.dataRoom"></a>\n\t\t</li>\n\t</ul>\n\n\t<div class="idxNavigableContent">\n\t\t<div data-bind="visible: isProductionActive">\n\t\t\t<div id="strategyProductionRoot">\n\t\t\t\t<div class="reportingTopPane">\n\t\t\t\t\t<div class="zoom0_8p">\n\t\t\t\t\t\t<h2 class="reportingTitle" data-i18n="strategy:production.activities"></h2>\n\t\t\t\t\t\t<div id="strategyActivityGrid"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="reportingTopPane">\n\t\t\t\t\t<div class="zoom0_8p">\n\t\t\t\t\t\t<h2 class="reportingTitle" data-i18n="strategy:production.tasks"></h2>\n\t\t\t\t\t\t<div id="strategyTaskGrid"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="clearer"></div>\n\t\t\t\t<div class="reportingBottomPane">\n\t\t\t\t\t<div id="strategyProductionTab" data-role="tabstrip" data-animation="{open:{effects:\'fadeIn\'}}" data-bind="visible: hasTab">\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li id="strategyProductionWorkflowLi" class="k-state-active" data-bind="visible: hasActivity">\n\t\t\t\t\t\t\t\t<span data-i18n="strategy:production.workflow"></span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li id="strategyProductionTaskLi" data-bind="visible: hasTask">\n\t\t\t\t\t\t\t\t<span data-i18n="strategy:production.task"></span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\x3c!-- Workflow --\x3e\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div id="strategyProductionWorkflowDiagram"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- Task --\x3e\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div id="strategyProductionTaskForm"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div data-bind="visible: isDataActive">\n\t\t\t<h2 data-i18n="strategy:menu.data"></h2>\n\n\t\t\t<input id="strategyDataImport" type="file"/>\n\t\t\t<p></p>\n\n\t\t\t<div id="strategyDataGrid" class="floatingGrid"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t</div>\n\t\t<div data-bind="visible: isMappingActive">\n\t\t\t<h2 data-i18n="strategy:menu.mapping"></h2>\n\n\t\t\t<div id="strategyMappingGrid" class="floatingGrid_1600_px"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t</div>\n\t\t<div data-bind="visible: isWorkflowActive">\n\t\t\t<h2 data-i18n="strategy:menu.workflow"></h2>\n\n\t\t\t<input id="strategyWorkflowUpload" type="file"/>\n\t\t\t<p></p>\n\t\t\t<div id="strategyWorkflowGrid" class="floatingGrid_50"></div>\n\t\t\t<div class="clearer"></div>\n\t\t\t<p></p>\n\t\t\t<div id="strategyWorkflowDiagram"></div>\n\t\t</div>\n\n\t\t<div data-bind="visible: isFtpActive">\n\t\t\t<h2 data-i18n="strategy:menu.ftp"></h2>\n\n\t\t\t<h4>Server <strong>ftps.domosfs.com</strong> on port <strong>1176</strong></h4>\n\n\t\t\t<div id="strategyFtpGrid" class="floatingGrid_500_px"></div>\n\t\t\t<div class="clearer"></div>\n\t\t</div>\n\n\t\t<div data-bind="visible: isDataRoomActive">\n\t\t\t<h2 data-i18n="strategy:menu.dataRoom"></h2>\n\n\t\t\t<div id="strategyDataRoomGrid" class="floatingGrid_900_px"></div>\n\t\t\t<div class="clearer"></div>\n\n\t\t</div>\n\t</div>\n\n</div>\n'}),function(){define("views/strategy/strategy",["jquery","lodash","i18n","kendo","site","core/ApplicationConstants","views/layout","views/strategy/strategy.data","views/strategy/strategy.mapping","views/strategy/strategy.menu","views/strategy/strategy.production","views/strategy/strategy.workflow","views/strategy/strategy.ftp","views/strategy/strategy.data.room","text!templates/strategy/strategy.html"],function(i,t,e,a,n,r,o,d,l,s,u,c,p,m,f){var b,v,y,h,g,T;return b=r.ApplicationConstants,y=n.map,v=[s,c,d,l,u,p,m],function(){return{}},h=function(t){var e,n,i;for(i={isAdministrator:function(){return b.isAdministrator()}},e=0,n=v.length;e<n;e++)v[e].updateRawModel(t,i);return i},T=function(t){var e,n;for(i("#dataStrategyRoot").localize(),e=0,n=v.length;e<n;e++)v[e].init(t);return null},g=function(t){var e,n,i;return e=t.model,i=a.template(f)({}),n={model:e,init:T.bind(null,t)},new a.View(i,n)},{init:function(){var t,e,n;return e=h(t={}),t.model=a.observable(e),n=g(t),o.register("strategy",y.strategy,n),null}}})}.call(this),function(){"use strict";define("views/strategy/mapping/mapping.completers",["jquery"],function(t){var e,u,n;return u=[(n=function(t,e){return{name:t,value:t,score:1e3,meta:e,lower:t.toLowerCase()}})("domos","Domos context"),n("excel","Domos XL"),n("xml","Domos XML"),n("result","Domos result"),n("error","Result"),n("property","Result"),n("setName","Property"),n("occupancy","Property (date, number)"),n("sheetCount","Excel"),n("sheetAt","Excel"),n("name","XL Sheet"),n("rowOrNullAt","XL Sheet"),n("cellOrNullAt","XL Sheet"),n("index","XL Row"),n("cellOrNull","XL Row"),n("columnIndex","XL Cell"),n("rowIndex","XL Cell"),n("tag","XL Cell"),n("type","XL Cell"),n("stringValue","XL Cell"),n("stringOrNull","XL Cell"),n("numberValue","XL Cell"),n("numberOrNull","XL Cell"),n("put","Property (key, value)"),n("root","XML -> Element"),n("xpath","XML (xpath) -> Element[]"),n("xpathFirst","XML (xpath) -> Element?"),n("name","XML Element"),n("attributes","XML Element -> Attribute[]"),n("attributeOrNull","XML Element (name) -> Attribute?"),n("children","XML Element -> Element[]"),n("stringValue","XML Element"),n("stringOrNull","XML Element"),n("doubleValue","XML Element"),n("doubleOrNull","XML Element"),n("dateValue","XML Element"),n("dateOrNull","XML Element"),n("name","XML Attribute"),n("stringValue","XML Attribute"),n("stringOrNull","XML Attribute"),n("doubleValue","XML Attribute"),n("doubleOrNull","XML Attribute"),n("dateValue","XML Attribute"),n("dateOrNull","XML Attribute")],e=[{getCompletions:function(t,e,n,i,a){var r,o,d,l,s;if(!i||i.length<=0)return a(null,[]);for(l=i.toLowerCase(),r=[],o=0,d=u.length;o<d;o++)(s=u[o]).lower.startsWith(l)&&r.push(s);return a(null,r)}}],{list:function(){return e}}})}.call(this),function(){var D,S,N;D="#strategyMappingTestDataGrid",S="#strategyMappingTestErrorGrid",N="#strategyMappingTestLogGrid",define("views/strategy/mapping/mapping.test",["jquery","lodash","i18n","kendo","ui","core/ui/DateUI","core/ui/IntegerUI","lp/views/simulation/LpSimulationGrid"],function(r,i,a,o,t,e,n,d){var l,s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E;return l=e.DateUI,s=n.IntegerUI,c=t.grid,u=d.LpSimulationGrid,b=function(t){var e,n;return n=t.id,e=t.fileName,n&&e?"<a href='strategy/data/download?id="+n+"' download='"+e+"'>"+e+"</a>":""},T=function(t){var e,n;return e=r(D),o.destroy(e),e.empty(),n={dataSource:{transport:{read:"strategy/data/list.json"},schema:{model:{id:"id",fields:{fileName:{type:"string",editable:!1},type:{type:"string"},subType:{type:"string"},date:{type:"date"},auditDate:{type:"date"},startValidityDate:{type:"date"},endValidityDate:{type:"date"}}}}},columns:[{field:"fileName",title:a.t("strategy:data.fileName"),template:b,width:"200px"},{field:"type",title:a.t("strategy:data.type"),width:"200px"},{field:"subType",title:a.t("strategy:data.subType"),width:"200px"},l.column({field:"date",title:a.t("strategy:data.date"),width:"100px"}),l.column({field:"auditDate",title:a.t("strategy:data.auditDate"),width:"100px"}),l.column({field:"startValidityDate",title:a.t("strategy:data.startValidityDate"),width:"100px"}),l.column({field:"endValidityDate",title:a.t("strategy:data.endValidityDate"),width:"100px"})],editable:!1,pageable:c.defaultPageable(),height:800,scrollable:!0},c.withDefaults(n),e.kendoGrid(n),null},v=function(t,e){var n;if((n=e.line)&&!(n<0))return t.editor.gotoLine(n),null},y=function(t,e){var n,i,a;if(i=r(S).data("kendoGrid"))return n=null,0<(a=i.select()).length&&(n=i.dataItem(a[0])),v(t,n),null},I=function(t,e){var n;return n={dataSource:{data:e},columns:[{field:"tag",title:a.t("strategy:mapping.test.tag")},{field:"message",title:a.t("strategy:mapping.test.message")},s.column({field:"line",title:a.t("strategy:mapping.test.line")}),s.column({field:"column",title:a.t("strategy:mapping.test.column")})],editable:!1,scrollable:!1,selectable:!0,change:y.bind(null,t)},r(S).kendoGrid(n)},C=function(t,e){var n;return n={dataSource:{data:e},columns:[{field:"level",title:a.t("strategy:mapping.test.level")},{field:"message",title:a.t("strategy:mapping.test.message")}],editable:!1,scrollable:!1,selectable:!0,change:y.bind(null,t)},r(N).kendoGrid(n)},k=function(t,e){return u.display(null,e,r("#strategyMappingTestTrackerGrid"))},w=function(t,e){var n;if(p(t),e)return i.has(e,"errors")&&I(t,e.errors),i.has(e,"logs")&&C(t,e.logs),i.has(e,"tracker")&&k(0,e.tracker),n="",i.has(e,"data")&&(n=JSON.stringify(e.data,null,2)),t.testModel.set("resultString",n),null},p=function(t){var e;return t.testModel.set("resultString",""),e=r(S),o.destroy(e),e.empty(),e=r(N),o.destroy(e),e.empty(),null},h=function(t,e){return w(t,e)},g=function(){return null},E=function(t){var e,n,i,a;if((i=r(D).data("kendoGrid"))&&(a=i.dataItem(i.select())))return n=a.id,p(t),e={type:"POST",url:"strategy/test.json",dataType:"json",data:{id:n,script:t.model.get("script")}},r.ajax(e).done(h.bind(null,t)).fail(g),null},m=function(t){return p(t),null},f=function(t){return{testClick:E.bind(null,t),clearClick:m.bind(null,t),resultString:""}},{init:function(t){var e,n;return n=f(t),e=o.observable(n),t.testModel=e,o.bind(r("#strategyMappingTestRoot"),e),T(),null},reset:function(t){return p(t),null}}})}.call(this),define("text!templates/strategy/edit/mapping.html",[],function(){return'<div id="strategyMappingRoot" class="idxStandardContent" style="min-height: 2000px">\n\t<h1 data-i18n="strategy:mapping.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="strategy:mapping.edit" data-bind="invisible: isNew"></h1>\n\n\t<div id="strategyMappingActions"></div>\n\n\t<h2 data-i18n="strategy:mapping.sections.mainInformation"></h2>\n\t<table class="formTable">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="name" data-i18n="strategy:mapping.name"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="name" name="Name" class="k-textbox" type="text" data-bind="value: name" required/>\n\t\t\t</td>\n\t\t\t<td></td>\n\t\t\t<td></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="type" data-i18n="strategy:mapping.type"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="type" name="Type" class="k-textbox" type="text" data-bind="value: type"/>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="subType" data-i18n="strategy:mapping.subType"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="subType" name="subType" class="k-textbox" type="text" data-bind="value: subType"/>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="description" data-i18n="strategy:mapping.description"></label>\n\t\t\t</td>\n\t\t\t<td colspan="3">\n\t\t\t\t<textarea id="description" name="description" class="k-textbox" data-bind="value: description"></textarea>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n\t<h2 data-i18n="strategy:mapping.sections.script"></h2>\n\n\t<div id="strategyMappingScript" class="riskScript"></div>\n\t<div id="scriptHelpRoot">\n\t\t<button class="k-button" data-i18n="scripts:editor.helpButton" data-bind="click: helpClick"></button>\n\t</div>\n\n\t\n\t<h2 data-i18n="strategy:mapping.sections.test"></h2>\n\t<div id="strategyMappingTestRoot">\n\n\t\t<div id="strategyMappingTestDataGrid" class="floatingGrid_1100_px"></div>\n\t\t<div class="clearer"></div>\n\n\t\t<table>\n\t\t\t\t<td>\n\t\t\t\t\t<button class="k-button" data-i18n="strategy:mapping.actions.test" data-bind="click: testClick"></button>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<button class="k-button" data-i18n="strategy:mapping.actions.clear" data-bind="click: clearClick"></button>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n\n\t\t<h3 data-i18n="strategy:mapping.sections.error"></h3>\n\t\t<div id="strategyMappingTestErrorGrid" class="floatingGrid"></div>\n\t\t<div class="clearer"></div>\n\t\t<h3 data-i18n="strategy:mapping.sections.log"></h3>\n\t\t<div id="strategyMappingTestLogGrid" class="floatingGrid"></div>\n\t\t<div class="clearer"></div>\n\t\t<h3 data-i18n="strategy:mapping.sections.tracker"></h3>\n\t\t<div id="strategyMappingTestTrackerGrid" class="floatingGrid_1100_px"></div>\n\t\t<div class="clearer"></div>\n\n\t\t<textarea id="strategyMappingScriptTestResult" readonly  style="width:100%;height:500px" data-bind="value: resultString"></textarea>\n\n\t</div>\n\n</div>\n\n\n\n'}),function(){define("views/strategy/mapping/mapping",["jquery","i18n","kendo","ui","views/strategy/mapping/mapping.completers","views/strategy/mapping/mapping.test","views/common/script.help","text!templates/strategy/edit/mapping.html"],function(t,e,n,i,d,l,s,a){var u,c,r,o;return i.grid.transports,void 0===o&&(o=window.ace),u=o,c=function(t){return t.editorLocked||t.model.set("script",t.editor.getSession().getValue()),null},r=function(t){var e,n,i,a,r,o;for(r={enableBasicAutocompletion:!(t.editorLocked=!1),fontSize:"12pt",maxLines:50},(n=u.edit("strategyMappingScript")).setOptions(r),n.setTheme("ace/theme/chrome"),n.getSession().setMode("ace/mode/javascript"),i=0,a=(o=d.list()).length;i<a;i++)e=o[i],n.completers.push(e);return(t.editor=n).getSession().on("change",c.bind(null,t)),s.setup(t),l.init(t),null},{getTemplates:function(){return{view:a}},createRawModel:function(){return{id:"",type:"",subType:"",script:"",description:""}},updateModel:function(t,e){return t.set("id",e.id),t.set("name",e.name),t.set("type",e.type),t.set("subType",e.subType),t.set("script",e.script),t.set("description",e.description),null},viewShow:function(t){var e;return(e=t.editor)&&(t.editorLocked=!0,e.getSession().setValue(t.model.get("script")),e.getSession().setUndoManager(new u.UndoManager),e.resize(),t.editorLocked=!1),l.reset(t),null},init:function(t){return r(t),null}}})}.call(this),function(){define("views/strategy/mapping/edit.mapping",["site","views/edit/edit","views/strategy/mapping/mapping"],function(t,e,n){var i,a,r,o,d,l,s,u,c,p;return r=t.router,a=t.map,l=function(t){return t.create(n)},c=function(t){return null==o&&(o=l(t)),o},p=function(t){var e;return(e=t.module)&&e.viewShow&&e.viewShow(t),null},d=function(){var t;return t={key:"strategyMappingEdit",rootId:"strategyMappingRoot",actionsId:"strategyMappingActions",url:"strategy/mapping.json",viewShow:p,getView:c},e.create(t)},i=o=null,u=function(){return null==i&&(i=d()),i},s=function(t){return u().display(t)},{init:function(){return r.addRoute(a.strategyMappingEdit,s)}}})}.call(this),define("text!templates/strategy/edit/activity.template.html",[],function(){return'<div id="strategyActivityRoot" class="idxStandardContent">\n\t<h1 data-i18n="strategy:activity.TEMPLATE.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="strategy:activity.TEMPLATE.edit" data-bind="invisible: isNew"></h1>\n\n\t<div id="strategyActivityActions"></div>\n\n\t<h2 data-i18n="strategy:activity.sections.mainInformation"></h2>\n\t<table class="formTable">\n\t\t<tr data-bind="visible: isNew">\n\t\t\t<td>\n\t\t\t\t<label for="workflow" data-i18n="strategy:activity.workflowDefinition"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="workflow" name="workflow" data-role="domosworkflowstrategy" data-bind="value: workflowDefinition"/>\n\t\t\t</td>\n\t\t\t<td></td>\n\t\t\t<td></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="name" data-i18n="strategy:activity.name"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="name" name="Name" class="k-textbox" type="text" data-bind="value: name" required/>\n\t\t\t</td>\n\t\t\t<td></td>\n\t\t\t<td></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="dataType" data-i18n="strategy:activity.dataType"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="dataType" name="Data type" class="k-textbox" type="text" data-bind="value: dataType"/>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="dataSubType" data-i18n="strategy:activity.dataSubType"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="dataSubType" name="Data sub-type" class="k-textbox" type="text" data-bind="value: dataSubType"/>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n\t<h2 data-i18n="strategy:activitiy.sections.template"></h2>\n\n\t<div id="strategyActivityTemplate" class="spreadsheet"></div>\n\n\n</div>\n'}),function(){var u;u="#strategyActivityTemplate",define("views/strategy/activity/template/activity",["jquery","lodash","i18n","kendo","core/api/StrategyActivityType","text!templates/strategy/edit/activity.template.html","workflow/ui/WorkflowUI"],function(r,t,e,i,n,a){var o,d,l,s;return o=n.StrategyActivityType,d=function(t){var e,n,i,a;if(i=r(u).data("kendoSpreadsheet")){if(t.spreadsheetLocked=!0,n=null,a=t.model.get("template"))try{n=JSON.parse(a)}catch(t){e=t,console.error(e)}return null==n&&(n={sheets:[{name:"Sheet1"}]}),i.fromJSON(n),t.spreadsheetLocked=!1,null}},s=function(t){var e;if(!t.spreadsheetLocked&&(e=r(u).data("kendoSpreadsheet")))return t.model.set("template",JSON.stringify(e.toJSON())),null},l=function(t){var e,n;return e=r(u),i.destroy(e),e.empty(),t.spreadsheetLocked=!1,n={change:s.bind(null,t)},e.kendoSpreadsheet(n),null},{getTemplates:function(){return{view:a}},createRawModel:function(){return{id:"",_id:"",type:o.TEMPLATE,name:"",dataType:"",dataSubType:"",workflow:"",workflowDefinition:null,workflowRunning:!1,template:""}},updateModel:function(t,e){return t.set("id",e.id),t.set("_id",e._id),t.set("type",e.type),t.set("name",e.name),t.set("dataType",e.dataType),t.set("dataSubType",e.dataSubType),t.set("workflow",e.workflow),t.set("workflowDefinition",e.workflowDefinition),t.set("workflowRunning",e.workflowRunning),t.set("template",e.template),null},init:function(t){return l(t)},viewShow:function(t){return d(t)}}})}.call(this),define("text!templates/strategy/edit/activity.standard.html",[],function(){return'<div id="strategyActivityRoot" class="idxStandardContent">\n\t<h1 data-i18n="strategy:activity.STANDARD.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="strategy:activity.STANDARD.edit" data-bind="invisible: isNew"></h1>\n\n\t<div id="strategyActivityActions"></div>\n\n\t<h2 data-i18n="strategy:activity.sections.mainInformation"></h2>\n\t<table class="formTable">\n\t\t<tr data-bind="visible: isNew">\n\t\t\t<td>\n\t\t\t\t<label for="workflow" data-i18n="strategy:activity.workflowDefinition"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="workflow" name="workflow" data-role="domosworkflowstrategy" data-bind="value: workflowDefinition"/>\n\t\t\t</td>\n\t\t\t<td></td>\n\t\t\t<td></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="name" data-i18n="strategy:activity.name"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="name" name="Name" class="k-textbox" type="text" data-bind="value: name" required/>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="dataFile" data-i18n="strategy:activity.dataFile"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="dataFile" name="Data file" data-role="domosstrategydatafile" data-bind="value: dataFileId" required/>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n\n</div>\n'}),define("strategy/repository/StrategyDataFileRepository",["require","exports","core/web/WebHttp"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StrategyDataFileRepository=void 0;var i=function(){function t(){}return t.fetchIdentifiables=function(){return n.WebHttp.getJson("strategy/data/id/list.json")},t}();e.StrategyDataFileRepository=i}),define("strategy/ui/StrategyDataFileUI",["require","exports","core/ui/widget/IdWidgetUtils","core/ui/grid/column/IdentifiableColumnUtils","strategy/repository/StrategyDataFileRepository"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StrategyDataFileUI=void 0;var r=function(){function t(){}return t.widget=n.IdWidgetUtils.createDropList("DomosStrategyDataFile",a.StrategyDataFileRepository.fetchIdentifiables,!0),t.column=i.IdentifiableColumnUtils.createFactory(t.widget),t}();e.StrategyDataFileUI=r}),function(){define("views/strategy/activity/standard/activity",["jquery","lodash","i18n","kendo","core/api/StrategyActivityType","text!templates/strategy/edit/activity.standard.html","strategy/ui/StrategyDataFileUI","workflow/ui/WorkflowUI"],function(t,e,n,i,a,r){var o;return o=a.StrategyActivityType,{getTemplates:function(){return{view:r}},createRawModel:function(){return{id:"",_id:"",type:o.TEMPLATE,name:"",dataType:"",dataSubType:"",workflow:"",workflowDefinition:null,workflowRunning:!1,dataFileId:null}},updateModel:function(t,e){return t.set("id",e.id),t.set("_id",e._id),t.set("type",e.type),t.set("name",e.name),t.set("dataType",e.dataType),t.set("dataSubType",e.dataSubType),t.set("workflow",e.workflow),t.set("workflowDefinition",e.workflowDefinition),t.set("workflowRunning",e.workflowRunning),t.set("dataFileId",e.dataFileId),null},init:function(t){},viewShow:function(t){}}})}.call(this),function(){var v,y;v="#strategyActivityTestErrorGrid",y="#strategyActivityTestLogGrid",define("views/strategy/activity/multiple/activity.test",["jquery","lodash","i18n","kendo","ui","core/ui/IntegerUI"],function(i,a,r,o,t,e){var d,l,n,s,u,c,p,m,f,b;return d=e.IntegerUI,t.grid,p=function(t,e){var n;return n={dataSource:{data:e},columns:[{field:"tag",title:r.t("strategy:activity.test.tag")},{field:"message",title:r.t("strategy:activity.test.message")},d.column({field:"line",title:r.t("strategy:activity.test.line")}),d.column({field:"column",title:r.t("strategy:activity.test.column")})],editable:!1,scrollable:!1,selectable:!0},i(v).kendoGrid(n)},m=function(t,e){var n;return n={dataSource:{data:e},columns:[{field:"level",title:r.t("strategy:activity.test.level")},{field:"message",title:r.t("strategy:activity.test.message")}],editable:!1,scrollable:!1,selectable:!0},i(y).kendoGrid(n)},f=function(t,e){var n;if(l(t),e)return a.has(e,"errors")&&p(0,e.errors),a.has(e,"logs")&&m(0,e.logs),n="",a.has(e,"data")&&(n=JSON.stringify(e.data,null,2)),t.testModel.set("resultString",n),null},l=function(t){var e;return t.testModel.set("resultString",""),e=i(v),o.destroy(e),e.empty(),e=i(y),o.destroy(e),e.empty(),null},u=function(t,e){return f(t,e)},c=function(){return null},b=function(t){var e,n;return l(t),n=t.model.get("entries").toJSON(),e={data:JSON.stringify(n)},i.getJSON("strategy/data/test.json",e).done(u.bind(null,t)).fail(c)},n=function(t){return l(t),null},s=function(t){return{testClick:b.bind(null,t),clearClick:n.bind(null,t),resultString:""}},{init:function(t){var e,n;return n=s(t),e=o.observable(n),t.testModel=e,o.bind(i("#strategyActivityTestRoot"),e),null},reset:function(t){return l(t),null}}})}.call(this),define("text!templates/strategy/edit/activity.multiple.html",[],function(){return'<div id="strategyActivityRoot" class="idxStandardContent">\n\t<h1 data-i18n="strategy:activity.MULTIPLE.new" data-bind="visible: isNew"></h1>\n\t<h1 data-i18n="strategy:activity.MULTIPLE.edit" data-bind="invisible: isNew"></h1>\n\n\t<div id="strategyActivityActions"></div>\n\n\t<h2 data-i18n="strategy:activity.sections.mainInformation"></h2>\n\t<table class="formTable">\n\t\t<tr data-bind="visible: isNew">\n\t\t\t<td>\n\t\t\t\t<label for="workflow" data-i18n="strategy:activity.workflowDefinition"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="workflow" name="workflow" data-role="domosworkflowstrategy" data-bind="value: workflowDefinition"/>\n\t\t\t</td>\n\t\t\t<td></td>\n\t\t\t<td></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="name" data-i18n="strategy:activity.name"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="name" name="Name" class="k-textbox" type="text" data-bind="value: name" required/>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<label for="dataType" data-i18n="strategy:activity.dataType"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="dataType" name="Data type" class="k-textbox" type="text" data-bind="value: dataType"/>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<label for="dataSubType" data-i18n="strategy:activity.dataSubType"></label>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<input id="dataSubType" name="Data sub-type" class="k-textbox" type="text" data-bind="value: dataSubType"/>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n\t<h2 data-i18n="strategy:activity.sections.dataFiles"></h2>\n\n\t<div id="strategyActivityDataFileGrid" class="floatingGrid"></div>\n\t<div class="clearer"></div>\n\t\n\n\t<h2 data-i18n="strategy:activity.sections.test"></h2>\n\t<div id="strategyActivityTestRoot">\n\t\t<table>\n\t\t\t\t<td>\n\t\t\t\t\t<button class="k-button" data-i18n="strategy:activity.actions.test" data-bind="click: testClick"></button>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<button class="k-button" data-i18n="strategy:activity.actions.clear" data-bind="click: clearClick"></button>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n\n\t\t<h3 data-i18n="strategy:activity.sections.error"></h3>\n\t\t<div id="strategyActivityTestErrorGrid" class="floatingGrid"></div>\n\t\t<div class="clearer"></div>\n\t\t<h3 data-i18n="strategy:activity.sections.log"></h3>\n\t\t<div id="strategyActivityTestLogGrid" class="floatingGrid"></div>\n\t\t<div class="clearer"></div>\n\n\t\t<textarea id="strategyActivityScriptTestResult" readonly  style="width:100%;height:500px" data-bind="value: resultString"></textarea>\n\n\t</div>\n\n</div>\n'}),function(){var h=[].slice;define("views/strategy/activity/multiple/activity",["jquery","lodash","i18n","kendo","ui","core/util/ObservableUtils","strategy/ui/StrategyDataFileUI","core/api/StrategyActivityType","views/strategy/activity/multiple/activity.test","core/ui/IntegerUI","text!templates/strategy/edit/activity.multiple.html","workflow/ui/WorkflowUI"],function(i,t,a,e,n,r,o,d,l,s,u){var c,p,m,f,b,v,y;return c=s.IntegerUI,f=r.ObservableUtils,v=o.StrategyDataFileUI,p=n.grid,m=p.transports,b=d.StrategyActivityType,y=function(t){var e,n;return e=t.model,n={dataSource:{transport:m.createLocal({data:e.get("entries")}),schema:{model:{id:"id",fields:{dataFileId:{nullable:!0,validation:{required:!0}},priority:{type:"number",validation:{required:!0},defaultValue:0}},dataFileIdName:function(){return f.get(this,"dataFileId.name")}}}},columns:[{command:["edit","destroy"],title:" "},v.column({field:"dataFileId",title:a.t("strategy:activity.dataFile")}),c.column({field:"priority",title:a.t("strategy:activity.priority")})],toolbar:["create"],scrollable:!1},p.withDefaults(n),i("#strategyActivityDataFileGrid").kendoGrid(n)},{getTemplates:function(){return{view:u}},createRawModel:function(){return{id:"",_id:"",type:b.MULTIPLE,name:"",dataType:"",dataSubType:"",workflow:"",workflowDefinition:null,workflowRunning:!1,entries:[]}},updateModel:function(t,e){var n;return t.set("id",e.id),t.set("_id",e._id),t.set("type",e.type),t.set("name",e.name),t.set("dataType",e.dataType),t.set("dataSubType",e.dataSubType),t.set("workflow",e.workflow),t.set("workflowDefinition",e.workflowDefinition),t.set("workflowRunning",e.workflowRunning),(n=t.get("entries")).splice.apply(n,[0,n.length].concat(h.call(e.entries))),null},init:function(t){return y(t),l.init(t),null},viewShow:function(t){return l.reset(t),null}}})}.call(this),function(){define("views/strategy/activity/edit.activity",["jquery","i18n","kendo","site","views/edit/edit","core/api/StrategyActivityType","views/strategy/activity/template/activity","views/strategy/activity/standard/activity","views/strategy/activity/multiple/activity"],function(t,e,n,i,a,r,o,d,l){var s,u,c,p,m,f,b,v,y,h,g,T,I,C,w,k,E,D,S,N,x;return p=i.router,u=i.map,m=r.StrategyActivityType,(b={})[m.TEMPLATE]=o,b[m.STANDARD]=d,b[m.MULTIPLE]=l,w=function(t){var e,n;return n={},(e=t.module)&&e.updateValidatorOptions&&e.updateValidatorOptions(t,n),n},g=function(t){return{id:t}},C=function(t){return{type:t}},f={},N=function(t,e){var n,i;return(i=f[e])||(n=b[e])&&(i=t.create(n),f[e]=i),i},S=function(t,e){return e?N(t,e.type):null},x=function(t){var e;return(e=t.module)&&e.viewShow&&e.viewShow(t),null},v=function(t){return e.t("strategy:activity."+m[t.type]+".confirmDestroy")},I=function(){return{key:"strategyActivityEdit",rootId:"strategyActivityRoot",actionsId:"strategyActivityActions",url:"strategy/activity.json",askDestroy:v,createValidatorOptions:w,viewShow:x,getView:S}},T=function(){var t;return(t=I()).createGetParameters=C,a.create(t)},h=function(){var t;return(t=I()).createGetParameters=g,a.create(t)},D=function(){return null==c&&(c=T()),c},s=c=null,E=function(){return null==s&&(s=h()),s},y=function(t){return D().display(t)},k=function(t){return E().display(t)},{init:function(){return p.addRoute(u.strategyActivityEdit,k),p.addRoute(u.strategyActivityCreate,y)}}})}.call(this),function(){define("views/strategy/module",["views/strategy/strategy","views/strategy/mapping/edit.mapping","views/strategy/activity/edit.activity"],function(t,e,n){return{init:function(){return t.init(),e.init(),n.init(),null}}})}.call(this),define("tag/ui/TagCategoryUI",["require","exports","core/ui/grid/column/IdentifiableColumnUtils"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagCategoryUI=void 0;var i=function(){function t(){}return t.column=n.IdentifiableColumnUtils.createFactory(),t}();e.TagCategoryUI=i}),define("tag/view/TagEntryGrid",["require","exports","core/util/ObservableUtils","core/ui/IntegerUI","core/ui/NumberUI","core/ui/grid/GridUtils"],function(t,e,i,a,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagEntryGrid=void 0;var n=function(){function t(){}return t.init=function(t,e){kendo.destroy(t),t.empty();var n={dataSource:{data:e,schema:{model:kendo.data.Model.define({id:"id",fields:{stringId:{type:"string"},label:{type:"string"},priority:{type:"number"},value:{type:"number"}},name:function(){return i.ObservableUtils.get(this,"label")},categoryName:function(){return i.ObservableUtils.get(this,"category.name")}})}},columns:[{field:"stringId",title:"ID",width:"200px"},{field:"label",title:"Label",width:"200px"},a.IntegerUI.column({field:"priority",title:"Priority",width:"100px"}),r.NumberUI.column({field:"value",title:"Value",width:"100px"})],pageable:o.GridUtils.defaultPageable(),scrollable:!0,height:400,dataBound:function(t){o.GridUtils.resizeGrid(t.sender)}};o.GridUtils.withDefaults(n),t.kendoGrid(n)},t}();e.TagEntryGrid=n}),define("tag/web/TagDefinitionMap",["require","exports","core/web/UrlBuilder"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagDefinitionMap=void 0;var i=function(){function t(){}return t.tagDependency=function(t){return n.UrlBuilder.from("tag/definition/dependencies").add("id",t).build()},t}();e.TagDefinitionMap=i}),define("tag/view/TagDefinitionGrid",["require","exports","i18n","core/ui/grid/GridToolbar","core/ui/grid/GridUtils","tag/ui/TagCategoryUI","core/ui/IntegerUI","core/api/TagType","core/api/TagTarget","./TagEntryGrid","core/util/ObservableUtils","tag/web/TagDefinitionMap","exportJson/views/ExportToJsonWindow","exportJson/data/StrategyObjectType","finance/data/FinancialValueCategory"],function(t,e,o,d,l,s,u,c,p,m,f,b,v,y,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagDefinitionGrid=void 0;var g=kendo.guid();function T(t,e){var n,i,a=null,r=e?e.select():null;0<r.length&&(a=e.dataItem(r).toJSON()),n=t,(i=a)&&i.id?(n.set("isDefinitionSelected",!0),n.set("noSelected",!1),n.set("currentDefinitionId",i.id),n.set("currentDefinition",i)):(n.set("isDefinitionSelected",!1),n.set("noSelected",!0),n.set("currentDefinitionId",null),n.set("currentDefinition",null))}var n=function(){function t(){}return t.init=function(t,e,n){kendo.destroy(t),t.empty();var i=(new d.GridToolbar).addClick(o.I18N.t("tags:tagDependency.actions.showDependencies"),"k-icon k-i-table",function(){return function(t){var e=t.data("kendoGrid");if(e){var n=e.select();if(0<n.length){var i=e.dataItem(n);window.location.href=b.TagDefinitionMap.tagDependency(i.get("id"))}}}(t)},"showId").addClick(o.I18N.t("tags:actions.exportJson"),"",function(){return function(t){var e=t.data("kendoGrid");if(e){var n=e.dataSource.data().toJSON().map(function(t){return{id:t.id,name:t.label?t.label:t.stringId}});v.ExportToJsonWindow.open(n,y.StrategyObjectType.TAG_DEFINITION)}}(t)},g),a=kendo.data.Model.define({id:"id",fields:{stringId:{type:"string"},type:{type:"number"},target:{type:"number"},category:{nullable:!0},label:{type:"string"},priority:{type:"number"},financialColumn:{type:"number"}},categoryName:function(){return f.ObservableUtils.get(this,"category.name")||""}});n.bind("change",function(t,e,n){if("currentDefinition"===n.field){var i=t.get("currentDefinition");i&&m.TagEntryGrid.init(e,i.entries)}}.bind(null,n,e));var r={dataSource:{transport:{read:{url:"tag/definition/list.json",dataType:"json"}},schema:{model:a}},columns:[{field:"stringId",title:o.I18N.t("tags:definitions.stringId"),width:400},{field:"label",title:o.I18N.t("tags:definitions.label"),width:400},s.TagCategoryUI.column({field:"category",title:o.I18N.t("tags:definitions.category"),width:200}),u.IntegerUI.column({field:"priority",title:o.I18N.t("tags:definitions.priority"),width:80}),c.TagType.column({field:"type",title:o.I18N.t("tags:definitions.type"),width:100}),p.TagTarget.column({field:"target",title:o.I18N.t("tags:definitions.target"),width:100}),h.FinancialValueCategory.column({field:"financialColumn",title:o.I18N.t("tags:definitions.financialColumn"),width:300})],pageable:l.GridUtils.defaultPageable(),scrollable:!0,height:600,change:function(t){l.GridUtils.onRowSelectChange(t.sender,[$("#showId")]),T(n,t.sender)},dataBound:function(t){l.GridUtils.onRowSelectChange(t.sender,[$("#showId")]),T(n,t.sender),l.GridUtils.resizeGrid(t.sender)}};r.toolbar=i.template(),l.GridUtils.withDefaults(r),t.kendoGrid(r),i.bind(t)},t}();e.TagDefinitionGrid=n}),define("tag/view/TagCategoryGrid",["require","exports","i18n","core/ui/IntegerUI","core/ui/grid/GridUtils","tag/repository/TagCategoryRepository","lodash","core/ui/grid/GridToolbar","exportJson/views/ExportToJsonWindow","exportJson/data/StrategyObjectType"],function(t,e,a,r,o,d,l,s,u,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagCategoryGrid=void 0;var p=kendo.guid();var n=function(){function t(){}return t.init=function(t){kendo.destroy(t),t.empty();var e=(new s.GridToolbar).addClick(a.I18N.t("tags:actions.exportJson"),"",function(){return function(t){var e=t.data("kendoGrid");if(e){var n=e.dataSource.data().toJSON().map(function(t){return{id:t.id,name:t.label?t.label:t.stringId}});u.ExportToJsonWindow.open(n,c.StrategyObjectType.TAG_CATEGORY)}}(t)},p),n=kendo.data.Model.define({id:"id",fields:{stringId:{type:"string"},label:{type:"string"},priority:{type:"number"}}}),i={dataSource:{transport:{read:function(e){d.TagCategoryRepository.list().then(function(t){return l.map(t,function(t){return new n(t)})}).then(function(t){return e.success(t)}).catch(function(t){return e.error(t)})}},schema:{model:n},sort:[{field:"priority",dir:"asc"},{field:"label",dir:"asc"}]},columns:[{field:"stringId",title:a.I18N.t("tags:categories.stringId"),width:"200px"},{field:"label",title:a.I18N.t("tags:categories.label"),width:"200px"},r.IntegerUI.column({field:"priority",title:a.I18N.t("tags:categories.priority"),width:"200px"})],pageable:o.GridUtils.defaultPageable(),scrollable:!0,height:400,dataBound:function(t){o.GridUtils.resizeGrid(t.sender)}};i.toolbar=e.template(),o.GridUtils.withDefaults(i),t.kendoGrid(i),e.bind(t)},t}();e.TagCategoryGrid=n}),define("text!templates/tag/tags.html",[],function(){return'<div id="tagsRoot" class="idxStandardContent">\n\t<h1>Tags</h1>\n\n\t<h2>Definitions</h2>\n\t<div id="tagsDefinitionGrid" class="floatingGrid_1600_px"></div>\n\t<div class="clearer"></div>\n\t<div data-bind="visible: isDefinitionSelected">\n\t\t<h2>Entries</h2>\n\t\t<div id="tagsDefinitionEntryGrid" class="floatingGrid_800_px"></div>\n\t\t<div class="clearer"></div>\n\t</div>\n\t\t<h2>Categories</h2>\n\n\t\t<div id="tagsCategoryGrid" class="floatingGrid_800_px"></div>\n\t\t<div class="clearer"></div>\n</div>'}),function(){define("views/tag/tags",["jquery","lodash","i18n","kendo","site","ui","core/util/ObservableUtils","tag/ui/TagCategoryUI","core/api/TagTarget","core/api/TagType","tag/repository/TagCategoryRepository","views/layout","core/ui/IntegerUI","core/ui/NumberUI","core/ui/grid/GridToolbar","tag/view/TagDefinitionGrid","tag/view/TagCategoryGrid","text!templates/tag/tags.html"],function(n,t,e,a,i,r,o,d,l,s,u,c,p,m,f,b,v,y){var h,g,T,I,C;return m.NumberUI,p.IntegerUI,u.TagCategoryRepository,o.ObservableUtils,d.TagCategoryUI,l.TagTarget,s.TagType,h=i.map,i.router,r.grid,T=b.TagDefinitionGrid,g=v.TagCategoryGrid,f.GridToolbar,function(){return{}},function(t){return{}},C=function(t){var e;return n("#tagsRoot").localize(),e=t.model,T.init(n("#tagsDefinitionGrid"),n("#tagsDefinitionEntryGrid"),e),g.init(n("#tagsCategoryGrid")),null},I=function(t){var e,n,i;return e=t.model,i=a.template(y)({}),n={model:e,init:C.bind(null,t)},new a.View(i,n)},{init:function(){var t,e,n;return e={},(t={}).model=a.observable(e),n=I(t),c.register("tags",h.tags,n),null}}})}.call(this),function(){define("views/tag/module",["views/tag/tags"],function(t){return{init:function(){return t.init(),null}}})}.call(this),define("text!templates/temp/finance.test.html",[],function(){return'<div id="financeTestRoot" class="idxStandardContent">\n\t<h1>Test playground</h1>\n\t<p>\n\t\tUpload a XML test file and download the result XML file\n\t</p>\n\t<input name="file" id="financeTestUpload" type="file" aria-label="file"/>\n\n\t<a id="financeTestDownload" class="k-button" href="javascript:void(0)">Test</a>\n</div>'}),function(){var p;p="#financeTestDownload",define("views/temp/finance.test",["jquery","lodash","i18n","kendo","ui","core/ui/UploadUtils","views/layout","text!templates/temp/finance.test.html"],function(r,o,t,n,e,i,a,d){var l,s,u,c;return l=i.UploadUtils,c=function(t){var e,n,i,a;if(n=o.head(t.files),i=null!=(a=t.response)?a.id:void 0,e=r(p),n&&i)return e.attr("href","finance/test.xml?id="+i),e.attr("download",n.name||"UNNAMED.xml"),e.prop("disabled",!1),null;e.prop("disabled",!0)},u=function(){var t,e;return r(p).prop("disabled",!0),t=r("#financeTestUpload"),e={async:{saveUrl:"finance/test/upload.json",saveField:"file"},success:c},l.withDefaults(e),t.kendoUpload(e),null},s=function(){var t,e;return e=n.template(d)({}),t={init:u},new n.View(e,t)},{init:function(){var t;return t=s(),a.register("financeTest","/test",t),null}}})}.call(this),function(){define("views/module",["views/layout","views/not.found","views/home/home","views/dashboards/module","views/data/module","views/flow/module","views/portfolios/portfolios","views/risk/module","views/reporting/module","views/settings/module","views/stress/module","views/index/module","views/rate/module","views/swap/module","views/import","views/documents/module","views/strategy/module","views/tag/module","views/temp/finance.test"],function(t,e,n,i,a,r,o,d,l,s,u,c,p,m,f,b,v,y,h){return{init:function(){return e.init(t),n.init(),i.init(),a.init(),r.init(),o.init(),d.init(),l.init(),s.init(),u.init(),c.init(),p.init(),m.init(),f.init(),b.init(),v.init(),y.init(),h.init(),null}}})}.call(this),function(){define("views",["views/module"],function(t){return t})}.call(this),function(){define("index.js",["jquery","i18n","site","ui","views","core/util/Loader"],function(t,e,n,i,a,r){var o;return o=function(){return n.init(function(){return a.init(),n.router.start()})},r.Loader.load().then(o)})}.call(this),require(["index.js"]);